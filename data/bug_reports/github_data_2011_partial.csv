repo,issue_link,issue_id,post,question,answer
qgis/QGIS,https://github.com/qgis/QGIS/issues/32641,qgis_QGIS_issues_32641,"QGIS Server WFS3 items page link issues

ping @elpaso How to reproduce: - Go to WFS3 items page for a layer, e.g. ``world`` layer in the qgis server vagrant machine - On the ``http://localhost:8080/project/helloworld/wfs3/collections/world/items`` page.. the links for every item are not correctly generated Meaning: * Wrong: ``http://localhost:8080/project/helloworld/wfs3/collections/world/item/0?`` it should be ``items`` in the link * Correct: ``http://localhost:8080/project/helloworld/wfs3/collections/world/items/0?`` Tried fixing it myself but the fix eluded me.",Can you add a failing test case somewhere near https://github.com/qgis/QGIS/blob/master/tests/src/python/test_qgsserver_api.py#L422 ?,@elpaso Will try and thanks for looking into this! You can reproduce it if you replace in your url ``items.html`` with ``items``. If I add the ``.html`` part it works for me also.
qgis/QGIS,https://github.com/qgis/QGIS/issues/30552,qgis_QGIS_issues_30552,"QGIS Server WMTS GetCapabilities returns no layers and no grids

### QGIS Server WMTS GetCapabilities The WMTS GetCapabilities request does not contain any layers or grids. `<Contents/>`is empty. Layers are checked in the project settings. ![Captura de ecrã de 2019-07-04 13-12-36](https://user-images.githubusercontent.com/163681/60665824-70047c00-9e5d-11e9-9d67-a7a4a399df20.png) **Describe the bug** The WMTS GetCapabilities should return the list of layers and the corresponding grids.  **QGIS and OS versions** 1. Project created with QGIS 3.8. 2. qgis-server 1:3.8.0+28bionic",Do you have WMS CRS restriction in your configuration ?,"Thanks for the feedback @rldhont How do I do that? I'm using EPSG:3857 in the project. Should I define this elsewhere in the QGIS Server options? No, no restrictions defined. The project is configured with all default options. Afterwards and went back and checked the layers in the WMTS section, to see if it was necessary to have layers on the WMTS GetCapabilities output."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34025,qgis_QGIS_issues_34025,"DB Manager no longer works with pqlib services

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> **How to Reproduce** 1. Go to DB Manager 2. Click on PostGIS connections 3. Scroll down to one connection defined using services 4. Open it 5. You will be prompted with a dialogue to enter credentials ![Screenshot from 2020-01-25 16-42-23](https://user-images.githubusercontent.com/163681/73124298-bfdd9880-3f91-11ea-9afc-536df7659ee5.png) **QGIS and OS versions** This happens on master only. I suspect that it is related with #33225, but I'm not sure. Can someone else confirm this on master? Compiling with a version prior to #33225 it works.",Does your problem also show up outside of DBManager @jgrocha ?,"Thanks @strk for looking into this. If I try to open a service based connection, I get this error: ![error connecting using db manager](https://user-images.githubusercontent.com/163681/73547181-57316880-4436-11ea-9571-561e3bc9805b.png) The error makes sense. **I don't have any connection with a service named `qgis_test`.** The DB Manager is not using the service name I have configured. This is my list of connections (all configured with services): ![connections](https://user-images.githubusercontent.com/163681/73547439-d9ba2800-4436-11ea-84f1-b55dc8fd124b.png) If I try to connect to any of these, the error is always the same."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32147,qgis_QGIS_issues_32147,"Clearing filter clears the selection for a feature

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** I have a polygon layer that I have filtered to show one feature. ![Screenshot 2019-10-07 at 12 33 52](https://user-images.githubusercontent.com/2510900/66305021-c1118980-e8fe-11e9-8c2d-11caba8e387c.png) I then proceed to select the feature using the visual selection tool ![Screenshot 2019-10-07 at 12 34 44](https://user-images.githubusercontent.com/2510900/66305076-ddadc180-e8fe-11e9-96cc-41feb64f70ee.png) I then return to clear the filter which in turn clears the selection ![Screenshot 2019-10-07 at 12 35 43](https://user-images.githubusercontent.com/2510900/66305158-03d36180-e8ff-11e9-8764-a26e733f6194.png) After clearing the selection I see that the feature is no longer selected ![Screenshot 2019-10-07 at 12 36 31](https://user-images.githubusercontent.com/2510900/66305205-1ea5d600-e8ff-11e9-944e-301962c8226d.png) **PS:** I know there is a better workaround for solving this issue **QGIS and OS versions** ![Screenshot 2019-10-07 at 12 37 28](https://user-images.githubusercontent.com/2510900/66305281-439a4900-e8ff-11e9-9693-89bf17600f7d.png)",What are you suggesting? A special logic for filter cleared instead of the generic filter-changed behavior?,"Yes, or maybe just a message to notify a user that clearing the filter will also clear the selection."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32615,qgis_QGIS_issues_32615,"Broken UI when loading layers through the Datasource Manager

# Problem I am just trying to load a layer using the Datasource manager and I experience a weird behavior with the UI. Broken UI ![broken-ui](https://user-images.githubusercontent.com/2510900/68102262-8d645800-feda-11e9-9e25-1e7180b2712d.png) ![broken_ui](https://user-images.githubusercontent.com/2510900/68102275-99501a00-feda-11e9-829c-6049dc927f76.png) ![save-1](https://user-images.githubusercontent.com/2510900/68102612-39f30980-fedc-11e9-8500-91a7c4dfc896.gif) ![os](https://user-images.githubusercontent.com/2510900/68102645-5727d800-fedc-11e9-909a-82e155aa60a6.png)",May be we need the same solution I applied here? https://github.com/qgis/QGIS/pull/31665 Does it look a similar issue?,yes @elpaso it looks like similar issue
qgis/QGIS,https://github.com/qgis/QGIS/issues/30041,qgis_QGIS_issues_30041,"Unable to add new features in QGIS for PostGIS table using sequence for gid. Data type serial: 'integer overflow'

PostGIS 2.2 USE_GEOS=1 USE_PROJ=1 USE_STATS=1 Postgres PostgreSQL 9.5.4, compiled by Visual C++ build 1800, 64-bit QGIS 2.18 Las Palmas  In QGIS I added the PostGIS - layer ""myschema.mytable"" and tried to save a new object. Following message appears: ""Konnte Änderungen am Layer mytable nicht festschreiben Fehler: FEHLER: Ein Objekt nicht hinzugefügt. Datenanbieterfehler: PostGIS-Fehler beim Attributhinzufügen: FEHLER: NULL-Wert in Spalte »gid« verletzt Not-Null-Constraint DETAIL: Fehlgeschlagene Zeile enthält (null, 0102000020E8640000020000004DAC4DB4A84918414C986446399155416E8719...)."" ""Could not commit changes on layer mytable Error: ERROR: One object is not added. Data provider error: PostGIS-Error on add attribute: ERROR: NULL- value in column »gid« is not permitted as an input because of Not-Null-Constraint DETAIL: Failed row contains (null, 0102000020E8640000020000004DAC4DB4A84918414C986446399155416E8719...)."" In QGIS should be the default for column 'gid': nextval('myschema.mytable_gid_seq'::regclass) Instead the default for column 'gid' is 'NULL'. To reproduce the error select on PostGIS: `SELECT 'myschema.mytable'::regclass::oid;` If the result is bigger than the maximum integer - value 2147483647 it is not possible to use data type 'serial' in QGIS to add a new object. But in PostGIS I can add objects if the value of column ""gid"" is of data type 'serial' and the result is bigger than 2147483647 because PostGIS has no ""integer overflow"". (Please refer to https://github.com/qgis/QGIS/issues/29489, https://issues.qgis.org/issues/21673) I think QGIS can't handle sequences after integer overflow. Is it possible to change the data type of regclass::oid from 'integer' into 'biginteger' in QGIS??","Do you use QGIS 2.18 Las Palmas ? This version is not supported anymore. If so, please update to QGIS 3.x. Thanks",I have one thing to add: it is the same behaviour with QGIS 3.x
qgis/QGIS,https://github.com/qgis/QGIS/issues/33614,qgis_QGIS_issues_33614,"QgsCoordinateReferenceSystem.fromWkt fails with e.g. GLanCE data record WKTs

**Problem** `QgsCoordinateReferenceSystem.fromWkt() ` fails to import some CRS WKTs which otherwise are recognized correctly by GDAL and can be imported via `QgsCoordinateReferenceSystem.fromProj4(gdalSRS.ExportToProj4())`. In consequence, QGIS shows a ""Layer has not coordinate reference system set"" error, e.g. for raster data sets that are projected in one of the 7 continental NASA GLANCE (see background below) projection systems. **How to reproduct** This example shows how `QgsCoordinateReferenceSystem.fromWkt()` fails to import the GLANCE LAEA projection WKT for South America. A unit test (`test_glance_wkts.py`), WKT definitions of the mentioned GLANCE CRS and a raster quality flag image projected in GLANCE_GRIDS_V01_SA_CRS (`20140803_LEVEL2_LND07_QAI.tif`) are appended [crs_glance.zip](https://github.com/qgis/QGIS/files/4023839/crs_glance.zip):  **Background** The NASA Global Land Cover mapping and Estimation (GLanCE) project defines 7 continental coordinate reference systems that are used for raster data records of global land cover, land use and land cover change at 30m resolution. Project details can be found at http://sites.bu.edu/measures/ The following CRS WKTs are take from https://github.com/measures-glance/glance-grids/tree/master/data/crs_wkt Name | WKT ------|---- GLANCE_GRIDS_V01_AF_CRS.wkt | PROJCS[""BU MEaSUREs Lambert Azimuthal Equal Area - AF - V01"",GEOGCS[""GCS_WGS_1984"",DATUM[""D_WGS_1984"",SPHEROID[""WGS_1984"",6378137.0,298.257223563]],PRIMEM[""Greenwich"",0.0],UNIT[""degree"",0.0174532925199433]],PROJECTION[""Lambert_Azimuthal_Equal_Area""],PARAMETER[""false_easting"",0.0],PARAMETER[""false_northing"",0.0],PARAMETER[""longitude_of_center"",20],PARAMETER[""latitude_of_center"",5],UNIT[""meter"",1.0]] GLANCE_GRIDS_V01_AN_CRS.wkt | PROJCS[""BU MEaSUREs Lambert Azimuthal Equal Area - AN - V01"",GEOGCS[""GCS_WGS_1984"",DATUM[""D_WGS_1984"",SPHEROID[""WGS_1984"",6378137.0,298.257223563]],PRIMEM[""Greenwich"",0.0],UNIT[""degree"",0.0174532925199433]],PROJECTION[""Lambert_Azimuthal_Equal_Area""],PARAMETER[""false_easting"",0.0],PARAMETER[""false_northing"",0.0],PARAMETER[""longitude_of_center"",0],PARAMETER[""latitude_of_center"",-90],UNIT[""meter"",1.0]] GLANCE_GRIDS_V01_AS_CRS.wkt | PROJCS[""BU MEaSUREs Lambert Azimuthal Equal Area - AS - V01"",GEOGCS[""GCS_WGS_1984"",DATUM[""D_WGS_1984"",SPHEROID[""WGS_1984"",6378137.0,298.257223563]],PRIMEM[""Greenwich"",0.0],UNIT[""degree"",0.0174532925199433]],PROJECTION[""Lambert_Azimuthal_Equal_Area""],PARAMETER[""false_easting"",0.0],PARAMETER[""false_northing"",0.0],PARAMETER[""longitude_of_center"",100],PARAMETER[""latitude_of_center"",45],UNIT[""meter"",1.0]] GLANCE_GRIDS_V01_EU_CRS.wkt | PROJCS[""BU MEaSUREs Lambert Azimuthal Equal Area - EU - V01"",GEOGCS[""GCS_WGS_1984"",DATUM[""D_WGS_1984"",SPHEROID[""WGS_1984"",6378137.0,298.257223563]],PRIMEM[""Greenwich"",0.0],UNIT[""degree"",0.0174532925199433]],PROJECTION[""Lambert_Azimuthal_Equal_Area""],PARAMETER[""false_easting"",0.0],PARAMETER[""false_northing"",0.0],PARAMETER[""longitude_of_center"",20],PARAMETER[""latitude_of_center"",55],UNIT[""meter"",1.0]] GLANCE_GRIDS_V01_NA_CRS.wkt | PROJCS[""BU MEaSUREs Lambert Azimuthal Equal Area - NA - V01"",GEOGCS[""GCS_WGS_1984"",DATUM[""D_WGS_1984"",SPHEROID[""WGS_1984"",6378137.0,298.257223563]],PRIMEM[""Greenwich"",0.0],UNIT[""degree"",0.0174532925199433]],PROJECTION[""Lambert_Azimuthal_Equal_Area""],PARAMETER[""false_easting"",0.0],PARAMETER[""false_northing"",0.0],PARAMETER[""longitude_of_center"",-100],PARAMETER[""latitude_of_center"",50],UNIT[""meter"",1.0]] GLANCE_GRIDS_V01_OC_CRS.wkt | PROJCS[""BU MEaSUREs Lambert Azimuthal Equal Area - OC - V01"",GEOGCS[""GCS_WGS_1984"",DATUM[""D_WGS_1984"",SPHEROID[""WGS_1984"",6378137.0,298.257223563]],PRIMEM[""Greenwich"",0.0],UNIT[""degree"",0.0174532925199433]],PROJECTION[""Lambert_Azimuthal_Equal_Area""],PARAMETER[""false_easting"",0.0],PARAMETER[""false_northing"",0.0],PARAMETER[""longitude_of_center"",135],PARAMETER[""latitude_of_center"",-15],UNIT[""meter"",1.0]] GLANCE_GRIDS_V01_SA_CRS.wkt | PROJCS[""BU MEaSUREs Lambert Azimuthal Equal Area - SA - V01"",GEOGCS[""GCS_WGS_1984"",DATUM[""D_WGS_1984"",SPHEROID[""WGS_1984"",6378137.0,298.257223563]],PRIMEM[""Greenwich"",0.0],UNIT[""degree"",0.0174532925199433]],PROJECTION[""Lambert_Azimuthal_Equal_Area""],PARAMETER[""false_easting"",0.0],PARAMETER[""false_northing"",0.0],PARAMETER[""longitude_of_center"",-60],PARAMETER[""latitude_of_center"",-15],UNIT[""meter"",1.0]]",Which proj library version are you using? (Check from the about screen),"I am using Proj 6.2.1. Maybe it's a Windows problem? Component | Version ------------|------------- QGIS version | 3.10.1-A Coruña QGIS code revision | ef24c526da Compiled against Qt | 5.11.2 Running against Qt |5.11.2 Compiled against GDAL/OGR | 3.0.2 Running against GDAL/OGR | 3.0.2 Compiled against GEOS | 3.8.0-CAPI-1.13.1 Running against GEOS | 3.8.0-CAPI-1.13.1 Compiled against SQLite | 3.29.0 Running against SQLite | 3.29.0 PostgreSQL Client Version | 11.5 SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 QScintilla2 Version | 2.10.8 Compiled against PROJ | 6.2.1 Running against PROJ | Rel. 6.2.1, November 1st, 2019 OS Version | Windows 10 (10.0) Active python plugins | db_manager; processing"
qgis/QGIS,https://github.com/qgis/QGIS/issues/30065,qgis_QGIS_issues_30065,"Qt Designer with QGIS 3.4.8 custom widgets crashes when QWebEngineView is clicked

Hi! I have a issue with Qt Designer installed with QGis 3.4.8 (Standalone). When try to use QWebEngineWidget to make a custom form, Qt Designer just close. S.O: windows 7 Professional QGIS: 3.4.8",Would you be able to test current master? This bug may have been recently fixed by @nyalldawson,"@elpaso Using S.O windows i can't, in the company we use only LTR versions, but testing this on Debian (qgis3.4) it works fine."
qgis/QGIS,https://github.com/qgis/QGIS/issues/33795,qgis_QGIS_issues_33795,"Control Feature Renderin order not working with atlas

**Describe the bug** I set a layer ""Control Feature Rendering Order"" to render ""@atlas_feature"" first but its not working **How to Reproduce** 1. make a point layer, some points must be near each other. 2. Right click on layer > Symbology check control rendering order and set to @atlas_feature and nulls handling as ""Nulls Last"" 3. Create a print layout and set the layer as coverage layer 4. activate the preview and navigate between the features. **QGIS and OS versions** QGIS version | 3.10.1-A Coruña S.O.: Debian Buster **Additional context** ![image](https://user-images.githubusercontent.com/24795382/72369775-9003da80-36df-11ea-8062-d12d1f08a8f8.png)",Don't you want to render it last so it overlap the others instead of first where it will be buried?,"Yess.... Em ter, 14 de jan de 2020 19:46, Alex <notifications@github.com> escreveu:"
qgis/QGIS,https://github.com/qgis/QGIS/issues/30787,qgis_QGIS_issues_30787,"DB manager cannot load anymore a PostGIS layer that is not registered in the geometry_columns table

In DB Manager run a ""create table"" query without doing the casting for the geometry, i.e. CREATE TABLE test as SELECT row_number() over () as gid, a.gid AS id, b.gid AS id2, ST_MakeLine(a.geom, b.geom) AS geom FROM points1 a, points2 b In QGIS 2.18: as there was no casting the table/layer is shown (just) with a ""?"" icon, but it *can* be loaded in the QGIS project. ![Screenshot_20190718_100819](https://user-images.githubusercontent.com/1951107/61445030-7528f700-a944-11e9-94d2-60c8c2402b6a.png) In QGIS 3 (tested master): the table/layer is shown multiple times: with the ""?"" icon as also with the icons for points, lines and polygons (but of course the real geometry is only one of them). Moreover trying to add the layer in the project it returns an error. ![Screenshot_20190718_101409](https://user-images.githubusercontent.com/1951107/61445183-cc2ecc00-a944-11e9-817a-7f494f0e8391.png)",What happens if you load one of the entries with a geometry type icon? Cc @olivierdalang,"@m-kuhn it only works if you choose (or guess) the correct geometry type. From a user point of view is a clear step backwards: for tables not registered in the geometry_columns table the correct behavior is the one we had in 2.18: show the layer/table with the ""?"" icon and allow to add it to the project (as they layer/table has really nothing wrong other than not being created doing the geometry casting in the query)."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34486,qgis_QGIS_issues_34486,"""automatically pan/zoom to the current feature"" is broken

QGIS 3.10.2/master on Windows and Linux. Open a attribute table in form view, then enable the ""automatically pan to the current feature"" or ""automatically zoom to the current feature"" and navigate the feature with the provided arrows. No pan or zoom whatsoever. ![Peek 2020-02-16 19-46](https://user-images.githubusercontent.com/1951107/74611622-5f0b3100-50f5-11ea-8742-59c75c07c1ff.gif)",Can you share the project?,"@3nids found the culprit, is happens when ![Screenshot_20200216_203237](https://user-images.githubusercontent.com/1951107/74612252-7e0cc180-50fb-11ea-890c-dbce4a96eb2b.png) is selected rather than ![Screenshot_20200216_203306](https://user-images.githubusercontent.com/1951107/74612257-8bc24700-50fb-11ea-96f2-da98d4c8622e.png)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32366,qgis_QGIS_issues_32366,"Report : Predefined scale (best fit) doesnt' work

Aloha, **Describe the bug** In a report, if you set the Controlled by atlas property to Predefined scale (best fit), the map item will be transformed (in my case, its height and length were augmented and the map weren't contained anymore in the layout). The property works properly in a simple atlas made with composer. **How to Reproduce** Create a report, add a group attribute section create a map set the Controlled by atlas property to Predefined scale (best fit) ![image](https://user-images.githubusercontent.com/5716587/67407244-84f54e80-f5b7-11e9-8704-1898d2b4a82e.png) ![image](https://user-images.githubusercontent.com/5716587/67407322-9b9ba580-f5b7-11e9-8e27-9f56833d006d.png) ![image](https://user-images.githubusercontent.com/5716587/67407367-ac4c1b80-f5b7-11e9-9124-b45180499b77.png)",What version of QGIs are you using ?,Thanks. We're actually in 3.4.7.
qgis/QGIS,https://github.com/qgis/QGIS/issues/30171,qgis_QGIS_issues_30171,"Error writing to pivot table in many-to-many relations when adding related feature

I get a foreign key constraint violation in postgis database when trying to add a new feature from relation widget. Looks like QGIS tries first to write to pivot table and then to a related table. That's a wrong order. It should first write to a related table and then to a pivot table.",What QGIS version?,3.6
qgis/QGIS,https://github.com/qgis/QGIS/issues/32093,qgis_QGIS_issues_32093,"Make label rotation data driven

Looks like `rotation` property of `Labels` dialog is the only one, that can't be set by expression. Could it be made data defined?",Which rotation property are you referring to? Maybe I misunderstand but I can see a data defined rotation property in Labels --> Placement --> Data-defined frame,I'm referring to rotation property of polygon labels. ![image](https://user-images.githubusercontent.com/966321/66377010-6ab55100-e9b9-11e9-8e36-d105b1e40078.png)
qgis/QGIS,https://github.com/qgis/QGIS/issues/31541,qgis_QGIS_issues_31541,"Union algorithm with a single layer returns incomplete geometry

I have a shapefile on which I apply the [Union ](http://changelog.qgis.org/en/qgis/version/3.2.0/#union-algorithm-with-single-layer)algorithm using only this layer (no overlapping layers): 1. startup algorithm union 2. select the layer 3. save as GeoPackage ![image](https://user-images.githubusercontent.com/7631137/64166064-9e470d80-ce46-11e9-8627-a1900d2026f0.png) at the end of the process I DO NOT receive errors in the log but the geometry is clearly not complete, a piece is missing. ![image](https://user-images.githubusercontent.com/7631137/64153396-1570a780-ce2f-11e9-8cf4-f00f030bceee.png) PS1: if I left as a temporary file I get an error (issue [#31528](https://github.com/qgis/QGIS/issues/31528)) PS2: if I save in shp I get an error and the geometry is incomplete ## problem related to this issue [#31528](https://github.com/qgis/QGIS/issues/31528) ?? ## shapefile: [shape.zip](https://github.com/qgis/QGIS/files/3568314/shape.zip)  ## OSGeo4W64 Win 10 win 10",Can you confirm? If this is the case (we need a dev confirmation) this could affect also other tools.,"@gioman Unfortunately I cannot confirm, other errors remain. ![image](https://user-images.githubusercontent.com/7631137/64201168-4e8c3480-ce8e-11e9-8e7b-3e9f1aaa47be.png) ![image](https://user-images.githubusercontent.com/7631137/64201233-7bd8e280-ce8e-11e9-8819-856fad5d96b4.png) You get an error in the EPSG 4326 case ??"
qgis/QGIS,https://github.com/qgis/QGIS/issues/33428,qgis_QGIS_issues_33428,"Restore Project / Scratch Layers after abnormal termination

Using the latest version of QGIS (at the time of this request 3.10.1) means that I have to deal with crashes. It would be much easier to deal with them if after starting up after a crash QGIS asked me if I wanted to restore my previous session including scratch / memory layers. Photoshop has similar functionality to this. This would also protect against power outages and give the user the ability to control-alt-delete to end the program if a process was taking much longer than expected without losing all their work.",What are the crashes that you are experiencing?,"All manor of crashes. It sometimes even crashes when it's sitting idle. My work involves a lot of process automation. Right now I am creating extensive python scripts to automate mapping and data workflows. After I run a script that modifies a layout, for example adding a layer to an existing LayoutItemLegend than the session becomes unstable and if I attempt to open the layout that was modified QGIS churns for a long while and then crashes. Interestingly, it seems that if I wait for a few minutes after my script completes then there seem to be fewer crashes as if there is additional housekeeping happening after my script finishes. This is one example, but as I said the crashes have been pretty frequent. So much so that I have restored my system from an image and only installed base programs to make sure I don't have a corrupt install. They also occur on two separate PCs. I do a lot of saving to minimize data loss, but having a restore mechanism would be much more efficient. I think it's normal that there will be a few crashed when using the latest version of open-source software. Having the ability to restore one's last session would definitely encourage more people to use and test development versions."
qgis/QGIS,https://github.com/qgis/QGIS/issues/30154,qgis_QGIS_issues_30154,"PyQGIS: Error adding layer to Overview Panel

**Describe the bug** I am writing a QGIS plugin and I want to have a **method that adds a layer to the map and show it in the Overview Panel**. This is working but the layer is showing ""distorted"" in the Overview panel until, for example you resize the overview panel and it refreshes. Is this a bug in QGIS? **How to Reproduce** 1. Open QGIS (or a new project) 2. Open Python Console 3. Open the editor from the console 4. Paste the following code and press ""Run Script""  Observations: - The layer in the Overview in showing distorted. - You can resize the panel, it refreshes and reloads correctly. You can also refresh it running from the Python console: `iface.layerTreeCanvasBridge().overviewCanvas().refresh()` - If you remove the layer and execute the code again, it will run correctly, so you must reopen QGIS or close and open a new project. - If you run the snippet directly from the python console, it will run ok. **QGIS and OS versions** I have tried in QGIS 3.6.3 and 3.4.7, both in Ubuntu 18.04 and Windows 10.","What is the CRS of the new project? What is the CRS after you added the layer? BTW, you can do a single block code with python syntax highlighted. https://help.github.com/en/articles/creating-and-highlighting-code-blocks#syntax-highlighting","Thank you very much!, formatting of block of code fixed. The CRS of a new project is EPSG:4326, and is EPSG:3857 after adding the layer. But note that the layer i**s always loaded correctly in the main map**, the problem is in the overview panel (and it corrects automatically after resizing the panel)."
qgis/QGIS,https://github.com/qgis/QGIS/issues/33723,qgis_QGIS_issues_33723,"Editing non-spatial tables is broken

I am trying to add a record to a non-spatial table (geopackage). But it is completely broken. Every time I apply changes, it resets the values. ![non-spatial-table](https://user-images.githubusercontent.com/2649047/72146565-a97ded00-3394-11ea-91b5-d571a1564757.gif)",Which QGIS version(s) is/are affected?,Ahhhh...thanks @DelazJ ...my bad. I seem to remember to button for a single feature was there!
qgis/QGIS,https://github.com/qgis/QGIS/issues/34303,qgis_QGIS_issues_34303,"Incorrect results when running Query Builder to filter features for a layer

To replicate the issue in QGIS master: - Add a vector layer - Go to Properties > Source - Select Query Builder - Write a valid query and click on Test - The result is not shown correctly: ![image](https://user-images.githubusercontent.com/2649047/73835704-c546a880-4805-11ea-8957-840e5e9c902c.png)",Can you attach a sample project? Why did you close this btw?,"Ale, after filing the ticket and reloading the layer, all started working again! Magic of ![Alt Text](https://media.giphy.com/media/F7yLXA5fJ5sLC/giphy.gif)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/36121,qgis_QGIS_issues_36121,"Applying same value to multiple fields

Currently, this is possible using field calculator. But an easier way is: https://desktop.arcgis.com/en/arcmap/10.3/manage-data/editing-attributes/applying-the-same-attribute-values-to-multiple-features-in-a-layer.htm",Do you mean this https://docs.qgis.org/testing/en/docs/user_manual/working_with_vector/attribute_table.html#editing-multiple-fields ?,I'd better RTFM :)
qgis/QGIS,https://github.com/qgis/QGIS/issues/30194,qgis_QGIS_issues_30194,"value relation widget, data is saved as Key Column values instead of Value Column values

When using the value relation widget on a column all the data is correctly visualized as Value Column values but in the background the data is actually saved as Key Column values. This becomes clear when trying to set up an expression refering to a column with a Value relation widget or trying a search by expression on such a column.",What QGIS Version? Can you please attach a sample project with data and the detailed steps to follow in order to replicate?,"Hi, I'm working in qgis 3.6.3 I recreated the problem in a small project (see attachment). I set up a simple value relation (no cascades applied here) for ""field1"" I set up ""field2"" to have a default value (when updated) based on an expression refering to ""field1"" In the expression I used both Key column values and Value column values. Only in the features where the Key column is used the expression is applied. Other simple test: do a search by expression ""field1"" = 'S' gives two results ""field1"" = 'sad' gives no result I also figured this could be by design, but it's not intuitive this way (at least for me it wasn't). Speaking of which, I also posted a feature request (back on Redmine) on the value relation widget (#29640) which hasn't produced any response so far. This one also deals with the practical useability of this widget when wanting to make a more than one step drive down cascade. [bugreport_valuerelation.zip](https://github.com/qgis/QGIS/files/3286748/bugreport_valuerelation.zip)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31356,qgis_QGIS_issues_31356,"Virtual Layer SQLite Natural Join - Instant Crash

**Describe the bug** My understanding is that QGIS is SQLite3 compliant, and as such, should be compatible with SQLite3 syntax and functions. **How to Reproduce** ![image](https://user-images.githubusercontent.com/19295950/63547312-de7ac780-c4f9-11e9-941a-991ed764fa3a.png) Create new Virtual Layer Import needed layers (One MultiLineString, one Table) Write SQLite Code: SELECT * FROM ""CAMP-RS_JobsList_XLS"" NATURAL JOIN ""Reconciled"" Test & get valid SQLite code confirmation Click Add and QGIS crashes instantly to desktop **QGIS and OS versions** QGIS version | 3.8.2-Zanzibar | QGIS code revision | 4470baa1a3 -- | -- | -- | -- Compiled against Qt | 5.11.2 | Running against Qt | 5.11.2 Compiled against GDAL/OGR | 2.4.1 | Running against GDAL/OGR | 2.4.1 Compiled against GEOS | 3.7.2-CAPI-1.11.0 | Running against GEOS | 3.7.2-CAPI-1.11.0 b55d2125 PostgreSQL Client Version | 10.8 | SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 | QScintilla2 Version | 2.10.8 Compiled against PROJ | 5.2.0 | Running against PROJ | Rel. 5.2.0, September 15th, 2018 OS Version | Windows 10 (10.0) | |",Can you add a sample dataset?,"@gioman, I'll have to see if I can create a sanitized dataset for sharing. @roya0045, I'll see what I can get. Currently, nothing gets logged at all by QGIS, nor does QGIS make a dump file. I think there might be a MS/SysInternals tool I can try to see if it'll capture anything."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32896,qgis_QGIS_issues_32896,"Export to Image and Convert map to raster to use C++/OpenCL Rendering pathway

**Feature description.** It'd be great if the Export to Image and Convert map to raster algorithms made use of the C++/OpenCL rendering pipeline of other QGIS Raster processing algorithms in order to speed up the rendering of the output.",What dpi and output sizes are we taking about?,"QGIS version | 3.10.0-A Coruña | QGIS code revision | 6ffa89eb3e -- | -- | -- | -- Compiled against Qt | 5.11.2 | Running against Qt | 5.11.2 Compiled against GDAL/OGR | 3.0.2 | Running against GDAL/OGR | 3.0.2 Compiled against GEOS | 3.8.0-CAPI-1.13.1 | Running against GEOS | 3.8.0-CAPI-1.13.1 Compiled against SQLite | 3.29.0 | Running against SQLite | 3.29.0 PostgreSQL Client Version | 11.5 | SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 | QScintilla2 Version | 2.10.8 Compiled against PROJ | 6.2.1 | Running against PROJ | Rel. 6.2.1, November 1st, 2019 OS Version | Windows 10 (10.0) Active python plugins | CalculateGeometry; DigitizingTools; Discovery; geocode_sqlite; GeoCoding; go2mapillary; go2streetview; LAStools; loadthemall; MemoryLayerSaver; mmqgis; nominatim; nominatim_locator_filter; PeliasGeocoding; qdraw; QuickOSM; quick_map_services; report; searchlayers; StreetView; db_manager; processing Depends heavily upon export document resolution and export spatial resolution, depending upon which export path I take. Typically, I'm working with at least 300+ DPI for document resolution, or 1m/1ft per pixel for spatial resolution. Extents aren't typically huge... For an example of where/when I've used this method, see my answer to this GIS.StackExchange question: https://gis.stackexchange.com/questions/341739/extracting-processing-raster-information-from-lyr-or-kmz-file/341745#341745 Or see these data generated using the above methods to test against the Windows Image Components for direct geotiff editing within Paint.NET (which is live thanks to Rick Brewster!) https://github.com/Saijin-Naib/WIC-GeoTIFF-Testfiles I'm not certain whether or not the version I'm testing has those commits in, I've attached my QGIS version information above. I'll try and profile the exports if I get a chance later. I'm headed to work here shortly again."
qgis/QGIS,https://github.com/qgis/QGIS/issues/33068,qgis_QGIS_issues_33068,"Attributes Form Editor - Can't have multiple instances of same field

**Describe the bug** If an attribute form has multiple widgets pointing to the same field, they will all share the same value and will reflect one another when the value is changed. **How to Reproduce** Have an attributes form with multiple widgets pointed to the same field. Why would you have a form set up this way? Imagine you have a form where you want to track the Type, Extent, Severity for multiple different Distress types (Drainage, Roughness, Treatment Condition, Alligator Tracking, Long/Trans Cracking, Patching/Potholes, Rutting, Bleeding/Raveling) for a given type of road cover. The way the target database is modeled, each type of Distress gets a unique numerical ID and Extent and Severity both get L/M/H values that get summed and stored in a Distress_Value column. With this setup, the Attributes Form as they stand can not be used. By setting the Extent or Severity in one Distress, you set it across ALL distress values. Despite being present multiple different times, each widget is effectively the same ""instance"" for writing out to the dataset. **QGIS and OS versions** QGIS version | 3.10.0-A Coruña | QGIS code revision | 6ffa89eb3e -- | -- | -- | -- Compiled against Qt | 5.11.2 | Running against Qt | 5.11.2 Compiled against GDAL/OGR | 3.0.2 | Running against GDAL/OGR | 3.0.2 Compiled against GEOS | 3.8.0-CAPI-1.13.1 | Running against GEOS | 3.8.0-CAPI-1.13.1 Compiled against SQLite | 3.29.0 | Running against SQLite | 3.29.0 PostgreSQL Client Version | 11.5 | SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 | QScintilla2 Version | 2.10.8 Compiled against PROJ | 6.2.1 | Running against PROJ | Rel. 6.2.1, November 1st, 2019 OS Version | Windows 10 (10.0) Active python plugins | CalculateGeometry; cartogram3; changeDataSource; DataPlotly; DEMto3D; dzetsaka; GeoCoding; GeodesicDensifier; geomovetools; getools; GroupPointsWithinDistance; guided_offline_editing; htpgeoprocessor; joinmultiplelines; karika; kmltools; kml_style_importer; LandSurveyCodesImport; LAStools; latlontools; LineDirectionHistogram; lrs; maps2winbugs; MemoryLayerSaver; minimum_spanning_tree; mmqgis; networks; openlayers_plugin; oscars-georaster-qgis-plugin; ParallelLineConstruction; pdaltools; photo2shape; PluginLoadTimes; Polygons_Pile; polystrip; processing_circuitscape; processing_fusion; processing_gnm; processing_js; processing_pktools; processing_prepair; processing_r; processing_saga_nextgen; processing_taudem; processing_trajectory; processing_whitebox; project_colors_dock; qchainage; qconsolidate; qdraw; qgiscloud; QGISSortAndNumber-master; QRectangleCreator; QuickOSM; realcentroid; refFunctions; SelectWithin; sen2cor_adapter; Serval; shapetools; snail; spatial_query_with_values; SplitPolygonShowingAreas; SpreadsheetLayers; statist; ThToolBox; toggle_labels_widget; trail_elevation_stats; wnt; db_manager; processing **Additional context** Attempting to make a Attributes Form to interact with the CAMP-RS database. Here's a sample form/print layout I made in QGIS for collecting, I want to use the Attributes Form for future collecting as well as current data entry. [Road Survey Form - Optimized 1.pdf](https://github.com/qgis/QGIS/files/3888998/Road.Survey.Form.-.Optimized.1.pdf) Here's how CAMP-RS's own tool exposes the survey interface: ![image](https://user-images.githubusercontent.com/19295950/69582922-a75bfc80-0fa7-11ea-93bb-05818ab9db7d.png) Here's how that data gets written to the database: ![image](https://user-images.githubusercontent.com/19295950/69582982-c5c1f800-0fa7-11ea-8d43-bbfae7b80c50.png)",Does not fit your needs? have you considered supporting the work needed to implement exactly what you need?,"No, I've not been able to make that work the way I'm looking to. It is entirely possible that I'm just not implementing it correctly on my end, however. I have indeed, and I've had this discussion a few times with Nyall already. In summary: - I'm acting as an independent end user/QGIS fan. - I lack the personal resources to fund the project more than small (sub-$100USD) donations sporadically. - I lack any real/appreciable programming skill. Look at my GitHub commit history if you want a laugh. - I do have access to some larger GIS organizations and people in my network, which I do evangelize QGIS and related OSGEO projects to. - I lack the personal capital at my employment to have gotten them to invest/fund QGIS development, despite my consistent and hard pushes to move us away from Arc. - When I can secure funding, I will 100% do so. Until then, I'm just a low-resource end user. Unless something like this is bite-sized enough for me to fund, or someone is flexible enough to setup a lot of small ""gates"" that I can fund as my budget allows."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34536,qgis_QGIS_issues_34536,"Don't Export Page If Frame Is Empty does not seem to take effect

**Describe the bug** The Frames options to hide/not export pages/frames that are empty seemingly do not take effect. **How to Reproduce** 1) Set Frames Resize mode to Use Existing Frames 2) Check Don't Export Page If Frame Is Empty 3) Check Don't Draw Background If Frame Is Empty 4) Observe that empty frames are drawn with headers (#34535 ), and ""empty"" pages are present **QGIS and OS versions** QGIS version | 3.10.2-A Coruña | QGIS code revision | d4cd3cfe5a -- | -- | -- | -- Compiled against Qt | 5.11.2 | Running against Qt | 5.11.2 Compiled against GDAL/OGR | 3.0.3 | Running against GDAL/OGR | 3.0.4 Compiled against GEOS | 3.8.0-CAPI-1.13.1 | Running against GEOS | 3.8.0-CAPI-1.13.1 Compiled against SQLite | 3.29.0 | Running against SQLite | 3.29.0 PostgreSQL Client Version | 11.5 | SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 | QScintilla2 Version | 2.10.8 Compiled against PROJ | 6.3.0 | Running against PROJ | Rel. 6.3.1, February 10th, 2020 OS Version | Windows 10 (10.0) Active python plugins | CalculateGeometry; contour; MemoryLayerSaver; openlayers_plugin; ORStools; PeliasGeocoding; PluginLoadTimes; realcentroid; SpreadsheetLayers; zoom_level; db_manager; MetaSearch; processing **Additional context** ![image](https://user-images.githubusercontent.com/19295950/74777888-728ad900-5268-11ea-82a5-af5758d3daeb.png)",Can you track it down?,"It looks like it is due to the fact that the Pages were inserted manually to accomodate organization/sizing of the additional Frames needed for overflow, as otherwise, I just got one additional frame per page when handled automatically by the layout engine. Would the template or project be helpful at this juncture?"
qgis/QGIS,https://github.com/qgis/QGIS/issues/34735,qgis_QGIS_issues_34735,"Project with 3D View and certain symbology on 2D vector crashes with QGIS > 3.4.15-1

**Describe the bug** Project will open under 3.4.15-1. Project will hang/crash under 3.12.0. Project will hang/crash under 3.13.0. Project was initially created/worked with under 3.10.x **How to Reproduce** Project files: [34735.7z.zip](https://github.com/qgis/QGIS/files/4262918/34735.7z.zip) Open attached project (Town_3D_Terrain) and attempt to load. Open attached project (Town_3D_Terrain_novector), and see that the same raster/extent loads fine. Open attached project (Town_3D_Terrain_buildingsoff), and see that the data loads fine. Toggle on the Simplified layer, and see it hang/crash. **QGIS and OS versions** QGIS version | 3.4.15-Madeira | QGIS code revision | e83d02e274 -- | -- | -- | -- Compiled against Qt | 5.11.2 | Running against Qt | 5.11.2 Compiled against GDAL/OGR | 2.4.3 | Running against GDAL/OGR | 2.4.3 Compiled against GEOS | 3.8.0-CAPI-1.13.1 | Running against GEOS | 3.8.0-CAPI-1.13.1 PostgreSQL Client Version | 11.5 | SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 | QScintilla2 Version | 2.10.8 Compiled against PROJ | 5.2.0 | Running against PROJ | Rel. 5.2.0, September 15th, 2018 Active python plugins | gupsapp; db_manager; MetaSearch; processing QGIS version | 3.12.0-București | QGIS code revision | cd141490ec -- | -- | -- | -- Compiled against Qt | 5.11.2 | Running against Qt | 5.11.2 Compiled against GDAL/OGR | 3.0.4 | Running against GDAL/OGR | 3.0.4 Compiled against GEOS | 3.8.0-CAPI-1.13.1 | Running against GEOS | 3.8.0-CAPI-1.13.1 Compiled against SQLite | 3.29.0 | Running against SQLite | 3.29.0 PostgreSQL Client Version | 11.5 | SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 | QScintilla2 Version | 2.10.8 Compiled against PROJ | 6.3.1 | Running against PROJ | Rel. 6.3.1, February 10th, 2020 OS Version | Windows 10 (10.0) Active python plugins | db_manager; MetaSearch; processing QGIS version | 3.13.0-Master | QGIS code revision | 39a9ae9dfd -- | -- | -- | -- Compiled against Qt | 5.11.2 | Running against Qt | 5.11.2 Compiled against GDAL/OGR | 3.1.0dev | Running against GDAL/OGR | 3.1.0dev Compiled against GEOS | 3.8.0-CAPI-1.13.1 | Running against GEOS | 3.8.0-CAPI-1.13.1 Compiled against SQLite | 3.29.0 | Running against SQLite | 3.29.0 PostgreSQL Client Version | 11.5 | SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 | QScintilla2 Version | 2.10.8 Compiled against PROJ | 7.0.0 | Running against PROJ | Rel. 7.0.0, March 1st, 2020 OS Version | Windows 10 (10.0) | This copy of QGIS writes debugging output. Active python plugins | db_manager; MetaSearch; processing **Additional context** 3.4.15-1 ![image](https://user-images.githubusercontent.com/19295950/75465215-4d782380-5956-11ea-823b-965cb2aef150.png) 3.12.0 ![image](https://user-images.githubusercontent.com/19295950/75463297-9aa6c600-5953-11ea-8dbb-fa517378735e.png) 3.13 ![image](https://user-images.githubusercontent.com/19295950/75464941-eeb2aa00-5955-11ea-9fc8-609c0a3ba9d8.png)",Could you share the project?,"Yeah, sorry, I was just compressing it to add it into my issue above."
qgis/QGIS,https://github.com/qgis/QGIS/issues/30232,qgis_QGIS_issues_30232,"Segfault in raster caculator

When I use the raster calculator as soon as I click on okay to start the calculation, it shows a small black window (I guess it should be a progress bar) and then qgis crashed. this is my qgis version: QGIS version | 3.6.3-Noosa | QGIS code branch | Release 3.6 -- | -- | -- | -- Compiled against Qt | 5.12.1 | Running against Qt | 5.12.1 Compiled against GDAL/OGR | 2.3.2 | Running against GDAL/OGR | 2.3.2 Compiled against GEOS | 3.7.1-CAPI-1.11.1 | Running against GEOS | 3.7.1-CAPI-1.11.1 27a5e771 PostgreSQL Client Version | 11.3 | SpatiaLite Version | 4.3.0a QWT Version | 6.1.3 | QScintilla2 Version | 2.11.1 Compiled against PROJ | 5.2.0 | Running against PROJ | Rel. 5.2.0, September 15th, 2018 OS: Fedora Linux 30 kernel: 5.1.6-300.fc30.x86_64 QGis installed from https://copr.fedorainfracloud.org/coprs/dani/qgis/ as said on the official website. Is there any way to provide a better crash report?",does is happen with any data and regardless of the formula?,"Yes! It happens with any data and with any formula On Sat, Jun 15, 2019, 14:22 Giovanni Manghi <notifications@github.com> wrote:"
qgis/QGIS,https://github.com/qgis/QGIS/issues/36033,qgis_QGIS_issues_36033,"Reproducible crash using QgsMapCanvas.items() with Oracle layers

We have found a situation that makes QGis Crash. It didn't crash on QGis versions 3.4.12 and below. But it does crash on Qgis versions 3.4.13 and up. He highest version we have tested is 3.10.5 (QGIS code revision 4958ac7241). The crash raises on invoking QgsMapCanvas.items(QRect), under that sequence of steps: - Add at least one Oracle layer. - Having a tool inheriting from QgsMapToolCapture, we activate it (super.activate()) That done, a crash will raise if we attempt to invoke 'iface.mapCanvas().items(QRect)' **How to reproduce - Step 1: prepare an Oracle spatial table** You need access to an Oracle database where you are able to create a table. Then you can use the attached ‘oracle_setup.sql’ to create a sample table:  After that, you will see 'This is going to crash...' on the console, and after a short moment, QGis will crash.",What's the platform OS? Do you have any crash stacktrace?,"We are using Windows 10 PRO, 64 bit edition. We do not have any stacktrace. QGis just closes without any crash window. On Mon, 27 Apr 2020 at 15:01, Julien Cabieces <notifications@github.com> wrote:"
qgis/QGIS,https://github.com/qgis/QGIS/issues/30569,qgis_QGIS_issues_30569,"SRS transformation failures with PROJ 6.1.0

Steps to reproduce: add multiple data sources (in my example – three ESRI Shapefiles) with different SRS'es. Actual result: Expected result: no error. Valgrind output contains usual chatter about Python, still there is something interesting during exiting from QGIS, (Invalid write of size 4 in pj_ctx_set_errno) still it has nothing to do with this issue. Plain debug output is a bit more interesting (from 3.9, still the same issue is also observable in 3.8.0): QGIS versija | 3.9.0-Master | QGIS koda revīzija | ad8174eeca -- | -- | -- | -- Kompilēts priekš Qt | 5.12.3 | Darbina ar Qt | 5.12.3 Kompilēts priekš GDAL/OGR | 2.4.1 | Darbina ar GDAL/OGR | 2.4.1 Kompilēts priekš GEOS | 3.7.0-CAPI-1.11.0 | Darbina ar GEOS | 3.7.0-CAPI-1.11.0 673b9939 PostgreSQL klienta versija | 10.9 | SpatiaLite versija | 5.0.0-beta1 QWT versija | 6.1.3 | QScintilla2 versija | 2.11.1 Compiled against PROJ | 6.1.0 | Running against PROJ | Rel. 6.1.0, May 15th, 2019 Šī QGIS kopija raksta atkļūdošanas informāciju. OS Version | Gentoo/Linux | |",What does projinfo -s EPSG:3059 -t EPSG:4326 output?,
qgis/QGIS,https://github.com/qgis/QGIS/issues/30270,qgis_QGIS_issues_30270,"QGIS Server: Wrong Font display

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> In QGIS Server, fonts are poorly displayed on Windows. This is how it looks in QGIS - font Times New Roman ![Label in QGIS](https://user-images.githubusercontent.com/45253533/59769266-12413300-92a6-11e9-8267-c554c1298834.jpg) This is how it looks label from QGIS Server by WMS - font is unknown for my and wrong char ""ě"" ![Label from QGIS Server by WMS](https://user-images.githubusercontent.com/45253533/59769265-12413300-92a6-11e9-937b-c3760c48b719.jpg) **How to Reproduce** 1. Create virtual directory on IIS with setting in  3. Invoke URL for WMS service <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> **QGIS and OS versions** - QGIS and QGIS server 3.6.3-Noosa - Windows 10 (build 1903) <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> **Additional context** How QGIS Server is looking for fonts is a mystery to me. <!-- Add any other context about the problem here. -->",Do you have access to the server and can you check if the font is installed on the server?,I'm running QGIS Server and QGIS on the same machine. Please have you an idea way QGIS Server did not find fonts? Thank you very much for your reply.
qgis/QGIS,https://github.com/qgis/QGIS/issues/36216,qgis_QGIS_issues_36216,"Oracle Provider -  CRS detection issue

Description Using a connection to Oracle 12c QGIS 3.8.4 correctly detects and sets the c ordinate reference system as 'EPSG:3005 - NAD83 / BC Albers - Projected'. Using QGIS 3.10.5 the detected coordinate system is 'Unknown CRS: <PROJCRS STRING FOR 3005>'. The projcrs string looks correct but QGIS does not have a translation from Unknown into epsg:3005 so the data can't be mapped with other named projection data. The only other Oracle based data I have access to is in EPSG:4326 which is also detected as 'Unknown CRS: <PROJCRS STRING FOR 4326>' Attached screenshots for the layer properties created from the same table in QGIS 3.10.5 and 3.8.4. When trying to identify which release this changed in I found QGIS 3.10.0 provides no CRS information. Layer Properties from QGIS 3.10.5 ![3 10 5](https://user-images.githubusercontent.com/10637797/81104355-3a8a4e00-8ec7-11ea-843c-e3772527c6f8.PNG) Layer Properties from QGIS 3.8.4 ![3 8 3](https://user-images.githubusercontent.com/10637797/81104363-3c541180-8ec7-11ea-9760-6d743a3af70d.PNG) ** system info `` QGIS version 3.10.5-A Coruña QGIS code revision 984615fe1e Compiled against Qt 5.11.2 Running against Qt 5.11.2 Compiled against GDAL/OGR 3.0.4 Running against GDAL/OGR 3.0.4 Compiled against GEOS 3.8.1-CAPI-1.13.3 Running against GEOS 3.8.1-CAPI-1.13.3 Compiled against SQLite 3.29.0 Running against SQLite 3.29.0 PostgreSQL Client Version 11.5 SpatiaLite Version 4.3.0 QWT Version 6.1.3 QScintilla2 Version 2.10.8 Compiled against PROJ 6.3.1 Running against PROJ Rel. 6.3.1, February 10th, 2020 OS Version Windows Server 2016 (10.0) ``",Can you copy and paste that wkt string from the screenshot here please?,"For sure. Thanks for your time. Unknown` CRS: PROJCRS[""NAD83 / BC Albers"",BASEGEOGCRS[""NAD83"",DATUM[""North American Datum 1983 (EPSG ID 6269)"",ELLIPSOID[""GRS 1980 (EPSG ID 7019)"",6378137,298.257222101,LENGTHUNIT[""metre"",1,ID[""EPSG"",9001]]]],PRIMEM[""Greenwich"",0,ANGLEUNIT[""Decimal Degree"",0.0174532925199433]]],CONVERSION[""unnamed"",METHOD[""Albers Conical Equal Area""],PARAMETER[""Latitude_Of_Origin"",45,ANGLEUNIT[""Decimal Degree"",0.0174532925199433]],PARAMETER[""Central_Meridian"",-126,ANGLEUNIT[""Decimal Degree"",0.0174532925199433]],PARAMETER[""Standard_Parallel_1"",50,ANGLEUNIT[""Decimal Degree"",0.0174532925199433]],PARAMETER[""Standard_Parallel_2"",58.5,ANGLEUNIT[""Decimal Degree"",0.0174532925199433]],PARAMETER[""False_Easting"",1000000,LENGTHUNIT[""Meter"",1]],PARAMETER[""False_Northing"",0,LENGTHUNIT[""Meter"",1]]],CS[Cartesian,2],AXIS[""(E)"",east,ORDER[1],LENGTHUNIT[""Meter"",1]],AXIS[""(N)"",north,ORDER[2],LENGTHUNIT[""Meter"",1]]] - Projected Government of British Columbia Ministry of Sustainable Resource Management. http://srmwww.gov.bc.ca/gis/bceprojection.html 3005 PROJCS[""NAD83 / BC Albers"", GEOGCS [ ""NAD83"", DATUM [""North American Datum 1983 (EPSG ID 6269)"", SPHEROID [""GRS 1980 (EPSG ID 7019)"", 6378137.0, 298.257222101]], PRIMEM [ ""Greenwich"", 0.000000 ], UNIT [""Decimal Degree"", 0.0174532925199433]], PROJECTION [""Albers Conical Equal Area""], PARAMETER [""Latitude_Of_Origin"", 45.0], PARAMETER [""Central_Meridian"", -126.0], PARAMETER [""Standard_Parallel_1"", 50.0], PARAMETER [""Standard_Parallel_2"", 58.5], PARAMETER [""False_Easting"", 1000000.0], PARAMETER [""False_Northing"", 0.0], UNIT [""Meter"", 1.0]]"
qgis/QGIS,https://github.com/qgis/QGIS/issues/34851,qgis_QGIS_issues_34851,"QGIS 3.12 on Ubuntu Crashes by adding a table with no Geometry from PostGIS 

I'm running: QGIS -> 3.12 409bcf8eaa on Ubuntu 19.10 QGIS -> 3.12 cd141490ec on Windows 10 Pro I've test this with Postgresql/PostGIS 12/3 and Postgresql 11.6/2.5 If you add a table without geometry to the Ubuntu version it results in a crash with: QGIS died on signal 11Aborted (core dumped) On windows 10 it's fine - everything works and no crashing. I at least think this is a bug - I've tried a few things and it's consistent and doesn't seem to be a bad install on this linux box and doesn't seemed to be confined to my install of PostgreSQL/PostGIS.",Can you attach the dump of one of your tables?,Will do - Give me just a bit and I'll dump the schema with all the tables. Thanks for your help on this.
qgis/QGIS,https://github.com/qgis/QGIS/issues/31160,qgis_QGIS_issues_31160,"Add PostGIS layers is too slow on connecting to a database

QGIS 3.4 I create a new ticket because I don't know how to reopen a ticket with github... see https://github.com/qgis/QGIS/issues/19639 It seems to me that QGIS always scans **all tables** when connecting (see attachment) which can be very slow. in my case 20 minutes... it is impossible to stop the scan in the background, even if you close the dialog box or with the stop button. (I have no geometry of the GEOMETRY type). it is a remote server...(117 schemas of each a hundred tables). ![2019-08-08_09h15_12](https://user-images.githubusercontent.com/2129643/62682845-61aa0280-b9bd-11e9-920c-d99893c07083.png)","Do you have the ""use estimated table metadata"" option enabled in your connection parameters?","Yes, I have activated the options: Do not solve the type for unrestricted geometries (GEOMETRY) and Use the estimated metadata table. I think the solution mentioned in #19639 would be a nice solution: Tables and views should only be read if the schema is selected, but only the name of the table or view. When the table or view is selected, the additional information must be read."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32116,qgis_QGIS_issues_32116,"IAG GRS 1980 ou IAG GRS 1967 cannot be chosen as ellipsoid for measurements

If one of these ellipsoids is chosen, when reopening the project properties, the indicated ellipsoid becomes Clarke 1866 Another question: what is the difference between IAG GRS 1980 and GRS 1980(IUGG, 1980)? (the latter ellipsoid does not reproduce the bug).",Can you please confirm your proj version? (Available from the about dialog),Version 5.2.0 (QGIS 3.4.5 et 3.8.3)
qgis/QGIS,https://github.com/qgis/QGIS/issues/30670,qgis_QGIS_issues_30670,"Non-existent but registered attribute table in GPKG is added as empty table

**Describe the bug** When a GPKG references a layer in its `gpkg_contents` table that does not actually exist, QGIS presents an empty table to the user instead of an fatal error. **How to Reproduce** 1. Have a geopackage 2. Add an entry to `gpkg_contents` that registers an attribute table that does not actually exist, e.g. `INSERT INTO gpkg_contents ('table_name', 'data_type') VALUES ('non_existent_table', 'attributes');` 3. Load the file in QGIS 4. `non_existent_table` will be presented as available (correct, it should!) 5. `non_existent_table` will be ""loaded"" without any error, the result is an empty table with no attributes. In the log we can find an error from OGR that QGIS turns into just a hidden warning: `2019-07-11T11:09:31 WARNING OGR[3] error 1: sqlite3_prepare_v2(SELECT Count(*) FROM ""non_existent_table"") failed: no such table: non_existent_table` QGIS should instead throw an error message at the user that the table could not actually be found and not present a faulty, fake layer. This does not happen for tables of `data_type` `features` or `tiles` as OGR does weeds those out silently. **QGIS and OS versions** QGIS version | 3.8.0-Zanzibar | QGIS code branch | Release 3.8 -- | -- | -- | -- Compiled against Qt | 5.13.0 | Running against Qt | 5.13.0 Compiled against GDAL/OGR | 3.0.0 | Running against GDAL/OGR | 3.0.0 Compiled against GEOS | 3.7.2-CAPI-1.11.2 | Running against GEOS | 3.7.2-CAPI-1.11.2 b55d2125 PostgreSQL Client Version | 11.4 | SpatiaLite Version | 4.3.0a QWT Version | 6.1.4 | QScintilla2 Version | 2.11.1 Compiled against PROJ | 6.1.0 | Running against PROJ | Rel. 6.1.0, May 15th, 2019 OS Version | Arch Linux | |",Does the created layer entry appear to be broken (with the exclamation sign mark) btw?,"Yes, the file is malfomed. Nope, the layer is shown as normal attribute/table layer, it's just empty. As I wrote, GDAL seems to emit an *error* but QGIS considers it just a *warning*. That seems to be the only issue :))"
qgis/QGIS,https://github.com/qgis/QGIS/issues/30493,qgis_QGIS_issues_30493,"QGIS 3.4 LTR don't create Integer field

QGIS 3.4.9 does not allow you to create field in the table as Integer, only Integer64 which causes errors in the use of processing toolbox algorithms even by checking in Create New Field Type as Integer.",Do you have a project example or a sample data? Regards.,"I created random points and extracted the pixel value from the elevation raster (I used as output shapefile, Gpkg and temporary layer). When I tried to use SAGA's Minimum Distance Analysis tool it gives an error because the fields (id, elevation) are like Integer64. I tried to create a new Field by the Field Calculator and set the Type to Integer, but then in the Layer Properties this new field is like Integer64 and the OGR only accepts Integer. Also when I interpolate using rscripts from R Provider gives error because Field is (by default) as Integer64 Use Windows 10 64bits and standalone QGIS 3.4.9."
qgis/QGIS,https://github.com/qgis/QGIS/issues/30507,qgis_QGIS_issues_30507,"QGIS 3.4.9 continually crashes on startup

I cannot get QGIS 3.4 LTR to work on win7. I have QGIS 2.18 installed and it works fine. But after I installed 3.4 and started the program, it crashes on the splash screen, just after Starting Python shows up on the splash screen. Same thing happens with QGIS 3.8.",Can you share a link with a screenshot of the Python screen? Regards,Win 7 64-bit ![image](https://user-images.githubusercontent.com/42640389/60512838-f9894200-9cd5-11e9-84fc-91a1d07b5825.png)
qgis/QGIS,https://github.com/qgis/QGIS/issues/30513,qgis_QGIS_issues_30513,"QGIS 3.8 chenyx06etrs.gsb is missing

After installing QGIS 3.8, which replaced QGIS 3.6, the file ""chenyx06etrs.gsb"" for the datum transformation from CH1903 into CH1903+ is missing. In older releases the file was in directory share/proj.",Where did you install QGIS from?,@jef-n I installed QGIS via Chocolately on Windows 10.
qgis/QGIS,https://github.com/qgis/QGIS/issues/31635,qgis_QGIS_issues_31635,"UI: any click on number of classes updown triggers twice

In layer properties, whenever I click on the number of classes updown, it gets changed (slowly recalculates), and repeats the action after first recalculation gets finished. Very annoying on slow coloring modes like Quantiles. ![image](https://user-images.githubusercontent.com/810638/64531868-0ac77e00-d319-11e9-967a-4828ae1f4f5b.png)",How do you know that the action is actually triggered twice? My debugger stopped only once in the renderer.,"Here's video: https://youtu.be/FGNnkFOt9qg I click once, it adds one, redoes classes, adds one, redoes classes. Same with decrement."
qgis/QGIS,https://github.com/qgis/QGIS/issues/31639,qgis_QGIS_issues_31639,"UI: Layer properties window can be resized but not maximized

I open Layer properties window. I can grab the border of it but cannot press maximize as the button is absent in header line. Also I cannot use Windows placement mechanism: if I drag window up, I expect it to maximize but this one does not. When I drag it to left/roght, I expect to take half or quarter of the screen but it does not. Only main window does. ![image](https://user-images.githubusercontent.com/810638/64534349-f639b480-d31d-11e9-8d2d-69fd1f240772.png)","Doesn't the ""Layer styling"" panel partially covers your use case?","Hi, Layer styling panel suffers from the same limitation - you can't quickly get it fullscreen, and histogram view is even more squished there to be usable: ![image](https://user-images.githubusercontent.com/810638/64951982-cf343300-d887-11e9-8f07-e8af0095559e.png)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31799,qgis_QGIS_issues_31799,"UI: PostGIS layer error message not helpful, disappears and shouldn't happen

Trying to generate a slow postgis layer to reproduce #31635. In PostGIS-enabled DB:  Geometry looks good, accessing the value sleeps 0.1s per row. I try to add the layer in QGIS. It's seen well in PostGIS tree: ![image](https://user-images.githubusercontent.com/810638/64957400-8be0c100-d895-11e9-829e-70ba040331fd.png) Try to drag it into map. Wait expected 1s. Get unhelpful error message: ![image](https://user-images.githubusercontent.com/810638/64957464-b468bb00-d895-11e9-80ec-9769021d4993.png) - Reason is empty. - Message disappears before I finish reading it. A layer that loads more time than it and then fails will be lost, as I won't be at the computer in case it loads 1minute+. - It should just work. Adding test_table of same structure works.",what is the new view definition you are testing?,
qgis/QGIS,https://github.com/qgis/QGIS/issues/30623,qgis_QGIS_issues_30623,"Strange Behavior in QGIS 3.8 with Layer Filter Expressions

**Describe the bug** I'm noticing an odd issue with the Layer Filter Expression tool in QGIS 3.8 on Ubuntu, both with the ""normal"" and the ubuntugis-unstable releases. Sometimes it will work and sometimes it acts as if I didn't type anything at all even though it's a valid expression. So far, the only common thing I can come across is how the column is defined in Postgresql. For example, with a geonames db in postgis defined as so:  a filter expression of _""type"" = 'tower'_ does not work. Test returns a count of all columns in the table and adding the layer does indeed have everything there without the filter. The _type_ column here is just _character varying_ without an upper bound. It was created using imposm3's string type. The column types are the only thing that I've come across so far that seem consistent between various Postgis tables I've tried. **How to Reproduce** 1. Click Add Layer -> Add PostGIS layers. 2. Connect to a data source. 3. Double click a layer name or click once and click the ""Set Filter"" button. 4. Add a provider specific filter expression using either using the GUI or directly typing it in. 5. Click the test button or click ok and then click add on the layer. **QGIS and OS versions** QGIS version | 3.8.0-Zanzibar | QGIS code revision | 11aff65 -- | -- | -- | -- Compiled against Qt | 5.9.5 | Running against Qt | 5.9.5 Compiled against GDAL/OGR | 2.4.0 | Running against GDAL/OGR | 2.4.0 Compiled against GEOS | 3.7.0-CAPI-1.11.0 | Running against GEOS | 3.7.0-CAPI-1.11.0 673b9939 PostgreSQL Client Version | 10.9 (Ubuntu 10.9-0ubuntu0.18.04.1) | SpatiaLite Version | 4.3.0a QWT Version | 6.1.3 | QScintilla2 Version | 2.10.2 Compiled against PROJ | 5.2.0 | Running against PROJ | Rel. 5.2.0, September 15th, 2018 OS Version | Linux Mint 19.1 | | Note I have the same experience with the ""normal"" version of QGIS for Debian/Ubuntu. I upgraded to ubuntugis to see if it had the same behavior in case it was something with the older gdal that comes with Ubuntu Bionic.",Can you please share a DB dump and a sample project?,Sure! Let me create an extract and I’ll post it.
qgis/QGIS,https://github.com/qgis/QGIS/issues/30643,qgis_QGIS_issues_30643,"3.8 Datum transformation to 27700 missing/error

Since upgrading to 3.8, a project I'm working on now asks me to select datum transformations on opening. Whichever I select, it reports an error ""The preferred transform between EPSG:3857 [WGS 84 / Pseudo-Mercator] and EPSG:27700 [OSGB 1936 / British National Grid] is not available for use on the system."" The project CRS is 27700, but it has an Open Street Map XYZ layer in 3857 which is open by default when the project opens. The 27700 layers are not reprojected properly (appearing in the wrong place, relative to the Open Street Maps layer). Opening the exact same project on 3.6.3 does not ask about datum transformations and displays the 27700 layers in the correct place relative to the 3857 layer.",What platform is this on? Can you check the proj version number?,"It's on Linux Manjaro 4.19. The proj is 6.1.0 Here's the full 'about' in case you need anything else. QGIS version | 3.8.0-Zanzibar | QGIS code branch | Release 3.8 -- | -- | -- | -- Compiled against Qt | 5.13.0 | Running against Qt | 5.13.0 Compiled against GDAL/OGR | 3.0.0 | Running against GDAL/OGR | 3.0.0 Compiled against GEOS | 3.7.2-CAPI-1.11.2 | Running against GEOS | 3.7.2-CAPI-1.11.2 b55d2125 PostgreSQL Client Version | 11.4 | SpatiaLite Version | 4.3.0a QWT Version | 6.1.4 | QScintilla2 Version | 2.11.1 Compiled against PROJ | 6.1.0 | Running against PROJ | Rel. 6.1.0, May 15th, 2019 OS Version | Manjaro Linux | |"
qgis/QGIS,https://github.com/qgis/QGIS/issues/34932,qgis_QGIS_issues_34932,"Spatialite has multiple issues on 3.12

After updating to 3.12 I'm experiencing multiple problems with spatialite layers. 1. DB Manager does not show new connections. Making a new connection to a spatialite database doesn't show up in the list of connected databases until after Qgis is exited and restarted. 2. No changes can be made spatialite layers - ""could not commit changes"" - ""unknown cause"". This error occurs on every spatialite database I've tested (8 so far), on three different computers (though all running Manjaro Linux 4.19), it occurs on existing projects, fresh projects and completely new databases. So - to replicate. 1. Open a fresh Qgis. 2. Make a new spatialite layer. 3. Add a feature, save layer. 4. In DB Manager make a new connection to the new database. At (3) I'm getting the ""could not commit changes"" error, and at (4) I'm getting no listing of the new database.",Can you please check latest master? I think both issues have been already fixed.,"Only the 3.12.0, 3.10.3 or 3.9.0_master.r54615.7f95991edf-1 packages are available for my Arch-based system. I'm not familiar enough with the build methods to make my own packages directly from source. Unless someone else can test on Arch we'll just have to presume it's fixed for now until the next point release becomes available in the repository."
qgis/QGIS,https://github.com/qgis/QGIS/issues/30668,qgis_QGIS_issues_30668,"cannot set excluded layers in QGIS Server project properties for projects stored in a postgresql database

Using QGIS 3.8 on Windows 7 x64, I can't exlude layers from being served as WMS in the project properties - QGIS Server tab. When I check the ""Exlude layers"" checkbox and click on the + button to add layers, the popup window is empty and I can't add any layers, see the attached screenshot. ![grafik](https://user-images.githubusercontent.com/16764567/61035872-39cc7c80-a3c8-11e9-8b11-2f27556e8846.png)",Can you give it a try (on master)?,"This happens only for projects stored in a postgresql database, when I save the project locally, it works fine."
qgis/QGIS,https://github.com/qgis/QGIS/issues/30677,qgis_QGIS_issues_30677,"Control feature rendering order will crash QGIS when used on a joined field from a PostGIS table

**Describe the bug** Control feature rendering order will crash QGIS (on windows 10) when used on a joined field from a PostGIS table. **How to Reproduce** 1. Add a point feature layer (layer A) from a PostGIS source 2. Add a CSV layer without geometry 3. Join layer A with the CSV layer. 4. Edit the symbology of the feature layer. In ""Control feature rendering order"" select the joined field. 5. QGIS will simply crash :-( **QGIS and OS versions** QGIS version | 3.8.0-Zanzibar | QGIS code revision | 11aff65f10 Compiled against Qt | 5.11.2 | Running against Qt | 5.11.2 Compiled against GDAL/OGR | 2.4.1 | Running against GDAL/OGR | 2.4.1 Compiled against GEOS | 3.7.2-CAPI-1.11.0 | Running against GEOS | 3.7.2-CAPI-1.11.0 b55d2125 PostgreSQL Client Version | 9.2.4 | SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 | QScintilla2 Version | 2.10.8 Compiled against PROJ | 5.2.0 | Running against PROJ | Rel. 5.2.0, September 15th, 2018 OS Version | Windows 10 (10.0)",Did it worked as expected on QGIS 2.18? @mhabets,To be noted: with a shapefile source as a the first layer. QGIS doesn't crash but the rendering order is not working.
qgis/QGIS,https://github.com/qgis/QGIS/issues/30853,qgis_QGIS_issues_30853,"Plugins not loading

Just updated to 3.4.10 and now cant down load QField or Open layers plugins. Used a new profile when updated <!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> **How to Reproduce** <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> **QGIS and OS versions** <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> **Additional context** <!-- Add any other context about the problem here. -->",does it happen with any other plugin too?,![Qfield](https://user-images.githubusercontent.com/53046210/61639020-8d757a80-ac92-11e9-843e-0f16c5fa701b.JPG) Just tried these 2 plugins so not sure if any others will have a similar problem
qgis/QGIS,https://github.com/qgis/QGIS/issues/30791,qgis_QGIS_issues_30791,"No Print dialog or Page Setup dialog in macOS El Capitan 10.11.6

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> No Print dialog appears. No Page Setup dialog appears. **How to Reproduce** <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> 1. New Print Layout 2. Click Print 3. Brief flash of a progress bar in the Status bar then nothing 4. Similarly no Page Layout dialog, except there is no progress bar. **QGIS and OS versions** <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> macOS 10.11.6 El Capitan QGIS 3.4.9 and 3.8.0 **Additional context** <!-- Add any other context about the problem here. --> No meaningful log messages Export to PDF works fine.",Which macos builds/installer are you using?,"Hi, Thanks for responding. The installer is the one downloaded from https://qgis.org/downloads/macOS/ macOS 10.11.6 For 3.4: QGIS version 3.4.9-Madeira QGIS code branch Release 3.4 <https://github.com/qgis/QGIS/tree/release-3_4> Compiled against Qt 5.11.2 Running against Qt 5.11.2 Compiled against GDAL/OGR 2.4.1 Running against GDAL/OGR 2.4.1 Compiled against GEOS 3.7.1-CAPI-1.11.0 Running against GEOS 3.7.1-CAPI-1.11.1 27a5e771 PostgreSQL Client Version 9.6.10 SpatiaLite Version 4.4.0-RC1 QWT Version 6.1.3 QScintilla2 Version 2.10.8 Compiled against PROJ 520 Running against PROJ 5.2.0 For 3.8: QGIS version 3.8.0-Zanzibar QGIS code branch Release 3.8 <https://github.com/qgis/QGIS/tree/release-3_8> Compiled against Qt 5.11.2 Running against Qt 5.11.2 Compiled against GDAL/OGR 2.4.1 Running against GDAL/OGR 2.4.1 Compiled against GEOS 3.7.1-CAPI-1.11.0 Running against GEOS 3.7.1-CAPI-1.11.1 27a5e771 PostgreSQL Client Version 9.6.10 SpatiaLite Version 4.4.0-RC1 QWT Version 6.1.3 QScintilla2 Version 2.10.8 Compiled against PROJ 5.2.0 Running against PROJ Rel. 5.2.0, September 15th, 2018 OS Version OS X El Capitan (10.11) Hope this helps. Chris"
qgis/QGIS,https://github.com/qgis/QGIS/issues/30804,qgis_QGIS_issues_30804,"Crash trying to create a folder

<Crash ID: d76ef2dff745d2aba152da6d1350374fbeb23cff Stack Trace RtlRaiseStatus : longjmp : longjmp : G_fatal_error : G_getenv : read_datum_table : GPJ_osr_to_grass : GPJ_wkt_to_grass : version : version : QMetaObject::activate : QWizard::subTitleFormat : QWizard::next : QMetaObject::activate : QAbstractButton::clicked : QAbstractButton::click : QAbstractButton::mouseReleaseEvent : QWidget::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QApplicationPrivate::sendMouseEvent : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : TranslateMessageEx : TranslateMessage : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QCoreApplication::exec : main : BaseThreadInitThunk : RtlUserThreadStart : QGIS Info QGIS Version: 3.6.0-Noosa QGIS code revision: 58734527ab Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.0 Running against GDAL: 2.4.0 System Info CPU Type: x86_64 Kernel Type: winnt Kernel Version: 6.1.7601 !-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> **How to Reproduce** <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> **QGIS and OS versions** <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> **Additional context** <!-- Add any other context about the problem here. -->",Can you describe what you were doing before QGIS crash? How can I reproduce the bug? Please provide more feedback about this issue.,"Hi Jorge, When I try to create a Grass folder this is the screen that appears On Fri, 19 Jul 2019 at 19:29, Jorge Gustavo Rocha <notifications@github.com> wrote:"
qgis/QGIS,https://github.com/qgis/QGIS/issues/30833,qgis_QGIS_issues_30833,"Cannot load pictures anymore in custom forms

Since QGIS version 3, when creating a custom form with QT Creator, pictures won't be shown anymore. Until QGIS 2.18 it worked perfectly well. A project open in QGIS 2.18 displays perfectly the pictures. In QT Creator / QT Designer, create a new form using a QWidget using the same name of the picture field in QGIS and a QLabel to display the picture. In QGIS, this field must be set as a photo field in the fields parameters. The QGIS project with the QT Designer project. [Archive.zip](https://github.com/qgis/QGIS/files/3413553/Archive.zip) **Fiels parameters - field set as a photo** ![Capture d’écran 2019-07-20 à 13 33 46](https://user-images.githubusercontent.com/2520948/61578185-41400400-aaf3-11e9-8a0f-2ce4355f9c8e.png) **Test 1 - QWidget and QLabel displayed in QGIS 2.18** ![Capture d’écran 2019-07-20 à 13 31 03](https://user-images.githubusercontent.com/2520948/61578155-bbbc5400-aaf2-11e9-879a-9bfc8c3762eb.png) **Test 2 - QWidget and QLabel from a calculation field displayed in QGIS 2.18** ![Capture d’écran 2019-07-20 à 13 31 30](https://user-images.githubusercontent.com/2520948/61578183-3e451380-aaf3-11e9-9e0e-d942e1ffdbdd.png) **Test 3 - QWidget and QLabel from a calculation field using a QGrid displayed in QGIS 2.18** ![Capture d’écran 2019-07-20 à 13 31 31](https://user-images.githubusercontent.com/2520948/61578204-8a905380-aaf3-11e9-858a-38406a362ca2.png) **Now same project open in QGIS 3 …** The form window doesn't even respect the defined size from the field parameters. ![Capture d’écran 2019-07-20 à 13 33 46](https://user-images.githubusercontent.com/2520948/61578222-d511d000-aaf3-11e9-8605-e627746659a8.png) ![Capture d’écran 2019-07-20 à 13 39 21](https://user-images.githubusercontent.com/2520948/61578226-e35fec00-aaf3-11e9-8814-b512e561e678.png) ![Capture d’écran 2019-07-20 à 13 39 28](https://user-images.githubusercontent.com/2520948/61578230-ed81ea80-aaf3-11e9-8d6f-6acc611b2304.png) ![Capture d’écran 2019-07-20 à 13 43 13](https://user-images.githubusercontent.com/2520948/61578266-62edbb00-aaf4-11e9-8b09-94db771e591e.png)",Which QGIS version did you test with? With which version is the following screenshot taken?,MacOS 3.8.0-Zanzibar 11aff65f10 Windows 3.6.2-Noosa 656500e0c4 ![Capture d’écran 2019-07-20 à 15 53 06](https://user-images.githubusercontent.com/2520948/61579651-570bf400-ab08-11e9-944f-f5a3a8ed4677.png) Linux 3.6.2-Noosa 656500e ![Capture d’écran 2019-07-20 à 16 04 32](https://user-images.githubusercontent.com/2520948/61579652-5a9f7b00-ab08-11e9-9483-3a5a14025c51.png) A working base under Windows 10 and QGIS 2.18 ![69483C58-45B2-422F-9468-3D45726B6DDF](https://user-images.githubusercontent.com/2520948/61579684-bb2eb800-ab08-11e9-9c9e-fa7e00bce029.png) The same base under Xubuntu and QGIS 2.18 ![Capture d’écran 2019-05-12 à 14 57 46](https://user-images.githubusercontent.com/2520948/61579694-ce418800-ab08-11e9-8a27-6edbca3744ee.png)
qgis/QGIS,https://github.com/qgis/QGIS/issues/33691,qgis_QGIS_issues_33691,"problem georeferencing an image

**Describe the Bug** I have been running the QGIS GeoReferencer wit 4 geo-points Plain Splinned , nearest neighbor . It started an hour ago and reached a heady 19% before I stopped it its like being back on dial up.! ![abb271e4f4ca9ad0a4dddf3c97dd610b](https://user-images.githubusercontent.com/54211372/72093428-91916500-32d1-11ea-906f-4e424cbcf5ab.png) ![abb271e4f4ca9ad0a4dddf3c97dd610b](https://user-images.githubusercontent.com/54211372/72093446-9b1acd00-32d1-11ea-8495-b599718ecd36.png) Has anyone else experienced this ? **Version** The current released version of QGIS is 3.10.1. We are working on 3.11-Master. It will go into feature freeze on 2020-01-17 12:00:00 UTC and be released as 3.12 on 2020-02-21 12:00:00 UTC. Details on changes can be found on github at https://github.com/qgis/QGIS/commits/master.",Maybe that is causing some problem?,It has now got to 12%. Outage is a general term for internet access to a server and most appropriate in a question that I asked. @gioman . @kgjenkins . This was running with no problems two - three hours earlier. The Outage and holding up this could be affecting my other open issue https://github.com/qgis/QGIS/issues/33692
qgis/QGIS,https://github.com/qgis/QGIS/issues/33692,qgis_QGIS_issues_33692,"QGIS can open two instances of its self 3.10.1 which confuses it

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** QGIS tries to open two instances of the program. Then failing on pluginswhich are already open in other instance. **How to Reproduce** Open QGIS open several application Microsoft Excel and other misc geo web pages. Import GeoReferencer images and then click on the QGIS to go back to your page from a web page in task bar . This then opens a new instance which fails on plugins which cannot be open twice . ![3b41bc48388e4cb77f14053ad05cb449](https://user-images.githubusercontent.com/54211372/72086217-c5fe2480-32c3-11ea-8757-0c3073560277.jpg) ![b1d6f51444043678755d21c48b936f21](https://user-images.githubusercontent.com/54211372/72086689-956aba80-32c4-11ea-98e3-ba4860b5fac1.png) ** System ** The current released version of QGIS is 3.10.1. We are working on 3.11-Master. It will go into feature freeze on 2020-01-17 12:00:00 UTC and be released as 3.12 on 2020-02-21 12:00:00 UTC. Details on changes can be found on github at https://github.com/qgis/QGIS/commits/master.",Could you please rephrase what is the issue and how to trigger it? thanks.,@gioman Hi thanks for your reply i have put up a screen dump for you of this happening. If you press LT Tab all is ok. It only happens when you click QGIS at bottom of screen again on task bar opening more than one instance.
qgis/QGIS,https://github.com/qgis/QGIS/issues/34430,qgis_QGIS_issues_34430,"QGIS reports : Layer creation failed failed to create name.shp: Permission Failed on any file name, possible new feature added '...' menu 11-02-20

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> **How to Reproduce** Try to create any new name shape file seems to cause this same error . everything was ok yesterday: Here is the screen shot ![79177c387bfeafa14d7f4f780ebdf7b7](https://user-images.githubusercontent.com/54211372/74330253-90c77500-4d4e-11ea-85d5-c016524a108a.png) <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> **QGIS and OS versions** QGIS version 3.10.2-A Coruña QGIS code revision d4cd3cfe5a Compiled against Qt 5.11.2 Running against Qt 5.11.2 Compiled against GDAL/OGR 3.0.3 Running against GDAL/OGR 3.0.3 Compiled against GEOS 3.8.0-CAPI-1.13.1 Running against GEOS 3.8.0-CAPI-1.13.1 Compiled against SQLite 3.29.0 Running against SQLite 3.29.0 PostgreSQL Client Version 11.5 SpatiaLite Version 4.3.0 QWT Version 6.1.3 QScintilla2 Version 2.10.8 Compiled against PROJ 6.3.0 Running against PROJ Rel. 6.3.0, January 1st, 2020 OS Version Windows 10 (10.0) Active python plugins aderyn; agknow_qgis; floodrisk2; ImageServerConnector; latlontools; LecoS; qgis_resource_sharing; rivergis; VectorBender; ZoomToPostcode; MetaSearch; processing <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> **Additional context** <!-- Add any other context about the problem here. -->",Did it work?,@Gustry Yes created the file with the directory set to documents I note there has been changes in my system preferences even my export filter has been changed to GEOTif when it was a JSON Text export ![37fca894f69c65c5640054116eced4fe](https://user-images.githubusercontent.com/54211372/74332633-65935480-4d53-11ea-88c3-f380823a1175.png) This export optionGSON Text has it seemed been removed or renamed. tsk! Please rename this thread to preferences being changed unknown from yesterday.
qgis/QGIS,https://github.com/qgis/QGIS/issues/30851,qgis_QGIS_issues_30851,"Importing networkx python package causing crash

**Describe the bug** QGIS crashing (to desktop) when importing python package networkx (tested versions 2.1 & 2.3) in python console or as a plugin dependency. I also found the same behavior with seaborn (version 0.8.1). **QGIS and OS versions** QGIS version | 3.8.1-Zanzibar | QGIS code revision | dcd95cc648 -- | -- | -- | -- Compiled against Qt | 5.11.1 | Running against Qt | 5.11.1 Compiled against GDAL/OGR | 2.3.2 | Running against GDAL/OGR | 2.3.2 Compiled against GEOS | 3.6.2-CAPI-1.10.2 | Running against GEOS | 3.6.2-CAPI-1.10.2 4d2925d6 PostgreSQL Client Version | 10.5 (Ubuntu 10.5-1) | SpatiaLite Version | 4.3.0a QWT Version | 6.1.3 | QScintilla2 Version | 2.10.4 Compiled against PROJ | 5.1.0 | Running against PROJ | Rel. 5.1.0, June 1st, 2018 OS Version | Ubuntu 18.10 | |",How was networkx installed?,networkx was installed using pip in a local folder. I have checked that Qgis has access to the required pythonpaths. Other packages installed in a similar way seem to import just fine.
qgis/QGIS,https://github.com/qgis/QGIS/issues/30924,qgis_QGIS_issues_30924,"Issues loading project with shapefiles on samba share

When I open a 3.8.1 *.qgs file, all layers are shown in first place. When I zoom out, they disapear and ar not showen anymore. When I close the *.qgs file (not saving it!!) and I open it again (I did not close Qgis) I get a fault message that some shapefiles on a networkdrive are not there. But thay are not gone!! see screenshot ![Knipsel](https://user-images.githubusercontent.com/18046760/61854251-fd1b7d80-aebd-11e9-95b5-76796d7932f4.JPG) the same *.qgs file opening in 3.8.0, this problem is not there! Today I am working for first time with 3.8.1 and this is first time i have trouble with Qgis!",What is the type of the share? nfs? smb? other?,Just at work windows share . Don't know what type. Adding network disk \\fil1a\. Is attached to I:
qgis/QGIS,https://github.com/qgis/QGIS/issues/30970,qgis_QGIS_issues_30970,"Auth from qgis-auth.db only works when master password is stored in password manager

I have a few connections to postgis databases The credentials are stored in an authentication configuration (and thus stored in qgis-auth.db). When I use the option (in options/authentication/utilities) _integrate master password with your password manager_ (and thus store the qgis-auh.db master password in the Windows 10 _credentials manager_ this works fine. If I choose not to use this option QGis hangs as soon as I open the connection to the Postgis database and supply the (qgis-auth.db's) master password. No special user profiles. One detail: on my PC %appdata% redirects to an UNC-path (similar as in #30619 ) QGIS version- 3.8.0-Zanzibar (64 bit) QGIS code revision - 11aff65f10 Compiled against Qt - 5.11.2 Running against Qt - 5.11.2 Compiled against GDAL/OGR - 2.4.1 Running against GDAL/OGR - 2.4.1 Compiled against GEOS - 3.7.2-CAPI-1.11.0 Running against GEOS - 3.7.2-CAPI-1.11.0 b55d2125 PostgreSQL Client Version - 9.2.4 SpatiaLite Version - 4.3.0 QWT Version - 6.1.3 QScintilla2 Version - 2.10.8 Compiled against PROJ - 5.2.0 Running against PROJ - Rel. 5.2.0, September 15th, 2018 OS Version - Windows 10 (10.0)",Did it worked correctly in a previous release?,Didn't work in 3.4 (same behavior as 3.8). Did work properly in 2.18.15
qgis/QGIS,https://github.com/qgis/QGIS/issues/34483,qgis_QGIS_issues_34483,"QGIS crash on opening geopackage image

## User Feedback QGIS crashes on opening an image from a GeoPackage file into a blank project window ## Report Details **Crash ID**: [3db21e41567a4fc788fa14670e61ec6fcf096af1]('https://github.com/qgis/QGIS/search?q=3db21e41567a4fc788fa14670e61ec6fcf096af1&type=Issues') **Stack Trace** <pre> memcpy : QgsRasterIdentifyResult::params : QgsAbstractDatabaseProviderConnection::TableProperty::GeometryColumnType::operator== : QgsSingleBandGrayRenderer::block : QgsBrightnessContrastFilter::block : QgsHueSaturationFilter::block : QgsRasterResampleFilter::block : QgsRasterProjector::block : QgsRasterIterator::readNextRasterPartInternal : QgsRasterDrawer::draw : QgsRasterLayerRenderer::render : QgsMapRendererParallelJob::renderLayerStatic : QgsMapRendererParallelJob::renderingFinished : QgsImageOperation::overlayColor : QgsImageOperation::flipImage : QtConcurrent::ThreadEngineBase::run : QThreadPoolPrivate::reset : QThread::start : BaseThreadInitThunk : RtlUserThreadStart : </pre> **QGIS Info** QGIS Version: 3.10.2-A Coru�a QGIS code revision: d4cd3cfe5a Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 3.0.3 Running against GDAL: 3.0.3 **System Info** CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.18362",what is the name of the layer that causes troubles?,"All I did was make a new project to clear the map, then I dragged the B02 image into the map window and QGIS crashed. I seem to be having problems with 3.10.2 with regards to projections and files produced in older versions of QGIS. When I bring them in they cannot see the old original projection information. The prj files are the same but the qpj files are slightly different. Not sure if this is causing a problem. Cheers Grant From: Giovanni Manghi <notifications@github.com> Sent: Sunday, 16 February 2020 8:59 AM To: qgis/QGIS <QGIS@noreply.github.com> Cc: grantboxer <boxerg@iinet.net.au>; Mention <mention@noreply.github.com> Subject: Re: [qgis/QGIS] QGIS crash on opening geopackage image (#34483) Please let me know if you would like any further info! @grantboxer <https://github.com/grantboxer> thanks! what is the name of the layer that causes troubles? — You are receiving this because you were mentioned. Reply to this email directly, view it on GitHub <https://github.com/qgis/QGIS/issues/34483?email_source=notifications&email_token=AFBO2QP3HMSXD4GAC37YKFTRDBXS5A5CNFSM4KV45ZDKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEL3Y5FA#issuecomment-586649236> , or unsubscribe <https://github.com/notifications/unsubscribe-auth/AFBO2QN7GBEXIEMKA7OG6TTRDBXS5ANCNFSM4KV45ZDA> . <https://github.com/notifications/beacon/AFBO2QIHNNLBLASRS6UQYILRDBXS5A5CNFSM4KV45ZDKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEL3Y5FA.gif>"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32159,qgis_QGIS_issues_32159,"Entries disappearing in QGIS Browser

Hello, I noticed that some of my QGIS Browser-Entries disappeared on their own. A few weeks back it was one WMS and today it was my PostGIS-connection. Yesterday I was working with some of the PostGIS-layers and when I started QGIS today my whole PostGIS-Connection was gone. I was using the ""db manager"" yesterday quite a lot and I played with virtual layers. I was using some queries and added them as layers. I did not query the PostGIS-layers but they were loaded as layers. If I remember correctly I was also playing with virtual layers when the WMS disappeared and the WMS was also loaded as a layer. My guess would be that there is an issue when query-layer are loaded/removed from the project? e1:I am using QGIS 3.8.3 e2:There is no problem with PostGIS - I entered all neccessary information and could access all my layers again",Could you provide a way to replicate this reliably?,"I tried a couple of things but I couldn't replicate it by now. I did not create a new profile and my other WMS are still there (but I'm not sure if all are still there, I have like 30 of them and use only some of them regularly, so if one goes missing it might take a while for me to notice if I don't use it often). I've looked into the qgis3.ini and it's a huge file, my new postgis connection is the last entry - I guess this is normal? I'm also working with 2-3 instances of QGIS 3.8.3 and 3.4.12 open at the same time, perhaps this could be a reason too."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32002,qgis_QGIS_issues_32002,"Decrease the number of round-trips to postgres servers when connecting using the Data source manager

**Feature description.** We are testing if it's feasible for desktop clients to connect to large PostgreSQL database over the WAN. Our current database has over 2000 tables, of which 1100 have a PostGIS column. The average WAN response time from the QGIS desktop client to the PostgreSQL server is 35ms. Bandwidth is not a major issue in this case. When connecting via PostgreSQL connections in the Data source manager (using the ""Also list tables with no geometry"", ""User estimated table metadata"" options) it takes about 1.5mins to fully populate the dialog. We have tested multiple configurations but have not found any of the options any faster for our use cases. This 1.5min process runs over 5000 SQL queries, and with the 35ms latency that's why the process takes so long. The top queries by volume are: | calls | rows | query | |-------|-------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| | 3089 | 496 | select description from pg_catalog.pg_description where objoid = $1 and objsubid = ? | | 2009 | 21597 | SELECT attname, CASE WHEN typname = ANY(ARRAY[?,?,?]) THEN ? ELSE ? END AS isSpatial FROM pg_attribute JOIN pg_type ON atttypid=pg_type.oid WHERE attrelid=regclass(?) AND attnum>? ORDER BY attnum | | 20 | 20 | SELECT proj4text FROM spatial_ref_sys WHERE srid = ? LIMIT ? | In this situation we also have we also have 380 queries to try and determine the geometry type for columns that don't have a specific geometry typemod set. e.g `SELECT DISTINCT upper(geometrytype) xxx` It looks like most of queries are coming from determining the column type information https://github.com/qgis/QGIS/blob/3be3984e8edd980a8cf36a1c59bf1f0595e0860b/src/providers/postgres/qgspostgresprovider.cpp#L744 and https://github.com/qgis/QGIS/blob/b837e65662d5328863dc1048e180c8b28752c23b/src/providers/postgres/qgspostgresconn.cpp#L402 I think the process could be quickly improved using lazy loading of the column info. The info is not needed immediately in the dialog (only schema, tablename, comment, spatial column, geometry type, srid, relation type, primary key seem to be needed). Surely the other information could be populated if required (e.g double click to set SQL, or additional potential key information if it's a view). It's noted the workaround for this issue to to just use the QGIS connection browser, but some of our users prefer this method of adding layers.",What version of QGIS are you using @palmerj ? Do you also have timing info for those queries ?,"I've tested on 3.8, 3.4 and 2.18"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32277,qgis_QGIS_issues_32277,"QGIS Browser Layer Property dialog is slow to load for large PostgreSQL layers

Checklist before submitting - [x] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [x] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** When right-clicking on very large PostgreSQL tables/layers (e.g millions of rows) in the QGIS browser to show the layer properties dialog, it's very slow to load. It is slow even if the Estimated Metadata connection option is used. This is because queries like the following are run:  I think if the Estimated Metadata connection option is used, then the queries should apply the same logic as other estimated metadata queries in the main PG provider. Also, in this case, the count and extent attribute text in the layer properties dialog should state they are estimated. **QGIS and OS versions** QGIS version | 3.9.0-Master | QGIS code revision | 5f24a0b214 -- | -- | -- | -- Compiled against Qt | 5.12.3 | Running against Qt | 5.12.3 Compiled against GDAL/OGR | 2.4.1 | Running against GDAL/OGR | 2.4.1 Compiled against GEOS | 3.7.2-CAPI-1.11.2 | Running against GEOS | 3.7.2-CAPI-1.11.2 b55d2125 Compiled against SQLite | 3.28.0 | Running against SQLite | 3.28.0 PostgreSQL Client Version | 11.3 | SpatiaLite Version | 4.3.0a QWT Version | 6.1.4 | QScintilla2 Version | 2.11.1 Compiled against PROJ | 5.2.0 | Running against PROJ | Rel. 5.2.0, September 15th, 2018 OS Version | macOS 10.15 Active python plugins | QuickWKT; qgisnetworklogger; Mergin; processing; db_manager; MetaSearch",Can you please check if #32292 fixes this case as well ?,It's still slow. Both the count(*) and extents queries are still being run. See comments in https://github.com/qgis/QGIS/issues/32276#issuecomment-544015193
qgis/QGIS,https://github.com/qgis/QGIS/issues/31037,qgis_QGIS_issues_31037,"GRASS v.build.polylines dosn't work in Qgis 3.4.10

In reference to issue #30680, Grass dosn't work in Qgis 3.4 to 3.8 I'm tested various GRASS algorithms and dosn't works with Qgis 3.4.10 from the Qgis process window. checked in 3 computers from the same office",Do you have GRASS installed?,"Yes, it's the first I revised. Grass is correctly installed, with cmd osgeo shell Grass correctly function"
qgis/QGIS,https://github.com/qgis/QGIS/issues/33402,qgis_QGIS_issues_33402,"Projections seem to be completely broken with proj 5.2 / gdal 2.4 ?

Since 187b8f3325, projections seem to not work at all on Debian Buster / PROJ 5.2 / GDAL 2.4: - The CRS selector dialog is partially broken (empty CRS definition text area, empty CRS extent map widget) - Setting the project CRS takes no result (always falls back to 'No projection') - Setting the layer CRS takes no result - Layers added from the Browser or the DataManager have undefined CRS (tested with OGR, Postgis, GDAL) and some of them crash QGIS - Opening some old projects crash QGIS - With an old (""dirty"") user profile, also opening the Datasource manager or the Settings dialog crash QGIS. Other problems occur also with a clear user profile. All the problems start from 187b8f3325 and still persist in yesterday's 40b198cf90c520d14. @nyalldawson let me know if I can do any more detailed tests.",Maybe try a completely clean build?,"Ok, my fault. It was a little less obvious - only system restart helped."
qgis/QGIS,https://github.com/qgis/QGIS/issues/33673,qgis_QGIS_issues_33673,"WFS Switching BBOX X & Y and sending bad request

**Describe the bug** QGIS is sending a bad request to WFS server. I am getting the following error message: 2020-01-08T15:06:00 CRITICAL Layer Soil Mapunit Polygon : Download of features for layer mapunitpoly failed or partially failed: Download of features failed: Error transferring https://sdmdataaccess.sc.egov.usda.gov/Spatial/SDMWGS84GEOGRAPHIC.wfs?SERVICE=WFS&REQUEST=GetFeature&VERSION=1.1.0&TYPENAME=mapunitpoly&SRSNAME=urn:ogc:def:crs:EPSG::4326&BBOX=35.52551273180824154,-120.17369005225681633,35.70981609974859339,-119.82296349386254519,urn:ogc:def:crs:EPSG::4326 - server replied: Bad Request. You may attempt reloading the layer with F5 I contacted the sdmdataaccess.sc.egov.usda.gov and according to them, the request is bad because: it is switching X&Y parameters, SRS should have been defined for both the bounding box and for the output, and coordinate pairs are separated by a space instead of another comma **How to Reproduce** 1. Add following WFS https://sdmdataaccess.sc.egov.usda.gov/Spatial/SDMWGS84Geographic.wfs **QGIS and OS versions** QGIS version 3.4.13-Madeira QGIS code revision QGIS code revision Compiled against Qt 5.11.2 Running against Qt 5.11.2 Compiled against GDAL/OGR 3.0.2 Running against GDAL/OGR 3.0.2 Compiled against GEOS 3.8.0-CAPI-1.13.1 Running against GEOS 3.8.0-CAPI-1.13.1 PostgreSQL Client Version 11.5 SpatiaLite Version 4.3.0 QWT Version 6.1.3 QScintilla2 Version 2.10.8 Compiled against PROJ 6.2.1 Running against PROJ Rel. 6.2.1, November 1st, 2019 Active python plugins profiletool; StreetView; valuetool; db_manager; MetaSearch; processing **Additional context** Email Discussion with sdmdataaccess.sc.egov.usda.gov ""BBOX should be minX, minY, maxX, maxY. The Y coordinates must fall between -90 and 90 degrees and cannot exceed a certain number of square kilometers or they will exceed the limits set on the database server. For example, a location in California. -122.5,37.3,-122.0,38.6""",Can you access this server using the ogr command line tools? My gut feeling is that this is a still a server misconfiguration issue...,@nyalldawson I am not knowledgable on using OGR command line.
qgis/QGIS,https://github.com/qgis/QGIS/issues/31097,qgis_QGIS_issues_31097,"Change date format aren't reflected in attribute table

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** After changing the date format in the Attribute Forms panel, the new format has no effect on the target field. **How to Reproduce** 1. Go to layer properties 2. Click on Attributes Forms 3. Select a date or datetime field 4. Change date format from 'yyyy-MM-dd' to 'dd-MM-yyyy' 5. Change not reflected in attribute table **QGIS and OS versions** Versão do QGIS 3.4.8-Madeira Código da versão do QGIS 04ee8e0761 Compilado sobre Qt 5.11.2 Rodando sobre Qt 5.11.2 Compilado sobre GDAL/OGR 2.4.1 Rodando sobre GDAL/OGR 2.4.1 Compilado sobre GEOS 3.7.2-CAPI-1.11.0 Rodando sobre GEOS 3.7.2-CAPI-1.11.0 b55d2125 Versão do cliente PostgreSQL 9.2.4 Versão SpatiaLite 4.3.0 Versão do QWT 6.1.3 Versão QScintilla2 2.10.8 Compiled against PROJ 520 Running against PROJ 5.2.0 **Additional context** qgis global date format setting should be assumed by the local system","do you make use of any widget/custom form? if yes, have you tried if the same happen without them?","Hi @gioman what type is the datasource? Shapefiles and Oracle BD have you checked if you have write permissions in the folder where the data source is? Yes, I have. have yo checked if you have write permissions in the table/layer case is in a DB (i.e. PostGIS)? Yes, I have. do you make use of any widget/custom form? if yes, have you tried if the same happen without them? No, nothing custom or widget. Note that nowhere in the software is the local date system format being assumed. Is this the correct behavior? Shouldn't QGIS use the host system format as its own?"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31106,qgis_QGIS_issues_31106,"Allow custom proj operation definitions when transforming between two CRSes

I am trying to define a custom CRS. I have tested this CRS in OSGEO and I am able to put this CRS in the adapted CRS screen. It works for the test coordinates. When I press ""OK"" Qgis replies that the CRS is not valid: See also attached screenshot ![crsshot2](https://user-images.githubusercontent.com/52915792/62516117-6e472300-b824-11e9-91ad-d67248fcaaea.png) cct +proj=pipeline +step +proj=cart +ellps=WGS84 +step +proj=helmert +convention=coordinate_frame +x=194.245 +y=-154.53 +z=102.676 +rx=351.5046 +ry=-701.841 +rz=251.9889 +s=6.296557 +exact +step +proj=cart +inv +ellps=intl +step +proj=tmerc +units=m +lat_0=17.63621319 +lon_0=-63.23752013 +x_0=4714.87 +y_0=1967.19 +k_0=1.0 <!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> **How to Reproduce** <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> **QGIS and OS versions** <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> **Additional context** <!-- Add any other context about the problem here. -->",Can you confirm your PROJ library version number?,"Nyall, I use QGIS 3.6.1 and as far as I can see QGIS uses a similar (identical) share\proj files as OSGEO. Kind regards, Michel <http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail> Virusvrij. www.avg.com <http://www.avg.com/email-signature?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=webmail> <#DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2> Op di 6 aug. 2019 om 08:34 schreef Nyall Dawson <notifications@github.com>: -- Michel Ruijter MNRengineering de Kempenaerstraat 82, 2341GP, Oegstgeest mob: +31638944484, tel: +31718897137"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31180,qgis_QGIS_issues_31180," Error saving layer after editing

*Crash ID*: 346977bcd8b4ab804213e98e8e26b9cca23dba1d *Stack Trace* <pre> RtlFreeHeap : HeapFree : free : DllUnregisterServer : DllUnregisterServer : CLSIDFromString : CLSIDFromString : CLSIDFromString : CLSIDFromString : DllGetClassObjectWOW : DllGetClassObjectWOW : CLSIDFromString : CLSIDFromString : CLSIDFromString : CLSIDFromString : CLSIDFromString : ObjectStublessClient6 : CoCreateInstanceEx : ObjectStublessClient32 : SHParseDisplayName : Ordinal866 : ILSaveToStream : ShellExecuteExW : ShellExecuteExW : ShellExecuteExW : Ordinal860 : ShellExecuteExW : ExtractIconExW : DllCanUnloadNow : DllCanUnloadNow : DllCanUnloadNow : DllCanUnloadNow : IUnknown_SetSite : DllGetClassObject : DllGetClassObject : DllCanUnloadNow : DllCanUnloadNow : DllCanUnloadNow : DllCanUnloadNow : DllCanUnloadNow : DllCanUnloadNow : GetMenuStringW : CreateDialogParamW : CreateDialogParamW : TranslateMessageEx : GetMenuStringW : GetComboBoxInfo : DialogBoxIndirectParamAorW : DialogBoxIndirectParamW : DllCanUnloadNow : QDialog::exec : QFileDialog::getSaveFileUrl : QFileDialog::getSaveFileName : QgsFileWidget::openFileDialog : QMetaObject::activate : QAbstractButton::clicked : QAbstractButton::click : QAbstractButton::mouseReleaseEvent : QToolButton::mouseReleaseEvent : QWidget::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QApplicationPrivate::sendMouseEvent : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : TranslateMessageEx : TranslateMessage : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QDialog::exec : QgisApp::saveAsVectorFileGeneral : QgisApp::saveAsVectorFileGeneral : QgisApp::saveAsFile : QMetaObject::activate : QAction::activate : QMenu::actionGeometry : QMenu::actionGeometry : QMenu::mouseReleaseEvent : QWidget::event : QMenu::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QApplicationPrivate::sendMouseEvent : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : TranslateMessageEx : TranslateMessage : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QMenu::exec : QgsLayerTreeView::contextMenuEvent : QWidget::event : QFrame::event : QAbstractItemView::viewportEvent : QCoreApplicationPrivate::sendThroughObjectEventFilters : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : TranslateMessageEx : TranslateMessage : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QCoreApplication::exec : main : BaseThreadInitThunk : RtlUserThreadStart : </pre> *QGIS Info* QGIS Version: 3.4.10-Madeira QGIS code revision: 3d97aaae88 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.1 Running against GDAL: 2.4.1 *System Info* CPU Type: x86_64 Kernel Type: winnt Kernel Version: 6.1.7601",Could you provide more information on the layer that was edited and if there were concurrent edits or read/write being done?,"Good Morning, This error has been constantly occurring after installation on this machine, and at the time of the error, there are no concurrent processes from other systems or other layers being edited as it still occurs in the ""validation"" version 3.4.10 installation. In version 2.18.28, the same project works without any kind of error. In the same environment there is another machine that works perfectly .... the only difference is owning like S.O Win 10."
qgis/QGIS,https://github.com/qgis/QGIS/issues/31650,qgis_QGIS_issues_31650,"Word Wrap on Identify Feature

**Feature description.** If you're identifying a feature, long text fields are represented as a single-line. Would be nice to be able to word-warp those lines to see everything clearly.",Can you provide me with a screenshot?,"Thanks! This occurs in both the ""Form"" view as well as the ""Identify Results"" panel. Both depicted below. ![image](https://user-images.githubusercontent.com/1029014/65432299-326a1c00-ddd8-11e9-8b38-f1db1cac5532.png)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31304,qgis_QGIS_issues_31304,"QGIS 3.4.10 crashes - Python 

Hi, could anybody help me? I am working with QGIS 3.4.1 and when using addVectorLayer function at Python console, QGIS crashes with the following message Crash ID: a0f76a7f494ae8e3c889f5e1cfe8faec9a73863f Stack Trace QgisApp::addVectorLayerPrivate : QgisApp::addVectorLayer : QgisAppInterface::addVectorLayer : QgsPresetSchemeColorRamp::clone : PyMethodDef_RawFastCallKeywords : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyEval_EvalCodeWithName : PyEval_EvalCodeEx : PyEval_EvalCode : PyArena_Free : PyRun_StringFlags : PyImport_Import : PyImport_Import : PyMethodDef_RawFastCallKeywords : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyEval_EvalCodeWithName : PyImport_Import : PyImport_Import : PyMethodDef_RawFastCallKeywords : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyEval_EvalCodeWithName : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyEval_EvalCodeWithName : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyFunction_FastCallDict : PyMethodDef_RawFastCallDict : PyObject_Call : PyInit_QtCore : PyInit_QtCore : PyInit_QtCore : PyInit_QtCore : PyInit_QtCore : QMetaObject::activate : QAction::activate : QAbstractButton::click : QAbstractButton::mouseReleaseEvent : QToolButton::mouseReleaseEvent : QWidget::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QApplicationPrivate::sendMouseEvent : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : DispatchMessageW : NotifyWinEvent : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QCoreApplication::exec : main : BaseThreadInitThunk : RtlUserThreadStart : QGIS Info QGIS Version: 3.4.10-Madeira QGIS code revision: 3d97aaae88 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.1 Running against GDAL: 2.4.1 System Info CPU Type: x86_64 Kernel Type: winnt Kernel Version: 6.3.9600",What's the exact command you are executing?,"I'm working with command iface.addVectorLayer('layer path','layer name', 'OGR'). When I run this command, it crashes. Even working with QGIS 3.8.2 it crashes."
qgis/QGIS,https://github.com/qgis/QGIS/issues/31302,qgis_QGIS_issues_31302,"crash when creating a new page after deleting section/field group

## User Feedback crashed when trying to create a new page in a new report. There was no page before trying to insert one. Also in the background of this crash screen there is no page, so it crashed before inserting one I guess. Hope this helps. ## Report Details *Crash ID*: 524be25758eaaee4c1bb67eb68e90bc0dcb49bfb *Stack Trace* <pre> QgsRasterCalcDialog::numberOfColumns : QgsVertexEntry::point : QMetaObject::activate : QAction::activate : QAbstractButton::click : QAbstractButton::mouseReleaseEvent : QToolButton::mouseReleaseEvent : QWidget::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QApplicationPrivate::sendMouseEvent : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : DispatchMessageW : DispatchMessageW : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QCoreApplication::exec : main : BaseThreadInitThunk : RtlUserThreadStart : </pre> *QGIS Info* QGIS Version: 3.4.10-Madeira QGIS code revision: 3d97aaae88 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.1 Running against GDAL: 2.4.1 *System Info* CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.17763",Can you please post more steps on how to reproduce? How did you get a report with no pages in the first place?,"thanks, simplest reproducible example (3.4.10, win64): - new project - new report - add field group (note ""new page"" ist greyed out) - delete field group - add page (now ""new page"" is not greyed out) - crash"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31444,qgis_QGIS_issues_31444,"Labels position through formulas is uneffective

Dear all, I just tried to use the label position formulas but it seems to be effectless. I never used this feature before. I am using the 3.8.2 QGIS version, and the problem was there with the 3.8.0 one, but I don't know whether it occured in a former version. As I use a French version, I am not sure about the correct translation of the different fields. I'll use screenshots to be more explicit. Here is my labelling option windows of my point layer : ![labelling options](https://user-images.githubusercontent.com/12908619/63761439-72b1a980-c8c1-11e9-966b-edf5fdc9932f.jpg) You can notice with the yellow background right the X,Y shifting fields that the formula is really activated, and the set up formula is : `array( -10 * cos(radians(180 - ""angle"" )), 10 * sin(radians(""angle"")))` where angle is a layer field holding a integer value (an angle in degrees). The preview of the formula result shown is (for a 60° value of angle) : `[ 4.999999999999998, 8.660254037844386 ]` But whatever the value is, the label doesn't move. It looks like the formula is not taken into account at all, only the value input in the X,Y fields. Any help would be greatly appreciated. Many thanks, Remi.",Should we make this a ticket against the documentation?,"Ok, many thanks for your fast help. I just replaced the `coalesce ` function with `concatenate `(I think nyalldawson, you made a lapsus), and it works now. The inline help is indeed ambiguous, as the expected format shown in the formula window of the shifting fields is `double [x,y]`, while the field description correctly states the valid input type as `string`."
qgis/QGIS,https://github.com/qgis/QGIS/issues/35450,qgis_QGIS_issues_35450,"Add S3 to Browser panel

**Feature description.** The Browser panel is neat, I can list a local directory, list all my PostGIS databases and tables, etc. it would be nice to have an S3 item here where you could add buckets, then expanding each bucket would list all the files in the bucket just like the file directory. This makes it a lot easier and faster to work with data stored in S3 buckets without needing to manually enter the bucket name and object key for each file in the add vector/raster dialog. A workaround is to mount the bucket on your local file system using something like https://github.com/s3fs-fuse/s3fs-fuse, but that takes configuration and setup, so something out of the box with QGIS would be nice.",How would you see this feature working with access keys?,"With QGIS 3.12 you can define any of the GDAL AWS variables (https://gdal.org/user/virtual_file_systems.html#vsis3-aws-s3-files-random-reading) under Project | Variables which is very nice and what I do (since sometimes I use other services which are S3 compatible so I need to set the endpoint variable anyway). I'm also assuming these variables are set if exported in the shell which you start qgis (though not many people would start qgis from the shell). I guess though you'd want something similar to what it does for PostgreSQL, you choose a new bucket (instead of new connection for psql) and set the keys in a UI dialog."
qgis/QGIS,https://github.com/qgis/QGIS/issues/31551,qgis_QGIS_issues_31551,"Combination of styling based on Updated Canvas and Map View causes high CPU and no rendering of layer

Using a combination of the following causes a failure in rendering a raster layer: 1) Raster style automatic restyling on min/max based on statistics within Updated Canvas 2) A Map View When using the automatic restyling of a singleband raster based on the values in the Canvas extend without an additional Map View works fine. I am using a singleband raster with the following rendering settings: Render type: singleband pseudocolor Mean +/- standard deviation x: 2.00 Statistics extent: Updated canvas Accuracy: Estimate (faster) Interpolation: Linear Color ramp: Viridis Mode: Quantile Then I add a new Map View using View -> New Map View. This causes the values of the styling to alternate between 2 settings, my CPU usage goes up and the layer does not render. My guess is that due to the Map View there are multiple extents and the rendering gets stuck in a loop rendering for one extent and then for the other, going on indefinitely.",Can you says which version of QGIS are you using? Also out of curiosity what is the size of the raster you are rendering?,"The versions of software I'm using are listed below, let me be as complete as possible. One of the rasters I'm using is ~7500x7500 pixels, but both smaller (~2.000x2.000) and bigger (~15.000x15.000) rasters show the same behaviour. QGIS version 3.8.2-Zanzibar Compiled against Qt 5.11.2 Compiled against GDAL/OGR 2.4.1 Compiled against GEOS 3.7.2-CAPI-1.11.0 PostgreSQL Client Version 10.8 QWT Version 6.1.3 Compiled against PROJ 5.2.0 OS Version Windows 10 (10.0) QGIS code revision 4470baa1a3 Running against Qt 5.11.2 Running against GDAL/OGR 2.4.1 Running against GEOS 3.7.2-CAPI-1.11.0 b55d2125 SpatiaLite Version 4.3.0 QScintilla2 Version 2.10.8 Running against PROJ Rel. 5.2.0, September 15th, 2018"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31612,qgis_QGIS_issues_31612,"Vertex Editor freezes QGIS when moving large numbers of vertices 

In Windows 10, 64 bit QGIS 3.8.2 but has existed in previous builds as well. In my field, I create point grids for field crews to visit to sample. Depending on sample site spacing the grids can get fairly large (>1000) and in order to make sure there are no odd gaps at the edge of an area its nice to be able to move the complete grid so that there is more or less equal spacing around the edges. When I attempt to edit a point layer, and select the whole grid to move it to a nearby point, QGIS will always freeze. This only seems to occur on grids >1000 points, smaller grids will move but it generally takes quite a bit of time. I've tried on scratch files, shapefiles and geopackages and the issue remains the same. I am unable to post a crash report as the program completely freezes and clicking anywhere causes Windows to close the window. I've tested the same shapefiles in ArcMap and there are no issues moving the points around.",Can you please retest with a nightly of 3.10 or 3.8? There's been a related fix which may have already resolved this.,I gave it a shot on the 3.8.2 Nightly and 3.9.0 NIghtly and it still seems to occur.
qgis/QGIS,https://github.com/qgis/QGIS/issues/31667,qgis_QGIS_issues_31667,"QGIS Crashed

Regularly crashes after using angle measurement tool !!",what OS? what QGIS version?,"Hello, thank's for fast response :) OS -> win 7 QGIS version -> latest Zanzibar 3.8.2 So I double checked after your questions. After I open my saved project, it crashes after just one angle measurement! When I open new clean project without any surface, it crashes again after just one measurement. uto, 10. ruj 2019. u 13:03 Giovanni Manghi <notifications@github.com> napisao je:"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31864,qgis_QGIS_issues_31864,"extend/trim crash

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [x] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [x] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [x] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> **How to Reproduce** file attached [extend-trim.zip](https://github.com/qgis/QGIS/files/3625043/extend-trim.zip) <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> ## User Feedback i created two line vectors, then i esed the tool extend trim ## Report Details *Crash ID*: bb19b0c6e91b041c46ef852eaf2f70ec5e0b1658 *Stack Trace* <pre> QgsVectorLayer::beginEditCommand : QgsMapToolTrimExtendFeature::canvasReleaseEvent : QgsMapCanvas::mouseReleaseEvent : QWidget::event : QFrame::event : QGraphicsView::viewportEvent : QCoreApplicationPrivate::sendThroughObjectEventFilters : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QApplicationPrivate::sendMouseEvent : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : DispatchMessageW : DispatchMessageW : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QCoreApplication::exec : main : BaseThreadInitThunk : RtlUserThreadStart : </pre> *QGIS Info* QGIS Version: 3.8.1-Zanzibar QGIS code revision: dcd95cc648 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.1 Running against GDAL: 2.4.1 *System Info* CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.17763 **Additional context** <!-- Add any other context about the problem here. -->",Can you test latest master (nightly build for windows from OSGEO4W) ?,"I haven't downloaded the 3.8.4 yet, i'll try"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31723,qgis_QGIS_issues_31723,"Natural Breaks (Jenks) values are unstable

**Describe the bug** When using a graduated style with natural breaks (Jenks), clicking the ""Classify"" button a second time sometimes results in a slightly different set of breaks. The calculation of natural breaks should be deterministic, and not dependent on some element of randomness. ![unstable-natural-breaks](https://user-images.githubusercontent.com/3355358/64796041-1c916700-d54d-11e9-842d-2bcc8cb70a94.gif) **How to Reproduce** [test-map-and-data.zip](https://github.com/qgis/QGIS/files/3606168/test-map-and-data.zip) 1. Open map.qgz 2. In the layer styling dock, click the ""Classify"" button and note how the breaks change each time you click. **QGIS and OS versions** QGIS version | 3.8.2-Zanzibar QGIS code revision | 4470baa1a3 Compiled against Qt | 5.11.2 Running against Qt | 5.11.2 Compiled against GDAL/OGR | 2.4.1 Running against GDAL/OGR | 2.4.1 Compiled against GEOS | 3.7.2-CAPI-1.11.0 Running against GEOS | 3.7.2-CAPI-1.11.0 b55d2125 PostgreSQL Client Version | 10.8 SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 QScintilla2 Version | 2.10.8 Compiled against PROJ | 5.2.0 Running against PROJ | Rel. 5.2.0, September 15th, 2018 OS Version | Windows 10 (10.0)",Can we close?,Great to hear it is already fixed! Closing this issue is fine with me.
qgis/QGIS,https://github.com/qgis/QGIS/issues/31755,qgis_QGIS_issues_31755,"""New 3D map view"" button not available

I have installed qgis in anaconda with: ` conda install -c conda-forge qgis` QGIS version | 3.8.2-Zanzibar | QGIS code branch | Release 3.8 -- | -- | -- | -- Compiled against Qt | 5.9.7 | Running against Qt | 5.9.7 Compiled against GDAL/OGR | 2.4.2 | Running against GDAL/OGR | 2.4.2 Compiled against GEOS | 3.7.2dev-CAPI-1.11.2 | Running against GEOS | 3.7.2dev-CAPI-1.11.2 0 PostgreSQL Client Version | 11.5 | SpatiaLite Version | 4.3.0a QWT Version | 6.1.4 | QScintilla2 Version | 2.11.2 Compiled against PROJ | 6.1.0 | Running against PROJ | Rel. 6.1.0, May 15th, 2019 OS Version | Linux Mint 19 | | when I have to create a 3D view, I don't have the button VIEW/NEW 3D MAP VIEW ![0sI8K](https://user-images.githubusercontent.com/29231800/64894303-f21fd680-d63e-11e9-8bea-532655ea095f.png) ![3D-Map-View-en-QGIS-3](https://user-images.githubusercontent.com/29231800/64894304-f21fd680-d63e-11e9-89be-e1a79ee33353.png)",Does the conda version has 3D disabled?,conda info active environment : arpex_acim active env location : /home/inn/anaconda3/envs/arpex_acim shell level : 2 user config file : /home/inn/.condarc populated config files : conda version : 4.7.11 conda-build version : 3.17.8 python version : 3.7.3.final.0 virtual packages : __cuda=10.2 base environment : /home/inn/anaconda3 (writable) channel URLs : https://repo.anaconda.com/pkgs/main/linux-64 https://repo.anaconda.com/pkgs/main/noarch https://repo.anaconda.com/pkgs/r/linux-64 https://repo.anaconda.com/pkgs/r/noarch package cache : /home/inn/anaconda3/pkgs /home/inn/.conda/pkgs envs directories : /home/inn/anaconda3/envs /home/inn/.conda/envs platform : linux-64 user-agent : conda/4.7.11 requests/2.21.0 CPython/3.7.3 Linux/4.15.0-20-generic linuxmint/19 glibc/2.27 UID:GID : 1000:1000 netrc file : None offline mode : False
qgis/QGIS,https://github.com/qgis/QGIS/issues/31773,qgis_QGIS_issues_31773,"Crash while attempting to use mesh

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> **How to Reproduce** <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> **QGIS and OS versions** <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> **Additional context** <!-- Add any other context about the problem here. --> ## User Feedback Trying to use MESH with a grib file. When I went to move the view it crashed consistently. ## Report Details *Crash ID*: b2b81183c8543b4e5f2b1c4304e743aa65c3ead2 *Stack Trace* <pre> QgsMeshLayer::writeXml : QgsSingleBandPseudoColorRenderer::block : QgsMeshUtils::exportRasterBlock : QgsMeshUtils::exportRasterBlock : QgsMapRendererCustomPainterJob::doRender : QgsMapRendererCustomPainterJob::staticRender : QgsMapRendererCustomPainterJob::renderSynchronously : QThreadPoolPrivate::reset : QThread::start : BaseThreadInitThunk : RtlUserThreadStart : </pre> *QGIS Info* QGIS Version: 3.8.2-Zanzibar QGIS code revision: 4470baa1a3 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.1 Running against GDAL: 2.4.1 *System Info* CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.18362",Do you have an example file (a link maybe)?,"Since I use these locally, I've placed a few in a Google drive folder. Otherwise it's a moving target as files are added and deleted over time. These are from the HRRR weather model. The domain is around the Continental US. https://drive.google.com/open?id=1yxGmgp6AkUJiBlbkf5Z7CEQVXfGz2uhS Thanks for your help. Geoff On Sun, Sep 15, 2019 at 4:35 AM Sab <notifications@github.com> wrote:"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31776,qgis_QGIS_issues_31776,"Dissolve tool dialog box closes prematurely after choosing dissolve fields version 3.8.2

QGIS version: 3.8.2 os: Mac 10.14.6 When using the vector geometry dissolve tool the dialog box closes prematurely after choosing dissolve fields (independent of the number of fields selected) . This behavior is independent of how I access the tool (use the menu vector menu or the processing tools) The error occurred on both shp and geopackages files. The GDAL dissolve works fine.","Does it closes or simply goes behind other windows, as it occurred with other mac users?",Solved (sort of) it is the same issue as other mac users it the dialog box simply disappears behind thee other windows.
qgis/QGIS,https://github.com/qgis/QGIS/issues/31803,qgis_QGIS_issues_31803,"inital GetCapabilities request takes very long when millions of rows in layer

**Describe the bug** The inital GetCapabilities request takes very long because my tables contain millions of records. Tracing the database I see for every layer a (or more) ""SELECT count(*) FROM ""mytable"" is issued (postgis layer, indexed etc.). As this is a costly query on my large tables: where does it come from and is it configurable? To be notified: the layers based on large tables are only visible from 1:5,000 on wards. This way no more than a few hundred features are ever loaded up in the map extent. Works flawlessly in QGIS Desktop. Opening qgs project is fast. Panning, zooming is fast. Loading up data at requested scale is fast. The workaround I found in QGIS Server consists in: -wait for 8-9 minute to generating the GetCapabilities (time for select count (*) [...] to be run) -export generated GetCapabilities.xm to the web server -create a qgs project consuming this GetCapabilities as wms. This new qgs project will load up instantaneously. Works but it's not ideal at all. **How to Reproduce** -Have a layer in Postgres/Postgis 11.4/2.4.5 with over 30 millions of rows, -Add it to qgs project, -""publish"" this qgs project with QGIS Server as WMS (standard config). -Access this map service in a web browser -Trace queries in Postgres, see this SELECT count(*) [...] -Will take potentially long for the WMS to load. **QGIS and OS versions** QGIS 3.4.9 Madeira with QGIS SERVER **Additional context**","Did you check ""Use estimated table metadata"" in the postgres connection settings for the layers? If not, can you try that and see if it makes a difference?",Thank you very much Elapso! That's the trick. It does help a lot indeed.
qgis/QGIS,https://github.com/qgis/QGIS/issues/32930,qgis_QGIS_issues_32930,"GRASS Problems when installing parallel QGIS versions at Windows

I have problems when trying to run more versions (3.4 ltr and 3.10) at the same time. I’m using the osgeo4w-setup, but there are several things I cannot explain: - First, the “QGIS desktop with grass” doesn’t exist anymore (for 3.4 ltr as well as for 3.10). So I can’t get to run QGIS with grass anymore. - I cannot configure the two versions separately: when I go into the setup of the 3.4 ltr version and configure the grass path to the 6.4 Version (grass-6.4.3), the same configuration is set automatically in the QGIS 3.10 version! So, I cannot configure different grass paths for different versions of QGS anymore. Any Ideas? Thanks","what error? something similar has been addressed recently, please be sure you have installed all the latest updates from osgeo4w-","Mostly missing .dll. I could not start QGIS at all but I could fix this with uninstalling all versions and deleting the OSGEO folder, but the above-mentioned errors maintain. Did everything with the latest download."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32617,qgis_QGIS_issues_32617,"OSM multipolygons are not displayed correctly due to inner ring

**Describe the bug** In the given file, QGIS sees two features, but 3 are displayed. The source of the error is the inner ring being in the same direction or not as the outer ring. I made this simple file with 2 polygons in it. In JOSM, look at the arrows: ![Capture d’écran de 2019-11-04 08-38-24](https://user-images.githubusercontent.com/1609292/68105367-8c352a00-fede-11e9-857e-2499c22d2b6a.png) In QGIS: ![Capture d’écran de 2019-11-04 08-26-36](https://user-images.githubusercontent.com/1609292/68105137-e71a5180-fedd-11e9-9c32-32e2f3ec9629.png) [example.osm.txt](https://github.com/qgis/QGIS/files/3802953/example.osm.txt) **QGIS and OS versions** QGIS version | 3.11.0-Master | QGIS code revision | 38c1411599 -- | -- | -- | -- Compiled against Qt | 5.12.4 | Running against Qt | 5.12.4 Compiled against GDAL/OGR | 2.4.2 | Running against GDAL/OGR | 2.4.2 Compiled against GEOS | 3.7.2-CAPI-1.11.2 | Running against GEOS | 3.7.2-CAPI-1.11.2 b55d2125 Compiled against SQLite | 3.29.0 | Running against SQLite | 3.29.0 PostgreSQL Client Version | 12.0 (Ubuntu 12.0-2.pgdg19.10+1) | SpatiaLite Version | 4.3.0a QWT Version | 6.1.4 | QScintilla2 Version | 2.10.4 Compiled against PROJ | 5.2.0 | Running against PROJ | Rel. 5.2.0, September 15th, 2018 OS Version | Ubuntu 19.10 **Additional context** I'm not sure if it's coming from OGR or not.",How do you import the file in QGIS?,"@lbartoletti I tried many ways, Drag and drop, browser, Open Datasource dialog; Open vector file etc. All the same. The wiki of OSM doesn't make it compulsory at all: https://wiki.openstreetmap.org/wiki/Relation:multipolygon"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31861,qgis_QGIS_issues_31861,"Lots of modules not working in MacOS

QGIS 3.8.3 is not able to do several simple operations. A simple Layer Clip returns the following error: GDAL command: gdalwarp -of GTiff -cutline /Users/xxxx/Desktop/MapasViana/dummyextent.shp -cl dummyextent -crop_to_cutline ""/Users/xxxx/Desktop/Desktop-A/Trabalho Geral/Viana_geossitios/layers/AltimetriaViana_alargada.tif"" /Users/xxxx/Desktop/testelixo.tif GDAL command output: dyld: Symbol not found: _iconv Referenced from: /usr/lib/libcups.2.dylib Expected in: /Applications/QGIS3.8.app/Contents/MacOS/lib/libiconv.2.dylib in /usr/lib/libcups.2.dylib Execution completed in 0.13 seconds Results: {'OUTPUT': '/Users/xxxx/Desktop/testelixo.tif'} Loading resulting layers The following layers were not correctly generated.<ul><li>/Users/xxxx/Desktop/testelixo.tif</li></ul>You can check the 'Log Messages Panel' in QGIS main window to find more information about the execution of the algorithm.",Which installer did you use?,"Hi nirvn. Thank you so much for reply. Used the one available for download from qgis.org I've done this clip operation countless times without any issue. Since version 3.8, this error started to appear. Several modules from the raster menu or from processing are failling with similar issues. Even an hillshade will end up with the same issue: ************************ dyld: Symbol not found: _iconv Referenced from: /usr/lib/libcups.2.dylib Expected in: /Applications/QGIS3.8.app/Contents/MacOS/lib/libiconv.2.dylib in /usr/lib/libcups.2.dylib ****************************"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31872,qgis_QGIS_issues_31872,"Stops responding when adding a legend

This is on maps with lots of layers and categories. These are mainly included from OS Openmap vector data. QGIS version 3.8.2-Zanzibar Windows 10 I've tried it on a couple of maps and my guess is that it enumerates every possible layer and category, which is taking some time!",Can you be a little more specific? it is about adding a legend in a print layout?,"Yes. In the Print Layout. Using the Add Legend icon or from the menu. It works on maps with only a few categories but, I am guessing, if the map has lots of categories it gets stuck. I've left it for over 15 minutes and it still does not complete. It just draws a fine red border. My map has data Exported from Open Street Map and the UK Ordnance Survey OpenMap Local and Boundaries in Vector ESRI shape format for square TL from the UK. https://www.ordnancesurvey.co.uk/opendatadownload/products.html Regards __ John C. Brown On Wed, 18 Sep 2019, 22:17 Giovanni Manghi, <notifications@github.com> wrote:"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31906,qgis_QGIS_issues_31906,"no vector menu in and cannot install any plugins

Hi, I installed QGIS3.8 which worked fine on my Mac. However I uninstall it and then installed QGIS3.4. Since then I found the plugins are disabled and I reinstalled 3.8, the vector menu disappeared as well. ![Screen Shot 2019-09-19 at 8 48 22 PM](https://user-images.githubusercontent.com/47162557/65324592-a7d8b100-db7a-11e9-8e82-926ebba01caf.png) ![Screen Shot 2019-09-19 at 8 48 17 PM](https://user-images.githubusercontent.com/47162557/65324597-ac04ce80-db7a-11e9-894d-0a45cbeecb24.png) ![Screen Shot 2019-09-19 at 8 48 03 PM](https://user-images.githubusercontent.com/47162557/65324602-adce9200-db7a-11e9-80ba-9e0aa0729c20.png) Thanks so much!",How did you install QGIS? Which packages?,"I downloaded the package from the official website then installed. I tried QGIS 3.8 and 3. 4 for mac. On Fri, Sep 20, 2019 at 8:28 AM Harrissou Sant-anna < notifications@github.com> wrote: -- [image: photo] *Zheyu Liu* Master student, Columbia University GSSAP +1(646)5080847 | zl2701@columbia.edu"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31915,qgis_QGIS_issues_31915,"Label: text-buffer disappears with opacity less then 100%

Windows 10 64bit, tested with QGIS 3.8.2, 3.8.3. and 3.9.0 When applying a text-label to a polygon (might be any other geometry) an setting a text-buffer, the buffer shows as long as opacity is set to 100%. It disappear completely when slightly reducing opacity, say to 99.9% or 99%. See screenshots - 99% opacity (above) and 100% (below): ![Text_Buffer](https://user-images.githubusercontent.com/55049648/65373104-113ee980-dc79-11e9-949b-f11a6750bebd.jpg)",Can you share a project demonstrating this?,"I tried to prepare the project above (screenshot) to share it - but surprisingly, now, reducing opacity works perfect. I know I had this problem before, thus it must be somehow reproducable, but only under certain conditions. Don't know yet what causes this problem - will come back when I find out more."
qgis/QGIS,https://github.com/qgis/QGIS/issues/31949,qgis_QGIS_issues_31949,"Color problem in the legend

Hi, sorry for my bad english. I have a problem in the map. The blue color in the properties are good but it doesn't appear correctly on the legend in the final map (the blue color called ""scénario moyen""). I don't know how to solve it. I join a copy of my screen. Thanks for helping me. ![bug](https://user-images.githubusercontent.com/55685844/65408817-97c50980-dde6-11e9-9795-9642452df721.JPG)",can you explain better?,"I'll try. I mean, it is not the same blue on the legend and on the properties for the same object. It doesnt' match. I surrounded in red the problem : ![bug](https://user-images.githubusercontent.com/55685844/65409325-ba0b5700-dde7-11e9-8b62-0ee52f83b5c7.JPG)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31964,qgis_QGIS_issues_31964,"QGIS 3.8.2 QgsTask based object crash qgis when running

## User Feedback I subclassed QgsTask in order to process jobs that make class to a postgres database outputs the data as a kmz or shapefile. When I execute the run method directly, everything works fine albeit it blocks the main thread. ~~~ task = CbydTask(job_queue, context, output_dir) task.run() ~~~ If I kick off a bunch of them and send them to the task manager for processing, many of them will finish but eventually and very randomly QGIS will crash. It will crash either two or three jobs in. Or almost at the end of all the jobs. It is not consistent on which jobs it fails on and all jobs will process correctly when just doing `task.run()`. ~~~ manager = QgsApplication.taskManager() for job in job_queue: manager.addTask(CbydJobTask(job, context, output_dir)) ~~~ When I opened visual studio to try and get deeper debug info, I saw messages like `Unhandled exception at 0x00007FFBE9DCB049 (ntdll.dll) in qgis-bin.exe: 0xC0000374: A heap has been corrupted (parameters: 0x00007FFBE9E327F0).` and `0x00007FFB959DF1F6 (QtCore.pyd) in qgis-bin.exe: 0xC0000005: Access violation reading location 0x0000000000000000.` None of the objects referenced in the QgsTask class references the UI in any way nor attempts to communicate with the main thread other than the normal signals between the task and the task manager. The class definition is below: ~~~ class CbydJobTask(QgsTask): def __init__(self, job, context, output_dir): QgsTask.__init__(self, '811 Export Job ' + str(job.get_id())) """"""Constructor."""""" self.job = job self.context = context self.output_dir = output_dir def run(self): """"""Start the job-building/validation routine."""""" self.setProgress(0) if self.isCanceled(): return False if self.context['kmz']: self.job.set_strategy(CbydKmzStrategy()) self.job.process(self.output_dir) if self.isCanceled(): return False if self.context['shp']: if self.job.is_buffered(): self.job.set_strategy(CbydBufferedShpStrategy()) else: self.job.set_strategy(CbydShpStrategy()) self.job.process(self.output_dir) if self.isCanceled(): return False if self.context['utilisphere']: self.job.set_strategy(CbydBufferedShpUtilisphereStrategy()) self.job.process(self.output_dir) self.setProgress(1) return True ~~~ ## Report Details *Crash ID*: f0a1510016bda7570a611a9552d7d04e8a7599b5 *Stack Trace* <pre> PyInit_QtCore : PyInit_QtCore : QObject::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QCoreApplicationPrivate::sendPostedEvents : qt_plugin_query_metadata : QEventDispatcherWin32::processEvents : DispatchMessageW : DispatchMessageW : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QCoreApplication::exec : main : BaseThreadInitThunk : RtlUserThreadStart : </pre> *QGIS Info* QGIS Version: 3.8.2-Zanzibar QGIS code revision: 4470baa1a3 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.1 Running against GDAL: 2.4.1 *System Info* CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.17763","Did you try to keep a reference to `CbydJobTask(job, context, output_dir)` ? Try storing them into a python array right before passing them to the task manager.","job.process() just delegates to the strategy class's build() function. If there is one that may not have something thread safe in it, I guess it could be this one. I will open up a thread on stack exchange. But if where I messed up is glaringly obvious, please let me know. ~~~ class CbydShpStrategy(CbydAbstractStrategy): SPATIAL_QUERY = #QUERY REMOVED FOR EXAMPLE DATA_QUERY = #QUERY REMOVED FOR EXAMPLE def _prepare_output_path(self, output_dir, company, state, code): output_path = os.path.join(output_dir, company, state, code, 'SHAPE') if not os.path.isdir(output_path): os.makedirs(output_path) return output_path def build(self, id, output_dir): data = None with psycopg2.connect(DSN_ODW_RW, cursor_factory=RealDictCursor) as connection: with connection.cursor() as cursor: cursor.execute(self.DATA_QUERY, (id,)) data = cursor.fetchone() output_path = self._prepare_output_path(output_dir, data['company'], data['state'], data['code']) layer = QgsVectorLayer('MultiLineString?crs=epsg:'+ data['output_coord_system']+ '&field=ductbankid:integer',data['code_type'],'memory') provider = layer.dataProvider() fields = layer.fields() spatial_data = None with psycopg2.connect(DSN_ODW_RW, cursor_factory=RealDictCursor) as connection: with connection.cursor() as cursor: cursor.execute(self.SPATIAL_QUERY, (data['output_coord_system'], data['state'], data['code'])) spatial_data = cursor.fetchall() features = [] for conduit in spatial_data: q = QgsFeature(fields) q['ductbankid'] = conduit['ductbankid'] q.setGeometry(QgsGeometry.fromWkt(conduit['wkt_text'])) features.append(q) provider.addFeatures(features) QgsVectorFileWriter.writeAsVectorFormat( layer, os.path.join(output_path, data['file_name_shp']), 'utf-8', driverName='ESRI Shapefile' ) ~~~"
qgis/QGIS,https://github.com/qgis/QGIS/issues/31970,qgis_QGIS_issues_31970,"TIN Interpolation - output raster format and size issues

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** 1) Produces an ArcInfo ASCII Grid, but defaults to tif extension. 2) The rows/cols and pixel sizes (x/y) are not respected - ex. with the default 0.10 size, the output raster reports: Origin 283796,5.04147e+06 Pixel Size 0.09977998600000000107,-0.09982621899999999382 3) Break and structure lines are not respected - see https://github.com/qgis/QGIS/issues/27048 **How to Reproduce** <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> **QGIS and OS versions** QGIS version 3.8.3-Zanzibar QGIS code revision 685d8b15d2 Compiled against Qt 5.11.2 Running against Qt 5.11.2 Compiled against GDAL/OGR 2.4.1 Running against GDAL/OGR 2.4.1 Compiled against GEOS 3.7.2-CAPI-1.11.0 Running against GEOS 3.7.2-CAPI-1.11.0 b55d2125 PostgreSQL Client Version 10.8 SpatiaLite Version 4.3.0 QWT Version 6.1.3 QScintilla2 Version 2.10.8 Compiled against PROJ 5.2.0 Running against PROJ Rel. 5.2.0, September 15th, 2018 OS Version Windows 10 (10.0) **Additional context** <!-- Add any other context about the problem here. -->",Can you please attach a test project and data and a step-by-step procedure to reproduce?,As per @elpaso's request: Here's the test project and data: [qgis_interp_bug_31970.zip](https://github.com/qgis/QGIS/files/3648330/qgis_interp_bug_31970.zip) And the steps to produce it. Note that the extent is calculated from the pts layer. I've also tried rounding these values to solve the strange x/y resolution creep to no avail: ![qgis_interp_steps_bug_31970](https://user-images.githubusercontent.com/13538726/65532120-3fb30380-dec9-11e9-84be-9ffd2888a4fc.png) I do not recall the rows/cols and pixel sizes issue (issue 2 in my previous post) in versions prior to 3.6. The dialog/options regarding these parameters changed as well. See - [https://github.com/qgis/QGIS/commit/84d155eaf0467204aa087b78c8b5d7a0f3d1c9bc](url) Issues 1 (format versus extension) and 3 (treatment of break/structure lines) seem to have always been present. Thanks for any insight!
qgis/QGIS,https://github.com/qgis/QGIS/issues/31989,qgis_QGIS_issues_31989,"Umpteenth crash of Qgis 3.X

## User Feedback I was pissed off ## Report Details *Crash ID*: 87026061338cf3642d5384d839eec65b4bd34835 *Stack Trace* <pre> QgsMapCanvas::setMapTool qgsmapcanvas.cpp:1722 QgisApp::activateDeactivateLayerRelatedActions qgisapp.cpp:12746 QgisApp::layerEditStateChanged qgisapp.cpp:12547 QMetaObject::activate : QgsVectorLayer::commitChanges qgsvectorlayer.cpp:3024 QgisApp::toggleEditing qgisapp.cpp:9536 QMetaObject::activate : QAction::activate : QMenu::actionGeometry : QMenu::actionGeometry : QMenu::mouseReleaseEvent : QWidget::event : QMenu::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify qgsapplication.cpp:403 QCoreApplication::notifyInternal2 : QApplicationPrivate::sendMouseEvent : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify qgsapplication.cpp:403 QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : UserCallWinProcCheckWow : DispatchMessageWorker : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QMenu::exec : QgsLayerTreeView::contextMenuEvent qgslayertreeview.cpp:136 QWidget::event : QFrame::event : QAbstractItemView::viewportEvent : QCoreApplicationPrivate::sendThroughObjectEventFilters : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify qgsapplication.cpp:403 QCoreApplication::notifyInternal2 : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify qgsapplication.cpp:403 QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : UserCallWinProcCheckWow : DispatchMessageWorker : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QCoreApplication::exec : main main.cpp:1567 BaseThreadInitThunk : RtlUserThreadStart : </pre> *QGIS Info* QGIS Version: 3.8.2-Zanzibar QGIS code revision: 4470baa1a3 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.1 Running against GDAL: 2.4.1 *System Info* CPU Type: x86_64 Kernel Type: winnt Kernel Version: 6.1.7601",What were you doing when the crash occurred?,"This time: setting transparancies to a georeferenced raster layer. [X] Mit freundlichen Grüßen i. A. Stefan Grallert MTR Main-Taunus-Recycling GmbH Stefan Grallert Baumaßnahmen Liegenschaften EDV Rhein-Main-Deponiepark 1 65439 Flörsheim-Wicker Telefon: 06145 9260-1014 Telefax: 06145 9260-2014 E-Mail: projekte@deponiepark.de Internet: www.deponiepark.de Aufsichtsratvorsitzende: Kreisbeigeordnete Madlen Overdick Geschäftsführer: Heino von Winning und Dr. Mathias Bausback Gesellschafter: RMD Rhein-Main Deponie GmbH, Stadt Flörsheim am Main, Stadt Hochheim am Main Eingetragen im Handelsregister Wiesbaden HRB 18219 Steuernummer: 043 225 71946 USt-Id-Nr. DE 113 866 770 Sofern nicht anders angegeben, ist diese E-Mail und alle Anlagen vertraulich und nur für den Empfänger bestimmt. Falls Sie diese E-Mail irrtümlich empfangen haben, bitten wir Sie uns den Empfang mitzuteilen und die E-Mail zu löschen. Die Internet-Kommunikation ist nicht sicher, die MTR Main-Taunus-Recycling GmbH, Angestellte oder Geschäftspartner können nicht für den Missbrauch von Dritten verantwortlich gemacht werden. Meinungen, die in dieser E-Mail ausgedrückt werden, reflektieren nicht notwendigerweise die Ansicht der MTR Main-Taunus-Recycling GmbH. ________________________________ Von: Alex [notifications@github.com] Gesendet: Dienstag, 24. September 2019 21:45 An: qgis/QGIS Cc: Grallert, Stefan; Author Betreff: Re: [qgis/QGIS] Umpteenth crash of Qgis 3.X (#31989) What were you doing when the crash occurred? — You are receiving this because you authored the thread. Reply to this email directly, view it on GitHub<https://github.com/qgis/QGIS/issues/31989?email_source=notifications&email_token=AINKSXQIRTHSHZJF5PFXDJ3QLJU7BA5CNFSM4I2D5672YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD7PSRXA#issuecomment-534718684>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AINKSXRZDFAITEVWOJUUAX3QLJU7BANCNFSM4I2D567Q>."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32795,qgis_QGIS_issues_32795,"No transform is available after Update to QGIS 3.10.0-3 and GRASS 7.8.1-1

After Update to 3.10.0-3 and Grass Gis 7.8.1-1 I get the following message, when opening an existing project with multiple layers of different CRS: No transform is available between EPSG:3044 [ETRS89 / UTM zone 32N (N-E)] and EPSG:3857 [WGS 84 / Pseudo-Mercator]. proj_create_operations: At least one of the operation lacks a source and/or target CRS. Before the Update it worked perfectly. To ensure a clean system I uninstalled qgis via OSGeo4W setup, deleted OSGeo4W64 Path to get rid of old profiles, downloaded fresh installer and installed via Quickinstall. This is under Windows 10, latest Updates installed.",what proj version are you using?,"I'm not sure, If I understand correctly. I open a QGZ project file. Do the following QGIS ""About"" infos help? QGIS version | 3.10.0-A Coruña | QGIS code revision | 6ffa89eb3e -- | -- | -- | -- Compiled against Qt | 5.11.2 | Running against Qt | 5.11.2 Compiled against GDAL/OGR | 3.0.2 | Running against GDAL/OGR | 3.0.2 Compiled against GEOS | 3.8.0-CAPI-1.13.1 | Running against GEOS | 3.8.0-CAPI-1.13.1 Compiled against SQLite | 3.29.0 | Running against SQLite | 3.29.0 PostgreSQL Client Version | 11.5 | SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 | QScintilla2 Version | 2.10.8 Compiled against PROJ | 6.2.1 | Running against PROJ | Rel. 6.2.1, November 1st, 2019 OS Version | Windows 10 (10.0) Active python plugins | AnotherDXF2Shape; batchvectorlayersaver; ClusterPoints; joinmultiplelines; mmqgis; ORStools; Qgis2threejs; qgis2web; QuickOSM; quick_map_services; db_manager; MetaSearch; processing"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32006,qgis_QGIS_issues_32006,"SAGA Reclassify Values Tool broken - 'Index out of range' error in log  :bug

For QGIS 3.8 I cannot successfully run the tool using any of the 3 methods. The reclassification doesn't work and I cannot fill the nodata values either. Here is the log output: Algorithm 'Reclassify values' starting… Input parameters: { 'INPUT' : 'D:/Matt/Projects/Seine/site3ligra/Base/tourond.tif', 'MAX' : 237, 'METHOD' : 1, 'MIN' : 236, 'NEW' : 1, 'NODATA' : 0, 'NODATAOPT ' : True, 'OLD' : 0, 'OTHEROPT ' : False, 'OTHERS' : 0, 'RESULT' : 'C:/Users/info/Desktop/2.sdat', 'RETAB' : [None], 'RNEW' : 238, 'ROPERATOR' : 0, 'SOPERATOR' : 1, 'TOPERATOR' : 2 } Traceback (most recent call last): File ""C:/OSGEO4~1/apps/qgis/./python/plugins\processing\algs\saga\SagaAlgorithm.py"", line 282, in processAlgorithm s = '{}\t{}\t{}\n'.format(values[i], values[i + 1], values[i + 2]) IndexError: list index out of range Execution failed after 0.05 seconds ![1](https://user-images.githubusercontent.com/55809344/65632663-d7832100-df9f-11e9-97e7-a699aed587d8.jpg)",Can you try with another output format just to check? Maybe a tif.,"@nyalldawson Thanks for the update. I had have success with this tool in older versions. I'll double check as I very well may be doing something incorrectly! In 3.8 I have been setting the 'mode' to only use a single value. However when I do this, the tool complains that I haven't set operators for the range and table options. If I choose operators for them and then run the tool, it throws the index out of range error. I have also gotten this same error (in 3.8) if I set the 'mode' to table and put in one reclass entry for it to use. An example of a table entry would be to reclass the range between 237 and 238 to 239. As a side note, I prefer this tool because of the bottom option to 'replace nodata' values. Sometimes I don't even need to reclass a raster, but I want to change the nodata values into 0's. I've found this tool to be the easiest way to do this, and I have gotten it to work in older Q versions. This is a separate thing but it would be great to have another tool that only does this operation in isolation!"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32016,qgis_QGIS_issues_32016,"GPSInformation Add point fails on 3D-Shapes

**Describe the bug** It is not possible add a Point to a 3D-Vector-Layer using GPSInformation. **How to Reproduce** 1. Right Click on Panel and add ""GPS Information Panel"" 2. Connect to GNSS-Receiver 3. Wait until connected to GNSS-Receiver 3. Create Vector Layer with Z-Values 4. Set Vector Layer on edit mode ""Toggle Editing"" 5. Click ""Add Point"" 4. See error --> ""Cannot add feature. Unknown WKB type. Choose a different layer and try again."" **Additional context** It works fine on 2D-Vector Layers","can you submit a patch/pull request? Also there have been some fixes recently in the GPS panel, have you tested QGIS master?","Hej... i tested it on the master... The Problem lies within the rubberband, accepting QgsPointXY only... I have no pull request for that.. It will take a lot of changement in the source code... I guess"
qgis/QGIS,https://github.com/qgis/QGIS/issues/33584,qgis_QGIS_issues_33584,"Random Marker Fill crashes on multipolygons

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** When a Random Marker fill is applied to a polygon layer containing multi polygons, QGIS crashes on zooming in. **How to Reproduce** 1. Create a projected multipolygon memory layer (I used epsg 28992) 2. Draw a multipolygon 3. Set symbology to Random Marker (10 red dots appear) 4. Zoom in out with mouse wheel and qgis crashes If you do the same with a single polygon, it just works. **QGIS and OS versions** QGIS version | 3.11.0-Master | QGIS code revision | 75ba9b394d -- | -- | -- | -- Compiled against Qt | 5.9.5 | Running against Qt | 5.9.5 Compiled against GDAL/OGR | 2.2.3 | Running against GDAL/OGR | 2.2.3 Compiled against GEOS | 3.6.2-CAPI-1.10.2 | Running against GEOS | 3.6.2-CAPI-1.10.2 4d2925d6 Compiled against SQLite | 3.22.0 | Running against SQLite | 3.22.0 PostgreSQL Client Version | 10.10 (Ubuntu 10.10-0ubuntu0.18.04.1) | SpatiaLite Version | 4.3.0a QWT Version | 6.1.3 | QScintilla2 Version | 2.10.2 PROJ.4 Version | 493 OS Version | Ubuntu 18.04.3 LTS Active python plugins | quick_map_services; pdokservicesplugin; DEMto3D; QCopycanvas; catalogpl_plugin; firstaid; processing **Additional context** <!-- Add any other context about the problem here. -->",Can you provide a test project please?,[randommarker.zip](https://github.com/qgis/QGIS/files/4018552/randommarker.zip)
qgis/QGIS,https://github.com/qgis/QGIS/issues/32648,qgis_QGIS_issues_32648,"Bug when trying to select features from large Oracle datasets

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** We believe the Oracle ROWID is not 100% reliable as a primary key as previous ROWID values can be reused if data is deleted and re-imported. It can also change dynamically if you have a partitioned table. The result is that we are finding the basic select tool in QGIS 3.4.7 results in the wrong features being selected. I have tried configuring the layer with a primary key but it still seems to be using ROWID. We have also run the SQL in FME and checked the result and it comes back as a rectangle of data so we have concluded that QGIS must be incorrectly applying the results. [Please see this screenshot](http://static.geowessex.com/191105-screenshot.png) **How to Reproduce** We simple load a layer directly from Oracle and then use the standard selection tools to drag a rectangle on the map. The features within the area turn yellow but so do random features outside the area. When we then copy and paste the features to another layer some of the features inside are missing so it doesn't appear that the results can be used consistently. **QGIS and OS versions** QGIS 3.4.7 on a Windows 10 operating system using Oracle 12c",How is the above table defined?,"The table has a number of constraints in Oracle including a primary key. The name of the primary key is not the same as the field name on which it is based of course. I've managed to tell QGIS there is a key and the source line looks like this: port=1521 user='qgis' key='UPRN' estimatedmetadata=true srid=27700 table=""ADDRESS_TABLE"" (GEOM) sql="
qgis/QGIS,https://github.com/qgis/QGIS/issues/32047,qgis_QGIS_issues_32047,"QGIS 3.8.3 Crashes while saving 

Description QGIS 3.8.3 will crash and give me the error below when I try to save. I do not have to have a project open for QGIS to crash. Crash ID: d3aa618b88abd4005d2f6cc4ab4d08997b7c738d Stack Trace RtlFreeHeap : HeapFree : free : DllUnregisterServer : DllUnregisterServer : CServerContextActivator::CreateInstance actvator.cxx:1000 ActivationPropertiesIn::DelegateCreateInstance actprops.cxx:1918 CApartmentActivator::CreateInstance actvator.cxx:2251 CProcessActivator::CCICallback actvator.cxx:1716 CProcessActivator::AttemptActivation actvator.cxx:1630 CProcessActivator::ActivateByContext actvator.cxx:1488 CProcessActivator::CreateInstance actvator.cxx:1389 ActivationPropertiesIn::DelegateCreateInstance actprops.cxx:1918 CClientContextActivator::CreateInstance actvator.cxx:685 ActivationPropertiesIn::DelegateCreateInstance actprops.cxx:1918 ICoCreateInstanceEx objact.cxx:1397 CComActivator::DoCreateInstance immact.hxx:343 CoCreateInstanceEx actapi.cxx:175 CoCreateInstance actapi.cxx:120 _SHCoCreateInstance : SHExtCoCreateInstance : DCA_SHExtCoCreateInstance : CFSIconOverlayManager::_s_LoadIconOverlayIdentifiers : CFSIconOverlayManager::CreateInstance : IconOverlayManagerInit : GetIconOverlayManager : FileIconInit : SHGetImageList : CBreadcrumbBar::InitBreadcrumbBar : CAddressBand::_EnsureBreadcrumbBar : CAddressBand::_CreateAddressBand : CAddressBand::SetSite : IUnknown_SetSite : CBandSite::_AddBandByID : CBandSite::AddBand : CNavBar::_CreateBands : CNavBar::_CreateBar : CNavBar::ShowDW : CFileOpenSave::_CreateNavigationBar : CFileOpenSave::_InitOpenSaveDialog : CFileOpenSave::s_OpenSaveDlgProc : UserCallDlgProcCheckWow : DefDlgProcWorker : DefDlgProcW : UserCallWinProcCheckWow : InternalCreateDialog : InternalDialogBox : DialogBoxIndirectParamAorW : DialogBoxIndirectParamW : CFileOpenSave::Show : QDialog::exec : QFileDialog::getSaveFileUrl : QFileDialog::getSaveFileName : QgisApp::fileSave qgisapp.cpp:6179 QMetaObject::activate : QAction::activate : QAbstractButton::click : QAbstractButton::mouseReleaseEvent : QToolButton::mouseReleaseEvent : QWidget::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify qgsapplication.cpp:403 QCoreApplication::notifyInternal2 : QApplicationPrivate::sendMouseEvent : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify qgsapplication.cpp:403 QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : UserCallWinProcCheckWow : DispatchMessageWorker : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QCoreApplication::exec : main main.cpp:1567 BaseThreadInitThunk : RtlUserThreadStart : QGIS Info QGIS Version: 3.8.3-Zanzibar QGIS code revision: 685d8b15d2 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.1 Running against GDAL: 2.4.1 System Info CPU Type: x86_64 Kernel Type: winnt Kernel Version: 6.1.7601",Can you try to create a new profile (settings > users profile > new profile) and try again? Thanks,Thank you for the help! That is the first thing I did when I started having this issue.
qgis/QGIS,https://github.com/qgis/QGIS/issues/32049,qgis_QGIS_issues_32049,"GEOREFERENCER PROBLEM QGIS

Greetings I am having problems with the Qgis Georeferencer, pressing it gives no signs of running and I cannot reinstall add-on to solve problem. I have already removed and reinstalled the complete program and the problem is not resolved.",What QGIS version and Operating system are you using? Can you try running QGIS with a new profile? (Settings > user profiles > new profile),**thanks for your help. It worked perfect.**
qgis/QGIS,https://github.com/qgis/QGIS/issues/32212,qgis_QGIS_issues_32212,"Please Include Pandas Package in PyQGIS

Please add the `pandas` package in the PyQGIS distribution. Without administrator privileges at work, I am unable to `python -m pip install pandas`. `pandas` is an extremely convenient way to work with some feature layers. Adding `panda` to PyQGIS will help users like me that cannot add packages, but will alleviate the need for many other users to do a pip install.",Can you use the --user flag (python -m pip install pandas --user) to put it into the user packages directory to get around the need for admin?,"I did the pip install at home. At work, QGIS is virtualized (with Citrix). The cmd.exe is not available to us, but Powershell is. Regardless, the network does not have an internet connection. I would have to get a whl package, but I don’t have the privileges to move the whl to the network. To me, adding Pandas or GeoPandas to the PyQGIS distribution is a “no-brainer”. Basically, a feature attribute table is DataFrame. Using pandas (or GeoPandas) will make scripts a lot easier to write and more efficient to run. Pandas is a standard across the Python community for sorting, pivoting, performing numeric operations, etc. on dataframes. Please consider adding Pandas (or GeoPandas) to an upcoming release. Thank you, Chip Shand From: Saijin-Naib <notifications@github.com> Sent: Tuesday, October 15, 2019 4:36 PM To: qgis/QGIS <QGIS@noreply.github.com> Cc: slalomchip <slalom@cox.net>; Author <author@noreply.github.com> Subject: Re: [qgis/QGIS] Please Include Pandas Package in PyQGIS (#32212) Can you use the --user flag (python -m pip install pandas --user) to put it into the user packages directory to get around the need for admin? — You are receiving this because you authored the thread. Reply to this email directly, view it on GitHub <https://github.com/qgis/QGIS/issues/32212?email_source=notifications&email_token=AHQ4N2ZZJIW4ABWFZQLCQXLQOYSUVA5CNFSM4I72WM22YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEBKEIEI#issuecomment-542393361> , or unsubscribe <https://github.com/notifications/unsubscribe-auth/AHQ4N26UYWUW6BDWVJZ676TQOYSUVANCNFSM4I72WM2Q> . <https://github.com/notifications/beacon/AHQ4N226GNFT67HHTAYYI73QOYSUVA5CNFSM4I72WM22YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEBKEIEI.gif>"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32135,qgis_QGIS_issues_32135,"Unable to Install Plugins - No Python Support Detected

Hello, I am getting back on QGIS after a few years of not using it at my previous job. In order to continue using QGIS, I downloaded QGIS 3.8 for Mac OS X a few days ago. However, I am having issues utilizing basic functions of QGIS with the new version. I looked up my plugins window, but was only greeted with eight available plugins in the entire repository. When I opened up my plugins window to find out how I could install new plugins, I was greeted with this message: <img width=""875"" alt=""Screen Shot 2019-10-06 at 6 39 08 PM"" src=""https://user-images.githubusercontent.com/25887056/66277181-befceb80-e868-11e9-9f66-26cfb78368a1.png""> Adding to that, I looked on my Plugins menu from my options at the top of the screen and it does not give me a Python console. This is confusing because I have Python 3.7 installed on my computer. How do I fix this problem?","Which QGIS mac installer did you use? It's highly recommended that you use the ""all-in-one"" signed installers, which don't require any messing around with system python libraries.","If I remember correctly, it was the all in one version, for QGIS 3.8. I never had QGIS 3.4, so I don't know if that caused a problem. Should I try reinstalling with the all-in-one installer?"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32444,qgis_QGIS_issues_32444,"QGIS toggles two layers to editing instead of just the one that is selected

What: When clicking on the pencil icon to turn editing fro a layer on or off, the selected layer is toggled but a second layer is toggled as well Expected: Only the selected layer gets its edit mode toggled How to reproduce: 1. Open project with PostGIS layers in it 2. Select 1 layer in the ""Layers"" panel 3. Click on the pencil icon 4. Selected layer and another layer are both toggled The PostGIS tables for the layers are named ""Balance of Power"".""timeline-countries"" and ""Balance of Power"".""timeline_level1"". The second one is a new table/layer with no data in. QGIS info from the Help→about dialog: column |column |column |column | -- | -- | -- | -- QGIS version | 3.8.3-Zanzibar | QGIS code revision | 0b21735e28 Compiled against Qt | 5.12.2 | Running against Qt | 5.12.2 Compiled against GDAL/OGR | 2.4.0 | Running against GDAL/OGR | 2.4.0 Compiled against GEOS | 3.7.1-CAPI-1.11.1 | Running against GEOS | 3.7.1-CAPI-1.11.1 27a5e771 PostgreSQL Client Version | 11.5 (Ubuntu 11.5-0ubuntu0.19.04.1) | SpatiaLite Version | 4.3.0a QWT Version | 6.1.4 | QScintilla2 Version | 2.10.4 Compiled against PROJ | 5.2.0 | Running against PROJ | Rel. 5.2.0, September 15th, 2018 This copy of QGIS writes debugging output. OS Version | Ubuntu 19.04 | | Toggling on produces the following lines on the console: ",does it happen if you load such layers in a new project? does it happen if you open the project with a new qgis profile (no 3rd party plugins installed)?,"It did in 3.8, but seems not to in 3.10."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34933,qgis_QGIS_issues_34933,"QGIS does not reproject properly

QGIS 3.13 With data entered in 4326, when I change the projection to 3573 to prepare for a print manager layout and export SVG, some lines are not drawn as expected. It's not uncommon with long lines made up of only two widely separated points that look fine in a 4326/Mercator type projection to do this on projections that would show curves in the lines of latitude and longitude. The lines on my layers, however, are made up of multiple points and the intermediate one are not getting placed properly. 4326 ![image](https://user-images.githubusercontent.com/8172909/76166778-7effa480-6137-11ea-9501-159c6d1d78be.png) 3573 ![image](https://user-images.githubusercontent.com/8172909/76166634-604cde00-6136-11ea-9f08-0c844c40c29a.png) Oddly, when I make the layer active, toggle edit mode to on, and then select the wrongly drawn lines, they get redrawn correctly. Ocasionally, but not always, they will redraw correctly after moving the canvas in edit mode, but not always. Selecting first guarantees the correct redraw. ![image](https://user-images.githubusercontent.com/8172909/76166646-7ce91600-6136-11ea-8f91-3419af277790.png) They stay redrawn correctly even after deselecting and moving the canvas around, zooming,, as long as I do not toggle edit mode off. ![image](https://user-images.githubusercontent.com/8172909/76166694-d9e4cc00-6136-11ea-93e7-cc5e8140431a.png) The revert to the badly drawn lines immediately after toggling off edit mode. ![image](https://user-images.githubusercontent.com/8172909/76166711-03055c80-6137-11ea-808d-7fef1aa9a4ef.png) Note that the solid line at the bottom, which is in a different layer, also suffers froim this same problem QGIS version | 3.13.0-Master | QGIS code revision | 13337b20cd -- | -- | -- | -- Compiled against Qt | 5.12.2 | Running against Qt | 5.12.2 Compiled against GDAL/OGR | 2.4.0 | Running against GDAL/OGR | 2.4.0 Compiled against GEOS | 3.7.1-CAPI-1.11.1 | Running against GEOS | 3.7.1-CAPI-1.11.1 27a5e771 Compiled against SQLite | 3.27.2 | Running against SQLite | 3.27.2 PostgreSQL Client Version | 11.5 (Ubuntu 11.5-0ubuntu0.19.04.1) | SpatiaLite Version | 4.3.0a QWT Version | 6.1.4 | QScintilla2 Version | 2.10.4 Compiled against PROJ | 5.2.0 | Running against PROJ | Rel. 5.2.0, September 15th, 2018 OS Version | Ubuntu 19.04 | This copy of QGIS writes debugging output. Active python plugins | ClipMultipleLayers; postgisQueryBuilder; arrayplus; quick_map_services; qgis_hats; BoundingBox; Qgis2threejs; splitmultipart; postgis_geoprocessing; clipper; timemanager; db-style-manager; qgis2web; MetaSearch; db_manager; processing The layer used for the example screencaps: Name | timeline_level2_borders -- | -- Source | dbname='Alternate History' host=pg1.db.cory.albrecht.name port=5432 sslmode=require authcfg=y3j5ksn key='id' srid=4326 type=MultiLineString checkPrimaryKeyUnicity='1' table=""Balance of Power"".""timeline_level2_borders"" (geom) sql=""start_date"" = '1886/12/31' Storage | PostgreSQL database with PostGIS extension Comment | Encoding | Geometry | Line (MultiLineString) CRS | EPSG:4326 - WGS 84 - Geographic Extent | -135.4769919305130088,49.0000000000000000 : -100.0000000000000000,62.0000000000000000 Unit | degrees Feature count | 10 The two feature lines used as example for selecting [out.geojson.gz](https://github.com/qgis/QGIS/files/4303511/out.geojson.gz)",Could be because of GDAL 2.4 / PROJ 5.2.0? The lines you attached seem to display fine on 8addbde0a5 with GDAL 3.0.4 and PROJ 6.3.1,"@nirvn Yes, it has worked before. I reproject to something that will have have curved lines before I output to SVG to continue working on the artistic portion map. Just not with these new layers. as you can see, the graticules for longitude and latitude still worked OK."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32239,qgis_QGIS_issues_32239,"QGIS crashes on Save As

Trying to save the project using Save As. System freezes immediately. This also happens with release 3.8. ## User Feedback Trying to save the project using Save As. System freezes immediately. This also happens with release 3.8. ## Report Details *Crash ID*: 2b5b8847e4fda81698b56c97b7805166938c74fd *Stack Trace* <pre> RtlpFreeHeapInternal : RtlFreeHeap : free : DllUnregisterServer : DllUnregisterServer : CServerContextActivator::CreateInstance actvator.cxx:877 ActivationPropertiesIn::DelegateCreateInstance actprops.cxx:1970 CApartmentActivator::CreateInstance actvator.cxx:2185 CProcessActivator::CCICallback actvator.cxx:1636 CProcessActivator::AttemptActivation actvator.cxx:1523 CProcessActivator::ActivateByContext actvator.cxx:1367 CProcessActivator::CreateInstance actvator.cxx:1267 ActivationPropertiesIn::DelegateCreateInstance actprops.cxx:1970 CClientContextActivator::CreateInstance actvator.cxx:566 ActivationPropertiesIn::DelegateCreateInstance actprops.cxx:1970 ICoCreateInstanceEx objact.cxx:2039 CComActivator::DoCreateInstance immact.hxx:386 CoCreateInstance actapi.cxx:121 _SHCoCreateInstance : DCA_SHExtCoCreateInstance : CreateAndCacheIconOverlay : CFSIconOverlayManager::GetOverlayIconInformation : CFSIconOverlayManager::LoadIconOverlayIdentifiers : CFSIconOverlayManager::_s_LoadIconOverlayIdentifiers : CFSIconOverlayManager::LoadNonloadedOverlayIdentifiers : EnableExternalOverlayIdentifiers : CFSIconOverlayManager::RefreshOverlayImages : GetIconOverlayManagerImpl : CFSFolder::_GetOverlayInfo : CRegFolder::_GetOverlayInfo : CRegFolder::GetOverlayIndex : CAutoDestItemsFolder::GetOverlayIndex : CRegFolder::_GetOverlayInfo : CRegFolder::GetOverlayIndex : CNscOverlayTask::_Extract : CNscOverlayTask::InternalResumeRT : CRunnableTask::Run : CShellTask::TT_Run : CShellTaskThread::ThreadProc : CShellTaskThread::s_ThreadProc : ExecuteWorkItemThreadProc : RtlpTpWorkCallback : TppWorkerThread : BaseThreadInitThunk : RtlUserThreadStart : </pre> *QGIS Info* QGIS Version: 3.4.12-Madeira QGIS code revision: 625767347a Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.1 Running against GDAL: 2.4.1 *System Info* CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.18362","what folders have you removed? To be sure just use the QGIS ""new profile"" functionality, and try again.","Same issue. Qgis-ltr-bin.exe has stopped working. On Mon, 14 Oct. 2019, 20:54 Harrissou Sant-anna, <notifications@github.com> wrote:"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32244,qgis_QGIS_issues_32244,"When downloading QGIS and starting program I am unable to access any features. I get an error message that readsAuthentication System: DISABLED. Resources authenticating via the system can not be accessed. I am new to this program and not a very technical person. Any help is appreciated as I need this program for a school project

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> **How to Reproduce** <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> **QGIS and OS versions** <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> **Additional context** <!-- Add any other context about the problem here. -->",what macos version to you use? does the error on startup blocks the use of the program?,"HI, I am on Mac 10.14.6 Yes the error on the start up blocks the use of the program"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32247,qgis_QGIS_issues_32247,"QGIS application installer is packaged with Nirsoft components

**Feature description.** <!-- A clear and concise description of what you want to happen. Ex. QGIS would rock even more if [...] --> I noticed that the QGIS application installer is packaged with Nirsoft components. Were you aware of this as my antivirus solution is detecting the installer as a PUP/PUA. As a feature request, can you package the QGIS application installer with a reputable source besides Nirsoft? This would be beneficial for users like myself who may have experienced a similar situation when their antivirus solution is detecting the executable as being possibly malicious. **Additional context** <!-- Add any other context or screenshots about the feature request here. Open source is community driven, please consider a way to support this work either by hiring developers, supporting the QGIS project, find someone to submit a pull request. If the change required is important, you should consider writing a [QGIS Enhancement Proposal](https://github.com/qgis/QGIS-Enhancement-Proposals/issues) (QEP) or hiring someone to, and announce your work on the lists. -->",What OS are you using? What installer are you using?,The OS I'm using is Windows. The installers are QGIS-OSGeo4W-2.14.5-1-Setup-x86_64.exe or OSGeo4W-3.4.12-1-Setup-x86_64.exe. Both of them are packaged with Nirsoft components.
qgis/QGIS,https://github.com/qgis/QGIS/issues/32293,qgis_QGIS_issues_32293,"Rule based styles limited to 31 rules

Hello, when styling vector features with rule based styles, there seems to be a limitation to 31 rules. When doing a 32th the content is not visible anymore. The (in my case) polygons dissappear. This bug seems to be active for 2.18.28 (but not older Versions of 2.8) and > 3.4. Qgis 3.2 and 3.3 seem to work normally. Sebastian",why close? Is it solved somehow?,"clicked the wrong button, sorry"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32299,qgis_QGIS_issues_32299,"vectors not exporting

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> **How to Reproduce** <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> **QGIS and OS versions** <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> **Additional context** <!-- Add any other context about the problem here. --> I have the latest QGIS 3.8.3 Zanzabar and I'm attempting to export a map as either an .svg and/or .pdf file so that I may further work with it in Adobe Illustrator. My problem is no matter what I do QGIS still exports my map as a raster image. I've watched every single online video I can find with regards to this specific task but I'm still unable to get a map in vector format. At this point I'm convinced it's a bug within the software. Additionally, when I try and open my exported .svg file in illustrator I get error message stating that This SVG is Invalid. Validate it before opening"". So what I end up doing is opening the .svg file in Inkscape and then re-saving. Illustrator is then able to open the saved .svg file (from Inkscape) with no problem. ![Illustrator_p2Hjhi1vrL](https://user-images.githubusercontent.com/56689806/67023582-b4b1db80-f10b-11e9-936a-ce96cb43fc14.png) ![Illustrator_DaFhYm36M9](https://user-images.githubusercontent.com/56689806/67023609-bd0a1680-f10b-11e9-84e9-07a193465560.png)",Do you have actual vector data loaded? The screenshots look like you have pre-rendered OpenStreetMap tiles. Those are raster data with no editing possibilities.,"Thanks for the prompt response Kannes. Apparently, I only have OpenStreetMap tiles loaded. In the past I've downloaded vector data from the OpenStreetMap website in .svg format (see below image) and I assumed exporting OSM vector data from QGIS would be a similar process. ![chrome_IODKFCBTT8](https://user-images.githubusercontent.com/56689806/67065587-8a960300-f177-11e9-9e14-91120c3f795b.png) I have background in desktop publishing and I'd like to be able to tweak my QGIS maps within Illustrator/Photoshop whenever possible. Within QGIS, is the vector data input by the user or is it downloaded/imported through one of the many plugins. Please advise. Your time and assistance is greatly appreciated."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32335,qgis_QGIS_issues_32335,"qgis.exe can't start and crashed!

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> compile the QGIS library with: -VS2017 -osgeo4w-setup-x86_64 for 3rdparty -QT5.13.0x64 for vs2017 -X64 cmake with basic option，：gui core desktop.. **### qgis.exe crash ：** Application path not initialized Debug Assertion Failed! Program: ...ryCompile\QGIS\QGIS-final-3_4_12B\output\bin\Release\qgis.exe File: minkernel\crts\ucrt\src\appcrt\heap\debug_heap.cpp Line: 908 Expression: is_block_type_valid(header->_block_use) For information on how your program can cause an assertion failure, see the Visual C++ documentation on asserts. (Press Retry to debug the application) Crash ID: 599bbf09eb9a825c352c2af1a3661d868930890a Stack Trace strnicoll_l : strnicoll_l : strnicoll_l : strnlen : _p__commode : _p__commode : _p__commode : _p__commode : _p__commode : _p__commode : _stdio_common_vsnprintf_s : VCrtDbgReportW : VCrtDbgReportW : VCrtDbgReportA : CrtDbgReport : calloc_base : free_dbg : free : QLockFile::error : QLockFile::error : QLockFile::error : main : BaseThreadInitThunk : RtlUserThreadStart QGIS Info QGIS Version: 3.4.12-Madeira QGIS code branch: Release 3.4 Compiled against Qt: 5.13.0 Running against Qt: 5.13.0 Compiled against GDAL: 2.4.1 Running against GDAL: 2.4.1 System Info CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.18362 **How to Reproduce** <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> **QGIS and OS versions** <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> I try QGIS3_4_0 QGIS3_4_12 QGIS3_8_2 QGIS ltr-3_4 ,the same error! Win10 X64 <!-- Add any other context about the problem here. -->",Did your roll you own Qt? Qt in OSGeo4W is for VS2015 and won't work with VS2017.,yes，I install myself with qt5.13.0!
qgis/QGIS,https://github.com/qgis/QGIS/issues/32347,qgis_QGIS_issues_32347,"More null pointer dereferences when plugins are off

I run cppcheck against sources and found two more null pointer dereferences identical to issue #32338 src/server/services/wcs/qgswcsdescribecoverage.cpp:62:21: error:inconclusive: Null pointer dereference: describeDocument [nullPointer] response.write( describeDocument->toByteArray() ); src/server/services/wms/qgswmsgetcontext.cpp:84:21: error:inconclusive: Null pointer dereference: contextDocument [nullPointer] response.write( contextDocument->toByteArray() ); ",Can you make a PR? That's what professional bug Hunters do ;),"Actually looking closely, theres yet two more... Sorry elpaso, I've never done PR's, I don't really have time to learn right now and this is the rare times I contribute on github. :) "
qgis/QGIS,https://github.com/qgis/QGIS/issues/32350,qgis_QGIS_issues_32350,"QGIS crashed after adding new field with old field name

h2. User Feedback h2. Report Details *Crash ID*: 2e3bc8b4b3e4cb07dc2a89b62cec8cfd37e5942b *Stack Trace* <pre> QgsField::type : QgsFields::iconForField : QgsSourceFieldsProperties::setRow : QgsSourceFieldsProperties::attributeAdded : QMetaObject::activate : QgsVectorLayer::attributeAdded : QMetaObject::activate : QgsVectorLayerEditBuffer::attributeAdded : QUndoStack::push : QgsVectorLayerEditBuffer::addAttribute : QgsSourceFieldsProperties::addAttribute : QgsSourceFieldsProperties::addAttributeClicked : QMetaObject::activate : QAbstractButton::clicked : QAbstractButton::click : QAbstractButton::mouseReleaseEvent : QToolButton::mouseReleaseEvent : QWidget::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QApplicationPrivate::sendMouseEvent : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : TranslateMessageEx : TranslateMessage : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QDialog::exec : QgisApp::showLayerProperties : QgisApp::qt_static_metacall : QMetaObject::activate : QAction::activate : QMenu::actionGeometry : QMenu::actionGeometry : QMenu::mouseReleaseEvent : QWidget::event : QMenu::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QApplicationPrivate::sendMouseEvent : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystem <!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> **How to Reproduce** <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to layer properties 2. Click on Toggle Editing Mode 3. Change field name (was gid - changed to gid1) 4. add new field ""gid"" 5. Crash repeated 2x Events : QEventDispatcherWin32::processEvents : TranslateMessageEx : TranslateMessage : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QMenu::exec : QgsLayerTreeView::contextMenuEvent : QWidget::event : QFrame::event : QAbstractItemView::viewportEvent : QCoreApplicationPrivate::sendThroughObjectEventFilters : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : TranslateMessageEx : TranslateMessage : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QCoreApplication::exec : main : BaseThreadInitThunk : RtlUserThreadStart : </pre> *QGIS Info* QGIS Version: 3.2.3-Bonn QGIS code revision: commit:9b176802e5 Compiled against Qt: 5.9.2 Running against Qt: 5.9.2 Compiled against GDAL: 2.2.4 Running against GDAL: 2.2.4 *System Info* CPU Type: x86_64 Kernel Type: winnt Kernel Version: 6.1.7601",Can you provide a sample dataset?,Apologies - first time bug poster! shapefile attached. managed to add the field in the format I wanted (was trying to get gid as a different field type to test something) [receptor_int_bfsubsetv2_sp.zip](https://github.com/qgis/QGIS/files/3759869/receptor_int_bfsubsetv2_sp.zip)
qgis/QGIS,https://github.com/qgis/QGIS/issues/32408,qgis_QGIS_issues_32408,"Some few code spelling errors in QGIS-final-3_10_0.tar.gz

As administrator of a FOSS server I have just added a new feature: Source code misspelling error checks for the supported software packages (using the command line program `codespell`). A first check for a really big project was just done as a trial for QGIS-final-3_10_0.tar.gz. The analysis report can be found here: https://fossies.org/linux/misc/QGIS-final-3_10_0.tar.gz/codespell.html A hint: Clicking on a red colored spelling error in the ""top"" list jumps to the first match in the sortable actual spelling error occurrence list. Clicking on a matching member file let you browse that file while jumping to the according red marked line (in some cases the matching line may lie in the neighborhood). I know it's not an important issue (especially since ""surprisingly"" few errors were found) so you may ignore it. But if you found wrong matches (false positives) please let me know it so that I can force a new improved check.",Does your function provide a way to fix the spelling? If so you could make a PR to fix those typos.,"That is a reasonable and meaningful question but the answer is unfortunately ""no"". I thought about such a function to create by using the `diff` command one or multiple patch files but the risk is too high that something is wrongly done. Maybe an option to let users (experts) select single spelling errors via a Web form for creating one or multiple patch files would be acceptable so that they could use it for a PR. But that isn't trivial and not yet available. By the way the used program [codespell](https://github.com/codespell-project/codespell) has such a - not yet tried by me - function (see for e.g. the options `--write-changes ` and `--interactive`)."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32856,qgis_QGIS_issues_32856,"Labels disappear even if ""Allow truncted labels"" option is enabled

Something is broken in QGIS 3.10 labelling. Labels disappear if they don't fit into canvas. Even if ""Allow truncated labels"" option is enabled. In QGIS 3.4 everything is ok. This could be somehow related to #32825 QGIS 3.10 Win7 x64",Can't reproduce -- can you share a project demonstrating this?,Project [test.zip](https://github.com/qgis/QGIS/files/3849902/test.zip) Video https://yadi.sk/d/uDHYJnIObfYjYg
qgis/QGIS,https://github.com/qgis/QGIS/issues/33169,qgis_QGIS_issues_33169,"Wrong marker interval calculation in map units

I draw a line. I add a markers to a line with interval of 60 map units. I add a text do display $length of a line Length of a line is 211, so I expect to have 3 intervals and 4 markers, but I get 4 intervals and 5 markers. See attached picture ![123](https://user-images.githubusercontent.com/11345848/69903412-f0e28800-13a9-11ea-9ff0-858cddbf25f7.jpg) The line layer is in EPSG:4326. If I save the layer to EPSG:3395 (metric) and then take length($geometry) then it displays 280 which is more adequate. QGIS 3.4.13 QGIS 3.10.0",Can you please attach a sample project with sample data? thanks.,"Here it is. [temp.zip](https://github.com/qgis/QGIS/files/3907474/temp.zip) There is a line, which $length is 368 meters. Marker interval is set to 100 map units (meters). But the line contains 5 markers instead of 4"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32468,qgis_QGIS_issues_32468,"Dashed lines surround the corners

**Feature description.** i have a usefull idea. please create a button to ""close"" the cornes by dashed lines. see the links below. https://downloads.psd-tutorials.de/Download/_userimages/Image/Stefan/workshops/Illustrator/Grundlagen/26_Breitenwerkzeug/12.gif https://www.illustrator-tutorials.de/2012/02/01/adobe-illustrator-grundlagen-breitenwerkzeug-konturen/",Can you describe (in English) exactly what this feature does?,"only that what you can see in the first link is what i would like to use in qgis. a dashed line around a polygon, that has never a gap at the corners. the second link is only where i had it from."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32523,qgis_QGIS_issues_32523,"PostGIS Views not valid layers

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** When trying to add Views from a PostGIS database I get an error message that the layer is not valid. This was not a problem before 3.10. I also tried adding views from Spatialite and they work perfectly. Have not tried others. **How to Reproduce** 1. Go to PostGIS database in Layer Browser 2. Double-Click on any View in the database or drag view into map canvas 3. Error appears in red at the top of the canvas **QGIS and OS versions** Vers. 3.10 on Ubuntu <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> **Additional context** <!-- Add any other context about the problem here. -->","Can you share your logs? You might have an error in it. I just tried, it works perfectly with 3.10.","Hi Etienne, Which logs are you referring to? I will gladly share them. On 30 Oct 2019, 18:22, at 18:22, ""Étienne Trimaille"" <notifications@github.com> wrote:"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32558,qgis_QGIS_issues_32558,"QGIS 3.10 unable to load PostGIS-table on MacOS Catalina

I just updated to the QGIS 3.10 release under MacOS Catalina. In 3.8 I had no problem using PostGIS-data. When I now try to load the same PostGIS-layer in 3.10 it fails. When testing the connection, it tells me that the connection is openend successfully. When I try to access the data, QGIS hangs on 'load tables from ...'(displayed at the bottom of the window), but the PostGIS-connection window, where schemas and tables are displayed usually stays empty? Any ideas?",maybe related to https://github.com/qgis/QGIS/issues/32523 ?,"I've tried the different ways to open PostGIS-layer in QGIS: 1. As described above opening the PostGIS-layer via the data source manager is not possible (no schemas are displayed). 2. Trying to add a layer using the browser, I get at least the schemas list. But the layers do not show up. There is an error: couldn't retrieve layer. 3. Using the db manager the schemas are displayed and I'm able to open the layers as normal. PostgreSQL is 11.5 running on Ubuntu 11.5 PostGIS is 2.5.3"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32604,qgis_QGIS_issues_32604,"dxf export

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> **How to Reproduce** <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> **QGIS and OS versions** <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> **Additional context** <!-- Add any other context about the problem here. --> when i am exporting qpx files( with wptpoints) to dxf, always missing 2 points.!",Can you provide a sample test data? There still isn't enough here to meaningfully debug.,[dxf_export.zip](https://github.com/qgis/QGIS/files/3802196/dxf_export.zip)
qgis/QGIS,https://github.com/qgis/QGIS/issues/32717,qgis_QGIS_issues_32717,"In 3.10 - bad allocation for 3.8 qgs - ""loading"" mouse cursor remains

**Describe the bug** <!-- A clear and concise description of what the bug is. --> I described in #32661 an error: when opening 3.8 qgs projects with 3.10, I get a bad allocation error message. after the bad allocation error, the mouse cursor remains a blue ""loading"" circle instead of the regular white triangular pointer... leading me to believe it had crashed, then exiting QGIS by closing the window bringing the crash report message seemingly confirmed it had crashed I just found out that QGIS is still usable even after the ""bad allocation"" error, although the blue circle mouse pointer makes clicking on things very confusing. The closing qgis crash erroneously led me to believe it had already crashed, but it hat not, only the loading cursor was still present. (I found out that saving the project, the closing the project only through the project menu, then exiting qgis through the project menu prevented the crash) The circle cursor remains even when using the select tool and the information tool. I don't know how to further assist. I only tried doing a buffer and exporting a layer in a different CRS Thank you **How to Reproduce** open 3.8 qgs project with 3.10 get bad allocation error message mouse cursor is ""loading"" message bar below still shows ""loading layer xxxxxx"" qgis is usable but the mouse cursor will not change back to the regular triangular pointer **edit** I have to add that saving the v3.8 qgs project with 3.10 corrects this issue. Also using themes also work. <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> **QGIS and OS versions** QGIS version 3.10.0-A CoruÃ±a QGIS code revision 6c816b4204 Compiled against Qt 5.11.2 Running against Qt 5.11.2 Compiled against GDAL/OGR 2.4.1 Running against GDAL/OGR 2.4.1 Compiled against GEOS 3.8.0-CAPI-1.13.1 Running against GEOS 3.8.0-CAPI-1.13.1 Compiled against SQLite 3.29.0 Running against SQLite 3.29.0 PostgreSQL Client Version 11.5 SpatiaLite Version 4.3.0 QWT Version 6.1.3 QScintilla2 Version 2.10.8 Compiled against PROJ 5.2.0 Running against PROJ Rel. 5.2.0, September 15th, 2018 OS Version Windows 10 (10.0) Active python plugins db_manager; MetaSearch; processing **Additional context** <!-- Add any other context about the problem here. -->",how this differ from https://github.com/qgis/QGIS/issues/32661 ?,"It doesn't really, but the other one was closed... I think there was more than one issue addressed in that one and one of them was fixed, althouth I don't exactly understand what was fixed."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32686,qgis_QGIS_issues_32686,"Can't open r.drain

I'm trying to use r.drain to calculate an optimal route, but it wont open. I'm using QGIS 3.4.13 with GRASS 7.6.1. While using the plugin, I can open all tools (r.cross, r.walk, etc) but r.drain. I get the following message: ![image](https://user-images.githubusercontent.com/57443545/68298602-b24efb80-0091-11ea-851d-a683b393ea36.png) I've tried also with 3.10 and on different computers with the same result. Can you please check if this is a bug? Thanks in advance.",Do you mean the GRASS plugin or the processing toolbox?,The plugin
qgis/QGIS,https://github.com/qgis/QGIS/issues/32689,qgis_QGIS_issues_32689,"Storing Project QGZ in to geopackage does not store relative paths

**Describe the bug** If I ask QGIS to save the project file in a Geopack (to create a portable package and share the entire project), the command is going to end, it works. But, it has no use, since this project file still points to the absolute locations of the project layers. **How to Reproduce** I present 2 situations, and none allows obtaining a complete geopack to share the project: 1) New clean project. I load several layers (from several carpets), then pack them in a new Geopack, save the project in the Geopack. When you move the Geopack, the project does NOT open. And it seems logical, because ""nobody"" told QGIS that the QGZ project must change the path of the layers. 2) Project ""old"" or already finished. The same applies to point 1. We can package the layers and the project in a new Geopack, but the QGZ project does not update the paths of the packaged layers. The only ways I've found to get a Geopack Project to share or move, has been 1) pack layers in a new Geopack; open a clean project; load the layers of the Geopack, save the project inside the Geopack. This works in terms of layers, but loses all the information of the general project (layout, views etc ..) 2) Manually change the ""data source"" of each layer, so that the QGZ project points to the path of the layers in the Geopack. It works, but it is not viable, being manual. This happens with any type of layer, it is not a problem of specific layers. My Doubt is; is it a bug? Or is it a wrong idea of ​​how the QGIS function ""saves project in Geopack"" works? Thanks for the support **QGIS and OS versions** QGIS 3.10 Windows 10 64 bit",Can you give us a step-by-step procedure to reproduce the issue starting from the creation of a new geopackage?,"1) I create a new clean project. Annex 3 vector layers of some folders on my hard drive. The first layer is contained in a Geopack (Naural Earth), the other 2 from shape files of 2 different folders 2) I save the QGZ project in a folder on my computer. And I continue working, modifying and simulating the use of the project. 3) Once the project is finished, I use the geoprocess ""Package layers"", and create a new Geopack that saves the vectors and their styles. The process ends with success. 4) Now I need to share this entire project with another user on another computer. I keep the QGZ project in the same Geopack that contains the vector layers (point 2). Do not get any message that says the process is finished, but if I enter the geopack you see the QGZ file 5) Now I have 2 situations, but both are wrong. a) I only move the geopack in a different folder on the same pc, I open QGIS, and through the data source manager, I look for the Geopack. I unfold the content, and double click on the QGZ file The project opens, but the layers are reading them with the old paths, NOT the geopack. b) If I move the geopack on another PC, and try to open the QGZ project inside the geopack, the error comes out, it does not locate the layers, because the previous absolute path is still registered, in the original carpets before the Geopack packaging. Thank you very much Annex link with images https://docs.google.com/presentation/d/1AvdIelCtewhIT7cDmfcbr06wqZjrNz2nzhCZX5QI9Ek/edit?usp=sharing PS: I think I found another detail: if I open a geopack that also contains the QGZ project file, from a USB memory, the datat source browser does NOT show the QGZ file."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32753,qgis_QGIS_issues_32753,"Modeler and Raster Calculator fail to calc

Hi all, context: Raster Calculator added in a Processing model + 1 rasters as input Using the Raster Calculator module inside a Model I have an output always as float raster with [-1.7: 1.7] This only happens if the interface is in Italian or Spanish. Everything works correctly with the interface in English. I have not verified with other languages Maybe there's a related issue at https://github.com/qgis/QGIS/issues/27130 Thanks",Can you please share a test project plus data?,"In the zip we can find datas, project and model created using italian language interface Thank you"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32780,qgis_QGIS_issues_32780,"QGIS crash when closing the application

Every time I quit QGIS the software give me back a crash. This is the traceback: Crash ID: 56776c067d5c4c396ceb7d9652ae10f294434880 Stack Trace QGraphicsItem::update : QgsAdvancedDigitizingDockWidget::setCadEnabled qgsadvanceddigitizingdockwidget.cpp:169 QWidget::event : QDockWidget::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify qgsapplication.cpp:373 QCoreApplication::notifyInternal2 : QWidgetPrivate::hideChildren : QWidgetPrivate::hide_helper : QWidget::setVisible : QWidgetPrivate::close_helper : QWidget::~QWidget : QgisApp::`vector deleting destructor' : main main.cpp:1543 BaseThreadInitThunk : RtlUserThreadStart : QGIS Info QGIS Version: 3.4.13-Madeira QGIS code revision: 64ad560274 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.1 Running against GDAL: 2.4.1 System Info CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.18362",Would you have the possibility to install a nightly build of 3.4 with osgeo4w and check if the issue is fixed? https://github.com/qgis/QGIS/pull/32715,"@gioman I've installed saturday a clean copy of QGIS using OSGeo and nothing is changed. @m-kuhn ok, I try it"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32804,qgis_QGIS_issues_32804,"WMS Download of capabitilies failed: Error transferring getCapabilities document

**WMS capabilities transfer fails** When I try to connect to the WMS service located at http://services.cuzk.cz/wms/local-KM-wms.asp?service=WMS&request=getCapabilities, I get the error below and no layers are retrieved from that service. Yet `curl` downloads the underlying xml document just fine.  **How to Reproduce** Add new WMS/WMTS connection, use http://services.cuzk.cz/wms/local-KM-wms.asp?service=WMS&request=getCapabilities for URL. Try to expand the layer list of the newly added connection, you get ""Failed to download capabilities"". **QGIS and OS versions** QGIS version | 3.10.0-A Coruña | QGIS code revision | 6c816b4204 -- | -- | -- | -- Compiled against Qt | 5.9.5 | Running against Qt | 5.9.5 Compiled against GDAL/OGR | 2.2.3 | Running against GDAL/OGR | 2.2.3 Compiled against GEOS | 3.6.2-CAPI-1.10.2 | Running against GEOS | 3.7.1-CAPI-1.11.1 27a5e771 Compiled against SQLite | 3.22.0 | Running against SQLite | 3.22.0 PostgreSQL Client Version | 10.10 (Ubuntu 10.10-0ubuntu0.18.04.1) | SpatiaLite Version | 4.3.0a QWT Version | 6.1.3 | QScintilla2 Version | 2.10.2 PROJ.4 Version | 493 OS Version | Linux Mint 19.2 Active python plugins | qgis2web; db_manager; processing",Does it work on 3.4? Duplicate of https://github.com/qgis/QGIS/issues/32740 ?,It does work on 3.4. Seems to be the duplicate of above mentioned #32740.
qgis/QGIS,https://github.com/qgis/QGIS/issues/35249,qgis_QGIS_issues_35249,"The interpolate function/method of QgsGeometry fails for some line geometries

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue --> **Describe the bug** For some line geometries, the interpolate function fails to find a point on the line. I stumbled upon this when @nyalldawson asked me to use this function for the RandomPointsOnLine algorithm (#34631). I may have a look at this bug myself, but can't promise anything in the near future. **How to Reproduce** I attach a GML file with only one feature / line (origin: Norwegian official road dataset, run through the *Fix geometries* algorithm to make sure the geometry is valid (same problem before running *Fix geometries*), MultiLineStringZ, EPSG:32632). The interpolate function is not able to interpolate any point at distances longer than 550 meters along this line in my environment. This is the GML file: [difficult_line.zip](https://github.com/qgis/QGIS/files/4366690/difficult_line.zip) The bug also manifests itself when you try to run the *Interpolate point on line* and *Points along geometry* algorithms with this dataset as input. For distances of 551 meters and more, no points are generated. The first part of the multi-line is around 550 meters long, and located at the south end of the geometry. It goes ""backward"" (from north to south), and another part is ""attached"" close to the start of the line (I have not checked if this is the second part). <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome 1. Go to '...' 2. Click on '....' 3. Scroll down to '....' 4. See error --> **QGIS and OS versions** QGIS version | 3.11.0-Master | QGIS code revision | 2672c74393 -- | -- | -- | -- Compiled against Qt | 5.9.5 | Running against Qt | 5.9.5 Compiled against GDAL/OGR | 2.2.3 | Running against GDAL/OGR | 2.2.3 Compiled against GEOS | 3.6.2-CAPI-1.10.2 | Running against GEOS | 3.6.2-CAPI-1.10.2 4d2925d6 Compiled against SQLite | 3.22.0 | Running against SQLite | 3.22.0 PostgreSQL Client Version | 10.12 (Ubuntu 10.12-0ubuntu0.18.04.1) | SpatiaLite Version | 4.3.0a QWT Version | 6.1.3 | QScintilla2 Version | 2.10.2 PROJ.4 Version | 493 OS Version | Ubuntu 18.04.4 LTS Active python plugins | pluginbuilder3; plugin_reloader; SDEllipse; BOS; QGIS-ResourceSharing-master; LineDirectionHistogram; processing_taudem; processing_r; MetaSearch; processing; db_manager <!-- In the QGIS Help menu -> About, click in the table, Ctrl+A and then Ctrl+C. Finally paste here --> **Additional context** <!-- Add any other context about the problem here. -->","Why are you running 3.11? That's an odd choice :laughing: Anyway, this was fixed a while back -- see https://github.com/qgis/QGIS/issues/34022","I thought I was running against master, but my ""fork"" had apparently not been updated for a while... Sorry about that."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32843,qgis_QGIS_issues_32843,"Can't see postgis tables when switching between postgis rw and read-only auth conf.

**Bug Description** Wnen swapping between read/write and readonly postgis authentication configurations, the readonly user cannot see the tables in the dialogue in order to add them to the map. **How to Reproduce** 1. create a qgis auth conf with the postgis user (full access) 2. connect to a database > see all of the tables > add a table to the map 3. create a qgis auth conf with the readonly postgis user with access to same database 4. connect to same database>connection is valid>can't see tables in the db manager 5. Open up qgis 2.x > create readonly user auth conf > connect to same database> see tables that were not visible in qgis 3.10 db manager. qgis 3.10 auth config read/write: <img width=""453"" alt=""image"" src=""https://user-images.githubusercontent.com/775783/68814661-9cfc4300-0636-11ea-9c4d-3c341d54b677.png""> can see tables: <img width=""1131"" alt=""image"" src=""https://user-images.githubusercontent.com/775783/68814688-a9809b80-0636-11ea-8fa1-2e9dd631077f.png""> qgis 3.10 auth config read-only <img width=""466"" alt=""image"" src=""https://user-images.githubusercontent.com/775783/68814719-c4531000-0636-11ea-9e44-f2ad53e8ee2d.png""> CAN'T see tables: <img width=""1004"" alt=""image"" src=""https://user-images.githubusercontent.com/775783/68814736-d16fff00-0636-11ea-839b-6e2b3b3de8a0.png""> qgis 2.18 auth config read-only: <img width=""459"" alt=""image"" src=""https://user-images.githubusercontent.com/775783/68814546-5ad30180-0636-11ea-8944-0703cc83b889.png""> can see tables: <img width=""938"" alt=""image"" src=""https://user-images.githubusercontent.com/775783/68814601-7b9b5700-0636-11ea-9cd1-dc81b8c9aa0e.png""> **QGIS and OS versions** QGIS 3.10.0-A / MacOS Mojave",Can you test on QGIS LTR (3.4)?,"@gioman , I think you are right. I'm not getting this behavior on 3.4 LTR. Possibly a simpler way to observe this behavior is not by switching between RW and RO auth configs, but simply changing the database in the connection itself while leaving the RO auth config the same. on 3.10: 1. create a RO user with access to two databases on the postgis server 2. create a qgis auth conf with the RO user 3. create a new db connection to one of the databases>connect>see tables 4. Leave everything in the connection the same, but change the database 5. Connection is valid>can't see tables on the second database on 3.4 LTR: 1-4: same 5. connection is valid>CAN see tables in second database"
qgis/QGIS,https://github.com/qgis/QGIS/issues/34213,qgis_QGIS_issues_34213,"EPSG code of CRS not recognized

**Describe the bug** QGIS does not recognize the EPSG code of coordinate systems. **How to Reproduce** 1. Reproject any vector layer to EPSG:23700 2. Save it to a GeoPackage 3. Create a new, empty project 4. Load the layer from the GeoPackage 5. Open Layer properties -> Source **What should happen?** The layer properties should show that the CRS is EPSG:23700 **What happens instead?** A generated CRS is shown with the WKT string. The unit of the CRS is also unknown e. g. in the Buffer geoprocessing tool. **QGIS and OS versions** QGIS verzió | 3.10.2-A Coruña | QGIS kód változat | 616ad4531b -- | -- | -- | -- Qt-val fordítva | 5.11.2 | Qt-val futtatva | 5.11.2 GDAL/OGR-rel fordítva | 3.0.2 | GDAL/OGR-rel futtatva | 3.0.2 GEOS-szal fordítva | 3.8.0-CAPI-1.13.1 | GEOS-szal futtatva | 3.8.0-CAPI-1.13.1 Compiled against SQLite | 3.29.0 | Running against SQLite | 3.29.0 PostgreSQL kliens verzió | 11.5 | SpatiaLite verzió | 4.3.0 OWT verzió | 6.1.3 | QScintilla2 Verzió | 2.10.8 PROJ-al fordítva | 6.2.1 | PROJ-al futtatva | Rel. 6.2.1, November 1st, 2019 OS verzió | Windows 10 (10.0) Active python plugins | db_manager; MetaSearch; processing",what CRS had your original data?,WGS84 (EPSG:4326)
qgis/QGIS,https://github.com/qgis/QGIS/issues/32886,qgis_QGIS_issues_32886,"3.10 crashing when out of focus

## User Feedback Qgis was out of focus and not doing any calculations or anything active. This has happened at least once an hour since I've updated QGIS to 3.10.0, always when out of focus. This never occurred to me in 3.8 or older versions. I have some standard plugins but did not add any new ones after updating. One more difference is that I used the OSGeo4W installer this time (downloaded from qgis.org). Furthermore, I had a few warnings by avast antivirus that QGIS would contain ""idp.generic"", but I found online that this was often a false flag caused by python scripts so I added exceptions. ## Report Details **Crash ID**: [029bc1a9b819dfb49a1342291172e44f3c1f8e53]('https://github.com/qgis/QGIS/search?q=029bc1a9b819dfb49a1342291172e44f3c1f8e53&type=Issues') **Stack Trace** <pre> osgeo::proj::datum::Datum::conventionalRS : osgeo::proj::datum::Datum::conventionalRS : osgeo::proj::datum::Datum::conventionalRS : OGRSpatialReference::~OGRSpatialReference : OGRSpatialReference::operator= : OGRGeomFieldDefn::~OGRGeomFieldDefn : SHPWriteObject : OGRFeatureDefn::~OGRFeatureDefn : OGRFeatureDefn::~OGRFeatureDefn : SHPWriteObject : DBFWriteTuple : OGREditableLayer::Translate : QgsOgrProviderUtils::GDALCloseWrapper qgsogrprovider.cpp:4129 QgsConnectionPoolGroup<QgsOgrConn * __ptr64>::onConnectionExpired qgsconnectionpool.h:227 QMetaObject::activate : QTimer::timerEvent : QObject::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify qgsapplication.cpp:418 QCoreApplication::notifyInternal2 : QEventDispatcherWin32Private::sendTimerEvent : QEventDispatcherWin32::processEvents : UserCallWinProcCheckWow : DispatchMessageWorker : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QCoreApplication::exec : main main.cpp:1598 BaseThreadInitThunk : RtlUserThreadStart : </pre> **QGIS Info** QGIS Version: 3.10.0-A Coru�a QGIS code revision: 6ffa89eb3e Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 3.0.2 Running against GDAL: 3.0.2 **System Info** CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.17763 EDIT: I'd like to add: thank you to everyone for all the hard work, QGIS really has become an amazing piece of software.","Might be another issue with Proj6, is your projection valid and supported in Proj6? Some had issues where their old projection were not supported anymore.","I'm using EPSG:4326 as a project CRS. I disabled autosave plugin since that's the only ongoing activity I could imagine and since then no more crashes, but that might be coincidence too. Anyway, didn't have any problems with that plugin before (and in my personal opinion it should be a core plugin)."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32895,qgis_QGIS_issues_32895,"Crash on closing

## User Feedback When closing down ## Report Details **Crash ID**: [881fde7e6ba24e2202b36b2ef5e94068333c6a3a]('https://github.com/qgis/QGIS/search?q=881fde7e6ba24e2202b36b2ef5e94068333c6a3a&type=Issues') **Stack Trace** <pre> osgeo::proj::datum::Datum::conventionalRS : osgeo::proj::datum::Datum::conventionalRS : osgeo::proj::datum::Datum::conventionalRS : OGRSpatialReference::~OGRSpatialReference : OGRSpatialReference::~OGRSpatialReference : GDALRegister_GenBin : GDALRegister_GenBin : QgsGdalProvider::closeCachedGdalHandlesFor qgsgdalprovider.cpp:436 QgsGdalProvider::~QgsGdalProvider qgsgdalprovider.cpp:489 QgsGdalProvider::`scalar deleting destructor' : QgsRasterPipe::~QgsRasterPipe qgsrasterpipe.cpp:58 QgsRasterLayer::~QgsRasterLayer qgsrasterlayer.cpp:137 QgsRasterLayer::`vector deleting destructor' : QgsMapLayerStore::removeMapLayers qgsmaplayerstore.cpp:160 QgsMapLayerStore::removeMapLayers qgsmaplayerstore.cpp:121 QgsMapLayerStore::removeAllMapLayers qgsmaplayerstore.cpp:203 QgsProject::clear qgsproject.cpp:793 QgisApp::closeProject qgisapp.cpp:11881 QgisApp::fileExit qgisapp.cpp:5676 QWidget::event : QgisApp::event qgisapp.cpp:1928 QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify qgsapplication.cpp:418 QCoreApplication::notifyInternal2 : QWidgetPrivate::close_helper : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify qgsapplication.cpp:418 QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processCloseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : UserCallWinProcCheckWow : DispatchMessageWorker : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QCoreApplication::exec : main main.cpp:1598 BaseThreadInitThunk : RtlUserThreadStart : </pre> **QGIS Info** QGIS Version: 3.10.0-A Coru�a QGIS code revision: 6ffa89eb3e Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 3.0.2 Running against GDAL: 3.0.2 **System Info** CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.18362",Do you have the autosave plugin active?,"I don’t ever remember an auto save plugin. The QGIS file saved OK but crashed on closing. I will check for a plug-in. Bruno Sent by Bruno On 18 Nov 2019, at 9:28 pm, Giovanni Manghi <notifications@github.com> wrote: Do you have the autosave plugin active? @brunolemke In other words also try with a new QGIS profile and no 3rd party plugins installed. — You are receiving this because you were mentioned. Reply to this email directly, view it on GitHub, or unsubscribe."
qgis/QGIS,https://github.com/qgis/QGIS/issues/32926,qgis_QGIS_issues_32926,"QGIS's RAM usage while adding layers

Hi there! I found that QGIS 3.x on Windows has a problem while adding vector layers to the project by Data Source Manager. When I work on my QGIS project (.qgs) it uses about 500MB of ram memory all day long (while editing or adding object on PostGIS layers, there is no problem). But when I try to add some vector or CSV layers, RAM usage get crazy (QGIS uses up to 4GB of RAM memory). But you don't have to add any vector layer - it is enought just to click 'Add vector layer' and press Close (whitout adding anything) and QGIS while rendering map is using more and more RAM memory - after few minutes of moving map there is lack of RAM and QGIS freezes / crashs. I have checked this on Windows 7 and 10 with fresh QGIS 3.4 - 3.10 and I see it on Ubuntu 18.04 and QGIS 3.8 - just clicking Add ... layer (whitout adding any data) makes QGIS RAM leak, until we close QGIS proces (RAM allocation is still huge after reload project). Maybe it is not visible on small projects (mine is about 5 MB qgs file - many PostGIS layers and raster data like WMS or VRT) but this project on QGIS 2 doesn't have any problems like above. Also if I add vector/raster layers, save them to the project and restart QGIS, everything works fine - it is something wrong with adding layers tool... Is there something that you can confirm and find any sollution? Regards...",Does this occur on old projects only or new/empty projects too?,"As I said - I have done clean QGIS 3.4.12 installation (from QGIS-OSGeo4W-3.4.12-1-Setup-x86_64.exe) on a fresh Windows 10 x64. No plugins were installed on that host. I have done quick project with few of my postgis data (tables and views) based on random symbology (unique first, then changed for rule based) with some 'advanced' labels ( eg. feature1 || '\n' || feature2, depending on scale with bufforing, ect.) - everything that was working well on QGIS 2. And I see the same problem ... Of course QGIS with that simple project at start uses les then 300MB of RAM and it is stable (RAM usage not growing while rendering map), but when I click 'Add vector layer' (without adding anything - just click Close button after that) while rendering (by moving or scale map) RAM usage starts grow. Of course not so fast like on my full projects, but I can get 1GB RAM usage under 1 minute of using map :/ I will check this light project on fresh Ubuntu 18 and QGIS 3, but I would like to ask if anyone of You see something similar at his projects? Regards!"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32944,qgis_QGIS_issues_32944,"Memory leak with attributes (#25881)

**Describe the bug** #25881 same area, but with different approach ... In the docs you can find this approach for getting all attributes: `[attr for attr in feature]`, so i did that and after a few seconds my memory was completely full. When using attributes() it works fine. **How to Reproduce** Use a large dataset with NULL attributes  **QGIS and OS versions** 3.10.0",can you explain what you are trying to accomplish?," In the c++ docs you can find for attributes() a note, that you also could accomplish the same when you use the way from my bug report. https://qgis.org/api/classQgsFeature.html#a5a473f89868c234d53cea67504cd2f2e But that way is leaking huge amount of memory for me..."
qgis/QGIS,https://github.com/qgis/QGIS/issues/33454,qgis_QGIS_issues_33454,"setFilterExpression and QGIS Filter output different results

**Describe the bug** setFilterExpression sorts out all NULL attributes, but the qgis internal filter function not. So in pyqgis i get 8 rows and in qgis 4114 rows. **How to Reproduce** pyqgis:  Result: 8 Qgis Filter: `""COM"" NOT LIKE 'muster'` Result: The where clause returned 4114 row(s). **QGIS and OS versions** QGIS version: 3.10.0-A CoruÃ±a QGIS code revision: 6c816b4204 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL/OGR: 2.4.1 Running against GDAL/OGR: 2.4.1 Compiled against GEOS: 3.8.0-CAPI-1.13.1 Running against GEOS: 3.8.0-CAPI-1.13.1 Compiled against SQLite: 3.29.0 Running against SQLite: 3.29.0 PostgreSQL Client Version: 11.5 SpatiaLite Version: 4.3.0 QWT Version: 6.1.3 QScintilla2 Version: 2.10.8 Compiled against PROJ: 5.2.0 Running against PROJ: Rel. 5.2.0, September 15th, 2018 OS Version: Windows 10 (10.0)",Could you provide data and project so I can reproduce?,"Sorry for the late response ... i tested it again with QGIS 3.10.2 and nothing changed. My steps: 1. Drag&Drop altlpar0.dbf into qgis 2. open python console 3. typed this in console ->  4. right click altlpar0 and select the ""Filter..."" option 5. type in `""COM"" NOT LIKE 'muster'` 6. Test: ""The where clause returned 4132 row(s)."" 7. type in `""COM"" NOT LIKE 'bru'` 8. Test: ""The where clause returned 4140 row(s)."" @troopa81 [altlpar0.zip](https://github.com/qgis/QGIS/files/4179477/altlpar0.zip)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/32948,qgis_QGIS_issues_32948,"Crash on importing KMZ without geometry

**Describe the bug** When importing a KMZ from Google Earth without geometry, QGIS gets blocked. The problem is only with KMZ files, not KML. **How to reproduce** - On Google Earth Pro, create a new route or poligon without defining a geometry. - Save site as KMZ - Import the KMZ file into QGIS file by drag and drop **QGIS and OS versions** 3.10.0, 64 bits on Windows 10",Can you attach here an offending kmz? thanks.,"The KMZ and KML files attached have the same information (a polygon without geometry). In both of them the coordinates field is empty,  but the crash only happens with the KMZ file. [KMZ and KML.zip](https://github.com/qgis/QGIS/files/3863203/KMZ.and.KML.zip)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/33211,qgis_QGIS_issues_33211,"Lots of CRS missing from nigthlies with ubuntugis-unstable

Updated QGIS nigthly with ubuntugis-unstable dependencies today. Now lots of CRS are missing, as it seems e.g. all WGS 84 / UTM zone xy z Furthermore at start-up, the ""default"" CRS 4326 is not set (missing from the list as well), but in the project properties, there is the checkbox checked with ""No projection"". In the terminal, this error shows up: QGIS-Version | 3.11.0-Master | QGIS-Codeversion | fe9dcf1f33 -- | -- | -- | -- Kompiliert gegen Qt | 5.9.5 | Laufendes Qt | 5.9.5 Kompiliert mit GDAL/OGR | 2.4.2 | Läuft mit GDAL/OGR | 2.4.2 Kompiliert mit GEOS | 3.7.1-CAPI-1.11.1 | Läuft mit GEOS | 3.8.0-CAPI-1.13.1 Compiled against SQLite | 3.22.0 | Running against SQLite | 3.22.0 PostgreSQL-Client-Version | 10.10 (Ubuntu 10.10-0ubuntu0.18.04.1) | SpatiaLite-Version | 4.3.0a QWT-Version | 6.1.3 | QScintilla2-Version | 2.10.2 Kompiliert mit PROJ | 5.2.0 | Läuft mit PROJ | Rel. 5.2.0, September 15th, 2018 OS Version | Linux Mint 19.2 | Diese QGIS-Kopie schreibt Debugausgaben. Active python plugins | MetaSearch; db_manager; processing",Maybe is a local issue one?,Presumably gdal hickups. Throwing it away and try to install new without ubuntugis. Actually I did nothing special but switch to nightlies some weeks ago and updated yesterday.
qgis/QGIS,https://github.com/qgis/QGIS/issues/35867,qgis_QGIS_issues_35867,"Allow more Expression scopes in virtual Layer SQL

I figured out, that I can use global and project variables in virtual layers: `SELECT var('qgis_version') as qgis,var('project_basename') as project` It's also documented that we can speed up our queries when using the hidden column `_search_frame_`. But what I really would like to do is: `SELECT ... WHERE _search_frame_ = var(map_extent)` which is not possible yet, because - I guess - the variable scope ""_MapSetting_"" is not supported. Maybe that's an oversight, because inside layer labels I can use i.e. `geom_to_wkt( @map_extent ) `. It's possible to write a custom Expression function as workaround:  `SELECT ... WHERE _search_frame_ = currentExtent()` but this only uses the map canvas extents and not the extents of a layout map window.",Did you try that modification you proposed ?,"@mhugo No unfortunately not, and I guess it doesn't work, because IMHO _mapSettingsScope_ needs the settings of the layout map. And btw. I have absolutely no C++ knowledge. Maybe you find the answer in the code for parsing Expression functions in label strings?"
qgis/QGIS,https://github.com/qgis/QGIS/issues/33063,qgis_QGIS_issues_33063,"Attribute Default Value Issue

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** - If the input of a mandatory attribute is left empty, the attribute form cannot be saved (Expected Behavior) - If the input of a mandatory attribute is left empty and a default value is configured, the attribute form cannot be saved (Unexpected Behavior) **How to Reproduce** - Create a feature class in a Geodatabase where the primary key has a default value. e.g. attribute: ""objectid"" and default value ""someFunctionorSequence()"" - Toggle editing on the feature class and digitize some geometry. QGIS automatically inserts the default value in the ""objectid"" attribute as seen below. ![Digit1](https://user-images.githubusercontent.com/32864767/69558539-b1322f80-0fa8-11ea-98e2-6799360d11dc.PNG) - Clear the default value, the following picture is displayed ![Digit2](https://user-images.githubusercontent.com/32864767/69558588-c018e200-0fa8-11ea-867e-f349c6df7ed9.PNG) - The ""OK"" button is also disabled and the form cannot be saved. **QGIS and OS versions** QGIS 3.4.13 OS Windows 7, 8.1, and 10 x86 and x64 **Additional context** This was not the behavior in QGIS 2.x and only seems to manifest in 3.x. It can be reproduced in other cases of copying and pasting, using some plugins to digitize, etc.",Can you please share a project with a few data to reproduce the issue?,"[TestProject.zip](https://github.com/qgis/QGIS/files/3888405/TestProject.zip) Please see the attached file. The ID is set to be ""1"" by default.. - Start Editing - Add a new point feature - clear the default value - The OK button gets disabled The behavior in 2.x would detect that there is a Default value even if the attribute is Not Null and would allow the save to occur."
qgis/QGIS,https://github.com/qgis/QGIS/issues/33191,qgis_QGIS_issues_33191,"QGIS plugin import DBSCAN RecursionError issue: maximum recursion depth exceeded

I am developing a QGIS plugin that use DBSCAN method in sklearn. In my Linux QGIS test environment, the import failed. QGIS plugin can not be opened. However I test the plugin in windows 7 but it works. Python version: 3.6.8 (default, Oct 7 2019, 12:59:55) [GCC 8.3.0] QGIS version: 3.6.1-Noosa Noosa, 93e761d Could not load plugin 'aChor' due to an error when calling its classFactory() method. RecursionError: maximum recursion depth exceeded Traceback (most recent call last): File ""/usr/lib/python3/dist-packages/qgis/utils.py"", line 335, in startPlugin plugins[packageName] = package.classFactory(iface) File ""/home/hcuadmin/.local/share/QGIS/QGIS3/profiles/default/python/plugins/aChor/__init__.py"", line 35, in classFactory from .aChor import aChor File ""/usr/lib/python3/dist-packages/qgis/utils.py"", line 672, in _import mod = _builtin_import(name, globals, locals, fromlist, level) File ""/home/hcuadmin/.local/share/QGIS/QGIS3/profiles/default/python/plugins/aChor/aChor.py"", line 53, in from sklearn.cluster import DBSCAN File ""/usr/lib/python3/dist-packages/qgis/utils.py"", line 672, in _import mod = _builtin_import(name, globals, locals, fromlist, level) File ""/home/hcuadmin/.local/lib/python3.6/site-packages/sklearn/cluster/__init__.py"", line 6, in from .spectral import spectral_clustering, SpectralClustering ... Please refer to the attached text document for complete error report. Any suggestion would be appreciated, thanks. [bug.txt](https://github.com/qgis/QGIS/files/3912140/bug.txt)",Maybe that python library is not correctly installed in your linux machine?,"Hi thanks for the comment. I suppose the same in the beginning. However when I use the python console to import the sklearn there's no error appears. I can use the library correctly. Cheers, Ariel"
qgis/QGIS,https://github.com/qgis/QGIS/issues/33201,qgis_QGIS_issues_33201,"Digitizing: LineStringZ does not inherit Z-coordinates from points if line starts by snapping to a point with no Z coordinate

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> When digitizing 3D linestrings (LineStringZ) using snap functions the linestring does not inherit __any__ Z-coordinates from points if the first vertex of the linestring snaps to a 2D point even though subsequent vertices snap to 3D points that do have a Z-coordinate. **How to Reproduce** 1. Edit a linestring layer with LineStringZ geometry. 2. Click to add a line feature. 3. Start adding the line feature by snapping to a point feature that has no Z-coordinate, i.e. Point or MultiPoint geometry. 4. Continue to create the next vertex by snapping to a point feature that has a Z-coordinate, i.e. PointZ or MultiPointZ geometry. 5. Finish the line feature. 6. Activate the vertex tool and right-click on the line feature. 7. The Z-coordinate is 'nan' on all vertices. <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome **QGIS and OS versions** <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> QGIS version 3.10.0-A Coruña QGIS code revision 6ffa89eb3e Compiled against Qt 5.11.2 Running against Qt 5.11.2 Compiled against GDAL/OGR 3.0.2 Running against GDAL/OGR 3.0.2 Compiled against GEOS 3.8.0-CAPI-1.13.1 Running against GEOS 3.8.0-CAPI-1.13.1 Compiled against SQLite 3.29.0 Running against SQLite 3.29.0 PostgreSQL Client Version 11.5 SpatiaLite Version 4.3.0 QWT Version 6.1.3 QScintilla2 Version 2.10.8 Compiled against PROJ 6.2.1 Running against PROJ Rel. 6.2.1, November 1st, 2019 OS Version Windows 10 (10.0) Active python plugins changeDataSource; featureattachments; geosearch_dk; Kortforsyningen; latlontools; mask; pointsamplingtool; profiletool; Qgis2threejs; scriptrunner3; db_manager; MetaSearch; processing **Additional context** Features are based on data from a PostgreSQL/PostGIS database and data from a shape file (PointZ) <!-- Add any other context about the problem here. -->",Can you try with the nightly version?,"I just tried with the latest build and the problem remains. Here's the version info: QGIS version 3.11.0-Master QGIS code revision af1c087919 Compiled against Qt 5.11.2 Running against Qt 5.11.2 Compiled against GDAL/OGR 3.1.0dev Running against GDAL/OGR 3.1.0dev Compiled against GEOS 3.8.0-CAPI-1.13.1 Running against GEOS 3.8.0-CAPI-1.13.1 Compiled against SQLite 3.29.0 Running against SQLite 3.29.0 PostgreSQL Client Version 11.5 SpatiaLite Version 4.3.0 QWT Version 6.1.3 QScintilla2 Version 2.10.8 Compiled against PROJ 7.0.0 Running against PROJ Rel. 7.0.0, March 1st, 2020 OS Version Windows 10 (10.0) This copy of QGIS writes debugging output. Active python plugins changeDataSource; featureattachments; geosearch_dk; Kortforsyningen; latlontools; mask; pointsamplingtool; profiletool; Qgis2threejs; scriptrunner3; db_manager; MetaSearch; processing"
qgis/QGIS,https://github.com/qgis/QGIS/issues/33300,qgis_QGIS_issues_33300,"Crash when layer not available

if a project connected to postgis opens. and a layer no longer exists qgis crashes I use QGis 3.8 in windows 10 QGIS should only send a message that the layer is not available When the program opens, this happens if you notice that the layer no longer exists but what happens if the connection goes to a temporary layer / table. Then the layer / table is sometimes present and sometimes it is not. Because another program creates or deletes the table in the database. Then you should simply warn that the layer is not available and ask if you want to delete or keep it when the layer is re-created and someone activates it could show itself without problems. I speak of the case of postgis tables, not if this can be applied to the other types of layers",Can you provide steps to reproduce this kind of crash?,"1. Open QGIS add a postgis layer. 2. Delete the table from the database. 3. pane in qgis right click to obtain the number of records. 4. save the qgis project 5. Close the QGIS project 5. re-create the postgis table. 6. open the project qgis a message appears that the layer does not exist 7. Choose keep layer and there it crashes. I just did this is the message you give me Crash ID: 4d4c632047b21acb9c647340a977d4587a84fc0a Stack Trace  QGIS Info QGIS Version: 3.8.1-Zanzibar QGIS code revision: dcd95cc648 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.1 Running against GDAL: 2.4.1 System Info CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.17763 El lun., 9 dic. 2019 a las 8:56, Matthias Kuhn (<notifications@github.com>) escribió: -- José Mercedes Venegas Acevedo cel Mov RPC 964185205"
qgis/QGIS,https://github.com/qgis/QGIS/issues/33303,qgis_QGIS_issues_33303,"Now() function stores time incorrectly

When I use the function now() for a time field the current time is proposed correctly in the entry form. However, once the data has been saved the time is stored as a date. I have tried several options to store time using the 'format_date' expression and the 'to_time' expression . But all with the same result. When I use the 'to_time' expression a tekst box appears stating the datetime can't be converted to type time. **How to Reproduce** In the attachment the details of the expressions can be found. [Now function stores time incorrectly.pdf](https://github.com/qgis/QGIS/files/3940157/Now.function.stores.time.incorrectly.pdf) QGIS version data QGIS-versie | 3.10.0-A Coruña | QGIS code revisie | 6ffa89eb3e -- | -- | -- | -- Gecompileerd tegen Qt | 5.11.2 | Gebruikt nu Qt | 5.11.2 Gecompileerd tegen GDAL/OGR | 3.0.2 | Gebruikt nu GDAL/OGR | 3.0.2 Gecompileerd tegen GEOS | 3.8.0-CAPI-1.13.1 | Gebruikt nu GEOS | 3.8.0-CAPI-1.13.1 Gecompileerd tegen SQLite | 3.29.0 | Uitgevoerd met SQLite | 3.29.0 PostgreSQL Client Versie | 11.5 | SpatiaLite-versie | 4.3.0 QWT versie | 6.1.3 | QScintilla2 Versie | 2.10.8 Gecompileerd tegen PROJ | 6.2.1 | Gebruikt nu PROJ | Rel. 6.2.1, November 1st, 2019 Versie OS | Windows 10 (10.0) Actieve plug-ins van Python | OSMDownloader; pdokservicesplugin; pdok_locatieserver_locator_filter; qfieldsync; QuickOSM; quick_map_services; db_manager; MetaSearch; processing Windows 10 home",Can you share a project and data to reproduce the issue?,"Apparently I don't have to use the expression now() at all to default the current time in QGIS. By default the current date and time are proposed in QGIS without this expression. However, when syncing the project to Qfield, the date and time fields in Qfield are empty and I must use the now() expression to have the date/time field filled. In Qfield there is also a bug around time fields so perhaps these problems are related. Here you can find the related issue: https://github.com/opengisch/QField/issues/728#issuecomment-561700916. I tried attaching my project (a .qgz file zipped) but it fails to upload. Is there any other way I can share my project? In the project I added 6 time fields, all with different types (String, date and datetime). I also noticed the following strange behavior. If I add a point QGIS will initially store the time in the attribute table. As soon as I touch the field QGIS converts the time into a date (the bug). But then also the field type changes from Qdatetime to Date."
qgis/QGIS,https://github.com/qgis/QGIS/issues/33318,qgis_QGIS_issues_33318,"Data source manager's inner window shrinks when opening it for a second time

When opening the data source manager for a second time (after closing it once), the inner window of the input screen shrinks relative to the data source manager's outer window. Only when adjusting the size of the outer window, the inner one adapts and shows its full extent. ![qgis](https://user-images.githubusercontent.com/18262383/70540521-b5904800-1b65-11ea-9c67-326478d45d53.PNG)",would you please check this version and see if that works? https://github.com/qgis/QGIS/suites/350685733/artifacts/629024 (just unzip it in a temp folder and run QGIS.exe),works perfectly!
qgis/QGIS,https://github.com/qgis/QGIS/issues/33362,qgis_QGIS_issues_33362,"Unable to add a feature even if editing is toggled on

When i toggle editting on a layer on and go to add a feature, the feature does not show up. Nor does it bring up the feature form when i right click it to commit the added feature. The attribute table of all the data in the layer functions normally. QGIS 3.10.1",What is the type/source of the layer?,It affects Vector/Line/ and Polygon layers.The layer source is from a postgres database. I know I have not had issues in the past with prior releases.
qgis/QGIS,https://github.com/qgis/QGIS/issues/33407,qgis_QGIS_issues_33407,"Couldn't load SIP module. ModuleNotFoundError: No module named 'qgis'

When I start qgis on my Ubuntu system, I get an Python-errorbox showing, that the SIP module could not be loaded. Because I run with german locale I could only post the german message here, but its nearly the same as in https://issues.qgis.org/issues/22029. Her is the original: Das SIP-Modul konnte nicht geladen werden. Die Python-Unterstützung wird abgeschaltet. Traceback (most recent call last): File """", line 1, in ModuleNotFoundError: No module named 'qgis' Python-Version: 3.6.9 (default, Nov 7 2019, 10:44:02) [GCC 8.3.0] QGIS-Version: 3.10.1-A Coruña 'A Coruña', ef24c526da Python-Pfad: ['/usr/share/qgis/python', '/home/frank/.local/share/QGIS/QGIS3/profiles/default/python', '/home/frank/.local/share/QGIS/QGIS3/profiles/default/python/plugins', '/usr/share/qgis/python/plugins', '/usr/local/lib/python36.zip', '/usr/local/lib/python3.6', '/usr/local/lib/python3.6/lib-dynload', '/home/frank/.local/lib/python3.6/site-packages', '/usr/local/lib/python3.6/site-packages'] QGIS-Version | 3.10.1-A Coruña | QGIS-Codeversion | ef24c526da -- | -- | -- | -- Kompiliert gegen Qt | 5.9.5 | Laufendes Qt | 5.9.5 Kompiliert mit GDAL/OGR | 2.2.3 | Läuft mit GDAL/OGR | 2.2.3 Kompiliert mit GEOS | 3.6.2-CAPI-1.10.2 | Läuft mit GEOS | 3.6.2-CAPI-1.10.2 4d2925d6 Kompiliert mit SQLite | 3.22.0 | Läuft mit SQLite | 3.22.0 PostgreSQL-Client-Version | 10.10 (Ubuntu 10.10-0ubuntu0.18.04.1) | SpatiaLite-Version | 4.3.0a QWT-Version | 6.1.3 | QScintilla2-Version | 2.10.2 PROJ.4-Version | 493 BS-Version | Ubuntu 18.04.3 LTS Any idea",How did you installed QGIS?,"Dear giomann, I added ""deb https://qgis.org/ubuntu bionic main"" and the related key to source.list, did an update and installed using synaptic package manager."
qgis/QGIS,https://github.com/qgis/QGIS/issues/33438,qgis_QGIS_issues_33438,"Topological editing - changes revert when saving the layer

**Describe the bug** When editing a layer using topological editing, a new polygon overlapping a previously existing one is indeed clipped upon creation, as expected. However, when the layer is saved, the new poly reverts to the way it was drawn. **How to Reproduce** Use the attached shp as an example. [test_layer.zip](https://github.com/qgis/QGIS/files/3972247/test_layer.zip) 1. Open the shp file, project CRS 4326, layer CRS 4326. 2. Topological editing activated. 3. Zoom to the 5 stripes (not the northernmost zone, the ones just below). 4. Edit the layer, add a polygon overlapping one of the existing stripes: ![bug1](https://user-images.githubusercontent.com/22688234/70980397-87ee5600-20b3-11ea-8cbf-69a2790b15a3.jpg) 5. Finish the poly. Topological editing, as expected, crops it so that it does not overlap the previous entities: ![bug2](https://user-images.githubusercontent.com/22688234/70980442-a0f70700-20b3-11ea-8d09-9ebe800b6d5b.jpg) 6. Save the layer. The new polygon is now reverted to the way it was drawn (i.e. not clipped, and overlapping the previous ones): ![bug3](https://user-images.githubusercontent.com/22688234/70980509-ba984e80-20b3-11ea-83a4-9e80b20b2dea.jpg) **QGIS and OS versions** Windows 7 professional, SP1, 64b Initially spotted on 3.6.0 and, sadly, confirmed on 3.10.1 freshly minted (ef24c526da) **Additional context** This is an issue I recall facing long ago, with one of the 2.x versions probably. Was never really solved, and at that time I was editing a complex shapefile, with many potential errors, it was harder to isolate the issue.",Can you confirm with a clean geometry please?,"The topology checker does not report any invalid geometry. Anything else I could check ? [edit] Clarification. The file I uploaded had overlapping polys, as a result of the bug I describe. However, removing the offending polys does not change the behaviour described."
qgis/QGIS,https://github.com/qgis/QGIS/issues/33487,qgis_QGIS_issues_33487,"QGIS crashes with spacific relations/widget settings

My Qgis project was crashing in continuous. The project has been created with the version 3.4.2 Madeira. In this project I am working uploading data from a spatialite database. data into the database are: 1. Vector (point) representing the location of the site where I am working. This vector point is called ""site"" (see project attached) 2. A set of tables (tables without geometry) representing normal sheet registers. These tables are ""permatrace_register"" and ""site_staff"" (see the project attached). Specifically, the table ""permatrace_register"" contains records of site surveys taken and the table ""site_staff"" contains the list of people involved in the survey. I set some relationships in the project properties and some widgets in order to speed up the data entry. In particolar, the setting was the following: 1. relation between ""site"" and ""permatrace_register"" (association), referenced layer = site, referenced field = site_name, referencing layer = permatrace_register, referencing field = site_name; this relation aims to get the ""site_name"" of the new ""permatrace_register"" records from the ""site"" vector. 2. I set up a widget to the attribute ""taken_by"" (see project) as a ""Value Relation"" aimed to get the name of the people that have been making the various surveys taken registered into the table ""permatrace_register"". More in depth, the original set of the widget has been done like this: Layer = site_staff, Key column = ""signature"", Value column = ""signature"". With this kind of setting my project was crashing in continuous. However, setting up the widget in this way: Layer = site_staff, Key column = ""id"", Value column = ""signature"", it seems like Qgis doesn't crash anymore. So, at the end, the issue seemed to be caused by a wrong setting of the widget. [ticket.zip](https://github.com/qgis/QGIS/files/3988021/ticket.zip)",Why is the word 'Fixed' in the title?,"Because in the Italian qgis user list there Was an issue regarding to ""qgis crash"" opened by myself. After some comparisons we realized where the mistake was. Therefore, as other people have got the same problem, the moderator of the Italian qgis user list invited me to open an issue even here explaining how I have been able to fix the problem. That's it. Il ven 20 dic 2019, 12:43 Alex <notifications@github.com> ha scritto:"
qgis/QGIS,https://github.com/qgis/QGIS/issues/33518,qgis_QGIS_issues_33518,"QGIS crashes when opening a certain attribute table

When opening a certain layer-attribute table, QGIS crashes. With DBManager I can open the table and export the fields. I use the project in combination with a mobile QFIeld project and the layer that crashes is edited in the QField app. No problem appears in the QFIeld app. These are the details Gebeurtenisnaam van probleem: APPCRASH Naam van de toepassing: qgis-ltr-bin.exe Versie van toepassing: 0.0.0.0 Tijdstempel van toepassing: 5c99eb61 Naam van foutmodule: Qt5Core.dll Versie van foutmodule: 5.11.2.0 Tijdstempel van foutmodule: 5b99e97e Uitzonderingscode: c0000005 Uitzonderingsmarge: 0007d993 Versie van besturingssysteem: 6.1.7601.2.1.0.256.48 Landinstelling-id: 2067 Aanvullende informatie 1: 73a9 Aanvullende informatie 2: 73a9f3b41667b53493b5fad3bb0af995 Aanvullende informatie 3: b8a8 Aanvullende informatie 4: b8a8aa39da30595f26dd64653a09f1c3 I already tried to make an new profile without plugins but this doesn't solve the problem. Regards, Marc",Could the qfield data somehow be corrupted?,@Gioman The layer that crashes is the survey_P_BomenEnBos [SurveyHeverleebosMeerdaalwoud.zip](https://github.com/qgis/QGIS/files/4007959/SurveyHeverleebosMeerdaalwoud.zip) In the meantime I found that the field 'created' contains different date formats (@roya0045). When I change the field type from date to text string it no longer crashes... The reason having different date formats lies in the configuring of the QField project and the defining of QField input forms in a sometimes different way (using for example $now as a standard value/format mm:dd:yyyy hrs:min:sec while this was not the case in the beginning of the project...). See printscreen field 'created'. ![Knipsel](https://user-images.githubusercontent.com/57868975/71555768-a3e8e480-2a2f-11ea-9608-f5dfe42a8a26.PNG)
qgis/QGIS,https://github.com/qgis/QGIS/issues/33816,qgis_QGIS_issues_33816,"""duplicate key value violates unique constraint"" error when using ""Edit Feature in Place"" with PostGIS Layer

in our postgis database for line(road) layer we have defined primary key field and have applied unique not null constraint when i save split line segements manually by editing toolbar it works fine, but when i split lines with ""split with lines"" tool by turning on edit feature in place it gives me postgis error """""" Could not commit changes to layer pk_roads Errors: ERROR: 4 feature(s) not added. Provider errors: PostGIS error while adding features: ERROR: duplicate key value violates unique constraint ""pk_roads"" CONTEXT: SQL statement ""INSERT INTO pk_roads SELECT(pk_roads '(,,,,,,,,,,,,0102000020110F000002000000A00ABFB828A35F411E7335C4B9484D41C9CA687C3CA35F41405E7DA3BD484D41,103564332,""digi1,"",,,,,,,,,,,,,,,,,,,,,,,,)').* RETURNING id;"" PL/pgSQL function fn_rd_partition() line 9 at EXECUTE """""" but from my point of view it must have to work fine for ""split with lines"" tool if same splitting works from ""Advance Digitizing Toolbar""",What is that `fn_rd_partition`? it's not part of QGIS nor postgis.,data is partitioned in database and this function ensures whether user has not crossed the partition region
qgis/QGIS,https://github.com/qgis/QGIS/issues/34056,qgis_QGIS_issues_34056,"Crash changing font marker size on Windows

**Describe the bug** QGIS 3.10.2 hangs for minutes and sometimes crashes to desktop without showing the crash report screen when zooming/panning with the attached project. Layer symbology is the most likely culprit. **How to Reproduce** Load the attached project zoom in and out a few times. **QGIS and OS versions** Windows 10 (1909 x64) QGIS version 3.10.2-A Coruña QGIS code revision d4cd3cfe5a Compiled against Qt 5.11.2 Running against Qt 5.11.2 Compiled against GDAL/OGR 3.0.3 Running against GDAL/OGR 3.0.3 Compiled against GEOS 3.8.0-CAPI-1.13.1 Running against GEOS 3.8.0-CAPI-1.13.1 Compiled against SQLite 3.29.0 Running against SQLite 3.29.0 PostgreSQL Client Version 11.5 SpatiaLite Version 4.3.0 QWT Version 6.1.3 QScintilla2 Version 2.10.8 Compiled against PROJ 6.3.0 Running against PROJ Rel. 6.3.0, January 1st, 2020 OS Version Windows 10 (10.0) Active python plugins db_manager; MetaSearch; processing [crash.zip](https://github.com/qgis/QGIS/files/4117266/crash.zip)",Does it only occur with a specific layer or combination of layers ?,"I just did try the latest nightly, same outcome."
qgis/QGIS,https://github.com/qgis/QGIS/issues/33720,qgis_QGIS_issues_33720,"Add option to increse the number of projects shown in 'recent projects'

**Feature description.** It would be really useful to be able to increase the number of projects shown in 'recent projects'. This could be a customisation feature, such as AutoCAD, with the ability to choose the number of recent projects shown.","Do you mind we can close this feature request? If so, please close it!","Oh fantastic! I will close it. Apologies I am new to QGIS, where can I find the 'global settings' to change from the default value of 20?"
qgis/QGIS,https://github.com/qgis/QGIS/issues/33812,qgis_QGIS_issues_33812,"QGIS 3.10 repeatedly crashing when left unattended

Hi - QGIS 3.10 A Coruna will not stop crashing whenever I leave my workstation! It's as though it cannot handle idleness. I'm running on a brand new Acer Nitro 5 using Windows 10. Any advice please? Many thanks. ****Discovered only happens when laptop on battery*****",Does it makes any difference if you use a new QGIS profile (no 3rd party plugins installed)?,"Thank you both. I'm inclined to agree with @roya0045 but I'm such a novice I can well believe @gioman has it right too. I'll try running on a new profile. I'm running 3.10.0-A Coruña. Thanks again, appreciate it."
qgis/QGIS,https://github.com/qgis/QGIS/issues/33822,qgis_QGIS_issues_33822,"Recent Project List missing

I have installed V3.10.1-A and all that shows in the welcome page is 'Project Templates'. There are no recent projects, despite having created and opened some, and no obvious setting to show/hide this list. I have observed similar problems raised by others, e.g. https://gis.stackexchange.com/questions/342903/qgis-3-10-recent-projects-list-missing If I visit Settings/options/advanced/UI/recentProjects I can see I have two items. ![image](https://user-images.githubusercontent.com/12863685/72446017-a0cd5280-37aa-11ea-98d9-b870f0167272.png) All that is visible on the homepage is this: ![image](https://user-images.githubusercontent.com/12863685/72446091-c65a5c00-37aa-11ea-8a2f-c2dbc077c9fe.png)",Can you try https://github.com/qgis/QGIS/issues/33718#issuecomment-573907204 ? #33718,"First, sorry, I did search for this bug but nothing came up. Second, seriously! Sorry, but this seems like a bit of UI and UX fail. The pane has no indication it is collapsed and no indication it can be expanded. Any chance of a fix?"
qgis/QGIS,https://github.com/qgis/QGIS/issues/33830,qgis_QGIS_issues_33830,"QgsRendererPropertiesDialog crashes python application using PyQGis

I have an external windows standalone python application that uses pyqgis. When I display a QgsRendererPropertiesDialog, python sometimes crashes when the user clicks on any color button (screenshot: http://psr.me/1903oq2). The problem is intermitent and seems to be in displaying the color dialog. In previous QGis versions I could avoid this problem by using: settings = QgsSettings() settings.setValue('qgis/native_color_dialogs', True) QGis then used another color dialog that did not crash my application. However, since I updated to QGis 3.8.3 (OSGEO4W) this option no longer works. I wrote a very small PyQt5 application (below, at the end) that reproduces the problem. Operating system: Windows 10 Home Python version: 3.7.0 (OSGEO4W) QGis version: 3.8.3 (OSGEO4W) # Sample PyQt5 application that reproduces the problem from qgis.core import QgsVectorLayer, QgsStyle from qgis.gui import QgsRendererPropertiesDialog from PyQt5 import QtCore, QtWidgets def editStyle(): layer = QgsVectorLayer('LineString?field=level:integer', 'contour_lines', 'memory') dialog = QtWidgets.QDialog() layout = QtWidgets.QVBoxLayout(dialog) # Add symbology panel symbPanel = QgsRendererPropertiesDialog(layer, QgsStyle.defaultStyle(), True) layout.addWidget(symbPanel) # Add Ok Cancel button box buttonBox = QtWidgets.QDialogButtonBox(QtWidgets.QDialogButtonBox.Ok | QtWidgets.QDialogButtonBox.Cancel, QtCore.Qt.Horizontal, dialog) buttonBox.button(QtWidgets.QDialogButtonBox.Ok).setText('Ok') buttonBox.button(QtWidgets.QDialogButtonBox.Cancel).setText('Cancel') buttonBox.accepted.connect(dialog.accept) buttonBox.rejected.connect(dialog.reject) layout.addWidget(buttonBox) dialog.setLayout(layout) dialog.adjustSize() if (dialog.exec_() == QtWidgets.QDialog.Accepted): symbPanel.apply() # Create simple application with only one button app = QtWidgets.QApplication([]) window = QtWidgets.QWidget() layout = QtWidgets.QVBoxLayout() editBtn = QtWidgets.QPushButton('Edit Style') editBtn.clicked.connect(editStyle) layout.addWidget(editBtn) window.setLayout(layout) window.show() app.exec_() app.exit()","Does it happens if you use 3.10.1 (or QGIS LTR, in this case 3.4.14)?","Yes, it still crashes with 3.10.1, only it crashes in the QgsRendererPropertiesDialog constructor (instead of when I click at color buttons). I can't even display the dialog. In versions prior to 3.8.3 it still crashed but I could bypass it with QgsSettings().setValue('qgis/native_color_dialogs', True)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/33851,qgis_QGIS_issues_33851,"Improve sample color pipette

I'm working with the qgis nightly build development branch, currently 3.11.0-57. At my workspace, I use more than one screen with my computer. Running QGIS on the one screen, trying to catch a color for example from a pdf on a second screen, I use the pipette the get the color sample. When I move with the mouse / pipette from the QGIS screen to the screen with the pdf, I lose the pipette and can not catch the color values.",does it works on 3.10 or 3.4 or any previous release?,"No I don't think that it has ever worked before. What I actually realized is, that the color sampling is not only a problem on a second screen, it also does not work on the same screen out of QGIS window. Platform is Windows 10 Enterprise"
qgis/QGIS,https://github.com/qgis/QGIS/issues/33859,qgis_QGIS_issues_33859,"Can't set min/max values to decimal in raster symbology with QGis Linux versions

When setting the properties of a raster layer, I encounter an issue related to Min/Max values form fields (with Singleband pseudo color render type) : default precalculated value can be decimal, but I can't manually set the value to decimal. Strange thing is : form field accepts dot symbol `.` if such symbol is already present, but the key doesn't work if the default value is an integer. I also cannot copy/paste a value in those fields. In my case, as a matter of example, default max value is `30.8921` and default min value is `-100`. If I suppress only decimal values in the max value field, I can achieve to set to `0.5`, but I clean the field, I am not able to add a dot. In the min value field, I cannot add a dot at all. This issue occurred on QGis 3.4 LTS, 3.8, 3.10 with Ubuntu 18.04, Debian 10 and MacOS 10 Catalina. Doesn't occur on Windows versions (tested only on QGis 3.4 with Windows 10). How to reproduce : - Add raster layer in QGis (3.4 for example) under Ubuntu 18.04 (didn't test with other versions) - Select the layer and open the Properties window - In symbology, choose `Singleband pseudocolor` for `Render type` - Try to set default Min value to `-0.5` and Max value to `0.5` Please tell me if you need additional infos, this bug looks quite surprising in my opinion (or is it ?).",What are your language and locale settings in QGIS -> Options -> General ?,"I use French and fr_FR, but also tried to change to American English and en_US"
qgis/QGIS,https://github.com/qgis/QGIS/issues/34013,qgis_QGIS_issues_34013,"freezecrash when zooming out rasterlayers 

## User Feedback zooming rasterlayers with quadro card activated.. ## Report Details **Crash ID**: [8f5d13fa3efd1d2720c7edf15577a64b3e660500]('https://github.com/qgis/QGIS/search?q=8f5d13fa3efd1d2720c7edf15577a64b3e660500&type=Issues') **Stack Trace** <pre> MoveSmall memcpy.asm:235 QgsGdalProvider::readBlock qgsgdalprovider.cpp:944 QgsGdalProvider::block qgsgdalprovider.cpp:672 QgsSingleBandPseudoColorRenderer::block qgssinglebandpseudocolorrenderer.cpp:213 QgsBrightnessContrastFilter::block qgsbrightnesscontrastfilter.cpp:118 QgsHueSaturationFilter::block qgshuesaturationfilter.cpp:123 QgsRasterResampleFilter::block qgsrasterresamplefilter.cpp:193 QgsRasterProjector::block qgsrasterprojector.cpp:878 QgsRasterIterator::readNextRasterPartInternal qgsrasteriterator.cpp:130 QgsRasterDrawer::draw qgsrasterdrawer.cpp:60 QgsRasterLayerRenderer::render qgsrasterlayerrenderer.cpp:266 QgsMapRendererParallelJob::renderLayerStatic qgsmaprendererparalleljob.cpp:265 QtConcurrent::MapKernel<QList<LayerRenderJob>::iterator,QtConcurrent::FunctionWrapper1<void,LayerRenderJob & __ptr64> >::runIteration qtconcurrentmapkernel.h:69 QtConcurrent::MapKernel<QList<QgsImageOperation::ImageBlock>::iterator,QgsImageOperation::ProcessBlockUsingPixelOperation<QgsImageOperation::ShadeFromArrayOperation> >::runIterations qtconcurrentmapkernel.h:78 QtConcurrent::IterateKernel<QList<QgsImageOperation::ImageBlock>::iterator,void>::forThreadFunction qtconcurrentiteratekernel.h:256 QtConcurrent::ThreadEngineBase::run : QThreadPoolPrivate::reset : QThread::start : BaseThreadInitThunk : RtlUserThreadStart : </pre> **QGIS Info** QGIS Version: 3.10.2-A Coru�a QGIS code revision: d4cd3cfe5a Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 3.0.3 Running against GDAL: 3.0.3 **System Info** CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.18363",do you have installed latest 3.10.2 build? e.g. 3.10.2-2?,yes 3.10.2 but it started in 3.10.1 so its the same problem
qgis/QGIS,https://github.com/qgis/QGIS/issues/34094,qgis_QGIS_issues_34094,"QGIS 3.10.2 Error 'QgsMultiLineString' object has no attribute 'xAt' 

Python code is attempting to get the ""X"" value of the first node in a QgsMultiLineString feature. This works fine from 3.4 to 3.10.1. I have loaded 3.10.2 on 3 separate machines and all fail with the same error. I made a slim dataset with just a few lines and it also errored out. It is coming from my plugin so I will also try just a short chunk of code. An error has occurred while executing Python code: AttributeError: 'QgsMultiLineString' object has no attribute 'xAt' Traceback (most recent call last): File ""C:/Users/S M/AppData/Roaming/QGIS/QGIS3\profiles\default/python/plugins\invert_builder\invert_builder.py"", line 618, in editPipe x0 = line.xAt(0) # x value of first vertex AttributeError: 'QgsMultiLineString' object has no attribute 'xAt' Python version: 3.7.0 (v3.7.0:1bf9cc5093, Jun 27 2018, 04:59:51) [MSC v.1914 64 bit (AMD64)] QGIS version: 3.10.2-A Coruña A Coruña, d4cd3cfe5a Python Path: • C:/PROGRA~1/QGIS3~1.10/apps/qgis/./python • C:/Users/S M/AppData/Roaming/QGIS/QGIS3\profiles\default/python • C:/Users/S M/AppData/Roaming/QGIS/QGIS3\profiles\default/python/plugins • C:/PROGRA~1/QGIS3~1.10/apps/qgis/./python/plugins • C:\PROGRA~1\QGIS3~1.10\apps\Python37 • C:\PROGRA~1\QGIS3~1.10\apps\Python37\Scripts • C:\Program Files\QGIS 3.10\bin\python37.zip • C:\PROGRA~1\QGIS3~1.10\apps\Python37\DLLs • C:\PROGRA~1\QGIS3~1.10\apps\Python37\lib • C:\Program Files\QGIS 3.10\bin • C:\PROGRA~1\QGIS3~1.10\apps\Python37\lib\site-packages • C:\PROGRA~1\QGIS3~1.10\apps\Python37\lib\site-packages\win32 • C:\PROGRA~1\QGIS3~1.10\apps\Python37\lib\site-packages\win32\lib • C:\PROGRA~1\QGIS3~1.10\apps\Python37\lib\site-packages\Pythonwin • C:/Users/S M/AppData/Roaming/QGIS/QGIS3\profiles\default/python Data attached. When I uninstalled 3.10.2 and reinstalled 3.10.1 the issue goes away. Thank you for any help. [lite_data.zip](https://github.com/qgis/QGIS/files/4124196/lite_data.zip) UPDATE: `layer = iface.activeLayer() print(layer.name()) all_features = layer.getFeatures() layer.startEditing() for linep in all_features: geom = linep.geometry() line = geom.constGet() print(geom) x0 = line.xAt(0) print(str(x0))`",Can you double check the geometry type you receive when you run the script on the earlier version?,Thanks nyalldawson. The data type is QgsLinestring the error is _'QgsMultiLineString'_. The minimal code is . `layer = iface.activeLayer() print(layer.name()) all_features = layer.getFeatures() layer.startEditing() for linep in all_features: geom = linep.geometry() line = geom.constGet() print(geom) x0 = line.xAt(0) print(str(x0))`
qgis/QGIS,https://github.com/qgis/QGIS/issues/34604,qgis_QGIS_issues_34604,"Strange Projection Behavior

Apologies up front - this is difficult to describe in a reproducible way. QGIS 3.10.2-2 on Windows 10 Rasters that have a custom projection are behaving in strange ways. I'm working with USGS Topo maps, and each of the files has it's own unique custom (non-EPSG) projection. When I load one file into either a new or existing QGIS project, I immediately get an error at the top of the map canvas that says ""Cannot use preferred transform between Unknown CRS and EPSG: 4326"" at the same time as the ""Select Transformation"" dialog appears. The first map often goes to the correct spot regardless of which transformation I select, but adding additional maps, the maps seem to be using the projection from the first file I load, and they all stack up on top of each other even though their bounding boxes should be different. Changing the project's projection from EPSG:4326 to a projected coordinate system (I did EPSG:3310) sometimes fixes the problem, but sometimes makes some of the maps move to a completely different place, not aligned with any data at all. Data to reproduce the problem: download a few of the 24K topo maps from [TopoView](https://ngmdb.usgs.gov/topoview/viewer) - each map has a custom projection.",Can you test with 3.10.3/3.12?,I tried it in 3.12 and it has the same behavior as the other versions I tried.
qgis/QGIS,https://github.com/qgis/QGIS/issues/34709,qgis_QGIS_issues_34709,"Composer Exports Text as Image in SVG or PDF

QGIS Version 3.12 Windows 10 When exporting a map from the print composer, the SVG and PDF both do not have selectable text. The text appears to be a part of a raster image. To re-create the issue: 1. Compose a map in the print composer. Include a raster layer, and a vector layer with text labels. 2. Export either a .svg or .pdf file - it doesn't matter if you select the option to have text exported as text or a path or if you have it group the layers or not - all the options produce the same results. 3. Open the .svg or .pdf in a vector illustration software like Inkscape, ungroup layers, try to select a text object, but find it's a part of the image that was the raster data.",Could you share your project?,"Sadly, I cannot share it because it's for a paper that will be published."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34148,qgis_QGIS_issues_34148,"QGIS doesn't respect OGC guidelines for KVP parameters

**Describe the bug** QGIS makes unwarranted case sensitive comparisons of KVP keys **How to Reproduce** In the latest WFS 2.0 specification (and all previous specifications): ""09-025r1_OGC_Web_Feature_Service_WFS_2.0_ISOFDIS_19142_Geographic_information_-_Web_Feature_Service.pdf"" it clearly states in section ""6.2.5.2 Parameter ordering and case"" (my emphasis of NOT): ""Parameter names shall NOT be case sensitive, but parameter values shall be case sensitive. In this International Standard, parameter names used in KVP encoding are typically shown in uppercase for typographical clarity, NOT as a requirement."" **QGIS and OS versions** Any version including 3.4.15, Windows 10 **Additional context** I provide two non-standard ""Login="" and ""Password="" parameters in a WFS stub url, which some software of ours changed to lowercase, which prompted QGIS to re-insert the two parameters again (because clearly ""login"" was deemed different than ""Login""), yielding an error. A case-insensitive comparision would have prevented this, which should have been performed re: the standard. Please fix this.",Can you please explain step-by-step how to reproduce the issue? (I understand that the server might not be public),"Hi elpaso. When I open a WFS connection in QGIS, it looks something like this: https://myserver/myhandler?Login=MyCustomer&Password=123456789& The ""Login"" and ""Password"" parameters are needed to validate my requests thru ""myhandler"", but because they're non-standard, I provide them in the stub url (no other way). The application ""myhandler"" recognizes and processes the non-standard parameters, but inserts them in the Capabilities document as ""login"" and ""password"", i.e. in lower case. QGIS also handles and remembers the non-standard parameters in the stub url, and inserts them (I assume) if they're not present. Unfortunately this check for existence is case sensitive, so both ""login"" and ""Login"" ends up in the final url that's used to issue requests for DescribeFeatureLayer and GetFeature etc. The server isn't case sensitive, so it sees two logins, yielding a ""LOGIN"" value of ""MyCustomer,MyCustomer"" (and the same for password), which is clearly errornous. But QGIS should test for existence of these non-standard parameters in a case IN-sensitive manner as per the documentation. If it did, the ""login"" would only appear once in the urls, and things would work. This is the crux of this bug issue. It's unfortunate that ""myhandler"" lowercases the parameter keys, but this is perfectly legal, as keys are to be considered case-INsensitive as per the documentation. The only other possibility is that QGIS insert the non-standard parameters regardless of whether they are present or not in the Capabilities url's, which I think would also constitute a bug. Cheers."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34804,qgis_QGIS_issues_34804,"Decision tree for optional inputs in graphical modeler

In graphical modeler we have the nice option to make an input optional. But modeling this optional input can be difficult, because when it comes to processing tools, they usually throw back errors if the input is empty. So my idea would be to create a processing tool for graphical modeler which checks if an input is available and then creates two outputs: 1. If there is an input layer --> continue as usually 2. If there is no input layer --> just do nothing So we could just handle the optional layer like it is always available. Here is an example: ![Unbenannt-2](https://user-images.githubusercontent.com/44526431/75629960-0359a100-5be7-11ea-98a1-47a14846d3bc.jpg)",Can you elaborate why this functionality does not work for you?,"@alexbruy When setting an input as optional and then running processing tools if no input is set, the processing tools throw back errors. The execution of the model will then be cancelled. E.g. if you run ""refactor fields"", and its input layer is optional with no input layer set, you will get an error and the execution of the entire model will be cancelled."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34259,qgis_QGIS_issues_34259,"filter expression error returns true

Hi, teaching QGIS on 3.4.15 today, we face a bug on MAC and windows (have to try on ubuntu) : When we create a filter on a layer, if the expression contains an error ( for example a parenthesis not closed), the expression returns true so the layer is not filtered. ![filter_error_returns_true](https://user-images.githubusercontent.com/1642645/73733743-cd86e100-473c-11ea-8669-46ed87690fd4.PNG)",Can you attach a sample dataset?,"Thanks @gioman You can try this filter : `""STATUT"" = 'Préfecture de région'sdqsdqsdqsdqs` On that shapefile : [communes_occitanie.zip](https://github.com/qgis/QGIS/files/4153961/communes_occitanie.zip) By the way if this bug does not exist in 3.10 we will upgrade."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34261,qgis_QGIS_issues_34261,"Hello, I have a problem when i execute again an application created. Bug QgsApplication([], True)

#!/usr/bin/python import PyQt5 from PyQt5.QtCore import QUrl from PyQt5.QtWidgets import QApplication, QWidget from PyQt5.QtWebKitWidgets import QWebView , QWebPage from PyQt5.QtWebKit import QWebSettings from PyQt5.QtNetwork import * import sys from optparse import OptionParser class MyBrowser(QWebPage): ''' Settings for the browser.''' def userAgentForUrl(self, url): ''' Returns a User Agent that will be seen by the website. ''' return ""Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36"" class Browser(QWebView): def __init__(self): # QWebView self.view = QWebView.__init__(self) #self.view.setPage(MyBrowser()) self.setWindowTitle('Loading...') self.titleChanged.connect(self.adjustTitle) #super(Browser).connect(self.ui.webView,QtCore.SIGNAL(""titleChanged (const QString&amp;)""), self.adjustTitle) def load(self,url): self.setUrl(QUrl(url)) def adjustTitle(self): self.setWindowTitle(self.title()) def disableJS(self): settings = QWebSettings.globalSettings() settings.setAttribute(QWebSettings.JavascriptEnabled, False) #from qgis.PyQt.QtWidgets import QApplication #attrTables = [d for d in QApplication.instance().allWidgets() if d.objectName() == u'QgsAttributeTableDialog' or d.objectName() == u'AttributeTable'] #if attrTables: # attrTables[0].close() app = QApplication(sys.argv) view = Browser() view.showMaximized() view.load(""https://google.fr"") app.exec_() Crash ID: 777120072e86cef29e5b857e162fd6be8d41fc8f Stack Trace QGuiApplicationPrivate::init : QGuiApplication::font : QFont::QFont : QWidgetPrivate::QWidgetPrivate : QWidget::QWidget : QWebView::QWebView : PyObject_CallMethodObjArgs : PyMethodDescr_FastCallKeywords : PyObject_FastCallKeywords : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyFunction_FastCallDict : PyTuple_New : PyObject_FastCallKeywords : PyObject_FastCallKeywords : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyEval_EvalCodeWithName : PyEval_EvalCodeEx : PyEval_EvalCode : PyArena_Free : PyRun_StringFlags : PyImport_Import : PyImport_Import : PyMethodDef_RawFastCallKeywords : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyEval_EvalCodeWithName : PyImport_Import : PyImport_Import : PyMethodDef_RawFastCallKeywords : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyEval_EvalCodeWithName : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyEval_EvalCodeWithName : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyMethodDef_RawFastCallKeywords : PyEval_EvalFrameDefault : PyFunction_FastCallDict : PyMethodDef_RawFastCallDict : PyObject_Call : PyInit_QtCore : PyInit_QtCore : PyInit_QtCore : PyInit_QtCore : PyInit_QtCore : QMetaObject::activate : QAction::activate : QAbstractButton::click : QAbstractButton::mouseReleaseEvent : QToolButton::mouseReleaseEvent : QWidget::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : PyInit__core : QCoreApplication::notifyInternal2 : QApplicationPrivate::sendMouseEvent : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify : PyInit__core : QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : CallWindowProcW : DispatchMessageW : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QCoreApplication::exec : main : BaseThreadInitThunk : RtlUserThreadStart : QGIS Info QGIS Version: 3.4.3-Madeira QGIS code revision: 2f64a3c4e7 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.0 Running against GDAL: 2.4.0 System Info CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.18363",Shouldn't this be moved to the mailing list or other appropriate locations? This is probably more of a user/settings issues rather than a bug.,Thanks for the responses
qgis/QGIS,https://github.com/qgis/QGIS/issues/34265,qgis_QGIS_issues_34265,"Digitization problems

We use a PostGIS database. There we have a table with two different geometries, a point geometry and a geometry column in which polygons or multipolygons are stored. In the next step, we also have a georeferenced raster layer and the area in the raster layer is to be digitized as a polygon or multipolygon. Now I open the attribute table of the point layer, I look for the suitable data set and zoom in on the selected row. In the next step I toggle edining die Polygonlayer and I will add a part. I now digitize the georeferenced area and then I want to save the changes. But I can't save the changes because of this error message Layer xxx: PostGIS error while changing geometry values: FEHLER: Unknown geometry type: 12 - MultiSurface. In version 3.6.x, the digitized areas are still saved as polygons or multipolygons. QGIS version | 3.10.1-A Coruña | QGIS code revision | ef24c526da -- | -- | -- | -- Compiled against Qt | 5.11.2 | Running against Qt | 5.11.2 Compiled against GDAL/OGR | 3.0.2 | Running against GDAL/OGR | 3.0.2 Compiled against GEOS | 3.8.0-CAPI-1.13.1 | Running against GEOS | 3.8.0-CAPI-1.13.1 Compiled against SQLite | 3.29.0 | Running against SQLite | 3.29.0 PostgreSQL Client Version | 11.5 | SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 | QScintilla2 Version | 2.10.8 Compiled against PROJ | 6.2.1 | Running against PROJ | Rel. 6.2.1, November 1st, 2019 OS Version | Windows 10 (10.0) Active python plugins | DigitizingTools; qgisnetworklogger; vrtbuilderplugin; db_manager; MetaSearch; processing",what do you mean?,"I can give you a dump of the table, the data is not for the public. have created two CREATE commands for you around the table structure so that you can understand the table structure. CREATE TABLE mother ( id integer not null Default nextval(...), the_geom_point geometry, the_geom geometry, site integer, constraint mother_pkey PRIMARY KEY (id) ) CREATE TABLE child ( -- Inherited from table mother: id integer NOT NULL DEFAULT nextval(...), -- Inherited from table mother: the_geom_point geometry, -- Inherited from table mother: the_geom geometry, -- Inherited from table mother: site integer, -- Inherited from table baulasten.all_baulastenarchiv: verpflichtungserklaerung_vom date, constraint child_pkey PRIMARY KEY (id) CONSTRAINT the_geom_point_valid CHECK (st_isvalid(the_geom_point)), CONSTRAINT the_geom_valid CHECK (st_isvalid(the_geom)) ) INHERITS (mother)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/34267,qgis_QGIS_issues_34267,"Is qbrowser gone?  ubuntu 18.04 on stable ppa

Is qbrowser gone? After adding ppa-stable, it went missing.  Installs QGIS 3.4 LTS. Previously there was the QBrowser available for easy one-click navigation and view of data in the file system. That's the easiest way to quickly view data without all the bells-n-whistles of using layers and projects. After searching for more about it, there's no information and no app installed.",How is this a feature request or even a bug report? We should add a link to the mailing lists for other type of 'issues'/tickets.,It's a request to bring it back. The feature is gone.
qgis/QGIS,https://github.com/qgis/QGIS/issues/34299,qgis_QGIS_issues_34299,"Bad georeferencing of OZI .map with GDAL 3.0.0 to 3.0.4

After updating from the 3.10.0 version to 3.10.1 and recently to 3.10.2 the existing layers with CRS ""GGRS87 / Greek Grid EPSG:2100"" are erroneously projected somewhere to Saudi Arabia. Uninstalled and reinstalled version 3.10.0 to solve the problem.","Do you re-project? or just loading the layer it appears on wrong coordinates? I'm using 2100 daily here without any issues with either 2100, 4326 or web mercator","Thank you for the replies, after a more thorough research we make the problem is narrowed to the oziexplorer map files. I include the example below. This file when opened with QGIS 3.10.0 and of course all the previous versions, it is displayed in the right coordinates somewhere in W. Crete - Greece. With the latest versions 3.10.1 & 3.10.2 it is displayed in Egypt and cannot correct the position after setting any other CRS. The project CRS is EPSG:2100 - GGRS87 /Greek Grid. [tp.zip](https://github.com/qgis/QGIS/files/4159516/tp.zip)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/34332,qgis_QGIS_issues_34332,"3D View - Rule-based symbology based on atlas not working

At layer properties, when defining 2D ruled-based symbology based on currently active atlas item, for example: `plan = attribute ( @atlas_feature, 'ref_pln' )` I get the desired results (i.e. ""Filter returned xx features""). When applying the same rule-based filter to 3D View, I get ""Filter returned 0 features'. I have tried using in the 3D View a filter non dependable on the Atlas, like `plan = '001'` and it works, so it seems that it's an issue with filtering by Atlas in 3D View. Using QGIS Desktop 3.10.2-A Coruña for macOS Catalina 10.15.3.",Does the 3D renderer even has access to the atlas scope?,"I guess it has not – I can't find anywhere to connect an Atlas to a 3D view, for example, for automating the camera position (i.e. the camera parameters inside print composer (centers XYZ, distance, pitch, heading) could be read from a table according to the currently active atlas item). But I think you are right and this should be understood more as a ""feature request"" than a ""bug""? (@gioman ?)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/34366,qgis_QGIS_issues_34366,"Reordering drag and drop layer to existing layer group does nothing

The selection gives a visual feedback when hovering over the destination in the layout toolbar but fails to move the layer upon click release. QGIS version | 3.10.1-A Coruña | QGIS code branch | Release QGIS code branch.3 -- | -- | -- | -- Compiled against Qt | 5.13.2 | Running against Qt | 5.13.2 Compiled against GDAL/OGR | 2.3.2 | Running against GDAL/OGR | 2.3.2 Compiled against GEOS | 3.7.1-CAPI-1.11.1 | Running against GEOS | 3.7.1-CAPI-1.11.1 27a5e771 Compiled against SQLite | 3.30.0 | Running against SQLite | 3.30.0 PostgreSQL Client Version | 11.6 | SpatiaLite Version | 4.3.0a QWT Version | 6.1.3 | QScintilla2 Version | 2.11.2 Compiled against PROJ | 5.2.0 | Running against PROJ | Rel. 5.2.0, September 15th, 2018 OS Version | Fedora 31 (Workstation Edition) Active python plugins | quick_map_services; MetaSearch; processing; db_manager",Could you add a small screencast?,"Sure, good idea. ![qgis_screencast_1](https://user-images.githubusercontent.com/46658878/74091812-241c5400-4a8a-11ea-82dd-787ed2e27deb.gif)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/34405,qgis_QGIS_issues_34405,"""No default style was found"" when using some languages

When trying to Restore default style: Layer properties -> Style -> Restore dfault style I get the error: ""No default style was found for this layer"" This seems to be connected to language settings. When i change to ""override system locale"" and select english, default style gets restored correctly. I get same issue for PostGIS layers as well as Geopackage layers. Tested in QGIS 3.10.2 and 3.4.12",What is your QGIS language? And what is your OS?,"Windows 7 and 10. It seems to be connected to some languages only. I tried French, Portuguese, Italian which works. With German, Slovene, Dansk i get ""No default style was found for this layer"" message.."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34484,qgis_QGIS_issues_34484,"Usability: Avoid running a Processing algorithm twice by accident

**Feature description.** After you run a Processing algorithm, the `Log` tab is visible and the `Run` button is enabled, so you can run the algorithm again with a single click. From a user perspective, it shouldn't be the case. If you want to run the algorithm again, you could at least have a look at the `Parameters` tab once more. **1st proposal** 1. Run the algorithm. 2. Disable `Run` button. 3. Enable `Run` button as soon as the user activates the `Parameters` tab. ![1st_proposal](https://user-images.githubusercontent.com/652785/74596277-fea7c100-501a-11ea-9473-23bf5d4e099a.gif) **2nd proposal** Only run if `Parameters` tab is active. That is, avoid running the algorithm if `Log` tab is active. ![2nd_proposal](https://user-images.githubusercontent.com/652785/74596540-bd191500-501e-11ea-805a-e59a927f393e.gif) **3rd proposal** 1. Run the algorithm. 2. Change `Run` button by `Prepare next run` button. 3. A click on `Prepare next run` button activates `Parameters` tab, which changes `Prepare next run` button by `Run` button. ![3rd_proposal](https://user-images.githubusercontent.com/652785/74597089-e2118600-5026-11ea-96dd-140071385212.gif) ---------------------------------------- Let me know which one you all prefer, then I'll create a PR. I prefer the 2nd proposal. If you have another idea, please comment it. *Note: I didn't write a QEP because this is a minor change in UI.*",Wouldn't it be simpler to add a timer of a few seconds before enabling again? No need to fiddle and to find the magic combination to enable the run again.,"In that sense, the 3rd proposal is better. There is no magic and a click on the button is required (but clear enough) for running an algorithm twice."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34555,qgis_QGIS_issues_34555,"Crush at clear project while trying loading any data QGIS 3.4.15 (happened also with QGIS 3.10.2)

## User Feedback I wanted to load a new vector file, same happend with trying to load csv via Data Source Manager. I also created a new profile (settings > user profiles > new profile), to check if this bug will appear, but it strikes again, It happens in a replicable way, first it started at QGIS 3.10.2, then I uninstalled and went to 3.4.15, but problem didn't disappear. I can't use QGIS :( ## Report Details *Crash ID*: 2b5b8847e4fda81698b56c97b7805166938c74fd *Stack Trace* <pre> RtlpFreeHeapInternal : RtlFreeHeap : free : DllUnregisterServer : DllUnregisterServer : CServerContextActivator::CreateInstance actvator.cxx:877 ActivationPropertiesIn::DelegateCreateInstance actprops.cxx:1970 CApartmentActivator::CreateInstance actvator.cxx:2185 CProcessActivator::CCICallback actvator.cxx:1636 CProcessActivator::AttemptActivation actvator.cxx:1523 CProcessActivator::ActivateByContext actvator.cxx:1367 CProcessActivator::CreateInstance actvator.cxx:1267 ActivationPropertiesIn::DelegateCreateInstance actprops.cxx:1970 CClientContextActivator::CreateInstance actvator.cxx:566 ActivationPropertiesIn::DelegateCreateInstance actprops.cxx:1970 ICoCreateInstanceEx objact.cxx:2211 CComActivator::DoCreateInstance immact.hxx:386 CoCreateInstance actapi.cxx:121 _SHCoCreateInstance : DCA_SHExtCoCreateInstance : CreateAndCacheIconOverlay : CFSIconOverlayManager::GetOverlayIconInformation : CFSIconOverlayManager::LoadIconOverlayIdentifiers : CFSIconOverlayManager::_s_LoadIconOverlayIdentifiers : CFSIconOverlayManager::LoadNonloadedOverlayIdentifiers : EnableExternalOverlayIdentifiers : CFSIconOverlayManager::RefreshOverlayImages : GetIconOverlayManagerImpl : CFSFolder::_GetOverlayInfo : CRegFolder::_GetOverlayInfo : CRegFolder::GetOverlayIndex : CAutoDestItemsFolder::GetOverlayIndex : CRegFolder::_GetOverlayInfo : CRegFolder::GetOverlayIndex : CNscOverlayTask::_Extract : CNscOverlayTask::InternalResumeRT : CRunnableTask::Run : CShellTask::TT_Run : CShellTaskThread::ThreadProc : CShellTaskThread::s_ThreadProc : ExecuteWorkItemThreadProc : RtlpTpWorkCallback : TppWorkerThread : BaseThreadInitThunk : RtlUserThreadStart : </pre> *QGIS Info* QGIS Version: 3.4.15-Madeira QGIS code revision: e83d02e274 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 2.4.3 Running against GDAL: 2.4.3 *System Info* CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.18363",Could you provide more detailed steps to reproduce this?,"@gioman Hi, so I was installing this QGIS on a computer, which had before 2.18 version, so there are no extra plugins installed and everytime I make a new, clear profile (I already have few), it doesn't help, it crashes again and again. @roya0045 Well, it's not so complicated, I thought I described it well in the report, but here you are. 1. Run QGIS (never mind if it is GRASS or without GRASS version) 2. Open New Project. 3. Click ""Open Data Source Manager"" 4. Choose ""Delimited Text"" option 5. Click ""Browse"" (...) in the ""File name"" field. 6. I can't even choose the file load, because at this moment QGIS crashes. What is interesting, at my old PC I load the same files (csv, vectors) and nothing is crushing (there I installed QGIS 3.10.2, but also with 3.4.x it worked), so I think there may be problem with python version or some registry stuff. Do you think this is possible? I inherited this second PC at Uni from ex PhD student, so it's hard for me to say what was done before and maybe this is the reason for this bug to appear?"
qgis/QGIS,https://github.com/qgis/QGIS/issues/34616,qgis_QGIS_issues_34616,"Let user drag to change the size of each dialogue

**Feature description.** QGIS lets users drag to change the size of each dialogue. **Additional context** I use the Linux version. Some dialogue window is too small to show all the contents. I would like to drag the border of the window to change its size.",Which dialog is too small to fit contents and can't be resized?,"I find the window actually could be dragged and resized. However, when I place the mouse near the boundary of a window, the mouse's style does not change to indicate the possibility of dragging and resize the window. So I mistakenly thought that I could not drag the window. OS: Ubuntu 18.04 + i3wm"
qgis/QGIS,https://github.com/qgis/QGIS/issues/34629,qgis_QGIS_issues_34629,"Postgis mixed geometry data table causes QGIS > 3.8 issues as more recent QGIS versions see all records instead of those of the right type

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** <!-- A clear and concise description of what the bug is. --> In QGIS more recent than 3.8 a postgis database that has (multi)points, lines and (multi)polygons into one table causes issues as QGIS sees all rows in the database in each of the layers. In QGIS 3.8 (and earlier), this problem was not present. QGIS 3.10 and 3.12 both have the issue. FWIW: the database is not used by QGIS alone, so splitting the table into 3 tables it is simply not an option (need for unique identifiers and other tables not even used in QGIS that refer to this data) This causes problems when viewing the table data in QGIS, when rendering labels ( a layer will generate labels for data of the wrong geometry type), and when exporting shape files for that layer. **How to Reproduce** Have a postgis database table containing in a single table multipoint, point, multipolygon, multilinestring, and linestring data. e.g.:  Create a new project in QGIS 3.10 , connect to the postgis database to add a vector layer and see the database there 3 times (as expected), once for (multi)points, once for lines and once for (multi)polygons: ![image](https://user-images.githubusercontent.com/12376773/75171294-b29c0100-572b-11ea-8930-ad2ae1c09e40.png) Add either the 3 layers to the project (one by one or all in one go doesn't matter) Click open Attributes table for each of the layers and see the counts: E.g. for the points one: ![image](https://user-images.githubusercontent.com/12376773/75171635-3ce46500-572c-11ea-8195-492789c9b5f9.png) compare that 9075 to the rows in the database above, and confirm data for known polygon data is included as well. e.g. for the polygon layer: ![image](https://user-images.githubusercontent.com/12376773/75171755-6e5d3080-572c-11ea-86bc-73dd090bab24.png) Doing the same in QGIS 3.12 yields exactly the same results as in 3.10 Doing the same in QGIS 3.8 works without a problem: polygons: <img width=""510"" alt=""Screenshot 2020-02-24 at 17 55 01"" src=""https://user-images.githubusercontent.com/12376773/75173546-576c0d80-572f-11ea-95ce-188769920ce2.png""> lines: <img width=""510"" alt=""Screenshot 2020-02-24 at 17 55 30"" src=""https://user-images.githubusercontent.com/12376773/75173554-5a66fe00-572f-11ea-8e62-57240c9d4535.png""> points: <img width=""510"" alt=""Screenshot 2020-02-24 at 17 55 45"" src=""https://user-images.githubusercontent.com/12376773/75173573-5fc44880-572f-11ea-9c15-2eac14b3209f.png""> Once these rows get seen in multiple layers, at least the following additional problems get triggered: - Labels get shown for elements that have the wrong Geometry type. (to Green labels on the points, red labels on the polygons, placement set so they don't overlap: zoomed in to a single point, no overlapping polygon anywhere near: ![image](https://user-images.githubusercontent.com/12376773/75174249-8e8eee80-5730-11ea-8306-26dab2afba71.png) - exporting to shapefiles fails with errors e.g. exporting to an ESRI shapefile of the points layer gives ![image](https://user-images.githubusercontent.com/12376773/75174418-d9106b00-5730-11ea-800b-b91c896a42e9.png) <!-- Steps, sample datasets and qgis project file to reproduce the behavior. Screencasts or screenshots welcome **QGIS and OS versions** <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> Instructions don't work on a mac. ![image](https://user-images.githubusercontent.com/12376773/75175041-eb3ed900-5731-11ea-81ba-004f84451e9f.png) Tested versions: QGIS 3.8.2 - macOS Catalina 10.15.3 - works as expected QGIS 3.10.2 - macOS Catalina 10.15.3 - bug QGIS 3.12.0 - macOS Catalina 10.15.3 - bug **Additional context** <!-- Add any other context about the problem here. -->",Can you please attach an SQL dump?,"Can't make that database public, sorry. But I'll try to create a sample I can share."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34694,qgis_QGIS_issues_34694,"Problem creating GeoPDF with layers. 

When trying to export layered PDF via this new feature it simply does not work. Both ""create geospatial PDF"" and ""include vector feature information"" are checked. When press save, it shows the yellow line on the top saying ""could not save the map to PDF"", without any further info/explanation about the error. However a PDF file is created, where everything is blank, but the layer function is active and the structure of the layers with the titles is there as well. Windows 10 64, QGIS 3.10.3 ![image](https://user-images.githubusercontent.com/61496472/75346689-ef8d0280-58a7-11ea-8c8f-8a0ff1a5c405.png) ![image](https://user-images.githubusercontent.com/61496472/75346811-29f69f80-58a8-11ea-93ed-d471a2475bf4.png)",Can you attach a sample project?,"Hi @gioman. After several hours of trying different options it did not work. I have tried to set just one file, or several files, or only in Latin (since I have several in Cyrillic) or some other options and it did give an error, so finally i did it in Arcmap where it was without any problem. However, today before responding to you and attaching a file you have requested, i have tried once again and it did work with even several files. I have restarted the computer yesterday, and til now it was hibernating, nothing has been changed, so it is still quite mysterious. 10x anyway :)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/34696,qgis_QGIS_issues_34696,"Cannot commit edits to spatialite layers in QGIS 3.12

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** When I try to commit edits to a spatialite layer I get a yellow warning saying the following: `Could not commit changes to layer Facilities` `Errors: ERROR: 5 feature(s) not added.` `Provider errors:` `SQLite error: unknown cause` `SQL: INSERT INTO ""facilities""(""geometry"",,""type"",""comment"") VALUES (GeomFromWKB(?, 2157),,?,?)` and a red warning saying the following: `Layer Facilities: SQLite error: unknown cause SQL: INSERT INTO ""facilities""(""geometry"",,""type"",""comment"") VALUES (GeomFromWKB(?, 2157),,?,?)` This prevents me from making any edits to spatialite layers. **How to Reproduce** 1. Create a new spatialite database and layer 2. Enable editing, add features, click `save edits` 3. See error(s) **QGIS and OS versions** <!-- In the QGIS menu help/about, click in the dialog, Ctrl+A and then Ctrl+C. Finally paste here --> QGIS version 3.12.0-București QGIS code revision cd141490ec Compiled against Qt 5.11.2 Running against Qt 5.11.2 Compiled against GDAL/OGR 3.0.4 Running against GDAL/OGR 3.0.4 Compiled against GEOS 3.8.0-CAPI-1.13.1 Running against GEOS 3.8.0-CAPI-1.13.1 Compiled against SQLite 3.29.0 Running against SQLite 3.29.0 PostgreSQL Client Version 11.5 SpatiaLite Version 4.3.0 QWT Version 6.1.3 QScintilla2 Version 2.10.8 Compiled against PROJ 6.3.1 Running against PROJ Rel. 6.3.1, February 10th, 2020 OS Version Windows 10 (10.0) **Test Project and Database** [test_project_and_db.zip](https://github.com/qgis/QGIS/files/4256866/test_project_and_db.zip)",Can you please share a project with a test DB?,"@elpaso - Yes, please see edited question."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34866,qgis_QGIS_issues_34866,"DB Manager - 'geometry_dump' not supported (ignored due to unsupported field type)

**Describe the bug** PostGIS `geometry_dump` type as QGIS field type (c) is not supported. **How to Reproduce** Run any query that returns a `geometry_dump` type, e.g. ",maybe fixed by https://github.com/qgis/QGIS/pull/34815 can you please check latest master?,"@gioman @elpaso sure, will set up a test env later today, can't do it right away..."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34761,qgis_QGIS_issues_34761,"Georeferenced Rasterimage misaligned

Hello, with QGIS Desktop 3.8 i started a little Project. I only show a Google Map and then import some raster images (Floorplans) with Georeferencing. In 3.8 it's all ok but open the Project with 3.12 all the referenced floorplans are shown ~30km of in the north direction. Any hints?",Could this be caused by the smallness of the raster and the changes to proj?,"Some more details: Opened QGIS 3.8 with a new project. From the browser imported the OpenStreetMap layer. Zoomed to a building. Opened the georeferencing from raster menu. Opened a raterimage there. Set reference points with button ""from Map"". Set the transformation settings. And then let qgis do his work with the playbutton. At the end there is a nice floorplan on the building. Saved and closed project. Opened this project with QGIS 3.12 and voila, the floormap layer showed ~30km north. The ratser image is a png with 10000x5255 pixels, 32bit depth and transparency (alpha). Transformation-Settings: Type: Helmert Method: Nearest Neighbor Target: EPSG:3857 - WGS84 / Pseudo-Mercator No compression Save Passpoints I don't know if the naming is correct because i use the german layout. If someone can tell me how to upload an video i can take one and share."
qgis/QGIS,https://github.com/qgis/QGIS/issues/34845,qgis_QGIS_issues_34845,"QGIS fails to understand geocentric cartesian coordinates

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [x] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [x] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [x] Create a light and self-contained sample dataset and project file which demonstrates the issue If the issue concerns a **third party plugin**, then it **cannot** be fixed by the QGIS team. Please raise your issue in the dedicated bug tracker for that specific plugin (as listed in the plugin's description). --> **Describe the bug** Adding a new layer from a text file with geocentric cartesian coordinates results in a layer without geometry. Attached is a file, `GR96_fiducial_stations_1996.txt`, with EPSG:4908 coordinates which QGIS in theory should be able to understand and transform to the project CRS. This fails. **How to Reproduce** 0. Create a new project 1. Add `greenland.gpkg` (packaged here: [greenland.zip](https://github.com/qgis/QGIS/files/4281884/greenland.zip) ). Make sure that project CRS is set to EPSG:4909. 2. Add delimited text layer 3. Open the attached [GR96_fiducial_stations_1996.txt](https://github.com/qgis/QGIS/files/4281622/GR96_fiducial_stations_1996.txt) 4. Put field 1 as x, 2 as y, 3 as z. 5. Set ""geometry CRS"" to EPSG:4908 6. Add the layer 7. Note that the coordinates are not loaded correctly. They all end up on a line where they in fact should end up spread out in and around Greenland. See the image below. The orange points are the ones QGIS has imported and transformed. The blue ones are the correct positions transformed using PROJ. ![fail](https://user-images.githubusercontent.com/13132571/75784915-388afe00-5d63-11ea-95e1-3491aab816e7.png) Note that the x-coordinate (longitude) seems to be represented correct, but that the y-coordinate (latitude) is set to 0. Worth mentioning is also that when zooming in on the orange points they will disappear and the identify features tool won't recognize the points (independent on zoom level). **QGIS and OS versions** ",Can you try with latest QGIS 3.10.3? There was a fair amount of fixes that could resolve your issue.,"Probably not. At least not immediately (coorporate PC, you know). I may be able to give it a go with 3.12.0. Hang on :-)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/34886,qgis_QGIS_issues_34886,"[DB-Manager] postgresql views are not recognized on the Info tab

In QGis 3.12, the Info tab returns incorrect information about postgresql views (and materialized views too), and these views can't be added to canvas because ""_PostgreSQL layer has no primary key_"". Example : ### General info Relation type: Table Owner: samyfr Pages: 0 Rows (estimation): 0 Rows (counted): 3716 Privileges: select, insert, update, delete There's a significant difference between estimated and real row count. Consider running VACUUM ANALYZE. No primary key defined for this table! ### Fields [...] . In QGis 3.10, it's ok with the same view that can be added in canvas : ### General info Relation type: View Owner: samyfr Pages: 0 Rows (estimation): 0 Rows (counted): 3716 Privileges: select, insert, update, delete ### Fields",Can you please attach a SQL dump to reproduce the issue?,Here is a dump of the source table and an another dump of the view. https://framabin.org/p/?92be4c92b69cf460#Px1pM/9P0nZXIqgB7E8gNo0vrBhcALKNZdA5IMkKir4= https://framabin.org/p/?8714fcaef3a76976#baIque4o6MG/X9D1z+Fio61Fjc9ZTplwHkT+13gZ2iA=
qgis/QGIS,https://github.com/qgis/QGIS/issues/34979,qgis_QGIS_issues_34979,"Field Calculator causes crash

## User Feedback Whenever I try to open the field calculator, regardless of the project (new or different saved ones), the version (tried 3.10 and 3.12), OSGeo/local install, or whether I go through the main menu or the attribute table, QGIS crashes. I have tried restarting, uninstalling and reinstalling, as well as the different combinations outlined above. ## Report Details **Crash ID**: [45de3b07fa848dc59218a0daffdbf46ef1580280]('https://github.com/qgis/QGIS/search?q=45de3b07fa848dc59218a0daffdbf46ef1580280&type=Issues') **Stack Trace** <pre> QgsExpressionBuilderWidget::updateFunctionTree qgsexpressionbuilderwidget.cpp:666 QgsExpressionBuilderWidget::QgsExpressionBuilderWidget qgsexpressionbuilderwidget.cpp:127 Ui_QgsFieldCalculatorBase::setupUi ui_qgsfieldcalculatorbase.h:110 QgsFieldCalculator::QgsFieldCalculator qgsfieldcalculator.cpp:51 QgisApp::fieldCalculator qgisapp.cpp:7704 QMetaObject::activate : QAction::activate : QAbstractButton::click : QAbstractButton::mouseReleaseEvent : QToolButton::mouseReleaseEvent : QWidget::event : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify qgsapplication.cpp:418 QCoreApplication::notifyInternal2 : QApplicationPrivate::sendMouseEvent : QSizePolicy::QSizePolicy : QSizePolicy::QSizePolicy : QApplicationPrivate::notify_helper : QApplication::notify : QgsApplication::notify qgsapplication.cpp:418 QCoreApplication::notifyInternal2 : QGuiApplicationPrivate::processMouseEvent : QWindowSystemInterface::sendWindowSystemEvents : QEventDispatcherWin32::processEvents : UserCallWinProcCheckWow : DispatchMessageWorker : QEventDispatcherWin32::processEvents : qt_plugin_query_metadata : QEventLoop::exec : QCoreApplication::exec : main main.cpp:1607 BaseThreadInitThunk : RtlUserThreadStart : </pre> **QGIS Info** QGIS Version: 3.10.3-A Coru�a QGIS code revision: 0e1f846438 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 3.0.4 Running against GDAL: 3.0.4 **System Info** CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.18362 QGIS version | 3.10.3-A Coruña | QGIS code revision | 0e1f846438 -- | -- | -- | -- Compiled against Qt | 5.11.2 | Running against Qt | 5.11.2 Compiled against GDAL/OGR | 3.0.4 | Running against GDAL/OGR | 3.0.4 Compiled against GEOS | 3.8.0-CAPI-1.13.1 | Running against GEOS | 3.8.0-CAPI-1.13.1 Compiled against SQLite | 3.29.0 | Running against SQLite | 3.29.0 PostgreSQL Client Version | 11.5 | SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 | QScintilla2 Version | 2.10.8 Compiled against PROJ | 6.3.1 | Running against PROJ | Rel. 6.3.1, February 10th, 2020 OS Version | Windows 10 (10.0) Active python plugins | processing",Did you try with a new profile?,"A new, clean profile solved the problem - many thanks, I was pulling my hair out!"
qgis/QGIS,https://github.com/qgis/QGIS/issues/35081,qgis_QGIS_issues_35081,"Data Defined Labeling Placement - Quadrant Data Type Conflict (3.10.3-A Coruña)

**Describe the bug** Using .csv + .csvt I am attempting to import a Delimited Text Layer (points) including data defined overrides for data label placement. However, it appears a data type conflict for the `Quadrant` field is blocking a data defined override for this field. **How to Reproduce** 1. Layer `Properties` > `Labels` > `Placement` tab 2. Select `Offset from point` 3. Click `Data defined override` button 4. Note `Field type: string` 5. Click `Edit...` 6. Note `Expected Format` at the bottom is `int` (integer) Which is correct: `string` or `int`? **QGIS and OS versions** QGIS version | 3.10.3-A Coruña | QGIS code revision | 0e1f846438 -- | -- | -- | -- Compiled against Qt | 5.12.3 | Running against Qt | 5.12.3 Compiled against GDAL/OGR | 2.4.1 | Running against GDAL/OGR | 2.4.1 Compiled against GEOS | 3.7.2-CAPI-1.11.2 | Running against GEOS | 3.7.2-CAPI-1.11.2 b55d2125 Compiled against SQLite | 3.28.0 | Running against SQLite | 3.28.0 PostgreSQL Client Version | 11.3 | SpatiaLite Version | 4.3.0a QWT Version | 6.1.4 | QScintilla2 Version | 2.11.1 Compiled against PROJ | 5.2.0 | Running against PROJ | Rel. 5.2.0, September 15th, 2018 OS Version | macOS 10.15 Active python plugins | OnlineRoutingMapper; kmltools; quick_map_services; qgis_resource_sharing; mmqgis; LocatePoints; processing; db_manager; MetaSearch **Additional context** In my .csvt file I have attempted to force my `quadrant` field to type `string`, but the .csvt's field type value is being ignored in favor of the automatic detection of data in the associated .csv field, thus forced to `integer`. Expecting `string`, It seems the GUI then considers the field invalid when I try to set my `Data defined override`. If I de-select `Detect field types` when importing the .csv layer, the .csvt is ignored altogether (i.e., every field type is set to `text`).",Can't you use an expression and convert the int to string in the query builder? That should do the trick.,"@roya0045 - I'm not particularly experienced with SQL or Python, so bear with me. I've created this expression: `to_string( label_quadrant)`, but when I then go back to select `label_quadrant`, it's still not appearing in my eligible fields list."
qgis/QGIS,https://github.com/qgis/QGIS/issues/35109,qgis_QGIS_issues_35109,"QGIS 3.x.x: freezes and crashes

Hello, everybody! It's been more than 2 weeks now since I've been unable to use QGIS on my computer. Due to a version change, QGIS is now just crashing on my computer. As soon as I launch it, I can manipulate the software for a few seconds until it crashes, and it's starting to get annoying, especially since I absolutely need this software for my professional projects ... I've already tried to upgrade to an earlier version (LTR and not LTR), updated my graphic card drivers, performed a disk cleanup and defragmentation and freed up space on my hard drive but nothing helped. I also tried to start QGIS with a blank profile and no extensions, but it doesn't change anything. When I launch QGIS, I see that the hard disk usage goes to 100%. So I used DISM to repair the system files but nothing changes, QGIS still crashes... On the internet, several people have already been confronted with my problem, but the problem seems to be solved by a simple reinstallation of a previous version. What I already tried but always the same problem. I rather have the impression that it comes from my hardware but I would like to know if other people have already been or not in my case. Here's my configuration: Windows 10 x64 Intel Core i7-4720HQ @2.60GHz 8 gb ram Nvidia Geforce GTX960M 2gb Thank you in advance for your answers! Here is my crash report: ",Do you have custom scripts enabled or any other customized code such as custom processing algorythm?,"Thanks for your answer. No I don't have any of that, I was only using a few plugins, which I disabled, but the crashes still persist. I also have ArcGIS on my computer and it's working properly, so I can't understand why QGIS doesn't work."
qgis/QGIS,https://github.com/qgis/QGIS/issues/35241,qgis_QGIS_issues_35241,"Bad handling of right-to-left language (RTL) characters on the expression tab and function editor

**1. Invisible at start of line** _Description_ When a RTL character(s) is inserted at a start of a line (after an ENTER key) in the editor, it’s becoming invisible: ![Invisible at start of line - 1](https://user-images.githubusercontent.com/47955227/77252773-d8e78a80-6c5e-11ea-92bf-a259edc8a1b0.png) In this example it can be seen that there is a two-lined composed string which is displayed in QGIS expression tab (upper) and in - commonly used - Notepad++ (bottom). In QGIS expression editor window, the second line of the string (which contains only single quotation marks and RTL characters), is invisible. Nonetheless, it’s being properly outputted. The same can be said about the function editor below ![Invisible at start of line - 2](https://user-images.githubusercontent.com/47955227/77252820-206e1680-6c5f-11ea-8003-ae74d9b733ce.png) _Ways to reproduce_ 1. Open an expression tab or a function editor. 2. Insert this string to it: `'hello everybody' + ' ' + 'שלום לכולם' ` **2. Overlapping display of characters after RTL characters in the same line** _Description_ When a RTL character(s) is inserted at a middle of a line in the editor, following characters will overlap it in display: ![Overlapping display of RTL and LTR characters in the same line - 1](https://user-images.githubusercontent.com/47955227/77252877-7773eb80-6c5f-11ea-847d-035147fe46a8.png) In this example it can be seen that there is a one-lined string which is displayed in QGIS expression tab (upper) and in Notepad++ (buttom). In the upper window, after the RTL substring, the upcoming substrings are overlapping it. While in the bottom window it is displayed correctly. _Ways to reproduce_ 1. Open an expression tab or a function editor. 2. Insert this string to it: `'hello everybody' + ' ' + 'שלום לכולם' + ' ' + 'hello everybody'` **3. Bad selection handling for RTL characters** There are 2 cases for bad selection handling of RTL characters: **a. Selecting RTL characters from left to right with cursor** _Description_ When trying to select RTL characters using the cursor and starting from the left, the RTL characters won’t be selected up until the very end and then they’ll be completely selected. In other words: when using this approach, one cannot select a small part of the RTL characters sequence. ![Bad selection handling for RTL characters - 1](https://user-images.githubusercontent.com/47955227/77252932-ebae8f00-6c5f-11ea-89bd-0505ea76bc65.gif) In this exemple, it can be seen that the QGIS expression tab doesn't handle the RTL selection movement of the cursor as expected. It only selects the RTL characters when approaching the end of their string sequence. Using MS Word (middle) yields a more reasonable result. Same can be said for Notepadd++ (bottom). _Ways to reproduce_ 1. Open an expression tab or a function editor. 2. Insert this string to it: `'hello everybody' + ' ' + 'שלום לכולם'` **b. Selecting RTL characters using keyboard** _Description_ Using selection keyboard keys (SHIFT + ARROWS) makes a mess out of the expression tab display: ![Bad selection handling for RTL characters - 2](https://user-images.githubusercontent.com/47955227/77253017-70011200-6c60-11ea-9c28-9152eb4d858b.gif) In this example, it can be seen that QGIS’ expression tab display does select the RTL characters sequence but makes it look white and offset to the right. This is only visible on the selection reddish background. Using MS Word (middle) yields a more reasonable result. Same can be said for Notepadd++ (bottom). This is another example for the undesired behaviour when selecting with keyboard keys: ![Bad selection handling for RTL characters - 3](https://user-images.githubusercontent.com/47955227/77253070-d71ec680-6c60-11ea-84ab-31fae9f342a3.gif) _Ways to reproduce_ 1. Open an expression tab or a function editor. 2. Insert this string to it: `'hello everybody' + ' ' + 'שלום לכולם'` 3. Start selecting your expression with the keyboard keys. **QGIS and OS versions** QGIS version | 3.12.0-București | QGIS code revision | cd141490ec -- | -- | -- | -- Compiled against Qt | 5.11.2 | Running against Qt | 5.11.2 Compiled against GDAL/OGR | 3.0.4 | Running against GDAL/OGR | 3.0.4 Compiled against GEOS | 3.8.0-CAPI-1.13.1 | Running against GEOS | 3.8.0-CAPI-1.13.1 Compiled against SQLite | 3.29.0 | Running against SQLite | 3.29.0 PostgreSQL Client Version | 11.5 | SpatiaLite Version | 4.3.0 QWT Version | 6.1.3 | QScintilla2 Version | 2.10.8 Compiled against PROJ | 6.3.1 | Running against PROJ | Rel. 6.3.1, February 10th, 2020 OS Version | Windows 10 (10.0) Active python plugins | db_manager; MetaSearch",Could this an upstream issue in QT?,"I'm not that familiar with the QT project, can you please suggest a good data source?"
qgis/QGIS,https://github.com/qgis/QGIS/issues/35795,qgis_QGIS_issues_35795,"Character encoding issue when exporting Calibri labels to PDF

**Describe the bug** When adding a layout label to QGIS 3, if you use the Calibri font and **don't** render as HTML, words like ""attend"" and ""mention"" (anything with a ""tt"" or ""ti"") will be improperly encoded when exported to a PDF. This can be an accessibility issue. **How to Reproduce** 1. Open QGIS, create a layout 2. Add a label to the layout. Use Calibri as the font. Do NOT turn on ""render as HTML"" option. 3. Make sure to add words with ""tt"" or ""ti"" to the label 4. Export to PDF 5. Run Accessibility Full Check in Adobe Acrobat Pro. Under ""Page Content"", you will see ""Character encoding - Failed"" and the words with ""tt"" and ""ti"" will be shown. Screen readers will misread these words. **QGIS and OS versions** QGIS version 3.10.1-A Coruña QGIS code revision ef24c526da Compiled against Qt 5.11.2 Running against Qt 5.11.2 Compiled against GDAL/OGR 3.0.2 Running against GDAL/OGR 3.0.2 Compiled against GEOS 3.8.0-CAPI-1.13.1 Running against GEOS 3.8.0-CAPI-1.13.1 Compiled against SQLite 3.29.0 Running against SQLite 3.29.0 PostgreSQL Client Version 11.5 SpatiaLite Version 4.3.0 QWT Version 6.1.3 QScintilla2 Version 2.10.8 Compiled against PROJ 6.2.1 Running against PROJ Rel. 6.2.1, November 1st, 2019 OS Version Windows 10 (10.0) Active python plugins changeDataSource; QuickOSM; db_manager; MetaSearch; processing **Additional context** This has been found with two different user profiles. Since workarounds exist, this bug should not be considered a high-priority, in my opinion. Mostly I'm logging it so others are aware of the workarounds (and who knows, maybe it's an easy fix). **Demonstration Files** Files showing the problem and workarounds are in https://github.com/mmdolbow/pdf_map_accessibility/tree/master/qgis/etc",Can you check if Acrobat Pro supports ligatures?,"Thanks so much for the reply. After some research, it looks like Adobe [does support ligatures](https://www.adobe.com/products/type/opentype.html) in general. But there are several issues and bugs reported, like [this one](https://acrobat.uservoice.com/forums/590923-acrobat-for-windows-and-mac/suggestions/31943371-adobe-acrobat-pro-bug-extracting-text-with-ligat). I will try to file a specific bug with them. Since there are workarounds for this, I would support this issue being closed."
qgis/QGIS,https://github.com/qgis/QGIS/issues/35344,qgis_QGIS_issues_35344,"QGIS crashes when reading with browser from GRASS private mapset 

In the institution I am working we have QGIS version 3.10.2-A Coruña and GRASS GIS 7,8 installed in a linux server. This QGIS installation has also the GRASS plugin installed. But we have been having issues when trying to add a GRASS vector layer from the Qgis browser. If the vector layer is in the Permanent mapset then it goes well, we can add the layer from the Browser but not if the mapset is from a private mapset (the one own by the user). I have a mapset with my name and I can't add to the QGIS the GRASS data from my mapset, but I created a new mapset and under this is the Permanent mapset and from here I can browse the data. I have just problems with vector not with rasters. I am using a windows 10 machine and I connect to the server using X2GO. Here comes an example of a vector layer that was added from the permanent mapset without problems ![grass1](https://user-images.githubusercontent.com/11677890/77548731-396d0680-6eaf-11ea-9d53-88b1e3c7e476.jpg) Here comes an example of a raster layer added from a private mapset, and it went ok ![grass2](https://user-images.githubusercontent.com/11677890/77549881-ad5bde80-6eb0-11ea-9b60-24a589f59400.jpg) What could be the problem? Is this a bug?",Can you test?,Thanks for the feedback. I will have to ask IT to install it on the server to test it. I will come back with the testing results.
qgis/QGIS,https://github.com/qgis/QGIS/issues/35392,qgis_QGIS_issues_35392,"QGIS rejects a custom CRS (which works fine in Postgis/Proj)

I have a new CRS ratified by EPSG in late 2019 as EPSG::9191 It has not yet percolated into QGIS. I have been using this as a custom CRS with QGIS 2.18 OK, and it works with R & Postgis (also proj libraries), but it fails with QGIS 3.10 The proj definition is: +proj=aea +lat_1=-30 +lat_2=-50 +lat_0=-40 +lon_0=175 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs I have installed QGIS 3.10 and it rejects this definition - ""This proj projection definition is not valid"" and just says ERROR when testing it with 175/-40 (which should give the 0,0 coords that both QGIS v2.18 & Postgis v2.4 return - I have inserted it into Postgis spatial_ref_sys table as 27201) select ST_ASText(ST_Transform(ST_SetSRID(ST_MakePoint(175,-40),4326),27201)); (returns) POINT(0 0) I can't see why it is rejected by QGIS, but works with Proj, so I'm assuming there is some filter in QGIS which is broken. I have tried teh list for help, but got no replies so am filing it as a bug.",Which exact QGIS version is this? Which PROJ version?,"resolved in 3.5+ This CRS =EPSG: 9191 not yet in the QGIS database, but proj parameters are: +proj=aea +lat_1=-30 +lat_2=-50 +lat_0=-40 +lon_0=175 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"
qgis/QGIS,https://github.com/qgis/QGIS/issues/35524,qgis_QGIS_issues_35524,"QGIS crashed while uploading a geojson file

## User Feedback Crashed while uploading a geojson file (approx 2000 points as features). ## Report Details **Crash ID**: [bc6171c4b75132534ec4e8ca1e91ecf1c4dfc0ae]('https://github.com/qgis/QGIS/search?q=bc6171c4b75132534ec4e8ca1e91ecf1c4dfc0ae&type=Issues') **Stack Trace** <pre> geos::noding::snapround::MCIndexSnapRounder::computeVertexSnaps : geos::noding::snapround::MCIndexSnapRounder::computeVertexSnaps : GEOSEquals_r : OGRToOGCGeomType : OGRLayer::FilterGeometry : sqlite3_extension_init : QgsSqlExpressionCompiler::operator= : QgsAbstractFeatureIterator::nextFeature : QgsVectorLayerFeatureIterator::fetchFeature : QgsAbstractFeatureIterator::nextFeature : QgsVectorLayerLabelProvider::stopRender : QgsVectorLayerLabelProvider::stopRender : QgsMapRendererParallelJob::renderLayerStatic : QgsMapRendererParallelJob::renderingFinished : QgsImageOperation::overlayColor : QgsImageOperation::flipImage : QtConcurrent::ThreadEngineBase::run : QThreadPoolPrivate::reset : QThread::start : BaseThreadInitThunk : RtlUserThreadStart : </pre> **QGIS Info** QGIS Version: 3.10.2-A Coru�a QGIS code revision: d4cd3cfe5a Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 3.0.3 Running against GDAL: 3.0.3 **System Info** CPU Type: x86_64 Kernel Type: winnt Kernel Version: 10.0.18362",do you mean _loading_ in QGIS? If yes please attach the dataset here.,"@gioman , yes, sorry: I meant loading into QGIS. The dataset is deleted, I was making tests using the same filenames several times. Later I noticed that the dataset was corrupted (it was a geojson with which I was playing), but still I think QGIS should had warned (as it normally does) rather than crashing."
qgis/QGIS,https://github.com/qgis/QGIS/issues/35544,qgis_QGIS_issues_35544,"QGIS crashes when opening form / attribute table with reference relations

QGIS (3.10 LTR and 3.12 too) crashes immediately after opening the attribute table of postgis layers. The project (Layers, Froms, Relations) was generated by the plugin ""Model Baker"", but it not seems to be the origin of the problem. All the layers have 1 or multiple reference relations to other tables (with and without geometries), inherited from Postgis («Discover Relations») and allocated the relation reference to the particular attributes in the form. If I remove the reference relations in the form, QGIS doesn’t crash. I tested it on different PCs (Win 7 an Win 10) and clean QGIS profile, always the same problem. Also tried with GPKG-Layers -> same problem. With the same QGIS-project on QGIS 3.4, there is no problem with opening the attribute tables, but it's very slow. ## Report Details **Crash ID**: [4decdae32da027e9adbe864b9f07094543bbe996]('https://github.com/qgis/QGIS/search?q=4decdae32da027e9adbe864b9f07094543bbe996&type=Issues') **Stack Trace** <pre> QgsPostgresConn::PQgetResult qgspostgresconn.cpp:1402 QgsPostgresFeatureIterator::fetchFeature qgspostgresfeatureiterator.cpp:275 QgsAbstractFeatureIterator::nextFeature qgsfeatureiterator.cpp:68 QgsVectorLayerFeatureIterator::fetchFeature qgsvectorlayerfeatureiterator.cpp:416 QgsAbstractFeatureIterator::nextFeature qgsfeatureiterator.cpp:68 QgsFieldExpressionValuesGatherer::run qgsfeaturefiltermodel_p.h:63 QThread::start : BaseThreadInitThunk : RtlUserThreadStart : </pre> **QGIS Info** QGIS Version: 3.10.4-A Coru�a QGIS code revision: 10bc9f2ff2 Compiled against Qt: 5.11.2 Running against Qt: 5.11.2 Compiled against GDAL: 3.0.4 Running against GDAL: 3.0.4 **System Info** CPU Type: x86_64 Kernel Type: winnt Kernel Version: 6.1.7601",Do you have a chance to test this on a nightly build of QGIS 3.12 or master (installed via OSGEO4W)?,I testet it with 3.13.0-Master (eef58e6e4f) and QGIS does not crash. But there is always a Critical Error when I open a form: 2020-04-03T11:03:04 CRITICAL Qt : QLayout: Cannot add a null widget to QGridLayout/
qgis/QGIS,https://github.com/qgis/QGIS/issues/35673,qgis_QGIS_issues_35673,"Grib file makes QGIS unexpectedly ended

I begin with QGIS and GitHub, so please be kind. I add the plugin Crayfish in order to open grib file (I downloaded a gribfile using ECMWF API). When I want to open it in QGIS (DB manager>add a mesh), I obtain the following error message : Sorry :( It looks something unexpected happened that we didn't handle and QGIS ended unexpectedly. ![2](https://user-images.githubusercontent.com/47398882/78813792-d8285580-79cd-11ea-8a00-9e7dfe99c2a6.PNG)",Do you have an example file?,"Thank you for your answer. It seems that GitHub does not support grib format, so I cannot show you an example file. (But grib file could be downloaded for instance on ECMWF website). Actually I achieve to open data in QGIS using a netCDF file. I found help on this subject on this page : https://www.lutraconsulting.co.uk/blog/2017/11/02/working-with-climate-data-in-qgis/"
qgis/QGIS,https://github.com/qgis/QGIS/issues/35687,qgis_QGIS_issues_35687,"add grid values to points gives wrong results

**Describe the bug** I used from the processing toolbox the 'add grid values to points' function with as resampling option 'nearest neighbor', and with as input a point layer and a raster layer with integer values. The resulting column with raster values shows decimal numbers, not the exact integer raster value. When I run the function in SAGA directly, the column contains the exact raster values. **QGIS and OS versions** 3.12.1 on Windows (installed with Osgeo4W **Additional context** Log of function ---- C:\OSGEO4~1\bin>call saga_cmd shapes_grid ""Add Grid Values to Points"" -SHAPES ""C:/Users/brp/AppData/Local/Temp/processing_wjqTfe/6601327d6d9a43199caeead18a394363/SHAPES.shp"" -GRIDS ""C:/Users/brp/AppData/Local/Temp/processing_wjqTfe/6207aad29fad45aa94554d79463c8593/bio12.sgrd"" -RESAMPLING 0 -RESULT ""C:/Users/brp/AppData/Local/Temp/processing_wjqTfe/306d704010524140aed1ef0e445fc93a/RESULT.shp"" ____________________________ SAGA Version: 2.3.2 (64 bit) ____________________________ library path: C:\OSGEO4~1\apps\saga-ltr\modules\ library name: shapes_grid library : Grid Tools tool : Add Grid Values to Points author : O.Conrad (c) 2003 processors : 8 [8] ________________________ Load shapes: C:/Users/brp/AppData/Local/Temp/processing_wjqTfe/6601327d6d9a43199caeead18a394363/SHAPES.shp... Load grid: C:/Users/brp/AppData/Local/Temp/processing_wjqTfe/6207aad29fad45aa94554d79463c8593/bio12.sgrd... Parameters Points: SHAPES Grids: 1 object (bio12) Result: Result Resampling: Nearest Neighbour",Can you post the exact commands that you are running in native SAGA and compare with the ones in QGIS logs? Thanks.,"@gioman Thanks for looking at this. I am probably overlooking something, but from what I can see below, it looks like in both cases the same command is issued? **Saga** [2020-04-10/21:05:33] Executing tool: Add Grid Values to Points Parameters Points: testpoints Grids: 1 object (testraster) Result: Result Resampling: Nearest Neighbour **QGIS** tool : Add Grid Values to Points Parameters Points: SHAPES Grids: 1 object (testraster) Result: Result Resampling: Nearest Neighbour See attached image for attribute tables of point file generated by SAGA and by QGIS ![image](https://user-images.githubusercontent.com/7816789/79017284-3e011280-7b71-11ea-86bf-396a4cd838cf.png)"
qgis/QGIS,https://github.com/qgis/QGIS/issues/35767,qgis_QGIS_issues_35767,"DB manager: impossible to create a view in another schema than public

When you create a new view in a PostgreSQL from the DB Manager, it always creates it in the public schema even if you precise another schema. 1. Go to DB Manager 2. Use SQL query to create a view in another schema than public 3. The view is created in the public schema **QGIS and OS versions** QGIS version 3.10.4-A Coruña QGIS code revision 10bc9f2ff2 Compiled against Qt 5.11.2 Running against Qt 5.11.2 Compiled against GDAL/OGR 3.0.4 Running against GDAL/OGR 3.0.4 Compiled against GEOS 3.8.1-CAPI-1.13.3 Running against GEOS 3.8.1-CAPI-1.13.3 Compiled against SQLite 3.29.0 Running against SQLite 3.29.0 PostgreSQL Client Version 11.5 SpatiaLite Version 4.3.0 QWT Version 6.1.3 QScintilla2 Version 2.10.8 Compiled against PROJ 6.3.1 Running against PROJ Rel. 6.3.1, February 10th, 2020 OS Version Windows 10 (10.0) Active python plugins QgisModelBaker; qgis_resource_sharing; quick_map_services; vector_tiles_reader; db_manager; MetaSearch; processing",Can you confirm @lucienicolier?,"Yes it was about ""create view"" button. If you prefer it is a feature request, please change. Thanks"
qgis/QGIS,https://github.com/qgis/QGIS/issues/35908,qgis_QGIS_issues_35908,"Geometry Generator fails when creating feature. Then works after editing feature attributes. 

I'm using QGIS 3.12.1 on Win10 x64. I have also tried QGIS 3.10.5 on Win10 x64 **Overview** I have a point layer representing tree positions. I have a calculated field (""rpaR"") based on other attributes. I am using a data override to size the simple marker and a geometry generator to create a buffer (simple outline) around the marker. In the image below, the simple marker is arrowed red, and the simple outline from the geometry generator is arrowed blue. ![ptStyle](https://user-images.githubusercontent.com/57039094/79919502-7680d600-8426-11ea-997c-68bb7bb7323b.jpg) When I create a point, the geometry generator styling is not displayed. If I then edit that point, changing any attribute, it works. **DETAIL** In the drag and drop form designer, the default value for ""rpaR"" is as follows: `( if(""dbh1"" is null,0,(""dbh1"" / 1000)^2 * ""stems1"") + if(""dbh2"" is null,0,(""dbh2"" / 1000)^2 * ""stems2"") + if(""dbh3"" is null,0,(""dbh3"" / 1000)^2 * ""stems3"") + if(""dbh4"" is null,0,(""dbh4"" / 1000)^2 * ""stems4"") + if(""dbh5"" is null,0,(""dbh5"" / 1000)^2 * ""stems5"") )^0.5` As image below. ![layerproperties_form_rpaR_defaultvalue](https://user-images.githubusercontent.com/57039094/79919577-8f898700-8426-11ea-8096-f9b2629f4cb7.jpg) I note the text tip below the default value field sometimes reads ""column 'dbh1' not found"". But I think this is symptomatic of the same issue because when you inspect the ""rpaR"" field, the expected value is there. The simple marker field is as below, with the size set to the value of ""rpaR"" using the data override ![layerproperties_symbolselector_simplemarker](https://user-images.githubusercontent.com/57039094/79919902-26eeda00-8427-11ea-891d-8ed10880eb41.jpg) The geometry generator is as below: ![layerproperties_symbolselector_geometrygenerator](https://user-images.githubusercontent.com/57039094/79919937-30784200-8427-11ea-8924-3176f3eda977.jpg) **To Reproduce** I attach an example project with the bug. [example-bug.zip](https://github.com/qgis/QGIS/files/4512913/example-bug.zip) 1. Add point feature to layer ""atl_qf_tree_pt"" 2. Enter data. Only need to fill in the following fields: ""DBH1"" (in DIMS tab, and ""amenity"" on ASSESS tab). 3. After creating a feature, the simplemarker is missing (should be at red arrow in image below). and The geometry generator is also missing. The label is visible. ![ptFeature_missing symbology](https://user-images.githubusercontent.com/57039094/79920655-7eda1080-8428-11ea-8668-62e042646445.jpg) 4. After editing any attribute of the feature missing symbology (simplemarker and geometry generator)are displayed correctly. ![ptFeature_with symbology](https://user-images.githubusercontent.com/57039094/79920931-1e979e80-8429-11ea-8caa-ae7209e14605.jpg)","Can you try to make a minimum example that demonstrates the issue, removing as much of the complexity to reproduce as possible?","Hi Matthias. I thought I had done this. I attached a zip file of a simplified project, 1 layer, with the relevant styling, and steps on how to reproduce. What am I not doing that I should?"
qgis/QGIS,https://github.com/qgis/QGIS/issues/36048,qgis_QGIS_issues_36048,"Loss of contour data when using 'Rasterize'

**Describe the bug** A shapefile showing contour data was produced. This showed the legend for the contour lines and also the zero/datum line (zero). When rasterized the zero datum line was missing, also the legend for the contour lines. **How to Reproduce** Add the spatialite database to the project. The connection to the data has been established. 'Right-Click' on the 'soundings' layer to save a Shapefile. 'Export' 'Save Features As...' 'Right-Click' again on the Shapefile. 'Zoom to Layer' shows you the location of the soundings. This demonstrates the density of soundings required if contouring is going to be successful. The survey lines are about 10 metres apart. Select 'Vector','Contour' from the menu at the top of the screen. The input is the shapefile of soundings. 'depth' is the data value. If you go through the list of options and set things up correctly QGIS will work out min/max depth and you can choose a suitable contour interval. I needed to play with the number of contours but eventually a list appeared in the text box. It is possible to apply colours but probably better to use a single colour. The contours appear. To make the contours display better 'Right-Click'. Black will show the contours best. We now add labels to the contours. 'Properties' The shapefile is in vector format. It has to be converted to raster before it can be exported as a geotiff. **Raster output is shown. Some of the contours are faded but that will not affect their display. Unfortunately contour labels disappear. Also the datum line (0)** ![13](https://user-images.githubusercontent.com/2537240/80456878-3ccc3580-8926-11ea-912f-31f90fd136cd.png) ![19](https://user-images.githubusercontent.com/2537240/80456877-3ccc3580-8926-11ea-9be6-8927d1fba3e3.png) **QGIS and OS versions** ![qgis](https://user-images.githubusercontent.com/2537240/80457575-718cbc80-8927-11ea-8b5e-66c89d777390.png) **Additional context** Shapefile before rasterizing is here ... (Remove the .pdf) [dandy.hole.shp.pdf](https://github.com/qgis/QGIS/files/4543946/dandy.hole.shp.pdf) Brilliant program.",Should that be somewhere in Wales?,@gioman Somewhere in Cornwall!!! The OpenCPN plugin uses EPSG:3395 for data collection. When rasterized I change the CRS to EPSG:4326 for export to GeoTiff. I will play with the nodata value. Appeciate the help. Thanks.
qgis/QGIS,https://github.com/qgis/QGIS/issues/36167,qgis_QGIS_issues_36167,"Feature creation very slow when using joins

**Describe the bug** When creating features on a layer that has vector joins, qgis takes more than 40 seconds (with form opening enabled) and 10s (hiding form) with a point layer with 15k features with a postgresql source on localhost. This makes qgis edition unusable when there are a large number of features (60k on a real dataset). **How to Reproduce** Create a postgis database using the following commands:  Create a feature on point_layer using the [attached qgis project](https://github.com/qgis/QGIS/files/4575311/form_join_performance.zip) (which assumes that the db is running on port 5432 on localhost with user postgis and password postgis). In this project the join is already made. This should take a long time to complete. **QGIS and OS versions** QGIS version | 3.10.5-A Coruña | QGIS code branch | Release 3.10 -- | -- | -- | -- Compiled against Qt | 5.9.5 | Running against Qt | 5.9.5 Compiled against GDAL/OGR | 2.2.3 | Running against GDAL/OGR | 2.2.3 Compiled against GEOS | 3.6.2-CAPI-1.10.2 | Running against GEOS | 3.6.2-CAPI-1.10.2 4d2925d6 Compiled against SQLite | 3.22.0 | Running against SQLite | 3.22.0 PostgreSQL Client Version | 10.12 (Ubuntu 10.12-0ubuntu0.18.04.1) | SpatiaLite Version | 4.3.0a QWT Version | 6.1.3 | QScintilla2 Version | 2.10.2 PROJ.4 Version | 493 OS Version | Ubuntu 18.04.4 LTS Active python plugins | processing; db_manager; MetaSearch QGIS version | 3.12.2-București | QGIS code revision | 8a1fb33634 -- | -- | -- | -- Compiled against Qt | 5.9.5 | Running against Qt | 5.9.5 Compiled against GDAL/OGR | 2.2.3 | Running against GDAL/OGR | 2.2.3 Compiled against GEOS | 3.6.2-CAPI-1.10.2 | Running against GEOS | 3.7.1-CAPI-1.11.1 27a5e771 Compiled against SQLite | 3.22.0 | Running against SQLite | 3.22.0 PostgreSQL Client Version | 10.12 (Ubuntu 10.12-0ubuntu0.18.04.1) | SpatiaLite Version | 4.3.0a QWT Version | 6.1.3 | QScintilla2 Version | 2.10.2 PROJ.4 Version | 493 OS Version | Ubuntu 18.04.4 LTS Active python plugins | processing; db_manager; MetaSearch **Additional context** When trying to find out what the problem was I noticed that qgis makes a lot of repeated queries when doing a feature creation. This seems to cause the delay as it gets completely unusable when connecting to a remote postgres db. [Here](https://github.com/qgis/QGIS/files/4575326/queries_log.txt) is the queries made on a single feature creation with the form enabled. This problem was already submitted on [stack exchange](https://gis.stackexchange.com/questions/360171/adding-feature-to-postgis-layer-that-has-joins-is-really-slow) and [qgis-users mailing list](https://lists.osgeo.org/pipermail/qgis-user/2020-May/045547.html).",Can you please attach the dump (with data) of the two tables?,"@gioman Olá, [Attached](https://github.com/qgis/QGIS/files/4579878/join_tables.zip) is the full db dump. We haven't tested the joins with other data sources."
qgis/QGIS,https://github.com/qgis/QGIS/issues/36195,qgis_QGIS_issues_36195,"Change data source of an attribute table frame with data-defined override button

**Context** Switch data source of an attribute table frame in a composer with data-defined override button to take into account if a layer's name changed. **Description** In a composer build with an attribute table frame, data-defined override button don't apply when trying to change the data source. As documentation specify, data-defined override button allows to dynamically change the layer which is used to populate the table, but changes are not applied. The source layer reference in the main drop-down list stays persistent, even if `@layer_name` or `@layer_id` are changed in expression builder. Same behaviour observed with Geopackages and Shapefiles. _Expressions tryed to define an other source layer (e.g myLayer_1 and myLayer_2) :_ `'myLayer_2'` `@layer_name = 'myLayer_2'` _Expressions tryed to switch between two layers (e.g myLayer_1 and myLayer_2) :_ `@layer_name = coalesce('myLayer_1','myLayer_2')` `coalesce(layer_property('myLayer_1','name'),layer_property('myLayer_2','name'))` If it's not a bug, may documentation needs to be more explicit and provides a syntax example ? **How to reproduce** - Create a project with 2 data sources - Create a composer - Add an attribute table frame - Switch data source to an other layer with data-defined override button **QGIS and OS versions** 3.10.2-A Coruña Windows 10 Professional **Additional context** Documentation : https://docs.qgis.org/3.10/en/docs/user_manual/print_composer/composer_items/composer_attribute_table.html#main-properties Source issue : https://gis.stackexchange.com/questions/360482/qfield-display-attributes-table-frame-in-pdf-with-editing-offline-mode",Do you confirm it's your case? The feature implementation PR is at #6530.,"Hi, yes it is. In my case my layers have exactly the same fields. I tried with basics ""tests"" layers wich only have and id(integer) field and a name(varchar) field."
qgis/QGIS,https://github.com/qgis/QGIS/issues/36211,qgis_QGIS_issues_36211,"No CRS detected on all GPKG and Raster data except SHP

<!-- Bug fixing and feature development is a community responsibility, and not the responsibility of the QGIS project alone. If this bug report or feature request is high-priority for you, we suggest engaging a QGIS developer or support organisation and financially sponsoring a fix Checklist before submitting - [ ] Search through existing issue reports and gis.stackexchange.com to check whether the issue already exists - [ ] Test with a [clean new user profile](https://docs.qgis.org/testing/en/docs/user_manual/introduction/qgis_configuration.html?highlight=profile#working-with-user-profiles). - [ ] Create a light and self-contained sample dataset and project file which demonstrates the issue --> <!-- A clear and concise description of what the bug is. --> Hi! I've upgraded my laptop from Fedora 31 to Fedora 32 a week ago. And after that QGIS (3.12.2) stop reading CRS from my polygon and raster in my geopackage file, even tho DB Manager read it just fine. I have to manually set every layer crs from invalid to the right CRS (in my data i use WGS84 and WGS84 UTMZone 49). I have tried using all .gpkg file and raster that i have and none of their crs can be read on my qgis. Funny thing is qgis read crs from shp just fine. I have tried reinstaling, changing user profile, deleting all QGIS related file (cache, config), installing LTR (3.10.5), and installing flatpak version. but none of it works. qgis just stop reading crs. ![image](https://user-images.githubusercontent.com/19585925/81092781-57586d00-8f2b-11ea-900d-bb101a248fed.png) As you can see, DB Manager read crs from my gpkg file just fine, but in layer panel qgis not detecting any crs, and those two data should overlap each other but they dont here because qgis not detecting any crs. I have tried reading my data in my other laptop (Kde Neon, based on Ubuntu 18.04) with the same qgis version (3.12.2) and it reads crs just fine.",How did you install qgis?,"Hi, i install it from qgis copr (dani/qgis) that listed on https://www.qgis.org/en/site/forusers/alldownloads.html#fedora Additionally, i tried the LTR and flatpak version (both from link above) too but still get the same results"
saltstack/salt,https://github.com/saltstack/salt/issues/858,saltstack_salt_issues_858,"Feature request: make ""__returner__"" declareable in modules

I think would it be good to make ""default returner"" declareable in modules. Same concept as with the already implemented ""__outputter__"" dict. Reasonable feature ?",What is the functional aspect here?,"Yes, basically i want a module to always return to a specific returner. So, i dont always have to specify the ""--return"" cli option to the salt command. Because with growing number of custom modules, returners im sure i would ""forget"" which returner is ""responsilble"" for which module. In addition when using salt-call (eg: from a cronjob) on the minion its not even possible to specify ""--return""."
saltstack/salt,https://github.com/saltstack/salt/issues/696,saltstack_salt_issues_696,"reload states, grains, etc. during load_dynamic()

call_highstate() calls load_dynamic(). load_dynamic() calls saltutil.sync_all(), which pulls down all the extensions (<env>/_grains, <env>/_states, etc.). load_dynamic() then calls State.module_refresh(), which only reloads the modules. It would be a big help if load_dynamic could make sure all the extensions were reloaded and not just the modules.",What version are you on? Only the grains are not being reloaded in the state context (I am looking at how to cleanly add it),"Yeah, but if sync_all() just pulled down some new grains, then the grains should be reloaded. I bring it up because this happened to me (and I had to run state.highstate twice any time I messed with a custom grain). I imagine this is the case for any of the extensions that don't get reloaded during module_refresh(). In my case it was custom grains. So, either module_refresh should expand its role, or load_dynamic() should call an additional function that also reloads the extensions not caught by module_refresh()."
saltstack/salt,https://github.com/saltstack/salt/issues/3384,saltstack_salt_issues_3384,"doc build error on auth import

just a small annoyance to fix. ",What version of docutils are you running? I think this is a docutils issue,would appear I have 0.8.1
saltstack/salt,https://github.com/saltstack/salt/issues/9739,saltstack_salt_issues_9739,"Minion fails with TypeError after Update to 0.17.4

After the system-wide Update to 0.17.4 (we use the Ubuntu-PPA) the state.highstate fails with an Traceback: ","Does it work if you run it from the master? Doesn't look like it's a masterless minion, as you don't have `--local` on the command.",A colleague of mine just found out that the problem was on the master server. The faulty tool is python-git which has issues with GPG-signed commits. (see gitpython-developers/GitPython#57) The on the top described fix removed the problems within salt. Thanks for trying to help.
saltstack/salt,https://github.com/saltstack/salt/issues/11263,saltstack_salt_issues_11263,"[Feature Request] Handle lists for unless and onlyif conditions.

I ran into an issue last night when checking unless and onlyif conditions against cmd.run and cmd.wait. onlyif and unless take one object, according to @gtmanfred For example, this works:  The code handling this is here: https://github.com/saltstack/salt/blob/develop/salt/states/cmd.py#L291",Can you check if the above pull request works? It is working in my limited testing of cmd.run,"@gtmanfred - trying to upgrade from this mentioned git repo, but getting some errors. You're using python 2.7, right? "
saltstack/salt,https://github.com/saltstack/salt/issues/12196,saltstack_salt_issues_12196,"Issue with cmd.script module (BUG)

Looks like ~~#10640~~ (that issue appears to not be at fault) may have broken functionality in the cmd.script module and the `runas` parameter (see: http://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.cmdmod.html#salt.modules.cmdmod.script). For example:  Issue is here I believe: https://github.com/saltstack/salt/blob/develop/salt/modules/cmdmod.py#L1051",Did you forget to edit this issue?,"I did. Apologies, @basepi But, It's worth mentioning that if you have a state.sls file that creates a user first, the cmd.script complains that the user doesnt exist.  It might be good to add a feature whereby you can set a requirement on modules execute in state files. Thoughts on that?"
saltstack/salt,https://github.com/saltstack/salt/issues/12476,saltstack_salt_issues_12476,"Issue when including sls file as requirement  [BUG, Minor]

I noticed this a few days ago. If I attempt include anything other than an init sls requirmement in a state, I must put the full path to the sls I'm including. For example: supervisor/init.sls:  I should be able to just include `sls: supervisor` and have it follow the includes in my `supervisor/init.sls` file. Probably a minor bug, but worth bubbling up.",Does that work if you add something similar to supervisor/common.sls or supervisor/init.sls?,@basepi I don't believe so. (Not since 2014.1 when I first noticed it) master  This is definitely similar to #10852. So I'm not sure if you want to close my issue as a duplicate or not. -Allan
saltstack/salt,https://github.com/saltstack/salt/issues/12913,saltstack_salt_issues_12913,"Missing broadcast option for states/network -> modules/debian_ip

In network state the broadcast option will not be set (Version 2014.1.4) On line 951 (current line 956) in modules/debian_ip.py the option is not listed:  It is already in the templates/debian_ip/debian_eth.jinja",Would you mind submitting a pull request?,Pull request is applied.
saltstack/salt,https://github.com/saltstack/salt/issues/13332,saltstack_salt_issues_13332,"can not restart 

can not restart centos 6 if run /etc/init.d/salt-master restart,the system locked.must ctrl+c log write [salt.client ][ERROR ] Salt request timed out. If this error persists, worker_threads may need to be increased",What version of salt are you using? Are you using the init files provided with salt?,"salt version is salt 2014.1.4。becouse i can not restart is,so i remove it and yum install is again .but it can not work now.It is strange that a day before he is normal"
saltstack/salt,https://github.com/saltstack/salt/issues/13981,saltstack_salt_issues_13981,"adding users in group

on salt master i create this state: ",Does anything change if you change the order of the users so that `three` is not last? Just trying to figure out what might be going on.,"Yes, only last user in state, is not add in `/etc/group-`, but add in `/etc/group`"
saltstack/salt,https://github.com/saltstack/salt/issues/26729,saltstack_salt_issues_26729,"Why I am getting multiple responses from minions?

I got the first response of all minions in valid json string but then I am getting three another different responses from same minions which are invalid json strings. ",What version of salt is your master running? I have tried this on recent versions of salt and got the expected output of a single json map.,My Salt-stack version and processes. 
saltstack/salt,https://github.com/saltstack/salt/issues/31047,saltstack_salt_issues_31047,"file.copy reports failed even when file was copied on ZFS

From the sls file:  This also applies with `force: true` enabled. On the next run salt reports all states as succeeded so it only behaves faulty when it applies the file.copy change. This happens with Proxmox 4.1/Debian Jessie on ZFS.","What version of salt are you using? Also, will you post the minion debug log for the time when this state first runs (copies the file)?",Versions: Minions: salt-call 2014.1.13 (Hydrogen) and salt-call 2015.8.5 (Beryllium) Master: salt 2015.8.4 (Beryllium) Debug output I will attach tonight or over the weekend.
saltstack/salt,https://github.com/saltstack/salt/issues/31974,saltstack_salt_issues_31974,"run ""salt-cloud -p vm salt_test_05 "" was throwed the AttributeError.

when i run `salt-cloud -p vm salt_test_05` in the salt master ,it throwed the `AttributeError: 'NoneType' object has no attribute 'key'` ### This is debug messages: ",What version of salt are you using?,@jfindlay Here's my version: 
saltstack/salt,https://github.com/saltstack/salt/issues/34458,saltstack_salt_issues_34458,"Salt consul pillar list of dicts

It's unclear from the docs how to create a pillar in Consul that features a list of dicts (or whether this is even possible). For example, in an SLS file I could write: ",Could you clarify or provide a clear test case? Are you attempting to use the consul external pillar? Thanks ahead of time for any additional clarification,"@Ch3LL so in an SLS file it is possible to define a pillar like this:  which is dict where the value at `parent1` is a list of k/v pairs. However, because of how the Consul external pillar module uses the key/value store hierarchy to represent different data structures, it appears that the above data structure is impossible to achieve using the Consul external pillar, thus rendering it unsuitable for a number of valid use cases. The reason for this is that dictionaries are represented by sub-keys in the key/value store, in a tree like structure and list items are represented as newlines in the value of a key. However, since you cannot define a dict within the value of a key, it is impossible to have a list of key/value pairs, which is the format used by a large number of salt formulas and states."
saltstack/salt,https://github.com/saltstack/salt/issues/34863,saltstack_salt_issues_34863,"Unable to import salt utils in custom modules

### Description of Issue/Question I have copied the test.py module from /usr/lib/python2.7/dist-packages/salt/modules and pasted it in /srv/salt/_modules with a different name. when i run salt '*' saltutil.sync_all, the output lists the module to be copied from salt master to salt minion but when i run the command it fails with unable to load module which can be seen in the minion log file.  ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) `root@vmSaltStackMaster:/srv/salt/_modules# salt --versions-report Salt: 2015.5.3 Python: 2.7.11 (default, Dec 15 2015, 16:46:19) Jinja2: 2.8 M2Crypto: 0.21.1 msgpack-python: 0.4.6 msgpack-pure: Not Installed pycrypto: 2.6.1 libnacl: Not Installed PyYAML: 3.11 ioflo: Not Installed PyZMQ: 14.0.1 RAET: Not Installed ZMQ: 4.0.4 Mako: 0.9.1 Tornado: 4.2.1 root@vmSaltStackMaster:/srv/salt/_modules#`",Would you mind updating to 2015.8.10 and seeing if it works?,"Many Thanks for the update, i will certainly upgrade my version and will try running the module. I will update with the status."
saltstack/salt,https://github.com/saltstack/salt/issues/36316,saltstack_salt_issues_36316,"Windows service should have delayed start set

### Description of Issue/Question When you use windows installer it creates a service with the startup type set to ""Automatic"", but it really should be ""Automatic (Delayed Start)"" in almost all use cases (this is IMO of course). At the very least, the installer should provide the option to use this startup type so we don't have to set it ourselves. I've got my own installer script and in powershell I'm doing  I think that works (but it hasn't been fully tested). Anyway @twangboy do you think you could get the installer to do whatever is necessary automatically? Once again I have no proof of anything but I think that starting the minion too soon may be a source or problems when we try to install certain software as part of highstate, and this may be resolved by simply using ""Delayed Start"" and that should be on by default anyway (IMO).",can i get your thoughts here @twangboy ? whats your thoughts on setting this default or maybe supplying ti as an install option? thanks,"@damon-atkins, I don't know a heck of a lot about Windows. It just seemed that use of delayed start was solving a problem that I think others might have, and by looking at the types of services that used delayed start it seemed to be that it would be the most appropriate choice to use. If instead it makes more sense to not use delayed start and set up dependencies then I accept that (if it's true). At any rate could you advise @twangboy on what you think the most appropriate choices are for the salt minion? (Standard start with no dependencies [or whatever the presente dependencies are] doesn't seem right to me and that's my overall point.)"
saltstack/salt,https://github.com/saltstack/salt/issues/37582,saltstack_salt_issues_37582,"dockerng.running fails on memory: 256M

### Description of Issue/Question Using memory: 256M in dockerng.running triggers an error with and without test=true ### Setup  ### Versions Report salt-master --version salt-master 2016.3.4 (Boron) salt-minion --version salt-minion 2016.3.4 (Boron) running debian 8",Does it work if you remove the quotes in `memory_swap`?,Correct - my bad.
saltstack/salt,https://github.com/saltstack/salt/issues/38302,saltstack_salt_issues_38302,"salt-minion 2016.11.* does not start as service on Windows 2008R2

### Description of Issue/Question Salt-minion 2016.11.0 and 2016.11.1 does not start as service on 2008R2. When launched using `c:\salt\salt-minion.bat` or `c:\salt\salt-minion-debug.bat`, the minion connects to master without any noticeable issue. When launched via Windows Services, minions don't connect at all. When activating debug on the salt-minion, it starts logging when launched manually, doesn't start logging at all when launched via Windows Services (despite Windows Services panel indicated that it is started). ### Setup Standard salt-minion AMD64 setup (barebone). ### Steps to Reproduce Issue - Install Salt-Minion 2016.11.0 or 2016.11.1 on Windows 2008R2. - Try to start as service. ### Versions Report Master version: ","Do you have Microsoft Visual C++ 2008 x64 SP1 installed? You will need that for Windows 2008, it is no longer needed for 2012 and 2016.","I don't think this is the issue: I can start salt-minion, it works just fine, but it won't run as a service on the server, that's all. I'll check that as well, you never know."
saltstack/salt,https://github.com/saltstack/salt/issues/42897,saltstack_salt_issues_42897,"CP.PUSH not coping files if run multiple times with in short interval

### Description of Issue/Question Hi , I am trying to cp.push few small files with size 20KB to 40KB which are generated by some script . While I execute cp.push command multiple times with in 60 second interval then cp.push works sometimes and sometimes not coping files. As per my script after file is generated cp.push should copy file from minion /opt/ to salt master minion cache. It works for first time and not working if cp.push called frequently within few seconds ( 60 secs interval ) ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) I have salt-master and minion . I am trying to use salt-call cp.push command from minion to salt-master minion cache directory in each 60 seconds . ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2017.7.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8.1 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (default, Jul 12 2017, 17:32:34) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: centos 6.9 Final locale: UTF-8 machine: x86_64 release: 2.6.32-696.6.3.el6.x86_64 system: Linux version: CentOS 6.9 Final","Can you provide a docker container or vagrant file so that I could replicate this? Thanks, Daniel","Hi Daniel, I think it is fixed now. When I am trying to copy a single file then it is working fine. Single file means I just define a variatble file1=/tmp/a.txt file2=/tmp/b.txt . but I was trying to use cp.push with /tmp/logs/* which sometimes copy file sometimes not. I believe the use of ""*"" is not the proper way. I moved back to single file. Is there a better way to use cp.push for multiple files under a directory like /tmp/logs/*"
saltstack/salt,https://github.com/saltstack/salt/issues/43055,saltstack_salt_issues_43055,"Salt version salt 2017.7.1 (Nitrogen) give garbage output for Vault command output  

### Description of Issue/Question We are using salt state for checking Vault status which returns status as sealed or unsealed. For latest version we are getting ""2"" is added with stdout . Changes: ---------- pid: 3015 retcode: 0 stderr: stdout: ?[H?[JUNSEAL_STATUS:unsealed we are using shell script to get the status with grep and sed the special characters before unsealed. grep 'UNSEAL_STATUS' | sed -e 's/[[?HJ2]//g' | sed -e 's/^[[:space:]]*//' -e 's/[[:space:]]*$// here you can see we need to sed **H?J2** and other space . ""2"" was not coming for previous version ( 2017.7.0 ) but it is coming as extra character on latest version 2017.7.1 (Nitrogen) ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) salt master and minion . both are 2017.7.1 version ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",Can you please share the state so I can try to reproduce the behavior?,"we have nothing fancy . Just calling a shell script cat vault-status.sls ========================= /root/OSCFL/vault-operation: file.recurse: - name: /root/OSCFL/vault-operation - source: salt://appdir/vault/OSCFL/vault-operation - makedirs: True - user: root - group: root - failhard: True /root/OSCFL/vault-operation/vault-status.sh: file.managed: - name: /root/OSCFL/vault-operation/vault-status.sh - user: root - group: root - mode: 744 - require: - file: /root/OSCFL/vault-operation - failhard: True {% set current_path = salt['environ.get']('PATH', '/bin:/usr/bin') %} run_vault-status: cmd.script: - name: /root/OSCFL/vault-operation/vault-status.sh - args: """" - env: - VAULT_ADDR: http://127.0.0.1:8200 - PATH: {{ [current_path, '/opt/vault']|join(':') }} - require: - file: /root/OSCFL/vault-operation/vault-status.sh - failhard: True"
saltstack/salt,https://github.com/saltstack/salt/issues/43071,saltstack_salt_issues_43071,"salt-cloud with Azure integration issue 

### Description of Issue/Question I am trying to integrate saltcloud 2017.7.1 with Azure cloud by following the document https://docs.saltstack.com/en/latest/topics/cloud/azure.html . I am getting multiple issue starting from Azure driver. Could you please confirm if salt-cloud is already tested with Azure and any final productive version of document available for error free installation. I have installed all requirements for Azure like Azure sdk , openssl , certificate , pip . also made pip install azure and it is upgraded . ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) I am following the similar configuration file structure as per saltstack document Error [root@sa-lab cloud.profiles.d]# salt-cloud -p azure-ubuntu newinstance [WARNING ] Missing dependency: 'azure'. The azure driver requires 'azure' to be installed. [WARNING ] The cloud driver, 'azure', configured under the 'my-azure-config' cloud provider alias, could not be loaded. Please check your provider configuration files and ensure all required dependencies are installed for the 'azure' driver. In rare cases, this could indicate the 'azure.get_configured_provider()' function could not be found. Removing 'azure' from the available providers list [ERROR ] There was a profile error: 'my-azure-config' ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",Can you please provide the output from salt --versions-report and confirm that you have the Python Azure libraries installed? Thanks.,I think I had issues on Centos for installing Azure SDK. I will try it again on a Ubuntu VM. It seems Azure SDK works fine on Ubuntu without many errors. For now I am resolving this issue.
saltstack/salt,https://github.com/saltstack/salt/issues/47269,saltstack_salt_issues_47269,"Reopen Windows Minion That Has IAM Role Cannot Access to S3

### Description of Issue/Question I reopened this #47176 issue because the thing @gtmanfred mentioned actually works. In addition to following screenshots from earlier I can also access the file and download it by running Python Boto modules directly from the Windows machine. gtmanfred's SS: I don't know it was typo or intentional to show me 404 but your IAM role is ""gttest"". Instead ""gtest"" is written at the end of second request. ![](https://user-images.githubusercontent.com/732321/39003125-d1ba4f96-43bf-11e8-8dab-ac7e388b8df5.png) **My SS:** ![](https://user-images.githubusercontent.com/37999536/39032803-cb153012-4477-11e8-956e-50175baeb2cb.JPG) Trying to download a file from AWS S3 to my Windows minion (IAM role is attached) but it says I can get the file by declaring s3.keyid and s3.key in minion config file but I need to do it via IAM Role. BTW I also can access to the file using the same IAM role on **Linux minions** (they are both ubuntu and one of them is my master/minion called ""salt-master-minion"") . [Related Doc](https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.s3.html) This page says you have to do _no additional configuration_ for IAM method to work. That's true for only Linux minions in my case. ### Setup **Minion Config** `master: master's-private-ip` ### Steps to Reproduce Issue The command I'm trying to run: `salt 'miniwin' s3.get mybucket index.html local_file=""C:\index.html -l trace` Tracelog ","Can you try just `s3.get` without any arguments and see if it can list buckets? Thanks, Daniel","![winsalt2](https://user-images.githubusercontent.com/37999536/39229874-165bb822-486d-11e8-9e44-ca26d8b7365c.JPG) My instance and bucket are in Canada but as you stated I put this ""s3.location: us-east-1"" in minion conf file so it can get the list. No idea why I'm still getting this only on Windows."
saltstack/salt,https://github.com/saltstack/salt/issues/47675,saltstack_salt_issues_47675,"mine.update doesn't update the salt mine when called with module.run

### Description of Issue The salt mine is not updated when `mine.update` is called with `module.run`. Calling `mine.update` directly with `salt-call` updates the data in the salt mine, though. ### Setup 1. Configure the minion you're testing with to use a newer version of `module.run` by putting the following lines into the minion configuration file (usually `/etc/salt/minion`):  ## Additional Information It appears that calling `mine.send` with `module.run` in a state file fails to update the salt mine in a similar fashion. However, to keep the length of this issue report within the limits of ""readable"", I left the details concerning `mine.send` out of it as I am fairly certain that fixing one will result in both getting fixed.",maybe wipe out the cache?,"I left out a _crucial_ bit of information, namely the version of `module.run` being used. This occurs _only_ when `module.run` uses the new version of it. I updated the description of the original ticket to include the details. The description now has 8 instead of 7 steps."
saltstack/salt,https://github.com/saltstack/salt/issues/51639,saltstack_salt_issues_51639,"salt jira.create_issue returning text: Field 'priority' cannot be set. It is not on the appropriate screen, or unknown.

 Salt Version: Salt: 2018.3.3 Dependency Versions: cffi: 1.11.5 cherrypy: Not Installed dateutil: 2.4.2 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.10 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.19 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Dec 4 2017, 14:50:18) python-gnupg: 0.3.8 PyYAML: 3.13 PyZMQ: 17.1.2 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.2.5 System Versions: dist: Ubuntu 16.04 xenial locale: ISO-8859-1 machine: x86_64 release: 4.4.0-124-generic system: Linux version: Ubuntu 16.04 xenial",Do you have the jira python library installed on the minion that your attempting to run the jira Salt module?,"@garethgreenaway yes i do, when i when to the minion and ran` sudo pip install jira` the requirements were already met. "
saltstack/salt,https://github.com/saltstack/salt/issues/51924,saltstack_salt_issues_51924,"multiple reactors for one event 

can you use multiple reactors for one event? is that possible? here is my reactor config and its not working. but individually they all work ",Did you restart the salt-master after adding all of them?,@gtmanfred yes and only one of the reactors will run. for example the exact order above isnt folllowed. it skips test email and send the test slack.
saltstack/salt,https://github.com/saltstack/salt/issues/618,saltstack_salt_issues_618,"Traceback when managing service on FreeBSD

I get the following on occasion when running 'salt-call state.highstate' on one of my FreeBSD servers (jailed). I can re-run the command and it'll exit successfully, but periodically I get this Traceback in the same place. ...[snip]... [INFO ] No changes made for nginx [INFO ] Executing state service.watcher for nginx [INFO ] Executing command ps auxwww | grep nginx | grep -v grep | awk '{print $2}' in directory /root Traceback (most recent call last): File ""/usr/local/bin/salt-call"", line 21, in <module> main() File ""/usr/local/bin/salt-call"", line 17, in main client.run() File ""/usr/local/lib/python2.7/site-packages/salt/cli/**init**.py"", line 633, in run caller.run() File ""/usr/local/lib/python2.7/site-packages/salt/cli/caller.py"", line 99, in run ret = self.call() File ""/usr/local/lib/python2.7/site-packages/salt/cli/caller.py"", line 39, in call _self.opts['arg'] File ""/usr/local/lib/python2.7/site-packages/salt/modules/state.py"", line 79, in highstate return st_.call_highstate() File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 1000, in call_highstate return self.state.call_high(high) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 695, in call_high ret = self.format_verbosity(self.call_chunks(chunks)) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 531, in call_chunks running = self.call_chunk(low, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 669, in call_chunk ret = self.call(low) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 515, in call ret = self.states[cdata['full']](_cdata['args']) File ""/usr/local/lib/python2.7/site-packages/salt/states/service.py"", line 285, in watcher changes = {name: **salt**['service.restart'](name)} File ""/usr/local/lib/python2.7/site-packages/salt/modules/service.py"", line 69, in restart cmd = os.path.join(grainmap[**grains**['os']], KeyError: 'FreeBSD'","How are services managed on FreeBSD? Is the path /etc/init.d, or is it /etc/rc.d?",core services are managed in /etc/rc.d/ while user-installed services are managed in /usr/local/etc/rc.d/.
saltstack/salt,https://github.com/saltstack/salt/issues/703,saltstack_salt_issues_703,"RuntimeError: maximum recursion depth exceeded in cmp

[root@alpha ~]# salt-call state.highstate [INFO ] Loading fresh modules for state activity [INFO ] Loading fresh modules for state activity [INFO ] Executing state file.managed for /etc/hosts [INFO ] No changes made for /etc/hosts [INFO ] Executing state file.managed for /etc/localtime [INFO ] No changes made for /etc/localtime [INFO ] Executing state file.managed for /etc/make.conf [INFO ] No changes made for /etc/make.conf [INFO ] Executing state file.managed for /etc/resolv.conf [INFO ] No changes made for /etc/resolv.conf [INFO ] Executing state file.managed for /root/.bash_profile [INFO ] No changes made for /root/.bash_profile [INFO ] Executing state file.managed for /root/.bashrc [INFO ] No changes made for /root/.bashrc [INFO ] Executing state file.managed for /root/.vimrc [INFO ] No changes made for /root/.vimrc [INFO ] Executing state file.managed for /usr/local/etc/apache22/httpd.conf [ERROR ] No changes made for /usr/local/etc/apache22/httpd.conf [ERROR ] No changes made for /usr/local/etc/apache22/httpd.conf [INFO ] Executing state file.managed for /usr/local/etc/apache22/sites.d/vhost1.conf [INFO ] No changes made for /usr/local/etc/apache22/sites.d/vhost1.conf [INFO ] Executing state file.managed for /usr/local/etc/apache22/sites.d/vhost2.conf [INFO ] No changes made for /usr/local/etc/apache22/sites.d/vhost2.conf [INFO ] Executing state file.managed for /usr/local/etc/buildflags.conf [INFO ] No changes made for /usr/local/etc/buildflags.conf [INFO ] Executing state file.managed for /usr/local/etc/salt/minion [INFO ] No changes made for /usr/local/etc/salt/minion [INFO ] Executing state file.recurse for /usr/local/www/apache22/cedwards.org/html [INFO ] No changes made for /usr/local/www/apache22/cedwards.org/html [INFO ] Loading fresh modules for state activity [INFO ] Executing state user.present for cedwards [INFO ] No changes made for cedwards [INFO ] Executing state group.present for cedwards [INFO ] No changes made for cedwards Traceback (most recent call last): File ""/usr/local/bin/salt-call"", line 21, in <module> main() File ""/usr/local/bin/salt-call"", line 17, in main client.run() File ""/usr/local/lib/python2.7/site-packages/salt/cli/**init**.py"", line 669, in run caller.run() File ""/usr/local/lib/python2.7/site-packages/salt/cli/caller.py"", line 107, in run ret = self.call() File ""/usr/local/lib/python2.7/site-packages/salt/cli/caller.py"", line 42, in call *self.opts['arg'] File ""/usr/local/lib/python2.7/site-packages/salt/modules/state.py"", line 79, in highstate return st_.call_highstate() File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 1049, in call_highstate return self.state.call_high(high) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 712, in call_high ret = self.format_verbosity(self.call_chunks(chunks)) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 559, in call_chunks running = self.call_chunk(low, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/python2.7/site-packages/salt/state.py"", line 668, in call_chunk running = self.call_chunk(chunk, running, chunks) File ""/usr/local/lib/","Do you have a user requiring a group that requires the same user? aka, a recursive requisite?","I do have a user/group definition in my ""core"" state, but I did not have problems with it previous to 0.9.7. I've run these states before on my army of jails and they've been working. I can provide you with a copy of the .sls files that minion includes if you think that'd help."
saltstack/salt,https://github.com/saltstack/salt/issues/4397,saltstack_salt_issues_4397,"daemontools no longer recognized in states

I have two services managed by daemontools, tinydns and dnscache. These run out of `/var/service/{tinydns,dnscache}`. A few versions ago these were detected and managed properly through `service` in a state file. Now, in 0.14.0 (on FreeBSD) these are not detected. I get the error:  Please let me know what more information I can provide to troubleshoot this issue.",What does your sls look like?,top.sls: 
saltstack/salt,https://github.com/saltstack/salt/issues/6407,saltstack_salt_issues_6407,"starting salt master on 0.16.1 blows up [FreeBSD]

","What's your system, etc? I'll see if this happens for me shortly.","FreeBSD 9.1-RELEASE-p5 [cedwards@starbuck ~]$ salt --versions-report Salt: 0.16.1 Python: 2.7.5 (default, Jun 10 2013, 15:16:28) Jinja2: 2.7 M2Crypto: 0.21.1 msgpack-python: 0.2.2 msgpack-pure: Not Installed pycrypto: 2.6 PyYAML: 3.10 PyZMQ: 2.2.0 ZMQ: 2.2.0"
saltstack/salt,https://github.com/saltstack/salt/issues/6954,saltstack_salt_issues_6954,"[FreeBSD] pkg installation in states broken: ""ValueError: too many values to unpack""

salt 0.16.0-2695-g94133c1 FreeBSD 9.1-RELEASE-p6 ",Could I convince you to put a print in there so we can see what is in `line`?,"It looks like if there are any other pending upgrades it's going to spit out lines like the 'py27-Babel' below. root@ariel:/root # salt-call state.sls bash [INFO ] Executing command '/sbin/zfs help || :' in directory '/root' [INFO ] Executing command 'ps auxwww' in directory '/root' [INFO ] Loading fresh modules for state activity [INFO ] Executing command '/sbin/zfs help || :' in directory '/root' [INFO ] Executing command '/sbin/zfs help || :' in directory '/root' [INFO ] Fetching file *\* skipped **, latest already in cache 'salt://bash/init.sls' [INFO ] Executing state pkg.latest for bash [INFO ] Executing command '/usr/sbin/pkg info' in directory '/root' [INFO ] Executing command '/usr/sbin/pkg update' in directory '/root' [INFO ] Executing command '/usr/sbin/pkg upgrade -nq' in directory '/root' Upgrading py27-Babel: 0.9.6 -> 1.3 [salt] [ERROR ] No changes made for bash [INFO ] Executing state pkg.latest for bash-completion [INFO ] Executing command '/usr/sbin/pkg update' in directory '/root' [INFO ] Executing command '/usr/sbin/pkg upgrade -nq' in directory '/root' Upgrading py27-Babel: 0.9.6 -> 1.3 [salt] [ERROR ] No changes made for bash-completion"
saltstack/salt,https://github.com/saltstack/salt/issues/9956,saltstack_salt_issues_9956,"salt.virt error: 'denied: no authorization'

I've been playing with salt.virt to deploy VMs. Watching my logs, I see a number of the following errors, repeated for each VM. ",Could you add some information about your configuration and how you're running salt-virt to run into these errors?,"I'm trying to follow the instructions on this page [http://docs.saltstack.com/topics/tutorials/cloud_controller.html]. I'm running CentOS 6.x, Salt 0.17.4. I'm using images from[http://cloud.fedoraproject.org/] as suggested in that article, and trying provision the virtual machine using `salt-run virt.init centos1 2 512 salt://centos.img`."
saltstack/salt,https://github.com/saltstack/salt/issues/10096,saltstack_salt_issues_10096,"[FreeBSD] salt-ssh returning '/tmp/.salt/salt-call: Permission denied' for all modules

I'm working with salt-ssh (2014.1.0rc3) and unable to run any modules over salt-ssh. I get the error: `/tmp/.salt/salt-call: Permission denied` I am able to run raw commands however (`-r`). Please let me know what more info you need..",What happens if you delete the `/tmp/.salt` directory and try to run salt-ssh again (so it will bootstrap salt-thin again)?,I've tried deleting the `/tmp/.salt/` directory from the remote machine and re-running salt-ssh. I'm still getting the same error: 
saltstack/salt,https://github.com/saltstack/salt/issues/23196,saltstack_salt_issues_23196,"[freebsd] error: [Errno 55] No buffer space available

I am trying to test the 2015.2.0 release (based on the current github tag for that version). I have met the packaging requirements, but when I try to activate the RAET transport I get the following error: {minion,master}.d/transport.conf: ",Can you give me a version reporr?,"Yes, this is FreeBSD 10.1. Below is the version report: "
saltstack/salt,https://github.com/saltstack/salt/issues/590,saltstack_salt_issues_590,"Broken (cached) module causes salt-minion to crash and blocks startup

I made a minor indentation mistake but the salt-minion died because of that and refuses to start again: `IndentationError: unindent does not match any outer indentation level` Is it possible to validate the modules before actually loading them, that would make life so much easier :)",Can you reproduce it by running salt-call state.highstate on the minion to get the trace?,"The trace from `salt-minion -l debug` is: `Traceback (most recent call last): File ""/usr/local/bin/salt-minion"", line 18, in <module> main() File ""/usr/local/bin/salt-minion"", line 15, in main minion.start() File ""/usr/local/lib/python2.7/dist-packages/salt/__init__.py"", line 177, in start minion = salt.minion.Minion(self.opts) File ""/usr/local/lib/python2.7/dist-packages/salt/minion.py"", line 82, in __init__ self.functions, self.returners = self.__load_modules() File ""/usr/local/lib/python2.7/dist-packages/salt/minion.py"", line 105, in __load_modules functions = salt.loader.minion_mods(self.opts) File ""/usr/local/lib/python2.7/dist-packages/salt/loader.py"", line 34, in minion_mods return load.apply_introspection(load.gen_functions()) File ""/usr/local/lib/python2.7/dist-packages/salt/loader.py"", line 241, in gen_functions mod = imp.load_module(name, fn_, path, desc) File ""/var/cache/salt/extmods/modules/mysql2.py"", line 530 print grants ^ IndentationError: unindent does not match any outer indentation level` (mysql2 is my renamed mysql module for development purposes). This is quite tricky, because any broken module can get pushed to the minions and causing them to crash with no way of recovering automatically."
saltstack/salt,https://github.com/saltstack/salt/issues/1061,saltstack_salt_issues_1061,"State requisites not always honored

In my state file I have 1 MySQL user and a grant created. For some reason, it tries to add the grant before the user exists which breaks the highstate process. The grant requires the user, but for some reason Salt is not picking up on that and tries to add the grant without the user created. ","why are you saying ""requires""? it is require",My bad...
saltstack/salt,https://github.com/saltstack/salt/issues/1138,saltstack_salt_issues_1138,"M2Crypto.RSA.RSAError: invalid header

This happens with on the latest Git revision: ",Can you run the test suite (which validates encryption) from the latest git checkout?,"Ah yes, the master was not yet running at the latest revision."
saltstack/salt,https://github.com/saltstack/salt/issues/12455,saltstack_salt_issues_12455,"iptables: Rules being inserted multiple times

The iptables configuration sometimes adds in the same rules multiple times. In one run where 10 unique rules are being added it generally happens that it ends up with 13-14 rules. Re-running highstate sometimes randomly inserts another rule (blue rather than green in highstate result). It appears that the comparison existing is not working as it should. Example rule: ","Which distribution are you using? And what version of it. also, salt --version-report ? I was looking at this a couple days ago with someone else","Ubuntu 14.04 with iptables v1.4.21 and salt:  First two times is True, after that the xtables lock. Perhaps the check is incorrectly considering the xtables lock error a positive result and appends the rule?"
saltstack/salt,https://github.com/saltstack/salt/issues/14991,saltstack_salt_issues_14991,"Multiple get_or_set_hash values in template requires multiple runs

For some webapplication I have to set three separate salts. So, a perfect job for `grains.get_or_set_hash` since it only has to be known to the local server and it is not very useful to add it to pillar data. But.. The first run it only sets the first one. Second run, the second one and finally the third run the third (and last) one have been all set. Quite annoying as it doesn't make it as flexible as I hoped. Seems like a bug to me?","Can you show us the exact commands you're running for reproduction purposes? Additionally, please provide the output of `salt-minion --versions-report` and `salt-master --versions-report`",Jinja template: 
saltstack/salt,https://github.com/saltstack/salt/issues/15428,saltstack_salt_issues_15428,"Allow usage of grains/pillars in macros

It is currently not possible to use grains and pillars in macros. Not via the shorthand `pillar['foo:bar']` or the `salt['pillar.get']('foo:bar')` option. Doing so results in: ",Would you mind showing us an example of this failing for you? Thanks!,For instance this one:  Running this on the current stable results in it complaining that 'salt' is not defined.
saltstack/salt,https://github.com/saltstack/salt/issues/18833,saltstack_salt_issues_18833,"file.recurse cuts off filenames in log output

I was highstating a minion over `salt-ssh` and noticed an odd return:  The target node is also Ubuntu 14.04 and has no Salt packages since its deployed via `salt-ssh`.",can you provide the state file used to produce this problem?,The state itself is nothing special really: 
saltstack/salt,https://github.com/saltstack/salt/issues/19156,saltstack_salt_issues_19156,"salt-cloud: Generating traceback when exception is thrown by provider

It appears that salt-cloud doesn't like it when a cloud provider raises an exception: ",Can you tell us what command you ran and which cloud provider you were using so we can reproduce this?,I was starting up two machines configured using the cloud map feature. Provider was Proxmox.
saltstack/salt,https://github.com/saltstack/salt/issues/19219,saltstack_salt_issues_19219,"[salt-cloud] Remove requirement of sshpass for providers

It appears that `salt-cloud` (still) requires the `sshpass` binary. If this is intended it should probably be added to the list of dependencies for that package.",What are you seeing that implies that it is required?,"While deploying a server (provider: Proxmox) on a clean server with `salt-master` and `salt-cloud` it failed because it was missing sshpass. After installing, it worked fine. A quick search trough the Salt repo (develop) shows that most/all of the cloud providers (including proxmox, saltify, parallels, rackspace etc) still have [checks](https://github.com/saltstack/salt/blob/develop/salt/utils/cloud.py#L306) in place which verify whether `sshpass` has been installed and error out if this isn't the case."
saltstack/salt,https://github.com/saltstack/salt/issues/21064,saltstack_salt_issues_21064,"NPM State doesn't install requested version

Installing a package with a particular version doesn't appear to work. It is installing the latest version. Additionally, every highstate it is marked as changed because the current version doesn't match the requested one. Example SLS: ",Can you please post the output of `salt --versions-report`? I just tested this the other day in 2014.7.2 and it was working for me. See #18647.,I'm on the current stable release (as is available in the Ubuntu repo) on Ubuntu 14.04: 
saltstack/salt,https://github.com/saltstack/salt/issues/21219,saltstack_salt_issues_21219,"ini_manage state shows changes when there are none

The `ini_manage` state doesn't appear to be checking the current state and is always returning changes even when there are none and its currently in the right state. Example: ","Does this also happen on the latest supported release, `2014.7.2`?",I haven't been able to test that out since there are no Ubuntu packages for `2014.7.2` yet. Perhaps I can add the module and state to the file server for the time being.
saltstack/salt,https://github.com/saltstack/salt/issues/21337,saltstack_salt_issues_21337,"Pillarized schedule not removed when missing

We have a schedule in our pillar which is applied to `*` telling minions to highstate every 15 minutes and return the data to a returner. After disabling this for a few minions (by adding a grain check to the `schedule.sls`) they were still being highstated every 15 minutes. As a test I have restarted the minion on one of the excluded machines and it properly stopped highstating while the others were still doing that. For another minion I have tried to forcefully refresh the pillars by issuing `saltutil.refresh_pillar` which did resolve it for that. Could this be some kind of cache in the minion? Generally pillar changes are picked up automatically without needing a manual refresh, but perhaps the actual refresh does something specific when it contains a schedule?",What version of Salt? Can you provide the output from salt --versions-report and what the schedule.sls looks like?,This was on 2014.7.0: 
saltstack/salt,https://github.com/saltstack/salt/issues/23315,saltstack_salt_issues_23315,"Vmware cloud driver: NIC not connected

See #23312 for profile configuration. Once the template has been cloned and the machine is running the NIC is not set to ""connected"" (and neither to ""connect at power on""). This results in the machine not being reachable over the network, and results in `salt-cloud` being stuck at ""Waiting to get IP information"" My template is based on Ubuntu 14.04 with `open-vm-tools` installed (as VMware recommends using this rather than their tar.gz one as it is easier to update)",How do you manually connect the NIC?,@nmadhok But it also says `connected = false`. You can connect the NIC via the vSphere client => VM => VM settings => NIC => Tick connected.
saltstack/salt,https://github.com/saltstack/salt/issues/27900,saltstack_salt_issues_27900,"event.fire_master failing with nacl encrypted pillars

It seems like `event.fire_master` doesn't like it when a NACL Encrypted pillar is being used. In a normal highstate (which uses the same pillar) it works just fine, except when a state is triggered via `event.fire_master` which results in: ",Does the minion have the same version as the master?,"The minion is running a slightly older release, but shouldn't it work since Pillar rending is being done on the master?"
saltstack/salt,https://github.com/saltstack/salt/issues/1815,saltstack_salt_issues_1815,"Installation failure on ubuntu 11.04

I've been installed salt 10.2 on 50-60 laptops, all running Ubuntu. Following the 11.04 specific instructions isn't working: http://docs.saltstack.org/en/latest/topics/installation/ubuntu.html  I have no problems installing on 10.04 or 12.04, just 11.04.","Why are people using 11.04? Just curious, since it is not going to be supported for long","Because everybody hates Unity ;-) We're actually offering to upgrade users' 12.04 systems to run MATE, but it's still a tedious process. OTOH, a lot of people are still running 10.04, which installs Salt just fine. It's not a big issue for us, just wanted you to be aware of the issue (apparently you already were)."
saltstack/salt,https://github.com/saltstack/salt/issues/540,saltstack_salt_issues_540,"using names declaration messes up return data

If install multiple packages with a state that uses a names declaration then the return data only includes the information for the final named state that was executed, not all of them. For example if the setup has these declarations: ",What version are you running?,"Sorry, should have mentioned that to begin with. 0.9.5"
saltstack/salt,https://github.com/saltstack/salt/issues/983,saltstack_salt_issues_983,"cp.get_file should replace grains

Just got bitten by this, but I feel that when you use the cp.get_file command the grains in the file template should get replaced. It would probably have to be an extra option that defines the template engine to use for replacement.",What is the context in which grains are giving you issues?,"Sorry, I should have been more clear. I have a conf file that's setup as a jinja template with {{grains['host']}} declarations throughout. When I used cp.get_file to push this file out to my minions I thought that it would replace the grains declarations with their appropriate variables. This was not the case. It just copied the template verbatim."
saltstack/salt,https://github.com/saltstack/salt/issues/1675,saltstack_salt_issues_1675,"Output from state tree missing critical data

It appears that output is not working properly. When I have both a pkg and service declared in my httpd state, the pkg will show up in the output as successful, but the service will not show up, even though it did work and has started the httpd service. Per issue #1653, I am bringing this up as a separate issue. Here's the transcript for clarification: thatch45 - 7/18/2012 I doubt it, there are very separate components. can you run this again and set the state_verbose option to True in the minion config before running? herlo - 7/19/2012 With state_verbose = True set the service shows up. I can file a separate ticket if you think it's worthwhile. thatch45 - 7/19/2012 right, it shows up because no changes were made, this means that something else started the service before salt got to it herlo - 7/19/2012 Well, the service wasn't running before I ran state.highstate, but it was afterward. The fact that the service is getting reported with state_verbose = True is the only difference. Yum does not start httpd, so I don't think it's true that something else is starting httpd. I think salt is doing it. I did note, however, that the service and the cmd are in green this time and the rest is in an aqua color, though changes are still happening either way. I can provide a screen shot if necessary. thatch45 - 7/19/2012 Something other than the service state most likely started it, but it is worth trying to reproduce herlo - 7/19/2012 Okay, I'll file a new issue and leave this one alone now so it can be dealt with properly. So here is the new issue :)",Did I ever get platform data or the sls data you used to make this happen? I have not been able to reproduce this one,
saltstack/salt,https://github.com/saltstack/salt/issues/594,saltstack_salt_issues_594,"TypeError when starting salt-minion on debian 5.0.3 ARM arch

I've have successfully installed salt on ubuntu 11.10 arm64, one is minion and the other is master and communication between these works great. I have a bunch of guruplugs, which are running debian 5.0.3 on an ARM architecture. Salt is installed according to this: Python 2.6.6 part of base os ZeroMQ >= 2.1.9 aptitude install build-essential aptitude install uuid-dev  probe1:~# python Python 2.6.6 (r266:84292, Dec 27 2010, 21:57:32) Edited the /etc/salt/minion file, only changing where the master is. So it has the same config as the minion running on ubuntu arm64. probe1:~# salt-minion --log-level=debug 01:08:17,849 [salt.loader ][DEBUG ] Failed to import module virt, this is most likely NOT a problem: No module named libvirt 01:08:17,910 [salt.loader ][DEBUG ] Failed to import module mysql, this is most likely NOT a problem: No module named MySQLdb 01:08:17,916 [salt.loader ][DEBUG ] Failed to import module ps, this is most likely NOT a problem: No module named psutil 01:08:17,963 [salt.loader ][DEBUG ] Failed to import module yumpkg, this is most likely NOT a problem: No module named yum 01:08:18,305 [salt.loader ][DEBUG ] Failed to import module mongo_return, this is most likely NOT a problem: No module named pymongo 01:08:18,308 [salt.loader ][DEBUG ] Failed to import module redis_return, this is most likely NOT a problem: No module named redis 01:08:18,311 [salt.loader ][DEBUG ] Failed to import module cassandra_return, this is most likely NOT a problem: No module named pycassa 01:08:18,313 [salt.minion ][WARNING ] Starting the Salt Minion 01:08:18,315 [salt.minion ][DEBUG ] Attempting to authenticate with the Salt Master 01:08:18,319 [salt.crypt ][INFO ] Generating minion key: /etc/salt/pki/minion.pem .......................................................................++ ...............................................................................................................................++ Traceback (most recent call last): File ""/usr/local/bin/salt-minion"", line 18, in <module> main() File ""/usr/local/bin/salt-minion"", line 15, in main minion.start() File ""/usr/local/lib/python2.6/dist-packages/salt/**init**.py"", line 229, in start minion = salt.minion.Minion(self.opts) File ""/usr/local/lib/python2.6/dist-packages/salt/minion.py"", line 88, in **init** self.authenticate() File ""/usr/local/lib/python2.6/dist-packages/salt/minion.py"", line 344, in authenticate creds = auth.sign_in() File ""/usr/local/lib/python2.6/dist-packages/salt/crypt.py"", line 216, in sign_in if not self.verify_master(payload['pub_key'], payload['token']): TypeError: string indices must be integers, not str I have --log-level=debug on the master but there is no output so I guess the minion does not go so far as trying to communicate with it. Not sure what to do next to solve this issue.","can you place a: print payload above line 216, and post the output?",Its empty. I did some debugging comparing a working system with the one not working. crypt.py:196 payload = self.serial.loads(socket.recv()) the socket.recv() returns failing system: '0xa0' working system: 1874 characters starting with '\x85\xacpublish_port\xa44505\xa7pub_key\xda\x03\x1c-----BEGIN PUBLIC KEY----'
saltstack/salt,https://github.com/saltstack/salt/issues/1108,saltstack_salt_issues_1108,"pprint is not consistent

On the first output ""batch2"" has curly braces {} around the output, but the other hosts do not. The second output shows ""None"" as a failed connection. I think the zeromq connections should get better error handling, ping checks together with connection closes. best regards, Florian La Roche salt '*' cmd.run 'uname -a' batch4.jur-linux.org: Linux batch4.jur-linux.org 2.6.32-220.13.1.el6.x86_64 #1 SMP Tue Apr 17 23:56:34 BST 2012 x86_64 x86_64 x86_64 GNU/Linux batch1.jur-linux.org: Linux batch1.jur-linux.org 2.6.32-220.13.1.el6.x86_64 #1 SMP Tue Apr 17 15:16:22 CDT 2012 x86_64 x86_64 x86_64 GNU/Linux batch3.jur-linux.org: Linux batch3.jur-linux.org 2.6.32-220.13.1.el6.x86_64 #1 SMP Tue Apr 17 23:56:34 BST 2012 x86_64 x86_64 x86_64 GNU/Linux {'batch2.jur-linux.org': 'Linux batch2.jur-linux.org 2.6.32-220.13.1.el6.x86_64 #1 SMP Tue Apr 17 23:56:34 BST 2012 x86_64 x86_64 x86_64 GNU/Linux'} salt '*' cmd.run 'uname -a' {'batch2.jur-linux.org': None} batch3.jur-linux.org: Linux batch3.jur-linux.org 2.6.32-220.13.1.el6.x86_64 #1 SMP Tue Apr 17 23:56:34 BST 2012 x86_64 x86_64 x86_64 GNU/Linux batch1.jur-linux.org: Linux batch1.jur-linux.org 2.6.32-220.13.1.el6.x86_64 #1 SMP Tue Apr 17 15:16:22 CDT 2012 x86_64 x86_64 x86_64 GNU/Linux batch4.jur-linux.org: Linux batch4.jur-linux.org 2.6.32-220.13.1.el6.x86_64 #1 SMP Tue Apr 17 23:56:34 BST 2012 x86_64 x86_64 x86_64 GNU/Linux",What version is this? I fixed the None issue a few days ago. The braces issue is part of the outputter I need to track down,"The None issue seems to be gone, but I can still see the curly braces being added from time to time: {'batch4.jur-linux.org': ' 09:34:18 up 18:50, 0 users, load average: 0.16, 0.20, 0.09'} batch2.jur-linux.org: 09:34:18 up 20:50, 0 users, load average: 0.12, 0.15, 0.08 batch1.jur-linux.org: 09:34:18 up 21:23, 1 user, load average: 0.28, 0.22, 0.11 batch3.jur-linux.org: 09:34:18 up 18:50, 0 users, load average: 0.06, 0.15, 0.08 This is with current head... best regards, Florian La Roche"
saltstack/salt,https://github.com/saltstack/salt/issues/605,saltstack_salt_issues_605,"pkg.installed fails on odd rpm version numbers with yum

I have some packages that are installed on my CentOS boxen that pkg.installed says are not installed: pam_ccreds.i386 3-5 base epel-release.noarch 5-4 installed pcmciautils.x86_64 014-5 installed The above lines are copy/paste from the minion log file in debug mode, as generated by the command yum -q list. I hacked up a quick salt.states.pkg.is_present function which basically only does the first check that the installed function does. It returns true for all packages I tested except for the three listed above. The pkg.installed function uses python's distutils package and LooseVersion does not accept the \d+-\d+ package version as valid. According to the LooseVersion documentation, only the following are considered valid: 1.5.1 1.5.2b2 161 3.10a 8.02 3.4j 1996.07.12 3.2.pl0 3.1.1.6 2g6 11g 0.960923 2.2beta29 1.13++ 5.5.kw 2.0b1pl0 In fact, there is no such thing as an invalid version number under this scheme; the rules for comparison are simple and predictable, but may not always give the results you want (for some definition of ""want""). But it obviously did not expect to see the version listed above.","Do you mean `pkg.latest`? `pkg.installed` does not use LooseVersion. If so, this may be issue #388 which has been fixed in git.","@thatch45 Yes, CentOS 5, so RHEL 5 for sure. Didn't check on CentOS 6 yet. @whiteinge I do appear to be running that patched version (I happened to do a yum update this morning, so I got lucky and am running latest code). Further debug output: CentOS57[root@ivwm21 states]# salt-call pkg.version kernel [INFO ] Executing command yum -q list installed in directory /root {'local': '2.6.18-274.17.1'} CentOS57[root@ivwm21 states]# salt-call pkg.version epel-release [INFO ] Executing command yum -q list installed in directory /root {'local': ''} CentOS57[root@ivwm21 states]# yum -q list epel-release Installed Packages epel-release.noarch 5-4 installed CentOS57[root@ivwm21 states]# yum -q list kernel Installed Packages kernel.x86_64 2.6.18-164.11.1.el5 installed kernel.x86_64 2.6.18-274.12.1.el5 installed kernel.x86_64 2.6.18-274.17.1.el5 installed CentOS57[root@ivwm21 states]# yum -q list pcmciautil* Installed Packages pcmciautils.x86_64 014-5 installed CentOS57[root@ivwm21 states]# salt-call pkg.version pcmciautils [INFO ] Executing command yum -q list installed in directory /root {'local': ''}"
saltstack/salt,https://github.com/saltstack/salt/issues/739,saltstack_salt_issues_739,"custom grains don't work in jinja

in a jinja2-template (for redis) i want to enable master-slave config out of custom grains info, i defined in <code>/etc/salt/roles</code>: <pre> grains: redis-master-queue-host: redis-server.example.com redis-master-queue-port: 10004 </pre> <pre> {% if grains['redis-master-queue-host'] %} slaveof {{ grains['redis-master-queue-host'] }} {{ grains['redis-master-queue-port'] }} {% endif %} </pre> unfortunately the values don't get substituted. it even looks like my custom defined grains are not valid inside jinja. if i include a <code>{{ grains |pprint }}</code> inside my template, it contains only system grains.",did you include the /etc/salt/roles file in the minion config with the include statement? And are you running 0.9.7?,yes and yes: <pre> include: - roles </pre> i can just do a <code>sudo salt '*' grains.item redis-master-queue-host</code> and get a correct answer. <code>grains.items</code> also reports it.
saltstack/salt,https://github.com/saltstack/salt/issues/2756,saltstack_salt_issues_2756,"highstate timeout

when i'm applying highstate to a new minion and it has a lot to do, the master tells me the minion went away: <pre> pille@salt-master:~$ time sudo salt 'conversion*' state.highstate -v Executing job with jid 20121130101658627767 ------------------------------------------- Execution is still running on conversion-test Execution is still running on conversion-test Execution is still running on conversion-test The following minions did not return: conversion-test real 0m58.589s user 0m0.210s sys 0m0.070s </pre> however a ping afterwards gets an answer: <pre> pille@salt-master:~$ time sudo salt 'conversion*' test.ping conversion-test: True </pre> at that time processes on the minion and its log still show it's working. perhaps the minion can't answer when it's really busy and so the master-query times out?!","what version? generally it waits, but we had more issues here on 0.10.4","i'm sticking to 0.10.4, because 0.10.5 couldn't deploy my states (see #2631) the point is, that the master is just doing a ping. it seems the minion becomes unresponsive during a longer task like compiling sth. but afterwards i can repeat that highstate and when it doesn't have anything to do, it's fnie again."
saltstack/salt,https://github.com/saltstack/salt/issues/10966,saltstack_salt_issues_10966,"fromrepo: pkg.installed fails

this issue is related to #10965, as it's the next failing step. using the same formula, having ffmpeg removed manually beforehand installation of ffmpeg from PPA fails: <pre> 2014-03-05 10:18:14,717 [salt.state ][INFO ] Executing state pkgrepo.managed for jon-severinsson/ffmpeg 2014-03-05 10:18:14,749 [salt.state ][INFO ] Package repo 'jon-severinsson/ffmpeg' already configured 2014-03-05 10:18:14,752 [salt.state ][INFO ] Executing state pkg.installed for ffmpeg 2014-03-05 10:18:14,765 [salt.loaded.int.module.apt][INFO ] Targeting repo 'jon-severinsson/ffmpeg' 2014-03-05 10:18:14,765 [salt.loaded.int.module.cmdmod][INFO ] Executing command ['apt-get', '-q', '-y', '-o', 'DPkg::Options::=--force-confold', '-o', 'DPkg::Options::=--force-confdef', '-t', 'jon-severinsson/ffmpeg', 'install', 'ffmpeg'] in directory '/root' 2014-03-05 10:18:14,776 [salt.loaded.int.module.cmdmod][ERROR ] Command '['apt-get', '-q', '-y', '-o', 'DPkg::Options::=--force-confold', '-o', 'DPkg::Options::=--force-confdef', '-t', 'jon-severinsson/ffmpeg', 'install', 'ffmpeg']' failed with return code: 100 2014-03-05 10:18:14,776 [salt.loaded.int.module.cmdmod][ERROR ] stdout: Reading package lists... 2014-03-05 10:18:14,776 [salt.loaded.int.module.cmdmod][ERROR ] stderr: E: The value 'jon-severinsson/ffmpeg' is invalid for APT::Default-Release as such a release is not available in the sources 2014-03-05 10:18:14,777 [salt.loaded.int.module.cmdmod][INFO ] Executing command ""dpkg-query --showformat='${Status} ${Package} ${Version} ${Architecture}\n' -W"" in directory '/root' 2014-03-05 10:18:14,805 [salt.state ][ERROR ] The following packages failed to install/update: ffmpeg. </pre> i'm on ubuntu-12.04 salt-0.17.5. installing the package manually worked, including deps.","When you say ""installing the package manually worked"" were you using the exact same command as Salt, or a different command?","no, that should have failed. i just did an <code>aptitude install ffmpeg</code>"
saltstack/salt,https://github.com/saltstack/salt/issues/47373,saltstack_salt_issues_47373,"Document how to avoid re-downloading large files

I'm using `salt.states.file.managed` to download ISO files from the Internet (to create a PXE boot server). I noticed today that Salt re-downloads the ISO files every time I run `state.highstate` for hash verification. I want to avoid re-downloading to save time and not waste mirror bandwidth. I thought about using skip_verify, patching Salt, or writing my own module, but then I realized there's a clean solution that I thought should be documented for everyone: instead of enabling skip_verify, the user should list the target file as the first source file. For example, this is bad because it re-downloads on every `state.highstate` run:  This way, if the file already exists and is correct, Salt won't try to download it again, even for hash verification. I tested this and it works. This solution is an alternative to `skip_verify`, so I think it should be spelled out in the documentation of the `skip_verify` option of `salt.state.file.managed`. This solution is also preferred over using `file.cached` instead of `file.managed` because it lets me continue to check the file hash on the filesystem. The only possible downside is that I suspect Salt computes the hash twice, once when evaluating the source, and once when evaluating the target. That's OK for now. I would be happy to provide a documentation patch.",Can you give that a try?,I'll defer to #43518. Thanks.
saltstack/salt,https://github.com/saltstack/salt/issues/34587,saltstack_salt_issues_34587,"postgres_initdb.present fails on Redhat with PostgreSQL provided installation

### Description of Issue/Question ### Setup The following state: ",Does that workaournd work for you?,"I'd already implemented a workaround actually by just symlinking it. I do see your point though about maintainability. I wonder though if this happens in Debian or Opensuse with the official PostgreSQL repos too. I only posted RedHat because that was what I was using at the time. With this being the upstream official repo though, I wonder if this problem might crop up again and again. Can we keep this open for a bit just in case other distros have this issue and maybe consider adding something to docs?"
saltstack/salt,https://github.com/saltstack/salt/issues/780,saltstack_salt_issues_780,".../site-packages/salt/modules/ has priority over _modules

Not sure if this is intentional, but it took me a while to figure out what was going on. Turns out I had an old version of my module in site-packages/salt/modules/, very frustrating. Thoughts?",What do you think?,"I can see advantages on both sides, I think _modules should override the builtin modules, but maybe this could be a /etc/salt/minion configuration option? I think using system modules, states, etc over custom ones should be the default, but we should have a way to do that. It would make developing extensions to existing system modules /much/ easier."
saltstack/salt,https://github.com/saltstack/salt/issues/964,saltstack_salt_issues_964,"Part of the state tree seems to be being pruned

","Does the problem still occur if you have an include statement in initscripts.sls? i.e. include: - sensu.gem You're ultimately including everything, but maybe the order matters?","I think circular includes like that cause more problems than just what I'm experiencing here, but I'm not 100% sure"
saltstack/salt,https://github.com/saltstack/salt/issues/1089,saltstack_salt_issues_1089,"state.highstate reports success when uncaught exceptions are thrown

I had a misnamed variable in a _module, I nearly pulled out my hair trying to figure out what was going on. Only way I found it was by doing salt-call state.highstate, which produced the backtrace.",Do you have an example that will reproduce this?,"Yeah, I think it's any uncaught exception in a _module. My case was a misnamed variable, something that caused a runtime error, not sure if it would apply on a compile-time error. -Devon On Apr 21, 2012, at 20:58, Thomas S Hatch reply@reply.github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/842,saltstack_salt_issues_842,"Allow Syndic subscription patterns

If you segment your network and use syndics, you might also want to subscribe to messages intended for that network. Using zmq subscription patterns we can support this segmentation. This could also prevent crossing data between these partitions.",who subscribes to messages? Or do you mean allow the syndic master to target only a network segment?,"Sorry, I mean the syndic could subscribe to pre-determined pattern on which a high level master publishes too for data only pertaining to the segment."
saltstack/salt,https://github.com/saltstack/salt/issues/824,saltstack_salt_issues_824,"jobs.lookup_jid returns error if job is still active

`salt-run jobs.lookup_jid <job_id>` returns error if that job is still active. This is the error message  p.s. I want to thank contributors for that great open source project.",What version of salt are you using? Is this error from 0.9.7 or from the latest git version on the develop branch?,It is version 0.9.7
saltstack/salt,https://github.com/saltstack/salt/issues/851,saltstack_salt_issues_851,"Extend statement is being multiplied multiple times

if i extend more than one state, all the declarations under the ""extend"" block are multiplied by the amount of states that are being extended. If i extend memcached and nginx, then state.show_highstate will show memcached and nginx being extended Twice; If i extend memcached and nginx and sshd, then state.show_highstate will show memcached and nginx and sshd being extended Thrice!;","Can you pastebin/gist the data? Having many things in the __extend__ block is fine, but we should clean it up for the visual sake","Yep, in the **extend** block. Extending 5 state declarations renders state.show_highstate unusable tho. http://pastebin.com/nzmb4q76 On 03/06/2012 07:16 PM, Thomas S Hatch wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/870,saltstack_salt_issues_870,"State 'cmd.run' and -unless param always executes the command

The following state executes Always, despite `- unless` statement:  Salt 0.9.7 Python 2.6.5 Ubuntu 10.04",What version of salt are you using on the minion?,"With this tune you'll do that in no time, haha!"
saltstack/salt,https://github.com/saltstack/salt/issues/875,saltstack_salt_issues_875,"state pkg won't install package nscd

CentOS 6.1; Salt 0.9.7 Have created this salt file:  Saying ""No changes for nscd"" might lead one to believe it's already installed and up-to-date, but it was not installed yet. Have been playing with this for half a day using VMs and restoring a sane snapshot. It performs in this same manner every single time. Further, I had been counting on nss-pam-ldapd package to install nscd as a prerequisite - though no error was thrown when doing it this way, nscd never installed as a result either - so that's why I have been trying to explicitly install nscd with its own state entry. Thank you!",Can you try `salt-call -l debug pkg.install nscd` and paste the results please?,"Oops - failed to mention: Running `yum install -y nscd` works flawlessly - so it isn't an issue with the RPM, I would think..."
saltstack/salt,https://github.com/saltstack/salt/issues/915,saltstack_salt_issues_915,"Exception on mysql.user_exists

Salt successfully installed mysql, but when it gets to the user creation part it dies. mysql is running, Ubuntu 10.04, minion/master 0.9.7. UPDATE: that user does _not_ exist on that server. I have a very simple definition for a mysql user with the host as an IP, and using a password hash instead of a password (i've X'd out the ip and hash): ",Can this be reproduced from git HEAD?,"Yes, this happens with master and minion on HEAD"
saltstack/salt,https://github.com/saltstack/salt/issues/987,saltstack_salt_issues_987,"ssh module comment/spaces modifications

Here is a proposal with certain assumptions for dealing with comments and spaces in ssh authorized keys file. Assumptions: - Spaces in ssh-keys are in fact not valid keys - Spaces mean key+comment Proposal: 1. We could throw an exception when the ssh key in question contains spaces 2. We could infer that a key with spaces is key+comment, and format the line accordingly I believe 1 is the best way, since 2 could lead to issues where a user has both a space in the key and a comment in the yaml. The exception would be `SSHInvalidKey`.",What was wrong with the old way + adding an error to the return when a key has a space?,"That's what I'm suggesting. Except we should keep the new `re` code for ssh-key options, since that wasn't handled correctly before."
saltstack/salt,https://github.com/saltstack/salt/issues/1735,saltstack_salt_issues_1735,"rh_ip not loading on RHEL-like systems unless distribute is installed

This is on CentOS 6.2, with my own python27 packages and salt builds (current salt RPMs were built this morning from git). I get this message when running salt-call: [DEBUG ] Failed to import module rh_ip, this is most likely NOT a problem: No module named pkg_resources And then my network states fail (network.py throws KeyErrors at lines 171 and 248, for __salt__['ip.get_interface'] and __salt__['ip.get_network_settings'], respectively). However, if I install my python27-distribute package, this message goes away, and my network states work as expected. I don't understand the underlying pkg_resources problem, but would like to. I also believe that it's an error to require the distribute package in order for rh_ip to work (I don't think that's intended, and is probably what the underlying bug is all about).",Do your spec files use setuptools for the install? This should only come up is salt is installed with setuptools,"I don't believe so. My salt.spec is the same as the one distributed with salt, just with the dependencies and version numbers changed to match my packages instead of the EPEL ones, and a couple of paths hard-coded to make sure it uses the python I want it to. I also removed all of the systemctl-specific stuff, but that's about it. The setup is called the standard way: %{__python} setup.py install -O1 --root $RPM_BUILD_ROOT Also worth noting that I don't have a setuptools installed that works with my python27 packages. (The system comes with python-setuptools by default, but it corresponds to the CentOS-provided python 2.6.6... I'll try removing it and re-building anyway just to be safe and confirm.) On 07/31/2012 03:31 PM, Thomas S Hatch wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/2790,saltstack_salt_issues_2790,"RH Network issues on 0.10.5

Since upgrading to 0.10.5, I get errors with the rh_ip state handler. I'm not actually sure where the problem stems from, so I'm just going to include the full config and resultant output. My network.sls for a particular host looks like this:  This actually looks like two separate (though possibly related) errors: one with network.managed, and one with network.system. Let me know anything I can do to help in providing more diagnostic information on this... Thanks!",Can you try adding: `import salt.utils` to the top of salt/modules/rh_ip.py? I think that's all it is.,Thanks @UtahDave that did the trick. Opened a pull request as issue #2792.
saltstack/salt,https://github.com/saltstack/salt/issues/1013,saltstack_salt_issues_1013,"Pillar return NoneType

I try to use pillar with Salt 0.9.8 like explained in [documentation](http://salt.readthedocs.org/en/latest/topics/pillar/index.html), but when I call `salt '*' state.highstate` it return:  pillar.data return values, but state.highstate still fail.",Do you have `/srv/pillar/top.sls`?,"Yes, my files: /srv/pillar/top.sls: "
saltstack/salt,https://github.com/saltstack/salt/issues/982,saltstack_salt_issues_982,"salt-minion losing connection to salt-master Ubuntu 11.10

Using 0.9.8 on salt-master, and minions, with troubleshooting step from http://readthedocs.org/docs/salt/en/latest/topics/troubleshooting/#salt-master-stops-responding I'm experiencing the following. http://thunked.org/p/view/pri/41fr7xtya Individually enabling one state at a time they all worked. 2 states at a time worked All three states at a time, caused the minion to stop responding. After it stopped responding the test.ping would fail. This issue only seems to happen with my Ubuntu minion. Tested on both 0.9.7 and 0.9.8. These are new installations on virtualbox. Let me know if further details are required.",What version of Ubuntu are you running?,"Login credentials provided via chat, though. I setup an AWS instance receiving the same issues, details here. http://thunked.org/p/view/pri/gahj51uvh"
saltstack/salt,https://github.com/saltstack/salt/issues/5202,saltstack_salt_issues_5202,"file.sed creating backups by default

Looks like file.sed is automatically creating backups. Per https://github.com/saltstack/salt/pull/1109, backups when running sed are an undesireable default. Salt 0.15.1 on Ubuntu 12.04 /etc/logrotate.d/nginx: file.sed: - before: 0640 - after: 0644 results in: [INFO ] Executing state file.sed for /etc/logrotate.d/nginx [INFO ] Executing command ""sed -n -r -e 's/640/$/pg' /etc/logrotate.d/nginx"" in directory '/root' [INFO ] Executing command ""sed -i.bak -r -e 's/640/644/g' /etc/logrotate.d/nginx"" in directory '/root' An nginx.bak file is created in the directory with the edited file. Workaround: /etc/logrotate.d/nginx: file.sed: - before: 0640 - after: 0644 - backup: '' [INFO ] Executing state file.sed for /etc/logrotate.d/nginx [INFO ] Executing command ""sed -n -r -e 's/640/$/pg' /etc/logrotate.d/nginx"" in directory '/root' [INFO ] Executing command ""sed -i -r -e 's/640/644/g' /etc/logrotate.d/nginx"" in directory '/root'",Did you have anything in mind for what you would prefer to see?,"IMO, the default behavior without specifying the backup directive should be to edit in place without backups. That's what it seemed to be previously, so this potentially breaks old configs."
saltstack/salt,https://github.com/saltstack/salt/issues/1223,saltstack_salt_issues_1223,"RPM --scripts not being run during package installation

Per http://irclog.perlgeek.de/salt/2012-05-07#i_5553599 there's something strange about how salt is running `yum install mlocate` as the slocate group is not being created. Copied below are the chat and the output it refers to. Phil 14:13 pdurbin hello! i'm unfortunately having trouble with salt apparently not running --scripts when installing an rpm (package mlocate): http://pastie.org/3873571 14:13 pdurbin please notice how on line 47 it says ""updatedb: can not find group `slocate'"" 14:14 pdurbin but. . . when i install mlocate with`yum install mlocate` the slocate group is properly created (line 134) 14:24 SEJeff pdurbin, I'd suggest trying to reproduce the problem again by removing the mlocate package, making sure the user doesn't exist in /etc/{passwd,shadow,group} and then doing it again via: 14:24 SEJeff salt-call -l debug state.highstate 14:27 pdurbin SEJeff: done. same behavior. here's the output: http://pastie.org/3873656 14:28 \* pdurbin wonders if he can increase the debug level 14:34 SEJeff pdurbin, Can you please email the mailinglist? 14:34 SEJeff I'm not able to dedicate a bunch of time to salt at the moment 14:34 SEJeff work is too busy 14:35 pdurbin mailing list? :) think it's worth an issue yet? 14:46 SEJeff pdurbin, Actually, yes. It should be an issue if it is reproducible From http://pastie.org/3873571 ",Do you have SELinux in Enforcing mode?,Yes.
saltstack/salt,https://github.com/saltstack/salt/issues/2039,saltstack_salt_issues_2039,"Undefined defaults in templates now raise UndefinedError

We just recently upgraded our installation of salt and now a number of our templates have broken raising an UndefinedError. We use the `defaults` item of the `file.managed` state to assign variables within our templates. The items we assign often times are optional where we want to provide defaults in case they are not specified or use them as conditionals since None works like False when used in a conditional. Example 1: our vhost template for apache accepts a default named 'ssl' which when set to True will configure a ssl vhost. In the template we do `{% if ssl %}` which previously worked fine, but now the highstate run bails out with an UndefinedError. Example 2: some vhosts require they are bound to a specific IP while most of them are just defined as ""_"". To accomplish this we use the idiom `{{ server_ip or ""_"" }}:80`. Like the conditional this previously worked while now it also raises an UndefinedError.",did those ever return true? Those are undefined variables they were all just returning None before...,It was taking advantage of how python handles truthy values. Since None is essentially equivalent to False when checked as conditionals then both the if statement and or statement behave properly when those values are None. In the case of the server_ip example it works because of the same thing: 
saltstack/salt,https://github.com/saltstack/salt/issues/2062,saltstack_salt_issues_2062,"""Got unknown grain from master: roles"" when grains are in minion.d files

When we put our `roles` into a conf file in the minion.d directory we get an error message when applying highstate:  The interesting thing is that this doesn't seem to actually affect anything and the proper states are applied. If we move the grains into the main minion config then the error goes away.",does the grain show up on the minion with salt-call -g ?,Yes they do.
saltstack/salt,https://github.com/saltstack/salt/issues/1784,saltstack_salt_issues_1784,"ssh.set_auth_key example/documentation mismatch with real command line parameters

Documentation says: salt '*' ssh.set_auth_key <user> key='<key>' enc='dsa' comment='my key' options='[]' config='.ssh/authorized_keys' But if I use key='public ssh key content', actually content in authorized_keys is 'dsa key=<Rest Of the key>' -- I believe this is wrong and unhelpful. Problem is in/with package salt-0.10.1-1 on 64bit CentOS 6",What document exactly has this example?,Frome the following: salt 'vm01.foo.bar' sys.doc ssh.set_auth_key
saltstack/salt,https://github.com/saltstack/salt/issues/2709,saltstack_salt_issues_2709,"rvm installs when test=True

Version: 0.10.4 from EPEL. I'm toying with the rvm state and I've found that even if I have test=True in the salt-call command, it still ends up installing rvm. It didn't install ruby 1.9.3 as per my sls file however. Part of my sls file: # Install Ruby 1.9.3 ruby-1.9.3: rvm.installed: - default: True - runas: rails - require: - pkg: rvm-deps - pkg: mri-deps Command: [root@server ~]# salt-call state.sls software.rvm state test=True <SNIP> [INFO ] Executing state rvm.installed for ruby-1.9.3 [INFO ] Executing command 'curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer | sudo bash -s stable' in directory '/root ' Downloading RVM from wayneeseguin branch stable % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 100 1154k 100 1154k 0 0 634k 0 0:00:01 0:00:01 --:--:-- 1821k Installing RVM to /usr/local/rvm/ RVM system user group 'rvm' exists, proceeding with installation. source /etc/profile # RVM: Shell scripts enabling management of multiple ruby environments. # RTFM: https://rvm.io/ # HELP: http://webchat.freenode.net/?channels=rvm (#rvm on irc.freenode.net) # Cheatsheet: http://cheat.errtheblog.com/s/rvm/ # Screencast: http://screencasts.org/episodes/how-to-use-rvm # In case of any issues read output of 'rvm requirements' and/or 'rvm notes' Installation of RVM in /usr/local/rvm/ is almost complete: - First you need to add all users that will be using rvm to 'rvm' group, and logout - login again, anyone using rvm will be operating with `umask u=rwx,g=rwx,o=rx`. - To start using RVM you need to run `source /etc/profile.d/rvm.sh` in all your open shell windows, in rare cases you need to reopen all shell windows.",Could you post the portions of your sls for rvm-deps and mri-deps? Thanks!,"CentOS 6.3, both master and minion. I determined the deps using ""rvm requirements"" --- # Salt will not automatically install RVM dependencies rvm-deps: pkg.installed: - names: - bash - bzip2 - coreutils - curl - gawk - git - gzip - sed - sudo # Salt will not automatically install MRI dependencies mri-deps: pkg.installed: - names: - autoconf - automake - bison - gcc-c++ - glibc - libffi-devel - libtool - libyaml-devel - make - openssl-devel - patch - readline - readline-devel - zlib - zlib-devel # Install Ruby 1.9.3 ruby-1.9.3: rvm.installed: - default: True - runas: rails - require: - pkg: rvm-deps - pkg: mri-deps"
saltstack/salt,https://github.com/saltstack/salt/issues/1314,saltstack_salt_issues_1314,"Grains not loading into __grains__

Here's the output we're seeing when we turn debugging on for the minion: ",What OS is this? What happens if you try to:  from a python shell?,This is on a Debian Squeeze machine. `import salt` works just fine from the console. However: 
saltstack/salt,https://github.com/saltstack/salt/issues/1148,saltstack_salt_issues_1148,"Enforce a minimum kernel version

# Problem: Attempting to spin up salt-minion on a Debian Squeeze container running under OpenVZ (i.e., in a paravirtualized environment) it never sends anything to the master. The logs say nothing, not even at the debug/trace/garbage level. strace in no-follow-forks mode says it's timing out waiting for the poll() syscall to finish. strace in follow-forks mode shows the minion spawning child processes that say something like this in a tight loop:  ...and it is shared with all the other containers on the box. It cannot be changed. If there is a minimum kernel version required for the functionality that 0MQ and/or Salt needs, it should be checked for and a ""go pound sand"" message should result. # Expected result: salt-minion detects that it isn't going to be able to work in a given environment and either gracefully exits with an error or explodes violently # Actual Result: salt-minion says it's starting and refuses to establish communications with the master, with zero outward indication in logs, etc. that it's not working.",What version of zeromq are you running? I will do some research,
saltstack/salt,https://github.com/saltstack/salt/issues/1207,saltstack_salt_issues_1207,"State causes minion crash

",What are you doing in here? Applying a file and then commenting it? You can't use multiple file states in one id dec like this.,"Yeah, we wen't over this in another issue. For things like commending, I think those should be able to be combined with managed and other things. Though using templates can replicate the needed behavior. On Sat, May 12, 2012 at 12:01 PM, Thomas S Hatch < reply@reply.github.com"
saltstack/salt,https://github.com/saltstack/salt/issues/1564,saltstack_salt_issues_1564,"file.find doesn't return a result

When running: sudo salt '*' file.find /... type='f' name='some_name' from the master, it finds the file and returns it's path. But when running the following command from some module: print __salt__['file.find'] (""/... type='f' name='some_name'"") it prints [] although the file exists. Expected result: the print command should print the same path as when running file.find from the master. Salt version: 0.10.0",Could you also gist the exact code you're using in that print statement?,"Sure: print __salt__['file.find'](""/etc/salt/data/source type='f' name='my_source.tar.gz'"") and from master: sudo salt '*' file.find /etc/salt/data/source type='f' name='some_name.tar.gz'"
saltstack/salt,https://github.com/saltstack/salt/issues/2803,saltstack_salt_issues_2803,"manage.down not working in 0.10.5

~# salt-run manage.up | wc 519 519 10237 ~# salt-key -L | wc 604 607 11703 ~# salt-run manage.down ^^ nothing I do, however, get output from manage.down for hosts which have unaccepted keys.",Would you mind trying setting your timeout to 30 seconds or a minute or even a few minutes?,"It does indeed return more minions with a longer timeout. That makes no sense, though. Shouldn't it be giving me back a list of minions that didn't return a ping?"
saltstack/salt,https://github.com/saltstack/salt/issues/2873,saltstack_salt_issues_2873,"Boolean values in pillars are buggy in certain situations

I have the following pillar:  I'm getting an error, when calling this from the master: 'lardner.pmtpa.wmnet': {'ret': 'Traceback (most recent call last):\n File ""/usr/lib/pymodules/python2.7/salt/minion.py"", line 330, in _thread_return\n ret[\'return\'] = func(_args, *_kw)\n File ""/var/cache/salt/extmods/modules/deploy.py"", line 79, in checkout\n checkout_submodules = checkout_submodules[repo]\nTypeError: \'NoneType\' object has no attribute \'__getitem__\'\n'} I don't get this error when I run this via salt-call. I also don't get this error when I use a string, rather than a boolean.",Could you give me more of the pillar? Are there any errors in the master logs when the pillar is generated?,That's the whole pillar. There's nothing in the master logs when generated.
saltstack/salt,https://github.com/saltstack/salt/issues/11080,saltstack_salt_issues_11080,"python-git missing from precise ppa, breaking gitfs

gitfs is broken in precise, due to the python-git package missing from the repo.",What changed?,"This is new, yeah. I'm not sure what changed, but it's surely broken now ;)."
saltstack/salt,https://github.com/saltstack/salt/issues/12421,saltstack_salt_issues_12421,"Allow whitespace in state IDs

When writing states that read as a guide it's annoying that it all needs to be written without whitespace: ",Should the docs adopt this as a best practice?,Heh. That's probably true :).
saltstack/salt,https://github.com/saltstack/salt/issues/12779,saltstack_salt_issues_12779,"Slow state runs on vagrant

Not sure what's going on, but simple state runs are taking way longer than usual. A state.template run is taking 17 seconds, where it used to take 3 and state.highstate is taking 27 seconds where it used to take 7.",How recent is your develop code? We had an issue a few days ago with the new lazy loader but I thought we resolved it,It's the current head.
saltstack/salt,https://github.com/saltstack/salt/issues/13361,saltstack_salt_issues_13361,"pkgrepo should only run refresh_db once

Currently pkgrepo.managed will run apt-get update for every PPA added and it's necessary to do workarounds with module.wait: https://gist.github.com/ryan-lane/085ec4fd14f337a6b09f It would be nice if pkgrepo.managed only ran refresh_db once all pkgrepo states have run. It's actually the module and not the state that does this in the develop branch. Maybe aggregates is a way to handle this?",Could you provide an example we could use to replicate this? I don't see a way that `refresh_db()` gets run twice.,It's run twice because I'm adding two PPAs (see the gist).
saltstack/salt,https://github.com/saltstack/salt/issues/13515,saltstack_salt_issues_13515,"Allow minion config options to be modified from salt-call

There's a number of settings that would be ideal to be able to modify from salt-call, like root_dir, user, etc.. If we could modify arbitrary configuration from salt-call that would be nice.","Do you mean a salt-call that actively modifies the configuration file, or just one-off configuration changes like `--local` or similar?","A one-off. We use salt-call for orchestration (using states), so the different calls will never stumble over each other, but it's necessary to change their root dir so that cache and pidfiles and such don't conflict. This is just one example. I often find myself wanting to be able to modify the config options from the CLI."
saltstack/salt,https://github.com/saltstack/salt/issues/13550,saltstack_salt_issues_13550,"git.latest and git.present state functions are misleading

git.latest will do a clone and always will fetch is no rev is listed, but will only clone and never update if rev is given and always_fetch is False (the default). git.present will just create an empty repo. At minimum git.latest is poorly named.",Do you have a suggestion for how it could be better-named?,git.latest implies it's going to always update the repo to the latest version. git.cloned is more generic and implies that it will clone a repo.
saltstack/salt,https://github.com/saltstack/salt/issues/13657,saltstack_salt_issues_13657,"Sequential operation relatively impossible currently

Due to the requisites system modifying the order of states, it's currently impossible to ensure sequential ordering of states unless you can live without watch/watch_in. It would be nice if there was a requisite that could be used to trigger states that would always occur at the end of the run and wouldn't re-order the states at all.",Does `listen.changes` work for you?,"As mentioned in IRC, this needs to work in a way where the state can say ""these files notify this state"" as well as ""this state is notified by these files"". Kind of like a requisite, but one that doesn't modify ordering. Otherwise, you may have a large number of sls files that could change and the state referencing files in them would be invalid. By being able to specify ""this file notifies this state"" you could even wrap the state in an if that ensures the state exists (formulas, for instance)."
saltstack/salt,https://github.com/saltstack/salt/issues/13726,saltstack_salt_issues_13726,"Stacktrace using new listen/listen_in feature

",Can you show me your sls file?,
saltstack/salt,https://github.com/saltstack/salt/issues/14136,saltstack_salt_issues_14136,"Document show_full_context() for use in jinja

Issue #12832 added show_full_context, which is really useful, but has no documentation. One interesting use for this is documenting templates: ",Does that change take care of it?,It does. Thanks!
saltstack/salt,https://github.com/saltstack/salt/issues/16049,saltstack_salt_issues_16049,"boto_elb.present state requires attributes argument

boto_elb.present state will throw an error if attributes isn't passed in. This affects stable and development branches.",Can you paste the state here?,"Yes, I didn't provide attributes at all. If I add attributes: [] it works: https://github.com/trebuchet-deploy/trebuchet/blob/add-example/example/orchestration/ricochet-testing.sls#L56"
saltstack/salt,https://github.com/saltstack/salt/issues/22274,saltstack_salt_issues_22274,"boto_elb state's register_instances function doesn't support test mode

Missing a check for test mode.",Should we close this one?,Yep. Looks good. Thanks @tsaridas!
saltstack/salt,https://github.com/saltstack/salt/issues/27389,saltstack_salt_issues_27389,"Docs layout issue

The sidebar overlaps the content. ![screenshot 2015-09-24 17 10 03](https://cloud.githubusercontent.com/assets/1538354/10090032/4253b3b0-62df-11e5-89ba-c4d1ac09ffc7.png)",What browser are you using? Do you have any browser plugins that would interfere with javascript coming from docs.saltstack.com? @jacobhammons,"Fixed! Much better! On Fri, Sep 25, 2015 at 10:06 AM, jacobhammons notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/28793,saltstack_salt_issues_28793,"Enable ext_pillar for minions in master/minion mode

When using secret management systems like Confidant, it's better for minions to fetch their secrets directly, rather than having the master fetch the secrets, then distribute them to the minions. It would be nice to be able to use ext_pillar on minions directly, even if in master/minion mode (it already works in masterless). In this mode it should merge the pillars from the master with the ext_pillars from the minion.",Which would take precedence?,"Ideally configurable. Default should probably be the minion overrides the master, since minion is more specific."
saltstack/salt,https://github.com/saltstack/salt/issues/1323,saltstack_salt_issues_1323,"Error ""Failed to connect to the Master, is the Salt Master running?""

I get this error when running commands on only 3-4 minions. Typically I start getting: - either no response from the minions - either partial response from a few minions - either the error message below a typical list of commands and responses [root@staging salt]# salt -L 'tmhost05,tmhost04,tmhost06' state.highstate [root@staging salt]# salt '_' test.ping {'tmhost08.ticketmatic.com': True} {'tmhost02': True} [root@staging salt]# salt '_' test.ping Failed to connect to the Master, is the Salt Master running? {} [root@staging salt]# salt '_' test.ping {'tmhost08.ticketmatic.com': True} {'tmhost02': True} [root@staging salt]# salt '_' test.ping {'tmhost02': True} {'tmhost08.ticketmatic.com': True} [root@staging salt]# salt '_' test.ping {'tmhost08.ticketmatic.com': True} [root@staging salt]# salt '_' test.ping {'tmhost02': True} {'tmhost08.ticketmatic.com': True} [root@staging salt]# salt '_' test.ping {'tmhost08.ticketmatic.com': True} {'tmhost02': True} [root@staging salt]# service salt-master restart Stopping salt-master daemon: [ OK ] Starting salt-master daemon: [ OK ] [root@staging salt]# salt '_' test.ping {'tmhost05': True} {'tmhost06': True} {'tmhost02': True} {'tmhost04': True} {'tmhost08.ticketmatic.com': True} i found no error messages in either master or minion logs restarting the minion has no effect restarting the master fixes it temporarily OS: Centos6 - 2.6.32 - x86_64 Running version 0.9.9 from EPEL (both on master and minions) Tried upgrading zeromq from 2.1.9 to 2.1.11 - no effect Tried changing the sysctl settings without result: net.core.rmem_max = 16777216 net.core.wmem_max = 16777216 net.ipv4.tcp_rmem=""4096 87380 16777216"" net.ipv4.tcp_wmem=""4096 87380 16777216""",Can you run the master in the foreground to see if any stack traces show up?,"I ran the master in the foreground, but no special error messages."
saltstack/salt,https://github.com/saltstack/salt/issues/16488,saltstack_salt_issues_16488,"Highstate Formatter fails

The highstate formatter is returning this for me from what I can tell is a completely normal run: ",What version of Salt are you using?,This happens for me on the latest release version.
saltstack/salt,https://github.com/saltstack/salt/issues/1409,saltstack_salt_issues_1409,"module/network.py: Interfaces do not list multiple addesses

I've made some changes to my clone/branch that fixes this, but, it obviously changes the data-structures a bit to get it to work. Currently: <pre> {'test.test': {'eth0:': {'hwaddr': '00:30:48:34:2a:ca', 'up': False}, 'eth1:': {'broadcast': '10.7.175.255', 'hwaddr': '00:30:48:34:2a:cb', 'ipaddr': '10.7.161.4', 'ipaddr6': 'fe80::230:48ff:fe34:2acb', 'netmask': '255.255.240.0', 'netmask6': '64', 'up': True}, 'eth1:0:': {'broadcast': '84.255.255.255', 'hwaddr': '00:30:48:34:2a:cb', 'ipaddr': '84.83.82.1', 'netmask': '255.0.0.0', 'up': True}, 'eth2.190:': {'broadcast': '1.5.2.255', 'hwaddr': '00:07:43:05:0f:84', 'ipaddr': '1.5.2.6', 'ipaddr6': 'fe80::207:43ff:fe05:f84', 'netmask': '255.255.255.0', 'netmask6': '64', 'up': True}, 'eth2:': {'hwaddr': '00:07:43:05:0f:84', 'ipaddr6': 'fe80::207:43ff:fe05:f84', 'netmask6': '64', 'up': True}, 'eth3.190:': {'hwaddr': '00:07:43:05:0f:85', 'up': False}, 'eth3:': {'hwaddr': '00:07:43:05:0f:85', 'up': False}, 'lo:': {'ipaddr': '127.0.0.1', 'ipaddr6': '::1', 'netmask': '255.0.0.0', 'netmask6': '128', 'up': True}}} </pre> Changed the to the following format in my develop branch. I'll investigate the missing ""up"" keys for eth0 and eth3, as I think it's an existing issue in _interface_ip(): <pre> {'test.test': {'eth0': {'hwaddr': '00:30:48:34:2a:ca'}, 'eth1': {'hwaddr': '00:30:48:34:2a:cb', 'inet': [{'address': '10.7.161.4', 'broadcast': '10.7.175.255', 'netmask': '255.255.240.0'}, {'address': '84.83.82.1', 'broadcast': '84.255.255.255', 'netmask': '255.0.0.0'}], 'inet6': [{'address': 'fe80::230:48ff:fe34:2acb', 'prefixlen': '64'}], 'up': True}, 'eth2': {'hwaddr': '00:07:43:05:0f:84', 'inet6': [{'address': 'fe80::207:43ff:fe05:f84', 'prefixlen': '64'}], 'up': True}, 'eth2.190': {'hwaddr': '00:07:43:05:0f:84', 'inet': [{'address': '1.5.2.6', 'broadcast': '1.5.2.255', 'netmask': '255.255.255.0'}], 'inet6': [{'address': 'fe80::207:43ff:fe05:f84', 'prefixlen': '64'}], 'parent': 'eth2', 'up': True}, 'eth3': {'hwaddr': '00:07:43:05:0f:85'}, 'eth3.190': {'hwaddr': '00:07:43:05:0f:85', 'parent': 'eth3'}, 'lo': {'hwaddr': '00:00:00:00:00:00', 'inet': [{'address': '127.0.0.1', 'broadcast': None, 'netmask': '255.0.0.0'}], 'inet6': [{'address': '::1', 'prefixlen': '128'}], 'up': True}}} </pre>",How does this hold up to #1411 ?,"I can roll up the commit from #1411 into this. I've not had a chance to get it fully tested yet on a machine, since I want to test the other `network` functions that call `interfaces()` for its data, but code is on the following branch: https://github.com/twinshadow/salt/commits/network-addr-list"
saltstack/salt,https://github.com/saltstack/salt/issues/5086,saltstack_salt_issues_5086,"Salt-call on Windows says ""KeyError: 'nested'""

On my Windows minion, with 0.15.1, I can't use salt-call at all:  The minion runs fine, and I can execute command remotely, just not locally.",Can you test using one of these Release Candidate Installers? http://166.78.11.34/downloads/dev/Salt-Minion-0.15.1-RC1-win32-Setup.exe http://166.78.11.34/downloads/dev/Salt-Minion-0.15.1-RC1-AMD64-Setup.exe Thanks!,"Yep. Had to uninstall and reinstall, but now I get "
saltstack/salt,https://github.com/saltstack/salt/issues/1506,saltstack_salt_issues_1506,"service.running not working

I’ve got a a sls file as follows  In other states I've written, the running state seems to be working, but in this case it doesn’t start the service. [root@esb1 ~]# salt-call state.highstate -l trace <snip> [INFO ] Executing state service.running for activemq [INFO ] Executing command /sbin/service activemq status in directory /root [INFO ] No changes made for activemq [root@esb1 ~]# /sbin/service activemq status ActiveMQ Broker is not running. [root@esb1 ~]# ps -ef |grep active root 27928 3069 0 15:25 pts/0 00:00:00 grep active [root@salt ~]# salt-master --version salt-master 0.9.9.1 [root@esb1 ~]# salt-minion --version salt-minion 0.10.1",what distribution are you running?,"[root@esb1 ~]# uname -a Linux esb1 2.6.32-71.el6.x86_64 #1 SMP Wed Sep 1 01:33:01 EDT 2010 x86_64 x86_64 x86_64 GNU/Linux [root@esb1 ~]# cat /etc/redhat-release Red Hat Enterprise Linux Server release 6.0 (Santiago) On Tue, Jun 26, 2012 at 5:05 PM, Thomas S Hatch reply@reply.github.com wrote: ## Ben Mathews"
saltstack/salt,https://github.com/saltstack/salt/issues/1512,saltstack_salt_issues_1512,"Ubuntu PPA: package salt is out of date.

the package salt is out of date (0.9.6) instead of 0.10.1 (as of this writing). Anyways, I would think either the package salt should become a virtual package, that installs salt-minion and salt-master, or just get rid of it completely.",What is the ppa address? Since I know that we just got 0.10.1 in there,deb http://ppa.launchpad.net/saltstack/salt/ubuntu lucid main
saltstack/salt,https://github.com/saltstack/salt/issues/1635,saltstack_salt_issues_1635,"Master randomly tries to apply a state by mistake

I have a state that clones a git repository along with a bunch of other things. Git permissions are managed with deploy keys, the master has a deploy key for its state/pillar repo and other minions have deploy keys for applications repos. The master also runs a minion and sometimes it tries to apply a state that clones an application repo. Since it doesn't have the correct deploy key, highstate fails. What's very strange is that 1) the state isn's applied at the right place, should be on other minions and 2) this seems to be completely random. I have various occurrences of this happening once every 4-5 hours, sometimes more (highstate is applied via a cronjob every 5 minutes and the states/pillar repo is pulled every minute). Example: <pre> $ salt ""*"" state.highstate minion1: minion2: minion3: master: ---------- State: - file Name: /home/epyx/exopoint Function: directory Result: True Comment: Directory /home/epyx/exopoint updated Changes: group: epyx user: epyx ---------- State: - cmd Name: rm -fr /home/epyx/exopoint/*; git clone git@git_repo /home/epyx/exopoint Function: run Result: False Comment: Command ""rm -fr /home/epyx/exopoint/*; git clone git@git_repo /home/epyx/exopoint"" run Changes: pid: 8107 retcode: 128 stderr: ERROR: Repository not found. fatal: The remote end hung up unexpectedly stdout: Cloning into /home/epyx/exopoint... </pre> Next run a couple of seconds later: <pre> $ salt ""*"" state.highstate minion1: minion2: minion3: master: </pre> I'm happy to provide more information here or on IRC (same nickname). This may be related to #1386 but I'd rather have this closed as a duplicate that pollute another ticket. @mitsuhiko's example shows that the issue is also happening on a master that runs a minion, it seems there is a pattern here.",Can you share your top.sls where you select which minions run?,"Here it is, slightly anonymized though: <pre> base: ""*"": - apt.backports - base - salt.minion - ssh - ssh.user1 - ssh.user2 - ssh.user3 ""*sentry*"": - sentry - salt.master - ssh.jenkins - app.ssh - autoindex ""*mail*"": - postfix - forward - maildir - users ""*app*nginx*"": - app.nginx ""*app*node*"": - app.service ""*app*couchdb*"": - couchdb - couchdb.replication - redis - ssh.deploy - ssh.jenkins ""*app*singleton*"": - couchdb - couchdb.replication - redis - app.service - app.nginx - ssh.deploy </pre> The corresponding minion list is: <pre> dc2-app-prod-sentry.domain dc2-app-prod-node.domain dc2-app-dev-singleton.domain dc2-app-prod-mail.domain dc2-app-prod-nginx.domain dc2-app-prod-couchdb.domain </pre>"
saltstack/salt,https://github.com/saltstack/salt/issues/3579,saltstack_salt_issues_3579,"Option for passing in pillar data on the command-line

I've been having a dilemma for a while now about stashing things like passwords and other secure information in pillar. Now, I know that pillar only exposes its data to the node its destined for and that is awesome. But all of my configuration, including pillar, is stored in version control. I don't want to keep any sensitive data in version control as repositories tend to have looser access controls and it's very difficult to purge data. So I propose an option to pass in pillar data on the command-line with `-p`:  This passed-in data should be added after both the pillar sls tree and ext_pillar. This gives the user the ability to do temporary overrides, or things like dev passwords defined in sls (which probably aren't all that secure) with production password overrides at salt runtime. And the file-based method allows them to use secret data without exposing it in the shell history.","Did I miss something? I thought it was hunter7... Another issue has been opened for this, I want to get it into 0.13","Whoops, I mentioned this idea in the channel and sounded like it was novel. I didn't bother to look at existing issues :(."
saltstack/salt,https://github.com/saltstack/salt/issues/52597,saltstack_salt_issues_52597,"Crash when mixing ext_pillar and pillar:match in /srv/pillar/top.sls

",Can you both verify the fix here? https://github.com/saltstack/salt/pull/52851 thanks,@Ch3LL the patch works as expected ! Thank you very much 😄
saltstack/salt,https://github.com/saltstack/salt/issues/1699,saltstack_salt_issues_1699,"A changed managed file that is watched causes an error

If I manually change or delete a salt-managed file that is watched by another state, then run salt, I get this error:  The file is reset/reinstalled correctly, but the watching state never gets triggered, not even in subsequent salt runs.",Do you have specific sls files that can reproduce this?,"I was just trying to better qualify the issue. It turns out it is indeed a `watch_in: - cmd` that causes this error, not any watch. Will try again after fetching any recent fixes and let you know."
saltstack/salt,https://github.com/saltstack/salt/issues/1704,saltstack_salt_issues_1704,"user.present state: typical gid support + patch

Hi, the issue: most systems want to have a separate group for each user, this group is named like the user, and is its default group. Salt can do this via templating, but the only way (i know of?) to do that via templating means that the config will fail the first time around and only succeed afterwards. The way the documentation (salt states tutorial part 3) is:  Hope this can get included in salt. On a side note, hacking this was fairly easy and I can see more contribs in the future :)",does the original sls work if you specify a - require: - group: {{ usr }} under the user?,"Sorry, should have included that line in the bug report, since I used it. I basically copypasted from the tutorial. No, it does not work, and there was no obvious way to do it, and no non-obvious way with template hacks either. That's why I created this patch. It does not work because during the first run, the state compiles down to: "
saltstack/salt,https://github.com/saltstack/salt/issues/1734,saltstack_salt_issues_1734,"Support for automatic sync with minions

It would be really handy if salt-master could be aware of any state file changes and sync unions with those. Probably some integration with file system notifications. Thanks for such a great tool!",Do you want the master to be able to automatically send out state.highstate calls to minions when files are changed in the file_roots?,"Exactly. Thanks for clearing this up. If this is already available somehow, we can close this issue, but I couldn't find anything related from docs."
saltstack/salt,https://github.com/saltstack/salt/issues/11877,saltstack_salt_issues_11877,"Incorrect detection of OpenVZ guest

I have some debian containers that are not detected as virtual machines. They don't have what grains are looking for to detect an OpenVZ platform:  On the other hand they have `/proc/user_beancounters` - though that file is present both on containers and the host box",Could you give us a little more information about the VMs in question so we can try to set up a test environment?,"I am being told that this happens when OpenVZ containers are hosted on debian squeeze (6, as I never remember the name-number matchings :P) with kernel `2.6.32-5-openvz-amd64` - containers running on such hosts don't have `/proc/vz/veinfo`"
saltstack/salt,https://github.com/saltstack/salt/issues/11889,saltstack_salt_issues_11889,"Wrong CONFIG_DIR path on OpenBSD

https://github.com/saltstack/salt/blob/develop/salt/syspaths.py#L50 sets default config path on _BSD_ to /usr/local/etc and while it may be true on FreeBSD, OpenBSD keeps all the configs in /etc",How are you installing Salt?,"I encountered it when trying to update OpenBSD port of salt from 0.17.4 to 2014.1.1. I had to tweak the build process a bit for the port to pick up those settings, but seems I got it. You can see my WIP port here https://github.com/jasperla/openbsd-wip/blob/salt/sysutils/salt/Makefile"
saltstack/salt,https://github.com/saltstack/salt/issues/2026,saltstack_salt_issues_2026,"Add Supervisor Support

Integrate support for [Supervisor](http://supervisord.org) into the modules and states. Also include tests for the integration.",Would this be just an alias to `cmd.run supervisorctl restart something` ?,"I imagine it will be quite similar. I am planning for the states to return whether the service was already started or not e.g. `supervisord.start myservice` will return `service already running` to the master. I think a `supervisord.restart` (or equivalent) state will always execute, however."
saltstack/salt,https://github.com/saltstack/salt/issues/2279,saltstack_salt_issues_2279,"postgres.user_exists fails

In the new salt-daily builds, postgres.user_exists throws an error. The revision that I believe causes this is: 2b8b49afd4b84f3357bb01d57a1fe17793ec0f2c in salt/modules/postgres.py I'm assuming the escaping is causing the error.",Could you add the salt state that causes the error? What OS is this on?,Hi @jonasvp it's in postgres_user.present. The module is: https://github.com/saltstack/salt/blob/2b8b49afd4b84f3357bb01d57a1fe17793ec0f2c/salt/modules/postgres.py#L276-281
saltstack/salt,https://github.com/saltstack/salt/issues/2428,saltstack_salt_issues_2428,"jinja template with {{ grains['saltversion'] }} ends with UnicodeDecodeError:

after upgrade to 0.10.4, i am having some weird problems with jinja templates and utf8: Excerpt from motd.jinja: ",Can you test this again against the latest git? Quite a bit of work was just done on the renderers.,"yes, it looks ok now. sorry for late response"
saltstack/salt,https://github.com/saltstack/salt/issues/2383,saltstack_salt_issues_2383,"Possible name collision -- nginx: pkg.installed being ignored.

I thought I had a typo, but been at this for over an hour now so thinking there is a bug here. My SLS is like so:  I have other statements for other package and file combos exactly the same. Commented out the file stanza and just left the pkg.installed lines and did a verbose highstate. No mention of nginx being installed. So nginx is being ignored as a package. Running on localhost with master and minion versions: 0.10.4-1precise1 OS: Ubuntu 12.04",Do you have an extra space before the source line?,Oh ok. I see what you are saying. That space was added in copying it to git hub. The source line works fine if I remove the require. The issue is the:  Just that alone doesn't see nginx installed nor any mention of salt trying to install it when a highstate is run. It just totally ignores it..
saltstack/salt,https://github.com/saltstack/salt/issues/3799,saltstack_salt_issues_3799,"file.directory - recurse: True :: giving errors

Could be a regression or maybe even a documentation change needed to reflect changes. Google Groups: https://groups.google.com/forum/?fromgroups=#!topic/salt-users/9qKd9eh5Rho Jack: ""From the look at the source code, it seems there's now a backward incompatible changes in the file state. Previously, recurse is expected to be a boolean value, but now it's expecting either 'user' or 'group'. This is definitely a bug."" ERROR: ---  --- The sls pertaining to this: --- {% set HOST = 'site-edu-au' %} # Users {{ HOST }}: user.present: - fullname: {{ HOST }} - shell: /bin/bash - gid_from_name: True - system: True - home: /var/www/{{ HOST }} {{ HOST }}-homedir: file.directory: - name: /var/www/{{ HOST }}/ - user: {{ HOST }} - group: {{ HOST }} - recurse: True - makedirs: True - require: - user: {{ HOST }} {{ HOST }}-log: file.directory: - name: /var/www/{{ HOST }}/log/ - mode: 755 - makedirs: True - user: {{ HOST }} - require: - user: {{ HOST }} --- Commenting out the ""- recurse: True"" removes the error. I am not sure if the {{ HOST }}-log: definition is an issue as it is inside the file.directory definition that is erroring. Update: It is not, I just removed the log definition and same error.",What version of Salt are you using? Which OS?,I thought this might be a documentation issu. Ubuntu 12.04.1 Salt 11.0
saltstack/salt,https://github.com/saltstack/salt/issues/33427,saltstack_salt_issues_33427,"2015.8.8.2 :: service.running falsely reports Clean

### Description of Issue/Question When running a state that ensures a service is running we are given the green light yet it has not started the service. ### Setup ",Can you make sure you are not getting a failure from this command: `/usr/sbin/service nginx configtest`?,"As I thought @Ch3LL I do get a failure for that 'onlyif' command. My concern is not being alerted to this issue. Would using an 'unless' and reversing the exit status result in a warning/error if I have a config issue? I really like using the check line to I don't end up with a non-running nginx, but for a new server that has issue, nginx never starts and I don't see an error to know this is the case."
saltstack/salt,https://github.com/saltstack/salt/issues/36763,saltstack_salt_issues_36763,"pillar.has_key no longer available in 2016.3.3?

### We use pillar.has_key as a logical statement to select which content goes into which file. Using salt 2015.8.8 and previous we had no issues. Now on 2016.3.3 this is not working. ### Setup We have this block in our base/soe/init.sls ",Can you provide the salt versions report for 2015.8 too?,@gtmanfred Good thinking. 
saltstack/salt,https://github.com/saltstack/salt/issues/39308,saltstack_salt_issues_39308,"Minions fail to connect or auth with master

### This has just popped up and there's no reason we can find as to why nor how to resolve it. ### Setup Our state file count is at 6039 if that matters. worker_threads are set to 80 ### Steps to Reproduce Issue Some random minions get the below log when connecting: ",Do you see the minion file in `/etc/salt/pki/master/minions/ops-dns01-ap-southeast-2b.think.vpc`? Did you recently delete that minion and is it still trying to auth with the master?,"_Update: I found the key path on master is missing._ Hi @Ch3LL Thanks for the response and sorry for the slow response. That issue does sound similar but I am on 2016.3.3 as you noted. An upgrade would take a few weeks to go through testing and approvals etc. I can try and raise an emergency out of process change but I need to show good cause, so I'd like to troubleshoot this some more thanks. The path (/etc/salt/pki/master/minions/ops-dns01-ap-southeast-2b.think.vpc) that is being stated as missing is indeed missing. Since I reported this, we stopped having a multi-master setup which has improved the situation dramatically. But we are now getting different errors, same symptoms though. This has been happening a lot now. See below. In this example I am matching minion ""tst-ancb.edu.au02-ap-southeast-2b.think.vpc"" yet the logging is referencing a different host ""prd-soe201633-ap-southeast-2a.think.vpc_master"". Minion ""prd-soe201633-ap-southeast-2a.think.vpc"" does exist. Other times, the ""other"" host is referenced to a minion that has since been deleted. "
saltstack/salt,https://github.com/saltstack/salt/issues/6214,saltstack_salt_issues_6214,"pecl.install failing when alreadly installed

It's failing when ""mongo"" pecl is alreadly installed. But for some reason it's not failing with gearman pecl, just mongo. I tried with only one, than other, than changing install order... For now, i have no clue what's going on.","Can you give us [some additional information](https://github.com/saltstack/salt/blob/develop/Contributing.rst) please? Specifically the version information, and the relevant pieces of the minion's debug log. Thanks!","#### In Fedora 19 First, i'm getting wrong version installed  Worked! #### Finaly So, in both Fedora 19 and Ubuntu 12.04, it's failing to install the right version of the pecl, and it's failing to install the mentioned version when other version is alreadly installed. But it's working fine when the right version is alreadly installed."
saltstack/salt,https://github.com/saltstack/salt/issues/6866,saltstack_salt_issues_6866,"pkgrepo.managed runs every highstate

I have the following state on Ubuntu:  Every highstate, it runs `add-apt-repository` and `apt-get update`. Salt should only need to do this one time then be smart enough to know it's already been added. Only an issue because the its a slow process every time.",What version of salt are you running? I fixed a problem related to this recently.,0.16.3 from the PPA
saltstack/salt,https://github.com/saltstack/salt/issues/7422,saltstack_salt_issues_7422,"Scheduler and ps.cpu_percent function

I'm not sure if this is a bug or I'm doing something wrong, but I was directed here from the salt-users mailing list. [original discussion](https://groups.google.com/forum/#!topic/salt-users/vynCM-cUeDE) I have a bunch of tasks running via the scheduler. They seem to be working fine except for ps.cpu_percent. Here's the snippet of my schedule:  When I run `salt-call --return librato ps.cpu_percent interval=5 per_cpu=True` it works as expected. The scheduler never returns anything as far as I can tell. I've refreshed my pillars, done a config.merge schedule, and even restarted the minion. I did notice that this is the only function that returns a list (instead of a dict) and it also runs longer than any of the others, maybe that could be causing issues? Any thoughts?",Do you have other scheduled tasks returning to librato?,"Yep, a bunch of other ones. `ps.cpu_times` is working fine. On Mon, Sep 23, 2013 at 4:33 PM, Colton Myers notifications@github.comwrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/24879,saltstack_salt_issues_24879,"salt.states.git.latest failure when specifying commit hash

I typically use a branch for the `rev` kwarg to `git.latest` which works fine, but specifying a commit hash as the `rev` fails in 2015.5.0:",Can you provide the state you are using to get this error?,
saltstack/salt,https://github.com/saltstack/salt/issues/2108,saltstack_salt_issues_2108,"Question about Solaris pkg module

So, I've started working on a Solaris 'pkg' module and I have some questions about how I should handle some issues.... Basically, the package management sucks big time on solaris. It does not support any dependency handling and does not support the concept of a network repository. Up until solaris 11 anyway. Solaris 11 finally supports the concept of a network repository and dependency handling. (But, alas using a completely different pkg format, IPS. They do still support pkg format packages too though.) So, with no concept of a ""network repo"" I need to be able to pass in either a http url to a specific package or a local path to a package. I think it would be cool to be able to have a salt:// path with a package so the package would automatically gets transferred to the client but I'm not sure how that would work out.... thoughts? Also, to automate the installation or remove of a file, an ""admin"" file needs to be fed to the pkgadd/pkgrm programs. We could either just require the solaris admin to have one of those in place ahead of time or the mores slick way would be for us to automatically take care of that ahead of time and write that file out to some temp directory and then point pkgadd/pkgrm at it.... Thoughts? Lastly, I don't believe that pkgadd understands the concept of a ""newer"" package. This combined with the fact that there is no network repo I'm not sure how we can make the ""latest"" pkg state feature work. If it doesn't make sense for a pkg module function to exist in the solarispkg, for example ""compare_version"" and ""available_versions"", should I just remove the functions or just have a ""pass"" in them. I guess what I'm trying to get at is that I want it to work with the salt states feature but I don't think we can do all of the features. Sorry if this is a bit much, I'll work on the module some more and submit it for review/comments as I get closer, but any suggestions on the above would be helpful. Thanks",Did I miss anything? :),"Thanks Thomas. This is exactly what I was looking for. This is a big help. @UtahDave I'll look at this a bit more but I'm not sure if this is all that feasible with sun packaging. Few reasons, I'm not sure if you can see what version a uninstalled package is. I'll look into that more though. The other reason is that the versioning scheme is horrendous. For example, here is what versions of solaris packages look like: {'ppt05.pvt.hawaii.edu': {'CSWbash': '4.2.37,REV=2012.08.24', 'CSWbdb47': '4.7.25,REV=2009.10.18_rev=p4', 'CSWbdb48': '4.8.30,REV=2010.12.06_rev=p0', 'CSWcacertificates': '20120511,REV=2012.05.11', 'CSWcas-cpsampleconf': '1.42,REV=2010.11.26', 'CSWcas-cptemplates': '1.45,REV=2011.08.28', 'CSWcas-crontab': '1.48,REV=2012.09.02', 'CSWcas-etcservices': '1.42,REV=2011.02.16', 'CSWcas-etcshells': '1.45,REV=2011.07.12', 'CSWcas-inetd': '1.42,REV=2010.11.26', 'CSWcas-initsmf': '1.44,REV=2011.04.21', I briefly looked at how puppet's sun package provider handles this and they also don't look like they handle versions. On ""update"" it seems they just blindly uninstall and reinstall.... I've got to look at this a bit more though. If you have any ideas I'm open though :) Thanks"
saltstack/salt,https://github.com/saltstack/salt/issues/2421,saltstack_salt_issues_2421,"Can't access grains in salt state when declared in included config

By default a salt minion includes its config from files in /minion.d. However, if you elect to store grains in these files they will not be available to salt states. The grain appears when calling grains.item but raises an error when accessed by a salt state.  Due to this it is also not possible to target custom grains in top.sls since the salt state will think they're not set.",What do your config files look like? I imagine that the grains are being overwritten by multiple calls,They look like the default plus a grains.conf in minion.d.
saltstack/salt,https://github.com/saltstack/salt/issues/2220,saltstack_salt_issues_2220,"Setting ""user"" in master configuration is not sufficient for running as non-root.

The documentation at http://docs.saltstack.org/en/latest/topics/nonroot.html suggests that setting the ""user"" parameter is all that is necessary to run salt as a non-root user. In fact, after setting the ""user"" parameter, salt failed to start with the following error:  It is obvious that salt-master had initially parsed the configuration file as root in order to read the user parameter, but failed to correct the permissions on the file before dropping privileges. In addition to the permissions on the config file, it looks ownership of the pid file also needs to be corrected.",How strongly does Salt actually recommend this setup?,If only there were some tool for automating system administrations tasks such as setting file permissions...
saltstack/salt,https://github.com/saltstack/salt/issues/7716,saltstack_salt_issues_7716,"Salt Roster documentation lacks substence

Per discussion on salt-users. There is nothing in the documentation about Salt Roster at http://docs.saltstack.com/topics/ssh/roster.html that is of any use. It states it exists, it is plugable, and that certain data might be in it. No mention of how to get at it in modules, how to plug new features into it, if it is available to states, etc. Several times I would have loved to have had a dict available in a state template with grains['id'] as the key, and that node's grains as the value. Would the roster be a place for this? Not answered in the doc. :)",Did you mean to close this issue?,"No, thanks. On Thu, Oct 10, 2013 at 7:15 PM, Colton Myers notifications@github.comwrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/7765,saltstack_salt_issues_7765,"salt-ssh cmd.run traceback ""NameError: global name 'thintar' is not defined""

salt-run target -r uptime works: ",Did you get 0.17 from the PPA or another source? I'm looking at the code and can see no code path whereby `thintar` is not defined.,"From whatever source bootstrap installs. salt-master 0.17.0.1-1lucid deb http://ppa.launchpad.net/saltstack/salt/ubuntu lucid main On Fri, Oct 11, 2013 at 6:55 PM, Colton Myers notifications@github.comwrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/2276,saltstack_salt_issues_2276,"cmd_yaml pillar can't be used on a per minion basis

It seems like a cmd_yaml pillar can only setup ""global"" data as it doesn't get the minion id passed as a parameter like the ext_nodes command does. (Unless I missed something in which case maybe the documentation could be expanded?) :-)",Do you have a specific use case to ref?,I have a couple dozen hosts that need just a few configuration keys each (IP addresses to bind on for a couple services). Editing pillar/top.sls and pillar/hostname.sls (or whatever) just for that feels like a lot of overhead. With an external command I can put it in one file and have my external command do a tiny bit of filtering and also programmatically provide defaults (some data I can lookup in DNS) etc.
saltstack/salt,https://github.com/saltstack/salt/issues/16268,saltstack_salt_issues_16268,"Grain precedence

http://docs.saltstack.com/en/latest/topics/targeting/grains.html#precedence Says that `/etc/salt/grains` will override the core grains but it doesn't. `/etc/salt/minion` does. e.g. adding  to `/etc/salt/grains` does not.",Could you please let us know what version of salt you are testing this against?,"Sorry guys, meant to include: "
saltstack/salt,https://github.com/saltstack/salt/issues/2435,saltstack_salt_issues_2435,"service.running check too generic

I am trying to ensure that postfix is running. To do this, I need to check for a process `/usr/lib/postfix/master`. Since service.running uses pgrep internally, I can only search for the actual name of the executable, `master` in this case. You can imagine that there might be other processes with `master` in the name. Using a `sig` like `^master$` works in this case, but it would be better if I could specify additional criteria to aid salt in finding the process to check for. PS: using `-f /usr/lib/postfix/master` for sig works, but this strikes me more like an oversight than a real solution.","Does the init script not have a working status function? That is how things should be detected, the sig is just meant to be a backup system.","also sprach Thomas S Hatch notifications@github.com [2012.11.03.1648 +0100]: It does, but salt is calling pgrep."
saltstack/salt,https://github.com/saltstack/salt/issues/3368,saltstack_salt_issues_3368,"aliases state requires nonexistent aliases.file config

The alias.present function has stopped working somewhere between 0.10.4 and 0.12.0. The reason is that it calls config.option to retrieve the value for aliases.file, which apparently I am expected to set somewhere — except the documentation does not say so. I believe that it would be wrong to require the user to specify the location of the file the alias.present function should be working on. Sure, I should be able to override it, but there ought to be a default determined by the minion applicable to the local system.",What version are you running?,I am running 0.12.0. ## The sender e-mail address used (github.com@pobox.madduck.net) is valid and specific to our correspondence. It should not indicate any affiliation with your organisation. Die verwendete E-mail-Adressse (github.com@pobox.madduck.net) ist gültig und spezifisch für unsere Korrespondenz. Sie soll in keiner Weise auf eine Verbindung mit Ihrer Organisation hindeuten. Spamtrap: github.com.bogus@pobox.madduck.net
saltstack/salt,https://github.com/saltstack/salt/issues/3371,saltstack_salt_issues_3371,"Run salt from source without virtualenv

I appreciate the information about setting up a development environment using `virtualenv`. However, I think it would make sense to allow salt to run from source directly, e.g. if all dependencies are otherwise installed on the system. My use case is that I need to maintain a small number of changes to salt's code base across my hosts. I normally roll my own Debian packages, but while Salt moves as fast as it does, I wish I didn't have to go that way. Instead, I wish I could just maintain a clone of the branch with my modifications somewhere in `/usr/local` and run it from there on demand. Would it be possible to modify the files under `scripts/*` so that when they are invoked from the source tree, they set up sys.path such that the source tree files take precedence over any system-wide installed paths? I could hack on this, but maybe you already know what there is to do, or would be opposed, or had anything else to say…",Can this be done with the PYTHONPATH environment var?,"That should be doable — and as far as I understood this is what virtualenv does, more or less. However, I have not been able to get it to do what I want. Here is what I get when I set PYTHONPATH to the source directory:  I have also tried providing /home/madduck/code/salt/salt, /home/madduck/code/salt and both, but without any changes. I did use pdb to check that sys.path was simply prefixed (not overwritten) with the above, so theoretically, all Python libs in /usr are still accessible (and findable)."
saltstack/salt,https://github.com/saltstack/salt/issues/3516,saltstack_salt_issues_3516,"Specify static file contents for file.managed 

`file.managed` is missing a way by which I can give it a static string to be written into the file, e.g.:  Sure, this can be done by a combination of `file.touch` and `file.append`, but that's a hack.",why not just use file.accumuated for this?,Because it's more complicated and less intuitive.
saltstack/salt,https://github.com/saltstack/salt/issues/3540,saltstack_salt_issues_3540,"ssh_auth.present does not require user

`ssh_auth.present` will obviously fail if the user does not exist, or the home directory is not yet created. Unfortunately, the state does not seem to honour `require: - user: …`. I think that `ssh_auth.present` could/should auto-require the user for whom it is trying to install/manage keys. If that is not desired (maybe the users are managed outside of Salt's scope), then I suppose a minion configuration option should be available to disable that.",what does your sls file look like?,"Here is the file, abridged:  Unfortunately, I currently cannot reproduce this problem. No matter what I do, the user is created before the ssh-auth state is invoked — even without the `require` statement, presumably due to non-deterministic dict sorting in Python. I don't know how to influence that."
saltstack/salt,https://github.com/saltstack/salt/issues/5785,saltstack_salt_issues_5785,"ext_pillar interface should get the node ID explicitly

It seems a bit silly that `ext_pillar` functions have to obtain the node ID from `__opts__`, when every single call to this function is about a single node ID. I propose to pass the node ID as an argument and I would happily submit the corresponding pull request.",Could this addition be done in such a way that compat would be spared? Say run in a try/except and log a warning for a few releases?,"Yeah, that's doable, and of course we couldn't just break things, but would have to have a deprecation period. Good idea about try/except TypeError…"
saltstack/salt,https://github.com/saltstack/salt/issues/5810,saltstack_salt_issues_5810,"Master not gracefully shutting down on Ctrl-C (again)

This is a reopen of #3032:  Unfortunately, _sometimes_ two Ctrl-C hits are required to stop the master.",What version of Salt are you seeing this on?,"Sorry for not being clear up front: I am using the `develop` `HEAD`. And it's been like this for days, and is still happening."
saltstack/salt,https://github.com/saltstack/salt/issues/2397,saltstack_salt_issues_2397,"Failed to authenticate - 0.10.4

Hello again, I had everything working under 0.10.3 and yesterday I upgraded to the 0.10.4 Ubuntu packages from the saltstate ppa. Now, I cannot get a user or root on the salt master to authenticate and send commands to the minion. I start the salt master using sudo and have it configured to run as user salt. I've even done a full purge and re-install of both salt-master and salt-minion packages. I have the master on host ""salt"" and the minion on host ""scanworker"". I've tried it with defining these in the master config file: client_acl: root: - .* or client_acl: salt: - .* But it still gives the same result: root@salt:/etc/salt# salt 'scanworker' state.highstate Failed to authenticate, is this user permitted to execute commands? or salt@salt:~/srv$ salt 'scanworker' state.highstate Failed to authenticate, is this user permitted to execute commands? I've also tried it without defining a client_acl entry in the master config and it doesn't work either. When I run the salt-master in debug mode, here is the output: root@salt:/etc/salt# salt-master -l debug [INFO ] Loaded configuration file: /etc/salt/master [WARNING ] Setting up the Salt Master [DEBUG ] Loaded master key: /etc/salt/pki/master.pem [INFO ] Preparing the root key for local communication [DEBUG ] Removing stale keyfile: /var/cache/salt/.root_key [INFO ] Preparing the salt key for local communication [DEBUG ] Removing stale keyfile: /var/cache/salt/.salt_key [INFO ] salt-master is starting as user 'root' [INFO ] Current values for max open files soft/hard setting: 1024/4096 [WARNING ] The value for the 'max_open_files' setting, 100000, is higher than what the user running salt is allowed to raise to, 4096. Defaulting to 4096. [WARNING ] Raising max open files value to 4096 [WARNING ] New values for max open files soft/hard values: 4096/4096 [INFO ] Setting up the master communication server [INFO ] Starting Salt worker process 0 [INFO ] Starting the Salt Publisher on tcp://0.0.0.0:4505 [INFO ] Starting Salt worker process 1 [INFO ] Starting Salt worker process 2 [INFO ] Starting Salt worker process 3 [INFO ] Starting Salt worker process 4 [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] Missing configuration file: /root/.salt [DEBUG ] Missing configuration file: /root/.salt [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] Missing configuration file: /root/.salt [DEBUG ] Missing configuration file: /root/.salt [DEBUG ] Missing configuration file: /root/.salt [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [DEBUG ] Missing configuration file: /root/.salt [DEBUG ] Missing configuration file: /root/.salt [DEBUG ] Missing configuration file: /root/.salt [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [INFO ] Worker binding to socket ipc:///var/run/salt/workers.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [INFO ] Worker binding to socket ipc:///var/run/salt/workers.ipc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [INFO ] Worker binding to socket ipc:///var/run/salt/workers.ipc [DEBUG ] Missing configuration file: /root/.salt [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [INFO ] Worker binding to socket ipc:///var/run/salt/workers.ipc [DEBUG ] Missing configuration file: /root/.salt [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master_event_pull.ipc [INFO ] Worker binding to socket ipc:///var/run/salt/workers.ipc [INFO ] Clear payload received with command publish [INFO ] Clear payload received with command publish At the beginning, it says that it is starting as user root, even though I've configured it to start as user salt. The last 2 INFO messages are what it displays after I attempted to run 2 salt commands on the master. When I restart the salt-minion, these additional messages are displayed by the salt-master: [INFO ] Clear payload received with command _auth [DEBUG ] This salt-master instance has accepted 1 minion keys. [INFO ] Authentication request from scanworker [INFO ] Authentication accepted from scanworker [INFO ] Clear payload received with command _auth [DEBUG ] This salt-master instance has accepted 1 minion keys. [INFO ] Authentication request from scanworker [INFO ] Authentication accepted from scanworker [INFO ] AES payload received with command _pillar [DEBUG ] Jinja search path: '/var/cache/salt/files/base' [INFO ] AES payload received with command _minion_event [INFO ] Clear payload received with command publish The minion never indicates that there is any attempt by the master to send it a command: dev@scanworker:~$ sudo salt-minion -l debug [INFO ] Loaded configuration file: /etc/salt/minion [WARNING ] Setting up the Salt Minion ""scanworker"" [DEBUG ] Attempting to authenticate with the Salt Master at 10.8.0.13 [DEBUG ] Loaded minion key: /etc/salt/pki/minion.pem [DEBUG ] Decrypting the current master AES key [DEBUG ] Loaded minion key: /etc/salt/pki/minion.pem [DEBUG ] Decrypting the current master AES key [DEBUG ] Loaded minion key: /etc/salt/pki/minion.pem [INFO ] Authentication with master successful! [DEBUG ] Loaded minion key: /etc/salt/pki/minion.pem [DEBUG ] Decrypting the current master AES key [DEBUG ] Loaded minion key: /etc/salt/pki/minion.pem [DEBUG ] Decrypting the current master AES key [DEBUG ] Loaded minion key: /etc/salt/pki/minion.pem [DEBUG ] Loaded minion key: /etc/salt/pki/minion.pem [INFO ] Minion is starting as user 'root' [DEBUG ] Minion ""scanworker"" trying to tune in [DEBUG ] Minion PUB socket URI: ipc:///var/run/salt/minion_event_773d46d227dca1fbd4d47130a9439418_pub.ipc [DEBUG ] Minion PULL socket URI: ipc:///var/run/salt/minion_event_773d46d227dca1fbd4d47130a9439418_pull.ipc The odd thing is that I can go onto the minion and run salt-call commands and they work just fine. They pull the files from the salt master and I can run state.highstate to set the state. Is there some new config in 0.10.4 that I have to setup? If so, can you point me to the documentation for it? P.S other than this issue, salt is very cool! Thanks! Nick","Can you delete the jobs cache, restart the master, and see if the problem goes away? rm -rf /var/cache/salt/jobs","The problem does not go away after removing that jobs directory. Earlier today, I even did a full removal/purge of the salt-master/salt-minion packages, re-installed them, and I still have the same problem."
saltstack/salt,https://github.com/saltstack/salt/issues/2411,saltstack_salt_issues_2411,"pip.installed not honoring the require declaration

If I do this:  I then tried to add order:1 to the pkg.installed to force the installation of python-pip to happen first, and I get the same error. Why can't I install python-pip and then use pip to install celery? To be fair, I have a large number of additional things that I'm trying to install along with pip and celery, but I trimmed those out. But this seems odd. Thanks, Nick",What is the output when not using test=True?,"Yes, I'm using test=True. I like to test the state before pushing it to fix any errors. There was no output when not using test=True. In this case I'm trying to set 58 states. When I ran ""salt 'host' state.highstate"" without the test=True, the following happened: - It missed 7 states (seems to have just skipped them) - it installed pip but did not install the pip package celery. - 2 states returned False because they were dependent on 1) celery, 2) one of the missed states. - The shell returned to the prompt before it was finished, so I had to run it without test=True to enact the state and then re-run it with test=True to get it to return the results. I'm running these commands from the master using sudo to run it as root."
saltstack/salt,https://github.com/saltstack/salt/issues/6588,saltstack_salt_issues_6588,"pkg.installed amd64 package on 64bit Ubuntu 12.10 failing due to insufficient arch testing

I have a 64bit Ubuntu 12.10 VM and it is running salt 0.16.2 masterless.  So, I go back and change my state declaration to remove the "":amd64"" and re-run the sls file and it is properly detected as installed. It seems that the code that checks for an installed package post installation needs to be updated to correctly process this architecture variable. I think this is related to: [#6303](https://github.com/saltstack/salt/issues/6303).",Can you potentially test on the latest `develop` branch?,I tested on the latest develop branch. It does not exhibit this problem. It seems to be fixed.
saltstack/salt,https://github.com/saltstack/salt/issues/7226,saltstack_salt_issues_7226,"Salt Mine needs a function to flush contents

Once entered into the mine via mine.send, there is no function to remove data. We need some new functions, perhaps invoked along the lines of:  I tend to think of `flush` as more coarse-grained than `delete`. The most natural API will be greatly affected by details of the mine data structure of which I currently remain ignorant.","Does `clear=True` work for you, @sbworth? Or are you still looking for more refined flushing?","I would personally like to see the ability to flush on a more fine-grained basis, but I think there is a bigger problem. The fact that we both failed to notice that mine.update includes the ability to flush constitutes at least modest evidence that the API for that operation is poorly chosen. Since all changes of system state could, in principle, be represented by  Given the fact that the mine is a sort of simplistic _database_ (really a data store), a traditional Create, Read, Update, Delete model seems appropriate. We have Create (send) and Read (get), but are mixing Update and Delete (or Delete All). I won't cry too hard if it is decided that this won't change, but I think the API can be improved and earlier is better than later to avoid backwards-compatibility issues."
saltstack/salt,https://github.com/saltstack/salt/issues/2653,saltstack_salt_issues_2653,"[bug] running a longer running job over salt takes way too much time to finish - compared to running the same over ssh (0.10.5)

I've just run into a very strange behaviour. Having a command, that takes some time to run, takes extreme amount of time when running over salt `run.cmd`. Let's have this example command: `wget http://archlinux.supsec.org/iso/2012.11.01/archlinux-2012.11.01-dual.iso --quiet` It takes about half a minute running directly on the minion machine. But when running the same command on the same box via salt master, it takes three times more. I'm digging around the minion code, but I don't have a clue, why this may be happending. I've used the --quiet option to rule out the possibility that the problem is in transfering command's stdout from minion to master. I've also run the test several times to make sure it wasn't network hickup. running over salt: ",can you do this with 0.10.5? We have made significant changes since then in the communication system.,Unfortunatelly yes. It's slow even when calling salt-call directly on minion. 
saltstack/salt,https://github.com/saltstack/salt/issues/3970,saltstack_salt_issues_3970,"Syslog Logging Timeformat is non-standard

From RFC3164 timeformat send using syslog need to be in HH:MM:SS where HH=24 hours format. But on 0.13.1 the time format if `log_file: file:///dev/log` contains miliseconds: ",Does their being there cripple functionality elsewhere?,"On 2013-03-07, at 10:12 PM, Joseph Hall notifications@github.com wrote: Yes, but as it break syslog protocol it cause some syslog daemon to just drop that invalid log entry"
saltstack/salt,https://github.com/saltstack/salt/issues/5211,saltstack_salt_issues_5211,"salt.states.pip.installed bug with changes detection 

I just noticed that pip.installed was always telling me a new package was installed while it's not (on 0.15.1) here are the logs:  zope.interface was already there before and at this version. is that because it's the last one on the list? something don't catch it properly? is it the `.` character in the module name?",Do you have the sls that will reproduce this?,"this is with pip==1.3.1 python-pip packaged with Ubuntu precise is 1.0. which is buggy. I had to write a state that install or upgrade pip: here is one that might work for you, I just removed from my real `.sls` a lot of things. but it still requires `archive.extracted` state, old version here: https://github.com/bclermont/states/blob/master/states/_states/archive.py  argparse again!"
saltstack/salt,https://github.com/saltstack/salt/issues/7403,saltstack_salt_issues_7403,"salt 0.17rc1 integration test opensuse fails salt version

I'm updating my salt package for opensuse/suse to in preparation for salt 0.17 and I want to use unit testing before package shipping but it fails with this:  Is this something that can be fixed in salt 0.17rc2?? This is using salt 0.17rc1 from pypi and salt-testing 0.5.0 from pypi",Can I close this ticket?,"Yes, if it is already fixed in Develop no problem"
saltstack/salt,https://github.com/saltstack/salt/issues/7436,saltstack_salt_issues_7436,"compile error salt from git 0.17.0-185-g65cc54b

with commit 6829daaf9c43f5f52f4afba5c0a35f1bac25870a al network templates should be in site-packages/salt/templates if i'm correct, but that directory isn't created with setup.py. pwd: /usr/lib/python2.7/site-packages/salt  result no jinja files...in compiled salt dir.",Can you try from the latest develop?,"I was installing from develop. But I will update the build on my system and look for the template dir Op 25 sep. 2013 22:25 schreef ""Colton Myers"" notifications@github.com het volgende:"
saltstack/salt,https://github.com/saltstack/salt/issues/11260,saltstack_salt_issues_11260,"Saltstack feature request for winrm

Saltstack salt-master could gain winrm support with these libraries: - https://pypi.python.org/pypi/pywinrm - http://en.community.dell.com/techcenter/systems-management/w/wiki/3560.python-wsman-api-open-source.aspx - https://pypi.python.org/pypi/txwinrm WinRM allows you to call native objects in Windows. This includes, but is not limited to, running batch scripts, powershell scripts and fetching WMI variables. For more information on WinRM, please visit http://msdn.microsoft.com/en-us/library/aa384426.aspx This would give saltstack a better method of talking to windows minions. and it would gain a lot of cool stuff windows is building with winrm and powershell Like remote execution. This needs to be investigated further in what is the most usefull library to use for salt.",Do you have working experience with it? I was looking at putting together a proxy minion module.,No but was thinking about it after a powershell course
saltstack/salt,https://github.com/saltstack/salt/issues/25043,saltstack_salt_issues_25043,"spm build should change the acl's to root:root

When you create a salt spm package it will incorporate the acl's from the location  when you install this wit spm install zsh all acls are transferred to /srv/salt/zsh/ so instead of root owning these files my own user test owns these files..","Should they be owned by `root`? Or the `salt` user? Should we just throw away user and group ownerships, and just assign them to the user than ran `spm`?","@techhat I think that's a good solution, will keep testing spm, it looks very good already!"
saltstack/salt,https://github.com/saltstack/salt/issues/28588,saltstack_salt_issues_28588,"openSUSE Leap not recognized as 'Suse' os grain and os_family grain (2015.8.1 ) 

On A fresh install of opensuse Leap 42.1 salt can't recognize the new OS salt-call grains.items gives the following output: ",Which grains do you think are incorrectly reporting `OpenSUSE Leap`?,Will test this this weekend @jfindlay
saltstack/salt,https://github.com/saltstack/salt/issues/33834,saltstack_salt_issues_33834,"salt develop AttributeError: 'module' object has no attribute 'takewhile'

### Description of Issue/Question salt state.apply gives the following error:  ### Setup salt version : 2016.3.0rc3.2229.gbc0f902-1 ### Steps to Reproduce Issue build saltstack from develop branch, run salt-call sys.doc or salt-call state.apply ### Versions Report can't run version report, same message running develop from commit: 788557851937bba762dd7efbb85eec2ea11d23e5",Did you have a prior install from git already? Sometimes problems like this can be caused by stale `.pyc` files.,@terminalmage can the label 'Cannot Reproduce' be removed?
saltstack/salt,https://github.com/saltstack/salt/issues/50320,saltstack_salt_issues_50320,"state cron.absent failes if cron module isn't loaded (not installed)

### Description of Issue/Question I have a state file in which I want a cron entry absent, but I have a minion without cron so the whole module cron isn't loaded and this fails the state ### Setup archlinux setup without cron only systemd. ### Steps to Reproduce Issue state: ","can you clarify why you think this is a bug? I view this as expected behavior, as the cron module should not be loaded if cron is not installed","@Ch3LL it's not a bug but a feature request. I was thinking about an option as ignore_errors if module couldn't be loaded. If I have a state in which for example a cron item should be absent but the machine in question doesn't have cron installed this state will fail at the moment because the module couldn't be loaded, I would like to see a way that if an state item is absent or not present there should also be a way to skip the failure. and have the state finish. If the state has something like present or it should actually do something if the module isn't loaded it should fail."
saltstack/salt,https://github.com/saltstack/salt/issues/5192,saltstack_salt_issues_5192,"salt master highstate commands returns sometimes without any actions or results

A few times when trying to issue highstate from the master to a specific minion, nothing happens and a 2nd try is needed. No output and no execution starts on the minion. I remember an earlier bug where minions sometimes was missing. Maybe its related?",What version of zeromq are you running? Sounds like a ZeroMQ2 issue, So at least the master is version 3. But some minions has the older version of salt 0.13.x and pyzmq 2.2.0.1. Is there a best practice on upgrading minions non-interactive?
saltstack/salt,https://github.com/saltstack/salt/issues/8686,saltstack_salt_issues_8686,"Returners not available when doing highstate as startup_states

In my setup I'm using these configuration options on the minion:  The idea is that when a new machine spawns up and auto highstates, the result should be returned to a custom returner for someone to be able to manually check the result at a later time, or to issue alarms if a state failed. But the custom returners are not synced on first run, only on the second run will it be available. Is there a way to change this behaviour? Other input on doing this kind of setup?",What version of salt are you using? There have been some recent changes to the syncing operations which may have fixed your issue.,Sorry 
saltstack/salt,https://github.com/saltstack/salt/issues/8907,saltstack_salt_issues_8907,"cmd.wait watch doesn't work together with service.running - enable: true

I have something like this: ",Does it perhaps matter that you have `enable: true` instead of `enable: True`?,"I tripped over this again today on salt 0.17.4. Having service.enable: true breaks things. This is the state that I experience problems with today:  The service is provided by ubuntu upstart. Only when removing the ""enable"" altogether will it say that the status was changed and that the service is started."
saltstack/salt,https://github.com/saltstack/salt/issues/2581,saltstack_salt_issues_2581,"Minion doesn't connect to master

I've got a minion in a machine that does not connect to the master. The same minion used to work but not longer. It gets stuck when starting  The master is accessed by other minions without problems. If've reinstalled the machine but it keeps getting stuck. It's as if the master has something stuck for this minion. The new key doesn't show up in the salt-key -L command. Where can I look for some clue? Cheers","could there be another hep-cream02.ecm.ub.es? Is there anything that can cause the minion to not get to the master on ports 450{5,6}","It's the only hep-cream02 there is. In principle it's running with the same minion config as the rest of the nodes... On 16 November 2012 17:01, Thomas S Hatch notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/2639,saltstack_salt_issues_2639,"mysql_user does not set the password for created user

 I can connect via the mysql cli tools as the user 'username' without using a password. When I try the password, it fails because this user has not been setup with one.",What related output do you get when you run the state?,"Okay I feel stupid now. It was an order of operations issue. The mysql_grant was getting executed before mysql_user. I fixed it via a require, thanks."
saltstack/salt,https://github.com/saltstack/salt/issues/3539,saltstack_salt_issues_3539,"Inconsistent puppet.facts responses

I have one or more minions that are responding to a puppet.facts in the API but not the CLI. In the CLI, this returns true: salt cbase01.eu1.foo.com puppet.facts --out text However, the following API code doesn't see it:  I also tried with cmd_cli and got the same result. This host is behind a remote syndic. It's worth noting that the latency to this remote syndic seems high. The timeout on the client might be 60s, but how long does the master master wait on the response from the remote syndic? Some (but but all) of the minions behind this syndic are also doing the same thing. This is reproducable. Versions... all masters, syndics and minions are from development branch, git commit 3deb4ba1fa76adf5525798c8b58afde1e42158cf.",What about grains.items? Can you try with other commands? This does not look like it would be puppet.facts specific,"Same behaviour. This returns data: salt cbase01.eu1.foo.com grains.items However, this code does not return any data for that host. "
saltstack/salt,https://github.com/saltstack/salt/issues/3581,saltstack_salt_issues_3581,"Master Hung

I come in Monday morning and salt seems to be borked. Every operation is hanging even with the timeout specified. The salt-run manage.down command is also hanging. There's nothing in the master log file. I need to know how to debug this. This hangs indefinitely. salt-run -t 10 manage.down This will return a bunch of hosts and then hang salt -t 10 '*' test.ping This does the same thing salt -t 10 '*' puppet.facts Version is 0.12, comit id g671374a",can you show me the output from: ps aux | grep salt and does restarting the master help?,"Output from master is: [us1] root@truth:~# ps aux | grep salt root 2744 0.0 0.0 7944 1056 pts/2 S+ 19:45 0:00 grep --color=auto salt root 3152 0.0 0.0 4236 584 ? Ss 19:05 0:00 /bin/sh -c /root/saltdb-update-facts.py -m 10.169.27.73 -d us1.bitcasa.com root 3159 0.0 0.2 216672 20348 ? Sl 19:05 0:00 /usr/bin/python /root/saltdb-update-facts.py -m 10.169.27.73 -d us1.bitcasa.com root 5154 0.5 0.7 313208 59204 ? Ssl Jan31 30:20 python /usr/bin/salt-master root 5251 0.0 0.2 193488 22428 ? S Jan31 3:02 python /usr/bin/salt-master root 5258 0.0 0.2 169860 17756 ? Sl Jan31 0:04 python /usr/bin/salt-master root 5259 0.0 0.2 233512 16744 ? Sl Jan31 1:24 python /usr/bin/salt-master root 5271 0.0 31.3 2867676 2400620 ? Sl Jan31 1:53 python /usr/bin/salt-master root 5278 0.0 31.4 2839400 2402272 ? Sl Jan31 1:53 python /usr/bin/salt-master root 5744 0.0 0.2 355064 22784 ? Ssl Jan31 0:29 python /usr/bin/salt-minion root 20906 0.0 0.2 212972 20340 pts/1 Sl+ 18:05 0:02 python /usr/bin/salt -t 10 \* test.ping Pid 3159 is a process run from cron that updates a fact database. It's been running for quite some time, obviously also stuck on the fact it gets no data. Pid 20906 is an attempt to run test.ping I ran earlier and forgot about. Stopping these two processes and running new salt commands still results in an indefinite hang. I COULD restart the server, but obviously doing that will most likely clear the problem."
saltstack/salt,https://github.com/saltstack/salt/issues/14995,saltstack_salt_issues_14995,"seeing duplicate responses when launching states/modules across multiple minions from the master

Hi, For a while now (not sure which release this started with), I have been seeing alot of duplicate responses for my state and module runs when launched from the master. Here are some examples... First I am showing you how many web servers (3) I am targetting. ",Can you please verify that is the issue?,"yep, i did have multiple processes running. i checked that at the time on a couple of them, and must have mistaken one extra process as a thread. prior to this, i rolled out a cron that runs at 4 hour intervals (randomized minute) to restart salt-minion bc my minions would stop responding altogether. this, combined with monit (which restarts salt-minion if it finds it not running) has had an unfortunate result of leaving many salt-minion procs running concurrently. now to clean up my mess! thx"
saltstack/salt,https://github.com/saltstack/salt/issues/2852,saltstack_salt_issues_2852,"Depending on how the service state is called, watch requisite will not always restart on file.managed modification

It may be best to first read the gist here first: https://gist.github.com/4251989 Essentially depending on how I use the service state, the watch requisite is not restarting my daemon on modified files, but will always restart when placing the file fresh on a minion. Moving the state to its own ID Declaration, seems to clear up this inconsistent behavior",What OS/distro are you using?,"Archlinux with salt 0.10.5. According to the state output, it doesn't even try to restart the service, rather it just confirms that the service is running and moves on."
saltstack/salt,https://github.com/saltstack/salt/issues/2809,saltstack_salt_issues_2809,"KeyError: 'file.source_list' in file.managed state

Hi, on a fresh installation (virtualenv+pip+git-develop-branch (7ff319f1d5af81e)) on a Debian/wheezy machine. i get an error: <pre> State: - file Name: /etc/apt/sources.list.d/wheezy.list Function: managed Result: False Comment: An exception occured in this state: Traceback (most recent call last): File ""/root/salt/salt/state.py"", line 1206, in call *cdata['args'], **cdata['kwargs']) File ""/root/salt/salt/states/file.py"", line 662, in managed source, source_hash = __salt__['file.source_list']( KeyError: 'file.source_list' Changes: </pre> I looked a bit deeper into it. The KeyError happens, when the function is not available. In this case it is file.source_list. In the source in salt/modules/file.py:900 the function is defined when installed this function is not found anymore, hence the KeyError. When i list all functions in the file module with  Any ideas where to look? Greetings, Jörg","Could you try verifying that your install is up to date? For example, on Ubuntu, `sudo python setup.py install --force` Thanks!","I'm sorry, i found the problem. All my fault. I used different version of salt, used different VMs, etc. But most of the time i just copied my salt states tree to the test machine. I had in '_modules_' a file.py module. Some earlier version lacked some functionality of the file module and i simply copied a newer version into the _modules_ directory to distribute it to older salt-minon. Maybe a bit naive approach. Well, since i deleted that file, Everything works as expected. Sorry, for all the noise. And thanks for your replies."
saltstack/salt,https://github.com/saltstack/salt/issues/7558,saltstack_salt_issues_7558,"Minion id changes from 0.16.4 to 0.17.0, looses domain name part

This patch (https://github.com/saltstack/salt/pull/6734) seems to break the id grain on debian systems (and maybe many others)! We just got an update from 0.16.4 to 0.17.0 through unattended upgrades (maybe a bad idea for salt). Now all our minions are gone, because the id changed and new minion keys are generated, which of course are unknown to the master. These ids do not include the domain part anymore. This is really bad. It's not the first time the id generation changes and breaks everything. With such a crucial part of the system, i think there should be taken more care. Sorry for the angry tone, but this is a bit frustrating.",Do you have an /etc/hostname on these hosts?,"Yes, and this is the reason why the minion id changes. But on Debian the /etc/hostname does not include the domainname. Before https://github.com/saltstack/salt/pull/6734 the next rule would match (fqdn = socket.getfqdn() ) and then the fullname including the domain part is used."
saltstack/salt,https://github.com/saltstack/salt/issues/2822,saltstack_salt_issues_2822,"Salt most likely ignores -t option when executes with -b option.

Chef exits fast and skips most of hosts when being executed with -b option. No error is being generated. ==============10.5 version of chef================ #time (salt -t20 -b10 '*' test.ping | grep -c True) 11 real 0m6.642s user 0m0.400s sys 0m0.156s # time (salt -t20 -b10 '*' test.ping | grep -c True) 190 real 0m8.305s user 0m0.604s sys 0m0.232s # time (salt -t20 '*' test.ping | grep -c True) 454 real 0m45.111s user 0m0.868s sys 0m0.336s # time (salt -t20 '*' test.ping | grep -c True) 454 real 0m44.737s user 0m0.852s sys 0m0.380s # time (salt -t20 -b10 '*' test.ping | grep -c True) 138 real 0m6.526s user 0m0.540s sys 0m0.228s # # Also please check that timeout option is being parsed from config correctly because it seems like it does not have effect.",What version are you running?,"its all in the ticket. 0.10.5 version. By “exit fast” I mean it is done in 8 seconds when without –b it is running for 40 seconds (look at the time output which is also in the ticket). From: Thomas S Hatch [mailto:notifications@github.com] Sent: Friday, December 07, 2012 7:00 AM To: saltstack/salt Cc: Eugene Aleynikov Subject: Re: [salt] Salt most likely ignores -t option when executes with -b option. (#2822) You mean Salt exits fast? What version are you running? — Reply to this email directly or view it on GitHubhttps://github.com/saltstack/salt/issues/2822#issuecomment-11132681."
saltstack/salt,https://github.com/saltstack/salt/issues/2986,saltstack_salt_issues_2986,"Windows freeze

Hi, I succesfully installed salt on Windows (2008 Server R2). Now, I wanted to freeze it so we may deploy on the rest of our servers. With about 100 systems you don't really want to download and install Visual Studio on each system. Even managed to succesfully freeze it like mentioned above (had to add Visual Studio to the env path - it could not find msvcp90.dll). But, as soon as I start the frozen app it relly freezes at ""...[DEBUG] Loaded minion key: c:\etc\salt\pki\minion.pem ...."". Do you have any idea? Started it with ""-l all"" but that's all the info I get. Worked like a charm on Linux (what else) but Win really gives me the headaches.",What version of Salt are you using?,The actual one. 0.11.1
saltstack/salt,https://github.com/saltstack/salt/issues/3150,saltstack_salt_issues_3150,"Salt state signalising success while in fact failing

I wrote a salt state to set up a VPN. The important snippet is:  on the next run. This is strange, because it is signalising success while the service is in fact enabled but not running. That is a bit strange I think. It should fail unless the service is running...",Can you try out this small patch and see if it solves the problem?,"To be honest I am not sure I can really reproduce the same situation. My openvpn service was quite messed up at that time (which is fixed now) and I can't really break it again, I use it at work. But I read the code and it does solve the problem. If you, however, really really want me to test it, I will somehow manage, but I don't really have too much time to mess with it at the moment. The change is so small that I would rather close the issue straight ahead instead of spending hours to test it..."
saltstack/salt,https://github.com/saltstack/salt/issues/3628,saltstack_salt_issues_3628,"Unable to use UTF-8 string in pillar

When using UTF-8 string in pillar, I get this error when using it in a jinja renderer: ",Do you have an example that we can use to test this out? It looks like we need to modify the Jinja a bit here,And example of non-ascii? I used something like this in my pillar file: warning: 'these are the norwegian extra alphabet charaters æøå ÆØÅ' 2013/2/7 Thomas S Hatch notifications@github.com
saltstack/salt,https://github.com/saltstack/salt/issues/7781,saltstack_salt_issues_7781,"Consolidate gitfs and hgfs

There is currently a decent amount of copy/paste between gitfs and hgfs. It may be worth consolidating this common code into a vcsfs python module that both gitfs and hgfs (and soon hopefully [svnfs](https://github.com/shadowfax-chc/salt/blob/svnfs/salt/fileserver/svnfs.py)) can leverage. Thoughts?",What are your thoughts on how to differentiate? How do you plan to handle `__virtual__()`?,"you can see what i currently have implemented for svnfs here: https://github.com/shadowfax-chc/salt/blob/svnfs/salt/fileserver/svnfs.py As for consolidating, my first thought is to still maintain a separate gitfs and hgfs, each with their own virtuals, but refactor some of the common code into a new python module that they both import."
saltstack/salt,https://github.com/saltstack/salt/issues/3618,saltstack_salt_issues_3618,"Assertion failed: ok (mailbox.cpp:84)

When I try to make use of the reactor, I end up with an Assertion failed message. After that message, no minions can authenticate to the master and trying to stop the master process through the init script fails. I do see the master process running and need to use killall to stop it. If I then remove the reactor: piece of the master config and start the master process, everything starts working again. ",Do you have zombies when this happens?,"Yes, I'm using head. I don't know how to tell if I have zombies or not... I'm going to guess that I do because that would explain the attitude the processes give me. When it's pissed, ps aux shows me this. It's set to have the default number of processes. root 10364 1.3 2.0 136600 21412 ? S 11:05 0:00 /usr/bin/python /usr/bin/salt-master -d root 10371 0.0 1.5 170972 16076 ? Sl 11:05 0:00 /usr/bin/python /usr/bin/salt-master -d root 10374 0.0 1.5 170300 15564 ? Sl 11:05 0:00 /usr/bin/python /usr/bin/salt-master -d root 10379 0.0 1.5 186692 15808 ? S 11:05 0:00 /usr/bin/python /usr/bin/salt-master -d When it's working fine... root 10418 0.0 1.6 235960 16444 ? Sl 11:05 0:00 /usr/bin/python /usr/bin/salt-master -d root 10419 0.0 2.0 136600 21408 ? S 11:05 0:00 /usr/bin/python /usr/bin/salt-master -d root 10426 0.0 1.5 170960 16068 ? Sl 11:05 0:00 /usr/bin/python /usr/bin/salt-master -d root 10427 0.0 1.5 170824 15852 ? Sl 11:05 0:00 /usr/bin/python /usr/bin/salt-master -d root 10428 0.1 2.2 222300 22768 ? Sl 11:05 0:00 /usr/bin/python /usr/bin/salt-master -d root 10435 0.1 2.2 287840 22768 ? Sl 11:05 0:00 /usr/bin/python /usr/bin/salt-master -d root 10436 0.1 2.2 287840 22764 ? Sl 11:05 0:00 /usr/bin/python /usr/bin/salt-master -d root 10437 0.1 2.2 287840 22772 ? Sl 11:05 0:00 /usr/bin/python /usr/bin/salt-master -d root 10438 0.1 2.2 287848 22768 ? Sl 11:05 0:00 /usr/bin/python /usr/bin/salt-master -d"
saltstack/salt,https://github.com/saltstack/salt/issues/3719,saltstack_salt_issues_3719,"grains.item virtual sends different results

When running grains.item, the results are not always consistent. Sometimes the result is just a string, but other times it's returned as a dictionary. sentinel2:~# salt-call grains.item virtual {'virtual': 'physical'} [root@webgate1 webgate1]# salt-call grains.item virtual local: xen root@salt:~# salt-call grains.item virtual {'virtual': 'VMware'} I've been trying to bring my infrastructure up to a standard so things are in a bit of a chaotic mess at the moment. Unfortunately, that means I've not been able to produce consistent results because almost every machine is in a different state right now. :( I wanted to at least create the issue so it's not forgotten by me and if anyone has time they can test to tell me if the latest and greatest salt deals with this inconsistency.",What versions are they on?,Sorry... it was because of the different versions. It went from 'how I would like it to work' to 'how it works' and the different versions made me think it was going the other direction and then I noticed a contradiction and.... ya....
saltstack/salt,https://github.com/saltstack/salt/issues/8984,saltstack_salt_issues_8984,"rhel-based boxes have no pillar data

I have debian minions as well as centos5 and mlos minions. In the master config I put ""pillar_opts: True"" to make sure that /some/ data will exist. On debian based machines, I get a big pillar of data. It exists whether I have anything in top.sls being applied to the minion or not. This is expected behavior. On rhel-based boxes, this is not the case. With zmq2, the master doesn't even create /var/cache/salt/master/minions/<minion_name>/. With zmq3, it will create /var/cache/salt/master/minions/<minion_name>/mine.p. This file will have only a single '�' character in it. On these boxes, salt-call state.highstate will run fine as long as no states require pillar data to be present. This is a new issue since upgrading to 0.17.2, but I made a big leap so I don't know exactly when this began. Running salt-master and salt-minion with '-l debug' provide nothing useful. Someone in IRC mentioned that this could indicate the master is dying while trying to render the pillar data. I don't know how to debug this further.",Can you test on the latest `develop` branch? I think Tom may have fixed this issue just today -- I want to verify whether it's still an issue or not.,This is indeed fixed in develop! Now I just need to wait for 0.17.3. Thanks!
saltstack/salt,https://github.com/saltstack/salt/issues/3751,saltstack_salt_issues_3751,"pip.installed editable: raising exception on local paths w/ no egg

https://github.com/saltstack/salt/blob/develop/salt/modules/pip.py#L237 above checks for egg. Syntax for `pip install -e` local path doesn't allow egg. (?) http://www.pip-installer.org/en/latest/logic.html#editable-installs Not sure enough to PR, I think removing the condition at L237 could break a test (haven't had time to check) and still new the internals. Here is the state i'm trying to get going:  I bought a laptop and made a rule not to install / apt-get / configure anything without making states. lol!",Did this get resolved with the above pull req?,"Yeah this is in git now On Mar 8, 2013 7:12 PM, ""Colton Myers"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/3185,saltstack_salt_issues_3185,"Enable the Jinja2 {% with %} tag - it's in contrib.

This allows setting a bunch of variables that won't persist beyond the block, which is a lot cleaner than {% set %}.",Do you have a link? This should be easy to add,http://jinja.pocoo.org/docs/extensions/#with-statement
saltstack/salt,https://github.com/saltstack/salt/issues/3189,saltstack_salt_issues_3189,"CPU usage on windows XP

Hi, I've noticed excessive CPU usage by salt-minion on XP using the install @ http://saltstack.org/static/downloads/Salt-Minion-0.11.1-Setup-amd64.exe. The usage spikes from none to 100% constantly with no jobs running ![windows_cpu_usage](https://f.cloud.github.com/assets/142120/50392/892b2fae-59a3-11e2-90e9-604d277f5cd8.png) Nothing else is running on the pc and task manager shows the usage is from the salt-minion process. Using the same install on a windows 7 machine doesn't cause any cpu usage when the minion is idle. Not 100% sure how to debug this further, or if it's salt or this build of salt's issue.",What do you think?,"That was a 64bit box, was going to try 32bit but the install was amd64 - didn't see if it would install, just assumed it wouldn't. A 32 bit install for XP would be very useful for me at least, can probably do some testing on 32bit either this week or next if needed."
saltstack/salt,https://github.com/saltstack/salt/issues/3235,saltstack_salt_issues_3235,"file_roots: in /etc/salt/master isn't taking hold

Using vagrant as my base, when I set `file_roots:` to anything other than `/srv/salt`, the master doesn't see `top.sls`.",What does your file_roots option look like? I can't reproduce this,Sure. It's pretty basic: 
saltstack/salt,https://github.com/saltstack/salt/issues/3734,saltstack_salt_issues_3734,"Pre-authentication, the minion doesn't wait 10 seconds when waiting for the master to auth

When running the minion for the first time without access on the master, the (expected) error shows up but does not wait 10 seconds. Instead it retries without pause. `[ERROR ] The Salt Master has cached the public key for this node, this salt minion will wait for 10 seconds before attempting to re-authenticate`",What version are you on?,0.13.0
saltstack/salt,https://github.com/saltstack/salt/issues/4198,saltstack_salt_issues_4198,"Service watch does not respect file.symlink

I have a state like this:  The nginx does not get restarted once the symlink is created.","Did the symlink not exist, or point at a different file prior to running that SLS?","No, it didn't exist"
saltstack/salt,https://github.com/saltstack/salt/issues/3248,saltstack_salt_issues_3248,"states.network does not work on Fedora

Using states.network on a Fedora minion results in the following traceback:  The issue is that the template is choosen using rh{0}_eth where {0} is the first character of the osrelease which in case of fedora most probably is ""1"". Available templates are rh5 and rh6. The rh6 template should work fine with most somewhat recent Fedora releases.",does this pull req resolve this issue?,"Yes, I opening two issues was a mistake. So I close this one."
saltstack/salt,https://github.com/saltstack/salt/issues/3277,saltstack_salt_issues_3277,"0.11.1 cannot render pillar data when includes are used

v. 0.11.1 cannot render pillar data when includes are used. create test.sls that uses include, it is included in pillar. It leads to the empty pillar data. Example below: ",Does that pull req solve this?,will test
saltstack/salt,https://github.com/saltstack/salt/issues/3281,saltstack_salt_issues_3281,"states.file.directory: recurse option doesn't work when user & group have backslashes (e.g. AD\jsmith)

When using recurse, it seems like the backslash is not being escaped when chown is invoked. Assume /opt/stuff exists, is owned by root:root, and contains files & sub-directories (also owned by root). My files: ##### /srv/salt/top.sls: ","do these user names show up in the output of ""getent passwd"" ?","Hey Tom, no worries! Yes, these are active directory users. I just checked, and they don't show up in the output of ""getent passwd"""
saltstack/salt,https://github.com/saltstack/salt/issues/3760,saltstack_salt_issues_3760,"runing 'salt' as non-root gives no output

Running  will output an empty line (while running this as root will output the minions replies). Would be useful to show an error message saying that salt command needs to be ran as root.",Which OS are you running on?,"Sorry, I didn't mention those because I thought this is a general issue: Ubuntu 12.04.2 LTS "
saltstack/salt,https://github.com/saltstack/salt/issues/4452,saltstack_salt_issues_4452,"file.recurse locking up windows minion

Using a file.recurse state sometimes locks up the minion. using clean: True seems to make it happen every time without clean: True, it seems to work a small number of times, then the minion stops responding. Looking at the debug logs, it seems to stop before it gets to the grains. ![stuck1](https://f.cloud.github.com/assets/2563935/360764/a059f2e4-a1a8-11e2-87f4-4b35c6bd6fe2.png) ![stuck2](https://f.cloud.github.com/assets/2563935/360766/a5437f00-a1a8-11e2-9a31-a9ce3ee10e41.png) Interestingly, it prints out the name of a file being managed in the same sls file (mercurial.ini). Joe",What is the output of salt --versions-report?,"for the master: Salt: 0.14.0 Python: 2.6.6 (r266:84292, Dec 26 2010, 22:31:48) Jinja2: 2.5.5 M2Crypto: 0.20.1 msgpack-python: 0.1.10 msgpack-pure: not installed pycrypto: 2.1.0 PyYAML: 3.09 PyZMQ: 2.2.0 for the minion (installed via installer): Salt: 0.14.0 Python: 2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD64)] Jinja2: 2.6 M2Crypto: 0.21.1 msgpack-python: 0.1.12 msgpack-pure: not installed pycrypto: 2.3 PyYAML: 3.10 PyZMQ: 2.2.0.1 On Thu, Apr 11, 2013 at 2:29 AM, Thomas S Hatch notifications@github.comwrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/7024,saltstack_salt_issues_7024,"Salt FAQ

Having been hit by a couple of ""obvious"" gotchas in the last few days, I wonder if it is worth adding a FAQ or troubleshooting page to the docs. Initial things to add would be: - minion name guessing and /etc/hosts - cmd.wait vs cmd.run - windows package names and versions maybe there is one, but if there is, I couldn't find it.",Where do you think it would make most sense to have it?,"Saw more people on the ML today with the cmd.run vs cmd.wait issue. The docs are pretty flat, so at the top level, under either the Miscellaneous topics or Reference section. Cheers, Joe On Thu, Sep 5, 2013 at 3:05 AM, Erik Johnson notifications@github.comwrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/7151,saltstack_salt_issues_7151,"Upgrading debian packages from 0.16.3 causes the minion to get stuck

If you upgrade the minion on debian from 0.16.3 through salt, the minion will kill itself off before the upgrade has finished. This leaves the packages in a stuck state and manual intervention is required. To work around it, the following seems to work: salt 'MINION' at.at 'now + 1 minute' ""apt-get install -y salt-minion"" New packages will be built and tested over the next 24 hours or so, but it appears that this work around will be needed to get off 0.16.3 Apologies for this, Joe",Can this issue be closed?,"Issue is resolved going forward, remaining issue is that people will need care when upgrading. I'm happy to close it on the basis that it is fixed, but hope people can see it if they need it."
saltstack/salt,https://github.com/saltstack/salt/issues/8553,saltstack_salt_issues_8553,"release number in doc/conf.py incorrect

The release number in doc/conf.py is 0.16.4. It should be 0.17.2",Where are you seeing this? https://github.com/saltstack/salt/blob/develop/doc/conf.py#L119,"Given that I'm happy to close it. I've got a patch for it in the debian packaging, which i'll update for completeness, but if it doesn't do anything might as well leave it."
saltstack/salt,https://github.com/saltstack/salt/issues/3643,saltstack_salt_issues_3643,"pillar top.sls not matching 'environment' grain.

I have the following grains set on my minions:  Any idea why the 'environment' grain doesn't work? I was able to find a workaround by using mako to load the environment grain from my minion, so this looks like an unusual bug. Only spent 5 hours or so dealing with this headache until I discovered that it was only a problem with the 'environment' grain. very unexpected !!",could there be a typo in one of your sls files?,"hm. so if you have an 'environment' grain set, matching for that grain in the top file seems to still work fine?"
saltstack/salt,https://github.com/saltstack/salt/issues/3383,saltstack_salt_issues_3383,"should be able to specify gitfs fileserver

If there is more than one gitfs in the fileserver and the tags or branches have collisions in the names (ie 1.0.0), then there is no way to specify which repo to pull the files from. Should be able to specify which gitfs to use.",Can you better explain your use case?,It was discussed here: https://groups.google.com/d/topic/salt-users/ce-JO0Bm-hw/discussion I'm trying to deploy out many different projects via salt without having to grant ssh access on the minion to the upstream git repo. The collisions in tag names is really the only problem
saltstack/salt,https://github.com/saltstack/salt/issues/3441,saltstack_salt_issues_3441,"Error while upgrading packages in FreeBSD 9.1 

I'm using: ",Can you post the output of **sudo salt * pkg.list_pkgs | grep dmidecode**?,"Hi, I applied patch 5958724 without success (same behaviour also after restarting salt_master and salt_minion):  Thanks, d."
saltstack/salt,https://github.com/saltstack/salt/issues/3431,saltstack_salt_issues_3431,"Salt command hangs

Most salt commands I run on the master hangs even after receiving the response from the minion(s). salt-master -G 'host:host1' test.ping host1: True ^C Exiting gracefully on Ctrl-c I have verified through the minion logs that the minion is sending the response. It hangs and I have to manually kill with Ctrl-C. test.ping is the biggest culprit (not a huge issue) but our custom modules also hang and saltutil.sync_modules hangs on occasion as well. I'm running 0.12.1 on both master and minion. Also had this issue with 0.12.0.","How long does the master ""hang"" are we talking 5 seconds? 10 minutes? Also, do you have any minions that appear in the output of salt-key -L that are non-existent?",It never releases unless I hit Ctrl-C to kill it. All of the minions that are in queried group when it hangs have accepted keys.
saltstack/salt,https://github.com/saltstack/salt/issues/8253,saltstack_salt_issues_8253,"Minion not reporting to master with hostname

If I start a minion with 0.17.1, when reporting to the master, the internal IP address of the machine is used to identify the server on the master. I'm assuming it is using the fqdn but I haven't explicitly set an fqdn and maybe this is the default behavior? I have set a hostname would like that to be used. If I start a minion with 0.17.0, it uses the hostname.",Did you delete the `/etc/salt/minion_id` file before restarting the minion?,"No I didn't. I launch the server, it had 0.17.1 on it. I stopped the minion. Clone the Github repo. Checked out v0.17.0. Installed it. Then it was working fine."
saltstack/salt,https://github.com/saltstack/salt/issues/3514,saltstack_salt_issues_3514,"0.12 empty response from salt-minion after a certain size

On master: Master Centos 6.3 i386 0.12/HEAD Minion Centos 5.9 x86_64 0.12/HEAD salt 'vps.essentialed.org' state.highstate (no output) From console running in foreground: [DEBUG ] Published command details {'tgt_type': 'glob', 'jid': '20130129182459075093', 'tgt': 'vps.essentialed.org', 'ret': '', 'user': 'sudo_wendallc', 'arg': ['20130129182452465142'], 'fun': 'saltutil.find_job'} [INFO ] AES payload received with command _return [INFO ] Got return from vps.essentialed.org for job 20130129182459075093 [INFO ] AES payload received with command _return [INFO ] Got return from vps.essentialed.org for job 20130129182452465142 On minion: [INFO ] Returning information for job: 20130129182452465142 If I reduce the state so the response is < 50 lines, I get a normal job report. Here is the console output: On master: [INFO ] Got return from vps.essentialed.org for job 20130129183050166715 On minion: [INFO ] Returning information for job: 20130129183050166715",what job are you running? what command are you running? what version of salt is the master and minion? I still don't know what you are talking about,"Salt version is 0.12/HEAD 67013b76ae7 for both master and minion. Command is: salt 'vps.essentialed.org' state.highstate If the return data for the job is more then 50 lines, the response is empty. This is true of the command: salt 'yum.essentialed.org' grains.items"
saltstack/salt,https://github.com/saltstack/salt/issues/3556,saltstack_salt_issues_3556,"Add Linux Mint to os_family grain

Linux Mint is currently not recognized as being a Debian-based distribution. I understand that a project can't support every distro under the sun, but this is a pretty popular desktop distro. FWIW, it's another item for the _OS_FAMILY_MAP dictionary.",Can you help me out here?,"On 02/01/2013 09:50 PM, Joseph Hall wrote: Here are the contents you've requested: /etc/lsb-release: DISTRIB_ID=LinuxMint DISTRIB_RELEASE=13 DISTRIB_CODENAME=maya DISTRIB_DESCRIPTION=""Linux Mint 13 Maya"" /etc/os-release: NAME=""Ubuntu"" VERSION=""12.04.1 LTS, Precise Pangolin"" ID=ubuntu ID_LIKE=debian PRETTY_NAME=""Ubuntu precise (12.04.1 LTS)"" VERSION_ID=""12.04"" --Jon"
saltstack/salt,https://github.com/saltstack/salt/issues/3576,saltstack_salt_issues_3576,"does not work well in raspberry pi

salt is very slow in this machine. additionally, this is in both the master and the minion log 2013-02-03 22:40:29,021 [salt.loaded.int.grain.core][WARNING ] Although 'lspci' was found in path, the current user cannot execute it. Grains output might not be accurate. 2013-02-03 22:40:29,043 [salt.loaded.int.grain.core][WARNING ] Both 'dmidecode' and 'lspci' failed to execute, either because they do not exist on the system of the user running this instance does not have the necessary permissions to execute them. Grains output might not be accurate.",Which distro are you running? Are you running anything else while Salt is running? Are you using the 256mb or the 512mb version of the Pi?,The 99% CPU issue on the Pi is simply untenable. I moved to ansible after timing a 5-command salt state file and discovering it took over a minute. Thanks but no thanks.
saltstack/salt,https://github.com/saltstack/salt/issues/3649,saltstack_salt_issues_3649,"State execution fails with bogus error handling for conflicting SLS IDs

My own error involving conflicting SLS IDs in my state tree triggered the below failure when trying to report the error. ",Can you show me the sls that can cause this?,"Sorry about the late response; I had fixed the problem already so reproducing it was not quite zero-effort, and I was in a mad rush. Here's a minimal example that reproduces this: foo.sls:  and then just `sudo salt-call state.sls bar`"
saltstack/salt,https://github.com/saltstack/salt/issues/9061,saltstack_salt_issues_9061,"watch_in does not match on the name parameter as documented

With this in `nginx/init.sls`:  where, you guessed it, one of the users was named `nginx`. Of course this `nginx` didn't have any `service` state, so `watch_in` on `service: nginx` should have raised a clear error, something like “Can't apply `watch_in` to `service: nginx` because `nginx` has no `service` state”. But it didn't raise any error; it just silently failed to reload my nginx service when changing the file.",Can you please post your version info? `salt --versions-report`,
saltstack/salt,https://github.com/saltstack/salt/issues/24716,saltstack_salt_issues_24716,"virtualenv.managed: documentation and error handling for nested requirements failure

Currently this will fail in an unclear way:  It took spelunking in github issues to find out that this problem is caused by the default behavior of copying the requirements file away to `/tmp/` to chown it to the given user, and that it can be worked around by setting `no_chown: True`. There is no documentation of this in https://docs.saltstack.com/en/latest/ref/states/all/salt.states.virtualenv_mod.html This case is quite common and so shouldn't fail in an unclear and undocumented way. Either `no_chown: True` should be the default behavior (perhaps inverted to be `chown: False`), or this should be documented and the error message should help the user towards the workaround.",Would you like to close this issue?,"The pull request only improved documentation, not error handling. But feel free to close if you don't think the error handling needs improving; I don't feel strongly about it. On Jun 17, 2015 8:40 PM, ""arroyoc"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/3819,saltstack_salt_issues_3819,"State reversal function.

It would be nice to have a function in the state module that processes state data from an sls or from the highstate, and figures out the reverse action for the states and produces state data that reverses the state, and then runs it. For example, the pkg.installed state can be reversed with a pkg.purged state. This is certainly a feature request, and it may require putting some kind of metadata into state modules so the reverse function can be known. It seems valuable, though.",How do you propose this would work?,"What if there was a ""reverse_with"" option on states that pointed to another state (maybe a full path to a state in another file) to manually tweak the reversal progress. Especially useful for cmd.run and whatnot."
saltstack/salt,https://github.com/saltstack/salt/issues/3840,saltstack_salt_issues_3840,"Display post-template code that is passed to state and pillar.

When using a template renderer (e.g. the default yaml_jinja) it is often that there may be an error in the DLS syntax that is very hard to find, and causes the data to not load at all. At these times I would like to use some kind of syntax analyses (even just load the code into Python with yaml.load()) but on disk it still has the template tags. For whatever reasons, I'd like to see a command that runs the state or pillar sls files through the template engine then just prints it out, doesn't try to load the data entirely. Only for debugging purposes.",does state.show_sls and state.show_highstate not do this? salt '*' state.show_highstate --out yaml,"@basepi I think the reason I wanted this was that sometimes template code will produce malformed YAML and then the state won't render into something that state.show_highstate can show. It just produces an error. The idea is that as a template development tool, it'd be really nice to _see_ what YAML is being produced. Whenever my templates produce un-compileable YAML I often find myself flailing around in the dark for a while trying to visualize in my head what the YAML is being produced by the template is anyway."
saltstack/salt,https://github.com/saltstack/salt/issues/33114,saltstack_salt_issues_33114,"managed interface

### Description Both manage.allowed and manage.alived do not seem to work. In our case both always return the same list of 5 hosts, while hosts responding to test.ping are about 200. worker_threads is 50 in our case. salt master: 2015.8.8","Do you have presence events enabled? Both those require that you do so. https://docs.saltstack.com/en/latest/ref/configuration/master.html#std:conf_master-presence_events Otherwise, you probably want manage.up and manage down.","@cachedout I added presence_events: True to saltmaster and restarted, now only 1 host is reported as allowed/alived."
saltstack/salt,https://github.com/saltstack/salt/issues/38706,saltstack_salt_issues_38706,"file.managed evaluates salt:// sources out of turn, resulting in ""Unable to manage file: none of the specified sources were found""

### Description of Issue/Question Consider having a file.managed, which just transfers the salt://dir/myfile to the minion. The problem occurs when the source is created by (another) required state. When this happens, the state fails with ""Unable to manage file: none of the specified sources were found"", regardless of the fact that when it's the file.managed state turn to run, the file actually has been successfully created by another state. The source: salt://dir/myfile should be checked for existence only when it's the state's turn to run, not before. ### Setup Check state 2 below. ",Can you post your state with the new argument? just want to see how you have added it. Thanks!,@Ch3LL I wrote it like so: 
saltstack/salt,https://github.com/saltstack/salt/issues/7703,saltstack_salt_issues_7703,"state.sls runner doesn't load custom modules

Salt 0.17.0 64bit",Did you run either saltutil.sync_modules or saltutil.sync_all beforehand?,"Yep, tried it already... didn't help although it doesn't suppose to fix it because salt-run doesn't require the salt-minion to be installed."
saltstack/salt,https://github.com/saltstack/salt/issues/12070,saltstack_salt_issues_12070,"can't use mine from the salt-master

When I use `mine.get` from the minions it works great when I try to use it from the master I get nothing back  Thanks",Can you verify?,@basepi looks like #12076 fixes the `mine.get` runner but it doesn't fix `__salt__['mine.get']` from within a custom state module with `state.orch` ...
saltstack/salt,https://github.com/saltstack/salt/issues/6265,saltstack_salt_issues_6265,"How to show states a minion will run

I'm looking for a way to see what states a minion will run when it executes a highstate. I found `state.show_top`, but it shows the entire top file. I didn't find a module function to call from the command line, but did find the [top_matches()](https://github.com/saltstack/salt/blob/2cbe8f27e8726f0a875f89d4767d65eb7b4da127/salt/state.py#L1821) function, which calculates what I'm looking for. I created a module function to expose this functionality at https://github.com/baremetal-deps/salt/commit/944914e6075dac49173e350e5927cb1ff25b9841. With this patch you can find out the states a minion will execute by running:  Interestingly, the pipeline above shows additional states because `state.show_highstate` processes `include` directives, which is also useful. Does anyone else find these or a variation of useful? Thanks!",Why not `salt '*' state.highstate test=True` ?,"I am looking for a way to see the states that will be included when running `state.highstate` on a minion. In `states/top.sls` I include states based on matching pillar data and would like a quick way to verify the states I assume will run are included; for example, with the following top file:  The alternative you provide shows each individual action that will be taken, which is useful for other purposes, but not to easily verify included .sls files."
saltstack/salt,https://github.com/saltstack/salt/issues/8904,saltstack_salt_issues_8904,"pgkrepo.managed broken in develop branch

I found a problem setting up a PPA repository, which I resolved by reverting commit a1bcf971. The problem showed up with the following state:  Happy Thanksgiving; thanks for making Salt! :)","How recent? (`salt --versions-report`, please!) There was a bad cherry-pick to 0.17, which we fixed, but I didn't know it was also broken in `develop`.","I think you're right about the 0.17 branch. I will confirm when I'm on a computer. On Monday, December 2, 2013, Colton Myers wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/4922,saltstack_salt_issues_4922,"document file.sed

http://docs.saltstack.com/ref/states/all/salt.states.file.html?highlight=file.sed#salt.states.file.sed Parameters are undocumented. `man sed` does not say anything about '-r -e'...",What distro are you running?,ubuntu 12.04 but that's not the point
saltstack/salt,https://github.com/saltstack/salt/issues/5742,saltstack_salt_issues_5742,"file.directory 'Changes' log incomplete / confusing

I have two conflicting states:  Note the two `mode: 700`s. I think there should be a group in there... Confused the hell out of me until I set the mode of the above state to 700, first I thought it was recursing the mode as well even though it is not set in recurse.",Did you check to see if the group change actually took place?,"I can't, since the second state moves it right back ;)"
saltstack/salt,https://github.com/saltstack/salt/issues/7257,saltstack_salt_issues_7257,"pkg.latest regression: traceback in apt.py

Any comment on this traceback I get? ",Do you have the master and minion on the same machine?,"I do have a master and a minion on the same machine, but that's not the one I was seeing the error with. I thought a highstate had upgraded that minion to 0.16.4, but it seems I am mistaken :( Sorry for the noise."
saltstack/salt,https://github.com/saltstack/salt/issues/7976,saltstack_salt_issues_7976,"documentation: make sure examples are ASCII

I've gotten this error when I copy/pasted examples from the documentation PDF:  This particular example was from the code in chapter `44.9 Examples of Salt Modules`. But perhaps this is an impossible request if you want to keep syntax-coloring...","Do you happen to know what character triggered the problem? Wondering if it's one of the nonstandard double/single quotes, or some other character.",`\xe2` :)
saltstack/salt,https://github.com/saltstack/salt/issues/8647,saltstack_salt_issues_8647,"salt '*' highstate returns 'minion did not return', salt [minion] highstate works

There's an apparent difference in targeting '*' and a host directly. (0.17.2 all the way now) I have this state that updates salt to the latest version:  Complete output from salt-minion -d debug is on http://pastebin.com/10h2YETr",What OS is the minion?,"Ubuntu 12.04, all the way. No, it happens across all minions. Haven't edited the timeout afaik."
saltstack/salt,https://github.com/saltstack/salt/issues/8653,saltstack_salt_issues_8653,"random traceback with file.managed: KeyError: 'hsum'

 (that same state is ran on all other minions and works OK there)",Might be related to #8278 @cachedout Could this be related to your hashing changes?,0.17.2 (I hope)
saltstack/salt,https://github.com/saltstack/salt/issues/8677,saltstack_salt_issues_8677,"pkg.latest upgrades to same version

",Maybe highlighting what changed in the version text will help clear out this issue? Should I create a new issue about it?,"Showing differences character-by-character would have caught this, I sure cannot deny that ;) Something like that would help for file.managed (etc.), too. But I don't know how much work that is to make and whether it's more readable, there's a reason the commandline 'diff' is a line-by-line diff."
saltstack/salt,https://github.com/saltstack/salt/issues/14051,saltstack_salt_issues_14051,"file.directory hangs or very slow

Version 2014.1.5-5precise1. The state is:  This long for a directory with 65 entries is rather ridiculous. Not NFS, plain disk, etc, etc.",How big is the directory over which it is recursively applying permissions? This is likely related to https://github.com/saltstack/salt/issues/11538,"This is most probably the same as #11538. There are 65 entries in a 'find', but the files are rather large. "
saltstack/salt,https://github.com/saltstack/salt/issues/16372,saltstack_salt_issues_16372,"salt-master should check permissions of /var/run/salt/

When we rebooted our salt-master VM and got connection problems completely out of the blue (""Is the salt master running?"" on the master itself, salt-call timing out, etc.). This was in the logs of a `-l debug` run:  I tracked this down to a `root:root` permission on `/var/run/salt` (and 0770 permissions) instead of `salt:root` but the error was not helping at all. Can a check be added?",What version of salt is your master running on?,"Should have said that: 2014.1.10. The worst part is that salt-master keeps running so the ""Is the salt master running?"" error seems completely spurious."
saltstack/salt,https://github.com/saltstack/salt/issues/24660,saltstack_salt_issues_24660,"nodegroups not backwards compatible

With a 2015.5 master on a 2014.1 minion I get this error when targeting a nodegroup: ",Does it work when you use that target as a compound match instead of nodegroup? ,"Yes it does, that's how I worked around it. The error is minion-side (as you can see from the logline :) If a nodegroup has mixed 12.04 and 14.04 minions, the 14.04 minions answer. It's probably the braces..."
saltstack/salt,https://github.com/saltstack/salt/issues/3701,saltstack_salt_issues_3701,"Use setuptools in setup by default

When we install salt with pip and don't use setuptools by default we get this error: error: option --single-version-externally-managed not recognized In all cases there is also setuptools in the system. It will be better to use setuptools instead distutils by default. Instead of actual USE_SETUPTOOLS we should use another variable for selecting distutils mode.",How do I force to use setuptools? `export USE_SETUPTOOLS=1; pip install -U salt` raises still the same error.,Unfortunately in this version of salt it can not be resolved. I had sent the patch that fixed this bug. https://github.com/saltstack/salt/pull/3698 You should change only the one thing with this patch. Instead of use the USE_SETUPTOOLS it will be better determine this method as main and set distutils as optional (like you did it in actual version with setuptools).
saltstack/salt,https://github.com/saltstack/salt/issues/9855,saltstack_salt_issues_9855,"saltuil.kill_job doesn't behave as expected - dangling process

I was testing out saltutil.killjob  Is this a bug ?",Could you please give us the output of `pstree` both before and after the `saltutil.killjob` command is run? We'd like to see what happens to that process.,
saltstack/salt,https://github.com/saltstack/salt/issues/9987,saltstack_salt_issues_9987,"Encoding problems with results returned by windows minion

I am testing out the salt-minion on windows XP, and the windows in question is in French. Iget the following encoding error : ","When you say ""encoding error"" do you mean the � character?","Yes I mean the �, I'm ok with the fact that some commands might cause an error on the minion, I just expect the encoding to be right."
saltstack/salt,https://github.com/saltstack/salt/issues/12225,saltstack_salt_issues_12225,"[salt-cloud] Attribution of floating IPs works partially in parallel mode 

salt-cloud is working fine for my use case in ""normal"" (sequential) mode. When I do the same thing with ""-P"" only one of the machines in the map gets a floating IP attributed, so the other machines never get to be accessed and the thing runs in a loop (I guess there's a timeout). Am using it against an openstack installation.",can you provide your map?,
saltstack/salt,https://github.com/saltstack/salt/issues/12807,saltstack_salt_issues_12807,"[salt-ssh] salt-ssh with sudo doesn't give same errors when not in english

I came accross this error  I'm off to file an issue about adding documentation about configuring NOPASSWD in sudoers (or the askpass option).",What version of salt?,
saltstack/salt,https://github.com/saltstack/salt/issues/12809,saltstack_salt_issues_12809,"[salt-ssh] salt-ssh \* grains.items does not display correctly

 `$ salt-sshh --out grains \* grains.items` does not give better results By the way, maybe the doc should suggest adding python-msgpack when using salt-ssh (`salt-ssh \* pkg.install python-msgpack`).","What version of salt? `salt-ssh` changes fairly quickly, so version is important.",
saltstack/salt,https://github.com/saltstack/salt/issues/13222,saltstack_salt_issues_13222,"[salt-ssh] KeyError: 'grains'

on the develop branch, am trying out salt-ssh and I get a KeyError: 'grains' then it just stalls. ",what's output of salt-ssh cea-precise test.ping?,no minion installed on the destination host (that's the idea of salt-ssh isn't it?) 
saltstack/salt,https://github.com/saltstack/salt/issues/15653,saltstack_salt_issues_15653,"keystone.user_present with test=True actually makes changes

using the keystone.tenant_present and keystone.user_present with test=True results in the execution of the keystone queries that modify the database.",What version of Salt are you seeing this occur on?,"root@salt:~# salt --versions-report Salt: 2014.1.10 Python: 2.7.3 (default, Mar 13 2014, 11:03:55) Jinja2: 2.6 M2Crypto: 0.21.1 msgpack-python: 0.1.10 msgpack-pure: Not Installed pycrypto: 2.6 PyYAML: 3.10 PyZMQ: 13.1.0 ZMQ: 3.2.3"
saltstack/salt,https://github.com/saltstack/salt/issues/16397,saltstack_salt_issues_16397,"salt-run manage.down sometimes returns a bunch of hosts that are up

We are tracking using munin http://munin-monitoring.org/ the number of hosts that should be removed from our master by periodically running ""salt-run manage.down"" and counting the results. There are spikes in our graphs and sometimes we get incoherent results from the command line. Any idea on what is causing this and how to debug it and fix it ?","Could you clarify what you mean by ""incoherent""? Thanks!",
saltstack/salt,https://github.com/saltstack/salt/issues/16990,saltstack_salt_issues_16990,"Periodic ""No matching sls found for 'shorewall' in env 'base' "" 

Since introducing multiple environments in the master's file_roots we have a weird behavious for minions that are ""far"" from the master. Theses minions are in a different datacenter and communicate with the master via ssh tunnel or openvpn. What we periodically get is : ","When this happens, can you examine the minion cache and see if the file is indeed already stored by the minion?",Yes they are: 
saltstack/salt,https://github.com/saltstack/salt/issues/18508,saltstack_salt_issues_18508,"docker.running (and docker.build) actually do things with test=True

When running a docker.build state with test=True it seems that salt is actually trying to build the image instead of just doing a dry-run. ","When you're running your highstate with test=True, do you already have Docker installed already? I am just wondering if this could be a duplicate or not to #16453.",@rallytime yes docker is installed. I'll go a create a new issue for the absence of a timeout
saltstack/salt,https://github.com/saltstack/salt/issues/20246,saltstack_salt_issues_20246,"TokenAuthenticationError: Authentication failure of type ""token"" occurred for user saltdev.

A previously working salt-api call is now failing on TokenAuthenticationError ",Did you restart both salt-api and salt-master between tries? We added a catch for the TokenAuthenticationError in #19885 a few days ago. It will be in 2014.7.2.,"@whiteinge yes I did restart salt-api and salt-master a few times before considering this to be a bug. I'll test this out again when 2014.7.2 is out, thanks."
saltstack/salt,https://github.com/saltstack/salt/issues/21267,saltstack_salt_issues_21267,"state and module to monitor websites using uptime (open source web site monitoring)

We've developped some states and modules to add urls to uptime https://github.com/fzaninotto/uptime monitoring. These modules and states use the REST API in uptime. One can then loop over domains defined in a pillar to make sure these domains are monitored in uptime. This is used in conjunction with the apache formula which generates the apache configuration from a domain list in a pillar. We can also contribute some sls to deploy uptime on debian.",Do you want to contribute a salt formula for this?,@jfindlay yes I'll extract our deploy of uptime into a formula and contribute it too.
saltstack/salt,https://github.com/saltstack/salt/issues/22699,saltstack_salt_issues_22699,"salt-cloud fails on KeyError when given a nonexistant action

When trying out salt-cloud -a action I tried :  This is related to #22698",Could you please let us know what version of salt-cloud you are running?,
saltstack/salt,https://github.com/saltstack/salt/issues/24036,saltstack_salt_issues_24036,"[salt-cloud] Protect against passing command line arguments as names for the --destroy command in map files

One can create a subset of a map by using the following command : ",Why not just specify the names and call it good?,"@techhat I hadn't thought of it that way, I don't often use the command without a map. Only thing I'm curious about is the follow use case : - I have two backends, let's say Amazon for my production, and LXC for my dev on my laptop - I have machine web.example.org on Amazon which is not connected to my developement salt-master - I have a provider configured for Amazon so salt-cloud sees web.example.org when it queries - I've created web.example.org using salt-cloud and a map which indicates the provider to use is LXC Am I sure that it's not going to delete web.example.org from Amazon if I just use `salt-cloud --destroy web.exemple.org` without a map ? In this case using `-m my_lxc_map` gives some information about which provider to query, doesn't it ?"
saltstack/salt,https://github.com/saltstack/salt/issues/24708,saltstack_salt_issues_24708,"[salt-api] doesn't send back a result when a highstate outputter is configured

To give access to some people to only a give ""state.sls something"" on a one machine. I've added a command in _modules/mymodule.py and since it's a state.sls I've added the following : ",What do you see if you run the following in the Python shell? ,@whiteinge thanks for taking a look at this 
saltstack/salt,https://github.com/saltstack/salt/issues/27590,saltstack_salt_issues_27590,"[returner] carbon event returner not sending any data 

The carbon event returner doesn't seem to send any data back. A quick look at the code and logs shows that it doesn't find any metrics to send in the `_walk` function. I think the bug is https://github.com/saltstack/salt/blob/develop/salt/returners/carbon_return.py#L269 where we should replace `event['data'].get('data')` by `event['data']`",What version of salt are you working with?,
saltstack/salt,https://github.com/saltstack/salt/issues/30538,saltstack_salt_issues_30538,"Running salt-minion as normal user (userland) tries to do authentication on systemctl

I'm running a state that checks salt-master service.running (and has a bunch of watch statements on that). ",Can you post the state that you're running? Did you set the `sudo_user` minion config and does that sudo user have permissions to do what it needs?,"@jfindlay no I did not set the sudo_user, this scenario is to run a salt-minion with no root or sudo access. I'm happy to have a failed or error state at the end of the run, just not a prompt in the middle. The state looks like this : "
saltstack/salt,https://github.com/saltstack/salt/issues/31762,saltstack_salt_issues_31762,"[salt-cloud] openstack driver tries to assign new floating ip when some are available in pool

### Description of Issue/Question When creating VMs using salt-cloud against an icehouse openstack using the openstack driver, I get a ""no more floating ips"", it seems to be trying to allocate new floating IPs when some are available to assign. ### Steps to Reproduce Issue Traceback : ",What version of libcloud are you using (should appear in `salt-cloud --versions-report`)?,
saltstack/salt,https://github.com/saltstack/salt/issues/32349,saltstack_salt_issues_32349,"Memory leak on custom execution module scheduled every minute 

### Description of Issue/Question I get some ""Exception [Errno 12] Cannot allocate memory occurred in scheduled job"" errors in the log (reported to sentry). The munin graph below shows some clear patterns of a memory leak. Am willing to spend some time debugging this if needed (otherwise a @daily crontab restart of salt-minion probably will do the trick...) ### Setup ![screenshot_2016-04-05_09-31-47](https://cloud.githubusercontent.com/assets/445200/14274403/714e2c02-fb11-11e5-940f-045ebb8d41ec.png) ### Steps to Reproduce Issue It has about 10 of schedules such as this one : ",Does the system you are reporting do anything else that might compound/complicate the leaking memory?,"@jfindlay yes, I can try to isolate this in a VM, but do you have any tips to debug this on this setup (which has other things going on) ?"
saltstack/salt,https://github.com/saltstack/salt/issues/46623,saltstack_salt_issues_46623,"[modules] [nova] AttributeError: 'module' object has no attribute 'auth_plugin'

### Description of Issue/Question Follow up of #46622 I tried setting keystoneauth to False ### Setup With the following pillars : ",Can you provide the version of that library that you have installed?,
saltstack/salt,https://github.com/saltstack/salt/issues/51430,saltstack_salt_issues_51430,"file.managed on https source changes html

### Description of Issue/Question When using `file.managed` state on https://example.org/file.html if the file.html contains relative URLs sur as `<link href=""icons/apple-touch-icon.png""> ` the resulting file has `<link href=""https://example.org/icons/apple-touch-icon.png"">` in it. Further more some xhtml seem to be converted to html ### Setup ",Can you provide me with a URL that will work to verify the issue?,@dwoz not tested if this fails too but try https://gist.githubusercontent.com/arthurlogilab/240c0d5a33667e60e7099ea12d9d6e0e/raw/2efb4f410ec34d5e2afbc01f2db45e642dbede0c/test.html (in my use case the file is hosted on apache2)
saltstack/salt,https://github.com/saltstack/salt/issues/54850,saltstack_salt_issues_54850,"[centos] FileNotFoundError: [Errno 2] No such file or directory: 'userdel': 'userdel'

### Description of Issue Failing to do a `user.absent` ### Setup Using https://github.com/saltstack-formulas/users-formula (which uses `user.absent`) I get : ### Steps to Reproduce Issue ","Can you check if you have package `shadow-utils` installed? If not, can you install it and try again?",I do have `userdel` installed. For some obscure reason it might be a shell/path problem ?
saltstack/salt,https://github.com/saltstack/salt/issues/3726,saltstack_salt_issues_3726,"saltstack might have problems with older kernels (just fyi)

Hi, Jeff asked to file this for tracking reasons. So here we go :-) We're running a rather large xen-virtualized hosting-environment with a pretty old but fully maintained 2.6.18 kernel. Each virtualized server runs a debian squeeze with a couple of packages related to saltstack from debian-backports: libzmq1 2.2.0+dfsg-2~bpo60+1 python-zmq 2.2.0-1~bpo60+1 The combination of the old kernel with this zeromq-library leads to connections problems from the minion to the master. Upon starting the minion the zeromq-socket just sits there and does nothing, literally nothing, tcpdump-ouput is empty. Not a single package is being sent in the masters direction. Sadly this does not result in some kind of error-message in saltstack or the zeromq-library (with saltstack not having the change to react at all). Strace shows this for the socket: ### socket(PF_INET, SOCK_STREAM|SOCK_CLOEXEC, IPPROTO_TCP) = -1 EINVAL (Invalid argument) epoll_wait(10, {}, 256, 154) = 0 clock_gettime(CLOCK_MONOTONIC, {1614, 148956141}) = 0 socket(PF_INET, SOCK_STREAM|SOCK_CLOEXEC, IPPROTO_TCP) = -1 EINVAL (Invalid argument) epoll_wait(10, {}, 256, 154) = 0 clock_gettime(CLOCK_MONOTONIC, {1614, 308950141}) = 0 socket(PF_INET, SOCK_STREAM|SOCK_CLOEXEC, IPPROTO_TCP) = -1 EINVAL (Invalid argument) epoll_wait(10, {}, 256, 154) = 0 clock_gettime(CLOCK_MONOTONIC, {1614, 468970141}) = 0 socket(PF_INET, SOCK_STREAM|SOCK_CLOEXEC, IPPROTO_TCP) = -1 EINVAL (Invalid argument) epoll_wait(10, {}, 256, 154) = 0 clock_gettime(CLOCK_MONOTONIC, {1614, 628958141}) = 0 socket(PF_INET, SOCK_STREAM|SOCK_CLOEXEC, IPPROTO_TCP) = -1 EINVAL (Invalid argument) ### The easiest way to make this visible is a small sample from the zeromq-page that trys to connect to the saltmasters open socket. The solution or rather more infos can be found here: https://zeromq.jira.com/browse/LIBZMQ-273 I dont think saltstack has the chance to act on this. Hope it helps!",Can we close this out now?,"For me it seems to, yes. I can have minions running on our old kernel connect to the master and execute jobs on them. But i have not done any heavy testing."
saltstack/salt,https://github.com/saltstack/salt/issues/15609,saltstack_salt_issues_15609,"netapi (rest_wsgi.py) fails with certain requests

I have a master running with salt-api using the rest_wsgi.py. I can issue various commands which work repeatedly without any problems. These include: 1. test.ping 2. test.fib 10 3. abuse.create_ftplogs cust_id=""123456789"" (custom module) 4. abuse.lastdays_filelist cust_id=""123456789"" (custom module) The fields 'username' and 'password' are for the local user on the salt-masters which uses external_auth. Here are the corresponding POST-Strings i generate: 1. test.ping  If i strace the job-process on the minion, i can see that its doing the right thing. For this one the result is not found in the masters cache because its never returned by the minion. The process on the minion just exits and no data is returned.",Could you also add some information about salt versions to this before we start digging in? Thanks!,"Oops, forgot about that: Salt: 2014.7.0rc1-1414-g4dfa6a0 Python: 2.6.6 (r266:84292, Dec 26 2010, 22:31:48) Jinja2: 2.5.5 M2Crypto: 0.20.1 msgpack-python: 0.1.10 msgpack-pure: Not Installed pycrypto: 2.1.0 libnacl: Not Installed PyYAML: 3.09 ioflo: Not Installed PyZMQ: 13.1.0 RAET: Not Installed ZMQ: 3.2.3 Mako: Not Installed"
saltstack/salt,https://github.com/saltstack/salt/issues/16315,saltstack_salt_issues_16315,"con_cache keeps master/MWorker from starting up

When con_cache is enabled, every now and then it might keep the master from starting up properly. It will hang just after creating the very first MWorker. I am currently trying to figure out why, but have not gotten to the root of it.",Can this be closed?,"Hm, i dont like the workaround very much, but i guess we can close this for."
saltstack/salt,https://github.com/saltstack/salt/issues/17943,saltstack_salt_issues_17943,"using six-library causes debian breakage

I tried building the latest develop-branch (33a97c3f8dc10ac720dc76633d562ebcfef5f268) today and came across a build-error caused by the six-library used in the logger.  This currently brakes salt on squeeze and wheezy systems. For wheezy one can use the wheezy-backports, but that might not be an option for everyone. For squeeze salt is currently broken. Yes, squeeze is old, but its still oldstable and there is even squeeze-lts. Salt should either ship its own six-lib like other packages do it or make sure, that six is available on platforms it wants to support.",What version of six is installed by your distro?,"Latest version you can get for squeeze is 1.1.0 (with squeeze-backports enabled). Default version for wheezy is also 1.1.0, but with wheezy-backports enabled 1.8.0 is available."
saltstack/salt,https://github.com/saltstack/salt/issues/28199,saltstack_salt_issues_28199,"Non-standard umasks might break the master

A saltmaster running with an apache-configured cherrypy_rest-api might break if the user/root has the ""wrong"" umask set. In my case that was '0026'. The saltmaster is running and requests to the cherrypy-api are executed successfully. The master pings the minion and the minion returns 'true' to the master (thats in the logs). Its just the apache that keeps returning a 500 error without any error message in the logs (even in debug). The missing error message is due to /usr/share/pyshared/salt/netapi/rest_cherrypy/app.py not having a console-logger configured. If im not mistaken, WSGI only forwards errors on stderr to the error-log? Anyway, i _think_ thats the problem, because thats how i finally managed to see an error in apaches error_log.  A ""permission denied"" on a file the master created itself seemed really weird and led me to roots .bashrc where the umask was set to 0026 instead of the (debian-)default 0022. If root (re)starts the saltmaster with a ""wrong"" umask, the master inherits the umask and breaks. Not many people will trip over this, but i think the required umask should be mentioned in the docs somewhere. This is sort of related to #10418 with umasks being scattered all over the place :-)",What version of salt are you using?,"I was afraid you might ask that, rather old :-) "
saltstack/salt,https://github.com/saltstack/salt/issues/33332,saltstack_salt_issues_33332,"parser turns digit-only parameters to ints

The parser currently turns all digit-only parameters to ints removing leading zeros on the process.  This creates a maildir called 'cust12345-1' instead of the expected 'cust12345-01'. Im not sure wether this requires a fix / change in the parser, since it can be worked around. But i'll leave that up to you :-) Maybe its enough to just point it out in the documentation somewhere.","Does it work if you double-quote it? `salt-call maildir.make cust_id='12345' suffix='""01""'`","Yes it does, its in the example i provided above :-)"
saltstack/salt,https://github.com/saltstack/salt/issues/55090,saltstack_salt_issues_55090,"Pillar targeting with salt-proxy not working

### Description of Issue I am currently setting up a lab environment with salt stack and napalm and ran into a targeting problem targeting devices running behind a salt-proxy with pillars. I currently have 10 devices (Cisco, Arista, Juniper) and I can set pillars, do net.load_config, net.load_template etc. just fine. Sample pillar data for a device: ",Could it be related to #52122?,Thanks for making me aware of that one. I very much think so and will close this one for now.
saltstack/salt,https://github.com/saltstack/salt/issues/3745,saltstack_salt_issues_3745,"Expand gitfs for pillar

I really like gitfs, and would like to see it expanded. For starters, it should be documented; but more importantly I would also like to be able to back pillar data with gitfs. I see this restructuring the config format. Maybe something like:  Thoughts?","Would it possible to offer somewhat richer ways select where the data is on the remote, besides just url? Also specify branch/tag and path?","Personally, I would never put the pillar and the state tree in the same repo. I want to control access to the pillar data while openly sharing the state tree."
saltstack/salt,https://github.com/saltstack/salt/issues/6699,saltstack_salt_issues_6699,"Salt minion failing to authenticate master 0.16.3

This just started happening to one of my minions. Whenever I start it up I get:  But it did end up working afterwards. Seems like the keyfiles were corrupted? The machine was running very low on memory just prior to this happening. That's the only thing I can think of that might have precipitated the incident.",Can you reproduce it? Or is it just fixed now that you deleted the keys and whatnot?,"Well, it's been fixed since I deleted the keys, but I haven't seen this issue since then. I'll report back if it does happen again. As I mentioned, I don't really know what event would have triggered this except for mayyyyybe running out of memory. Since I haven't fixed the memory leak in our server application yet, I expect that situation will come up again :P"
saltstack/salt,https://github.com/saltstack/salt/issues/8259,saltstack_salt_issues_8259,"More connection issues

I've been plagued with connection issues recently. I've had to restart the salt minions _and_ master nearly constantly, and now I am actually unable to get anything connected again. On the plus side, failing all the time means that I have deterministic ways to reproduce the bugs! First up: 1) start salt master 2) start salt minion Receive this in the master log: ",Can you test on `develop` branch?,"I upgraded my master and minions from 0.17.0, which was upgraded from 0.16.4, 0.16.3, 0.16.1, 0.16.0, etc. They are all running 0.17.1 I'm still getting the exception in the log on the develop branch, though the traceback is slightly different. Here it is in case it's helpful:  I realize now I shouldn't have put the connection problems in the same issue as the exception, as they're likely unrelated. I just _really_ wanted them to be related. So let's make this issue just about the exception in the logs; the connection issues are far more difficult. I started a thread on [the google group](https://groups.google.com/forum/#!topic/salt-users/gbav2EpBMAQ) about them. If we manage to isolate anything in particular, I'll file a new issue on github."
saltstack/salt,https://github.com/saltstack/salt/issues/5172,saltstack_salt_issues_5172,"esky freezeing broken

The changes made in 3791d3b seem to have broke esky freezing. Reverting the commit fixes it.","What OS are you seeing this error on, @hdonnay ?","Linux, gentoo. There seems there was also a change in version.py? "
saltstack/salt,https://github.com/saltstack/salt/issues/5793,saltstack_salt_issues_5793,"file.managed with no source and replace=false does not set mode on creation

 Both of these will create the file on first pass, and then set the permissions on the second pass. I have not tested with a source specified.",Can you test on 0.16.0 or the latest `develop` branch?,I can test on 0.16.0 sometime next week.
saltstack/salt,https://github.com/saltstack/salt/issues/5879,saltstack_salt_issues_5879,"Minion communication broken if salt-key run

I have a small autosigner script:  However, running this breaks communication with established minions. If running a `salt-call`, it throws an `AuthenticationError`. It also requires all minions to re-connect. For example, running `salt \* test.ping` immediately after the autosign script will not match anything. I haven't seen/missed any documentation that states this is desired behavior.",Does just running `salt-key --list` or any of the other commands in the script reproduce the disconnections? Or just in the context of this script?,"I think it's the removal of a key, as I know I've run `salt-key -a` before and not had things freak out."
saltstack/salt,https://github.com/saltstack/salt/issues/3797,saltstack_salt_issues_3797,"pip.installed does not work with pip min-max version format 

When using the pip.installed state, quoted strings should probably be respected, since this is the pip format. A solution for this would probably be related to https://github.com/saltstack/salt/issues/3356 eg. ",Can you get me a pip command of that format that works so I can do some testing? (Too lazy to go dive for versions in pypi =P) Thanks!,"My bad. pip does not treat `version-postfix` as `>=version`. If you try the command below, it should get you 1.1.0-beta3 "
saltstack/salt,https://github.com/saltstack/salt/issues/3854,saltstack_salt_issues_3854,"salt.states.pkg does not refresh packages if new source is added

It seems to me that salt.states.pkg.mod_init keeps track of the package list being updated only once. However, in many cases we add a custom package source before installing the package. In these cases it would be nice to either 1) update the package list every time pkg.{installed,latest} has refresh: True OR 2) provide a state to add a custom source, and refresh after a state change. It might be possible that I am missing some alternate functionality to get around this issue. Any suggestions would be welcome. Our current solution is to add a dependency on `cmd:run sudo apt-get update` Example of what does not work correctly: ",Can you take a look with 0.13.1 and let us know? I think this has been fixed.,Thanks @thatch45 I will check version 0.13.1 and update the issue in a couple of days. @archtaku I've updated the mongodb snippets to include the full context and also the typo cmd vs pkg. Thanks for the fix!
saltstack/salt,https://github.com/saltstack/salt/issues/13227,saltstack_salt_issues_13227,"please clarify docs regarding etcd.host and etcd.port

While wishing the upstream python-etcd supported multiple peers, I noticed that the salt docs indicate the values of etcd.host and etcd.port ""should"" or ""must"" be set in the master configuration.  I could be mistaken, but I think the implications of getting those values from the __opts__ dictionary is that the values need to be set on the minion. At least my tests back that up. An alternative would be to fetch from __opts__.get('master'), but I believe the results would vary depending on whether the master has pillar_opts set to True or False, although that theory has been untested.",Does that address all of your questions?,"**@techhat**, I just read more about the [__opts__](http://docs.saltstack.com/en/latest/topics/development/dunder_dictionaries.html) dictionary and see that it's relative to the daemon. I support the decisions to use ""must"" or ""should"" and just wanted to ensure there wasn't an unintended inconsistency. Thanks for the clarification. In lieu of this discussion, I think the docs ought to reflect the need to include the `etcd.*` keys on the minion and **NOT** the master for the **[salt.modules.etcd_mod](http://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.etcd_mod.html)** execution module. Please confirm and I'll submit a pull request."
saltstack/salt,https://github.com/saltstack/salt/issues/3812,saltstack_salt_issues_3812,"saltutil.sync_all not working in 0.13.1

I just upped to 0.13.1 from 0.12.x. Previously I used `saltutil.sync_all` to push custom grains and modules from my `<file_roots>/_grains` and `<file_roots>/_modules` directories. This doesn't seem to be working now.. I get the following when I run on a new minion: ",Which OS are you using?,I'm investigating this issue further right now - I believe it's related to something strange happening with salt-cloud. I think it's likely I'll be back shortly to close this as invalid..
saltstack/salt,https://github.com/saltstack/salt/issues/8067,saltstack_salt_issues_8067,"pkg.latest with APT using fromrepo

I ran into a problem trying to install git latest from wheezy-backports under Debian, using 0.17.1. **SLS**: ","Did this state work previously, or is this the first time you've run this particular state?","@basepi good catch. I found a couple of redundant `requires` in our state tree as a result too, so thanks! I've updated the original report with a more ""correct"" SLS. The VM I'm testing on started out with git v1.7.10.4 installed. Running this SLS on that results in the error and no change to the git version. Removing git _first_, resulted in an error and git v1.8.4.rc3 installed. I ran a couple of tests, both with the initial install of v1.7 present. Success on Salt 0.16.4: "
saltstack/salt,https://github.com/saltstack/salt/issues/27432,saltstack_salt_issues_27432,"Using specific tag as GitFS remote

The [GitFS docs](https://docs.saltstack.com/en/latest/ref/configuration/master.html#std:conf_master-gitfs_base) say that I can set `gitfs_base` to point at a tag in my remote. This doesn't work; after highstate the `gitfs_remote` repo points at `master`. My `/etc/salt/minion`:  Further to that: - If `gitfs_base` is included, states from the `gitfs_remote` are not found at all. - If `gitfs_base` is removed, a highstate will finish using states from `master` branch on the remote.",What version of salt are you using? Is it possible for you to try with 2015.8.0?,"Ah yes, apologies. I am using `2015.5.5`. I will test with `2015.8.0` and report back. Does anyone have this working currently?"
saltstack/salt,https://github.com/saltstack/salt/issues/3986,saltstack_salt_issues_3986,"Salt Syndic : Using globs other than * don't function as expected

Greetings, was just discussing with UtahDave and was told to submit an issue. First I'll explain my setup: 1 salt mastermaster, running minion pointing to localhost 1 salt master, running minion pointing to localhost but master syndic pointing to mastermaster. 1 salt minion pointing to salt master. Below is a reproduction of the situation, including targeting by glob with wildcards or specific minion id. root@salt-mastermaster:/home/mark# salt '*' test.ping salt-mastermaster: True salt-minion-001: True salt-master: True root@salt-mastermaster:/home/mark# salt 'salt-minion-001' test.ping No minions matched the target. No command was sent, no jid was assigned. root@salt-mastermaster:/home/mark# salt 'salt-master' test.ping salt-master: True root@salt-mastermaster:/home/mark# salt 'salt-minion-001' test.ping No minions matched the target. No command was sent, no jid was assigned. root@salt-mastermaster:/home/mark# What was interesting is that targeting salt-master worked however targeting a minion on the 3rd tier was unsuccessful. Best, Mark G","Can you verify, @ingwa?","Hi basepi, got this from a debug output: root@salt-master:/home/mark/salt# salt-syndic -l debug [INFO ] Setting up the Salt Syndic Minion ""salt-master"" Traceback (most recent call last): File ""/usr/local/bin/salt-syndic"", line 10, in <module> salt_syndic() File ""/usr/local/lib/python2.7/dist-packages/salt/scripts.py"", line 39, in salt_syndic syndic.start() File ""/usr/local/lib/python2.7/dist-packages/salt/**init**.py"", line 266, in start self.prepare() File ""/usr/local/lib/python2.7/dist-packages/salt/**init**.py"", line 253, in prepare self.syndic = salt.minion.Syndic(self.config) File ""/usr/local/lib/python2.7/dist-packages/salt/minion.py"", line 843, in **init** Minion.**init**(self, opts) File ""/usr/local/lib/python2.7/dist-packages/salt/minion.py"", line 234, in **init** opts['grains'] = salt.loader.grains(opts) File ""/usr/local/lib/python2.7/dist-packages/salt/loader.py"", line 207, in grains opts['conf_file'], 'SALT_MINION_CONFIG' KeyError: 'conf_file' I'll do some digging and see if there's anything in my configs causing it."
saltstack/salt,https://github.com/saltstack/salt/issues/14462,saltstack_salt_issues_14462,"salt-cloud ec2.py AttributeError: 'URLError' object has no attribute 'read'

Greetings folks, just getting started on salt-cloud, installed last night and configured an account on aws with cert, and api key, however when trying to run a basic command I'm getting the above error message. Here is a copy of my terminal output, with command at the top:  I'll give RackSpace a try and see if I get it in there too. Thanks for your help!",Can you post your ec2 config?,"Hi basepi, thanks for the response! here's a redacted copy of my ec2.conf:  Hope this helps?"
saltstack/salt,https://github.com/saltstack/salt/issues/10076,saltstack_salt_issues_10076,"Feature Request - Manage LDAP entries

I think it would be really valuable to have the ability to add/update entities in LDAP (users and groups mostly) I know there is a ldapmod module, but it would be preferable if you could add users and groups just like useradd or groupadd, but point it to an LDAP server (maybe the config for that could be in the minion file?)",Would you like to see this as the ability to do the equivalent of `ldapmodify` with an ldif or specifically useradd/groupadd functionalities? or both?,"That would probably be fine, as long as creating the state could be similar to states like `postgresql_database` work, where you specify the flags for that particular function, and what user / credentials to run as. maybe something like:  Accepting a password hash would be nice too"
saltstack/salt,https://github.com/saltstack/salt/issues/4943,saltstack_salt_issues_4943,"user state, bug when add / remove group

I am using: root@cloud:/etc# salt-call --version salt-call 0.14.0 Salt return False when I added user to existed group :  All of this run properly if I call highstate second time after change.",Could you please upgrade to current develop or 0.15.1 and test these problems again? Thanks!,I've upgraded salt to 0.15.0 and the problem has gone. Thanks!
saltstack/salt,https://github.com/saltstack/salt/issues/22742,saltstack_salt_issues_22742,"salt-master says: ""This master address: 'salt' was previously resolvable but now fails to resolve!""

I ran a salt-master with -ldebug foreground. It works normally, until I run `salt-run state.orch orchestration.es -ldebug` and wait, this is my orchestration.es ",Can you upgrade to a newer release and see if you're still hitting this issue?,"On 2014.7.4, I got this error:  and salt.mine stop not work in pillar (but mine still work normally in another use such as salt '*' mine.get ."
saltstack/salt,https://github.com/saltstack/salt/issues/4023,saltstack_salt_issues_4023,"""list index out of range"" when running highstate

Just updated to 0.13.1 on Ubuntu 12.04. When I run state.highstate on one of my minions, I get a Traceback with a ""list index out of range"" error. Even turning logging to garbage hasn't helped me figure out what the issue is: ..... 2013-03-09 13:37:00,146 [salt.loader ][TRACE ] Added lvm.pvcreate to module 2013-03-09 13:37:00,146 [salt.loader ][TRACE ] Added lvm.pvdisplay to module 2013-03-09 13:37:00,146 [salt.loader ][TRACE ] Added lvm.version to module 2013-03-09 13:37:00,146 [salt.loader ][TRACE ] Added lvm.vgcreate to module 2013-03-09 13:37:00,146 [salt.loader ][TRACE ] Added lvm.vgdisplay to module 2013-03-09 13:37:00,146 [salt.loader ][TRACE ] Added lvm.vgremove to module 2013-03-09 13:37:00,151 [salt.fileclient ][INFO ] Fetching file 'salt://top.sls' 2013-03-09 13:37:00,160 [salt.utils.jinja ][DEBUG ] Jinja search path: '['/var/cache/salt/minion/files/base']' 2013-03-09 13:37:00,173 [salt.fileclient ][INFO ] Fetching file 'salt://top.sls' 2013-03-09 13:37:00,181 [salt.utils.jinja ][DEBUG ] Jinja search path: '['/var/cache/salt/minion/files/dist']' 2013-03-09 13:37:00,184 [salt.fileclient ][INFO ] Fetching file 'salt://top.sls' 2013-03-09 13:37:00,193 [salt.utils.jinja ][DEBUG ] Jinja search path: '['/var/cache/salt/minion/files/hbfs']' 2013-03-09 13:37:00,213 [salt.minion ][DEBUG ] grains target: os_family:Debian 2013-03-09 13:37:00,214 [salt.minion ][DEBUG ] pillar target: hbfs:True 2013-03-09 13:37:00,216 [salt.minion ][WARNING ] The minion function caused an exception: Traceback (most recent call last): File ""/usr/lib/pymodules/python2.7/salt/minion.py"", line 411, in _thread_return ret['return'] = func(_args, *_kwargs) File ""/usr/lib/pymodules/python2.7/salt/modules/state.py"", line 155, in highstate ret = st_.call_highstate(exclude=kwargs.get('exclude', [])) File ""/usr/lib/pymodules/python2.7/salt/state.py"", line 2019, in call_highstate matches = self.top_matches(top) File ""/usr/lib/pymodules/python2.7/salt/state.py"", line 1728, in top_matches self.opts['nodegroups'] File ""/usr/lib/pymodules/python2.7/salt/minion.py"", line 941, in confirm_top return getattr(self, funcname)(match) File ""/usr/lib/pymodules/python2.7/salt/minion.py"", line 1141, in compound_match if results[-1] == 'and': IndexError: list index out of range 2013-03-09 13:37:00,216 [salt.minion ][INFO ] Returning information for job: 20130309133659062303",Did your sls file work correctly on the previous version?,"@UtahDave They did, yes. But looking at the commit, I'm guessing it will fix the problem, so I'll try it out on the next version."
saltstack/salt,https://github.com/saltstack/salt/issues/4080,saltstack_salt_issues_4080,"Traceback in salt-master log

There is periodical error in salt-master log  salt version 0.13.1 OS: Red Hat Enterprise Linux Server release 6.3 What do you think about it?",Could you add the output of `salt --versions-report` to a comment here? Thanks!,"salt --versions-report Salt: 0.13.1 Python: 2.6.6 (r266:84292, May 1 2012, 13:52:17) Jinja2: 2.2.1 M2Crypto: 0.20.2 msgpack-python: 0.1.9.final msgpack-pure: not installed pycrypto: 2.6 PyYAML: 3.10 PyZMQ: 2.2.0.1"
saltstack/salt,https://github.com/saltstack/salt/issues/5809,saltstack_salt_issues_5809,"apt.mod_repo module broken in Ubuntu versions < 12.04

The apt.mod_repo module is broken for PPAs on ubuntu < 12.04. This is due to the '-y' flag being used on apt-add-repository which was adding in 12.04 (see http://manpages.ubuntu.com/manpages/precise/man1/add-apt-repository.1.html) This code change should fix the issue: ",Would you mind submitting those changes as a pull req?,"I believe it is already submitted and merged. :) On Jun 28, 2013 5:53 PM, ""Colton Myers"" notifications@github.com wrote: ## _CONFIDENTIALITY NOTICE_ The attached information is PRIVILEGED AND CONFIDENTIAL and is intended only for the use of the addressee named above. If the reader of this message is not the intended recipient or the employee or agent responsible for delivering the message to the intended recipient, please be aware that any dissemination, distribution or duplication of this communication is strictly prohibited. If you receive this communication in error, please notify us immediately by telephone, delete the message and destroy any printed copy of the message. Thank you."
saltstack/salt,https://github.com/saltstack/salt/issues/4424,saltstack_salt_issues_4424,"file.recurse outputs diff wrong

I have in my .sls file  The output with file.managed is pretty and nice but with file.recurse it preserves the \n","What version of Salt are you at? Thanks for the report, this will be an easy fix btw :)",salt 0.14.0 on both master & minion and running on ubuntu 12.04 LTS on both machines
saltstack/salt,https://github.com/saltstack/salt/issues/4502,saltstack_salt_issues_4502,"cannot set custom installation path in windows installer

Basiclly i do not allways want to install salt at the current default path c:\salt and it should bepossible to set the path in the installer. Also do not forget the ability to set the path when installing salt silent/unattended. One extra thing is that the default paths could should be rendered from this set path so that all paths in the minion config is working proper directly after installing. Related to issue https://github.com/saltstack/salt/issues/4122",Where do you think the config files and var directories should go? I don't think config files and cache files go in the %ProgramFiles% tree.,"You could do it in 2 steps 1. Just give the ability to pick install directory and keep the current structure and let the user choose where he wants the binaries, and there is still the possibility to change where all other folders is in the config file if he wants to. 2. After that you can optimize where all files should go by default. If i think about it some, then it should maybe be that the salt config file should be where it is in %saltdir%\conf\minion and cache files could be in %AppData%\ I do not the best practise but it should not be hard to find out how other people have done and copy that."
saltstack/salt,https://github.com/saltstack/salt/issues/20301,saltstack_salt_issues_20301,"Return errors in salt-api calls; add API-centric support for new exit codes

I have setup salt-api (cherrypy) and a salt-master on the same machine and i have a few minions connected to the master. If i then issue a command to be executed to the api that do not match any targets i get back from requests the following:  But i get a string output on stdout from salt-api saying `No minions matched the target. No command was sent, no jid was assigned.` so clearly the error is recognized somewhere but the error is not handled by the root endpoint.",What would you prefer to see via the REST API?,Well i am not sure exactly what the best solution would be but i would say that it do not conform with error handling in the cli right now. Look at this example:  If i from the cli target a minion that do not exists i get back a empty response and that error on stdout that no minions matched the target. But when i look at the exit codes i still get 2 from the call that seemed to be ok. If we translate this to how it works now in the api when my target matches no minions i get back OK and 200 code that would be like getting back 0 status code on the cli. I have also looked at if a http error code would be good for this but i do not think so because i can't find any that makes sense in this case. But it might be good enough at the same time as is and i would have to assume that if the return block is empty then no targets was matched even if that is a big assumption on what the problem really is.
saltstack/salt,https://github.com/saltstack/salt/issues/4163,saltstack_salt_issues_4163,"pkg.available_version in win_pkg only returns one version.

 Genrepo shows both are there, refresh_db succeeds however only Mozilla Firefox 17.0.3 (x86 en-GB) shows up.",Maybe we could add pkg.available_versions ? What are you thoughts?,"That would make sense, however then http://docs.saltstack.org/en/latest/ref/windows-package-manager.html#install-windows-software will also need updating. pkg.available_versions would be nice."
saltstack/salt,https://github.com/saltstack/salt/issues/4902,saltstack_salt_issues_4902,"File state broken on Windows

",Which OS?,"0.15.0, Windows 7 32 bit. Also fails the same on 64 bit."
saltstack/salt,https://github.com/saltstack/salt/issues/4969,saltstack_salt_issues_4969,"ipv4 grain on Windows is blank

salt 'minion' grains.item ipv4 ",Do you get any errors on the minion when you start it?,
saltstack/salt,https://github.com/saltstack/salt/issues/5340,saltstack_salt_issues_5340,"MSI installation fails without reboot statement

This should default to False","What do you mean by ""reboot statement""?","Yeah sorry, that was a terrible bug report! Using the Windows repo, trying to install an MSI, it (sort of) worked in 0.14.0 but now I have to specify reboot: False on all my packages."
saltstack/salt,https://github.com/saltstack/salt/issues/13356,saltstack_salt_issues_13356,"Chocolatey location has moved

Chocolatey used to be under c:\Chocolatey but is now under c:\ProgramData\Chocolatey, can the module be updated to include that when using it? Thanks",Would you mind putting together a pull req with the proper change?,"I'm neither a decent Python developer, nor do I have a Salt build environment for Windows"
saltstack/salt,https://github.com/saltstack/salt/issues/14277,saltstack_salt_issues_14277,"Chocolatey.version doesn't tell you anything informative.

",What version of salt are you using?,Salt 2014.1.7 with Chocolatey 0.9.8.27
saltstack/salt,https://github.com/saltstack/salt/issues/14763,saltstack_salt_issues_14763,"Custom salt modules not loading after sync_all, requires minion restart

Custom salt modules are a bit confusing, and documentation doesn't explain it well. For example;  For the above to work, I had to restart the minion, which appears to be undocumented. Any changes to these modules also require a minion restart Should I send a PR with some better docs, or does this need more thought?",What version of salt are you using? (`salt --versions`),Thanks for looking into this so quickly :) 
saltstack/salt,https://github.com/saltstack/salt/issues/4155,saltstack_salt_issues_4155,"git.pull and warnings

I had a git repo update with a large # of changes. git exited with a warning: git.latest: warning: too many files (created: 2765 deleted: 152), skipping inexact rename detection The repository updated fine, with a warning, but git.latest counted it as a failure. Because it wasn't a return code 0, even though it updated code, my cmd.wait that was watching the git.latest failed to kick off. Should we count this warning as a success?",Would it be sane to attempt a retry under some circumstances? If a second git pull were to be executed would the repo report cleanly?,"Yes, it would report cleanly a second time if there's no issue."
saltstack/salt,https://github.com/saltstack/salt/issues/5639,saltstack_salt_issues_5639,"HOSTS entry one line at a time

I had previously submitted PR https://github.com/saltstack/salt/pull/4533 to make the HOSTS file entries one per line, but it looks like maybe it broke some tests and got purged? Not sure. The current setup has a couple problems with us: 1) It isn't readable or easy to work with when you have lots of host entries for the same host (I have 50 hosts going to 127.0.0.1 in dev vm environments) 2) We've seen bugs in some systems, specifically OS X, where too many entries for a line can lead to weird networking issues. Is there any reason not to do one entry per line?",Can you see where it was reverted?,"Yes, this is the one that did it: https://github.com/saltstack/salt/commit/eeda1698ffc3ea02233fa574fb140ec0aa8d34f9"
saltstack/salt,https://github.com/saltstack/salt/issues/14898,saltstack_salt_issues_14898,"Unable to use a returner with salt from master

I am using a custom returner called lc_sentry If I run ",Does it work with standard returners or is it just the custom returners that aren't working when invoked from the master?,@cachedout it does not work with the standard returner either
saltstack/salt,https://github.com/saltstack/salt/issues/18482,saltstack_salt_issues_18482,"listen_in doesn't work with a file state

I refactored my code to use listen/listen_in instead of watch now that 2014.7.0 is out. It appears listen_in won't work on a file state, but watch used to work without a problem. Consider the following state: ",What do you want listen_in to do?,"Put the file on the system at the end of the state run (after the grains have been set) and then ideally, I'd like to restart a service after that. I used to do this with a bunch of watch's, but I'd like to use listen/listen_in for better ordering."
saltstack/salt,https://github.com/saltstack/salt/issues/21045,saltstack_salt_issues_21045,"Document and make config for valid pillar and state file extensions

It seems that Salt will only load files with .sls extension for pillars and possibly states, but I find nothing in the documentation that declares this. Long story short, I'm interested in slurping in a huge directory of Ansible vars files (.yml) into pillar to ease a migration to Salt. It would be excellent if Salt could support this natively but I'm prepared to write my own ""yml"" external_pillar if needed. This looks related, but I'm not sure - http://docs.saltstack.com/en/latest/ref/pillar/all/salt.pillar.cmd_yaml.html Going to try using this: http://docs.saltstack.com/en/latest/ref/pillar/all/salt.pillar.file_tree.html",Would that suit your needs?,"Yes, that would be my favorite option. I wasn't sure where to begin so I didn't try to implement. Specifically I need a config option for pillars, not states, but it seems they both only target .sls files."
saltstack/salt,https://github.com/saltstack/salt/issues/12564,saltstack_salt_issues_12564,"Unicode decoding error

With python 2.7, and salt 17.5 we ran into a problem when using a template that was generated by a webservice. Essentially, we had:  (In the develop branch this bug still exists, on line 261 I believe) It appears that there was an attempt to avoid this on line 255, however, I noticed that unicode strings are considered an instance of basestring (which is what string_types is set to on python 2.x). This causes it to attempt to re-encode the unicode string, causing the exception.",Would you mind submitting a pull request?,Sure thing- i'll try to get that today
saltstack/salt,https://github.com/saltstack/salt/issues/4199,saltstack_salt_issues_4199,"Salt minion hangs when attempting to connect to master

Other minions are connecting fine, but this particular minion hangs when trying to connect to the master. Any ideas on how to debug further? Grabbed a traceback from a ctrl+c by removing the normal exception catching for the salt-call CLI. # salt-minion --versions-report  msgpack-python: 0.1.9.final msgpack-pure: not installed pycrypto: 2.0.1 PyYAML: 3.10 PyZMQ: 2.2.0.1 # cat /etc/issue CentOS release 6.4 (Final) Kernel \r on an \m # salt-call -l debug test.ping [INFO ] Loaded configuration file: /etc/salt/minion [DEBUG ] loading grain in ['/var/cache/salt/minion/extmods/grains', '/usr/lib/python2.6/site-packages/salt/grains'] [DEBUG ] Skipping /var/cache/salt/minion/extmods/grains, it is not a directory [DEBUG ] Loaded minion key: /etc/salt/pki/minion/minion.pem Traceback (most recent call last): File ""/usr/bin/salt-call"", line 11, in <module> salt_call() File ""/usr/lib/python2.6/site-packages/salt/scripts.py"", line 75, in salt_call client.run() File ""/usr/lib/python2.6/site-packages/salt/cli/**init**.py"", line 241, in run caller = salt.cli.caller.Caller(self.config) File ""/usr/lib/python2.6/site-packages/salt/cli/caller.py"", line 43, in **init** self.minion = salt.minion.SMinion(opts) File ""/usr/lib/python2.6/site-packages/salt/minion.py"", line 158, in **init** self.gen_modules() File ""/usr/lib/python2.6/site-packages/salt/minion.py"", line 168, in gen_modules self.opts['environment'], File ""/usr/lib/python2.6/site-packages/salt/pillar/**init**.py"", line 28, in get_pillar }.get(opts['file_client'], Pillar)(opts, grains, id_, env) File ""/usr/lib/python2.6/site-packages/salt/pillar/**init**.py"", line 42, in **init** self.auth = salt.crypt.SAuth(opts) File ""/usr/lib/python2.6/site-packages/salt/crypt.py"", line 369, in **init** self.crypticle = self.**authenticate() File ""/usr/lib/python2.6/site-packages/salt/crypt.py"", line 379, in __authenticate creds = self.sign_in() File ""/usr/lib/python2.6/site-packages/salt/crypt.py"", line 228, in sign_in payload = sreq.send_auto(self.minion_sign_in_payload()) File ""/usr/lib/python2.6/site-packages/salt/payload.py"", line 171, in send_auto return self.send(enc, load) File ""/usr/lib/python2.6/site-packages/salt/payload.py"", line 153, in send polled = self.poller.poll(timeout \* 1000) File ""/usr/lib64/python2.6/site-packages/zmq/core/poll.py"", line 107, in poll return _poll(list(self.sockets.items()), timeout=timeout) File ""_poll.pyx"", line 100, in zmq.core._poll._poll (zmq/core/_poll.c:1330) File ""error.pyx"", line 99, in zmq.core.error.ZMQError.__init** (zmq/core/error.c:1081) KeyboardInterrupt",Can you telnet to the master's TCP port from that minion's machine ?,"Yes, I've verified that the minion can telnet to the master's TCP ports. I also experienced an issue where a bunch of minions were unable to connect. Restarting the master restored connectivity. Same traceback through salt:  Planning on upgrading to 0.15 when it arrives..."
saltstack/salt,https://github.com/saltstack/salt/issues/12284,saltstack_salt_issues_12284,"file.replace turns CRLF line endings to CRCRLF

I've been having a look at how the file.\* functions work under Windows, and I've found that file.replace, with args to replace 'charlie' to 'charlie2', turns - _File 1_  Running _file 1_ through this script, with the args 'charlie' to 'charlie2', results in _file 2_. If the `mode` argument to `fileinput.input` in the script above is `r` instead of `rb` then it works as expected. I think it is due to the file being opened in text mode for writing, while being open in binary mode for reading. Looking at the code for the fileinput module (Python built-in) it seems like when `inplace=True`, the output file is always opened in text mode. _Is this a Python bug?_",Could you just add the output of `salt --versions-report` please? We'll investigate this.,"I'm running off the develop branch, commit `f34dc6dadb0be0101db02abe3b898664e007ba09`. The versions you see below are from the Windows installer I used to create my test environment. "
saltstack/salt,https://github.com/saltstack/salt/issues/4336,saltstack_salt_issues_4336,"user state with groups always fails on initial run

If you had the following state:  and maspwr already existed with the following groups: `maspwr, foobar`. This state will fail on its first run. The reason is that `user.getent` (which is called from the user state, https://github.com/saltstack/salt/blob/develop/salt/states/user.py#L54) seems to return a cached version, https://github.com/saltstack/salt/blob/develop/salt/modules/useradd.py#L174. If you rerun the state the changes to the groups (which were applied successfully) will be picked up and everything passes. I believe the fix will be to remove the cached `user.getent` either conditionally or outright. Let me know if you need more info.","What do you think? If you like it, what would you like the kwarg to be?","Seems like that style could be prone to error, but y'all know the code base better than I. :)"
saltstack/salt,https://github.com/saltstack/salt/issues/4325,saltstack_salt_issues_4325,"specify multiple environment variables in the form of list when running a command

Currently when can specify environment variables like this:  IMHO, the latter form is more intuitive.","Wouldn't a map make more sense semantically? e.g. `env: {""FOO"": ""foo"", ""BAR"": ""bar""}`","@cvrebert If you want to specify multiple environment variables, why not put them into separated lines ?"
saltstack/salt,https://github.com/saltstack/salt/issues/28111,saltstack_salt_issues_28111,"fileclient.get_url will not pass authentication upon redirect

I'm trying to use fileclient.get_url (indirectly via archive.extracted). The source URL contains authentication info: http://username:password@nexus/service/local/artifact/maven/redirect?xxx.... 1. The initial call succeeds with authentication 2. The server then issues a redirect where the .tar.gz file is 3. Salt follows the redirect but does not provide the Authorization header 4. The server rejects the call with 401 Unauthorized 5. Salt does not attempt re-calling with the auth info",What is the output of `salt --versions-report`?,@jfindlay Voila: 
saltstack/salt,https://github.com/saltstack/salt/issues/25307,saltstack_salt_issues_25307,"test.version reports 2015.5.0 from 2015.5.3 tarball

I grabbed the tarball from https://github.com/saltstack/salt/releases/tag/v2015.5.3 and built it into an rpm. When installed on a minion, the minion reports the following: ","Did the update process successfully kill the old minion and start a new minion process? If you do this manually, does the version number update?","I didn't check to see if the update restarted the minion. I did however restart the minion manually and these are the results. We were upgrading from 2014.7.2 and the minion in question has never seen 2015.5.0. On Fri, Jul 10, 2015 at 1:10 PM, Justin Findlay notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/27118,saltstack_salt_issues_27118,"state.orchestration fails to get pillar which is otherwise gettable on master

I have an orchestration which relies on a pillar. The pillar correctly renders on the master via pillar.get, but does not render inside the orchestration.  state.sls gets the pillar correctly. Thoughts?",What version of salt are you using?,Whoops! Here you go: 
saltstack/salt,https://github.com/saltstack/salt/issues/27427,saltstack_salt_issues_27427,"repo.saltstack.com should have python-urllib3 and python-backports_ssl_match_hostname

",Do you have EPEL installed?,"Centos 6.2 and epel is on there. And yeah, Centos 6.2 is ancient. Believe me I know. On Sep 28, 2015 08:37, ""Justin Findlay"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/29694,saltstack_salt_issues_29694,"cron.present should add a newline at the end of the last job entry

Non working, salt generated example: ",Do you know if this happens with more recent versions of salt? What salt command(s) have you used to generate failing crontabs?,I haven't had time to try upgrading to 2015.8.2 yet and it's unlikely to happen for a few months yet. State follows: 
saltstack/salt,https://github.com/saltstack/salt/issues/33015,saltstack_salt_issues_33015,"salt.call cloud.full_query stringifies sub-keys for digitalocean

### Description of Issue/Question I want to get the IPs for my cloud instances but when I call the cloud.full_query module the data is under provider.provider.minion_id.networks is a stringified object. I would like to not have eval in my production code. :) @rallytime What's the correct way to get a list of all my cloud instances and their IPs? ",Does that help?,"@rallytime cloud.query works for digitalocean, which gets me unblocked! Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/35074,saltstack_salt_issues_35074,"salt-cloud azure basic connection and query fails

### Description of Issue/Question I'm having difficulty getting basic azure connectivity and interaction with salt-cloud. ### Setup /etc/salt/cloud.providers.d/azure.conf ",Did you use the instructions [here](https://docs.saltstack.com/en/latest/topics/cloud/azure.html#configuration)?,@jgartrel can you confirm you followed the above instructions for certificate generation?
saltstack/salt,https://github.com/saltstack/salt/issues/11030,saltstack_salt_issues_11030,"Custom outputters

This issue came out of https://groups.google.com/forum/#!searchin/salt-users/jens$20rantil/salt-users/stY2sFPPNIc/3b1TdR2W1wwJ. Adding custom outputters is currently tedious. I suggest a master would pick them up from a custom directory. Maybe through the `extension_modules` directory?",Do custom modules in an `output` directory inside that directory get loaded now?,I can have a look if it works on Monday.
saltstack/salt,https://github.com/saltstack/salt/issues/14190,saltstack_salt_issues_14190,"Bug: Infinite recursion when using transitive `prereq`s

This has taken me some time to a nail down and to create a minimum test example: I have the following state: **crash.sls** ","Can you confirm? We will be releasing our next feature release very soon, which will include this fix.",@rallytime It's a bit tricky for me to confirm as it was a long time ago I had a dev environment setup and I'm currently swamped with other work. Could you reproduce my issue with the 2014.1.0 git tag?
saltstack/salt,https://github.com/saltstack/salt/issues/18670,saltstack_salt_issues_18670,"`~` folder in my ~ after upgrade to 2014.7.0

I just upgraded master and minions to 2014.7.0. Exciting times! That said, now every time that I run `salt 'host' state.highstate` I have a `~` directory created in my home directory.  I couldn't find any duplicate on this (hard to search for `~` only), but feel free to close if so.","What version did you upgrade from? wondering what your state file/s look like that are touching the user directory, can you provide?",From 2014.1.11-1precise1. I did not apply the states on my master. I applied them to a remote minion.
saltstack/salt,https://github.com/saltstack/salt/issues/25611,saltstack_salt_issues_25611,"Exception on `at` module execution

I'm getting an exception when submitting a rather complicated `at` job:  I can recreate the issue every time. Let me know if you need anything else from me.","Should it be: `salt myminion at.at ""now + 4 weeks"" ""mysql -u root mydb -e '""'""SELECT COUNT(*) FROM users;""'""'""`?","@zhoujinl What don't you know? @jfindlay Hm, your example yields the following in my terminal:  (and yes, quoting in bash is mess! Double quoting is a double mess!)"
saltstack/salt,https://github.com/saltstack/salt/issues/33938,saltstack_salt_issues_33938,"Overmatching pillar target

**Background:** My `top.sls` file has the following: ",What are the ids of the minions that match?,@iggy `queue-0` and `queue-1`.
saltstack/salt,https://github.com/saltstack/salt/issues/35562,saltstack_salt_issues_35562,"Support for multiple SQS queues in sqs_events engine

Currently, [`sqs_events` engine](https://docs.saltstack.com/en/latest/ref/engines/all/salt.engines.sqs_events.html) only supports listening to a single queue. Workaround can be found [here](https://groups.google.com/d/msg/salt-users/KUsLVLp5O9g/78V4Y8rGAgAJ). This is a feature request to support multiple queues without doing the workaround of duplicating an engine. See also https://groups.google.com/d/msg/salt-users/KUsLVLp5O9g/lOB3FDWeAgAJ.",Does that clear it up?,"@ch3ll Perfectly, thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/37317,saltstack_salt_issues_37317,"Line number is missing in Jinja2 syntax errors

**Background:** I am using `file.managed` state to provision a file. It's a Jinja template. I have a syntax error and `salt myminion state.highstate` gives me  **Expected:** That I somewhere in that error message get the line number in my Jinja template where this error happens. **What happens:** It's missing. **Proposed solution:** Somewhere add the Jinja template line where this error happens.",Could you comment on this? Thanks! Daniel,@terminalmage  Ish. `log-server` is a key in the `pillar`dictionary that was missing. Essentially I had `{{ pillar['log-server'] }}` in the jinja template.
saltstack/salt,https://github.com/saltstack/salt/issues/37396,saltstack_salt_issues_37396,"Missing timeout documentation

https://github.com/saltstack/salt/blob/develop/salt/client/__init__.py#L840 doesn't document what it returns if `timeout is not None`.","What do you mean? Whether timeout is None or not, it returns the information about the JID, if the timeout is reached it breaks and raises an error https://github.com/saltstack/salt/blob/develop/salt/client/__init__.py#L1390","The documentation states  which doesn't include any information on what the function does when timeout occurs. I propose that it states ""if the timeout is reached it breaks and raises an error "" like you wrote above."
saltstack/salt,https://github.com/saltstack/salt/issues/7353,saltstack_salt_issues_7353,"Minions should not be able to identify as other minions

This should be prevented:  I'll submit a fix for this today.",What is mine_spoof doing?,@techhat - thanks for the tip. https://github.com/saltstack/salt/pull/7137 will still work with my pull request for fixing this issue since the master still needs to have the key of the alternate minion id to talk to the master.
saltstack/salt,https://github.com/saltstack/salt/issues/12653,saltstack_salt_issues_12653,"salt schedule doesn't return jobs result info to master

salt schedule doesn't return jobs result info to master, and don't fire event to event bus. It's inconvenient for debugging or checking the schedule functions status.",What version of salt are you using?,salt version:  there is nothing
saltstack/salt,https://github.com/saltstack/salt/issues/13866,saltstack_salt_issues_13866,"Feature request: file.directory recurse to support dir_mode and file_mode

I attempted to put this in a state:  And received the error: `Types for ""recurse"" limited to ""user"", ""group"" and ""mode""` It would probably be nice if dir_mode and file_mode were supported by recurse also.",Do you want the ability to only enforce one? (This ability may also be present if you just don't define the mode for `file_mode` or `dir_mode`),"Heh. You're absolutely right. This seems a bit inconsistent, but just using mode does work for my purposes. Would be great to see this behaviour documented, but ideally being able to specify file_mode or dir_mode in recurse would provide a bit more flexibility and be more obvious behaviour to boot. :)"
saltstack/salt,https://github.com/saltstack/salt/issues/14979,saltstack_salt_issues_14979,"salt-call --out-file argument changes permissions of target file

I have a cron job on a minion that contains the following: ",Should we make a `--out-file-append` switch instead?,"@basepi That's fair enough. I also agree with your concerns regarding a behaviour change, which I failed to take into account. Another approach would be to include an `-a, --append` argument, similar to the way the GNU tee command operates. However, as far as permissions go, even tee when called without the `-a` option will not change existing file permissions. I'm certain that's a bug, as it does not conform to standard behaviour on GNU systems (not sure about other operating systems)."
saltstack/salt,https://github.com/saltstack/salt/issues/16915,saltstack_salt_issues_16915,"Calling module event.fire_master from state results in Traceback (AttributeError) in 2014.1.13

In #16914 I mentioned I was getting an error when using the reactor. AFAICT it's a problem with Salt 2014.1.13 and not my setup (I don't recall ever noticing it in 2014.1.7 either), so am reporting that here as well. salt-call state.sls output:  No, this worked fine also. So the bug appears specific to module.run or module.wait calling event.fire_master. Given this is required for using the reactor system via states, I'm surprised this has gone unnoticed. Hopefully someone else can reproduce what I'm seeing.",Could you take a look at the latest RC of 2014.7 and see if it works correctly for you? Thanks!,"Thanks @cachedout. It did look similar, so I just made the changes indicated in #16610 to my 2014.1.13 package, and a quick test suggests the problem no longer exists. Will re-open if necessary, but so far so good. Here's my commit in case it helps anyone else. I assume there won't be a 2014.1.14. https://github.com/boltronics/salt/commit/27e366546523bfd0cde84a4d6549fafc2c3226fe"
saltstack/salt,https://github.com/saltstack/salt/issues/31209,saltstack_salt_issues_31209,"ini_manage should support different separator types

I am configuring Munin in a custom state file, and Munin basically uses an ini format for the config file format. The only difference is that instead of separating key and value pairs with an equal sign (""=""), it just uses a space. It would be great if ini_manage supported a ""separator"" argument, so the built-in state and execution modules could be reused for these kind of files.",Can this issue be closed or does more work need to be done first?,"Hi @rallytime. I'm happy with the patch, however IIRC from reading other Salt issue pages, being on the develop branch doesn't automatically mean the code will hit a release milestone, as commits are cherry-picked. Can you please clarify this? If it will end up in a future release, I'm happy for this to be closed. Thanks."
saltstack/salt,https://github.com/saltstack/salt/issues/46045,saltstack_salt_issues_46045,"salt-key can't delete a single key if name is duplicated

### Description of Issue/Question Sometimes when replacing instances outside of salt-cloud, I find myself in a situation where old minion keys are left over on the master and need to be cleaned up. Since a new key was created for the replacement host with the same name, salt-key is unable to remove just the old host key. The only known work-around is to have salt-key delete both keys, and then restart the minion on the new host to have it send through a new key, which then also has to be manually accepted. ### Setup Launch a host using EC2 or whatever using salt-cloud. Nuke it from outside salt-cloud. Launch a new host using salt-cloud. You will end up with multiple keys with different fingerprints but the same name.  The issue has been around for a long time. I thought I would have already had a bug report open about this, but either I forgot to or can't find it.","Does this work for you? Thanks, Daniel","Thanks - good to know. It would work for the above example, but unless I'm mistaken, I'm reasonably sure I have also encountered situations where there are duplicate key names that are both in the accepted section."
saltstack/salt,https://github.com/saltstack/salt/issues/46917,saltstack_salt_issues_46917,"mysql_grants.present broken with `database: somedatabase.*`

### Description of Issue/Question The Debian repositories were updated to 2018.3.0 and our MySQL grants were no longer applied correctly. On a 2017.7.4 host: ",Can this be ported to the 2018.3 branch?,"@tbronchain Looks like you'll need to wait until 2018.3.1 is tagged and then packaged. No idea what else is planned for the point release, but I know a few things broke that need fixing. Some of it I haven't even finished investigating myself. This issue/PR just addresses my obvious problem - it's important to have a good staging environment! I have two different techniques for upgrading while at the same time avoiding release issues. 1. For my non-critical home setup where I run a Xen host with a bunch of virtual machines all running Salt minions, I use an Apt pinning file under `/etc/apt/preferences.d/` so I only upgrade Salt packages when I'm ready to do so, and can always force a downgrade. I also use a caching proxy so I can still use old packages if a given release (or the entire repo) disappears. 2. At my workplace, in addition to pinning I have my own Apt repository hosted in S3, and build my own releases. If I need something patched, I can include the patch in a new package release of a given Salt version. It has been the case in the past where a point release included a security fix but also broke some important functionality we require, and it was weeks before a corrected release was out. Hosting your own repository is the safest bet for production environments IMO. You could also do something similar if you deploy from git. where you could just branch from an upstream tagged release and use that. It would be less work up front but I prefer to have everything on my servers packaged where possible. For now, hopefully your environment configurations were all stored in git so you can just roll back and pin the old Salt version. HTH!"
saltstack/salt,https://github.com/saltstack/salt/issues/49145,saltstack_salt_issues_49145,"salt-cloud intermittent AWS failure assigning tags

### Description of Issue/Question I provisioned a new host and ran into this: ","Can we get the debug logs for this? probably just need better exception handling for assigning tags, i am not sure what the issue would be at this moment.","Unfortunately I don't have debug logs for the above error. I've since launched about 10 more instances using the same AMI in the same way and not experienced the issue again, so I don't think such logs are going to be easy to obtain. I agree that it probably just needs some exception handling, and ideally a couple of automatic retries before a hard failure."
saltstack/salt,https://github.com/saltstack/salt/issues/13684,saltstack_salt_issues_13684,"DNS issue with external_ip grain

I'm not sure if this is better under salt, or contrib, but since the june 18th in our org, our DNS servers have been completely hammered with requests to api.externalip.net. This looks to be part of the external_ip.py in the contrib repo, but is used on every refresh of the grains. As far as we can tell, that DNS name no longer exists, and someone else owns it, and has no default TTL. So the minions are constantly trying to look it up over and over. I have 105 minions, and am seeing around 10,000 dns queries an hour, all not cached and timing out. A whois shows the last update was 2014-06-18 In the meantime, we have created a dummy api.externalip.net DNS master zone entry, and told it to cache, and we will see if it handles better not getting an answer, instead of not being able to resolve. salt-minion --versions Salt: 2014.1.3 Python: 2.6.8 (unknown, Nov 7 2012, 14:47:45) Jinja2: unknown M2Crypto: 0.21.1 msgpack-python: 0.1.12 msgpack-pure: Not Installed pycrypto: 2.3 PyYAML: 3.08 PyZMQ: 2.1.9 ZMQ: 2.1.9","Can you try that fix, @briffle ?","I ran it without any trouble, and it seems to work. Thanks for the heads up."
saltstack/salt,https://github.com/saltstack/salt/issues/16292,saltstack_salt_issues_16292,"salt-ssh not getting grains from target

I'm running `salt-ssh 2014.7.0rc2 (Helium)` My target has a `/etc/salt/grains` file containing `foo: bar`. When I run `sudo salt-call --local grains.get foo` on the target it returns `bar` as expected. When I run `salt-ssh 'target' grains.get foo` I get nothing. Adding `--refresh` does not change anything. This issue seems related https://github.com/saltstack/salt/issues/8555",Could you please test this against the latest commit on the 2014.7 branch? Many thanks.,"Ah, oops, that should have been the first thing I tried! I'll give that a go and get back to you."
saltstack/salt,https://github.com/saltstack/salt/issues/37860,saltstack_salt_issues_37860,"The ""init"" grains item always returns ""sysvinit"".

### Description of Issue/Question We have a setup with sysvinit / upstart / systemd Linux systems and we use the _init_ grain to deploy the appropriate init or unit file to these minions, change some system settings etc. However, with 2016.3.4, there's no way to differentiate among them. Below is the output for our 64-bit Linux minions (as the others have older Salt versions):  Thanks!",What version was this working on previously? and any other information to possibly help replicate this?,Interesting… Here's what I get on our minion: 
saltstack/salt,https://github.com/saltstack/salt/issues/5806,saltstack_salt_issues_5806,"Minion won't reconect after master failed hard

I needed to restart the salt-master the hard way. After restart I lost connection to all the minions. Two of them (running 0.15.0-1216-g2218dd9) come online eventually, but the rest ( 0.15.0-699-g1e50ec0, 0.15.0-701-g5503862) did not. Not sure if it was caused by the version or because some external conditions - the v1216 minions where the ones that were highstated when the server failed, so I think it may be coincidence... restarting the minions fixed the problem. But I have no idea what I would do if I had 200 servers (as you need to restart the minion process on every one of them)",Can you run salt --version-report on the master and minions? (salt-call --versions-report works on minions),Master is 0.13 :) 
saltstack/salt,https://github.com/saltstack/salt/issues/10940,saltstack_salt_issues_10940,"salt command does not respect timeout parameter

`salt -vt1 '*' cmd.run 'sleep 50'` does not result in ""Minion did not return"". Expected:  I noticed this because one of my minions was down and the command waited for it...",Does that make sense?,"And which timeout is defined where? I set in timeout in master to 3600, that results in the fact that the `salt \* ...` call never timed out for me (even for very long highstates). I use the salt call as part of deploy script - it updates a repo and runs post-deploy hook, etc. But the deploy is non-interactive. It runs and sends email when done. What I need is to make sure that the call will return in reasonable time (the activities should take ~ 10s - so it resonable timeout is ~ 1 minute), so that I can mark the deploy as failed. Is there a way to do it? So the `-t` param sets the time that master waits for minions to send back result. It checks using ""different channel"" if the minion is still running. If it does it it wait `-t` seconds again before checking. And the timeout parameter in master's config sets the time that minion has to return result for any call (like the find_job). Is that right?"
saltstack/salt,https://github.com/saltstack/salt/issues/15106,saltstack_salt_issues_15106,"GitFS fileroots strange exception

 Happens occasionally and runs fine after two or three tries.",Could see a `salt --versions-report` please?,
saltstack/salt,https://github.com/saltstack/salt/issues/22984,saltstack_salt_issues_22984,"salt-ssh problem possibly related to ipv6

When I try to run salt-ssh on an ipv6 server I got: ",Would you mind upgrading and see if you have the same problem? Thanks.,Unfortunately not ATM. But it was fixed by adding a IPv4 address to the server.
saltstack/salt,https://github.com/saltstack/salt/issues/33819,saltstack_salt_issues_33819,"Gitfs backend refreshed after every YAML render in masterless setup

### Description of Issue/Question In masterless setup minion fails to (or does not try to) cache gitfs backends and updates them every time any file is required from them. ### Setup ",Does this look like the same behavior you are running into?,"Yes, exactly."
saltstack/salt,https://github.com/saltstack/salt/issues/38016,saltstack_salt_issues_38016,"salt-ssh -r '$COMMAND' - $COMMAND seems to interfere with SSH connection

Passed shell command to `salt-ssh -r` seems to interfere with the SSH connection. ## Setup salt-ssh ",Do you have the salt-ssh key deployed and in the known hosts file? Just clarifying because I do not see the password set anywhere as well.,"Thanks for your reply and glad to hear it's reproducible on your setup as well. All SSH connection details - incl. path to private key - are stored in ~/.ssh/config (on the host salt-ssh runs on), hence, yes, the public key file is obviously stored on the target/minion. I'm not sure I totally understand your question regarding the known_hosts file. That one is not deployed anywhere, but the machine running salt-ssh has an entry in ~/.ssh/known_hosts of the target/minion (otherwise I wouldn't be able to successfully connect with either plain ssh or salt-ssh at all). Does that answer your question? **EDIT:** I suppose you're talking about the authorized_key file rather than the known_hosts? If so: Yes, the ssh pub key is part of the authorized_keys file on the target/minion. If you were indeed referencing the known_hosts file, I'm still not entirely sure about your follow-up inquiry :) **EDIT2:** Trying to clarify: I do use SSH public / private key authentication. No passwords. The password prompt appears for no obvious reason and is probably the result of the bug."
saltstack/salt,https://github.com/saltstack/salt/issues/4763,saltstack_salt_issues_4763,"salt needs more sanity checks

### Required sanity checks on the following: - Get all pillar data on the master:  I understand that some of these issues are design features and I have no problems with the minion obtaining all pillar data from the master, but please make this configurable behaviour! It would also be good to have 'one-way mode' or something to that effect: the salt-master is configured to send states and other data to the minions, but salt-call to the master is disabled.",Would you like to open another issue about finishing the master state and discuss it further?,"I am not entirely sure that the fix for cp.get_file and cp.get_file_str is sufficient, but I'll investigate this further later. pillar_opts does indeed restrict the master configuration, this is good. However, I just tried pillar.data on two servers that have separate pillar data entries, they both returned the same output (all the pillar data):  This is the same for pillar.raw and config.get. You did not respond to these problems. I consider them significant: - List all files on the master - List all directories on the master - List all states on the master - Test for the presence of a file The master state should be seriously looked into, it provides a catch-all patch for any future bugs in salt. Another thing to investigate is running salt within a chroot at start-up. I'm afraid I may not be able to use salt with these current issues outstanding, it places my infrastructure at great risk."
saltstack/salt,https://github.com/saltstack/salt/issues/4905,saltstack_salt_issues_4905,"bootstrap scipt doesn't work on ubuntu 13.04

running bootstrap script on ubuntu 13.04 breaks on minion stop/start","Could I get you to file this same bug over at https://github.com/saltstack/salt-bootstrap/issues please, @aljosa ? Thanks!",@basepi opened issue for salt-bootstrap
saltstack/salt,https://github.com/saltstack/salt/issues/5599,saltstack_salt_issues_5599,"minion fails to connect to master

I have a RHEL6 minion running 0.15.3, which used to work fine, but at some point seems to have stopped responding to the master (which is also running 0.15). Any command (test.ping) that I attempt to run against this minion eventually fails with ""Minion failed to return"". I tried starting up the minion in debug mode, but that didn't explain much to me: ",Does the minion reconnect to the master on restart?,"Are you asking me to restart the master or the minion? I've already tried restarting the minion, without any change. There are several other new minions (in the past 18 hours) which are able to connect to the master."
saltstack/salt,https://github.com/saltstack/salt/issues/4942,saltstack_salt_issues_4942,"Docs State that files can have user, group, and mode applied recursively - This is not the case

Docs State that files can have user, group, and mode applied recursively - This is not the case https://salt.readthedocs.org/en/latest/ref/states/all/salt.states.file.html From Docs: ""If you need to enforce user and/or group ownership or permissions recursively on the directory's contents, you can do so by adding a recurse directive: ",What version of Salt are you using? And could you use backticks in your markdown so that your example is monospaced?,"I apologize, I thought I was using 0.15.0 but that's my staging environment that is using that, this was on 0.13.2, and this feature was likely not introduced until a later version. Closing bug... :x:"
saltstack/salt,https://github.com/saltstack/salt/issues/5006,saltstack_salt_issues_5006,"groups and optional_groups

https://gist.github.com/Katafalkas/6c350262cf0dcd793008 This is the code example. When none of the users are created yet - it all seem to work fine. But when I repeat the same state - I expect it to say that none was updated and output come out in green. But what it actually does is: comes out red and gives errors about : ---  If I comment out the "" - groups: [www-data, ] "" it works fine. If I change "" - groups: [www-data, ] "" to "" - optional_groups: [www-data, ] "" it gives EXACTLY the same error. I am not sure if this is a bug or I am doing something wrong, But after conversation on irc, UtahDave suggested to post it here. # salt --version salt 0.15.1","Can you try this on current develop? Pretty sure this is a duplicate of #5019. (Actually, vise versa, but still.)",I ll give it a go
saltstack/salt,https://github.com/saltstack/salt/issues/12587,saltstack_salt_issues_12587,"salt-cloud custom functions/actions

Hey, Would it be a good idea to have similar thing for salt cloud as you do for `_states` directory ? `_clouds` directory for custom cloud functions and actions that would overwrite the default ones ?",Which default ones are you wanting to overwrite? Wouldn't it be better to just update existing ones and/or add new ones upstream to suit your needs?,"@techhat Well thats what I usually do. But I have made some and they are in develop branch, but not in release."
saltstack/salt,https://github.com/saltstack/salt/issues/12588,saltstack_salt_issues_12588,"salt-cloud api, call or action

Hey, I have been working with salt-cloud api for a while now, and with loads of functions and actions it sometimes becomes confusing as where is function and where is an action. And where and how to define variables to express one or another. At the moments there is a single method for both `action()`. Maybe it would be better to have two methods ? `action()` and `function()` to call one or another ?",Do we need to improve the documentation in some way?,fair enough. Cheers for info.
saltstack/salt,https://github.com/saltstack/salt/issues/5035,saltstack_salt_issues_5035,"Including from sls files is not relative to file, is relative to global directory

See example below. sls files appear to include everything from the root directory, which means files in embedded folder structures need to be aware of the global structure. ",What do you think? Any ideas here?,"This make sense to me, and it would be very python like On Wed, May 15, 2013 at 5:53 PM, Thomas S Hatch notifications@github.comwrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/5161,saltstack_salt_issues_5161,"Jinja template files default to user/group values despite a passed context

When trying to template some files, I pass a context of 'user' and 'group', both of which automatically default to the root user (running salt-minion). If I change the names to user_test and group_test, all works fine. I'm not sure if this is a salt specific issue, but I think it's counter intuitive. Explicitly passed context's should overrule everything else IMO. test.sls ","Shouldn't your user context be indented with a `-` in front of it? Otherwise I think it would pull it in as a string, which may be your problem.","At this moment don't have the time to run and paste my example but renaming them to site_user and site_group work fine. Additionally docs don't show a `-` http://docs.saltstack.com/ref/renderers/all/salt.renderers.jinja.html so, I think there's something else going on :)"
saltstack/salt,https://github.com/saltstack/salt/issues/6945,saltstack_salt_issues_6945,"GPU not found for Radeon HD 3450

salt-call grains.items is returning no GPUs on a system with a Radeon HD 3450 installed. I am currently on salt 0.16.3 running SL 6.4 x86_64.  I took a quick glance at the code, but didn't see anything obvious that was preventing it from parsing it properly...",Can you post any lines from the output of `lspci` that contain information about your video card?,I had included the output of lspci for the video card on my original post using the command that the salt grains use for parsing (lspci -vmm). lspci|grep -i vga shows: 
saltstack/salt,https://github.com/saltstack/salt/issues/5171,saltstack_salt_issues_5171,"M2crypto problem in Debian 7 

When I install salt-minion from the Salt ""wheezy"" repository, it doesn't run and fail with the following stacktrace :  Seems that problem already happened in Ubuntu and previous Sid.",How did you install M2Crypto? It MUST be installed from the debian package repo,"Yes, That's where things get strange : I have 3 computers in Debian 7, all vms under a vmware esxi and with exactly the same hardware, software components, etc. I did add the saltstack repo, its gpg key, aptitude update, aptitude upgrade, then ""aptitude install salt-minion"". Every dependencies seems to be pulled from the Debian repo, but 2 out of the 3 servers fails with the m2crypto error. I have also Debian 6 servers (they are ok, the salt-master is one of them) and will have to apply some admin mojo on Debian 5 too (but later). I have done some investigating, and now my suspicion is that my Wheezy servers aren't exact clones, and something is interfering somewhere... (but what ?? that's really annoying.) Well... I will export those vms for reference and further investigating, then restart from scratch with fresh clones (they are still empty machines anyway)"
saltstack/salt,https://github.com/saltstack/salt/issues/5516,saltstack_salt_issues_5516,"salt.output.highstate's mixed mode should also be verbose for states which are modified

Well, everything is in the title. I'm actually looking for a compact mode which shows in terse mode when nothings is done and verbose when something else happens, since it might be useful to have a feedback of the changes applied on the configuration. Current mixed mode is only partially useful since it only show errors. I'm willing to make a (first!) patch to either expand this mixed mode or to provide an alternative solution, if there's some chance for such change to be merged.",Maybe `changes` for the new mode? Trying to figure out a naming scheme that's intuitive.,"I think `changes` is at least as good as the `mixed` name, if not slightly more explicit."
saltstack/salt,https://github.com/saltstack/salt/issues/6299,saltstack_salt_issues_6299,"pkg.instaled 32bit package on 64bit machine fails with yum

Not sure if a duplicate of 6097 or it is yum specific (or has something to do with the fact I'm trying to install a 32bit package on a 64bit machine):  The package actually installs fine, but the state returns False. If this is already fixed please point me to the right commit so I can add a patch to my .spec. Thanks.",What platform are you running on?,"It's Amazon Linux, up to date. I can test tomorrow on a CentOS 6."
saltstack/salt,https://github.com/saltstack/salt/issues/5379,saltstack_salt_issues_5379,"pkg.upgrade (apt) says it runs dist-upgrade, but it doesn't

salt * pkg.upgrade runs apt-get upgrade, as you'd expect, but the docs say it runs dist-upgrade. This is not correct, docs should be updated",Where were you seeing `apt-get upgrade`? https://github.com/saltstack/salt/blob/develop/salt/modules/apt.py#L438-L439,"Hrmm, Looks to be my mistake misreading a log file. Of course, doing it again just upgraded all my salt-minions.... ;)"
saltstack/salt,https://github.com/saltstack/salt/issues/5543,saltstack_salt_issues_5543,"salt match keys from autosign_file is not correct

The behaviour mentioned in issue #4851 was correct. The regex for fully matched would: ^centos$ ^w2003$ The fix introduced in pull request #5307 breaks all regexes: `>>> re.match(r'\A{0}z'.format('foo'), 'foo')` `>>>`",Does `\A` and `\z` break it?,"Yes. \A matches **only** the beginning of the string, \z matches **only** the end. I think using them together matches nothing. In any case avoiding ^ and $ doesn't really solve anything. `.()[]{}+*` etc... are still special characters. E.g: `>>> import re` `>>> re.match (r'\A(foo)', 'foo')` `<_sre.SRE_Match object at 0x022AEFA0>` I think the issue is not the regex, it's the fact that the same string is being used for a string == match, a file glob, and a regex, The syntaxes are not compatible. I think the type of each matcher needs to specified in the conf file."
saltstack/salt,https://github.com/saltstack/salt/issues/7152,saltstack_salt_issues_7152,"gitfs: file_hash raises and IOError when __opts__['gitfs_root'] is set

`path` and `relpath` are incorrect when gitfs_root is set raising an IOError when opening the hashfile. Prepending `__opts__['gitfs_root']` to `path` and `relpath`, similar to the other gitfs functions, resolves the issue.",Can you please clarify this a bit?,Master conf: 
saltstack/salt,https://github.com/saltstack/salt/issues/12370,saltstack_salt_issues_12370,"Threaded minion: suspected race in state module reloading

I don't think this is safe to do this on the threaded (windows) minion: https://github.com/saltstack/salt/blob/cae9fd7f81c6030000508f711709695abde55f3b/salt/state.py#L616 I suspect this is the root cause of #12064 & #10773 & #11235. I often get `global name '__salt__' is not defined` for a managed .py file. A managed .py file triggers a module refresh. I'm running 2014.0.1, patched with the latest `modules/win_file.py`.",Why do you think this is an unsafe operation?,`saltutil.refresh_modules` just fires an event and returns - https://github.com/saltstack/salt/blob/cae9fd7f81c6030000508f711709695abde55f3b/salt/modules/saltutil.py#L369 So the current thread running a state job continues while the thread running the main minion loop gets this event and reloads the modules - https://github.com/saltstack/salt/blob/cae9fd7f81c6030000508f711709695abde55f3b/salt/minion.py#L1355 If the state job thread uses one of these modules before it is fully initialized it's likely to cause problems e.g `__salt__` has not been injected in to the module yet. As far as I can tell this modules reload isn't required at all in the threaded minion: `state.py` has already reloaded the modules. However in the multiprocessing minion it is also necessary to reload the modules in the main minion process by firing this event.
saltstack/salt,https://github.com/saltstack/salt/issues/9104,saltstack_salt_issues_9104,"mtag do not work well

salt/utils/event.py  ' mtag = 'new_job' tag = '20131208202909426185' so here do not work well: if not (mtag.startswith(tag)) it means ""salt 'minion' test.ping"" could not display the minion's return could we change mtag = raw[0:20].rstrip('|') to mtag = re.findall('\d+',raw)[0] or there is a better to fixed this? thanks",What version are you using?,0.17.2
saltstack/salt,https://github.com/saltstack/salt/issues/6201,saltstack_salt_issues_6201,"Scheduler config in pillar is broken (works in minion config)

master config:  But it did not work... Manually execute the command: salt ""*"" state.highstate The changed files can be synchronized .but schedule does not work What went wrong? Thanks!",Can you please try putting your schedule config in the minion config rather than in pillar? Just want to narrow down the issue if we can.,"i putting my schedule config in the minion config,It's work! version:0.16.0"
saltstack/salt,https://github.com/saltstack/salt/issues/7499,saltstack_salt_issues_7499,"runner auth always failed?

","Can you please give us more information? Including the exact command you ran to get this error, and the output of `salt --versions-report`. Thanks!",code: 
saltstack/salt,https://github.com/saltstack/salt/issues/8862,saltstack_salt_issues_8862,"PyDSL + sub includes + ""library"" states == broken highstate

I'm not sure if this is related to #7526 but it seems possible. The problem goes like this: I have an sls file ... it doesn't actually contain a state declaration, just some python functions and classes to help simplfy other states. We'll call it `e.sls` for now. I have two sls files that actually contain real state info, we'll call them `c.sls` and `d.sls`, and each one of these fires off `include(""e"")` so it can use the python in there. I have another sls file that is an conditional importer, and in our test it is going to include both c and d. We'll call this one `b.sls`. Firing off `salt state.sls b` will cause `include(""e"")` to return None, whereas `salt state.sls c` or `salt state.sls d` gets it to run just fine. Removing the branching choice to leave `b imports c imports e` seems to work ok, but that's obviously am not ideal solution. A copy of a minimum failing test case is posted at http://pastebin.com/1vh2mAk8 for your reading. Edit: Oh, I should mention that I'm hitting this on 0.16.4 ... also cleaned up sleep deprived nonsense words.","What do you mean by ""conditional importer""? In your pasted example, it doesn't appear that b.sls is importing e.sls at all.","You think that's bad, you should have seen what I typed that even my sleeping brain said ""wait, that doesn't seem right"" hehe. In my real world salt tree I have a pydsl state that does includes based on pillar data... I could get basically the same result with pillar matches in top.sls but doing it this way lets me run all those matching states at once without running the rest of the stuff in top.sls. I can elaborate further if you like, but it doesn't seem to be connected to the problem. As you noticed, `b.sls` doesn't import `e.sls` and that's intentional. That error comes from having a state that includes two states that both include the same state....  With those 4 files, `state.sls b` results in the same render failure from ""'NoneType' object has no attribute 'success'""."
saltstack/salt,https://github.com/saltstack/salt/issues/10963,saltstack_salt_issues_10963,"Clarifying requirements.txt

We currently have libcloud listed in requirements.txt ... this should probably be clarified as it's only a hard dep for salt-cloud, not for, say, salt-minion or salt-master. Move it to opt-requirements.txt or annotate it better where it is? Thoughts? I wanted an opinion rather than blindly raising a PR for either option. Reference: https://bugs.gentoo.org/show_bug.cgi?id=503396 /cc @thatch45 as he merged it :)",Do you have an opinion?,"@techhat I see your point Hmmm, pip understands comments in `requirements.txt`? If so it might be worth adding a comment directing humans to read the packaging page for more information?"
saltstack/salt,https://github.com/saltstack/salt/issues/23771,saltstack_salt_issues_23771,"Possible contradiction in the LocalClient docs

I'd like to query [this bit](http://docs.saltstack.com/en/latest/ref/clients/index.html#salt.client.LocalClient.cmd_iter_no_block): Is the function named ""no_block"" actually a blocking function? I'm assuming this is doc fail, but I've not looked at the code or tried that function. Hoping someone is more familiar and can answer that without spending time looking at the code :smile:",Do you have any input @whiteinge? Thanks.,"Ah, I see the difference, yes. It actually is a non-blocking call and the docs are wrong. The key difference there is the `if not fn_ret` line, cmd_iter will continue looping around that for until it either gets a return on get_iter_returns throws an exception, regardless of what timeout you give it. I haven't actually had much need to use either yet, though I suspect the cmd_iter_no_block is closer to what I'd need."
saltstack/salt,https://github.com/saltstack/salt/issues/23883,saltstack_salt_issues_23883,"max_event_size seems broken

I'm not sure exactly what's not working here, but I suspect it's the config parsing system specifically not finding max_event_size in my master config file. Okie, this is what the docs say (and this is in the [example master config](http://docs.saltstack.com/en/develop/ref/configuration/examples.html#example-master-configuration-file)): ",Can you also post the output of `salt --versions-report` for historical purposes? That will also help us debug.,Seems `--versions-report` has hard dep on nacl... will install.
saltstack/salt,https://github.com/saltstack/salt/issues/38200,saltstack_salt_issues_38200,"selinux.mode doesn't return any output and doesn't persist

This might have been reported in 2 issues, but I'm not sure about the second one. Let's say I have a system with SElinux running as enforcing. If I push this I don't get any output:  Getenforce shows that the system is now permissive though. It should return that the system has been changed from enforcing to permissive. Also selinux.mode doesn't persist after a reboot. Shouldn't there be an option to make the mode persistent? For now I manage /etc/selinux/config with file.managed. Thanks","Can you provide the `salt --versions-report` output? I was just playing with this the other day on 2016.11, and it is persistent for me.","Hi, Thanks for your answer. Master: swa ~ # salt --versions-report Salt Version: Salt: 2016.11.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.5 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.3.0 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.6 (default, Jun 22 2015, 17:58:13) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 System Versions: dist: LinuxMint 17 qiana machine: x86_64 release: 3.13.0-24-generic system: Linux version: LinuxMint 17 qiana Minion: # salt-call --versions-report Salt Version: Salt: 2016.3.4 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.5 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.7 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.5 (default, Aug 2 2016, 04:20:16) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.7.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: redhat 7.3 Maipo machine: x86_64 release: 3.10.0-514.el7.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.3 Maipo On Tue, Dec 13, 2016 at 4:53 PM, Daniel Wallace <notifications@github.com> wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/41091,saltstack_salt_issues_41091,"Regression in salt-cloud VMware profile in 2016.11.4

We provide a list of search domains for the option ""domain"" when doing cloud.create:  I don't find anything in the release note regarding a change of format of the domain option. Domain option should be multi-value. Would that be a regression?","What version were you using before where this worked so that we can test it? Thanks, Daniel","Sorry, forgot to mention. Master was running 2016.11.3 before. After downgrading back to that version, we can cloud.create again."
saltstack/salt,https://github.com/saltstack/salt/issues/5410,saltstack_salt_issues_5410,"List of unreachable hosts

I think it would be handy to be able to receive a list of unreachable minions when executing `salt '*' state.highstate` or whatever you want to do right know. Even better if there was the possibility to just receive a list of unreachable minions out of the list of targeted minions.",Can this issue be closed?,I think i can live with this.
saltstack/salt,https://github.com/saltstack/salt/issues/6126,saltstack_salt_issues_6126,"Bug : Unable to target minion with salt -I on pillar data

I'm not able to target minion based on pillar (salt -I) value like in this example : Not working: salt -I ""saltversion:0.15*"" test.ping // return nothing (really nothing, not ""no minion ...."") Working (on grains): salt -G ""saltversion:0.15*"" test.ping // gtgs1.xxx.xxx: // True // gtgs2.xxx.xxx: // ... Grain value (pillar ): salt -G ""saltversion:0.15*"" grains.item saltversion // gtgs1.xxx.xxx: // saltversion: 0.15.3",Can you pastebin the output of `salt 'minion-in-question' pillar.data` please?,"Ok now I see my mistake... saltversion came from the master! Sorry for the ""code 18"". gtgs1.frima.local: ---------- master: ---------- // ... saltversion: 0.15.3 But why is ""saltversion"" a pillar on master but a grains on the minion?"
saltstack/salt,https://github.com/saltstack/salt/issues/12188,saltstack_salt_issues_12188,"Several ""salt/auth"" events send on minion startup

When I start minions, I'm receiving several ""salt/auth"" events on my master. I was expecting only one auth event follow by minion start events. I was thinking that minion auth need to be perform on both port 4505 and 4506 when a saw that my minion isn't listening/established connection on port 4506 : ",Could we also see a `---versions-report`? UPDATE: My mistake. I see that you've said these are both 2014.1.2. We'll take a look. Thanks!,I update to 2014.1.3 and the behavior is still present. 
saltstack/salt,https://github.com/saltstack/salt/issues/12302,saltstack_salt_issues_12302,"Permission denied at the first attempt of a group creation

I got a stack trace only the first time I create a new user/group on all my minions. The subsequent invocations succeed and the user is present in /etc/passwd. All minions are on CentOS 6.5 and salt 2014.1.3. The state was working perfectly in 0.16.4. user.sls ","Does the behavior stay the same if you use `root` instead of an alias? The ""Permission denied"" error is strange to me.",I tried with root (salt-minion service and salt-call both using root) and I got the same error
saltstack/salt,https://github.com/saltstack/salt/issues/14093,saltstack_salt_issues_14093,"Salt-Api doesn't wait for the states completion of all minions before responding

I'm using salt-api to trigger custom deployment state but it return before all minions had completed their states. I have 5 minions (3 simply echo a string and 2 copy a lot of files). The 3 minions that echo and completed immediately are always in http response and the 2 others never showed. Once the faster ones responds, salt-api send the http response without waiting for the others. When I run the corresponding command minions all showed up :  Did I use correctly the api?","What version are you using, @evilNullPointer?"," Just to clarify : we won't use the usual http for very long states (some of our state can take more than 10-15 minutes) to avoid timeout issue. We will choose the /events long polling, the web hook or WebSocket when it will be available in these cases."
saltstack/salt,https://github.com/saltstack/salt/issues/22244,saltstack_salt_issues_22244,"Regression in salt-run manage.down - 2015.2

We upgraded from 2014.7.1 to 2015.2 yesterday and we got an error every time we run runner modules. The cli output had changed as well and generated double output (formated and raw json). salt-run manage.down -l debug ",Did you grab the v2015.2 tag or did you checkout the head of the branch?,I checkout the git tag
saltstack/salt,https://github.com/saltstack/salt/issues/29833,saltstack_salt_issues_29833,"salt minion won't start: Non valid IP address match on BSD alias format

While starting a minion on NetBSD with a couple of IP aliases (will probably happen on FreeBSD and OpenBSD in this scenario) I get the following traceback: ",What version of salt are you using?,@jfindlay salt 2015.8.3
saltstack/salt,https://github.com/saltstack/salt/issues/5609,saltstack_salt_issues_5609,"Expose args for controlling log file and log level

This is a duplicate of https://github.com/saltstack/salt-cloud/issues/616 and since the fix is applied to salt I was asked to recreate the issue over here.",Do you want these arguments on a per-command basis?,"For me (and for now) I really only care about salt-cloud, but I could see in the future wanting the args for salt, salt-call, salt-run, salt-cp, etc. I think it would be nice to have it available for overriding, and I think it's just a matter of adding the LogLevelMixIn to the commands that need it. I was playing with how to add it to salt, but once the command was published to 0mq it would begin logging to the default log file again that's set in the master config. Haven't figured out if it's possible to pass logging information into the pub, but it doesn't look like it."
saltstack/salt,https://github.com/saltstack/salt/issues/13226,saltstack_salt_issues_13226,"""state.sls is running as PID xyz..."" is failing my overstate runs

In our dev/testing environment we're constantly deploying our software along with Hadoop and various distributed storage services like HBase, Cassandra, Accumulo, etc. These services need to come up in a specific order, so we're making heavy use of the state.overstate runner to make this happen. Usually things are fine, but when we're dealing with deployments of a large size (100-200 node clusters) we consistently run into an issue where the orchestration is failing with errors like: foo-dn-107: - {error: 'The function ""state.sls"" is running as PID 6119 and was started at 2014, May 15 23:40:22.562154 with jid 20140515234022562154'} foo-dn-13: - {error: 'The function ""state.sls"" is running as PID 5890 and was started at 2014, May 15 23:40:22.562154 with jid 20140515234022562154'} foo-dn-146: - {error: 'The function ""state.sls"" is running as PID 6057 and was started at 2014, May 15 23:40:22.562154 with jid 20140515234022562154'} foo-dn-177: - {error: 'The function ""state.sls"" is running as PID 5863 and was started at 2014, May 15 23:40:22.562154 with jid 20140515234022562154'} foo-dn-183: - {error: 'The function ""state.sls"" is running as PID 6848 and was started at 2014, May 15 23:40:22.562154 with jid 20140515234022562154'} foo-dn-36: - {error: 'The function ""state.sls"" is running as PID 5966 and was started at 2014, May 15 23:40:22.562154 with jid 20140515234022562154'} foo-dn-40: - {error: 'The function ""state.sls"" is running as PID 5890 and was started at 2014, May 15 23:40:22.562154 with jid 20140515234022562154'} foo-dn-48: - {error: 'The function ""state.sls"" is running as PID 5930 and was started at 2014, May 15 23:40:22.562154 with jid 20140515234022562154'} foo-dn-75: - {error: 'The function ""state.sls"" is running as PID 5911 and was started at 2014, May 15 23:40:22.562154 with jid 20140515234022562154'} foo-dn-91: - {error: 'The function ""state.sls"" is running as PID 6094 and was started at 2014, May 15 23:40:22.562154 with jid 20140515234022562154'} Here's a gist with some more information about our environment: https://gist.github.com/abemusic/7f32c38677f78fd1d0c5 With enough retries we can usually get everything up and running, but I'm trying to track down why this is happening so we can fix it. I found where the error is returning in salt.modules.state::running(), but I'm not exactly sure what's going on. Maybe something in the lowstate that I'm not at all familiar with. At any rate, we really need to figure out how to consistently execute our provisioning so multiple tries aren't necessary. This problem really slows down our testing process and is wasting money because we're not using our cloud-based infrastructure in an efficient manner. It also requires bringing in folks (myself) that can help get the environment in a stable state. If anyone has any thoughts on what's going on or some things to try, please let us know!",Could you try setting  in your master config and restarting your master?,"Thanks @basepi for the tip. Preliminary tests show the same error, but we've been slammed with other stuff lately which is why I haven't been able to focus much attention on this. I'm trying to get to a point where I can carve out the time to test this completely. Stay tuned!"
saltstack/salt,https://github.com/saltstack/salt/issues/27141,saltstack_salt_issues_27141,"Regression bug in grains.list_present

Referencing https://gist.github.com/racooper/27cdee5293a861c80bd5 Apparently grains.list_present in 2015.5.0 (and earlier) would take a ""list"" value. In 2015.5.2, this is broken and is still broken in 2015.5.5 (all versions taken from EPEL).",Could you try my testcase and see if it works for you? I'm curious about what's going on here.,"your test SLS works for me, but testing again with my original sls still gives the ""uhashable type: 'list'"" error. This is under 2015.5.5 from EPEL, both server and minion. "
saltstack/salt,https://github.com/saltstack/salt/issues/29268,saltstack_salt_issues_29268,"Crypto.Cipher cannot import name PKCS1_OAEP

I've got several SuSE 11.3 servers that are generating the following error when trying to start the minion: `ImportError: cannot import name PKCS1_OAEP` The full log trace is at: https://gist.github.com/racooper/751b5f1b232209917d30 The system has pycrypto 2.6.1-36 installed. The same salt minion is working on other SuSE 11.3 servers with 2.6.1-35, 2.6.1-36, and 2.6.1-39, so I'm not sure what's causing the issue. Any suggestions? (asking here because Freenode is still under DDOS.)","How did you install salt, and what salt version are you using?","it's salt 2015.8.1, installed from http://download.opensuse.org/repositories/devel:/languages:/python/SLE_11_SP3/ which is the recommended repo in Salt documentation."
saltstack/salt,https://github.com/saltstack/salt/issues/33804,saltstack_salt_issues_33804,"SLES 11 SP3 packages missing from all locations

The rest the world may be able to update to the latest OS releases, but I have 130+ servers stuck on SLES 11 SP3. The salt packages have apparently been removed from http://download.opensuse.org/repositories/devel:languages:python/SLE_11_SP3 and have not been added to http://repo.saltstack.com/opensuse/. (This goes into yet another reason I dislike SuSE; instead of just deprecating/versioning out packages, they just disappear to the aether....) Alternatively...will the SLE_11_SP4 packages work on SLE_11_SP3?",Can you post back your results from testing the sp4 packages for anyone else coming by this issue?,SP4 packages did work.
saltstack/salt,https://github.com/saltstack/salt/issues/55031,saltstack_salt_issues_55031,"Salt tries to merge pkg.installed states even if one has un-met requisites, causing failure.

I have the following state defined:  This is using Salt 2018.3 on CentOS 7.",Can you see if you have the `state_aggregate: True` in the minion configuration? Thanks!,"In configuration, it's set to:  in both minion and master configs, which I presume is the default. It's not a setting I changed."
saltstack/salt,https://github.com/saltstack/salt/issues/8100,saltstack_salt_issues_8100,"0.17.1 Windows AMD64 stacktraces on the minion during state.highstate and state.top with ""ImportError: No module named audio""

We're using the 0.17.1 AMD64 installer. We can run a statefile via `state.sls`. But when we create a topfile and include only that one statefile (which itself has only one state), the minion stacktraces:  This is the case with both `state.highstate` and `state.top`",Does a module you're using try to import the audio module?,"It does not. It's just a cmd.run. On Oct 25, 2013 2:55 PM, ""David Boucha"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/9877,saltstack_salt_issues_9877,"s3fs - Add support for `s3.service_url`

I see that [the execution module for s3](http://docs.saltstack.com/ref/modules/all/salt.modules.s3.html#module-salt.modules.s3) will reference the configuration value `s3.service_url`. The S3 fileserver backend, however, doesn't do this. I set the value in my Master config but the logs show that it's fetching files from the default `s3.amazonaws.com`. I've tested this ability (reading `s3.service_url`) with the s3 execution module via an `s3.get` on the command line and it worked great. Any chance we can see the same in the fileserver backend? Looking at the code, it seems that `salt.utils.s3.query()` supports a `requesturl` parameter, but `salt.fileserver.s3fs` isn't making use of it (see the two calls to `s3.query` in `s3fs.py`). Would it be as simple as checking for `s3.service_url` and, if present, providing that as the value to `requesturl`? Or do I misunderstand?",Would you be able to test this when it is merged?,"The next time I have an evening to try it out, definitely. It's higher on my priority list so it'll be the first thing I get to. Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/5538,saltstack_salt_issues_5538,"SLS search syntax should support nested grains

Hi, It would be nice if the G@ syntax to search in grains supported nested grains as described in https://groups.google.com/forum/#!search/nested$20grains$20sls/salt-users/PuLsf3VB4aM/KA14kcNOyZoJ","When you say search, where are you using G@ ?","Yes. This is merely a feature request in fact. Also, the documentation mentions nested grains and doesn't give clear examples on how to manipulate these... @thatch45 yes, this would be to use with G@..."
saltstack/salt,https://github.com/saltstack/salt/issues/5541,saltstack_salt_issues_5541,"state.high_state not copying dynamic modules/states

[According to the docs here](http://docs.saltstack.com/ref/file_server/dynamic-modules.html#sync-via-states) the dynamic modules should be autoloaded when a state is run if `autoload_dynamic_modules` is True. But when I run `salt '*' state.high_state` on the master my python modules in `salt/_modules` and `salt/_states` are not copied. The same applies to `salt-call state.highstate` on the minion. When I do a `salt '*' saltutil.sync_all` before, the modules and states are found and work correctly. I've verified the `autoload_dynamic_modules` is turned on with `salt '*' test.get_opts`. The master and minion both have 0.15.3.",Can we see your top.sls file?,"Great! Sure, here: "
saltstack/salt,https://github.com/saltstack/salt/issues/5625,saltstack_salt_issues_5625,"Which event tags exist?

Looking in the code didn't make me any smarter. Some documentation on which event tags exist would be awesome.","What is it that you're trying to accomplish? Once we have a better idea of that, we can get some docs up that accomplish what you need.","I see. Hm let me try to explain what I'm after: Our salt-master doubles up as a reverse proxy for all our clients' websites. Once everything is completed after a state.highstate I want the **master's nginx confs** added/updated with reverse proxying details (all the info we need for that is in the grains and pillars) for each website. Thank you guys for an awesome product by the way, I've become seriously addicted! :-)"
saltstack/salt,https://github.com/saltstack/salt/issues/9649,saltstack_salt_issues_9649,"pkg.upgrade on yum systems doesn't honour installonly_limit in /etc/yum.conf

When using pkg.upgrade on yum based systems (Centos 6 in my case) it appears that packages marked as installonly (such as the kernel) are installed OK but never cleaned out or removed as expected. This leaves an ever increasing number of kernel packages on the target systems which I don't think is expected behviour.",What version are you running?,Sorry - should have mentioned - 0.17.2
saltstack/salt,https://github.com/saltstack/salt/issues/8633,saltstack_salt_issues_8633,"file.recurse fails on .17

Upgraded to .17 from .16, file.recurse blocks in my SLSs fail. .sls file: ",can you provide the output of salt --versions-report from your master? Also the output of salt '<minion id>' test.versions_report,"Hi David. I'm in the middle of trying to downgrade to a .16 release, because this bug killed our production servers. We were running 0.17.1"
saltstack/salt,https://github.com/saltstack/salt/issues/6418,saltstack_salt_issues_6418,"0.16.0 caching -- not reading updated sls

Error message:  It **used** to be % if ${environment} == 'staging': as you can see, it is no longer.",Could you try making another change and see whether it propagates immediately or not?,"Want to compound the weirdness? I edited the file on the salt master. Run it, I get the the error with a message from the old file, indicating it has cached the old file or isn't reading the latest file. If I run salt-call from the minion, it works! On Tue, Jul 30, 2013 at 3:18 PM, Colton Myers notifications@github.comwrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/5730,saltstack_salt_issues_5730,"Tracebacks from walkthrough

Hi. basepi (Colton Myers) suggested that I should create an issue (""We do not like tracebacks."") I have known about salt for less than 24 hours. I'm following the walkthrough at http://docs.saltstack.com/topics/tutorials/walkthrough.html. I have the master set up on a Ubuntu 12.04 server (Linode) and the minion is a Virtual Box Kubuntu 12.04. Salt was installed from the Ubuntu repos on both machines, as per the walkthrough instructions. Here's my report: ",What happens if you run a `salt --versions-report`? Can you give me the output please?,I agree. I removed salt (using apt-get purge). I am trying to install from git at the moment...
saltstack/salt,https://github.com/saltstack/salt/issues/5737,saltstack_salt_issues_5737,"new grains not refreshed for matches

When a new grain is distributed to the minions by using saltutil.sync_grains, it's data is listed when doing a grains.items but the data cannot be used while matching based on the grains using -G option. For example, writing a grain like the below  And running `salt '*' saltutil.sync_grains` will distribute the grain. And it will even show in the output of `sudo salt '*' grains.items` But matching minions, based on the newly written grain data does **not** work. `salt -G 'spell:alohomora' test.ping` Unless, the minion is restarted OR _saltutils.sync_modules_ is run from the master, matches based on this new grain do not seem to work. Shouldn't there be some command to get the minion to send/store the newly gained grain ? And shouldn't it be triggered automatically when we do _sync_grains_ ?","What version are you running? We fixed a bug with regard to this issue recently, and I'm thinking you might not be running the latest.",@basepi I am using **0.15.3** on both minion and master. What version is this issue fixed in ?
saltstack/salt,https://github.com/saltstack/salt/issues/5767,saltstack_salt_issues_5767,"State compiler stack trace

Versions: salt-minion --versions-report Salt: 0.15.3 Python: 2.7.3 (default, Apr 10 2013, 06:20:15) Jinja2: 2.6 M2Crypto: 0.21.1 msgpack-python: 0.1.10 msgpack-pure: Not Installed pycrypto: 2.4.1 PyYAML: 3.10 PyZMQ: 13.0.0 ZMQ: 3.2.2 Salt-master is not returning the stacktrace from the minion, just the name. stacktrace from minion in debug mode: http://cl.ly/Pu5g ",Can you please just put that stacktrace in a pastebin or gist.github.com?,"I tried, but pastebin/gist just hanged up the browser, when I paste the text content, it is a 2.4 MB long file compressed. 2013/6/26 Colton Myers notifications@github.com ## Oscar A. Mata T. Director de TI Maximum Labs Representaciones Metamax C.A."
saltstack/salt,https://github.com/saltstack/salt/issues/6153,saltstack_salt_issues_6153,"Minor typo: Error message: Could not found expected ':'

`could not found expected ':'` should read: `could not find expected ':'` See the full error below: ",Would you mind submitting a pull request with the fix?,I looked a little into it. It looks like it's a yaml problem: http://pyyaml.org/ticket/242 Not a salt problem.
saltstack/salt,https://github.com/saltstack/salt/issues/7656,saltstack_salt_issues_7656,"pkg.mod_repo is Wrong

salt-master,salt-minion version is 0.16.4 from epel repo with rpm install. On master run cmd like this # salt node1 pkg.mod_repo epel-source enabled=1 gpgcheck=1  the result is wrong.",Does the problem exist in the current `develop` branch? And is it a new bug or did it always exist?,"Thank you @basepi, this bug is always exist,from 0.16, 0.17 and the current develop!"
saltstack/salt,https://github.com/saltstack/salt/issues/8346,saltstack_salt_issues_8346,"python api is error

salt version is ","What OS are you running? Is there anything unusual in your master config file, perhaps near the bottom?",@whiteinge os Linux 2.6.32-358.el6.x86_64 #1 SMP Fri Feb 22 00:31:26 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux CentOS release 6.4 (Final) master file is default I use the epel source to yum install  this is not exist in 0.16 version，just in 0.17
saltstack/salt,https://github.com/saltstack/salt/issues/9270,saltstack_salt_issues_9270,"【bug】 iptables.get_rules   module is not work

salt 'node1' iptables.get_rules node1: TypeError encountered executing iptables.get_rules: %d format: a number is required, not str. See debug log for more info. Possibly a missing arguments issue: ArgSpec(args=[], varargs=None, keywords=None, defaults=None) minion.log ",Which distro are you running?,@techhat my OS is CentOS release 6.4 X64
saltstack/salt,https://github.com/saltstack/salt/issues/5906,saltstack_salt_issues_5906,"Custom modules cannot be defined in a repository used through gitfs

I am currently using a salt setup that defines all its generic states in a github repo and plug it into the salt master through the awesome `gitfs`. Unfortunately, it doesn't seem to pull in custom modules from a `_modules` directory in this git repo. Is there a particular reason why this is not possible? I think this would make sense to have as part of the gitfs functionality but that might just be my specific way of thinking about the separation of generic and specialised states/modules. What are your thoughts on this?",Can you try clearing out your gitfs cache (by removing **/var/cache/salt/master/gitfs**) and try again?,"Sorry @terminalmage the notification for your first reply somehow didn't make it into my inbox. Thanks for the reminder and thanks for the feedback. I haven't tried it yet, but I'll give it a shot and get back to you."
saltstack/salt,https://github.com/saltstack/salt/issues/8543,saltstack_salt_issues_8543,"Compound targeting with Pillar Data not returning

`salt -C 'I@key:value' grains.ls` appears to successfully target the minions but they don't return any data: https://gist.github.com/anonymous/a7d8fc4bf00f6d981458 Using other matchers seem to work: https://gist.github.com/anonymous/1c59ddb0560cef458c1c Pillar configuration: https://gist.github.com/anonymous/579b975182e04bbd6edc Version report: https://gist.github.com/anonymous/c2ee9c24f5de478feabc","What version of salt are you using? There was a bug where the pillar was not syncing as often as it should. Also, does a `saltutil.refresh_pillar` resolve the issue?",Is there any way I can install 17.2 with pip next to salt installed through the ppa? I need to be able to easily go back to the stable version.
saltstack/salt,https://github.com/saltstack/salt/issues/6188,saltstack_salt_issues_6188,"Salt unable to determine client_acl users if system uses LDAP for users

Normal behaviour on an ldap-less master: 1. Define a user in the client_acl section. 2. (Re)Start master service 3. Master creates a user key for the user in /var/cache/salt/master/.username_key However, when the system is configured to use LDAP for OS level users, step 3 fails, which means the user can not execute to configured module/commands. Note: calling os.getlogin() in a python interpreter shell does return the username of the user, so it isn't a matter of Python not being able to determine this information, also getent passwd USER and id USER from the CLI also work. This is on a fresh install of 0.16.0 on a fresh install of Debian/Wheezy I am aware of the auth via ldap route, but I'd like to keep it simple and re-use the existing system level user setup (that being one big reason to use system level usernames).. I've not yet tracked down where in the code this is not working, but I am looking.","Did it work previously? In any case, thanks for the report, we'll look into it.","So, I've tracked it down. in master.py we pull a list of users using pwd.getpwall. Then we iterate through the users in acl_users and if it isn't in the first list we skip it. A more effective, and possibly efficient, route would be to explicitly call pwd.getpwname(USER) for each user int eh acl_users list. I am not sure why pwd.getpwall is not returning all users available, but it isn't. An easy way to meet both conditions is the following:  If this is acceptable I can submit a pull request. I'm now running this code and it works fine. The try/except is because if the user is not found, pwd raises a KeyError exception. Cheers, Bill"
saltstack/salt,https://github.com/saltstack/salt/issues/6038,saltstack_salt_issues_6038,"salt-minion not running on ubuntu 12.04 after installation

Hi, I installed salt-minion on ubuntu 12.04 it got authenticated by the master but now it is throwing excpetions. Here is the debug log salt-minion -l debug 14:49:12,160 [salt.minion ][WARNING ] Starting the Salt Minion 14:49:12,160 [salt.minion ][DEBUG ] Attempting to authenticate with the Salt Master 14:49:12,162 [salt.crypt ][DEBUG ] Loaded minion key: /etc/salt/pki/minion.pem Traceback (most recent call last): File ""/usr/bin/salt-minion"", line 9, in <module> load_entry_point('salt==0.10.1', 'console_scripts', 'salt-minion')() File ""/usr/lib/python2.7/dist-packages/salt/scripts.py"", line 24, in salt_minion minion.start() File ""/usr/lib/python2.7/dist-packages/salt/**init**.py"", line 202, in start minion = salt.minion.Minion(self.opts) File ""/usr/lib/python2.7/dist-packages/salt/minion.py"", line 138, in **init** self.authenticate() File ""/usr/lib/python2.7/dist-packages/salt/minion.py"", line 441, in authenticate creds = auth.sign_in() File ""/usr/lib/python2.7/dist-packages/salt/crypt.py"", line 266, in sign_in if not self.verify_master(payload['pub_key'], payload['token']): KeyError: 'token' Can you Please look into this, thanks.",What version of Salt is installed? From the traceback it looks like a much older version.,"Thanks team it worked, i installed the latest version of salt previously it was salt-minion 0.10.1"
saltstack/salt,https://github.com/saltstack/salt/issues/8472,saltstack_salt_issues_8472,"Fresh install throws __FAILHARD__ exception

Running off a fresh Debian Wheezy 7.2 install (also verified on 7.1), the first highstate call on a masterless setup throws the same exception for almost all states using `file.py`:  On a second pass, everything behaves normally.","Does it then begin working? Also, what version of salt are you using? And can you please post a sample state that fails?","Yes, any jinja template that is sourced throws this error on the first pass only. I'm using salt from git develop on Debian Wheezy 7.2. This error recently changed to: "
saltstack/salt,https://github.com/saltstack/salt/issues/16727,saltstack_salt_issues_16727,"latest windows salt-minion 2014.1.11 reporting jinja error where previous versions did not.

upgraded to 2014.1.11 from 2014.1.0 and received the following error: ",Can you test against 2014.1.12 please?,Unfortunately I won't be able to do that on my masterless windows minions without a 2012.1.12 windows install executable. I don't have the resources to extract directly from github repo. Will the windows installation page have the 2012.1.12 version available soon?
saltstack/salt,https://github.com/saltstack/salt/issues/6207,saltstack_salt_issues_6207,"Issue with Salt-Syndic and Salt-Minion Responding to Higher Master

Background info: I was originally running Salt 0.15.3 on Ubuntu Server 12.04. I have upgraded to Salt 0.16.0, but this did not seem to change anything. I can reproduce this issue consistently on my environment. I have a simple 3 node topology: A root master, running only salt-master, with the ""order_masters"" options set in the configuration file A sub-master, running salt-master, salt-syndic, and salt-minion. The salt-syndic and salt-minion are connected to the root master (ie. Their configuration files have the root master's IP set) A minion, running only salt-minion, connected to the sub-master My problem is, that whenever I run test.ping (or manage.up) from the root master, I can only ever get a reply from the sub-master's salt-minon OR the minion's salt-minion, never both. It seems like the root master only communicates with either the salt-minion process on the sub-master or the salt-syndic process, but not both. From running the syndic and submaster minion in debug mode, I can see that the one that doesn't respond never even receives the command from the root master. I can switch which one receives the command by restarting the service that is not responding and then restarting the root master's salt-master service. When the minion is the one receiving commands, the commands will pause as if waiting for the sub-master salt-minion to respond, but it never does. (Simply restarting the services on the sub-master does nothing, I have to restart the root master's service before I see any changes.) Both the salt-syndic and the salt-minion on the submaster seem to exchange keys with the root master just fine when they start, so they are communicating with the root master. This makes me suspect that the problem is with the salt-master service on the root master. Obviously the salt-syndic is working, because I can communicate just fine with the minion (the one that is connected to the submaster) when that one is the one that is last restarted. Also, this is a simple setup for testing purposes - there is nothing running on these machines except for SaltStack. (I have a Python script I am using to deploy salt-syndic topologies that I can include if anyone thinks it would be helpful.) I originally posted this as a discussion on the mailing list here: https://groups.google.com/forum/#!topic/salt-users/_dr_OOIzzJY","Could I convince you to test on 0.16.0? I _think_ there might have been a semi-recent bugfix for syndic setups. In any case, thanks for the report.","I said in the first paragraph that I already tested it on 0.16.0. I _started_ on 0.15.3 and then upgraded later at the suggestion of people on the IRC and there was no difference. I am currently running 0.16.0 (downloaded last week). I have to work off of a local repository, so any salt updates on my end may take a little while since I'll have to manually download and add the packages. I've put my script in a pastebin: http://pastebin.com/NkKLZT8C Note: I've set the pastebin to expire in a month It requires a configuration file (instructions in the comments at the beginning) and a master and minion configuration file in the same folder, as well as the Python pexpect library. I wrote it to be able to (hopefully) quickly add SaltStack to pre-existing infrastructure. It also assumes the salt packages are in a repository each machine can access. I've gone through several versions, so if this one doesn't work as described, let me know."
saltstack/salt,https://github.com/saltstack/salt/issues/12086,saltstack_salt_issues_12086,"salt-minion in restart loop

Running salt-minion 2014.1.1 on our Windows servers. Over the last couple of days the minions on random different servers are breaking and in a constant service restart loop. So far I have seen it on Windows 2008 R2 64-bit and 32-bit servers. Not seen it yet on Windows 2003 R2 or Windows 2012 R2. This is what I see in the event viewer. It repeats every 10 seconds. It has taken my Windows server out a couple of times and made them inoperable so I have to disable the salt-minion service on the Windows servers until further notice. When it is in the restart loop the salt-minion does not respond to test.pings from the master. ","Could you test on a newer version of Salt, @leonhedding ?","I think I am using the latest Windows release. At least the newest one available with an installer. Cheers, Leon Hedding From: David Boucha [mailto:notifications@github.com] Sent: 18 April 2014 21:23 To: saltstack/salt Cc: Leon Hedding (ICT) Subject: Re: [salt] salt-minion in restart loop (#12086) I haven't seen this yet. Could you test on a newer version of Salt, @leonheddinghttps://github.com/leonhedding ? — Reply to this email directly or view it on GitHubhttps://github.com/saltstack/salt/issues/12086#issuecomment-40841146. --- OM International Services (Carlisle) Ltd - Unit B Clifford Court, Cooper Way - Carlisle CA3 0JG - United Kingdom Charity reg no: 1112655 - Company reg no: 5649412 (England and Wales)"
saltstack/salt,https://github.com/saltstack/salt/issues/7493,saltstack_salt_issues_7493,"Slow Highstates and ZeroMQ Errors (related to gitfs)

If I call highstate on any minion individually, everything works file. However, if I call `sudo salt \* state.highstate`, the highstate takes a very long time (like 5 minutes when any individual highstate returns in less than 45 seconds), and the highstate will frequently fail with ZeroMQ errors. There are only ~12 minions, and they're all inside the same VPC. I have attached the output of the salt command to a gist here: https://gist.github.com/jthigpen/7022e6ddad40f901dd44#file-salt-zmq-error-highstate-log-L1136 Line 1136 is where the ZeroMQ errors start. We're running on Ubuntu 12.04, Salt is running 16.4 across the board, and we use the bootstrapper to install everything. Versions report is here: https://gist.github.com/jthigpen/9d85b95c43224320789a Let me know if there's some other information I can get for you.","When you say ""call highstate on any minion individually"" do you mean via `salt-call state.highstate` or `salt 'my-minion' state.highstate`?",I've never seen this issue doing `salt-call state.highstate` on the minion itself _or_ calling `salt theminion state.highstate` from the master. It's only when I do the whole gaggle at once.
saltstack/salt,https://github.com/saltstack/salt/issues/13508,saltstack_salt_issues_13508,"Unhandled Exception in Payload.py

I'm getting this error on highstate.  which appears to be relatively new code in 8a664b121d02a621d0d9f71a09017a7c3ed5004b by @jacksontj This is on an unbuntu 12.04 box running latest salt.",Does the highstate execute as expected or does it fail?,"It fails for me _I think_. I caught it after the fact when there were problems on the box. I think I have the whole logfile from the highstate run if you're interested. On Tue, Jun 17, 2014 at 3:13 PM, Colton Myers notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/6269,saltstack_salt_issues_6269,"lsb_codename grain change to lsb_distrib_codename breaks ppa module

Looks like the change from lsb_codename to lsb_distrib_codename didn't get updated in the ppa state module.  File ""/usr/lib/pymodules/python2.7/salt/state.py"", line 1237, in call _cdata['args'], *_cdata['kwargs']) File ""/usr/lib/pymodules/python2.7/salt/states/pkgrepo.py"", line 199, in managed sanitizedkwargs = **salt**['pkg.expand_repo_def'](repokwargs) File ""/usr/lib/pymodules/python2.7/salt/modules/apt.py"", line 1189, in expand_repo_def dist = **grains**['lsb_codename'] KeyError: 'lsb_codename' The lsb_\* grains look like this: lsb_distrib_codename: precise lsb_distrib_description: Ubuntu 12.04.1 LTS lsb_distrib_id: Ubuntu lsb_distrib_release: 12.04 This is salt 0.16.0 installed from the PPA. Finally, here's the state that triggered the error: nginx_ppa: pkgrepo.managed: - ppa: nginx/stable - require_in: - pkg: nginx",Did your pull req fully resolve this issue? Thanks for the report and the pull req!,Seems to have done the trick. I actually wrote a little sed to fix it on the test servers until the next release comes out. Thanks for getting it merged so quickly!
saltstack/salt,https://github.com/saltstack/salt/issues/11209,saltstack_salt_issues_11209,"saltutil.sync_modules failing on 2014.1

Here's the debug, very similar to the grains issue I also submitted:  sync_all has the same issue.",What file backend(s) are you using? Did this work for you in previous versions?,it worked at least in 0.17.4 and 0.17.5. This is the entire fileserver_backend setup: 
saltstack/salt,https://github.com/saltstack/salt/issues/7411,saltstack_salt_issues_7411,"install grains

I installed the grains a minion by `salt 'ip-10-117-82-237.ec2.internal' saltutil.sync_grains`, could see some output from master. But there are some error messages on minion when run `[root@ip-10-117-82-237 ec2-user]# salt-call grains.ls` ",Can you please gist those files?,I used grains from the https://github.com/saltstack/salt-contrib.
saltstack/salt,https://github.com/saltstack/salt/issues/8264,saltstack_salt_issues_8264,"upgrade to 0.17.1

After I updated the salt-minion from 0.16 to 0.17.1, there were two issues: 1. some warning message output like as ",Can you reproduce the second issue at all?,Actually the second issue has been there for long time. On my every minions have the same issue.
saltstack/salt,https://github.com/saltstack/salt/issues/30696,saltstack_salt_issues_30696,"2015.5 debian salt-master package forces sysvinit

Hello, since I switched to repo.saltstack.com for my debian packages, I am having trouble upgrading to 2015.5.9. It seems control file is having an a hard dependency on sysvinit-core or python-systemd for salt-master package, however there is no python-systemd package available. Maybe it is intended to be distributed by saltstack repository as well but this is not the case currently so I am currently stuck with debian backports as I do not want to switch existing systems init. I checked control file from: http://repo.saltstack.com/apt/debian/8/amd64/2015.5/salt_debian.tar.xz Also salt-master is the only package causing problem, minion and cloud are fine.",What version of debian are you using?,"Yes, this is debian 8."
saltstack/salt,https://github.com/saltstack/salt/issues/6314,saltstack_salt_issues_6314,"mysql_user not using correct connection host

I have an sls which looks like such:  Thanks.","How are they specified in your master config? Can you show us the piece in question? Also, thanks for the report. =)",Sure: 
saltstack/salt,https://github.com/saltstack/salt/issues/11133,saltstack_salt_issues_11133,"mysql_user and default file

I'm having problems getting the mysql_user.present to work with a defaults file. Both the salt master and the salt minion are running 0.17.5, and the sls looks like this:  Thanks.",Does this sound reasonable?,"Yea. I mean, it could break stuff if you were say getting the username from mysql.user in opts, and only had the password in the defaults file, but that doesn't sound like a common use case, and this would still allow you to explicitly give the defaults file and other options, and have it work as expected. Pull request 11174 fixes it for me on 0.17.5."
saltstack/salt,https://github.com/saltstack/salt/issues/10566,saltstack_salt_issues_10566,"salt _modules not picked up after upgrade

Upgraded salt-minion from 0.17.2 to 0.17.5. Initial restart of the minions did not pick up custom sync'd _modules/. Looking on disk, the files were present: /var/cache/salt/minion/extmods/modules/cust.py /var/cache/salt/minion/extmods/modules/cust.pyc /var/cache/salt/minion/files/base/_modules/cust.py However, calls returned cust.method were not available. Restarting the minions a second time restored functionality, as did calling saltutil.sync_modules against the remaining minions, although no files were transfered so only internal cache appears to have been modified.","What did the upgrade process look like? Strange that the second restart fixed it, I wonder if there was something different about the initial restart.","The state used to upgrade the minions was https://gist.github.com/jalons/3d68c1b69722c4f95677 The package is the 0.17.5 from koji, rebuilt with a patch to enable the gitfs caching @terminalmage did. After reporting this issue, we noticed this in two other environments (each environment has stand alone master with minions reporting to it). I have not had a chance to look into what can/does invalidate minion side caches of _modules/, I'm presuming there's something that handles _states, _grains, and _modules? I don't see any minion side changes in the gitfs caching introduced in https://github.com/saltstack/salt/pull/9916 (which is what the local patch is based off of), so I don't believe the patch would be related."
saltstack/salt,https://github.com/saltstack/salt/issues/6417,saltstack_salt_issues_6417,"Salt 0.16.1: TypeError When Running 'salt-call --local state.highstate' With Standalone Minion

Just what the summary says. Didn't have this error with Salt 0.16.0, but upgrading to .1 introduced this: <pre> # salt-call --local state.highstate [INFO ] Configuration file path: /etc/salt/minion [INFO ] Executing command 'ps -efH' in directory '/root' [INFO ] Loading fresh modules for state activity [INFO ] Creating module dir '/var/cache/salt/minion/extmods/modules' [INFO ] Syncing modules for environment 'base' [INFO ] Loading cache from salt://_modules, for base) [INFO ] Caching directory '_modules/' for environment 'base' [INFO ] Creating module dir '/var/cache/salt/minion/extmods/states' [INFO ] Syncing states for environment 'base' [INFO ] Loading cache from salt://_states, for base) [INFO ] Caching directory '_states/' for environment 'base' [INFO ] Creating module dir '/var/cache/salt/minion/extmods/grains' [INFO ] Syncing grains for environment 'base' [INFO ] Loading cache from salt://_grains, for base) [INFO ] Caching directory '_grains/' for environment 'base' [INFO ] Creating module dir '/var/cache/salt/minion/extmods/renderers' [INFO ] Syncing renderers for environment 'base' [INFO ] Loading cache from salt://_renderers, for base) [INFO ] Caching directory '_renderers/' for environment 'base' [INFO ] Creating module dir '/var/cache/salt/minion/extmods/returners' [INFO ] Syncing returners for environment 'base' [INFO ] Loading cache from salt://_returners, for base) [INFO ] Caching directory '_returners/' for environment 'base' [INFO ] Creating module dir '/var/cache/salt/minion/extmods/outputters' [INFO ] Syncing outputters for environment 'base' [INFO ] Loading cache from salt://_outputters, for base) [INFO ] Caching directory '_outputters/' for environment 'base' Traceback (most recent call last): File ""/usr/bin/salt-call"", line 11, in <module> salt_call() File ""/usr/lib/python2.6/site-packages/salt/scripts.py"", line 76, in salt_call client.run() File ""/usr/lib/python2.6/site-packages/salt/cli/__init__.py"", line 265, in run caller.run() File ""/usr/lib/python2.6/site-packages/salt/cli/caller.py"", line 131, in run ret = self.call() File ""/usr/lib/python2.6/site-packages/salt/cli/caller.py"", line 72, in call ret['return'] = func(*args, **kwargs) File ""/usr/lib/python2.6/site-packages/salt/modules/state.py"", line 201, in highstate cache_name=kwargs.get('cache_name', 'highstate') File ""/usr/lib/python2.6/site-packages/salt/state.py"", line 2179, in call_highstate self.load_dynamic(matches) File ""/usr/lib/python2.6/site-packages/salt/state.py"", line 1857, in load_dynamic if syncd['grains']: TypeError: list indices must be integers, not str </pre> OS Info: - CentOS 6 - Python 2.6.6 - Salt 0.16.1 - Standalone minion - Salt, -minion, and -master installed - `/etc/salt/minion` is configured to point to local","Could you potentially test this with the latest `develop` branch? I think it may be fixed, we just fixed a major grains-related issue.",Yep -- the latest in develop fixed it (aeb20a4). Thanks! Now my original problem is back...so I'll be opening up a new bug shortly.
saltstack/salt,https://github.com/saltstack/salt/issues/7602,saltstack_salt_issues_7602,"Push salt-ssh keys to existing minions using salt

I think, it would be useful when using salt-ssh to not duplicate keys (salt's pki and ssh rsa) when interacting by ssh with salt minions. Can we use already accepted salt's keys?",What do you mean? Can you give a little more background?,"I mean, there are two ways to run a command. The first one - via ZeroMQ - means that we must have installed minion with accepted key on the master. The second - via salt-ssh - means that we don't need to install a minion, we can just use ssh keys. But there are many use cases to use salt-ssh on hosts with minion installed. For example, for ease minion upgrades, restarts etc. In this case before calling salt-ssh we already have an accepted minion's key on the master. Would be awesome that salt-ssh will use this accepted key without generation the new one (for ssh connection). The point is, I'm not sure whether these keys are compatible or not."
saltstack/salt,https://github.com/saltstack/salt/issues/8072,saltstack_salt_issues_8072,"pkgrepo.managed should fail if apt-key fails

",Could you please post a Salt versions report? Thanks!,Same for the master and a minion. 
saltstack/salt,https://github.com/saltstack/salt/issues/8093,saltstack_salt_issues_8093,"CRITICAL errors should influence on a result

I have such init.sls file: ","Can you show the output of `salt-call cp.list_states` please? Basically, it looks like it's not finding the db.percona_client_56 sls file.","@basepi , this is because of wrong jinja formatting. It's all about minus signs after {# and before #}"
saltstack/salt,https://github.com/saltstack/salt/issues/8159,saltstack_salt_issues_8159,"pkg.latest fails with pkgs argument

<b>deploy.sls</b> ",When was the latest time you updated these machines from the develop branch? This issue may have been fixed two days ago in this commit: 889dc41.,"I got salt from the debian repository, not from git."
saltstack/salt,https://github.com/saltstack/salt/issues/37468,saltstack_salt_issues_37468,"salt-ssh: singledispatch, backports.abc missing from thin

### Description of Issue/Question Running salt-ssh from develop causes `ImportError: No module named singledispatch` on the minion. ",Can you make sure that any pyc files are cleaned up? Your version number looks very old although the git commit number looks recent.,"I probably forgot to fetch tags. Here's a full transcript of me following https://docs.saltstack.com/en/latest/topics/development/hacking.html#running-a-self-contained-development-version with the same result, note the versions-report at the end: "
saltstack/salt,https://github.com/saltstack/salt/issues/6502,saltstack_salt_issues_6502,"An error is produced when trying to run 'salt-call --local state.sls example' using 0.16.2 on CentOS 6.4 x86_64.

Bug Desc: An error is produced when trying to run 'salt-call --local state.sls example' using 0.16.2 on CentOS 6.4 x86_64. VMWare Workstation 9.0.2 Operating System: CentOS 6.4 x86_64 Salt Version 0.16.2 and the latest development Versions affected: 0.16.2 and development repo Steps to repeat: 1) Fresh install of CentOS 6.4 x86_64 2) Run all updates via yum update. 3) Install salt 0.16.2 -> curl -L http://bootstrap.saltstack.org | sh -s -- git v0.16.2 4) Create any example salt state in /srv/salt/example.sls for testing. 5) Try to run the state you created with -> salt-call --local state.sls example 6) The error below will be present. The same example runs fine using 0.16.0. The Error: [root@salty-centos ~]# salt-call --local state.sls lnpp Traceback (most recent call last): File ""/usr/bin/salt-call"", line 11, in <module> salt_call() File ""/usr/lib/python2.6/site-packages/salt/scripts.py"", line 76, in salt_call client.run() File ""/usr/lib/python2.6/site-packages/salt/cli/**init**.py"", line 300, in run caller.run() File ""/usr/lib/python2.6/site-packages/salt/cli/caller.py"", line 133, in run ret = self.call() File ""/usr/lib/python2.6/site-packages/salt/cli/caller.py"", line 68, in call with salt.utils.fopen(proc_fn, 'w+') as fp_: File ""/usr/lib/python2.6/site-packages/salt/utils/**init**.py"", line 849, in fopen fhandle = open(_args, *_kwargs) IOError: [Errno 2] No such file or directory: '/var/cache/salt/minion/proc/20130802092631486864' Latest Stable Versions Report: (error present on this version) Installed with - curl -L http://bootstrap.saltstack.org | sh -s -- git v0.16.2 Salt: 0.16.2 Python: 2.6.6 (r266:84292, Jul 10 2013, 22:48:45) Jinja2: unknown M2Crypto: 0.20.2 msgpack-python: 0.1.13 msgpack-pure: Not Installed pycrypto: 2.0.1 PyYAML: 3.10 PyZMQ: 2.2.0.1 ZMQ: 3.2.3 Development Versions Report: (error present on this version) Installed with - curl -L http://bootstrap.saltstack.org | sh -s -- git develop Salt: 0.16.0-1669-g2824746 Python: 2.6.6 (r266:84292, Jul 10 2013, 22:48:45) Jinja2: unknown M2Crypto: 0.20.2 msgpack-python: 0.1.13 msgpack-pure: Not Installed pycrypto: 2.0.1 PyYAML: 3.10 PyZMQ: 2.2.0.1 ZMQ: 3.2.3 0.16.1 Versions Report: (no error on this version) Installed with - curl -L http://bootstrap.saltstack.org | sh -s -- git v0.16.1 Salt: 0.16.1 Python: 2.6.6 (r266:84292, Jul 10 2013, 22:48:45) Jinja2: unknown M2Crypto: 0.20.2 msgpack-python: 0.1.13 msgpack-pure: Not Installed pycrypto: 2.0.1 PyYAML: 3.10 PyZMQ: 2.2.0.1 ZMQ: 3.2.3 0.16.0 Versions Report: (no error on this version) Installed with - curl -L http://bootstrap.saltstack.org | sh -s -- git v0.16.0 Salt: 0.16.0 Python: 2.6.6 (r266:84292, Jul 10 2013, 22:48:45) Jinja2: unknown M2Crypto: 0.20.2 msgpack-python: 0.1.13 msgpack-pure: Not Installed pycrypto: 2.0.1 PyYAML: 3.10 PyZMQ: 2.2.0.1 ZMQ: 3.2.3",Can you post the SLS that triggered this?,@terminalmage I was able to reproduce it with these files. salt-call --local state.sls example https://gist.github.com/JesseC-/d7bfb66a159d9b28eec7 I tested a little further. It affects all commands for me. This returns the same error: salt-call --local status.cpuinfo
saltstack/salt,https://github.com/saltstack/salt/issues/9366,saltstack_salt_issues_9366,"Difference between pip state docs, and pip_state docs?

I noticed tonight while reviewing prior issues that https://github.com/saltstack/salt/issues/5386 had been opened regarding http://docs.saltstack.com/ref/states/all/salt.states.pip.html lacking examples, however when I reviewed the file source, there are a lot of examples. At this point I noticed that this was specifically for the pip_state docs located here: http://docs.saltstack.com/ref/states/all/salt.states.pip_state.html. Upon reviewing the doc/ref/states/all/salt.states.pip_state.rst file it seems to be referencing pip_state, but the content isn't pulled in. The links on the sidebar are also identical between these two docs. So the questions here are: 1) Why is this state called pip_state, instead of just pip? Does this create some sort of conflict? 2) How do we address the issue of having to enter in pip_state.html? This is not very intuitive, and it creates a gap in what docs are getting updated, so there's a bunch of cool new pip features, but it's not on the docs anyone would go to, nor is it visible in google if you search for 'pip state saltstack'. Is there an easy way to address this so that we can get rid of the states.pip_state documentation, and simply ensure that states.pip documentation is always pulling the latest content?",Where did the bad link to the old `pip.html` state come from originally? That link shouldn't show up anywhere in the docs...,"@terminalmage Regarding the change from pip.py to pip_state.py? @whiteinge and I were curious where that came from, didn't the actual state used to be called pip?"
saltstack/salt,https://github.com/saltstack/salt/issues/10002,saltstack_salt_issues_10002,"Update salt-cloud docs to explain how to change the expected dirs

The docs over at http://docs.saltstack.com/topics/cloud/config.html elude to the fact that the cloud file is only the default location, however there is no mention or details on how to change or configure that.","Could you clarify which is the section that ""elude[s] to the fact that the cloud file is only the default location""?","@AnneTheAgile Sure. The first line in the documentation reads: 'A number of core configuration options and some options that are global to the VM profiles can be set in the cloud configuration file. By default this file is located at /etc/salt/cloud.'. This section leads you to believe that it can be modified, but there are no details on how to do so."
saltstack/salt,https://github.com/saltstack/salt/issues/13042,saltstack_salt_issues_13042,"add 'bin_env' to cmd.run module/state

It would be really nice if there was a built in way within the cmd module (the support is actually inside the pip module with `bin_env`) that allowed you to run commands within a virtualenv, Currently you have to do something like this:  This is more typing, but it feels a bit more broken out, and I feel like in situations where you are running commands that live within the bin folder (pelican, rst, easy_install, etc.) it's a lot more obvious regarding what you're doing, and where it's running.",Doesn't `cwd` provide this functionality?,"Hmm, I thought that cwd and bin_env worked differently, maybe I am incorrect in this assumption."
saltstack/salt,https://github.com/saltstack/salt/issues/13483,saltstack_salt_issues_13483,"Go through all documentation and find anywhere we might be lacking clear information regarding where a file or setting lives

There are several places that I can think of off-hand in the documentation (https://github.com/saltstack/salt/issues/13482 as an example), where we are missing clear and concise data on EXACTLY where to put things. This comes up in the IRC as well occasionally, and it should be relatively simple, if not somewhat boring to go through and fix these. Refs: https://github.com/saltstack/salt/issues/12446","Would it be useful to have a ""where do I put my files"" doc that consolidates all of this information as well?",@basepi That is an awesome idea! We just need to make sure we're diligent about cross referencing it.
saltstack/salt,https://github.com/saltstack/salt/issues/25475,saltstack_salt_issues_25475,"SPM update_repo command doesn't seem to work properly

When running `spm update_repo` as noted here: http://docs.saltstack.com/en/develop/topics/spm/#updating-local-repository-metadata there is no output/return from the command, simply the help content:  This is running salt 2015.8.0rc1 (Beryllium) via a git install. I've quickly glanced at https://github.com/saltstack/salt/blob/5840c2e06bd6e149e04f786bf759603f573fb3c1/salt/client/spm.py#L265 and I don't really see why this should be failing and presenting the help details. I definitely can't install even from a local repo after running the update command unfortunately.",Do you have a good solution to have the option parser not require an argument for some commands?,"@techhat Assuming the repo name is ignored, the command itself should still be working right? So it just ignores the arg value, and runs the command? If that's the case it still doesn't seem to be updating the repo."
saltstack/salt,https://github.com/saltstack/salt/issues/26560,saltstack_salt_issues_26560,"Vsphere getting started guide should be updated/totally deprecated

It looks like http://docs.saltstack.com/en/latest/topics/cloud/vsphere.html is still alive even though it has a link to the vmware docs. This document should probably be removed, or a getting started guide written for the vmware stuff (in addition to what currently exists doc wise) that this can link to.",What do you think?,"@jfindlay The docs for vmware are showing 2015.5.4, might be good to update that as well. I'm fine with keeping the legacy stuff in, but we should try to duplicate the getting started content I think."
saltstack/salt,https://github.com/saltstack/salt/issues/31931,saltstack_salt_issues_31931,"Ordering States documentation should note top.sls adheres to this rule

https://docs.saltstack.com/en/latest/ref/states/ordering.html#state-auto-ordering should be updated to note that the `top.sls` also follows this rule. I know it's a state file, but explicitly noting this would be good.",Do we need to add anything more? (Thanks @twellspring!),"Works for me. I think there's still a chance people will miss it, but overall this is an improvement. I'm going to close this."
saltstack/salt,https://github.com/saltstack/salt/issues/6750,saltstack_salt_issues_6750,"cron.present missing option for path

My minions are running salt-minion 0.16.3 from the PPA on either Ubuntu 10.04 or 12.04. I use cron.present to run salt-call state.highstate at randomized times so my minions don't hammer the master. I discovered that the path affects this significantly. It would be nice to have a path option for cron.present. My workaround was to prepend my desired PATH to the command: ",Did @terminalmage's suggestiong of `cron.set_env` work out for you?,"That sounds reasonable, but I stuck with my workaround of setting the PATH in the cron command. I will use that method in the future."
saltstack/salt,https://github.com/saltstack/salt/issues/44722,saltstack_salt_issues_44722,"pip.install's `log` param should permit a new file to be created

### Description of Issue/Question When using the `pip.installed` state and specifying a `log` parameter the state will fail if the log file does not yet exist. If the log file does not exist and the parent directory is writable then `pip.installed` should create the file. The issue is in the underlying `pip.install` execution module function. ### Setup / Steps to Reproduce Issue I'm trying to install Gnocchi via pip: ","Would you mind submitting a PR to fix this? Thanks, Daniel","@gtmanfred Sure, I need to finish the project I'm working on and then I'll get a PR submitted."
saltstack/salt,https://github.com/saltstack/salt/issues/7625,saltstack_salt_issues_7625,"Undefined jinja variable

Hi, after upgrading to 0.17 I started getting an error ""Undefined jinja variable; line 353 in template"" when I try and set the following variable using grains. This worked before, did something change? ",What OS are you using?,"Currently using debian 7.1.0 on master and minion. Also it appears that ""salt 'server*' grains.get id"" is pulling the correct information so the module seems to be working."
saltstack/salt,https://github.com/saltstack/salt/issues/7336,saltstack_salt_issues_7336,"error message for unresolved requisite is unhelpful

If you do a ""watch_in"" for an ID that doesn't exist, then you get an error message of the form: Cannot extend ID {0} in ""{1}:{2}"". It is not part of the high state. The actual error is that you have messed up the requisite, but this message doesn't help you fix it. You can reproduce this with a state that does something like this:  If there is no service with ID ""bar"", you will get this error.",Does it actually have {0} {1} and {2} or are those filled in with values? Sounds like a botched `.format()` job. Thanks for the report.,"You do get values filled in. The problem is that the error message doesn't help you to understand the problem. The actual problem is that the requisite refers to an ID that doesn't exist, but that is not detected until the implementation starts extending states."
saltstack/salt,https://github.com/saltstack/salt/issues/6703,saltstack_salt_issues_6703,"Silent when funtion execution failed

<pre> Expected: Traceback in response. At master: [root@salt-master vagrant]# /opt/salt/bin/salt '*' keystone.auth keystone.token=admin -v Executing job with jid 20130814231209509424 ------------------------------------------- salt-minion1.domain.tld: Minion did not return salt-minion2.domain.tld: Minion did not return In minion log: 2013-08-14 23:12:09,623 [salt.minion ][INFO ] User sudo_vagrant Executing command keystone.auth with jid 20130814231209509424 2013-08-14 23:12:09,624 [salt.minion ][DEBUG ] Command details {'tgt_type': 'glob', 'jid': '20130814231209509424', 'tgt': '*', 'ret': '', 'user': 'sudo_vagrant', 'arg': ['keystone.token=admin'], 'fun': 'keystone.auth'} 2013-08-14 23:12:09,664 [salt.minion ][WARNING ] TypeError encountered executing keystone.auth: auth() takes exactly 0 non-keyword arguments (1 given). See debug log for more info. Possibly a missing arguments issue: ArgSpec(args=[], varargs=None, keywords='options', defaults=None) 2013-08-14 23:12:09,666 [salt.minion ][DEBUG ] TypeError intercepted: auth() takes exactly 0 non-keyword arguments (1 given) Traceback (most recent call last): File ""/opt/salt/lib/python2.6/site-packages/salt/minion.py"", line 626, in _thread_return ret['return'] = func(*args, **kwargs) TypeError: auth() takes exactly 0 non-keyword arguments (1 given) Traceback (most recent call last): File ""/opt/salt/lib/python2.6/site-packages/salt/minion.py"", line 626, in _thread_return ret['return'] = func(*args, **kwargs) TypeError: auth() takes exactly 0 non-keyword arguments (1 given) 2013-08-14 23:12:09,670 [salt.minion ][CRITICAL] An exception occurred while polling the minion Traceback (most recent call last): File ""/opt/salt/lib/python2.6/site-packages/salt/minion.py"", line 1013, in tune_in self._handle_payload(payload) File ""/opt/salt/lib/python2.6/site-packages/salt/minion.py"", line 514, in _handle_payload 'clear': self._handle_clear}[payload['enc']](payload['load']) File ""/opt/salt/lib/python2.6/site-packages/salt/minion.py"", line 553, in _handle_aes self._handle_decoded_payload(data) File ""/opt/salt/lib/python2.6/site-packages/salt/minion.py"", line 598, in _handle_decoded_payload process.start() File ""/usr/lib64/python2.6/multiprocessing/process.py"", line 104, in start self._popen = Popen(self) File ""/usr/lib64/python2.6/multiprocessing/forking.py"", line 99, in __init__ code = process_obj._bootstrap() File ""/usr/lib64/python2.6/multiprocessing/process.py"", line 248, in _bootstrap sys.stderr.write('Process %s:\n' % self.name) IOError: [Errno 32] Broken pipe </pre>",Can you reproduce it at will?,<pre> Another example: [root@salt-master vagrant]# /opt/salt/bin/salt '*' test.ping a.b=1 -v Executing job with jid 20130814234359088078 ------------------------------------------- Execution is still running on salt-minion1.domain.tld Execution is still running on salt-minion2.domain.tld Execution is still running on salt-minion1.domain.tld Execution is still running on salt-minion2.domain.tld salt-minion1.domain.tld: Minion did not return salt-minion2.domain.tld: Minion did not return </pre>
saltstack/salt,https://github.com/saltstack/salt/issues/16850,saltstack_salt_issues_16850,"salt-cloud configs: allow for dynamic data

The salt-cloud configs are just static files. There is a fair amount of overlap in the data in those files with other things. (Eg. the AWS keys are needed in those files and in the salt configs.) In our case, even just the list of providers is used elsewhere. (In both states and pillars.) I would like some way to dynamically generate the salt cloud configs. Jinja would go along way. But, being able to write python code to generate the providers and/or profiles would be great. Another use case is being able to check in the configs. I am working on getting all of our files stored in an SCM. Checking in the AWS keys is not a good idea. Currently, we are encrypting part of our pillars and then decrypting post-checkout. We would like to move to the GPG renderer. This is just another example of where I need to dynamically render the data in the config. Happy to provide more details/thoughts.",How close am I to your mindset?,"I just saw: https://github.com/saltstack/salt/issues/8403 https://github.com/saltstack/salt/pull/15181 I'm still learning salt-cloud, so bear with me if I fumble the vocabulary a bit... Agreed there isn't much need to add dynamic data to /etc/salt/cloud. (There are some really minor cases, like being able to set log level on salt cloud, minion and master all to debug. But, that stuff can be automated ""out of band"" of salt itself.) Agreed that pillar and grain data do not seem to the the right solutions. We don't have any maps, rather we have lot of providers. (Our config/layout has grown organically and needs to be reviewed. So, it is entirely possible that using maps more heavily may help, since maps can use the render system.) Let me give a quick overview of my understanding of the salt data system(s): - pillar: minion specific data set on the master - grain: minion specific data set on the minion - mine: minion specific data shared between minions What seems to be missing is the concept of strictly master specific data. Data for runners, overstates, etc. Granted this can come from the master config, but if it changes, the master has to be restarted which is not ideal. The SDB system seems to be what I am looking for, but that assumes that data can be read at run-time by the master, salt-cloud, salt-api, runners, etc... It feels like we are trying to find some middle ground. So, please feel free to point me in a direction if I am wandering on the wrong path. :)"
saltstack/salt,https://github.com/saltstack/salt/issues/14645,saltstack_salt_issues_14645,"salt minions authentication errors

We have 400+ minions and they were all talking to the master fine and, it appears, that suddenly they are all having issues authenticating with the master. I verified that the minion can resolve the master hostname From the minion:  And as I said, this is happening on ALL of the minions. I don't know what else to check.",How many files do you have in your Salt cache directory on your master?,"@cachedout The master's cache directory has 44k files and 36k directories. @basepi I tried a subset of minions and it started working. I was indeed using those settings. I modified them even further and added additional delays. Now it looks like this  What has changed, really, is that the number of minions is growing. Since there's enough free memory available, in your opinion, more core will help? It is not pegging for 3 hours anymore at startup but I suspect it will start happening as the numbers grow further."
saltstack/salt,https://github.com/saltstack/salt/issues/14691,saltstack_salt_issues_14691,"custom grains disappearing on Windows

On Windows salt-minion does not have the osarch grain so I wrote a custom grain for it, and synced the new grains to the minion  Any idea what is going on, and why does the grain disappear?",What version of Salt is this? I wonder if this is the same issue as #13191,Version 2014.1.1 on master and minion. On #13191 the custom grains aren't available until the minion is restarted so it does not appear to be the same bug. I see grains available after I sync them but they disappear when I try to deploy a sls file.
saltstack/salt,https://github.com/saltstack/salt/issues/23223,saltstack_salt_issues_23223,"timezone state errors out on host that is using systemd

I have a timezone state like so: ",Does the state work if you do  or similar?,Unfortunately that did not help 
saltstack/salt,https://github.com/saltstack/salt/issues/24609,saltstack_salt_issues_24609,"Salt request timed out

I often get this error, when targeting all the minions, like `salt \* saltutil.sync_grains`  I am running salt-master on a host with 4 cores and 8GB of RAM, and the worker_threads were initially 16. I increased it to 32 and still get that error. My master and minions are 2014.7.5. Also after I get that error all the cores stay at 100% usage for a minute or two. We have about a 1000 minions.",How many files do you have in your master cache directory? `/var/cache/salt` by default.,@cachedout I have 28000 directories and 37000 files.
saltstack/salt,https://github.com/saltstack/salt/issues/7913,saltstack_salt_issues_7913,"salt-ssh imports unrelated python modules on both slave (fatal) and master

 I have msgpack installed in virtualenv, so in this case master doesn't error out, but otherwise it still does - but there shouldn't be a need for msgpack or zmq with salt-ssh.","What version are you using? There have been a _lot_ of changes in salt-ssh since it was released in 0.17.0, and 0.17.1 was released yesterday.","I'm using git develop branch HEAD as of report time - sorry, with first reports, I added specific rev, but with bunch I filed, that piece got dropped. It was 0a31f3b38a3474f56523b99199be91eaf721e661"
saltstack/salt,https://github.com/saltstack/salt/issues/6756,saltstack_salt_issues_6756,"Debconfmod fails to read data

I'm trying to use debconfmod state in a fairly standard way: ",Can you try the extra indentation and confirm that this fixes the problem for you?,"It did work. Thanks for putting the note in the code, it's very useful - I fell for this problem even though I already knew about the indentation issue. On 17 Aug 2013 01:51, ""Erik Johnson"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/47937,saltstack_salt_issues_47937,"Add a git.cloned state for cases where updating is unnecessary after cloning

### Description of Issue/Question In some configurations of `git.latest`, there's no point in running `ls-remote` to find what HEAD (or other `rev`) is pointing at. This matters for large repos, because running `git ls-remote` against them can take minutes on a slow connection. It also prevents offline runs when the local state is sufficient. ### Setup ","Can you test on your large repo and see if there is a measurable benefit? Either way, this looks like a good optimization we can make.","I'm looking at a private repo, with lots of heads (36187 and counting...). On a good connection it takes 30s without specifying the head and 16s when I specify it, so that's definitely an improvement, but still a significant time. I understand the case where a specific branch like `develop` has to be verified, but I meant the specific case of HEAD:  in this case, I don't care about the remote branch. The only thing I want to achieve is having the repository cloned - but not in any specific state otherwise. I think that `update_head: false, rev: HEAD` could be treated specially (it's not even a real branch/tag) and skip the check altogether."
saltstack/salt,https://github.com/saltstack/salt/issues/6804,saltstack_salt_issues_6804,"Connection refused on windows-minion

I get the following on two different windows-xp-clients:  Here some information regarding this issue on the zeromq-mailinglist: - http://lists.zeromq.org/pipermail/zeromq-dev/2013-March/020902.html - http://lists.zeromq.org/pipermail/zeromq-dev/2013-March/020926.html - http://lists.zeromq.org/pipermail/zeromq-dev/2013-March/020946.html Is there something i can do about this without patching/compiling myself?",Do you have the Cisco VPN client installed on that machine?,"No i have not. I also can't see any other special services running. And i tried running salt-minion on ""Safe mode with network"" with the same result."
saltstack/salt,https://github.com/saltstack/salt/issues/6862,saltstack_salt_issues_6862,"Windows minion unreachable after a few hours [Minion did not return]

I have some salt-minion under Windows and some under Linux. No problem with my Linux minions :) I used Windows Minion on 2008R2, 2008 and 2003 with same results: After a few hours of use i get a ""Minion did not return"" with all of my Windows minion that are not in the same VLAN as master. On my minion i used Keepalive settings without success. - Only windows minion is concerned (0.16.0, 0.16.2, 0.16.3) - Connections between minion / master without firewall = OK - Connections between minion / master with firewall (Cisco) = KO after a few hours. - On master no tcp connection from faulty minions on tcp 4505. On minion a stuck TCP connection is in state ""ESTABLISHED"" ! If i restart minion or if i kill this shadow TCP connection, everything becomes OK. - If i use salt-call on minion, it opens TCP connection to master on 4506 and launchs commands but on connection on 4505 still stuck. I didn't see something usefull in logs ( in debug or trace mode ) Example: This night i lost contact with ADM01 salt-minion at 22:05:52 (checked with netstat and a piece of script) ",Does your crontab job work? It's a timeout issue?,"Hi @basepi, Yes, it works !!! All my minions are alive after the week-end :) I think the keepalive mecanism of salt-minion / zmq is not working well on windows... I can do more tests if needed."
saltstack/salt,https://github.com/saltstack/salt/issues/16028,saltstack_salt_issues_16028,"[salt-cloud] Getting an error at the end of the salt-cloud provisioning on EC2

Command executed: salt-cloud -p base_ec2_private thing.domain.com output normal until: ",Can you provide the actual cli command that you used to initiate the vm creation?,"Sure. You're going to be disappointed though. salt-cloud -p base_ec2_private thing.domain.com I also tried: salt-cloud -p base_ec2_private ""thing.domain.com"""
saltstack/salt,https://github.com/saltstack/salt/issues/7141,saltstack_salt_issues_7141," I found a bug

Hello When I try to manage a recursive directory, I found a problem, described as follows: https://gist.github.com/beyondwl/6506239#file-gistfile1-txt In the minion , aa bb cc directory attributes is wrong. Please help me . thx",Did those files exist before you ran the `file.recurse` state?,"I forgot to comment some code, but the same result after comments  Before I run `salt '*' state.highstate`, minion's target folder does not exist In the master server's minion to do the test, there is no problem, is it because salt or zeromq version of the problem?"
saltstack/salt,https://github.com/saltstack/salt/issues/19061,saltstack_salt_issues_19061,"corrupt keys in Helium

I am seeing corrupt keys in helium for lots of minions, as evidenced in the salt-master log file: [ERROR ] Corrupt public key ""/etc/salt/pki/master/minions/somehost.somedomain.com"": no start line  Running master in open mode and attempting to delete all the corrupt keys on the minions and recreate them via the below commands to see if this clears it up. Anyone know if this is an artefact of old hydrogen keys not playing nice with helium, or a bug with helium key handling in general? In at least one case this appears to have crashed the master daemon. grep Corrupt /var/log/salt/master.badkeys | awk '{print $9}' | cut -d '""' -f 2 | cut -d '/' -f 7 | sort |uniq > /tmp/corrupt-keys.txt for n in `cat /tmp/corrupt-keys.txt`; do ssh -o BatchMode=yes $n ""/etc/init.d/salt-minion stop; rm -rf /etc/salt/minion?\* /etc/salt/pki; /etc/init.d/salt-minion restart""; done",Do either of you have an example of one of the public keys that has been corrupted?,"I have identified 500 keys so far that are bad, and am removing and regenerating them. I believe these were all upgraded from Hydrogen->Helium but am not 100% certain. I suspect coping with 500 bad keys was too much for the master daemon, causing it to give up the ghost. I've been aggressive in getting rid of these, but there are still a few surfacing from time to time. Here's one that is still around: 2014-12-17 14:13:36,252 [salt.master ][ERROR ] Corrupt public key ""/etc/salt/pki/master/minions/somehost.somedomain.com"": no start line -----BEGIN PUBLIC KEY----- MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA2TVoSVChB7cUCx6nzbsV gHCmg087GGldffCiH9qE0qTa2reHhtNlGRSb/oUf445dVpvHYlB/T8p/0BKApdxU MdIFhBCajTpYVBZVhTZsr+RujN+rlKRHWIXl3mYPVE6x9gYEVX2ALNDpW+v9VRB8 +xtReScYr35ZckdXJuJ1hFnnPpDPpyiUChu6xkQp5S+s4fNfGrD0B1WDKfrGLXYS ItW95060xLUvOpcS56ySJfNG/Vn+VEvzFZRemN7l9eo0z83IAQiXSOYQvsS2tbrZ MOnCs5adp/MdHxEEJCtXyoe0aq+nEY9TmhwYJMfA/zADi5uL5Si9xGSzZHpyrlO7 IHirfkROZQ2+50lkyCRTs5gUXzqLibY/VaRZfgxiDh+J9v+O8Kf2alu39vEY8EhF JCb6fkliJkjbBTPnlF4q2xH7hnjSfBHZPV390s5kwFQvDYOPM9GKkl0oBMkFUUb/ Tf2wRXe8nYOy7bwNyQvmr2r3ghWeYMK9EuryAJ9e2Tw0Uqz2PemwFEFzZhTnNsmR RySKlGnZCczmJl32c6H4hj3Gw2TaIGFnUpdHFMKjLgZSeF0PbOv2I4G70AvBmRP5 Oh+UI6SvE7eh6gPvZo8PVqRpQOrmbnb68EaZOOuznLBcB2o9y0FAWNgHPKskr2lv E2Veliygg7EgToSg9eeKKIUCAwEAAQ== -----END PUBLIC KEY----- I see no obvious problem with this key. Just to confirm, although I cut and pasted the above directly from the minion, the master sees the exact same thing (/etc/salt/pki/master/minions/somehost.somedomain.com): -----BEGIN PUBLIC KEY----- MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA2TVoSVChB7cUCx6nzbsV gHCmg087GGldffCiH9qE0qTa2reHhtNlGRSb/oUf445dVpvHYlB/T8p/0BKApdxU MdIFhBCajTpYVBZVhTZsr+RujN+rlKRHWIXl3mYPVE6x9gYEVX2ALNDpW+v9VRB8 +xtReScYr35ZckdXJuJ1hFnnPpDPpyiUChu6xkQp5S+s4fNfGrD0B1WDKfrGLXYS ItW95060xLUvOpcS56ySJfNG/Vn+VEvzFZRemN7l9eo0z83IAQiXSOYQvsS2tbrZ MOnCs5adp/MdHxEEJCtXyoe0aq+nEY9TmhwYJMfA/zADi5uL5Si9xGSzZHpyrlO7 IHirfkROZQ2+50lkyCRTs5gUXzqLibY/VaRZfgxiDh+J9v+O8Kf2alu39vEY8EhF JCb6fkliJkjbBTPnlF4q2xH7hnjSfBHZPV390s5kwFQvDYOPM9GKkl0oBMkFUUb/ Tf2wRXe8nYOy7bwNyQvmr2r3ghWeYMK9EuryAJ9e2Tw0Uqz2PemwFEFzZhTnNsmR RySKlGnZCczmJl32c6H4hj3Gw2TaIGFnUpdHFMKjLgZSeF0PbOv2I4G70AvBmRP5 Oh+UI6SvE7eh6gPvZo8PVqRpQOrmbnb68EaZOOuznLBcB2o9y0FAWNgHPKskr2lv E2Veliygg7EgToSg9eeKKIUCAwEAAQ== -----END PUBLIC KEY-----"
saltstack/salt,https://github.com/saltstack/salt/issues/8906,saltstack_salt_issues_8906,"Add ability to match ""osmajorrelease[0]:6"" syntax to salt.utils.subdict_match

On RHEL, the os version can be accessed by the following two grains: osmajorrelease: 6 4 osrelease: 6.4 In most instances (packaging etc) the only relevant part is the first component of the major release, ie RHEL 6. Unfortunately this is difficult to target due to how grain matching works. The initial thought would be to target with ""osmajorrelease:6"", unfortunately if you had hosts running version ""5.6"", they would also be targeted. This is easily tested in that above hosts also match for ""osmajorrelease:4"". There are two ways to address this, one is by changing the grains so that ""6"" is in one grain, and ""4"" in another but the more general solution would be to edit the salt.utils.subdict_match function to allow matching on a specific entry in a list, not just the first member with something like: ""osmajorrelease[0]:6"" Thoughts?","Does that serve your purposes, @nvx?","Indeed it does, although I can still forsee a use case for extending subdict_match if it's not too difficult to do."
saltstack/salt,https://github.com/saltstack/salt/issues/8968,saltstack_salt_issues_8968,"State module mod_finalise or similar support (opposite of mod_init)

There is currently support for mod_init in a state module to run once-off actions such as updating a package repository rather than running it once for every time the state is used within the highstate or sls to save execution time. This works rather well for one-off functions that must be executed before the state, but there is currently no way to execute one-off functions after the state completion. This can be useful for clean-up operations and to defer committing changes for execution time benefits. I am currently writing a module and state for managing vyatta (more specifically the Ubiquiti EdgeOS derivative, but I expect it will work with the base product as well) configuration. The issue I am currently presented with is that committing changes has around a 30 second fixed overhead irrespective of how many changes have been made. The solution is to roll the individual changes into one commit to avoid taking an excessive amount of time to make changes. Unfortunately without a mod_finalise or similar opposite of mod_init, I can't see this being a possibility. My idea would be have a set that is populated in call_chunks (in salt/state.py) that is populated with the names of all states that contain a mod_finalise function and then iterate through calling all mod_finalise functions after the last call to call_chunk() is made. Information about the individual state module functions executed does not have to be retained to pass to mod_finalise as it is expected the individual state modules can keep track of what finalisation/cleanup/etc (if any) has to be done itself during the state execution. Am I on the right track? Is there another way to achieve this without a mod_finalise or similar? Would the implementation of this be better placed elsewhere? I'm not too familiar with the salt codebase so I could be a bit off as to where this should be implemented.",Does that sound like it will satisfy your needs?,Cool. Being able to access the lowdata to discover if this is the last invocation of the state would suit my purposes just fine. Out of curiosity what routers/switches is cro targeting? Other than Vyatta I can't think of many other Linux-based routers with Python on them. Or is he doing a different approach to set the config?
saltstack/salt,https://github.com/saltstack/salt/issues/8321,saltstack_salt_issues_8321,"pkgrepo.managed in ubuntu 13.10 not behaving as expected

I am seeing this since uprgrading to Ubuntu Server 13.10:  Everything appears to be working properly, but this message makes me think something is not working properly. I'm using salt-bootstrap to get salt onto this instance, and running with the following as root: salt-call --local state.highstate Everything else seems to be working just fine except this.","Could you please post the SLS for the pkgrepo.managed state you are trying to run? Without that, it's kind of difficult to troubleshoot.","Certainly. There are two, one for rethinkdb and one for nodejs:  Like I said, the states complete successfully. There is just WARNING messages being written to the logs and what appears to be different behavior than what was happening as recently as yesterday afternoon."
saltstack/salt,https://github.com/saltstack/salt/issues/8406,saltstack_salt_issues_8406,"Salt does not properly stop/restart rethinkdb service in Ubuntu 13.10

See this gist: https://gist.github.com/karlgrz/7414031 And this salt state:  I never saw this behavior on Ubuntu 13.04",Does it start/restart without problem when you run the commands manually?,"@basepi, yes, they restart properly. However, salt does not properly detect the status of the service running. It calls  which I can run manually and prove that it is returning the proper status, but in the salt logs it always shows that it is running, even if it is not. Is there anything else I can provide which would be more helpful / detailed to diagnose this? Should I try another service, too?"
saltstack/salt,https://github.com/saltstack/salt/issues/7133,saltstack_salt_issues_7133,"Pillar failure when using yaml lists

Hey, I'm having hard time getting a simple working example of pulling a pillar list through jinja into a state. My overall goal is to loop through the the pillar structure to populate a state of the form:  Any advice would be appreciated.",Can you give us more details on what you're trying to accomplish?,"@basepi Yes. Hence, my above state. Even if I misunderstood, template_str then it should continue to execution, which is does not and my point. It displays a parser error when trying to compile the template string. From that you're saying, the YAML is correct and therefore I should be about to just iterate through. However, how can I do so given the output from pillar.get? The docs use some form of  However, this fails when used with the above state and even with the pillar.get probably due to the empty output. Not sure. Let me ask another way (now that I've had a little sleep): How do we iterate as you described in your comment?"
saltstack/salt,https://github.com/saltstack/salt/issues/10678,saltstack_salt_issues_10678,"Enhancement: Elasticsearch Returner

Currently in development. Expect a PR in the next couple of days.",How can I help?,"@simonfrid ha. Those ""next couple of days"" turned into months. I actually had a working version by then end of PyTennessee conference. For example,  #### Field Mappings I think some care has to be taken here since the `return` field from above it either a single value, unstructured message (e.g. output from an error) or structured results from a successful call (the json/yaml output). One thing to note if that in the case of a call applying to multiple minions, `id` field is actually the matching expression used, not the matching minion IDs. Let's say I have `minion1` and `minion2` and I do a `salt 'min*' test.ping`. For every returner, the `id` field will be `id: ""min*""`. It makes more sense if the id field returned the actual minion IDs that the command was ran against. Something like: `id: [""minion1"", ""minion2""]` would be awesome. I'm considering having the returner do that internally."
saltstack/salt,https://github.com/saltstack/salt/issues/10682,saltstack_salt_issues_10682,"Enhancement: DNSimple module 

Currently in development is a salt module that allows the interaction of salt with dnsimple, a hosted DNS solution. With the nearing release of Hydrogen with the salt.cloud modules merged in, the following are examples of potential usage: - add an DNS entry when a minion is spun up. - remove stale DNS entries of previously removed minions",Would any minion be able to create/update/delete any record within the domain for their API key?,"@dlanderson I'm thinking they should only be allowed to create records and update records that have their ID in them. I'm still trying to flesh out how to restrict the DNSimple API key usage given that technically, the code it 'shipped' and ran on the minion. I'm not sure if I have to explicitly allow minions to create 'any' record within a domain. That seems like something a runner would do in a one-off scenario. Thoughts?"
saltstack/salt,https://github.com/saltstack/salt/issues/12827,saltstack_salt_issues_12827,"Allow reactors to be defined in file_roots

It'll be nice if reactor sls files could be defined in a `_reactors` subdirectory in file_roots. http://docs.saltstack.com/en/latest/ref/file_server/dynamic-modules.html",Could you elaborate on the use case?,"yes. reactors are master-side features and I agree they shouldn't be distributed. The use case would be similar to https://github.com/saltstack/salt/issues/12511 where the management of reactors could be done without having to manually place a file on your master(s). I'm thinking, I'd have a gitfs backed file_roots that contains `_reactors` so I can push them easily."
saltstack/salt,https://github.com/saltstack/salt/issues/7134,saltstack_salt_issues_7134,"git-python version silent failure

GitFS fails without error when using an incorrect version of git-python (specifically the version found in Ubuntu 12.04's apt repos).",What version of salt are you using?,"I think I had a different error, which is why it wasn't showing up in the master log. Non-issue, sorry."
saltstack/salt,https://github.com/saltstack/salt/issues/7138,saltstack_salt_issues_7138,"Setting grains multiple times

Hi, Just starting out using SaltStack and thought to set up the iptables config file, through setting up grains in sls files used by a host. Where each grain represents whether a rule is added to the iptables config file. I was planning to set up a SaltStack conf, where service stack. For instance, in this case I would have a host that would act as a forward and reverse proxy. base: 'myhost': - service_http_apache # sets up/starts Apache - service_http_squid # sets up/starts Squid - service_security_iptables # sets up/starts iptables with grains set previously. In this case I set a grain 'iptables_tcp80_in' to 'True' in 'service_http_apache', so it can be used in the template that is used by 'service_security_iptables'. However, by default, I'd like to set this grain for 'service_http_squid' as well, since squid also usually requires incoming traffic on TCP/80.  In this case, I have a host that I'd like to set up as both a reverse proxy (using apache) and a forward proxy (using squid). My expectation was that if a grain would be re-set in an sls file that's processed later on and that the latest value of that grain would be the one ultimately set. I would be able to work around the issue by creating a separate grain for squid and a separate one for apache. That's not an elegant solution however. Is there a more elegant solution for my problem?","Can you gist your sls files? Need to see exactly what you're trying to do before I can help you. Also, your salt version and OS would be good.","Hi Colton, Thanks for looking at this so quickly. This is not so much a problem as a request for confirmation on whether the behaviour I am observing is the correct one. Have the following setup: Salt Version: 0.16.3 OS: RHEL 6.4 Python: 2.6.6  This setup works fine as long as I don't use the service_http_apache and service_http_squid sls files to configure the same host. I came across this, while I am starting to automate our environment. In this case squid should not be running on port 80 so this is easy to fix, but I would have expected that the iptables_tcp80_in grain that was set in service_http_apache would have been overwritten by service_http_squid. Just a confirmation that this behaviour is the correct one and if you have the time a short rationale (I fully expect there is a good reason for this), would greatly help me better understand SaltStack. Thanks heaps, Jan."
saltstack/salt,https://github.com/saltstack/salt/issues/7512,saltstack_salt_issues_7512,"Unable to Cache file in masterless salt

I have this in my nginx.sls of dev environment  I got this error for masterless config [salt.state ][INFO ] Executing state file.managed for /etc/nginx/sites-available/mydomain.dev.conf [salt.loaded.int.module.cp][ERROR ] Unable to cache file ""salt://templates/etc/nginx/sites-available/mydomain.conf?env=base"" from env ""dev"". But it works perfectly if there is a saltmaster. Is there a way around this. I want to use masterless config for vagrant setup.",Can you post your `file_client` and `file_roots` parameters from your minion config file?,
saltstack/salt,https://github.com/saltstack/salt/issues/12732,saltstack_salt_issues_12732,"Exception in calling mine.get with salt-api

Hi Guys, I'm trying to use salt-api from a python script  Running the below command `:~# salt-call mine.get '*' test.ping` gets the desired output. Is there anything I'm missing? Thanks.",What version of Salt are you running?,I'm using version `2014.1.3`. Thanks @whiteinge
saltstack/salt,https://github.com/saltstack/salt/issues/7221,saltstack_salt_issues_7221,"Error parsing configuration file: /usr/local/etc/salt/master - expected '<document start>', but found '<block mapping start>'

In a clean installation (FreeBSD 9.1) from sysutils/py-salt port, I edited the default master file and added this lines:  Basically I just want to find the best way of organising the minions so that I can have configurations for each group of them, any ideas?","Can you post the exact file you are using (not a pastebin)? If you want, you can email it to me","Hi, this is the file, i just undocumented the lines and got the same error: https://github.com/nbari/my-salt/blob/master/master"
saltstack/salt,https://github.com/saltstack/salt/issues/21871,saltstack_salt_issues_21871,"mine.get not updating / returning  (how to refresh the data?)

While trying to use [mines](http://docs.saltstack.com/en/latest/topics/mine/) to dynamically update some configuration files, I am not been available to update or get data after changing something on the minion: For now, I am trying to update an HAproxy conf using this mine: cat /salt/pillars/haproxy/init.sls: ",Can you try sticking the mine_functions inside of the minion config itself? (/etc/salt/minion) Curious if it's a pillar issue or a mine issue.,"I just copied the mine_functions inside the minion config and still get nothing back, same behavior."
saltstack/salt,https://github.com/saltstack/salt/issues/24658,saltstack_salt_issues_24658,"Is there any way to exclude some target minions ?

I want exclude some minions in one action. How to ? Any way like `salt '*' --exclude 'minion1,minion2...' --exclude -G 'tag:excluded' test.ping` ?",Would this work for you?  http://docs.saltstack.com/en/latest/topics/targeting/compound.html,"Great, waiting for the new release."
saltstack/salt,https://github.com/saltstack/salt/issues/10470,saltstack_salt_issues_10470,"Batch Run: No minions matched the target. No command was sent, no jid was assigned.

After the update to 0.17.5 from 0.16 sometimes a batch run fails to execute with the following message: Executing run on ['minion1', 'minion2', 'minion3'] No minions matched the target. No command was sent, no jid was assigned. But the minions are online and pingable with test.ping. All other minions in the batch runs works fine. If I run the same state again they might fail again or not, if I run without batch options everything works fine.","What's the command you're using to trigger the run? Additionally, do the same minions fail each time?","For example: salt '*' state.highstate -b3 But it happens with other -b Values and single states as well (state.sls). Didn't remember if it also happened with cmd.run or other commands. When some minions fail then they fail most of the time when you run the state again. But the minions not matching will differ from time to time, so I don't think it's a problem with those minions but with the master."
saltstack/salt,https://github.com/saltstack/salt/issues/16927,saltstack_salt_issues_16927,"git.latest and user leads to error

When using git.latest together with user:  everything works fine",What version of salt are you running?,"Sorry, again, 2014.1.13 I'm not absolutely sure, but I think it was working fine with 2014.1.12 (there I got another error because of some unicode-foo, so it might was broken there, too, but I never got to this point)."
saltstack/salt,https://github.com/saltstack/salt/issues/18312,saltstack_salt_issues_18312,"salt 2014.7.0 reports zero changes as change (file.replace, cron.present)

After upgrading to 2014.7.0 some of my states are reported as a change, but they didn't change anything:  This leads to false positives in a script monitoring pending changes via Icinga/Nagios. Previous version works fine.",What do your states look like? What command are your running to execute the states?,"@rallytime Indeed it was run with `test=True`. But the cronjob is in place and would not be updated when you run the state without `test=True`. The state looks like this, all other `cron.present`-States were affected as well, `cron.absent` worked fine: "
saltstack/salt,https://github.com/saltstack/salt/issues/18136,saltstack_salt_issues_18136,"salt-ssh implementation of grains.filter_by does not work when nothing is matched

I am using grains.filter_by with the osfinger grain in map.jinja. Some values of osfinger are not present in the dict passed to filter_by (because they do not need overriding). In this case, grains.filter_by works with salt but not with salt-ssh. This is because when no match is found, the version of filter_by in salt/module/grains.py returns merge, i.e.: ",Can you paste the output of `salt --versions-report`?,Here it is.  This is on CentOS 6.5.
saltstack/salt,https://github.com/saltstack/salt/issues/7205,saltstack_salt_issues_7205,"saltutil.revoke_auth returns ""salt.exceptions.AuthenticationError: message authentication failed"" when run through peer publication

We have a use case, where minion1 should be able to revoke the key from minion2, so that minion2 can be rebuilt at any time, but no one has to ssh into minion2 before it is shutdown. To be able to run saltutil.revoke_auth, the following configuration has been added to the salt master config: ",Why not just do it from the master? It still doesn't require ssh.,"Thank you Erik. Didn't know how to do this with the triple graves. Colton, we are trying to setup a build environment where a teamcity server creates a new vagrant vm, salt provisions it and then vm is torn down again. The build slave can be re-installed at any time, but should have the same hostname. The only 2 ways that I found to do this is either to revoke the existing key prior to tearing down the vm or to preseed the same salt key to the minion over and over again. Revoking seemed like the better option. After reading http://salt.readthedocs.org/en/v0.12.1/topics/specs/salt_auth_proto_abs.html I think I understand what is happening here though. The revoke seems to work as the master reports he now only has two accepted keys. However after that, minion2 still needs to report the results of the publish back to minion1 (or the master, I am not sure). For that, he re-authenticates with the master. When that happens, his key gets accepted again because of autosign. All of this happens so fast, so that when I run salt-key -L again, the key is already added back."
saltstack/salt,https://github.com/saltstack/salt/issues/8810,saltstack_salt_issues_8810,"hgfs fileserver backend problem with serving files

I found an issue when using multiple hgfs_remotes where the caching of the files does not seem to work correctly. My hgfs configuration looks like this:  I am not really sure where to start troubleshooting this other than the cached repo in /var/cache/salt/master/hgfs. There is a hash/default directory in there that seems to hold all the md5 hashes. But then those ""disappear"" from time to time (I assume Salt clears the hg cache and pulls from the repo again?). Any ideas?",Does this issue only happen when you have multiple hgfs_remotes?,"shadowfax-chc, I've been trying to reproduce this in my salt sandbox environment, to find out if it only happens with multiple remotes. But right now I can't reproduce the problem :( According to the debug log the fileserver backends get updated every 60s which I think is the default for loop_interval. Then, in the salt sandbox environment I have no minions running right now, so I am not sure it is a function of load."
saltstack/salt,https://github.com/saltstack/salt/issues/23501,saltstack_salt_issues_23501,"aptpkg does not support passing --force-confnew

In multiple places in aptpkg.py the option of --force-confold is set when installing packages with apt: https://github.com/saltstack/salt/blob/develop/salt/modules/aptpkg.py#L507 https://github.com/saltstack/salt/blob/develop/salt/modules/aptpkg.py#L536 https://github.com/saltstack/salt/blob/develop/salt/modules/aptpkg.py#L738 https://github.com/saltstack/salt/blob/develop/salt/modules/aptpkg.py#L741 We have a requirement where we would like to always stomp local changes when installing a package, but I can't find a way to pass --force-confnew instead of --force-confold to pkg.install or the state pkg. Is this possible with the current aptpkg.py and if not, can it be incorporated? Thanks a lot - Anita",Does it resolve this issue for you?,Hey...sorry for the late response. I'll try to test this tonight and let you know
saltstack/salt,https://github.com/saltstack/salt/issues/7244,saltstack_salt_issues_7244,"Possible issue with archive.tar

 when i run ""salt 'clent' archive.tar czf /home/tarfile.tar.gz /etc"" return this message: clent: - tar: Cowardly refusing to create an empty archive - Try `tar --help' or`tar --usage' for more information. I edited “/usr/lib/python2.6/site-packages/salt/modules/archive.py” file.it is OK now. \- def tar(options, tarfile, cwd=None, template=None, *sources): + def tar(options, tarfile, sources, cwd=None, template=None): \+ import string + _sources=string.split(sources,',') + sourcefiles = ' '.join(_sources) - sourcefiles = ' '.join(sources) and zip function also have the same problem.",Can you please also paste the output of `salt --versions-report` for both the master and the `clent` minion machine?,"distro info:CentOS release 6.4 (Final) kernel info:Linux client 2.6.32-358.14.1.el6.x86_64 #1 SMP Tue Jul 16 23:51:20 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux tar info: tar (GNU tar) 1.23 Copyright (C) 2010 Free Software Foundation, Inc. License GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html. This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. salt info: Salt: 0.16.0 Python: 2.6.6 (r266:84292, Jul 10 2013, 22:48:45) Jinja2: unknown M2Crypto: 0.20.2 msgpack-python: 0.1.13 msgpack-pure: Not Installed pycrypto: 2.0.1 PyYAML: 3.10 PyZMQ: 2.2.0.1 ZMQ: 3.2.3 --- so,when i run ""salt 'client' archive.tar czf /tmp/tarfile.tar.gz /etc"", and i edited “/usr/lib/python2.6/site-packages/salt/modules/archive.py” of 'client' minion, like this: sourcefiles = ' '.join(sources) +print sourcefiles +print cwd cmd = 'tar -{0} {1} {2}'.format(options, tarfile, sourcefiles) master run result: - tar: Cowardly refusing to create an empty archive - Try `tar --help' or`tar --usage' for more information. minion output: null line /etc so sourcefiles=null,and cwd='/etc'? why? thx for s0undt3ch's answer."
saltstack/salt,https://github.com/saltstack/salt/issues/7290,saltstack_salt_issues_7290,"modules.cp.get_template() fails on first run if no dest is passed (tmp file)

modules.cp.get_template fails (SILENTLY!) on its first run of a template when asked to create a temporary file for it. It explicitly passes makedirs = False to salt/fileclient.get_template() - which also fails SILENTLY. Personally, I'd suggest adding makdirs = True to the 'if not dest' block (ie if salt is auto-generating a path, then you should trust it, and make the dirs required...) The offending code in salt/fileclient.get_template looks like: ",Did your pull req completely fix the issue or only partly?,"Should fix it completely for any instances where Salt generates the 'dest' file. Not sure about modules.cp.get_template forcing makedirs = False. That feels like it should be a parm passed by the caller, but I guess thats more of a policy thing."
saltstack/salt,https://github.com/saltstack/salt/issues/12111,saltstack_salt_issues_12111,"External Authentication System does not work for groups of users

I have the following external authentication system config in the master: ",Could you please post a `salt --versions-report`?,As requested: 
saltstack/salt,https://github.com/saltstack/salt/issues/12569,saltstack_salt_issues_12569,"file.managed tries to read entire contents of very large files

",Could you re-test with that flag set and see if this problem is resolved for you?,I agree with mirath. In this case it seems obvious that I do not intend to replace the file because I have not specified anything to replace it with. Making it so that not providing a `source` or `contents` option automatically implies `replace: False` would work around the issue nicely. If that's an acceptable solution I can try to submit a pull request for that later this week.
saltstack/salt,https://github.com/saltstack/salt/issues/10957,saltstack_salt_issues_10957,"when restart salt-master get report ""The ports are not available to bind""

",Can you check if there are any salt-master processes running? You can also use `netstat` or similar to check the port status.,"yes ,it did has many zombie process of salt master,i do not know why,i redeploy the salt-master,it now work fine On Thu, Mar 6, 2014 at 4:27 AM, Colton Myers notifications@github.comwrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/7601,saltstack_salt_issues_7601,"misconfigured scripts directory, no error on master or minion.

Directory structure looks like this <pre> /srv/salt /scripts /scripts/test.sh </pre> Invocation on master:  Using inotifywait to watch /tmp on the minion it appears that two files get created, populated and deleted during the minions run, but nothing inside the script (for obvious reasons) gets executed. I think that this is a bug. :)","What do you mean by ""misconfigured scripts directory"", and what is not happening that you feel should be happening?","What basepi said ... in my initial set-up scripts wasn't UNDER salt, but parallel to it. Despite the fact that the master had no idea of the scripts directories existence, both the master and the minion went through all the motions, even creating tmp files on the minion, and returning a positive result to the master."
saltstack/salt,https://github.com/saltstack/salt/issues/12396,saltstack_salt_issues_12396,"file-system full, no warning/error messages

Yesterday I had an interesting experience w/ the salt-master 2014.1.3-2precise1 ... /var/cache/salt/master/jobs ate all the inodes on the /var file-system (file-count under /var/cache/salt/master/jobs was ~ 406K). The master didn't do any work any more, and didn't log anything. I stopped it, restarted it, and debug output stopped after ""Loading config file"". It wouldn't open any network sockets, minions couldn't talk to it. Of course I did a 'df -h' to see whether the disk was full or something, but it said non filesystem was using more than 40% space. I only realised what was happening when I tried to reinstall salt, and apt told me ""the disk was full"" (which wasn't technically correct since there was 68% space capacity left). But I quickly found the actual issue after that, and have since moved /var/cache/salt to it's own file-system An error message from the master to suggest the reason of its inactivity would have helped me find the issue more quickly. Can this be added, please?",Do you have a non-default configuration for `keep_jobs` in your master config? It should be deleting all jobs older than 24 hours.,"''#verify_env: True ''# Set the number of hours to keep old job information in the job cache ''#keep_jobs: 24 ''# Set the default timeout for the salt command and api, the default is 5 ''# seconds ''#timeout: 5 I haven't made any changes regarding house-keeping, but as for 24 ... is seems to keep 24 days?"
saltstack/salt,https://github.com/saltstack/salt/issues/8449,saltstack_salt_issues_8449,"pkgrepo does not work

I'm having trouble installing a package from a different repo. I'm running a masterless Vagrant VM with Ubuntu 13.10. I've created a simple setup to reproduce this error in [this gist](https://gist.github.com/pkruithof/7436241) (note: replace the colons with slashes as directories are not allowed in gists). The short version is this: I want to have this state:  So based on this I conclude that the repo is imported, with its key. The package list is updated, but somehow salt cannot list packages from it, but the root user can. Am I doing something wrong here?",Does it work the second time you run the highstate? Wondering if it's a problem with the update or something.,"That was my first guess but no, `apt-get update` is run during provisioning so that would resolve it the second time. I also tried to run the update manually first, and then provision. Both ways have the same result."
saltstack/salt,https://github.com/saltstack/salt/issues/9037,saltstack_salt_issues_9037,"Recurse is including mode when it shouldn't

Unless I am completely mistaken the following block:  I expect that the state would not trigger since its acceptable in the first pass. This is causing salt to restart a bunch of our services every time its run since we deliver files inside of a directory managed this way.",What version of salt are you using? This may have been fixed recently....,
saltstack/salt,https://github.com/saltstack/salt/issues/46858,saltstack_salt_issues_46858,"External binary files appear to fail in 2018.3.0

### Description of Issue/Question Binary files fetched from S3 urls result in a utf-8 error. ","Can you provide me an example file that this error happens with so that I can replicate this issue? Thanks, Daniel",This is happening with every single binary (ELF mostly) file we have in our configs but I created a simple go program (https://play.golang.org/p/FKAbM-DHFi9) and uploaded it to S3 and ended up with this config: 
saltstack/salt,https://github.com/saltstack/salt/issues/7640,saltstack_salt_issues_7640,"Unable to Install npm

I created a state to install npm on Amazon Linux and it doesn't seem to work. Any suggestions? I can run ""sudo yum install npm"" just fine. npm is coming from EPEL and does not appear to be an alias. State: ",What version of salt?,version 0.16.4 EPEL 6
saltstack/salt,https://github.com/saltstack/salt/issues/15540,saltstack_salt_issues_15540,"smtp_return from within a reactor

Hello, I recently posted a message [1](https://groups.google.com/forum/#!topic/salt-users/h46IlO2X5qw) on the mailing list in which I have described my experience on trying to set up a highstate run in a reactor file ro return via smtp_return. With the help of @whiteinge I was able to make it work. He also suggested to add an example to the docs with this. In order to achieve this I was recommended to post this issue here. For others looking to use smtp_return from within a reactor here is a code snippet: ",Would you mind submitting a pull request adding this example to the docs?,"Hello @basepi, The pull request: https://github.com/saltstack/salt/pull/15646 I am not sure that's the proper place for the example. If you can think of a better one please tell me and I will update."
saltstack/salt,https://github.com/saltstack/salt/issues/8190,saltstack_salt_issues_8190,"pip deprecation warning when using virtualenv

Hi there, when running the state:  Since I'm new to salt, I can't seem to find the code in virtualenv.py that calls this. PS: Used `- runas: vagrant` at first, then when seeing the deprecation warning, I used `user`. But the `user` param is not really accepted by `virtualenv_mod.py`, but the command seems to work fine anyway, with the same warning of course.",What is the output of `salt --versions-report`?,"Not sure if this is relevant, the whole state.highstate is done in salty vagrant using `vagrant provision` or `vagrant up`. "
saltstack/salt,https://github.com/saltstack/salt/issues/8845,saltstack_salt_issues_8845,"test.sleep returns inconsistent results

Hi there, I wonder if this is a bug. I have 4 minions, all running the same versions of everything, and the master is running on one of the system that has a minion. I ran `test.sleep` a couple of times, and these are the result I get:  I'm running on Ubuntu 12.10 LTS Server.",Can you do some of the failing runs with a `-v` flag? Want to see if they're timing out or something else is going on.,@basepi Here's what I got with 5 and 20 seconds 
saltstack/salt,https://github.com/saltstack/salt/issues/8849,saltstack_salt_issues_8849,"fire_event() code call does not seem to work for me

I've been following the documentation @ http://docs.saltstack.com/topics/event/index.html So, I have the event listener code running on the master side, and it's happily returning events as I got them via `iter_events(full=True)` call. Now to fire events from any minions!  This however, does not work, nothing seems to happen. I tried changing `'master'` to the actual master id, or event the minion id, but still, I see nothing coming through the event bus. I'm running the code on other minions as well as minion that is running on the master server. Anything else I might forget?",What version of salt are you using?,@basepi same machines as #8845 
saltstack/salt,https://github.com/saltstack/salt/issues/7788,saltstack_salt_issues_7788,"State stuck in test mode

Here are my versions-report values: Master:  Am I doing something wrong?",What OSs are you using? There is a bug in 0.17.0 in Windows where it can get stuck in test mode.,I am running Ubuntu 12.04.2 LTS
saltstack/salt,https://github.com/saltstack/salt/issues/7803,saltstack_salt_issues_7803,"Minion state_output option appears ignored by salt-call

I'm been using Salt and using a masterless minion, with the `state_output` option configured to be `mixed` in the minion file. With v0.16.0, calling `salt-call` correctly adhered to this value, but with v0.17.0, this value appears to be ignored or missed somehow, always using the `full` output. My calls to `salt-call` are the same between Salt versions:  The rest of the highstate execution appears to run fine on both versions. Running on CentOS 6.4, x86_64, with the Salt bootstrapping performed by salty-vagrant initially.",Can you try testing on the latest `develop` branch?,"Yes, it now works successfully."
saltstack/salt,https://github.com/saltstack/salt/issues/42717,saltstack_salt_issues_42717,"`unique` Jinja filter needs inclusion in the documentation

### Description of Issue/Question The `unique` Jinja filter was introduced back in v2017.5 (https://github.com/saltstack/salt/commit/3f62eb69331f3a55f9bb00b977d92b0fa0295e87; currently here https://github.com/saltstack/salt/blob/develop/salt/utils/jinja.py#L414) but hasn’t got any documentation. I didn't check all the other filters, just this one I stumbled upon, so it might be worthwhile reviewing that. Also, I noted that there seems to be two sets of documentation between the Jinja reference in `docs/topics/jinja/index.rst` and docstrings in `salt/utils/jinja.py` -- beneficial to merge the two and use autodoc? ### Steps to Reproduce Issue See develop docs page on Jinja @ https://docs.saltstack.com/en/develop/topics/jinja/index.html.","Would you mind submitting a PR? otherwise I have tagged this as a documentation issue. Thanks for reporting, Daniel","Before doing anything, I'd be inclined to get advice on the use of autodoc. At the moment, the docs are (seemingly) duplicated (but slightly different) between those two files for the other existing filters so it seems like an opportunity to solve 2 issues at once. Otherwise, if there's a reason for both areas and autodoc is off the table, I can do a PR."
saltstack/salt,https://github.com/saltstack/salt/issues/7918,saltstack_salt_issues_7918,"Cryptic error from a state while using PyDSL

",Could you post the output of `salt --versions-report`?,"@UtahDave Same here, It's against the latest develop branch."
saltstack/salt,https://github.com/saltstack/salt/issues/20239,saltstack_salt_issues_20239,"Create an acceptance test suite for salt

Currently Salt is tested either by the CI which has unit and functional suites but no actual integration/acceptance suite or in production where bugs like [these](https://github.com/saltstack/salt/issues?q=is%3Aopen+is%3Aissue+label%3A%22High+Severity%22) happen. In order to ensure that salt works on all cases an acceptance test suite should be created. The suite will use an actual salt instance and will execute the different components that salt is made of such as highstates or modules. Some of these tests can be run as part of the CI process for each commit since they are supposed to run in a timely fashion e.g.: - When booting a machine with a salt minion/master/syndic is available and running - Salt master is accepting keys and all minions responds to test.ping - All CLI commands that salt provides are available and functional. - The common states are functioning correctly on the most common operating system salt is deployed on. Some of these tests can only be run on a nightly basis e.g.: - Run all states on every supported operating system to ensure they behave exactly the same. - Run the cloud related states and ensure that they can create an instance and operate it and that salt is installed and responding in that instance. And the rest of the tests can be run before release or before merging an important feature in order to check regressions e.g.: - Ensure that a memory leak has not occurred when salt performs X many many times. - Ensure that timeouts don't occur when a master has a lot of minions. In order to implement an acceptance test suite I'd use [test-kitchen](https://github.com/test-kitchen/test-kitchen/) which allows me to boot virtual machines using [Vagrant](https://github.com/test-kitchen/kitchen-vagrant), run [salt operations](https://github.com/simonmcc/kitchen-salt) and test them using [serverspec](http://serverspec.org/), [bats](https://github.com/sstephenson/bats) and any other testing software you can think of if you are able to implement a simple plugin with [kitchen-busser](https://github.com/test-kitchen/busser). I'm willing to contribute at least a part of this suite but it requires cooperation on your part as well. Each cloud provider you support should be tested in order to ensure that salt-cloud and all cloud related states work so API keys with limited permissions needs to be set up. You might decide that you don't want to share them publicly and that's fine but it means that saltstack is responsible for running these tests in order to ensure nothing breaks. It also requires some modifications to your CI process and what should be installed on the CI machines in order for these tests to be able to run. What do you guys think?",Did I miss covering anything?,"@rallytime I can't find the integration tests anywhere in the repository. Is that intentional? One of the things that made developing the boto VPC module really hard is the fact that I didn't have a way to verify that it really works on AWS. Sure I used moto to mock AWS but that doesn't mean that what I did will work as expected due to a moto bug. That's one reason I think we need a more open direction to integration testing. The other reason is that salt contributors make a habit of contributing without testing (other then testing it in staging/production) which is a problem if something breaks for someone else on production. By the time it did break you've caused the decision makers to put trust less trust in Salt which will make the devops lives harder. I've seen it happening with other software to the point where I had to resort to fabric because that's ""what the CTO knows that works"". I don't want to go through that experience again. I think that requiring contributors to contribute a few integration tests that prove that the feature they are introducing does work is less rigid and won't slow down contributions then requiring a full unit and functional test suites which might or might not require a lot of work and probably will slow down contributions. The tools I mentioned above provide a easy and quick way for testing your changes. I have no idea how do you guys make something out of this output. I guess I'm accustomed to Travis which takes care of formatting very well. It's something that also bothered me. I understand why Salt uses Jenkins. It's the best CI software besides Travis but the UI is horrible unless heavily customized. It's really hard to understand anything from it unless you know exactly how the process was built. This is important since kitchen allows you to ssh into failed machines in order to figure out what's wrong. There's a [plugin](https://wiki.jenkins-ci.org/display/JENKINS/Remote+Terminal+Access+Plugin) for that which isn't installed as far as I can see. I can open another issue about Jenkins and what's needs to be done in order to make it more appealing to the end users. @jfindlay I realize that your resources are limited which is exactly why I offered to help implementing these tests."
saltstack/salt,https://github.com/saltstack/salt/issues/7870,saltstack_salt_issues_7870,"With salt-ssh, I get an error ""If you're the developer of the module 'dockerio', please fix this.""

When I execute `salt-ssh '*' state.sls <state>`, I get this error.  Am I doing something wrong? or is it a bug? The version is `salt-ssh 0.17.0-1035-gd2f16e6`",Can you pull the latest `develop` branch? This looks to be fixed in the current `develop`.,Thanks!
saltstack/salt,https://github.com/saltstack/salt/issues/8521,saltstack_salt_issues_8521,"Active Directory Service Integration / Improvements

As requested by @basepi in https://github.com/saltstack/salt/issues/8119, I'm re-opening this issue as a feature request. I am currently adding/updating/deleting entries from DNS and DHCP using netsh and dnscmd using the remote command execution framework and run states. The salt-minion executing these commands requires the minion service to be started as a privileged A/D user. Updates are complicated since netsh/dnscmd do not support ""updates"" directly, so I need to first determine if an update is required and then delete the current entry in DNS and DHCP before adding its replacement. This requires some set logic to compare the current state of all of my hosts/VMs with what's in DNS and DHCP. I will likely do this in memory from within python to start with (using dictionaries as hash tables perhaps) but will eventually move the set subtraction to redis probably. It would be very helpful if we had functions in salt that provided add, delete and update/modify semantics for both DNS and DHCP in A/D. Other A/D integration features like user management, user lookup (with member-of group lookups - including nested groups), etc.. would also be helpful but are secondary to anything I need at the moment.",Could you add some comments to this thread with examples of various commands and their results that you expect will be needed? Thanks!,"Sorry about the delay in getting back to this, I've been tracking down some alien crosstalk issues in the data center - not fun... Before we start the salt-minion on the windows host running the commands will need to be started by a domain user with sufficient privileges to make edits to DNS zones and DHCP leases. DNS is probably easier to deal with than DHCP, so let's start there. We'll need to specify the DC. It's likely easiest to do this by IP just in case hosts/servers are dual homed and DNS/DHCP aren't listening on all interfaces. Arguments to pass into ""add method"":  The ""/f"" flags just indicate a force. This is because deletes are interactive if not forced. I'm cheating a bit since I use dig with a zone transfer to pull all of the addresses currently in a given A/D zone and then do the diffs in memory to determine if updates are necessary. You can use nslookup or dig per address (reverse DNS) and hostname (forward DNS) to determine if that address needs to be updated instead. ""delete"" methods would be just like the updates minus the adds. Nothing too complicated there. I have add/modify/delete methods and check to see with every highstate if any of my managed hosts need to be updated in A/D DNS. DHCP netsh examples to follow in a bit."
saltstack/salt,https://github.com/saltstack/salt/issues/14685,saltstack_salt_issues_14685,"Salt master cored when accessing grains

I tried to report the grains for a server. Salt cored out. I tried again, and got no answer. I tried a third time and was successful. Try #1. [root@jump ~]$ salt -v E7CH70101 grains.items Bad file descriptor (epoll.cpp:81) Aborted (core dumped) Try #2 (about 10 seconds later) [root@jump ~]$ salt -v E7CH70101 grain.items ## Executing job with jid 20140801113621586265 E7CH70101: 'grain.items' is not available. Try #3 (a few seconds later). [root@jump ~]$ salt -v E7CH70101 grains.items ## Executing job with jid 20140801113634054879 E7CH70101: cpu_model: Intel64 Family 6 Model 62 Stepping 4, GenuineIntel cpuarch: AMD64 ... (Success) I ran this: gdb python core.27697 (gdb) bt full #0 0x0000003a786328e5 in raise () from /lib64/libc.so.6 No symbol table info available. #1 0x0000003a786340c5 in abort () from /lib64/libc.so.6 No symbol table info available. #2 0x00007f890a294489 in ?? () from /usr/lib64/libzmq.so.3 No symbol table info available. #3 0x00007f890a2942cd in ?? () from /usr/lib64/libzmq.so.3 No symbol table info available. #4 0x00007f890a2a38b8 in ?? () from /usr/lib64/libzmq.so.3 No symbol table info available. #5 0x00007f890a2a3a2c in ?? () from /usr/lib64/libzmq.so.3 No symbol table info available. #6 0x00007f890a293ce2 in ?? () from /usr/lib64/libzmq.so.3 No symbol table info available. #7 0x00007f890a2b11fb in ?? () from /usr/lib64/libzmq.so.3 No symbol table info available. #8 0x0000003a78e07851 in start_thread () from /lib64/libpthread.so.0 No symbol table info available. #9 0x0000003a786e894d in clone () from /lib64/libc.so.6 No symbol table info available. Hope that helps. Shea Lutton",Could we please see a `salt --versions`? A ZeroMQ upgrade may be in order but it's a little tough to tell.,"[root@jump ~]$ cat /etc/centos-release CentOS release 6.4 (Final) [root@jump ~]$ salt --versions Salt: 2014.1.7 Python: 2.6.6 (r266:84292, Jul 10 2013, 22:48:45) Jinja2: 2.2.1 M2Crypto: 0.20.2 msgpack-python: 0.1.13 msgpack-pure: Not Installed pycrypto: 2.0.1 PyYAML: 3.10 PyZMQ: 2.2.0.1 ZMQ: 3.2.4 The minion was 2014.1.5 on Windows."
saltstack/salt,https://github.com/saltstack/salt/issues/7933,saltstack_salt_issues_7933,"Failing apt-get install when version is specified?

Case:  Thoughts? Can anything be done to work around this?",What version of salt are you using? @terminalmage any ideas? You're much more involved with the packaging systems than I am.,0.17.1
saltstack/salt,https://github.com/saltstack/salt/issues/7986,saltstack_salt_issues_7986,"local rpm cannot be installed

I tried to install jenkins via local rpm, but not work.  is it a bug or ?",Which operating system/distribution are you running?,Master: Mac OS X 10.8.5 Minion: Cent OS 6 kernel: Linux kernelrelease: 2.6.32-358.el6.x86_64 localhost: XXX manufacturer: innotek GmbH master: 192.168.1.102 mem_total: 996 nodename: XXX num_cpus: 1 num_gpus: 1 os: CentOS os_family: RedHat osarch: x86_64 oscodename: Final osfinger: CentOS-6 osfullname: CentOS
saltstack/salt,https://github.com/saltstack/salt/issues/14514,saltstack_salt_issues_14514,"states.cron.present doesn't report change of `name` on `test=True`

1. Have a `cron.present` state like this one:  Applying the state without `test=True` shows the changes just as expected. Happening on Ubuntu 14.04, SaltStack 2014.7, using the default cron provider of Ubuntu (bcron-run).",Does it alleviate the issue?,"Not yet, sorry. Won't get around until end of August. On August 6, 2014 5:28:04 AM CEST, Nicole Thomas notifications@github.com wrote: ## Sent from my Android device with K-9 Mail. Please excuse my brevity."
saltstack/salt,https://github.com/saltstack/salt/issues/19308,saltstack_salt_issues_19308,"`states.mount.mounted` backtraces in case a device/resource is busy

As mentioned in https://github.com/saltstack/salt/issues/18630#issuecomment-68408491 `mount.mounted` will backtrace in case the device/resource is busy. Using Salt 2014.7.0 on Ubuntu Server 14.04.1 amd64 and `salt/states/mount.py` from `2014.7` as of ec90619. Used state: ",Will that suite your needs?,@rallytime Thanks for the heads up - missed #19319 - this fixes the issue for me and the state properly returns now a failure instead of a backtrace.
saltstack/salt,https://github.com/saltstack/salt/issues/20536,saltstack_salt_issues_20536,"Make states available to Minion accessible by renderer

It would be nice to have a way to easily query the states which are available to a Minion from the renderer. This would make things like this possible:  This is basically a way to deal with the fact, that the brokeness of Windows package management can't be handled by `modules.win_pkg` alone and often requires more complex states containing workarounds/extra steps/etc, which could then be provided by drop-in states like formulas - where no specific state is available, it'll simply fall back to `pkg.installed`. I believe there are quite some other scenarios where querying the list of states available to a Minion could be used as well - ideas, critics + input welcome. EDIT: I'm not sure whether making this a [dunder dict](http://docs.saltstack.com/en/latest/topics/development/dunder_dictionaries.html) is the best way to do this or whether simply something like `salt['state.available']('sls', 'foo.bar')` would make more sense.",Would that suffice?,"- The problem with `cp.list_states`: it lists all states, not only those assigned to the specific Minion. - The problem with `cp.list_master`: it lists just every file provided by the fileserver But then again, it would probably make the most sense to add a param like `assigned=True` to `cp.list_states` which returns only those states actually assigned to this Minion."
saltstack/salt,https://github.com/saltstack/salt/issues/21413,saltstack_salt_issues_21413,"Unable to handle symlinks in GitFS repositories

**Salt:**  So it seems like at some point symlinks from GitFS sources aren't handled properly at all and end up invisible/unusable for consumers such as the renderer or state module.",Would you mind giving this a try on 2014.7.2 and see if you're still running into this problem? ping @terminalmage,"Thanks for the heads up. `2014.7.2` isn't available on Ubuntu yet, but I manually deployed `salt/fileserver/gitfs.py` (and required other files) from current `2014.7` to my master, wiped the cache, restarted the master and ran `salt-run fileserver.update`. The result is unfortunately still the same."
saltstack/salt,https://github.com/saltstack/salt/issues/25782,saltstack_salt_issues_25782,"Evaluate 'libmount' for 'salt/modules/mount.py'

Due to the recurring and numerous issues with the handling of mounts (and mount options) on Linux systems in `salt/modules/mount.py`, it might be worth a shot to evaluate, whether using `libmount` which is part of `util-linux` might improve the situation over ""manually"" executed + parsed `mount` cmds. Most distributions should ship `util-linux` with Python bindings activated or at least provide a separate Python bindings package for `util-linux`. See also: http://karelzak.blogspot.de/2013/08/libmount-python-binding.html","What do you think, @eliasp?","@jfindlay You're right - I didn't think about the dependency aspect before. But on a second thought: should it turn out to promise significant improvements, util-linux is AFAIK a default package on nearly every distribution anyways [needs confirmation/research] and wouldn't even mean that an additional dependency needs to be installed (although it should be declared in the corresponding packages). Also adding it as optional makes sense, as the custom exec backend is most likely still required for *BSDs etc."
saltstack/salt,https://github.com/saltstack/salt/issues/28016,saltstack_salt_issues_28016,"`top.sls` state assignments in non-base environments not possible with GitFS

When using GitFS for states, the configuration of `top_file_merging_strategy`/`default_top` doesn't work as expected. I'm using only GitFS for my Master. no plain-FS `file_roots` or `pillar_roots`. - `salt-top-states` - contains only a `master` branch and a `top.sls` file with the following content, but nothing else: ",How are you referencing your gitfs remotes in your master configuration? Did you also experiment with `env_order`?,"Yes, I did experiment with `env_order`, but as this _shouldn't_ be relevant here and also didn't have any visible effect, I didn't mention it explicitely. My `master.d/fileserver.conf`: "
saltstack/salt,https://github.com/saltstack/salt/issues/8015,saltstack_salt_issues_8015,"CommandExecutionError: Unable to run command: [Errno 2] No such file or directory.  Deb package failing to be installed. 

It seems as though the full path to dpkg is needed, but it's not completely clear. ""dpkg -i --force-confold /var/cache/salt/minion/files/qa/qacouchbase/couchbase-server-community_x86_64_2.1.1.deb"" in directory '/root' works without issues on the system. state: ",Can you give us version information and OS version information?,"Sure thing... root@saltmaster01:# salt-master --versions-report Salt: 0.17.0 Python: 2.7.3 (default, Aug 1 2012, 05:14:39) Jinja2: 2.6 M2Crypto: 0.21.1 msgpack-python: 0.1.10 msgpack-pure: Not Installed pycrypto: 2.4.1 PyYAML: 3.10 PyZMQ: 13.0.0 ZMQ: 3.2.2 root@saltmaster01:# cat /etc/lsb-release DISTRIB_ID=Ubuntu DISTRIB_RELEASE=12.04 DISTRIB_CODENAME=precise DISTRIB_DESCRIPTION=""Ubuntu 12.04.2 LTS"""
saltstack/salt,https://github.com/saltstack/salt/issues/21004,saltstack_salt_issues_21004,"saltutil.runner broken

`` % sudo salt silver saltutil.runner manage.down silver: ERROR executing 'saltutil.runner': The following keyword arguments are not valid: {'__pub_user': 'sudo_mp', '__pub_arg': ['manage.down'], '__pub_fun': 'saltutil.runner', '__pub_jid': '20150224174258256673', '__pub_tgt': 'silver', '__pub_tgt_type': 'glob', '__pub_ret': ''}, {'__pub_user': 'sudo_mp', '__pub_arg': ['manage.down'], '__pub_fun': 'saltutil.runner', '__pub_jid': '20150224174258256673', '__pub_tgt': 'silver', '__pub_tgt_type': 'glob', '__pub_ret': ''}, {'__pub_user': 'sudo_mp', '__pub_arg': ['manage.down'], '__pub_fun': 'saltutil.runner', '__pub_jid': '20150224174258256673', '__pub_tgt': 'silver', '__pub_tgt_type': 'glob', '__pub_ret': ''}, {'__pub_user': 'sudo_mp', '__pub_arg': ['manage.down'], '__pub_fun': 'saltutil.runner', '__pub_jid': '20150224174258256673', '__pub_tgt': 'silver', '__pub_tgt_type': 'glob', '__pub_ret': ''}, {'__pub_user': 'sudo_mp', '__pub_arg': ['manage.down'], '__pub_fun': 'saltutil.runner', '__pub_jid': '20150224174258256673', '__pub_tgt': 'silver', '__pub_tgt_type': 'glob', '__pub_ret': ''}, {'__pub_user': 'sudo_mp', '__pub_arg': ['manage.down'], '__pub_fun': 'saltutil.runner', '__pub_jid': '20150224174258256673', '__pub_tgt': 'silver', '__pub_tgt_type': 'glob', '__pub_ret': ''}, {'__pub_user': 'sudo_mp', '__pub_arg': ['manage.down'], '__pub_fun': 'saltutil.runner', '__pub_jid': '20150224174258256673', '__pub_tgt': 'silver', '__pub_tgt_type': 'glob', '__pub_ret': ''} ``",What branch?,"Sorry, develop."
saltstack/salt,https://github.com/saltstack/salt/issues/23699,saltstack_salt_issues_23699,"salt-cloud puts minion keys on incorrect masters

Given the following configuration: ","How would minions reference which masters(s) they belong to? If we can define that, then we should be able to support multiple make_masters.","I guess the third example here made me think this would work: http://docs.saltstack.com/en/latest/topics/cloud/map.html#setting-up-new-salt-masters But, I see what you're saying here. In my use case I want to be able to group minions togethr to point to a master in a map file as well as being able to provision multiple masters in that map file. Sounds very much like this is a feature request and not a bug report. :]"
saltstack/salt,https://github.com/saltstack/salt/issues/34958,saltstack_salt_issues_34958,"Transition __salt__ to __runners__ in runners

",Could you elaborate on the suggested change? Would there be a `__runner__` dunder available to code running on the master (found this issue since that is exactly what I needed...)?,"@carlpett Right now, all runners which execute on the master have the `__salt__` dunder available to them and this dunder is populated with the other runners so that functions from one runner can be cross-called by another. So if you need that functionality rght now, it's already there for you. The idea here is simply to do some housekeeping by renaming that dunder to `__runner_` and then bring in execution modules as `__salt__`."
saltstack/salt,https://github.com/saltstack/salt/issues/8064,saltstack_salt_issues_8064,"Running salt-minion from command line in debug mode doesn't run pre and post scripts for RPM Specs

Three Scenarios: 1. Ran salt-minion -l debug 2. RPM for Tomcat7 did not create user or group tomcat 1. Ran salt-minion -l debug -d 2. RPM for Tomcat7 created user and group 3. Ran salt-minion service 4. RPM for Tomcat7 created user and group When run from the command line, the rpm spec does not execute completely and throws no errors. When run as a daemon, everything executes correctly. OS: CentOS 6 Salt: 0.16.04","Can you clarify? I'm not sure what you're trying to do here. Salt doesn't do anything with RPM spec files, those are used to _build_ RPMs.","I apologize for any confusion. I was attempting to install the tomcat7 package and part of it's spec file creates a user and group named tomcat. The package was correctly installed, but the rest of the spec file that enumerated the user was not run."
saltstack/salt,https://github.com/saltstack/salt/issues/8083,saltstack_salt_issues_8083,"Only the first set grains item has new value in the same state run

Other grains contain old values until next run. For example: test.sls  Note the value of grains-test2 grain in comment.",Could you post OS information as well as `--versions-report` information?,"Ubuntu 12.04 (vagrant box http://files.vagrantup.com/precise64.box) with salt 0.17.1 (from ppa, default bootstrap installation), 0.16.4 (bootstrap git v0.16.4) and latest (bootstrap git develop). salt-call --versions-report: "
saltstack/salt,https://github.com/saltstack/salt/issues/12322,saltstack_salt_issues_12322,"salt.modules.ssh: read user's ssh rsa keys

I have a cluster of nodes which require the public SSH RSA key of a specific host(s) to be deployed as authorized_key. Therefor I need to read the public key from this specific host manually with cat(1). It would be nice to have salt.modules.ssh to read the public / private rsa key of a specific user. This is not possible yet. Example: mine_function: https://github.com/bechtoldt/opennebula-formula/blob/master/pillar.example.sls#L50 State ssh_auth.present: https://github.com/bechtoldt/opennebula-formula/blob/master/opennebula/_oneuser.sls#L83 Having a native function in an execution module would have the benefit of accessing information like the type of the key, key itself, comment, etc. directly. Proposal: Prototype: ssh.user_keys user=None pubfile=None prvfile=None Parameters: user=john pubfile=/home/john/.ssh/id_rsa_custom.pub (optional) prvfile=/home/john/.ssh/id_rsa_custom (optional) Return value: You could use the same output format as salt.modules.ssh.host_keys does.",What would the desired result be if user is empty? Show ssh keys for all users?,@garethgreenaway I think making it optional would be pointless. Please strike it. :)
saltstack/salt,https://github.com/saltstack/salt/issues/13481,saltstack_salt_issues_13481,"Add foreman ext_pillar module to docs

See #13157 The module should appear in the documentation.",Do we just need to add these docs to an index somewhere?,see PR #13509
saltstack/salt,https://github.com/saltstack/salt/issues/14530,saltstack_salt_issues_14530,"debian_ip: IPv6 only interfaces not possible

salt.modules.debian_ip adds IPv4 configuration to every interface by default, see _parse_settings_eth().  It should be possible to setup IPv6 only network interface configurations.",Would you mind testing the develop branch? There were a lot of bug fixes for the debian_ip module.,No there weren't any changes. See https://github.com/bechtoldt/salt/commits/develop-arbe/salt/modules/debian_ip.py for the version I'm using. I'm using a _fairly_ new version of the develop branch. The version shown in `salt-minion --versions` is simply garbage (I don't know why). I'm using self-built packages from https://github.com/bechtoldt/salt/tree/develop-arbe.
saltstack/salt,https://github.com/saltstack/salt/issues/21881,saltstack_salt_issues_21881,"Improve elasticsearch returner

I've started working on the elasticsearch returner to make it more flexible. Also some features will be added to help managing the problem that every exec module has its own return data structure. - [x] manage elasticsearch mappings refs to #20826",Where are you on this? I'll be on the lookout for your awesome PR. :smile:,@jcockhren https://github.com/bechtoldt/monitoring/blob/master/monitoring/salt/elasticsearcharbe_return.py https://github.com/bechtoldt/salt-modules/blob/master/_modules/elasticsearcharbe.py https://github.com/bechtoldt/salt-modules/blob/master/_states/elasticsearch_index.py Everything is still in a very early state. It will take some time to get all those modules stable and reliable.
saltstack/salt,https://github.com/saltstack/salt/issues/22361,saltstack_salt_issues_22361,"2014.7: Execution Modules are not available in scheduled Returners 

Could someone please verify that execution modules are not available in returners that will be called by scheduled execution modules?  I get a KeyError, and after inspecting **salt** I can't find the required execution module. Everything works fine when the returner will be called after an execution module run from salt cli tool (master) or salt-call (local minion).","Can you please post the output of `salt --versions-report`, please? ping @garethgreenaway",@rallytime 
saltstack/salt,https://github.com/saltstack/salt/issues/8162,saltstack_salt_issues_8162,"SIMPLE pass/fail summary needed at the end of salt-call, and appropriate exit status

The output should make it really obvious if the run passed or failed! And just above that a simple summary that you can check to see if things got better or worse. (if using colour, then show RUN PASSED in green or RUN FAILED in red). Preferably this should reflect in the exit code as well so that automated provisioning / tests can issue an alert on states failing. Above that should be a numerical summary to make it obvious when changes have improved or worsened the situation. I suggest two text lines above the simple PASS/FAIL message, separated by blank lines : 1. giving a line count of each log level 2. giving a summary of states EG:  From https://github.com/ianheggie/salted-rails/blob/master/salt/bin/provision","What version are you on? In any case, I agree that we should make sure this output is showing for salt-call, as it's very useful for state runs.","Thanks! That solves part of the issue I have tried the latest tagged version (v0.17.1) and its summary is what I was thinking of (v0.16.4 doesn't have the summary and v0.17.0 had very unhelpful errors about list and get). Some questions: 1. do all lines tagged as ""[ERROR ]"" result in a Failed state, or does that still need to be checked? 2. is it intended that the exit code will reflect if there have been failures? For anyone that is curious, the summary I get from v0.17.1 is: "
saltstack/salt,https://github.com/saltstack/salt/issues/10621,saltstack_salt_issues_10621,"Scheduler config in pillar is broken for salt 0.17.5

I still have this exact same problem as Issue #6201 in salt 0.17.5 on CentOS 6.5 I have this in `/srv/pillar/schedule.sls`  I would expect at least to have the load average passed to the logs but it doesn't happen. Of course, if I run manually `logger -t salt < /proc/loadavg` it work fine. How do I even debug?",Does the highstate run as expected every 10 minutes? Or do none of the scheduled functions run?,"None of the scheduled functions run. I added both of them so I could see there is not somthing specific to the highstate and so I could debug faster. On Thu, Feb 20, 2014 at 7:40 PM, Colton Myers notifications@github.comwrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/11162,saltstack_salt_issues_11162,"user.present doesn't create home if user exists but the home directory doesn't

I have this state:  The _www-data_ user exists but the home directory doesn't. It would be nice if salt also made sure that the home specified home directory is created.","Does it correctly specify that directory as the home directory, even though it doesn't exist? Just to clarify. This should be straightforward to fix.","@basepi Yes. It specifies the directory correctly in /etc/passwd @dmyerscough I just added `createhome: True` and even though it changes the user every time I modify in the config it doesn't also create the home. Still, when it will work, it would be nice if the default for createhome was True."
saltstack/salt,https://github.com/saltstack/salt/issues/28100,saltstack_salt_issues_28100,"salt-cloud ec2 create_keypair doesn't return the private key data

When running the create_keypair function I would expect to receive the private key but apparently this doesn't happen: `salt-cloud -f create_keypair 2performant-ec2 keyname=CloudHero`  Am I missing something?","Does `-l trace` give any hints? The output will be too long to post here, and may contain sensitive data, but it might contain something helpful.","Indeed, running with trace shows the private key but how would I actually save it in a file? "
saltstack/salt,https://github.com/saltstack/salt/issues/32909,saltstack_salt_issues_32909,"salt-cloud --list-images gce fails

### Description of Issue/Question `salt-cloud --list-images gce` fails Running `salt-cloud -Q` successfully returns information about that node so authentication works properly. ### Setup ",Can you verify that the issue has been resolved?,Yes. The fix from Google resolved the issue.
saltstack/salt,https://github.com/saltstack/salt/issues/45795,saltstack_salt_issues_45795,"salt-cloud 2017.7.2 doesn't work with driver gce on Debian 8

salt-cloud 2017.7.2 doesn't work with driver gce on Debian 8 ",Can you provide the version of GCE that is installed?,How do I check that?
saltstack/salt,https://github.com/saltstack/salt/issues/11707,saltstack_salt_issues_11707,"Unhandled exception in gethostbyname

Creating new issue because I don't have the ability to reopen one. #11660 is _not_ fixed. The change that was made (#11674) returns 'localhost' when FQDN lookup fails, whereas the stock python socket.getfqdn() returns the short hostname. I don't think returning 'localhost' should ever be a fallback here: the custom code in salt should fall back to the standard implementation provided by the language in order to give us a consistent result.",Can you tell me if you see any problems with the code after #11706?,Looks good to me
saltstack/salt,https://github.com/saltstack/salt/issues/30600,saltstack_salt_issues_30600,"salt-minion lost data when salt-master offline

 At two last events are no record for line removing. This is strange",What version of salt are you using? When you run the state manually does it produce the desired result?,It is reproduce on all salt version  It seems that it is not only my problem: https://github.com/saltstack/salt/issues/26811 https://github.com/saltstack/salt/issues/25579
saltstack/salt,https://github.com/saltstack/salt/issues/54765,saltstack_salt_issues_54765,"2019.2.1: Jinja from import broken

### Description of Issue Starting with salt version 2019.2.1, the following statement is broken:  Also happens with Debian 8, Debian 9, Ubuntu 16.04 LTS, Ubuntu 18.04 LTS.",Did someone found some workaround? It disables the whole release for me... and it's the only release for Debian 10,@kiemlicz For other distri we pin to 2019.2.0 right now.. Have you tried to use the Debian 9 repo for 2019.2.0 with Debian 10?
saltstack/salt,https://github.com/saltstack/salt/issues/8730,saltstack_salt_issues_8730,"Using pkgrepo state gives exception

Using salt-ssh 0.17.2 to get a minion installed on Ubuntu 13.10. The following state declaration (which worked for me with earlier Salt/Ubuntu versions) fails:  Strangely enough, the following states still ran, and apparently the `salt-minion` package was installed successfully. I don't know if this is connected to the recent `pkgrepo` problem. I installed `salt-ssh` 0.17.2 using Salt bootstrap.","Do you have the 0.17.2-1 version or the 0.17.2-2 version? Actually, it definitely looks related.",I'm using salt-bootstrap to install salt-ssh:  I don't see a newer tag than v0.17.2 in the GitHub repo.
saltstack/salt,https://github.com/saltstack/salt/issues/9031,saltstack_salt_issues_9031,"Salt commands sometimes return immediately without any output

Sometimes, Salt commands return immediately without any output. In particular, I'm observing this for `salt foo.bar state.highstate`. Running the command unchanged a second time usually solves the problem. Salt 0.17.2.2, Ubuntu 13.x",Does the minion log show that it received the highstate command?,"I've been seeing this every now and then, and can't say for sure if I was targeting a single or all minions. I'll try and follow up with more details next time I hit this."
saltstack/salt,https://github.com/saltstack/salt/issues/9154,saltstack_salt_issues_9154,"*.pyc files shouldn't go into srv/salt/_modules

To test my states I use `salt-call -m /srv/salt/_modules state.sls state.to.test`. This puts `.pyc` files into `/srv/salt/_modules`. Shouldn't these files go somewhere else, leaving `/srv/salt/_modules` for human-edited files?","Shouldn't these files go somewhere else, leaving /srv/salt/_modules for human-edited files? &mdash; Reply to this email directly or view it on GitHub.",Is it possible to generate them somewhere else? Is it customary in Python to compile into the sources directory?
saltstack/salt,https://github.com/saltstack/salt/issues/11225,saltstack_salt_issues_11225,"--batch is very slow with high timeout

It's more than 1 minute: ","What version of salt are you using? Additionally, do you have any minions with accepted keys (`salt-key` will show accepted keys) but that are currently offline?","@basepi Master and all minions are 2014.1.0 now. No, all minions in `salt-key` are responsive (we test them every hour). I patched https://github.com/saltstack/salt/pull/11184.patch on master, but the problem remains."
saltstack/salt,https://github.com/saltstack/salt/issues/19728,saltstack_salt_issues_19728,"pkgrepo.managed key_url fails with HTTP(S) Basic Auth

Something changed in the way URLs are handled for key_url as in the downloaded key file is the HTML of the HTTP 401 response and apt-key add (obviously) fails. The configured repo is something like:  PS: also hitting #16409 on the same setup. Otherwise, unrelated as it's a SNI issue, but I don't know if HTTPS URLs are handled differently by SaltStack.","Can you provide an example of what was working, and the version used at the time?","It used to work flawlessly up until 2014.7.0 (I think). Also, it's a state that's used by virtually every machine as that repo is an internal repo used for our own builds. The state wasn't modified since `Thu Feb 20 16:01:07 2014 +0200` per git log and I'm fairly sure that I was using the latest SaltStack at that moment. Besides, I am upgrading fairly often to the latest version by using the SaltStack PPA. I don't know if a previous version broke things since I was mostly out of the office for the past couple of months, but this week when I started to add machines, I saw this issue. Last time when it successfully worked was on 22nd of October, 2014, but I haven't added new machines until this week. **Edit**: updated the date of the last known machine to successfully use the state."
saltstack/salt,https://github.com/saltstack/salt/issues/21625,saltstack_salt_issues_21625,"file.managed for HTTP source doesn't use the HTTP status code

If the returned status code is for example 403, then the response body of the error is compared against source_hash and the state fails with a wrong hash error. Yep, I had ""fun"" debugging that until I realised that the URL is wrong, many hours after checking all the bits and pieces. I'd say that 4xx and 5xx status codes should be treated as errors and the state output should properly display that instead of reading an useless response body and throwing a bad hash error which doesn't explain the nature of the failure. ",Do you have some state output that shows the hash error?,@rallytime I'll give you an example: 
saltstack/salt,https://github.com/saltstack/salt/issues/8213,saltstack_salt_issues_8213,"pkg.installed not being able to install from .deb files.

I'm trying to install a library called princexml using salt, but I'm getting this error: https://gist.github.com/felipellrocha/7141937 I'm also getting a similar error from trying to install elasticsearch using the same method. Strangely enough, if I run the line 'dpkg -i --force-confold /var/cache/salt/minion/extrn_files/base/www.princexml.com/download/prince_9.0-2_ubuntu12.04_amd64.deb' manually, the package installs just fine.",Can we get the output of `--versions-report` on both minion and master? @terminalmage could this be related to the `python_shell` changes?,"It turned out this link solved the issue: https://github.com/saltstack/salt/issues/8015 Thanks for the help, though! :)"
saltstack/salt,https://github.com/saltstack/salt/issues/8249,saltstack_salt_issues_8249,"salt remote shell

Hello, I would personally find it extremely useful if salt provided a module for getting a remote command line shell (bash/powershell/whatever) on a minion. It should work something like this:  Rationale: Currently, my company uses HP Server Automation (formerly Opsware) which provides this feature via a command line tool called rosh. rosh allows you to open an interactive shell via the opsware agent with its own permissions model and associated ACLs. I am very much willing to hack at this if we can agree upon its usefulness, feasibility, and functional requirements. Thanks!",Would it be too complicated to automatically create a reverse ssh tunnel and drop the user into the shell? What were your thoughts on implementation?,"I'm not quite sure honestly. Given the encrypted master/minion communication all occurs via the push/pull queues, this seems like a non trivial problem to solve. And we can't necessarily rely on ssh since it might not exist on the minion (eg: Windows)."
saltstack/salt,https://github.com/saltstack/salt/issues/8403,saltstack_salt_issues_8403,"Support for multiple template engines in salt-cloud

Support for Make templates in cloud.map file is already support. Add support for other engines and support for templating in other files.",Can we make it into a list of template engines we want supported? Otherwise it's impossible to know when to close this.,"The same engine that Salt supports? Jinja and mako? Thr first one must be there I think because is the Salt default. And the other one is already working on Salt cloud. El 11/11/2013 19:50, ""Colton Myers"" notifications@github.com escribió:"
saltstack/salt,https://github.com/saltstack/salt/issues/8863,saltstack_salt_issues_8863,"deploy_scripts_search_path ignored

I tried to set the deploy_scripts_search_path a profile but it doesn't work. Always search the deploy scripts in the default location. salt-cloud 0.8.9",Can you paste the piece of the configuration file where you're defining that search path please?,"Here is:  I enabled debugging and nothing is logging, it doesn't try anything with the script. I haven't debug the code yet."
saltstack/salt,https://github.com/saltstack/salt/issues/19923,saltstack_salt_issues_19923,"config_drive should not be a required option

In the latest version of Salt 2014.7.1, the config_option is required to be set to True to launch instances in Rackspace using salt-cloud. The error without that option is: ","Can you verify, @gtmanfred?","Ok, but I'm not using user data. And it breaks current configurations. On Thu, Jan 22, 2015 at 4:20 AM, Nicole Thomas notifications@github.com wrote: ## Diego Woitasen Infrastructure Developer, DevOps Engineer, Linux and Open Source expert http://www.woitasen.com.ar"
saltstack/salt,https://github.com/saltstack/salt/issues/8277,saltstack_salt_issues_8277,"Windows salt-minion service behaves differently to salt-minion.exe

I've been experimenting with salt Windows packages. Generally, the packaging system works as documented until I'd tried to install the subversion package. Essentially, this is what I'd observed: ###### When pulling configuration: On the minion, run `salt-call.exe pkg.install svn`. Works as expected, the subversion package is installed and can be seen in the ""Uninstall or change a program"" view. ###### When the salt-minion run from within a cmd session: Also, works as expected. ###### When pushing a configuration: On the master, run `salt 'SaltMinionWindows' pkg.install svn`. The master indicates the package is installed and to an extent the package is, i.e. the uninstall (and maybe others) registry is correctly set, files are copied to the correct location. However, the program does not appear in the ""Uninstall or change a program"" view. It is quite likely there's a problem with the Windows subversion msi package, however, this doesn't explain the differences between push and pull. Here is the subversion sls configuration file:  This is stored in a file called svn.sls and placed in srv/salt/win/repo/svn along with the subversion installer. The subversion installer can be downloaded from http://sourceforge.net/projects/win32svn/files/latest/download.",Can you please post the results of `salt --versions-report` on the master and `salt-call --versions-report` on the minion? @UtahDave ping,###### Master version report: 
saltstack/salt,https://github.com/saltstack/salt/issues/23520,saltstack_salt_issues_23520,"NameError: global name '__salt_system_encoding__' is not defined after upgraded to salt-2015.5.0

After I upgraded the salt master from 2014.7.5 to 2015.5.0 I got the following errors in my log: ",What OS is this?,"On Gentoo Linux:  But only happen on first start of the master after the upgrade. I stopped the master, cleaned the log file and started the master again -> log is empty."
saltstack/salt,https://github.com/saltstack/salt/issues/30877,saltstack_salt_issues_30877,"unit.modules.boto_vpc_test.BotoVpcTestCase test fails

With _salt-2015.8.5_:  Looks like this was introduced by @jtand in https://github.com/saltstack/salt/commit/00943ff1e6eb65c6d23c195dde2e2390e8546c95",What version of boto are you using? What OS?,"Gentoo, _dev-python/boto-2.39.0_."
saltstack/salt,https://github.com/saltstack/salt/issues/12297,saltstack_salt_issues_12297,"Option to check state without enforcing it (`test=True` per state)

Instead of enforcing a state, there should be a way to check it only. The idea was originally posted in [salt-users](https://groups.google.com/forum/#!msg/salt-users/QBDXu2ElhlQ/fwRdSa9qRNUJ). ### Example The most straightforward example is `file.managed`. At this moment it can only modify file enforcing the requirement. The new (i.e. `enforce`, `check_only`, `verify_only`, etc.) option could be used to make sure it is nothing else than specified in the state. In some situation, it could be crucial not to overwrite anything and just fail the subsequent state execution (for example, in case of unexpected modifications detected in the target file).  ### Additional points This resembles the purpose of `assert` in programming languages. It is not possible to automate recovery from any unexpected conditions, but detecting them without making things worse is easy enough. And it is especially useful to create ""stubs"" for configuration which should be done manually for some reasons (i.e. too difficult automatically, no time now, etc.). ### Flavors In dependency tree, if verification of parent state fails (i.e. file needs to be updated), children states can be run or not - two different behaviors. Please consider both. - **""test""** behavior _Check state but_ **_continue**_ _execution of children states as much as possible if parent failed._ This is **exactly** how `test=True` works. Use case: highlight what is wrong on the system (without enforcing state), but do not prevent setting up children. - **""assert""** behavior _Check state and_ **_stop**_ _execution of children states if parent failed._ This is **NOT** how `test=True` works: children states should not even be tried. Use case: highlight what is wrong on the system (without enforcing state) and prevent from executing children.","What's the difference between your ""test all"" behavior and the existing `test=True` behavior?","@basepi, OK. Imagine a state function is in this ""verification"" or ""no enforcement"" mode. Now, what if the state does not match required one? What should we do with dependent states? ### 1. ""test"" In this case the behavior is exactly what `test=True` does. There is no difference except that it applies only for specific state function. If global `test=True` is not set and only specific test function is in the test mode, dependent states should still be run and applied. Based on my tests, global `test=True` simply continue testing dependent states as much as possible even if parent in dependency tree would be need to be updated first (if it wasn't a test). For example... State file:  Note that both parent and child are tried. This is reasonable - it is doing ""testing"" trying to highlight as many problems as possible beyond the first detected changes to be done. ### 2. ""assert"" This alternative is to treat dependent states as if it was normal execution (`test=`**`False`**). In this case children states in dependency tree are not run _at all_ (even for the purpose to highlight required changes in depth). Personally, I think everyone understands that the 2nd option (""assert"") is what this feature primarily should be. But I find it crucial to distinguish these subtle differences because consequences are important."
saltstack/salt,https://github.com/saltstack/salt/issues/21876,saltstack_salt_issues_21876,"Option `aggregate: False` is not respected for `pkg.installed` state with global `state_aggregate: True`

## Problem If global `state_aggregate: True`, even if some `pkg.installed` states explicitly specify `aggregate: False`, they still get aggregated. ## Reproducible setup Use Salt minion-only setup with `salt-call` command for simplicity. - Minion configuration: ",Do you have the same problems with 2014.7.2?,"@jfindlay, yes. I've just tested it on Fedora 21 with updated Salt. Result repeat cases in ""Detailed output"".  By the way, the issue (updated there) was originally spotted on CentOS 5.5."
saltstack/salt,https://github.com/saltstack/salt/issues/8590,saltstack_salt_issues_8590,"managed files are initially copied/created with 0644 permissions irrespective of mode.

Given a state to manage a file by salt, the resulting file that is copied to it's ultimate destination on the filesystem initially (albeit briefly) has 644 permissions allowing a window of opportunity for a local user to gain undesired access to the file's contents. Despite the state's mode specifying 600, for example. I first spotted this on CentOS 6.4 with Salt 0.16.4 on both master and minion (EPEL RPMs) but testing shows the same behaviour on the develop branch - last pull a couple of hours ago. Steps to demonstrate (on Gentoo here, in this case that's important): Logs, files, configuration are all running in a virtual environment created by pip.  I believe files should be created with, at most, 0600 permissions and then the state mode (or internal default) applied once the file is successfully copied. --- Looking through code I see some uses of shutil module copy functions (salt.utils also makes use of shutil). shutil.py uses open() on new files that seems to honour umasks, in isolated testing at least, and will create files with 644 permissions. So I have been experimenting with umasks in various places (primarily `salt/utils/__init__.py`) like daemonize(), copyfile() without success so far. Maybe `pip uninstall salt; pip install -e salt-fork;` isn't the best way to test or I am doing something wrong. Since `salt/modules/file.py:psed()` uses shutil.copy2 to create a backup file before editing, `file.replace` can also expose file content. I am still wrapping my head around the code and thought I would post this issue for review. Best regards, Grant",Would you mind verifying? Thanks!,"With the patch applied directly to /usr/lib/python2.6/site-packages/salt/modules/file.py (deleting file.pyc, file.pyo files) and minion restarted, initial testing with 0.16.4 on CentOS 6.4 doesn't show any improvement for me. I'll try the develop branch later on my system at home. I find that ossec reliably detects the permissions changes. The following is the result of deleting a line from /etc/sudoers and running `salt-call state.highstate`. "
saltstack/salt,https://github.com/saltstack/salt/issues/15760,saltstack_salt_issues_15760,"Add metadata to jobs

We should be able to pass this metadata in while running a job. This metadata should end up in the job dict. We should also be able to query jobs based on the metadata.",Can you give an example of how you would imagine running this?,"Hey @garethgreenaway My initial thoughts are that we'll probably have a key in the data structure defined below  And then the query `salt-run jobs.list_job 'foo=bar'` I need to devote more thought to this though, but this is roughly what we'll need. Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/9984,saltstack_salt_issues_9984,"pkg.remove fails when package is removed (debian)

I just tried to write a simple state:  /cc @drj11",Can you please run the minion in debug mode and give us that log output?,
saltstack/salt,https://github.com/saltstack/salt/issues/10257,saltstack_salt_issues_10257,"mount.mounted failing when already mounted

State: ",Could you double-check this and perhaps supply the current output of the `mount` command on the box in question? Thanks!,"I have an unrelated problem right now so can't test. However, it goes green sometimes and red other times. That's strange. I'll come back to this on monday."
saltstack/salt,https://github.com/saltstack/salt/issues/19607,saltstack_salt_issues_19607,"State locale.present found in sls common is unavailable

Redux of #13295 I'm still encountering this on Debian 8. ",Can you please post the output of 'salt --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/8788,saltstack_salt_issues_8788,"MySQL returner not working in scheduler

Setting up MySQL as returner database seems to be broken. Running salt from command prompt works: salt '*' state.highstate --return mysql ...adds data to MySQL salt_returns (and nothing to kids). /etc/salt/master: ... mysql.host: 'localhost' mysql.user: 'salt' mysql.pass: '<hidden>' mysql.db: 'salt' mysql.port: 3306 On the minions: /etc/salt/minion: ... master: mon.deltaweb.de mysql.host: 'mon.deltaweb.de' mysql.user: 'salt' mysql.pass: '<hidden>' mysql.db: 'salt' mysql.port: 3306 schedule: highstate: function: state.highstate minutes: 1 returner: mysql Each minion can ""reach"" the MySQL server (iptables and access rights). python-mysqldb is installed on master and minions. dpkg -l python-mysqldb: 1.2.3-2 lsb_release -a: No LSB modules are available. Distributor ID: Debian Description: Debian GNU/Linux 7.2 (wheezy) Release: 7.2 Codename: wheezy salt --versions-report Salt: 0.17.2 Python: 2.7.3 (default, Jan 2 2013, 13:56:14) Jinja2: 2.6 M2Crypto: 0.21.1 msgpack-python: 0.1.10 msgpack-pure: Not Installed pycrypto: 2.6 PyYAML: 3.10 PyZMQ: 13.1.0 ZMQ: 3.2.3 I also tested with redis-server, which works. So it has to do with the MySQL returner.",Can you test against the develop branch?,"Unfortunately, I can not switch to the developer branch, as this is a real productive cluster that servers hundreds of PPPoE customers. What I want to achieve is to get all state.highstate data written to a MySQL server. So I have created the DB and added the SQL stuff found in the docs. Afterwords I installed python-mysqldb on all minions and on the master. I added the MySQL-config options as seen in this report. When I watch the logs and look at the clock (it is a minute interval), also using tcpdump, nothing happens. The minions do not connect to MySQL. No connection on port 3306 to the specified host. Also nothing in the logs. Even if I turn on debug mode, I can not see anything concerning MySQL. But when I go to the master and add the --return argument to salt, data gets written. So am I missing something? I had asked for help on the mailing list and they told me to open a bug report, as they could not see any misconfiguration."
saltstack/salt,https://github.com/saltstack/salt/issues/8846,saltstack_salt_issues_8846,"`require` used with `names` list expansion is broken

This was found against the 0.17.2 It looks like ordering is broken when a names array is used with requires. Here is an example sls file:  It looks like name expansion just increments the order index that is assigned during the highstate parsing stage. But this causes it to overlap with other states and violates the ordering implied by `require`.","Does it execute in that order in practice? Curious if there's magic after the lowstate. (There shouldn't be, just want to make sure)","It does actually execute in the right order now. I had to reset my VMs to test that out. There must be some subtlety in the way lowstate is executed (dependencies are there) that I wasn't aware of. Oh well, always learning! Thank you for your help finding my typo :/"
saltstack/salt,https://github.com/saltstack/salt/issues/16409,saltstack_salt_issues_16409,"Download of SSLv3/SNI fails

Currently it looks like Salt just uses urllib2. Urllib2 doesn't work well with SNI servers. In practice, this bit us as the Docker folks started hosting their apt repository GPG key on a SNI server. You can see this with raw python:  We have worked around this with the Docker guys (https://get.docker.io doesn't use SNI) but there is a good chance it'll break again in the future. I'm not sure how to fix this as SSL support in python has a long and painful history, but it might be worth switching to alternate download frameworks. Or fall back on calling curl/wget in some cases? /cc @bgrant0607",Do you know of any issues with moving this code to requests?,(Note that we worked with the docker folks to work around this -- they stopped using SNI. But I'm sure this will come up again sooner as IP space gets more precious and more people demand HTTPS.)
saltstack/salt,https://github.com/saltstack/salt/issues/8847,saltstack_salt_issues_8847,"Allow Facter to load Puppet-specific facts

Current puppet.py module, when runs a facter, doesn't pass --puppet option to it, what results in Puppet specific facts not listed. Minor modification to the fact and facts functions might resolve this issue: by adding boolean argument puppet which defaults to false. this will run as it currently does, no puppet specific facts salt '*' puppet.facts and this will include puppet facts: salt '*' puppet.facts puppet=true I've tested it in my env already - does the job. Happy to create pull request for it. Thanks,",Do you have a link to Salt in the Puppet Forge?,
saltstack/salt,https://github.com/saltstack/salt/issues/8908,saltstack_salt_issues_8908,"Syndic return inconsistency

My config like this: demo-tools.xx.com Salt Master demo-syndic.xx.com Salt Syndic + SaltMaster demo-minion01.xx.com Salt Minion demo-minion02.xx.com Salt Minion This command works: root@demo-tools# salt ""demo-*"" test.ping demo-minion01.xx.com True demo-minion02.xx.com True But this one doesn't work: root@demo-tools# salt ""demo-m*"" test.ping After several hours diagnostic, I find something interesting: 1. Both demo-minion01 and demo-minion02 get the job and returned 2. salt master and salt syndic also did the job on demo-syndic 3. demo-tools get the response as well, but it refuse to output. Root cause is here: With syndic configured, top level master only see syndic's pki, no other minions. I also find the code where broke things: On develop branch, commit 4a6baf0f07b2b2bd9d2451694ded7e94d0811852 master.py line 2433  In my case, minions return [] The only workaround I can try is to share pki directory for top level master and all syndics, but it may be insecure. Want to hear about your comments. By the way, I spend more than 6 hours to go through minion/master/syndic codes and write a workflow chart to help me understand the whole process. The only doc about this is http://docs.saltstack.com/ref/topology.html, but it's much much simpler than the real world. If you have anything I can use to understand salt easily, I can help more.",What version of salt are you using? I think this may already be fixed.,"On develop branch, commit 4a6baf0, as I said."
saltstack/salt,https://github.com/saltstack/salt/issues/8951,saltstack_salt_issues_8951,"gem not running as rvm user?

I'm having an issue trying to install rvm and unicorn, am I missing something? I'm getting this error on the minion's log (it's running 0.17.2): 2013-12-02 19:56:14,444 [salt.loaded.int.module.cmdmod][INFO ] Executing command 'gem list unicorn' as user 'rvm' in directory '/home/rvm' 2013-12-02 19:56:14,557 [salt.loaded.int.module.cmdmod][ERROR ] Command 'gem list unicorn' failed with return code: 127 2013-12-02 19:56:14,558 [salt.loaded.int.module.cmdmod][ERROR ] stderr: /bin/sh: 1: gem: not found 2013-12-02 19:56:14,678 [salt.loaded.int.module.cmdmod][INFO ] Executing command 'gem install unicorn --no-rdoc --no-ri' as user 'rvm' in directory '/home/rvm' 2013-12-02 19:56:14,790 [salt.loaded.int.module.cmdmod][ERROR ] Command 'gem install unicorn --no-rdoc --no-ri' failed with return code: 127 2013-12-02 19:56:14,791 [salt.loaded.int.module.cmdmod][ERROR ] stderr: /bin/sh: 1: gem: not found My unicorn.sls: unicorn: gem.installed: - user: rvm - runas: rvm - ruby: ruby-1.9.3 - rdoc: False - ri: False - require: - sls: rvm My rvm.sls: rvm: group: - present user.present: - fullname: rvm - shell: /bin/bash - home: /home/rvm - gid: rvm - require: - group: rvm rvm-deps: pkg.installed: - names: - bash - coreutils - gzip - bzip2 - gawk - sed - curl - git-core - subversion mri-deps: pkg.installed: - names: - build-essential - openssl - libreadline6 - libreadline6-dev - curl - git-core - zlib1g - zlib1g-dev - libssl-dev - libyaml-dev - libsqlite3-0 - libsqlite3-dev - sqlite3 - libxml2-dev - libxslt1-dev - autoconf - libc6-dev - libncurses5-dev - automake - libtool - bison - subversion - ruby ruby-1.9.3: rvm.installed: - default: True - user: rvm - require: - pkg: rvm-deps - pkg: mri-deps - user: rvm mygemset: rvm.gemset_present: - ruby: ruby-1.9.3 - user: rvm - require: - rvm: ruby-1.9.3 On the minion, if I su as rvm and run: gem list unicorn works. Of course it I run it as root it doesn't. Am I missing something here? Thanks!","Did you fork the repo? You have to have your own fork, then you push your branch to your fork, then open a pull request from that branch.","Hi there, would that do it? Cheers!"
saltstack/salt,https://github.com/saltstack/salt/issues/13605,saltstack_salt_issues_13605,"Error Starting salt-minion

Recently installed some salt-minions. ","Can you show us your minion/master config? I'm guessing this is the same issue as #12172, and has been fixed in the newly-released 2014.1.5.","Sorry, I was on vacation and I pretty much unplugged. I haven't changed the hashing algorithm. But here are the master config and the minion config of one of the problem systems. Here is a gist instead of the markdown mangled configs. https://gist.github.com/96fcde022f27845badf0.git"
saltstack/salt,https://github.com/saltstack/salt/issues/25042,saltstack_salt_issues_25042,"[ERROR ] Salt request timed out. If this error persists, worker_threads may need to be increased.

**I don't understand what's going on here. When I try to target using grains I get the following error and it takes quite a while to time out.** ",Do you have the same problems if you upgrade to 2015.5.2?,I can't upgrade this environment until https://github.com/saltstack/salt/issues/23342 and/or https://github.com/saltstack/salt/issues/24085 are fixed.
saltstack/salt,https://github.com/saltstack/salt/issues/9023,saltstack_salt_issues_9023,"Digital Ocean error_message is string, not dict

I'm getting an exception In salt-cloud/clouds/digital_ocean.py, line 403, with no real indication of what the problem is: File ""/usr/lib/python2.7/dist-packages/saltcloud/clouds/digital_ocean.py"", line 403, in query result.get('error_message', {}).items() AttributeError: 'unicode' object has no attribute 'items' [ERROR ] There was a profile error: 'bool' object has no attribute 'pop' It turns out that result.error_message is a string, not a dict. Right now is a good time to reproduce this -- by changing that section to raise an error with result.get('error_message',''), I got the actual error being returned by Digital Ocean: ""Size is not available in this region."" To reproduce, configure a Digital Ocean provider/profile, and attempt to create any vm 1GB or bigger in location ""San Francisco 1"". That is, until they provision more hardware!",Would you please verify?,"Hi, I'm not that much of a Python programmer (yet), but this patch doesn't seem quite correct -- shouldn't the second parameter to result.get('error_message', {}) be an empty string? e.g. result.get('error_message', '') Also, I don't think this is the only place in this file that has a type problem. Here's the exception raised at the end of a successful provisioning: [ERROR ] There was a profile error: Dict object expected, not ""'test.freelock.com has been created at 198.199.122.167'"". Traceback (most recent call last): File ""/usr/lib/python2.7/dist-packages/saltcloud/cli.py"", line 279, in run self.config.get('names') File ""/usr/lib/python2.7/dist-packages/saltcloud/cloud.py"", line 662, in run_profile ret[name] = self.create(vm_) File ""/usr/lib/python2.7/dist-packages/saltcloud/cloud.py"", line 594, in create output = self.clouds[func](vm_) File ""/usr/lib/python2.7/dist-packages/saltcloud/clouds/digital_ocean.py"", line 339, in create deployed = saltcloud.utils.deploy_script(**deploy_kwargs) File ""/usr/lib/python2.7/dist-packages/saltcloud/utils/**init**.py"", line 637, in deploy_script '{0} has been created at {1}'.format(name, host), 'salt-cloud' File ""/usr/lib/pymodules/python2.7/salt/utils/event.py"", line 263, in fire_event raise ValueError('Dict object expected, not ""{0!r}"".'.format(data)) ValueError: Dict object expected, not ""'test.freelock.com has been created at 198.199.122.167'"". Hmm. As I dig deeper, that looks like a salt-cloud bug, not a digitalocean one... did the api for fire_event change?"
saltstack/salt,https://github.com/saltstack/salt/issues/9067,saltstack_salt_issues_9067,"SLS Template Variable Reference: loop through cmd.run

In [this](http://docs.saltstack.com/ref/states/vars.html) document, an example is given to loop though the `cmd.run` output: ","Does the first example fail? Jinja may be doing some magic, so I just wanted to verify.","Yes, it failed: "
saltstack/salt,https://github.com/saltstack/salt/issues/9475,saltstack_salt_issues_9475,"Module function rabbitmq.delete_user is not available

`salt --versions-report`: ",Do you have that installed?,@cachedout Thank you very much! The reason is `brew link` creates symlink in `/usr/local/sbin` that is already added into `~/.bash_profile`: 
saltstack/salt,https://github.com/saltstack/salt/issues/27785,saltstack_salt_issues_27785,"watch_in a non-existent state in extend does not cause an error

salt-call --versions-report  You can specify `whatever: clamav-daemon` in this case and it does not failed.",Do you know if this still happens on 2015.5.5 or later?,Yes. salt-call --versions-report 
saltstack/salt,https://github.com/saltstack/salt/issues/9072,saltstack_salt_issues_9072,"module.run is not working properly from sls file

I'm adding repos to CentOS using two rpm files. After installing these repos i want to enable one of them from sls. common.sls file add_repositories: pkg.installed: - sources: - epel-release: salt://pkgs/epel-release-6-8.noarch.rpm - remi-release: salt://pkgs/remi-release-6.4-1.el6.remi.noarch.rpm enable_repos: module.run: - name: pkg.mod_repo - repo: remi - enabled: 1 Doing this from command line we can set enabled=0 or enabled=1 for repository remi: salt '*' pkg.mod_repo remi enabled=0 But doing the same command over sls using module.run we can't set them. We are getting only output with setting of this repository. == OUTPUT  }",Which version of salt are you using? `salt --versions-report`,"@basepi: versions are root@saltmaster:~# salt --versions-report Salt: 0.17.2 Python: 2.7.3 (default, Jan 2 2013, 13:56:14) Jinja2: 2.6 M2Crypto: 0.21.1 msgpack-python: 0.1.10 msgpack-pure: Not Installed pycrypto: 2.6 PyYAML: 3.10 PyZMQ: 13.1.0 ZMQ: 3.2.3 [root@jakubtest ~]# salt-minion --version salt-minion 0.17.2"
saltstack/salt,https://github.com/saltstack/salt/issues/12624,saltstack_salt_issues_12624,"state.highstate is not working with minion in test=True mode

When test=True is enabled on minion there is no way to run salt 'i-jakub-1' state.highstate with test=False argument. ### Commands ",What OS is running on the minion?,@basepi minion 
saltstack/salt,https://github.com/saltstack/salt/issues/18912,saltstack_salt_issues_18912,"test=False not working with state.sls_id

All my minions are running in test: true mode by default. ",Can you give that a try and see if you get the result you expect?,@rallytime as I mentioned I'm always running minion with option test: true in /etc/salt/minion. In this case state is always fired as dry-run. 
saltstack/salt,https://github.com/saltstack/salt/issues/9547,saltstack_salt_issues_9547,"salt command hangs; never returns

I'm attempting to bring up a salt-master / salt-minion pair. The one and only salt-minion is running on the same host as the master. It works for a bit with some `test.ping` calls, but a `state.highstate` causes the salt command to never return. (Even as `salt-minion -l debug state.highstate`) All subsequent calls also don't return. For example, here's a `salt-minion -l debug test.ping`, which never returns, but outputs the following. (And then hangs.) ",Which version of the master and minion are you using?,"I should've been running `salt-call`, not `salt-minion`. Closing. (Salt version 0.17.4)"
saltstack/salt,https://github.com/saltstack/salt/issues/9216,saltstack_salt_issues_9216,"Wrong order of Pillar namespace flattening

Hello, The order I have between my test and the documentation is not the same. Here is my pillar  This means that the order is alphabetical, the documentation suggests either it is the last one of the list or the last one in alphabetical order (it's not clarified). I do not know if the bug is in the documentation or in code. Regards.",What version of salt are you using? Pretty sure this has been fixed.,0.17.2 from Debian Jessie
saltstack/salt,https://github.com/saltstack/salt/issues/9261,saltstack_salt_issues_9261,"sls template variable is unknown

Hello, I'm experimenting salt with version 0.17.2 on Debian Jessie. As I do not understand the purpose of the [sls variable](http://salt.readthedocs.org/en/v0.17.1/ref/states/vars.html#sls), I include it in a little jinja template to see what it produce and it give me an error. Is here my test case:  Regards.",Does that make sense?,"Hello, Not sure, the [documentation says](http://salt.readthedocs.org/en/v0.17.1/ref/states/vars.html#sls): So, it should be available in my template too, isn't it? Regards."
saltstack/salt,https://github.com/saltstack/salt/issues/56187,saltstack_salt_issues_56187,"Support in data merging strategy for salt.modules.config.get like in pillar.stack

### Description of Issue <!-- Note: Please direct questions to the salt-users google group. Only post issues and feature requests here --> `salt.modules.config.get` support merging strategy at call time with the `merge` parameter. This is great for `sls` writer to decide how to use things but I think it should be better to make it a data driven behaviour like it's done in [pillar.stack](https://docs.saltstack.com/en/latest/ref/pillar/all/salt.pillar.stack.html#merging-strategies) This could be implemented at several levels but as the `salt.modules.config.get` use `salt.utils.dictupdate.merge` (using `salt.utils.dictupdate.update` for the `recursive` and `overwrite` strategies) it could be interesting to implement this in `salt.utils.dictupdate` for `salt.slsutil` to benefit from it. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) ",What is the killer use-case here that can't be accomplished with pillars?,"Hello @waynew. My feature request is to add merging capabilities to pillars (and anything queryable by `salt.modules.config.get`) the same way the pillar specific [pillar.stack does](https://docs.saltstack.com/en/latest/ref/pillar/all/salt.pillar.stack.html#merging-strategies). When writing formulas, the author can choose the merging strategy of the [`salt.modules.config.get`](https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.config.html#salt.modules.config.get) calls but then the user must override some formula files to choose something else. I want to be able to define fine-grained merging strategies for my config, pillars, grains, … directly in the data (not in the code using the `merge` parameter of `salt.modules.config.get`). For the context, in the formulas community, we are looking for [minimizing the use of pillars](https://github.com/saltstack-formulas/template-formula/pull/186) since it can be quite costly on the master (this is a common complain against the formulas which abuse of pillars). This formula proposal use `salt.slsutil.merge` to merge the values from different YAML files and it support a per YAML merging strategy with the file top level key `strategy` to configure `salt.slsutil.merge`, for example:  With more fine-grained merging policies. I think it's better to implement this in `salt.utils.dictupdate` to make it useful to `salt.slsutil.merge` too (and we could use it in our [proposal](https://github.com/saltstack-formulas/template-formula/pull/186)) Regards."
saltstack/salt,https://github.com/saltstack/salt/issues/13014,saltstack_salt_issues_13014,"NameError: global name '__active_provider_name__' is not defined

Several versions back, I was able to execute the following without problems:  Strange enough, cloud.list_images or cloud.list_sizes still work fine.",Which cloud driver are you using?,Openstack
saltstack/salt,https://github.com/saltstack/salt/issues/9311,saltstack_salt_issues_9311,"Multi-level master with syndic problem

how to make sure the high availability of the multi-level master with syndic。In my environment，we use one first level master and four sencond level master，how to config this cluster to avoid the abnormal down of these masters，thanks a lot！",Can you please elaborate on the problems you're having? What are the failures you are seeing? What version of salt are you running?,"Thank you for the reply, our master version is 0.15.3 our minion version is 0.16.4 We use auto_accept between the second master and minions Each of our second level master has about 1000 minions. Last week, One of the second master had been powered off by some reason. All the minions under that master can not be controlled for a period of time.This is very terrible. if we use master with version over 0.16.0,Multi Master is not suitable the syndic environment,because if we send a command in the first level master , the minion may run twice I think (I guess,without test )"
saltstack/salt,https://github.com/saltstack/salt/issues/9438,saltstack_salt_issues_9438,"Failed to load grains defined in grain file core.os_data

",What version of salt are you running? (`salt --versions-report`),"salt --versions-report  When I ran cmd ""service salt-minion start"" , I got the error Other information: Ubuntu 12.04.3 LTS \n \l Linux version 3.2.0-54-virtual (buildd@roseapple) (gcc version 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) ) #82-Ubuntu SMP Tue Sep 10 20:31:18 UTC 2013"
saltstack/salt,https://github.com/saltstack/salt/issues/9314,saltstack_salt_issues_9314,"__pillar__ is not updated after saltutil.sync_all

After changing the pillar definition and running 'saltutil.sync_all' the **pillar** dictionary is not updated. This affects the modules that use it. However 'pillar.items' shows that the change has been made. restarting updates **pillar** I have also commented the same on a related issue 8543.",What version of salt are you running?,master 17.1 and minion 17.2
saltstack/salt,https://github.com/saltstack/salt/issues/24761,saltstack_salt_issues_24761,"Stack trace on highstate (missing file + recursive requisite)

I ran into a stack trace (instead of just an error message), today. I suspect the intended behaviour is to have salt capture this exception instead of dumping it. I've boiled my states down to just a `top.sls` plus one `.sls`: ## top.sls ",What is your salt --versions-report output?,"I'm using the Debian Jessie package (`2015.5.0` + patches). Perhaps they broke something (or maybe actually fixed in `2015.5.1`).  I'd try 2015.5.1 myself, but I couldn't get bootstrap to work on Jessie (I believe because [systemd is looking for a notify](https://github.com/saltstack/salt/blob/develop/pkg/salt-master.service#L7), but there's no `python[2]-systemd` on Jessie)… but that's a separate issue."
saltstack/salt,https://github.com/saltstack/salt/issues/9421,saltstack_salt_issues_9421,"Cannot shutdown desktop Linux Mint system when salt-minion daemon is running.

This occurs on Linux Mint 14 and 16 MATE edition. If the salt-minion is running, and you're the only person logged in from the desktop, and you try to use the shutdown item from the desktop (Menu -> Shut Down then 'Restart' or 'Shut Down') the system will log out, but will refuse to shut down without an admin password, giving the following message: ""System policy prevents stopping the system when other users are logged in"" I've worked around this on my Mint 16 system: 1st: Stopping salt-minion with  3rd: Reboot",How are you installing Salt on your Mint systems? I don't see a Salt package in the official Mint repos. Are you using Ubuntu packages or using Salt bootstrap?,"Hi. I installed it using the develop branch of salt-bootstrap. Used the defaults, no extra switches or arguments. On mint 16 It installs the Ubuntu saucy deb package through apt, and on 14 the quantal package."
saltstack/salt,https://github.com/saltstack/salt/issues/19949,saltstack_salt_issues_19949,"salt-ssh '*' state.sls fails to run...

Given, <pre> # salt-ssh --versions-report Salt: 2014.7.0 Python: 2.7.6 (default, Mar 22 2014, 22:59:56) Jinja2: 2.7.2 M2Crypto: 0.21.1 msgpack-python: 0.3.0 msgpack-pure: Not Installed pycrypto: 2.6.1 libnacl: Not Installed PyYAML: 3.10 ioflo: Not Installed PyZMQ: 14.0.1 RAET: Not Installed ZMQ: 4.0.4 Mako: 0.9.1 </pre> When I run state.sls <pre> # salt-ssh 'foo' state.sls avahi -lerror Exception AttributeError: ""'Terminal' object has no attribute 'pid'"" in <bound method Terminal.__del__ of <salt.utils.vt.Terminal object at 0x7f0815eae510>> ignored foo: An Exception occurred while executing state.sls: I/O operation on closed file </pre> running regular modules seems to work fine. The avahi state that i have just installs a few packages and enables the services. update: state.highstate also produces the same error for me. It looks like this is a regression and it may relate to https://github.com/saltstack/salt/pull/19202",How did you install salt-ssh and what distribution are you running on?,@rallytime I'm running this on ubuntu precise (latest updates and all) on the x86_64 platform. I've installed salt-ssh and friends from the saltstack ppa's It occurs on the my two salt masters which are distinct and on separate networks with different configs.
saltstack/salt,https://github.com/saltstack/salt/issues/9692,saltstack_salt_issues_9692,"traceback on insufficient arguments to a mine.get

$ salt-call mine.get dev-bastion [ERROR ] An un-handled exception was caught by salt's global exception handler: TypeError: get() takes at least 2 arguments (1 given) Traceback (most recent call last): File ""/usr/bin/salt-call"", line 11, in <module> salt_call() File ""/usr/lib/python2.7/dist-packages/salt/scripts.py"", line 77, in salt_call client.run() File ""/usr/lib/python2.7/dist-packages/salt/cli/**init**.py"", line 303, in run caller.run() File ""/usr/lib/python2.7/dist-packages/salt/cli/caller.py"", line 135, in run ret = self.call() File ""/usr/lib/python2.7/dist-packages/salt/cli/caller.py"", line 78, in call ret['return'] = func(_args, *_kwargs) TypeError: get() takes at least 2 arguments (1 given) Traceback (most recent call last): File ""/usr/bin/salt-call"", line 11, in <module> salt_call() File ""/usr/lib/python2.7/dist-packages/salt/scripts.py"", line 77, in salt_call client.run() File ""/usr/lib/python2.7/dist-packages/salt/cli/**init**.py"", line 303, in run caller.run() File ""/usr/lib/python2.7/dist-packages/salt/cli/caller.py"", line 135, in run ret = self.call() File ""/usr/lib/python2.7/dist-packages/salt/cli/caller.py"", line 78, in call ret['return'] = func(_args, *_kwargs) TypeError: get() takes at least 2 arguments (1 given)","Can you please provide version information, as noted [here](https://github.com/saltstack/salt/blob/develop/Contributing.rst#bugs)?","$ salt --versions-report Salt: 2014.1.0-274-gfab35cd Python: 2.7.3 (default, Sep 26 2013, 20:03:06) Jinja2: 2.6 M2Crypto: 0.21.1 msgpack-python: 0.1.10 msgpack-pure: Not Installed pycrypto: 2.4.1 PyYAML: 3.10 PyZMQ: 13.0.0 ZMQ: 3.2.2"
saltstack/salt,https://github.com/saltstack/salt/issues/9882,saltstack_salt_issues_9882,"Permission denied: 'c:\\salt\\var\\cache\\salt\\minion\\highstate.cache.p'

I seem to get this error when running this command: salt 'admatriusy02c' state.sls npp error: [WARNING ] The minion function caused an exception: Traceback (most recent call last): File ""salt/minion.py"", line 722, in _thread_return File ""salt/modules/state.py"", line 382, in sls File ""salt/utils/__init__.py"", line 930, in fopen IOError: [Errno 13] Permission denied: 'c:\salt\var\cache\salt\minion\highstate.cache.p'","Can you try stopping your minion, deleting that cache directory, and restarting the minion to see if that solves your issue?","for some reason, this only worked when I did that the 2nd time, but at least, it seems to have fixed the issue. Thank you.."
saltstack/salt,https://github.com/saltstack/salt/issues/10740,saltstack_salt_issues_10740,"salt-minion.upstart on centos 6.5

After reboot, salt-minion installed via bootstrap is not started. In order to make it work, I need to change the upstart entry from:  to: `start on (runlevel [2345])` (Running a centos 6.5 box under vagrant)",What version of salt is this?,salt 2014.1.0-2118-g2adbe06
saltstack/salt,https://github.com/saltstack/salt/issues/16556,saltstack_salt_issues_16556,"ImportError from a custom module

I created 2 custom modules and when trying to import parts from one of them, I get ImportError  Module functions are not accessible. This bug recently appeared with a pull from git (salt 2014.7.0-792-g91f3326), it used to work with a previous commit (salt 2014.7.0-291-gfbc61d2). Custom modules didn't changed after the pull.","Can you verify? Also, you should be using the `__salt__` dictionary for cross-calling salt modules, not importing them directly.","It doesn't work even with empty modules which only import built-in libs. On Oct 10, 2014 6:14 PM, ""Colton Myers"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/15716,saltstack_salt_issues_15716,"Salt on Oracle Linux 5 not detecting OS correctly, reporting as RHEL

This works as expected on our OL 6 systems however all of our OL5 systems are showing up as RHEL.  This is breaking some of our SLS files where we use the os grain to determine what yum repositories a system should get.","What does `python -c 'import platform; print(platform.linux_distribution())'` give you? If this data is incorrect, we may also encourage you to file an upstream bug with Python to resolve this.","It does appear that is reporting as redhat [root@oraintegration01 (oraintegration) ~]# python -c 'import platform; print(platform.linux_distribution())' ('Red Hat Enterprise Linux Server', '6.4', 'Santiago')"
saltstack/salt,https://github.com/saltstack/salt/issues/30925,saltstack_salt_issues_30925,"2015.8.5 explodes if salt-call is mistakenly not run as root

Hey all, this issue with the pki dir has been around for a while (#29701) and the solution was to add a `mkdir` to the packages. This now is presenting itself again but in an unexpected way. Any how, if you run `salt-call test.version` you will be presented with:  I know I was using the wrong credentials, but surely that shouldn't descend into a massive loop of output.",Do you have permissions to write to /var/cache/salt/minion/proc/20160205083618949955 ? local: 2015.8.5 ```,@ssgward yes it looks to be the same issue. Although I think at it's base is something to do with the comments in #29701. In #29701 a bandaid was placed on a wound to fix the issue in the packaging by making sure the `pki` dir is there. However it now appears the original issue in that ticket that wasn't resolved has presented itself again in another form.
saltstack/salt,https://github.com/saltstack/salt/issues/33784,saltstack_salt_issues_33784,"Minion did not return. [No response]

Hi, We've upgraded recently to 2015.8.10, and now we're forever seeing: ",Did you just upgrade the minions or did you upgrade the master as well? The master should always be upgraded first.,"Yes we upgraded all the instances, they are all running 2015.8.10. We've even shut all the salt minion's and master down, removed all the pki dirs and started the master and then all the minions so they would re-register. This helped for a little while, but then it has all gone to bad again. We're starting to see an issue where the ""find_jobs"" call watching the event bus with `salt-run state.event pretty=True` will take a _long_ time to return. We've even tried adjusting the time out, but it looks like the minion is running jobs synchronously so it will not return a `test.ping` for example if another job is running (including a find_job). It's very weird. eg. a test.ping will run, the minion will get the job, it will pause for some reason (unknown at this stage), a ""find_job"" event will be raised targeting the minion, the ""No response"" error will pop out from the salt call, then on the event bus there will be the test.ping event followed straight away by the ""find_jobs"" event response."
saltstack/salt,https://github.com/saltstack/salt/issues/18648,saltstack_salt_issues_18648,"Master failing to send jobs to Minions after saltutil.refresh_pillar

We've had a problem since upgrading to 2014.7.0 that after longer period of time of the minions being online they become non-responsive after sending them a saltutil.refresh_pillar. This is affecting about 70% of our minions. The good thing is that these minions are always the same on which ones return and which ones don't. Here is how we can reproduce the issue: 1) Start up the master & minions, let them be running for several hours. 2) Perform a `salt \* saltutil.refresh_pillar -v` - This runs fine and returns for all the minions. 3) Perform a `salt \* test.ping -v` - Only 30% of our minions will return this. These minions will no longer respond to commands. What is even more crazy is the job id won't show up in the cache. The test.ping doesn't show up in the minion's log. I've reviewed the master's log and nothing stood out to me. So I'm willing to try some other debugging methods and what not, just at a point where I need some help diagnosing what is going on. /cc @UtahDave @whiteinge",Could I see some debug logs for one of the affected minions from the point at which you send the refresh.pillar through the test.ping?,
saltstack/salt,https://github.com/saltstack/salt/issues/11378,saltstack_salt_issues_11378,"user.present throws an error, if user gets additional groups assigned via ldap

Hi, when I have ldap enabled in /etc/nsswitch.conf and try to use user.present it always fails, because that user I try to manage gets additional groups assigned via ldap. When I disable ldap in nsswitch.conf the state runs fine without any error. Related part of my statefile  Related part of my nsswitch.conf `# grep ldap /etc/nsswitch.conf passwd: compat ldap group: compat ldap`",Can you try that?,Thanks! That solved my problem. Wondering why I didn't find that parameter before :/
saltstack/salt,https://github.com/saltstack/salt/issues/12600,saltstack_salt_issues_12600,"Feature: file.managed option to remove empty lines

Hi, for example I have a file that's completely generated from within a file.managed and a jinja template and therefore contains > 100 empty lines which makes it harder to verify it's contents. Currently I use a ""cmd.run sed -i '/^$/d' ....' to achieve my desired result. So I think it would be nice to have an option for file.managed to automatically remove completely empty lines from that file. What do you think about that? Regards",Why not just use `file.replace`? ,"Your example simply removes all linefeeds, I was just looking for a ""cleaner"" solution. But my current  works for now, so I'll keep that."
saltstack/salt,https://github.com/saltstack/salt/issues/16085,saltstack_salt_issues_16085,"memoey leak or else?

Executing 53 commands per min thorough sat rest api. I can see 1-2 MB memory increment per min. It might be related to #11384. It very strange no one reported or i am doing something strange. I tried to debug but no luck. and i am stuck now. :(:( Total minnion: 15 ![mem](https://cloud.githubusercontent.com/assets/1314627/4384996/7552dbba-43be-11e4-93ca-3b13788f9a1c.png)  Let me know if you guys need more info.",Whats the exact command you are publishing?,"Using netapi with cherrypy no separate webserver.. for now i am using test.ping, service.status one custom module for disk space check(using psutil). Basically monitoring system (icinga2) initiate api call to salt rest api."
saltstack/salt,https://github.com/saltstack/salt/issues/9735,saltstack_salt_issues_9735,"salt-ssh doesn't see states from gitfs source

",What version of salt are you using?,Last stable: 0.17.4
saltstack/salt,https://github.com/saltstack/salt/issues/9736,saltstack_salt_issues_9736,"minion not returning, apt-get defunct

I am using SaltStack 0.17.4 on Debian 7.3 for master and minion with great success, but have run into a problem. Running ""salt-call -l debug state.highstate"" on the minion is successful, but when running ""salt 'host' state.highstate"" from the master, or using the daemon with ""startup_states: highstate"" on the minion causes apt-get to become defunct, and I suspect one of the package scripts might be causing this. I am trying to install Proxmox VE as per http://pve.proxmox.com/wiki/Install_Proxmox_VE_on_Debian_Wheezy and have traced the problem to the following section in my state file:  Any thoughts?",Can you show us the error messages plus minion debug log?,"Unfortunately I could not find any error messages per se, since the minion never returns, but the output of ""salt-call -l debug state.highstate"" (which works) is available at https://gist.github.com/jakwas/8450721"
saltstack/salt,https://github.com/saltstack/salt/issues/11160,saltstack_salt_issues_11160,"Cassandra driver will not import into external pillar

We are using the cassandra_driver-1.0.0b7-py2.6 code installed to /usr/lib64/python2.6/site-packages/ on RHEL 6. This works fine in stand-alone python scripts and if imported into an execution module running under salt 2014.1.0 using the following syntax:  However, it does not import into an external pillar we are trying to write but gives the error: ImportError: No module named cluster",Can you check that your external pillar matches the case of your execution module?,"The external pillar and the execution module have the same basic module import, connection and query execution code which is as follows:  In the execution module it loads the cassandra drive OK and runs the query while in the external pillar it gives the error listed above."
saltstack/salt,https://github.com/saltstack/salt/issues/37599,saltstack_salt_issues_37599,"Minion list match does not support globs as per documentation

### Description of Issue/Question According to https://docs.saltstack.com/en/latest/topics/targeting/compound.html, the ""-L"" option would appear to allow globs in the minion list. Assuming minions called foo1, foo2, bar1, bar2, baz1 and baz2 the following commands should match foo1, foo2, bar1 and bar2 but they do not: ",Would you mind submitting a pull request with an addition of how you think that the extra documentation that you think should be added to better describe it?,Where would that be in the fileset?
saltstack/salt,https://github.com/saltstack/salt/issues/9790,saltstack_salt_issues_9790,"salt-ssh complains that it needs python 2.6 or better when executing salt functions even when the target host has python 2.7 installed

I have 4 target hosts in my roster file. Commands using `--raw` work fine. But salt functions give an error. These are all `centos 5` systems. I noticed `python26` packages got installed as dependencies when installing `salt-master` package. ","Don't know if it's relevant, but what does `sudo salt-ssh --raw test* 'which python'` return?",I think that might be the problem. Seems like python 2.4 is the system default python. But I would not be able to change this without affecting the rest of the system. Any workarounds? 
saltstack/salt,https://github.com/saltstack/salt/issues/9858,saltstack_salt_issues_9858,"Add functions to salt to bootstrap minions using salt-ssh

`salt-ssh` is a great addition to salt and one of the things that first comes to mind as a use case is to deploy a salt-minion using `salt-ssh`. It would be great if salt included functions that would deploy a minion using `salt-ssh` pointing to the current host from which the `salt-ssh` command is issued as the salt-master by default. e.g. something like  This should make deploying salt-minions and getting a salt cluster up and running very easy and straight forward.","Does Salt Cloud not serve your need? http://docs.saltstack.com/topics/cloud/ In particular, the `saltify` driver should do it.",Would Salt cloud work even if we have our own custom cluster that is not one of the salt cloud providers ?
saltstack/salt,https://github.com/saltstack/salt/issues/9805,saltstack_salt_issues_9805,"Minion Environment Is Being Ignored

Basically I have two environments configured and I have my minions isolated via their configuration file to a specific environment. However when I run state.highstate, minions match up to both top.sls files that reside in different environment definitions. dev/top.sls  I have minions whose configuration specifically have environment: test and environment: dev, according to the docs it should isolate them to a specific environment on the master, the behavior indicates otherwise. Current workaround is to use compound matching and to set the grain environment:dev and then always do 'G@environment:dev|testing' in all my top.sls definitions. Salt version: 0.17.4",Can you elaborate on the behavior that is making you think otherwise?,"Basically using my example above, the dev/top.sls and the test/top.sls file, change the '*' to 'role:webserver' in each and set - match: grain, basically what happens is that I get a collision it tells me that all states have to be globally unique, and my minions that have that have the webserver role grain have their environment set to test and dev respectively in their config files."
saltstack/salt,https://github.com/saltstack/salt/issues/16784,saltstack_salt_issues_16784,"state.sls should default to minion's environment

When running the state.sls command, it should by default use the minion's environment, and fall back to the base environment only if there is no environment set in the minion's configuration. This is somewhat related to my issue regarding startup states. (#13129)","Did it work correctly prior to that point? If this is a regression that was introduced around that point, it might be easier to track down.","@cachedout unsure, that is the first version I installed, and its always behaved this way, but always defaulting to `base` no matter what the minion's environment is."
saltstack/salt,https://github.com/saltstack/salt/issues/16860,saltstack_salt_issues_16860,"salt-cloud 2014.7.0rc5 requires a certain requests library (not sure what version)

Honestly not sure what version it requires exactly. I was running 2014.1.0rc3 and then upgraded to 2014.7.0rc5 using the bootstrap script and the git option to install the rc5 tag. This did not upgrade the pip requests library, so when I ran salt-cloud I was getting errors about objects not having certain attributes when talking to ec2. Installing requests 2.3.0 fixed this for me.",Do you have copies of those errors so that we can look into it?,"I don't unfortunately, my scrollback doesn't go back far enough anymore. If you install 0.8.3 of requests, and use salt-cloud you'll see the errors right away. What I do remember is that around like 345 of ec2.py with respect to Response.text, text is not an attribute of Response object."
saltstack/salt,https://github.com/saltstack/salt/issues/17146,saltstack_salt_issues_17146,"Minions seem to randomly loose connection to master

**Version: 2014.7.0.rc5** Unfortunately I do not have any cold hard facts or errors or anything of real substance to add to this ticket, except that I've had about a dozen minions just stop communicating with the master. There is absolutely no errors in the logs on either the master or the minion. A restart of the minion service corrects the problem. I have noticed that almost every minion I've had to restart the last few long entries look like this ..  Everyone I've noticed this happen to has the handling event pillar_refresh I have also attempted to SIGUSR1 the process to get a stack trace but the process isn't hung as far as I can tell and the logs just state that it is stopping in the logs and that is it. I realize this is not much to go on, but its a recurring problem.",Could you add the output of `salt --versions-report`? This sounds like it may an issue with an outdated version of ZMQ.,"It is happening multiple times but it has yet to repeat itself on the same minion, and it seems to happen very much at random. "
saltstack/salt,https://github.com/saltstack/salt/issues/17180,saltstack_salt_issues_17180,"Salt Event JSON Data Not Escaped When Nested In Event JSON

**Version: 2014.7.0rc5** When you send an event to the master and it contains data that is JSON like all the documentation gives examples of doing, it does not get escaped properly before being nested in the event that is put on the event bus. Example Command: `salt-call event.fire_master '{""mydata"":""otherdata""}' 'some/event/to/fire'` Example Event from Event Bus:  Python JSON parsers die on the normal event data sent on the event bus because it isn't escaped properly.",Do you have a reactor set up for that event tag perchance?,"@whiteinge you can disregard, it was improper handling on my part with the python salt event library."
saltstack/salt,https://github.com/saltstack/salt/issues/41157,saltstack_salt_issues_41157,"salt-run returns missing success field

### Description of Issue/Question When using `salt-run` to execute a `runner` it is missing the `success` field in the underlying data, so when using a returner such as `mysql` the `success` field is always *False*. ### Steps to Reproduce Issue Just inspect the underlying data of any job ran using `salt-run`. Example below ... ",Can you explain to me how you are using a returner with the runner though? I did not know that was a possibility.,@Ch3LL I am just using the mysql returner globally in the master config so that all jobs are recorded for auditing and alerting on failures. 
saltstack/salt,https://github.com/saltstack/salt/issues/51950,saltstack_salt_issues_51950,"Scheduled state.sls Using Random Pillar Env

### Description of Issue/Question It could very well be a configuration issue, but I'm not sure were to start. I noticed it happening in the last week or so. Basically it appears that the scheduled job uses the wrong pillarenv, even worse is that it seems to use a random one? I've reviewed my minion logs and I cannot find any reference to the incorrect pillar env, but I can most definitely see the wrong config file being generated with incorrect data via the debug logs. Running the command from `salt-call` reverts everything to their properly value, so this seems to be limited to those that run on a schedule? ### Setup #### SLS ",Can you provide how your pillar environments are mapped? This will be helpful is trying to reproduce this particular issue.,
saltstack/salt,https://github.com/saltstack/salt/issues/9822,saltstack_salt_issues_9822,"installation on OS X 10.6.8 with pip don't work

i installed the dependencies with macports and salt with pip like described in the documentation: http://docs.saltstack.com/topics/installation/osx.html but the default configuration is not installed and the binarys can't get started with thair name directly. ",Does salt run if you create `/etc/salt` with the correct permissions? You could also pull the sample config files from the salt repo if you want.,"i created `/etc/salt` und start the minion as root with the full path. that works. i have not created any configuration, it found my master.  how to get a clean and working installation on OS X? would be great if the bootstrap-script works with OS X (10.6.8)! https://github.com/saltstack/salt-bootstrap/pull/102"
saltstack/salt,https://github.com/saltstack/salt/issues/13793,saltstack_salt_issues_13793,"Bug: postgres module does not work with AWS PostgreSQL RDS

I have problems running the following state against AWS RDS ","What version of salt are you running? (`salt --versions-report`) Also, could you please create another issue to handle your feature request for the additional flags? Thanks!","Sorry, somehow skipped my mind. Here you are: "
saltstack/salt,https://github.com/saltstack/salt/issues/14276,saltstack_salt_issues_14276,"Windows minion custom grain returns wrong value

Hi, I'm trying to get my custom grains working, but this seems not to work. Custom grain:  when exectuing this state locally on the minion by calling `salt-call state.sls ...` it is working fine... and if I request the grain by calling `salt-run grains.get prodenv_code_is_write_protected` i also get `False` and when calling it localy i get `True`. I'm not sure whats happening here.",Does restarting the minion make it start resolving to True?,"I think you are right. I retried it today and now it workes. I really don't know what happend yesterday but it seems, that the sync_all did not work. I will close this issue and if it happens again i will reopen it :)"
saltstack/salt,https://github.com/saltstack/salt/issues/30250,saltstack_salt_issues_30250,"npm.bootstrap state runs even when test=True

Title captures it all... ran test=True, and it actually installed packages. Code for npm bootstrap at https://github.com/saltstack/salt/blob/develop/salt/states/npm.py#L263 never checks **opts**['test']. Not good.",Can you also post what version of salt you're using here?,"Was working with the head of 2015.8 branch using salt-ssh. (Not 2015.8.3 because there's a bug we're working around that's fixed on HEAD). That said, from code inspection, it looks like it affects it even in 2015.8.3."
saltstack/salt,https://github.com/saltstack/salt/issues/17585,saltstack_salt_issues_17585,"Latest release requires `tar_options` be supplied when seemingly unnecessary.

When extracting a standard `tar.gz` file using `2014.1.13` the archive state currently requires that `tar_options` be supplied. I believe it was previously decided that this option should not be a default requirement. The upcoming `2014.7.0` release allows tar files to be extracted without it being supplied. ",Can you clarify if there's still breakage in 2014.7?,"I thought that may be the case, I will close this up. Right now 2014.7.0 works with or without tar_options being supplied. Things do break if only `v` is supplied to tar_options... which is what I was previously doing to ensure that 2014.1.13 worked. Though that now seems to be tar itself complaining about invalid options supplied. I think the confusion is just caused by my use of the english language :P"
saltstack/salt,https://github.com/saltstack/salt/issues/19823,saltstack_salt_issues_19823,"Getting pillar error while not using pillar data.

I am using GitFS in masterless mode with the latest release cut `2014.7.1`. Here is the minion file in use: https://github.com/stackstrap/install/blob/master/files/minion Here is the gitfs repo: https://github.com/stackstrap/environment I get this error when running `salt-call state.highstate`...  I don't really understand because there is no pillar involved. I may just be missing something glaring. Here is the full log: http://pastebin.com/912V11Cw",How did you install salt? Was this working previously and is now now longer working?,So basically it works if the `top.sls` file is part of the `file_roots` on the masterless system. I can bring in the rest of the states via `gitfs` and they run fine that way. Only when I move the `top.sls` file to live in one of the `gitfs` repos does the error occur. It is not a huge deal... I just thought it would be nice to be able to pair different repos in the minion config to get different results. Kind of a `flow` based configuration style. Salt is being installed with the `salt-bootstrap` script.
saltstack/salt,https://github.com/saltstack/salt/issues/18260,saltstack_salt_issues_18260,"MySQL Grants state is unable to apply multiple grants statements

The MySQL Grants state is currently rendered useless by this bug. If you have this state.  Note that it's saying that tableB is already present. It's not and it hasn't applied the grant yet it will continue to say that. The same problem would occur for a tableC, tableD... I looked into why this is happening. When salt checks to see if the grant already exists, it is only checking against the first define table in the state (mydb.tableA) for all grants defined afterward. So for mydb.tableB, C, and so on it is verifying against mydb.tableA and says, ""Yep! It's there! Nothing to do."" I'm trying to figure out when this broke I do know that this was not a problem in 0.17.5. Imagine my surprise when I removed a user with a large number of specific permissions then had that user call me up and say they only had access to one of their tables.",Can you post the output of `salt --versions-report`?,Tested this under two versions both on CentOS6. Both are affected. Here's the version we've been using.  Again both are affected.
saltstack/salt,https://github.com/saltstack/salt/issues/22797,saltstack_salt_issues_22797,"Problem recursively expanding nested nodegroups

There is a problem where legal, nested nodegroups (added by https://github.com/saltstack/salt/commit/1c3536fb8e1b1814f6ba988efbb018bc98b7066f) will be marked as a violation. I have a solution - I just wanted to leave a note that a fix is on the way.","Should this issue be closed once your second pull request is merged, or does more work need to be done here?","This will be complete when https://github.com/saltstack/salt/pull/22815 is merged. As an aside, this failure is not a dangerous failure - just annoying."
saltstack/salt,https://github.com/saltstack/salt/issues/10304,saltstack_salt_issues_10304,"sat.client.Caller: Exception AttributeError: MinionEvent' object has no attribute 'cpub'""

I'm testing the salt.client API with a custom minion configuration file (file_client to ""local""), and I have this: Exception AttributeError: ""'MinionEvent' object has no attribute 'cpub'"" in > ignored No issue with ""salt-call --local -c configfile""",Will you please paste the full traceback?,
saltstack/salt,https://github.com/saltstack/salt/issues/13187,saltstack_salt_issues_13187,"multi master mode, saltutil.refresh_pillar gets stuck in loop

on latest salt release run: salt minionname saltutil.refresh_pillar check the logs... seems like the pillar keeps refreshing every second or 3...","Can you give us a little more information? `salt --versions-report` on the master, `salt-call --versions-report` on the minion, as well as OS information?",
saltstack/salt,https://github.com/saltstack/salt/issues/16106,saltstack_salt_issues_16106,"pillars cant render jinja: from vars.jinja import with context 

when my pillar has:  I then have to `service salt-master restart` and comment out the jinja import to regain a stable pillar tree. I think this was working in a different build... im not sure what commit broke it.",What version of salt?,"Latest develop branch On Sep 24, 2014 6:02 PM, ""Colton Myers"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/16356,saltstack_salt_issues_16356,"cloud destroy looks risky, 

cloud destroy is risky becaus when adding new providers its quite possible that two providers have items with the same name. It would be best if the cloud.destroy method had an optional argument for the provider.",Do you have any thoughts on this?,Its a transisition issue.. many container names are not nice fqdn... im sure we will have overrlap. adding in this arg should not break functionality. It would just safe gard providers from accidental vm destroys. This probblem is evident for us because we have multiple virtual machine solutions deployed throughout our infrastructure in separate departments... I have to be sure its safe for them to jump onto the salt train.
saltstack/salt,https://github.com/saltstack/salt/issues/16473,saltstack_salt_issues_16473,"cloud.present code should be more state full

cloud.present code should be more state full. using the onlyif, unless args is a /hack job/ It should first check if the VM exists before running the cloud.create salt module. also I dont see a smiple way to find if vm is existing... so should also have cloud module function has_instance... somthing like.  This cloud stuff is nice and all... but the states and salt modules seem to be /second-class/ an after thought.",Would you like to be involved in speccing out cloud statefulness?,"I'll push out some patches today that resolve the issues I have with state cloud.present and absent. Other statefullness items like what host, folder resource pool the instance is in, is out of scope. no thanks, no time :)"
saltstack/salt,https://github.com/saltstack/salt/issues/16512,saltstack_salt_issues_16512,"cloud vsphere list_nodes_min fails to resolve many vm names

list_nodes_min fails to resolve many vm names. ","Will this necessitate using a function other than `get_registered_vms()`, or do you think it can be entirely cleaned up in parsing?","Yes close. On Oct 9, 2014 5:17 PM, ""Joseph Hall"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/27059,saltstack_salt_issues_27059,"support for file.managed with blockreplace , accumulated text

It would be nice if we had support for managed files with blockreplace. Currently I have to use accumulated and some jinja... like: `{{ '\n'.join(accumulator.get('accumulator', [])) }}` with a sls file like this:  See block-replace cant append to the file because it does not exist yet. What would be nice to see happen is this block be held in memory and applied to the managed file after rendering template code.",Can you add more detail on how what you are proposing cannot be accomplished by blockreplace? Thanks.,@jfindlay added a little extra to the original comment.
saltstack/salt,https://github.com/saltstack/salt/issues/51062,saltstack_salt_issues_51062,"file.blockreplace is not using template when contents are user defined

`file.blockreplace` is not using template when contents are user defined. this works with `file.managed` and I find it really helpful. a state like ",What version are you seeing this issue in?,"That is dev and likely all versions. On Mon., Jan. 7, 2019, 7:17 p.m. Gareth J. Greenaway < notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/10280,saltstack_salt_issues_10280,"/etc/hosts parse error on blank line

Hello, It looks like version '**saltstack_version** = SaltStackVersion(0, 17, 4)’ as provided via the latest bootstrap script on Gentoo unstable has a bug. I looked at the config.py development version and the error still seems to be there, though on line 1697 instead of line 744. salt-minion parses /etc/hosts and explodes on an empty line (popping a value from the list where the value is an empty line). The step to reproduce is easy, put an empty line in /etc/hosts. Here is the stack trace.  Cheers, -Dan",Would you be willing to submit a pull request?,"I've never done this before though would be more than happy to do so. It might take me to the end of the weekend to be setup, but you'll receive my pull request no later than Sunday."
saltstack/salt,https://github.com/saltstack/salt/issues/19013,saltstack_salt_issues_19013,"when matching by minion_id i reach a limit 

i match my envs listing the minion_id on the top file, it was ok until it grow. now when i try to run salt-call on the minion jinja throws and error and fails this is the partial, output of salt-call -l debug state.highstate on one minion regionOne is my problematic env, i still have 50 servers i haven't list on the top file here we don't use any useful naming convention, so i have to list the servers one by one :(  works on pillar, does not work on state both master and pillar are 2014.1.10-1precise1 from ppa","Could you actually open a new github issue for your second issue, so that we only have one bug per open issue? Thanks!","i will try to reproduce the pillar problem on the next days, then i will open the second bug."
saltstack/salt,https://github.com/saltstack/salt/issues/10291,saltstack_salt_issues_10291,"postgres_database docs have discrepancy between parameters passed and documented

In the documentation for the `postgres_database.absent` function it documents that _password_, _host_, and _port_ are valid arguments when in fact these should be _db_password_, _db_host_, and _db_host_ as the function actually expects.",Did your above pull req resolve this issue completely?,"As far as I can tell, yes. The change was incredibly trivial. I did notice when looking in the code there is at least one undocumented argument passed to those calls (maintenance_db or something to that effect). I thought about documenting it, but after noticing it hadn't been documented anywhere I thought it might have been excluded for a reason and I decided to just leave it as is for now. On Mon, Feb 10, 2014 at 1:13 PM, Colton Myers notifications@github.comwrote: ## zzzirk (zzzirk@gmail.com)"
saltstack/salt,https://github.com/saltstack/salt/issues/10342,saltstack_salt_issues_10342,"salt/modules/pip.py:252 still using deprecated runas

",Can we also get the output of 'salt --versions-report' please?,Something like that: 
saltstack/salt,https://github.com/saltstack/salt/issues/10360,saltstack_salt_issues_10360,"Use issuetemplate.com to make issue triaging easier.

I made a web app for the AngularJS project to help them triage their huge amounts of issues they have to deal with. I noticed your project gets a lot of issues as well and thought you could find it useful. Give it a look and feel free to ask me any questions or submit issues to the repository. [**http://issuetemplate.com/**](http://issuetemplate.com/)",Can you enforce the template or do users have to specifically go to the template instead of the issue tracker to file an issue?,"Currently you'll have to redirect them to use the template until GitHub realizes this is a great idea and they implement it themselves. However, if someone doesn't use the template (and some projects have bot accounts that can do this for them) you can simply say: Hey! I noticed you didn't use our template. Please go here to update your issue using the template: http://issuetemplate.com/saltstack/salt/{{template-name}}/{{issue-number}} And their issue content will be loaded into the ""other comments"" and they can move stuff into the right fields. Then they just click update and it will update the original issue using the template you built. Then, if you had a bot, it can assign the issue and label it automatically based on comments you have in the template or something."
saltstack/salt,https://github.com/saltstack/salt/issues/10513,saltstack_salt_issues_10513,"No file.directorycopy

It seems there is not a state to copy a directory tree on disk. This could be added either: - extend file.copy to support directories - extend file.directory to support copying",Does `file.recurse` do what you need? http://docs.saltstack.com/ref/states/all/salt.states.file.html#salt.states.file.recurse,"No, I'm looking for a minion-to-minion copy. (My actual use case is where a build takes place, then the executables are distributed to a couple of different places on disk). (Also, is it just me, or are ""file.recurse"" and ""file.copy"" not very ""stateful"" names? And couldn't they both just be subsumed into ""file.managed""? ie: make sure this file/directory is an accurate copy of whatever file/directory, wherever it came from.)"
saltstack/salt,https://github.com/saltstack/salt/issues/18958,saltstack_salt_issues_18958,"Salt minions lock up when running salt.

As per request: unpack(b) received extra data. Much to my suprise no one else has reported this. At least not that google can find. I've been getting it on all my machines since this summer. I had hoped that salt 2014.7 would fix this, but to my huge dismay it hasn't. I'm clueless on how to fix this. I can't even get it to happen predictably. basically I just turn on my test machine and let it run until it crashes. Doesn't usually take to long. here are a set of 3 logs to hopefully shed some light: http://pastebin.com/dBV9gdqL http://pastebin.com/wRCWs55y http://pastebin.com/HZZyrnbM This is a completely clean minion. Fresh operating system. The first log is from when I first started the minion to when it first crashed. You can see that I do some test pings and then I have it run highstate, it was still running that when I left for the day. but the next morning it was crashed. Appearently it crashed around 21:20. anyway. So I restarted the minion, there comes log two. I deleted the log file inbetween to keep it small. I let it run till it crashed, rebooted, took the log, rinse, repeat, log 3. So I figured I'd include --versions as that is a frequent request. Check this out: http://pastebin.com/WzrRLZpv","Do you have any returners configured? If so, does disabling them help at all?","I can try next week when I'm back in the office. But this problem had existed before I started using the MySQL returner. So with salt 2014.1.7 the returner didn't matter, but with 2014.7 I'll have to confirm next week. ~TA On Tue, Dec 16, 2014 at 10:40 PM, Mike Place notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/23340,saltstack_salt_issues_23340,"salt-ssh 2015.2.0-1187-gb224d82 requires zmq, why?

 I regenerated thin.tgz specifying zmq, but I get a different error, because zmq isn't compiled for the target system.","What do you think, @basepi?",Verified fixed in:  Though I am still plagued by #23342 on the majority of my systems. :(
saltstack/salt,https://github.com/saltstack/salt/issues/23342,saltstack_salt_issues_23342,"salt-ssh 2015.2.0rc2 fails when target doesn't have lspci available

 This was supposed to be fixed two years ago in #5627?",Will you paste the output of `salt-ssh -l trace -W --pcre server01 cmd.run hostname`? Thanks.,"OK, heavily redacted, but still long: "
saltstack/salt,https://github.com/saltstack/salt/issues/10779,saltstack_salt_issues_10779,"iptables module _parser crashes on specific tcp-flags

In my basic iptables rules I have following one: `-A INPUT -p tcp -m tcp --tcp-flags FIN,SYN,RST,ACK SYN -m conntrack --ctstate NEW -j TCP` which causes python argparse to crash, probably because of `--tcp-flags FIN,SYN,RST,ACK SYN` part which contains whitespace.",What if you were to put it in quotes?,"According multiple guides for iptables it is a valid value, also when I do iptables-save I get this output. I don't know if there is a version with no spaces, but probably no, because as I wrote this line is output of iptables-save. I already have fix, will create pull request in while."
saltstack/salt,https://github.com/saltstack/salt/issues/17245,saltstack_salt_issues_17245,"localemod does not generate locale for Arch

Hello, I have found out that if I try to use locale.present() state on ArchLinux, nothing really happens. I have looked into localemod.py module and found out that locale is acually generated only for Debian and Ubuntu, however I'm quite sure that code which is used for Debian is suitable for Arch too.",Can you provide a `salt --versions-report`?,"I was running 2014.1.13 when I reported this bug, but at this moment I'm running 2014.7.0rc7, however problem is still not resolved, so my salt --versions-report: "
saltstack/salt,https://github.com/saltstack/salt/issues/11512,saltstack_salt_issues_11512,"mysql module on windows unavailable

I'm trying to manage a mysql server running on windows. The mysql module is only enabled if it can `import MySQLdb`. Is there a way for me to install `MySQLdb` for my windows minion? Minion versions: ",Does that work?,"@basepi That did work for me. What I did: - download a windows MySQLdb-python installer; https://pypi.python.org/pypi/MySQL-python only has 32-bit installers, but I found an older 64-bit installer on http://www.codegood.com/archives/129) - install it on a windows machine that already has python2.7 installed - copy my `C:\Python27\Lib\site-packages\MySQLdb` folder into my `C:\salt\salt-VERSION.win-amd64` folder Can you point me to the files that has the text for http://docs.saltstack.com/ref/modules/all/salt.modules.mysql.html? I'll add a note and make a pull request."
saltstack/salt,https://github.com/saltstack/salt/issues/10871,saltstack_salt_issues_10871,"Allow integration with Serf instead of Zmq

[Serf](www.serfdom.io) is a service discovery and orchestration tool built on the [gossip protocol](http://en.wikipedia.org/wiki/Gossip_protocol) for p2p communication that is distributed and fault tolerant. It would allow for more robust systems that are extremely scaleable. It also could help with message broadcasting and alerting. I have not used it very much but it seems like it could be a better solution for huge server deployments that don't have a single point of failure. Just wanted to open this issue to start a conversation about it's possible uses with Salt.",Do you have any in particular?,"I am not a dev at all and am just starting with salt (coming from a Puppet and Ansible). Serf seemed like it would be a better fit for Salt than the other two products which is why I opened the ticket here. No real use case. I just like the idea of a fully distributed CM, orchestration, and monitoring system."
saltstack/salt,https://github.com/saltstack/salt/issues/10878,saltstack_salt_issues_10878,"Occasionally Source salt://xxx.conf not found 

I found that occasionally appear in version 0.17.5 ""Source file salt://xxxx.conf not found"" a problem when dealing with files. But in the master file actually exists. After the retry recovery. minion number of 20 + simultaneous synchronization states Read the fileserver/roots.py not find why there hash_file return None circumstances. Exception code ""salt/modules/file.py"" 1622 lines 1620 source_sum = __ salt__ ['cp.hash_file'](source, env) 1621 if not source_sum: 1622 return'', {}, 'Source file {0} not found'. Format (source)",Could you test with that version? If it's still an issue there we'll investigate.,Hi : i use branch 0.17 commid 84e6d168970c544ae00ec535c74665b726b57e6b. This race condition in multi-process situation?
saltstack/salt,https://github.com/saltstack/salt/issues/20240,saltstack_salt_issues_20240,"Minion did not return

# Hi ： I found salt minion 2014.7 very unstable, often not return。 I use 2014.7 commit id 3e2b366cd6f8c8bcb37eb55f59853178a0420072 ","does restarting the minion do anything? or, forcing regenration of keys for that minion (rm /etc/salt/pki/minion/*, rm /etc/salt/pki/master/minions/<that minion id>, restart master and minion and reaccept keys)?","I tried to restarting the minion, minion normal after the restart. But over time, continue to appear Minion did not return。 but salt-call command normal. @pitatus @terminalmage @thatch45 "
saltstack/salt,https://github.com/saltstack/salt/issues/27458,saltstack_salt_issues_27458,"Source not found

Hi all: Salt recent frequent occurrence, Source not found error ","Can you reproduce this on 2015.5.3, 2015.5.5, or 2015.8.0?","@jfindlay I use branch is 2015.5, commid 7a34c7742d59cc065fb856571b64d729a549fa8f My situation is the use of multiple Master's. I found that often arise when more than one master issues such as previous https://github.com/saltstack/salt/issues/20240 , seems to have been resolved now."
saltstack/salt,https://github.com/saltstack/salt/issues/11500,saltstack_salt_issues_11500,"saltutil.refresh_pillar, when called on a Sci Linux master to a Sci Linux minion, does not refresh pillar.

To demonstrate this bug, I am running on: Master: (sl 6.2) root@slprototype:/srv/salt/repositories/win>salt --versions-report Salt: 0.17.5 Minion: (sl 6.2) (Minion currently _is_ master for ease of reproduction/an attempt to narrow down the problem, but I've reproduced this on separate SL machines as well.) Salt: 0.17.5 I will be starting the master + minion, changing a pillar file, demonstrating that pillar.items displays the change while pillar.get does not (expected behavior), but then that refresh_pillar does not in fact cause pillar.get to converge with pillar.items. I will then show the proper convergence, only brought on by restarting the minion. This conflicts with the expected behavior described at http://docs.saltstack.com/topics/pillar/index.html in which pillar.raw (which pillar.get accesses) should converge with pillar.items after a refresh_pillar. Prior to running the following commands, relevant files looked as such:  It was requested in an IRC discussion about this that I post the master in -ldebug during this process. To attempt to avoid having to rebuild the entire report, I simply reproduced the behavior in the exact fashion, please find the master info below. (if you do in fact need it for the same run, I can certainly reproduce it again.) (additionally, it's rather large, so I pastebinned the lot of it; as well as eliding some unimportant but potentially private bits.) http://pastebin.com/vE7mu00C Please let me know if I can provide anything else that would be useful.","Does `salt '*' saltutil.sync_all` result in a proper pillar sync? If so, I expect this is a duplicate of #10900.","It does not. (briefly, and this time removing the THISISDIFFERENT entry from the pillar file without a restart:) "
saltstack/salt,https://github.com/saltstack/salt/issues/10951,saltstack_salt_issues_10951,"Illegal seek when file.append to a named pipe

Since 2014.01.0 `file.append` cannot be used to append to a named pipe or other special files that cannot be seeked. I think `errno.ESPIPE` should be swallowed here, too: https://github.com/saltstack/salt/blob/v2014.1.0/salt/modules/file.py#L1390 ","Did this work previously, or has it been outstanding?","Yes, prior to 2014.01.0 you could append to named pipes with `file.append`."
saltstack/salt,https://github.com/saltstack/salt/issues/51258,saltstack_salt_issues_51258,"Unicode exception in saltmaster maintenance thread in 2019.2 RC1

### Description of Issue/Question On the current RC I get the follow in the saltmaster log: ",Do you have an `id_function` set up in /etc/salt/minion on the master?,"Nope, not in either."
saltstack/salt,https://github.com/saltstack/salt/issues/11037,saltstack_salt_issues_11037,"iptables.flush fails with KeyError 'table' (version 2014.1.0)

Having this state: ",Which version of Salt are you running? We recently patched an error with mismatched braces in a couple of `.format()`s in here.,I am running Salt 2014.1.0 on Oracle Linux Server release 6.5 (based on Red Hat Enterprise Linux Server release 6.5 Santiago)
saltstack/salt,https://github.com/saltstack/salt/issues/11773,saltstack_salt_issues_11773,"infinite recursion - related to prereq and a chain of require's...

It's me again ;) I have another sample sls which is throwing an infinite recursion exception under 2014.1.0 (with fixes for #11717 and #11752 applied)... once again, the original sls I have in my setup which led to this may have a better/more conventional solution functionality-wise, but I believe the state setup in the sls below should work at a base level... Sample sls (I simplified this as much as I could while still getting it to throw the exception) which is causing the exception when run with `salt-call state.sls <state sls in question>` :  The first couple lines in that trace are the repeats, ie: loops there until the interpreter catches the max recursion... Let me know if you want/need any further info, thanks!",Does that make sense? The logic is kinda loopy.,"Confused, there shouldn't be a loop... re. point #2 in your comment, it should be ""if 'one' shows changes, 'four' should run _after_ both 'one' and 'three'""... no? Perhaps I'm missing something, but I understood prereq to imply that the pre-required state would always be run _before_ the pre-requiring state, since the pre-required state has to execute in order to determine changes or not, and the pre-requiring state doesn't know if it should run or not until after the prerequired one has been run... ? EDIT: re. test=True... I realize this will have an impact as you say on the execution/evaluation of prereq stuff... fwiw I tried this one both ways (with and without), and same difference, it errors the same both ways. But thanks for the pointer, I'll double check to make sure the real sls I'm building doesn't 'break' on test=True..."
saltstack/salt,https://github.com/saltstack/salt/issues/26217,saltstack_salt_issues_26217,"docker-py 1.2.3 breaks dockerio bind mounts

We just discovered today that, on:  I haven't looked into the cause yet, but my guess is that docker-py is somehow getting a `__repr__` from the `binds` dict that's passed into `docker-py/utils/utils.py::create_host_config()` Downgrading to docker-py 0.7.2 fixes the problem.",What version of salt are you using?,"I'm running 2015.5.2, but I'm discovering that the problem may be broader than I initially thought. When running docker-py 0.7.2, now I'm seeing  So bind mounts aren't working, but non-bound volumes are."
saltstack/salt,https://github.com/saltstack/salt/issues/11830,saltstack_salt_issues_11830,"pkg.list_pkgs reports uninstalled msi package as installed

I'm having an issue where pkg.list_pkgs picks up an msi package as still installed even though it's been successfully uninstalled. I'm seeing this with the mysql installer. <code> mysql_installer: '1.3.6.0': full_name: 'MySQL Installer' msiexec: True installer: 'salt://win/installers/mysql-installer-community-5.6.17.0.msi' install_flags: '/qn' uninstaller: 'salt://win/installers/mysql-installer-community-5.6.17.0.msi' uninstall_flags: '/qn' locale: en_US reboot: False </code>",Does it still list anything MySQL-related?,I don't see anything. Here's the output: <code> IdentifyingNumber Name Version {121634B0-2F4B-11D3-ADA3-00C04F52DD52} Windows Installer Clean Up 3.00.00.0000 {437AC169-780B-47A9-86F6-14D43C8F596B} MySQL Installer 1.3.6.0 {42B25C20-2D3F-BEE2-3627-B13CC30BDB38} CCC Help Hungarian 2011.1013.0753.12275 {479F7070-9F87-4A05-E1C3-E9B8781F75B3} CCC Help Czech 2011.1013.0753.12275 {1AD147D0-BE0E-3D6C-AC11-64F6DC4163F1} Microsoft .NET Framework 4.5 4.5.50709 {1D8E6291-B0D5-35EC-8441-6616F567A0F7} Microsoft Visual C++ 2010 x64 Redistributable - 10.0.40219 10.0.40219 {ED0D8922-7F6C-2B5C-A09A-3FE459E4DDB1} CCC Help Greek 2011.1013.0753.12275 {B4B6C5E2-7341-DEC2-75DD-DE3C5C885B50} CCC Help Norwegian 2011.1013.0753.12275 {9A853BA3-28A2-99D5-B125-75891A08D26A} ccc-utility64 2011.1013.754.12275 {87DDB284-DB4B-FC20-B78E-A66B008132BD} Catalyst Control Center Profiles Mobile 2011.1013.754.12275 {F8D6C194-6F77-F864-18E2-6EFF3BD6A18D} Catalyst Control Center Localization All 2011.1013.754.12275 {C7ECA0F4-805E-358E-09EA-DF586A547EB1} CCC Help German 2011.1013.0753.12275 {0A81E705-4FF9-DC83-302D-50F3B847F77B} CCC Help Polish 2011.1013.0753.12275 {230D1595-57DA-4933-8C4E-375797EBB7E1} Bluetooth Win7 Suite (64) 7.2.0.56 {314F6B36-C0B5-E70A-A8DC-E1A126552409} CCC Help Korean 2011.1013.0753.12275 {A9AF76B6-CC38-F234-FE9B-670439204BDA} CCC Help Danish 2011.1013.0753.12275 {9BE518E6-ECC6-35A9-88E4-87755C07200F} Microsoft Visual C++ 2008 Redistributable - x86 9.0.30729.6161 9.0.30729.6161 {4C90AC57-A494-7E1A-57A6-6B53167BDC3C} CCC Help Chinese Standard 2011.1013.0753.12275 {74257E77-412D-ACF4-C279-82936D687083} CCC Help Russian 2011.1013.0753.12275 {768C6D38-F6B8-F35C-1D4E-CE764B85B178} CCC Help Italian 2011.1013.0753.12275 {5442DAB8-7177-49E1-8B22-09A049EA5996} Renesas Electronics USB 3.0 Host Controller Driver 2.0.26.0 {E3201FB8-4969-30D4-EFC2-B153EAEA6487} Catalyst Control Center 2011.1013.754.12275 {AA6BB7D8-CD01-01CF-6380-98F856E505BD} CCC Help French 2011.1013.0753.12275 {6F9B77F8-DF26-DB18-98B6-171225AA0CDD} CCC Help Thai 2011.1013.0753.12275 {A92DAB39-4E2C-4304-9AB6-BC44E68B55E2} Google Update Helper 1.3.23.9 {EBE4F079-3395-110E-CC67-E1826AA32934} CCC Help Turkish 2011.1013.0753.12275 {C68FF4E9-C858-14E1-27B2-BEB8C3982FBA} Catalyst Control Center InstallProxy 2011.1013.754.12275 {B77EFA0B-9BD3-4122-9F9A-15A963B5EA24} Intel(R) Turbo Boost Technology Monitor 2.0 2.0.82.0 {9838502B-CB01-F07C-355E-6A99B472AF6F} CCC Help Spanish 2011.1013.0753.12275 {546DB8EB-CA28-144F-AB99-1EE2D6A47342} CCC Help Japanese 2011.1013.0753.12275 {B175520C-86A2-35A7-8619-86DC379688B9} Microsoft Visual C++ 2012 x86 Additional Runtime - 11.0.61030 11.0.61030 {710f4c1c-cc18-4c49-8cbf-51240c89a1a2} Microsoft Visual C++ 2005 Redistributable 8.0.61001 {FCA8077C-65B4-0F40-5BCF-8CACC67899AF} CCC Help Portuguese 2011.1013.0753.12275 {63A137AC-FD79-7A5E-3CD5-5605F74AB9E0} CCC Help Swedish 2011.1013.0753.12275 {4A2AFE1D-59B9-0300-0052-21BA66BB2FF5} CCC Help Dutch 2011.1013.0753.12275 {9A25302D-30C0-39D9-BD6F-21E6EC160475} Microsoft Visual C++ 2008 Redistributable - x86 9.0.30729.17 9.0.30729 {503F672D-6C84-448A-8F8F-4BC35AC83441} AMD APP SDK Runtime 2.5.775.2 {9958978D-994A-06A7-F34F-1E8276A78754} CCC Help Chinese Traditional 2011.1013.0753.12275 {57CA189D-BAEB-49BC-AE75-CE70E9B775E1} Catalyst Control Center - Branding 1.00.0000 {BD95A8CD-1D9F-35AD-981A-3E7925026EBB} Microsoft Visual C++ 2012 x86 Minimum Runtime - 11.0.61030 11.0.61030 {AA36E9DD-AFB7-E41D-21B6-E042E72FBC50} CCC Help Finnish 2011.1013.0753.12275 {EA4954FD-C685-1C7D-16F3-9BC2FD5E6BD3} AMD Catalyst Install Manager 3.0.847.0 {D4E0052F-D2F6-CC47-216E-0F98AA3D02FD} CCC Help English 2011.1013.0753.12275 </code>
saltstack/salt,https://github.com/saltstack/salt/issues/11856,saltstack_salt_issues_11856,"cmd.run -name breaks on full path

So I have this state: <code> InitialImport: cmd.run: - name: 'C:/Program Files/MySQL/MySQL Server 5.6/bin/mysql.exe --host=127.0.0.1 --user=admin --password ""{{pillar['mysql_password']}}"" --port=3306 --default-character-set=utf8 --comments < 'C:/salt/var/cache/salt/minion/files/base/mysql/Dump20140407.sql' </code> Which is giving me this: <code> Data failed to compile: Rendering SLS mysql failed, render error: while parsing a block mapping in ""<unicode string>"", line 27, column 7: - name: 'C:/Program Files/MySQL/My ... ^ expected <block end>, but found '<scalar>' in ""<unicode string>"", line 27, column 69: ... MySQL Server 5.6/bin/mysql.exe' --host=127.0.0.1 --user=admin -- ... ^ Traceback (most recent call last): File ""salt/state.py"", line 2095, in render_state File ""salt/template.py"", line 74, in compile_template File ""salt/renderers/yaml.py"", line 43, in render File ""yaml/**init**.py"", line 71, in load File ""yaml/constructor.py"", line 37, in get_single_data File ""yaml/composer.py"", line 36, in get_single_node File ""yaml/composer.py"", line 55, in compose_document File ""yaml/composer.py"", line 84, in compose_node File ""yaml/composer.py"", line 133, in compose_mapping_node File ""yaml/composer.py"", line 84, in compose_node File ""yaml/composer.py"", line 133, in compose_mapping_node File ""yaml/composer.py"", line 82, in compose_node File ""yaml/composer.py"", line 111, in compose_sequence_node File ""yaml/composer.py"", line 84, in compose_node File ""yaml/composer.py"", line 127, in compose_mapping_node File ""yaml/parser.py"", line 98, in check_event File ""yaml/parser.py"", line 439, in parse_block_mapping_key ParserError: while parsing a block mapping in ""<unicode string>"", line 27, column 7: - name: 'C:/Program Files/MySQL/My ... ^ expected <block end>, but found '<scalar>' in ""<unicode string>"", line 27, column 69: ... MySQL Server 5.6/bin/mysql.exe' --host=127.0.0.1 --user=admin -- ... </code> I've found if I use the cwd parameter and don't use the full path after -name, then it works fine. It seems to break if after -name you use the full path.",Could you re-post the corrected (with proper quoting) state? Just want to make sure we're all on the same page before we start diving into this. Thanks!,
saltstack/salt,https://github.com/saltstack/salt/issues/11170,saltstack_salt_issues_11170,"Salt-cloud 0.8.11 salt 2014.1.0 failing to create openstack VMs

I'm having a number of issues with Salt-cloud. The OpenStack implementation I am using has optional public IPs. We are currently testing with VMs with only private IPs and cannot provision them. What happens is we execute `salt-cloud -p 2_core vm.name` and the VM is created is pingable but we see the following warning appear over and over for 10 minutes and then the VM is destroyed. Errors:  Any help is greatly appreciated. This is a new production environment that we are rolling out and are extremelly blocked because of this issue. Thanks.",Can you uninstall salt-cloud 0.8.11 and confirm that the issue still exists? I would like to rule out the possibility of older code being used.,"Salt-cloud install docs don't say anything about the merge. I've uninstalled salt-cloud and salt and installed salt 2014.1.0 (salt-cloud is included) and the problem still exists. W dniu 12.03.2014 11:39, Erik Johnson pisze:"
saltstack/salt,https://github.com/saltstack/salt/issues/11224,saltstack_salt_issues_11224,"salt minion hangs when sign_in

https://github.com/saltstack/salt/issues/4199#issuecomment-37623714 I met the problem too. many minions works well, only one hangs, and minion hog cpu to 100% After starting the salt minion, it auto scheduled mine.update, and the cpu went 100% I can avoid this by tuning multiprocessing to false, and everything works fine. I straced minion, it was busy epoll_wait, which returned 1. "" SaltReqTimeoutError: Waited 60 seconds"" was logged, I thought it was throwed from sign_in Tried publish command from the master, minion did excute the job, but nothing returned to master. tcpdump the 4506 port returns nothing master and minion has the same version: Salt: 0.17.5 Python: 2.7.2 (default, Dec 26 2013, 13:19:58) Jinja2: 2.7.2 M2Crypto: 0.22 msgpack-python: 0.4.0 msgpack-pure: Not Installed pycrypto: 2.6.1 PyYAML: 3.10 PyZMQ: 14.0.1 ZMQ: 4.0.3",What OS is on that minion?,"yes, only minion hangs. It is SuSE with customized kernel."
saltstack/salt,https://github.com/saltstack/salt/issues/18362,saltstack_salt_issues_18362,"Salt 2014.7.0 Windows Minion Silent Install Error

Master: RHEL 6 running salt-master 2014.7.0 Slave: Windows 7 running salt-minion 2014.1.7 upgrading using Salt-Minion-2014.7.0-AMD64-Setup.exe retrieved on 11/19/2014 When we try to perform a silent install of the 2014.7.0 Salt-Minion on Windows systems inside our corporate firewall the installation never completes; running the installation manually results in a ""Salt Minion v 2014.7.0 Setup"" pop-up error ""VC redist package download failed: resolving hostname"". Pre-installing Microsoft Visual C++ 2008 x64 SP1 redistributable (as suggested here http://docs.saltstack.com/en/latest/topics/installation/windows.html ) does not eliminate this pop-up error (screenshot attached). ![salt-2014 7 0-install-error](https://cloud.githubusercontent.com/assets/6401385/5143317/39d9564a-7154-11e4-8ef1-192219f5595b.png) With about 150 Windows systems to upgrade this represents a pretty significant barrier for our move to 2014.7 - I was hoping that someone had a workaround or proposed solution for being able to perform a successful silent install. We have confirmed that this same error occurs on a system with no salt-minion at all, so this is not specific to upgrades.","Does the minion have access to the internet? If so, then maybe microsoft changed the url.","The minion has access to the internet, but our internal DNS servers do not resolve external hostnames (you have to go through the proxy for that). Based on the error it seems like the minion is trying to do a name lookup... Could the installer check to see if the VC redist package is already installed before it tries again? Is the minion trying to connect to the website by going through the proxy? Edit: To clarify - the minion has access to the Internet via a proxy; there is no direct connection available. There are several firewalls to navigate between the minion and 'the world'..."
saltstack/salt,https://github.com/saltstack/salt/issues/18419,saltstack_salt_issues_18419,"salt-cloud fails to run as non-root user

Post e85e2c2 (Add Salt Cloud roster) I am having the following issue with running salt-cloud as a non-root user. ",Do you normally run the `salt` command as non-root (using client ACL or somesuch) as well?,"I agree that I could open up permissions, but that seems to ignore (at least in my mind) the main purpose of being able to set `root_dir`. I don't need to run as a non-root user, although I prefer it for various reason. One being that I have multiple salt environments that I am currently working with. Thus, I want to have everything related to each environment contained within it's own set of directories. Running salt-master as non-root has, so far, worked just fine using the same `Saltfile` + config file approach."
saltstack/salt,https://github.com/saltstack/salt/issues/11273,saltstack_salt_issues_11273,"salt/crypt.py payload is being created as string instead of dict

error starting salt-minion stack trace http://pastebin.com/QJ6yfGp9 File ""/usr/lib/python2.6/dist-packages/salt/crypt.py"", line 301, in verify_master if payload['pub_key'] != local_master_pub: TypeError: string indices must be integers, not str salt-master and minion on 2014.1.0 and installed via curl -L http://bootstrap.saltstack.org | sh -s -- git v2014.1.0 on - INFO: System Information: - INFO: CPU: Feroceon - INFO: CPU Arch: armv5tel - INFO: OS Name: Linux - INFO: OS Version: 2.6.39.4 - INFO: Distribution: Debian 6.0",Can you give us the output of `salt --versions-report` please? (Or `salt-call --versions-report` on the minion),"Below is the output of the salt --versions-report salt --versions-report Salt: 2014.1.0 Python: 2.6.6 (r266:84292, Dec 27 2010, 21:57:32) Jinja2: 2.5.5 M2Crypto: 0.20.1 msgpack-python: 0.1.10 msgpack-pure: Not Installed pycrypto: 2.1.0 PyYAML: 3.09 PyZMQ: 2.2.0 ZMQ: 2.2.0"
saltstack/salt,https://github.com/saltstack/salt/issues/11274,saltstack_salt_issues_11274,"pkg error in Ubuntu 13.10 minions

From my Ubuntu 13.10 machines I get the following error since I upgraded my minions to 2014.1.0:  `python-software-properties` and `python-pycurl` are installed and up to date.",Do you have other Ubuntu minions on a different Ubuntu version that are working? Wondering if it's _just_ limited to 13.10 minions.,"Yes, I have minions with Ubuntu 12.04, Redhat and Scientific Linux. All with Saltstack version 2014.1.0 and working."
saltstack/salt,https://github.com/saltstack/salt/issues/12259,saltstack_salt_issues_12259,"file.replace performs changes even if executed with test=True

I am using the following state to mount NFS shares and switch from a backup (static2):  Which clearly shows that the nfs-fstab-no-old-static1 file.replace state actually performed changes despite the fact that the highstate run was executed with `test=True`. I consider this to be quite suboptimal behaviour and would strongly prefer if highstate runs with `test=True` wouldn't actually change anything. This is on a 2014.1.3 master and 2014.1.1 minion.","Did you verify that changes were actually made on that test=True run? @whiteinge This is your code, when you get a second can you give it a glance?","I am quite sure that some changes have been made during the test run as we lost the NFS mount on the boxes I tested on. I rolled out the actual change immediately afterwards to get the boxes back into production and can therefore not really reproduce the exact setup. I only discovered this in my ""post-mortem"" analysis and can not actually be sure that the line had been removed, but _something_ caused a umount. I will look into this in more detail next week and it would probably be preferable to have a small proof of concept for this behaviour, so I will concentrate on that."
saltstack/salt,https://github.com/saltstack/salt/issues/15696,saltstack_salt_issues_15696,"prerequisites on mount.mounted states cause infinite recursion

Hello, we use a state such as the following to ensure that a service is stopped if there are changes to a NFS mount that is used by it:  It would be great if this could be short-circuited to ""Fail"" as exceptions like that scare my colleagues who would be perfectly happy to accept `Sorry, can't tell you` as an answer.",Could you also please provide a `--versions-report`? Thanks!,I am running salt on a standard Debian wheezy installation: 
saltstack/salt,https://github.com/saltstack/salt/issues/18474,saltstack_salt_issues_18474,"mount.mounted does not update fstab if only mount options have changed

Hi all, `mount.mounted` contains the following code:  which checks if some of the mount options changed. Due to this we are running into two problems with NFS mounts that we manage. The first is that due to the ""return ret"" in the last line the change to options is _never_ persisted to the fstab because the state simply returns once it completed the option check and running `__salt__['mount.remount']`. This is really quite suboptimal and I don't quite understand why the `return ret` is necessary at this point. The second issue we run into is that for NFS mounts it is not enough to simply remount them, but necessary to unmount and then (re-)mount them. This would probably necessitate to special case NFS (and other filesystems with the same issue) at this point and we might want to consider these two to be separate issues.",Could you please give us your versions report? `salt --versions-report`,"Sure, the code was from the `2014.7` branch and versions report is:  And we added the `soft` option. The salt run completes and exits with the `Forced remount because options changed` message from state/mount.py → mounted(..) quoted above, but neither is the change performed (because NFS requires an unmount and `salt['mount.remount']` is therefore not appropriate, nor is the change in option persisted to the fstab, because of the `return ret` that causes the function to exit before the `if persist:` branch ever had a chance to do what it was meant to do."
saltstack/salt,https://github.com/saltstack/salt/issues/21977,saltstack_salt_issues_21977,"salt-ssh scan roster does not accept /32 range

When you run `salt-ssh --roster scan $SOME_IP_ADDRESS\32` to target only a single IP address no host will be matched, but it works for `\31` and smaller ranges. I added a print statement to `salt/roster/scan.py` to see targeted hosts and get the following:  I would have expected `127.0.0.1/32` to be listed as well.","Can you post the output of `salt-ssh --versions-report`, please? ping @basepi","@basepi Yeah, sorry about `\` in the title. `/32` might be redundant, but I'd like to be able to target a single host/IP address for testing purposes. I also don't really see a reason why `/32` should not be supported. I was trying out the scan roster and quite surprised that it didn't work when I tested it against a single host (didn't necessarily want to affect multiple boxes in unforeseen ways)."
saltstack/salt,https://github.com/saltstack/salt/issues/33466,saltstack_salt_issues_33466,"Offline minions are still reported as being present by the event system

### Description of Issue/Question Minions that have been stopped and are reported as offline are still being reported as being present by the presence event system. ### Steps to Reproduce Issue Accept a minion and turn on presence events by setting `presence_events: True` in the master config. Wait for minion to be reported as being present in the `salt/presence/present`. Once the minion has been listed as being present it is stopped and `salt-run manage.down` is being executed. The expectation would have been that the minion is no longer included in the list of present minions, but reported as `lost` in the `salt/presence/change` event. We do, however, see the following events:  where the minion is obviously being reported as being down, but still included in the `present` list of the `salt/presence/present` event. Conversely no `salt/presence/change` event has been fired. ### Versions Report # salt --versions-report Salt Version: Salt: 2015.8.10 Dependency Versions: Jinja2: 2.7.3 M2Crypto: Not Installed Mako: Not Installed PyYAML: 3.11 PyZMQ: 14.4.0 Python: 2.7.9 (default, Mar 1 2015, 12:57:24) RAET: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 cffi: 0.8.6 cherrypy: Not Installed dateutil: 2.2 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed libgit2: Not Installed libnacl: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.2 mysql-python: 1.2.3 pycparser: 2.10 pycrypto: 2.6.1 pygit2: Not Installed python-gnupg: Not Installed smmap: 0.8.2 timelib: Not Installed System Versions: dist: debian 8.4 machine: x86_64 release: 3.16.0-4-amd64 system: debian 8.4",Does the change event _ever_ fire? I'm wondering if it's lagged or completely broken. Also do the [manage.present](https://docs.saltstack.com/en/latest/ref/runners/all/salt.runners.manage.html#salt.runners.manage.present) or `manage.not_present` commands report the same incorrect result?,"I have not seen a single `salt/presence/change` at all, so it might very well be completely broken. But even in that case an offline minion shouldn't be listed in:  My impression is that the presence status of a minion is never updated anymore."
saltstack/salt,https://github.com/saltstack/salt/issues/33665,saltstack_salt_issues_33665,"[2016.3.0] salt-master should not set ""KillMode=process"" in unit file

### Description of Issue/Question The salt-master does not seem to restart cleanly with the current bootstrap script. If you install or bootstrap it you'll see the following in its log file and the master does not accept any connections: I verified that it _does_ install without problems directly from the repository by following the steps outlined in http://repo.saltstack.com/#debian though. You have to kill the salt-master processes explicitly to get it working again. EDIT: It might be better to report this against salt-bootstrap ",Maybe you already had salt installed on the box? Also can you ping me on the new issue in bootstrap. Thanks!,I'll do that and your procedure looks fine. Let me try to reproduce in different environments.
saltstack/salt,https://github.com/saltstack/salt/issues/34775,saltstack_salt_issues_34775,"Please allow users to disable branch environment mapping in GitFS

### Description of Issue/Question GitFS currently treats branches as environment and allows users to blacklist and whitelist env names. It would be wonderful if one could simply turn off the environment mapping altogether as nothing but pain comes from it. A `gitfs_no_env_mapping: True` setting is what I have in mind here.","How do you propose that we define environments, then? Solely through the new per-saltenv config schema (currently only in develop)? https://docs.saltstack.com/en/develop/topics/tutorials/gitfs.html#per-saltenv-configuration-parameters","That is exactly what I was thinking of, yes. It's nice that one can white and blacklist branches/environments already, but in some cases the setup would be much easier if one could disable the branch → environment mapping altogether."
saltstack/salt,https://github.com/saltstack/salt/issues/35165,saltstack_salt_issues_35165,"jobs.exit_success does not return anything

### Description of Issue/Question Running `salt-run jobs.exit_success $JID` does not appear to return any data. This might be because it checks the jobs `retcode` rather than `result` as documented in https://docs.saltstack.com/en/latest/ref/states/writing.html#return-data ### Steps to Reproduce Issue Run `salt-run jobs.exit_success $JID` for a job listed in `salt-run jobs.list_jobs`.",Will this be included in the next release of salt?,"Perfect, thank you :)"
saltstack/salt,https://github.com/saltstack/salt/issues/46775,saltstack_salt_issues_46775,"KeyError: '_errors' during highstate run

### Description of Issue/Question We are seeing the following error one *some* of our minions during a `state.apply` on all of them. Their configuration should be identical. It is also non-deterministic which minions are affected by this, in that the set of affected minions is different each time it happens.  I have, however, seen it in later (i.e. `2017.7.4`) versions also. I would appreciate any help in debugging this problem as it makes our highstate runs non-deterministic as it won't execute correctly on all targeted minions.",Can you provide the errors that you're seeing on those versions? Thanks!,Upgraded everything to `2017.7.4` and can not reproduce the problem right now. I shall re-open this issue if I run into it again.
saltstack/salt,https://github.com/saltstack/salt/issues/24568,saltstack_salt_issues_24568,"keystone.tenant_get() wraps result in dict

Hi, I've just discovered that `keystone.tenant_get()` wraps its single result in a list which is quiet annoying as one would expect something like `__salt__['keystone.tenant_get'](name=tenant)['id']`to work. Minor issue, a PR may follow. Regards, Florian",How long has the module been present and returning in that way? People may be relying on that return structure...,"I know, but currently the dict is `{'tenant name': {'id': …, 'name': …, …}` so to resolve a tenant_id you need something ugly like this:  My current code already checks if the returned dict is a one-key-dict and unwraps it. We could add the typical ""this will change in $RELEASE"" so people have some time to update their code. And some comments/`log.debug()` (or info?) stating thes lines are for backwards compatibility with … Lithium and Beryllium I guess."
saltstack/salt,https://github.com/saltstack/salt/issues/26210,saltstack_salt_issues_26210,"Use keystone.{user,password} pillar-keys in glance exec-mod

As mentioned by @whytewolf in #26099 the pillar-keys for keystone-credentials should be identical for all OpenStack-related modules. I've [got a branch](https://github.com/0xf10e/salt/tree/fix_glance_mod_cred) where I changed this but this causes strange 404s:  Couldn't figure out how this happens yet but I think we should get this fixed before Beryllium gets released.",Do you think this can be resolved within the next few days or the next week?,@jfindlay I'll try to fix this ASAP but I'm afraid it will take a few days of wading through `glanceclient` to figure out what causes the 404s. 401 I would understand when I can't use a session token acquired with the admin token for anything than keystone or something. The `_auth()` seems slightly different between the modules so one of them behaving strangely differently isn't too surprising. More tomorrow.
saltstack/salt,https://github.com/saltstack/salt/issues/28248,saltstack_salt_issues_28248,"conventions/formula.rst: ""Gather external data"" suggests unavailable jinja functionality

The `{% load_json 'path/to/json/file' as foo %}` looks awesome but while it's mentioned in [formulas.rst of the 2015.5 branch](https://github.com/saltstack/salt/blob/2015.5/doc/topics/development/conventions/formulas.rst#gather-external-data) it doesn't even work on FreeBSD 10.2 with salt 2015.8.0_1 and jinja2 2.8:  I'll add my `test*` files as comments in a minute. cc: @whiteinge",Does @lorengordon's suggestion help at all?,"Had to leave just after posting this issue but now got a similiar setup here on my laptop... And with a quick `%s/load/import` (and correct JSON, b/c it wants `""`s instead of `'`s...) and @lorengordon's suggestion works:  Awesome, this will make managing my pillar so much nicer! I'll make a quick PR for the docs in a minute."
saltstack/salt,https://github.com/saltstack/salt/issues/19813,saltstack_salt_issues_19813,"AWS EBS Volume creating/attachment fails

After creating instance with two EBS volumes configured, salt-cloud crashes. Volume vol-b51535f1 was created, but not attached to the instance. AttachVolume gets response {'Message': ""vol-b51535f1 is not 'available'."", 'Code': 'IncorrectState'}, but salt-cloud continues and crashes. Below the output: ",Can you tell us what version of salt you are running by posting the output of `salt-cloud --versions-report`?,"I just have downgraded to 2014.1.3, so that we can work again. The problem was happening with salt-cloud installed via rpm from EPEL package salt-cloud-2014.7.0-3.el6.noarch"
saltstack/salt,https://github.com/saltstack/salt/issues/12484,saltstack_salt_issues_12484,"SSH keys don't work if SELinux is enabled when not using source and if it triggers a new file

Hi, Previous issue: #2348 The above had a fix but the fix only seems to apply when using ""source"" to specify an authorised keys file. When just using the name to set a key - it does not run restorecon in set_auth_key at https://github.com/saltstack/salt/blob/develop/salt/modules/ssh.py#L473 if it generates a new file. Hopefully an easy one :) Thanks, Jason","Can you add an example state and example output, as well as version information? Thanks!",I deleted /home/jason/.ssh completely:  Note the ssh_home_t instead of user_home_t.
saltstack/salt,https://github.com/saltstack/salt/issues/11573,saltstack_salt_issues_11573,"NameError: global name 'zmq' is not defined

Situation: - You just installed `salt-minion` on Ubuntu, probably 12.04 - `salt-minion` doesn't seem to stay up - `/var/log/salt/minon` ends with: `NameError: global name 'zmq' is not defined` - `dpkg -l | grep zmq` shows: - `libzmq3` `4.0.4-1chl1~precise1` - `libzmq3-dev` `4.0.4-1chl1~precise1` - `python-zmq` `14.1.1-1chl1~precise1` Root cause: - Your `python-zmq` is too new Solution: - Figure out what's going to break when you downgrade `python-zmq` Then: - `apt-get remove python-zmq salt-minion` - Remove the `chris-lea/zeromq` PPA from your `/etc/apt/sources.list` or file in `/etc/apt/sources.list.d` - `apt-get update` - `apt-get install salt-minion`","Did you resolve your issue? I was under the impression that salt worked with the latest ZMQ, so I was interested to read your report.","I backgraded. It's not so much a problem with the `zmq` version as the package. If you dig in, the `zmq` import is failing because it's importing another module not packaged with `chris-lea/zeromq` or marked as a prerequisite."
saltstack/salt,https://github.com/saltstack/salt/issues/14386,saltstack_salt_issues_14386,"salt-ssh sudo command not working

When running a highstate using salt-ssh I get the following error:  The target VM is a Centos 6.5 server and it seems to be an issue with the sudo command syntax.",What version of salt are you using? `salt-ssh --versions-report` would be great.,"Hi,  I fixed salt-ssh (for me at least) with the following patches: https://github.com/saltstack/salt/pull/14400 https://github.com/saltstack/salt/pull/14401 https://github.com/saltstack/salt/pull/14403 https://github.com/saltstack/salt/pull/14408"
saltstack/salt,https://github.com/saltstack/salt/issues/11655,saltstack_salt_issues_11655,"ext_pillar: max recursion depth exceeded

using develop branch:  i'm running salt like [this](https://github.com/ahdinosaur-os/main/blob/master/index.sh). what am i doing wrong? --- i think having a top.sls for each ext_pillar is incorrect? not sure as there is no example ext_pillar repo i can find. so is it necessary to have only one ext_pillar have a top.sls for all the other pillars?","Which master? We deleted the master branch.... Also, it's easier for use having the output of: ","oh, well a fresh install of `wget -O - https://raw.github.com/saltstack/salt-bootstrap/develop/bootstrap-salt.sh | sh -s -- -M` ""master"" is: "
saltstack/salt,https://github.com/saltstack/salt/issues/11690,saltstack_salt_issues_11690,"msgpack.exceptions.UnpackValueError: Data is not enough.

it work fine before,but now fail! What is the problem??? windows 2003 x64 salt:2014.1.0 C:\salt>salt-minion.exe -l debug [DEBUG ] Reading configuration from c:\salt\conf\minion [DEBUG ] Configuration file path: c:\salt\conf\minion [INFO ] Setting up the Salt Minion ""10.1.20.19-windows.reg.web"" [DEBUG ] Created pidfile: c:\salt\var\run\salt-minion.pid [DEBUG ] Reading configuration from c:\salt\conf\minion [DEBUG ] Attempting to authenticate with the Salt Master at 10.2.1.208 [DEBUG ] Loaded minion key: c:\salt\conf\pki\minion\minion.pem [DEBUG ] Loaded minion key: c:\salt\conf\pki\minion\minion.pem [DEBUG ] Decrypting the current master AES key [DEBUG ] Loaded minion key: c:\salt\conf\pki\minion\minion.pem [INFO ] Authentication with master successful! [DEBUG ] Loaded minion key: c:\salt\conf\pki\minion\minion.pem [DEBUG ] Decrypting the current master AES key [DEBUG ] Loaded minion key: c:\salt\conf\pki\minion\minion.pem [DEBUG ] Loaded minion key: c:\salt\conf\pki\minion\minion.pem [DEBUG ] Reading configuration from c:\salt\conf\minion [DEBUG ] Failed to import module postgres, this is most likely NOT a problem: Traceback (most recent call last): File ""salt/loader.py"", line 700, in gen_functions File ""salt/modules/postgres.py"", line 29, in <module> ImportError: No module named csv [DEBUG ] Loaded win_shadow as virtual shadow [DEBUG ] Loaded win_ip as virtual ip [DEBUG ] Loaded win_disk as virtual disk [DEBUG ] Loaded win_status as virtual status [DEBUG ] Loaded sysmod as virtual sys [DEBUG ] Loaded win_autoruns as virtual autoruns [DEBUG ] Loaded win_system as virtual system [DEBUG ] Loaded win_firewall as virtual firewall [DEBUG ] Loaded zcbuildout as virtual buildout [DEBUG ] Loaded win_pkg as virtual pkg [DEBUG ] Loaded win_network as virtual network [DEBUG ] Loaded win_ntp as virtual ntp [DEBUG ] Loaded cmdmod as virtual cmd [DEBUG ] Loaded win_file as virtual file [DEBUG ] Loaded virtualenv_mod as virtual virtualenv [DEBUG ] Loaded djangomod as virtual django [DEBUG ] Loaded win_service as virtual service [DEBUG ] Loaded win_useradd as virtual user [DEBUG ] Loaded win_timezone as virtual timezone [DEBUG ] Loaded win_repo as virtual winrepo [DEBUG ] Loaded win_groupadd as virtual group [DEBUG ] Loaded couchdb_return as virtual couchdb [DEBUG ] Loaded carbon_return as virtual carbon [ERROR ] An un-handled exception was caught by salt's global exception handler : UnpackValueError: Data is not enough. Traceback (most recent call last): File ""<string>"", line 6, in <module> File ""**main**.py"", line 726, in <module> File ""**main**.py"", line 332, in bootstrap File ""**main**.py"", line 359, in chainload File ""**main**.py"", line 715, in _chainload File ""__main__.py"", line 128, in <module> File ""**main__salt-minion**.py"", line 17, in <module> File ""salt/scripts.py"", line 35, in salt_minion File ""salt/**init**.py"", line 221, in start File ""salt/**init**.py"", line 209, in prepare File ""salt/minion.py"", line 543, in **init** File ""salt/utils/schedule.py"", line 73, in **init** File ""salt/utils/schedule.py"", line 265, in clean_proc_dir File ""salt/payload.py"", line 108, in load File ""salt/payload.py"", line 95, in loads File ""msgpack/fallback.py"", line 95, in unpackb UnpackValueError: Data is not enough. Traceback (most recent call last): File ""<string>"", line 6, in <module> File ""**main**.py"", line 726, in <module> File ""**main**.py"", line 332, in bootstrap File ""**main**.py"", line 359, in chainload File ""**main**.py"", line 715, in _chainload File ""__main__.py"", line 128, in <module> File ""**main__salt-minion**.py"", line 17, in <module> File ""salt/scripts.py"", line 35, in salt_minion File ""salt/**init**.py"", line 221, in start File ""salt/**init**.py"", line 209, in prepare File ""salt/minion.py"", line 543, in **init** File ""salt/utils/schedule.py"", line 73, in **init** File ""salt/utils/schedule.py"", line 265, in clean_proc_dir File ""salt/payload.py"", line 108, in load File ""salt/payload.py"", line 95, in loads File ""msgpack/fallback.py"", line 95, in unpackb msgpack.exceptions.UnpackValueError: Data is not enough.","What version is your salt master? Also, could you try testing the 2014.1.1 installer?","thanks to you ,gtmacdonald .It works!"
saltstack/salt,https://github.com/saltstack/salt/issues/12770,saltstack_salt_issues_12770,"Package xxx not found in the repository.

I write winrepo for SplunkForwarder ,and exec ""salt 'tset' pkg.install SplunkForwarder "" success. But when I use it in states,it fails. test.sls:  master:2014.1.4 minion:2014.1.3-1 windows 2003 x64",Could you please add that configuration?,"@basepi, @eliasp I am sorry ,I write wong package name."
saltstack/salt,https://github.com/saltstack/salt/issues/13353,saltstack_salt_issues_13353,"pillar could not find custom module

I write a module to get inner ip get_ip.py  but the module could not be find in jinja2 in pillar. salt 2014.1.4",Can you show us how you're trying to use the get_ip module inside of your pillar?,"@whiteinge I can get inner_ip by using this cmd:salt '*' get_ip.inner,I Think it has been loaded into memory on the master."
saltstack/salt,https://github.com/saltstack/salt/issues/14294,saltstack_salt_issues_14294," return 'Minion did not return' on centos

when 'Minion did not return' on master, I can see minion continue exec cmd with `salt-minion -l debug`. I can use `salt-run jobs.lookup_jid` to get the result after salt-minion exec end. ","Can you try setting `gather_job_timeout: 10` in your master config, restarting your master, and trying again?",@basepi It is useless.
saltstack/salt,https://github.com/saltstack/salt/issues/24671,saltstack_salt_issues_24671,"Add warning if DNS lookup fails for fqdn grain

os:centos6.5 salt:2015.5  I replace `grains['fqdn'] = salt.utils.network.get_fqhostname()` with `grains['fqdn'] =''`,it works again. Is there some bug in `salt.utils.network.get_fqhostname()` ?",Can you resolve your hostname via DNS or /etc/hosts ? cheers Tim,"the DNS works well,and I `nslookup my_hostname` it return `server can't find xxx-xxx.web: NXDOMAIN` at once. It is hard to find out what's wrong from log,Cloud you add some warn when this happen?"
saltstack/salt,https://github.com/saltstack/salt/issues/11719,saltstack_salt_issues_11719,"pkg.version not returning response on some nodes

Package versions: salt-2014.1.0-1.el6.noarch salt-master-2014.1.0-1.el6.noarch salt-minion-2014.1.0-1.el6.noarch Running: `salt -C 'G@environment:LIVE' pkg.version opsview-agent` returns the package version for our agent install on all our boxes but randomly some (20%ish) don't return the result to the command output. If you look in the logs, they have run the command, if you check the command it shows the version, it simply doesn't display anything to the user. Suspect this issue affects more than just pkg.version too, might be the whole module.",How many minions is the command being run on? Is `pkg.version` the only command that drops returns in this manner?,"I've tested in environments with <10, 10-20 and 150. It seems to happen across all of those environments since the upgrade to 2013.1.0-1. It always seems to be the same minions not returning the info but the minion logs look correct and a salt-minion restart has no effect. Just tried pkg.verify instead of version and the same nodes that fail with pkg.version throw an error with this command: The minion function caused an exception: Traceback (most recent call last): File ""/usr/lib/python2.6/site-packages/salt/minion.py"", line 767, in _thread_return return_data = func(_args, *_kwargs) File ""/usr/lib/python2.6/site-packages/salt/modules/yumpkg.py"", line 832, in verify return __salt__['lowpkg.verify'](*names) KeyError: 'lowpkg.verify'"
saltstack/salt,https://github.com/saltstack/salt/issues/15416,saltstack_salt_issues_15416,"Excessive Authentication Traffic

I'm trying to look into an issue we have with minions not returning, on my journey i've noted this so far. We run a single salt master with around 800 nodes. I've noted we see large volumes of messages along the following lines : 2014-09-01 14:36:41,729 [salt.master ][INFO ] Clear payload received with command _auth 2014-09-01 14:36:41,729 [salt.master ][INFO ] Authentication request from gueblampdb02.skybet.net 2014-09-01 14:36:41,734 [salt.master ][INFO ] Authentication accepted from gueblampdb02.skybet.net Now i've looked today and thus far i see this sequence occur around 50 times, i often also see duplicate entries. For instance if we restart our master i see up to 10 instances of this occur for a single node, all within a second or so. What does this log line mean?, is there some kind of key regeneration going on? If so, can we configure the interval? I'm worried this could be causing load issues on the salt master, hence the ticket.",What version of salt are you using?,"Our master Using 2014.1.7 in one site and 2014.1.10 in another (minions are a mix of 2014.1.7 and 2014.1.10 depending on the progress of a current patching change). We only use saltstack as a C&C platform at present so only use built-in modules + a few custom ones, not sure if that helps. Versions in our main site: Salt: 2014.1.7 Python: 2.6.6 (r266:84292, Nov 21 2013, 10:50:32) Jinja2: 2.2.1 M2Crypto: 0.20.2 msgpack-python: 0.1.13 msgpack-pure: Not Installed pycrypto: 2.0.1 PyYAML: 3.10 PyZMQ: 2.2.0.1 ZMQ: 3.2.4"
saltstack/salt,https://github.com/saltstack/salt/issues/15425,saltstack_salt_issues_15425,"Documentation Error yumpkg - 2014.7.0

The yumpkg modules documentation suggests it supports 'enablerepo', however the code only supports 'fromrepo' and as such the feature needs adding or the documents adjusting. The initial list of supported commands is correct but the options below are wrong. http://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.yumpkg.html#module-salt.modules.yumpkg",Could you explain how you are using it?,"Apologies if i'm missing something here, i'll add as much info as possible. Module : yumpkg.py Branch : Develop def upgrade This function's options surrounded by the parentheses, suggest only support for 'fromrepo'. The help output below that lists 'enablerepo' as a repository option. In the code however, i can't for the life of me see where it handles the 'enablerepo' command switch? I hit the issue whilst actually trying to do an upgrade through pkg.upgrade with a enablerepo switch. I would of thought from the docs this has the same supported arguments as pkg.install but unless i'm missing something (could very well be the case!) i can't see how i'd get that working? As an example: (from 2014.1.10), below i install the command using enablerepo in the pkg.install command, but when i try upgrade then it fails. "
saltstack/salt,https://github.com/saltstack/salt/issues/18322,saltstack_salt_issues_18322,"2014.7.0 multimaster / multiprocessing issues

Slightly odd one this... We are upgrading from 2014.1.13 to 2014.7.0 in a multi-master environment. We've upgraded 3 of 600 minions to test (1RHEL5/2RHEL6) and all have exhibited the issue below: With `multiprocessing: True` as is set by default, the minions successfully connect to both master servers, receive commands from both masters successfully **but** the return's only ever seem to work with one of the two masters. For example, running a test.ping from master01 will show a return, running from master02 times out. The minion's log shows both masters as being connected and shows the results of the command as being sent off to the salt master. We've spent a while looking at this and started grabbing as straws, one of these was to disable multiprocessing. Once that's done then the minion successfully reports to both masters. I suspect this is just highlighting the root cause in a different light but were quite stuck with this and it's quite urgent for us. Disabling multiprocessing doesn't really work with our work flows.",What OS's are your master's running on?,"Thanks for taking a look @rallytime. To further expand, it doesn't appear to be the same master each time. The problems also exhibited its-self with the minions installed on the respective master. - The minion for master1 appears in the `salt-run manage.down` output on master. - On master2 the master2 minion shows itself as down that master. The minion is however up on the masters counter-part. With the remote minion we upgraded (standard vm, no master) commands work on master1 and not master2, appearing in the `salt-run manage.down` output for the master we have issues with. When running that command, i see the minion respond to it and it seems to think it's returned and all is okay. I did wonder if the return was somehow ending up at the wrong master but not sure how i could possibly tell. We've tried restarts (full OS) of the master that's not working and we've tried restarting the salt-minion process on our remote node but the behaviour persists."
saltstack/salt,https://github.com/saltstack/salt/issues/11783,saltstack_salt_issues_11783,"salt-server doesn't appropriately raise Permission Denied error in /etc/salt/master to the log causing a vague SaltReqTimeoutError in the minion

I had expected that salt read configuration files and switched to the user declared in /etc/salt/master like in other services, in fact it appears to switch very early on thus configuration files that were only readable by root were never readable by the user. The server did not log this critical error to /var/log/salt/master by default. It wasn't until that I ran it in debug did I see the issue, specifically IOError: [Errno 13] Permission denied: '/etc/salt/master' in salt-master -l all. The fix was simple: chown -R [salt user] /etc/salt . The misconfiguration caused the salt minion to raise a SaltReqTimeoutError (even in -l all) even tho it could make TCP connections to the salt-master, and, as a test and perhaps another separate issue in and of itself, salt minion raises SaltReqTimeoutError even if the salt master refuses TCP connections. I propose two fixes: that salt-master's failure to read configuration files be raised better, and that salt-minion traps connection issues better rather than raising a generic and red herring SaltReqTimeoutError. I'd be happy to help contribute these fixes but would need some assistance from an experienced salt contributor as I am new to salt.","Can you include the log that contains the IOError? If there's a whole traceback, it will save time figuring out where the problem is occurring.",
saltstack/salt,https://github.com/saltstack/salt/issues/11824,saltstack_salt_issues_11824,"Call a single ID from a module

To be of any use, requisites would need to be handled too. @thatch45 has added a sls_id function to the state module here: 3b20382505056bc47545fe2665d0ff3bf1e01572 My initial reaction is that the module should probably come before the id in the function arguments. It'd also be great to be able to call more than one id at a time - but maybe I'm just being greedy! Currently if the id isn't found `ret` is undefined - we need to return a proper error message here.",Can you give us an example of what this would look like? I'm not exactly sure what you're looking for based on your description.,"Thanks @alienzrcoming thats the kind of thing I'm thinking of. @thatch45's implementation creates a new function instead of adding an extra include argument to state.sls. It looks like this:  I'll detail my original use case, as I may be thinking about Salt in the wrong way... I've an sls file which loads backup data into serveral dbs, created by iterating over pillar data. It'd like to be able to reload the backup for just one of them. Is there a better way to do this? Creating separate sls files for each db doesn't seem very DRY and state.single isn't much use because I need access pillar data. I suppose I could get salt to write out script files and then call them with cmd.run?"
saltstack/salt,https://github.com/saltstack/salt/issues/12182,saltstack_salt_issues_12182,"Salt master cannot test.ping ok to minions

Both my salt-master and salt-minion is 0.17.5, and when I try test.ping on master, it didn't return True:  I had try netstat -ntlap | grep Minion_IP, and it seems that the connection between master and minion lost and cannot test.ping ok any more.BTW, the minion service is still running and I can fix it by restart the salt-minion, but it's really not a good idea.","Can you give us the output of `salt --versions-report` please? What's the OS on the minion system? This sounds like an out-of-date 0MQ version, but I could be wrong.","Master likes： [root@Master ~]# salt --versions-report Salt: 0.17.5 Python: 2.6.6 (r266:84292, Jan 22 2014, 09:42:36) Jinja2: 2.2.1 M2Crypto: 0.20.2 msgpack-python: 0.1.13 msgpack-pure: Not Installed pycrypto: 2.0.1 PyYAML: 3.10 PyZMQ: 2.2.0.1 ZMQ: 3.2.4 and minion likes： minion_a: Salt: 0.17.5 Python: 2.6.8 (unknown, Nov 7 2012, 14:47:45) Jinja2: unknown M2Crypto: 0.21.1 msgpack-python: 0.1.12 msgpack-pure: Not Installed pycrypto: 2.3 PyYAML: 3.08 PyZMQ: 13.1.0 ZMQ: 3.2.2 Em.. The minion is Centos 5.x. Some problems here? @s0undt3ch"
saltstack/salt,https://github.com/saltstack/salt/issues/13753,saltstack_salt_issues_13753,"why salt need auth again and again?

By using the eventlistener, I get some salt execution details. It seems that salt-master keeps auth with each minions, though the minion has already been accepted.why salt need auth again and again?? I still wonder that this setting may cause some communication issue. ( see issue #11840 ) salt auth event Example: {'tag': 'salt/auth', 'data': {'_stamp': '2014-06-26_16:02:47.796804', 'act': 'accept', 'id': 'TestVM', 'pub': '-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA0ZzQJpX+XuiZ3yMPApF/\nXYNb4TzCnMLRXAz1T9fzdfF8B2hh0tYUYRiTKuN8UxN7NDvri//r4fqec80FG+na\n0Isrk+n8jQMHQM2j9xSTAwWOAZB5azRPLdtLgskIwRvj7J4JjfAPb46ig8WLL3YF\n+ZO4ANciwSF8D60GzDvYQeNQj5OT1x+kD24EdZ3/N4WuFD/Mm4hGjB1y3BniplJC\nJQTWkt801WsT1RpQ0ZQnTj0uDFBuEfTt97fHtLZlm8dTJR6BsBgiNg+s+7rUoswX\nduQu/fort4q0GIcH5eqkwF7qC5JJODj72+K4NP4B5eZXh4ktfjRd6C2pIo+8pNgZ\nWE2YPWEH0HgGXldbr6i3j300BRk9qQu5y2NS6F4p3Ghq8VIDePL0oPIQcVLJqXFo\nH1PEvM4CvkZZj48sLZBbKOqyGm9HN5YpLSh5I6jXmDC15a1ZpG0fwfiTUQo5M1MN\nGf6ZMlZHh/dXYU4iCt9Yyyw211aJUKiquqyip8oYy1ef3U9Zj1V8STHKhqrut9M2\ns9rSDFyN4edjuDR8poO5IcYsAafUUOcE5HKQ8whGFs4bPWkvIAoLnyvrpiP8B10e\nM9XBrCUQk4YKBMZWcHHI03Dfl6dupIsGRlid7OVe4B1JSRrvZV6Kej0lelSUfmT7\nTl2aYHyQetGFVXi9uy3lB2kCAwEAAQ==\n-----END PUBLIC KEY-----\n', 'result': True}}",How often does it auth? And does it continue to auth indefinitely or just a few times?,"Hi, @basepi . My Salt-master version is:  and minions' version is 0.17.5 or 2014.1.5. by using the eventlistener, the auth event (tag with ""salt/auth"") continue to throw that minions changes from 'act': 'pend' to 'act': 'accept'. And this case may cause a timeout problem!! My salt-master manages more than 1k minions, and when I try `salt '*' test.ping -v`, it returns more than 100 minions not return. but after there, I try `salt '[ not return minion ]' test.ping`, it returns True?! I still doubt that too many auth events may lead to a not-return case."
saltstack/salt,https://github.com/saltstack/salt/issues/14023,saltstack_salt_issues_14023,"could salt support multi-match target way?

I have a salt-master with some 0.17.5 minions, and I want to target the minions which matched a ip list. But as I known, salt only support use -S 'OneMinionIP' to target the minion with ip, and don't support the feature such as -SL 'FristIP,SecondIP,ThirdIP'. Could salt support it in furture? Thks~",Could salt support it in furture? Thks~,"Sorry, but the compound option only provide: salt -C 'S@FirstIP or S@SecondIP or S@ThirdIP' test.ping, it's not a polite way, isn't it ?"
saltstack/salt,https://github.com/saltstack/salt/issues/15575,saltstack_salt_issues_15575,"Error when try salt-minions in docker containers

Just a test case, I tried some minions in docker containers on one VM, and here is the dockerfile:  why? could anyone please tell me how to run multiple minions container on one vm? Thks.",Did it continue to produce defunct processes after you resolved the memory constraint and restarted the minion?,"Hi @cachedout , it did. It seems that when I tried one job such as `salt '*' test.ping`, it will produce more than one defunct minion with each container."
saltstack/salt,https://github.com/saltstack/salt/issues/19336,saltstack_salt_issues_19336,"salt-ssh cannot update minion_id by itself

I want to update minion_id and restart minion service by salt-ssh, and lately find it changed at first and after executed restart minion service, it returned to original minion_id. Strangely, I did it by simple paramiko-ssh. Is this a bug for salt-ssh ?","How are you changing the minion_id? In the minion config, or in the cached minion_id file, or what?","I changed by minion_id file and rm the pki keys, then restart the service. I'm sure that this issue can be easily reproduced."
saltstack/salt,https://github.com/saltstack/salt/issues/12258,saltstack_salt_issues_12258,"Can't install .deb from sources on Ubuntu 10.04, works on 12.04

My check-mk-agent code wont install on Ubuntu 10.04. Works excellent on 12.04. salt versions: ","Can you check versions of the apt python module? My bet is that 10.04 is a lower version, and we probably just need to change some things to support it.",ii python-apt 0.7.94.2ubuntu6.4 Python interface to libapt-pkg
saltstack/salt,https://github.com/saltstack/salt/issues/19439,saltstack_salt_issues_19439,"Leaking salt-minion (2014.7.0)

Im not sure where to start off, but after deploying 2014.7.0 from 2014.1.13 in late november i see a increase in memory usage on my minion. Upon restart the memory goes down and slowly keeps working upwards again. System: Debian Wheezy  Graphs over time: ![salt_minion_rss-0](https://cloud.githubusercontent.com/assets/599991/5643382/38470e2a-9658-11e4-975e-2ee7ae5127e6.png) ![salt_minion_rss-1](https://cloud.githubusercontent.com/assets/599991/5643385/40b623a2-9658-11e4-9ebc-fcf5ef88b776.png)",What salt activity does your minion have?,"Im not sure if this is related to that bug, but here is a highstate run: Any tips on where i should look? "
saltstack/salt,https://github.com/saltstack/salt/issues/24394,saltstack_salt_issues_24394,"Possibility to run custom grains module on a set of machines

Is there a possiblity to add custom grains module on the salt minion? Ex. in /etc/salt/_grains? Im using ec2_info.py and digitalocean_metadata.py but dont want to run these on all my machines since this will slow down my minions.",What is you motivation for doing so?,@jfindlay: To not run ec2/digitalocean custom grains modules on all machines since this is just waste of cpu cycles.
saltstack/salt,https://github.com/saltstack/salt/issues/26198,saltstack_salt_issues_26198,"salt-ssh fails on nagios.py

Trying to setup salt-ssh as a failback for our salt rig and i just keep getting this strange error regarding nagios.py. Looks to me as it doesnt get to the tarball? ",Does it work if you (re)move the `/usr/lib/python2.6/dist-packages/salt/states/nagios.py` file? Does it give the same message on a different file? I am wondering if it is getting the path wrong somehow.,
saltstack/salt,https://github.com/saltstack/salt/issues/35416,saltstack_salt_issues_35416,"salt-minion fails on Ubuntu 12.04

### Description of Issue/Question ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) Ubuntu 12.04 with repo: ",Can you share what is in your sources flie (`/etc/apt/sources.list`)? Also just to ensure can you run `dpkg -l | grep -i jinja` and paste the output.,"Looks like i installed salt-minion before i added the official saltstack repositories, and then installed salt-minion from the saltstack repos. You should maybe depend on versions on python deps so this doesnt happen."
saltstack/salt,https://github.com/saltstack/salt/issues/19349,saltstack_salt_issues_19349,"Salt-master: Could not deserialize msgpack message

Hello, Today salt-master welcomed me with such message: ",How did you install the salt-master?,"Hello @cachedout This will be hard to reproduce, I bet. I installed salt-master trough salt bootstrap git develop. Is there any more information I can give ?"
saltstack/salt,https://github.com/saltstack/salt/issues/16681,saltstack_salt_issues_16681,"Cross-Calling Modules

Hi, I'm in the process of planning the functionality I need for customised remote execution module. If I use the **salt** function to call another module (e.g. file.find) which returns a bunch of text lines, is there a way to specify the return type so that it can passed to another module ?",Can you clarify what return type you're expecting?,Arr I didn't realise it was returning a list. In which case my example below does indeed work as expected.  So I'm assuming all of the built in modules return sensible types that can be easily passed to other modules.
saltstack/salt,https://github.com/saltstack/salt/issues/16684,saltstack_salt_issues_16684,"Limiting minion capability

Hi, For security reasons is there any way to limit the capabilities of a salt minion? I was thinking of simply removing all of the modules other than the ones that are required. Not sure if this would be all thats needed though. Carl",What about something generic like SELinux or AppArmor?,"Sure these could be options for me, however I thinking more of somehow limiting the minion itself rather than depending on other frameworks. This is especially important for systems where SELinux or AppArmor is not available. This sort of leads me on to another question, are there plans to build a more self contained single file minion (maybe built with the Golang or C) that can include all of the dependancies in a single package without depending on Python? I see this as important for more traditional UNIX platforms such as Solaris, HPUX, AIX etc where Python may not be available. I'm guessing this could then be used to provide functionality similar to Ansible's Fireball Mode?"
saltstack/salt,https://github.com/saltstack/salt/issues/12121,saltstack_salt_issues_12121,"network.netstat function doesn't work on FreeBSD

The command it tries to run, _netstat -tulpnea_ is from Linux and doesn't work on FreeBSD. ",Do you know what the equivalent would be on FreeBSD?,"There's nothing that gives the same output on FreeBSD, but _sockstat -46_ seems to be the closest it can get. Here's a sample output of _sockstat -46_: "
saltstack/salt,https://github.com/saltstack/salt/issues/13324,saltstack_salt_issues_13324,"saltmod.state state module function does not take in custom pillar

Unlike the state.sls execution module function, the saltmod.state function (salt\states\saltmod.py) function does not take in a custom pillar. This precludes scenarios where custom pillar can be passed in an orchestration. So for example, you can invoke an orchestration the following way:  But you would not be able to do the same with the 'salt.state' function, since it doesn't support a custom pillar. We should enable it so you could invoke custom pillar from either one. This is by the way very useful if you are doing peer communication and you want to invoke a runner from a client but want to pass in custom parameters.",Can you give a particular example of how you would want to use this so we can discuss adding support for your use case?,"Works for me. The way khrisrichardson is planning to call salt.state is pretty much how i expect to call it as well (similar scenario for me). Happy to see it fixed the way he suggests. Though in my case i'm using salt.state from an orchestrate job, but functionally it should be the same thing ..."
saltstack/salt,https://github.com/saltstack/salt/issues/12216,saltstack_salt_issues_12216,"BUG, ENH, PERF: Debian/Ubuntu network configuration

Initially: ""debian_ip ifupdown /etc/network/interfaces options for tunnels, ipv6, and dns-search"" [EDIT] **Documentation** _Ubuntu ifupdown Docs_ Here are the (ubuntu) docs for /etc/network/interfaces (`pkg: ifupdown`). - http://manpages.ubuntu.com/manpages/trusty/en/man5/interfaces.5.html - http://manpages.ubuntu.com/manpages/precise/en/man5/interfaces.5.html - http://manpages.ubuntu.com/manpages/lucid/en/man5/interfaces.5.html _Salt Docs_ - http://docs.saltstack.com/en/latest/topics/releases/2014.1.0.html#network-management-for-debian-ubuntu - http://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.debian_ip.html#module-salt.modules.debian_ip - https://github.com/saltstack/salt/pull/9662 (iptables ipv6) **Sources** - https://github.com/saltstack/salt/blob/develop/salt/modules/debian_ip.py - https://github.com/saltstack/salt/blob/develop/salt/templates/debian_ip/debian_eth.jinja - https://github.com/westurner/salt/compare/debian_network_config **Tickets** I don't see any other tickets for e.g. tunnels, ipv6, or dns-search (as utilized by resolvconf) in debian_ip: --- [EDIT] **BUG**: - [x] Unclosed file handles (-> `file.open` -> `with salt.utils.flopen`) - [x] Don't write /etc/default/networking on Ubuntu >= 12.04 - get_network_settings returns templated output to compare with templated output with difflib.unified_diff (in https://github.com/saltstack/salt/blob/develop/salt/states/network.py) and thus runs on every salt invocation w/ Ubuntu <= 12.04 - https://github.com/saltstack/salt/commit/c70c2057b8dcf56d0948d1e61d94775e6dda992b - \* /etc/resolv.conf is overwritten when resolvconf is installed (this may be a documentation issue) **PERF**: - [x] Simplify /etc/network/interfaces parser logic **TST**: - [ ] Handle 'TODOs' - [ ] Write tests - [ ] Further (manual) testing on other platforms - I've run this manually on one platform a bunch of times. **ENH**: - [x] Add (rework/complete) debian ipv6 options - [x] Add Adds dns-search option - [x] Add wireless-\* options - [x] Add wpa-\* options - [x] Add basic seting validations **RLS**: - [x] Merge: https://github.com/garethgreenaway/salt/commit/d7884d5faa1ba2e85a78dacbf1857607dc959768 - [x] Release: https://github.com/saltstack/salt/releases/tag/v2014.7: - https://github.com/saltstack/salt/commits/2014.7/salt/modules/debian_ip.py - https://github.com/saltstack/salt/blob/develop/salt/templates/debian_ip/debian_eth.jinja",What's the feature/bug you're looking to get fixed?,"It is not possible to: - configure IP tunnels - configure IPV6 - configure dns-search for resolvconf https://github.com/westurner/salt/tree/debian_network_config Wes Turner On Apr 24, 2014 2:26 PM, ""Colton Myers"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/18843,saltstack_salt_issues_18843,"State user.present will fail to create home if user exists and homedir doesn't

Ran into this today, it appears that in one of our installs, the user got created at some point, but their home dir didn't. When I ran the highstate today, it errored out with the following: local:  It looks like here the change doesn't get made, but reports it back as a change that is remaining. https://github.com/saltstack/salt/blob/2014.7/salt/states/user.py#L110 Should the user.add module be called to create the home dir or should user.chhome be modified to create a homedir if one doesn't exist.",Can you post the output of `salt --versions-report` as well as let us know what OS and OS version you're running?,The Master: 
saltstack/salt,https://github.com/saltstack/salt/issues/14734,saltstack_salt_issues_14734,"file.managed does not handle filename with "".override"" in it

Due to a bug with PHP-FPM in Ubuntu, I have to create a file that overrides default Upstart configuration. The file should be called ""/etc/init/php5-fpm.override"", so I used the following:  after executing salt-call, the file is NOT created. Any other file name will work, but not if the name ends in "".override"". I tried quoting with single and double quotes, no luck. At a first glance, the "".override"" seems treated like a function call, but other functions like "".join"" does not trigger the issue.",Which version of Salt are you using? And which version of Ubuntu?,"sorry, forgot to specify: ubuntu 14.04 LTS and saltstack 2014.1.7"
saltstack/salt,https://github.com/saltstack/salt/issues/21956,saltstack_salt_issues_21956,"Reactor rendering error

Salt-master is configured for GPG rendering using the following entry in its configuration file:  Removing the ""gpg"" renderer from the configuration of the salt-master solved the issue.",What version of salt are you running? Can you post the output of `salt --versions-report` please?,"2014.7.2 - but problem already spotted, will open a PR in a minute"
saltstack/salt,https://github.com/saltstack/salt/issues/32916,saltstack_salt_issues_32916,"file.managed memory usage with s3 sources

### Description of Issue/Question Trying to use file.managed to get a file from S3 fails if the file is too big for the amount of memory available in the minion. The problem seems to be caused by this call https://github.com/saltstack/salt/blob/develop/salt/utils/s3.py#L128 where the request is initialized once and used in different ways depending on the method passed to `query`. A way to avoid the issue might be using streaming, as documented at http://docs.python-requests.org/en/latest/user/advanced/#body-content-workflow but that will require a bit of refactoring of the query method. ### Versions Report salt 2015.8.8.2 is definitely affected",Can you post the specific error message you are getting? This may be similar to #31466 or #31506.,"@jfindlay I'm trying to reproduce the error on a vagrant box, but seems like the OOM killer kicks in before I can get the error from salt. Will need to reproduce the problem on my live systems. I'm pretty sure it's _not_ tornato-related, even if the issue is similar to the two referenced issues. By reading the code and checking the memory usage at runtime it's clear that the downloaded file is held in memory, and IMHO that is already an issue, a software shouldn't rely on available memory to download a file whose size is not known in advance. I'll try anyway to reproduce the issue and provide a proper stack trace."
saltstack/salt,https://github.com/saltstack/salt/issues/12355,saltstack_salt_issues_12355,"salt.runners.virt.init Hypervisor  was not found

just updated to 2014.1.3 ","Can you provide the output of a `salt-run virt.query` for that same set of machines, please?",was just looking at that myself ;-) It returns nothing without debug 
saltstack/salt,https://github.com/saltstack/salt/issues/12369,saltstack_salt_issues_12369,"New Windows 32-bit Client versions 2014.1.3 is not working

Running Salt Master version 2014.1.3 Trying to do a fresh install of Salt Minion version 2014.1.3 on a Windows 2003 server. Minion does not return on state.highstate or test.ping.",Can you show your minion configuration file? Did the key for that minion show up in your master's `salt-key` and did you accept the key?,"Minion configs: https://gist.github.com/mstreetE7/5ef26944320dd427b5a6 Yes. I make sure to do a fresh key deletion and acceptance anytime I manually uninstall and reinstall the software. I'm seeing interesting behavior here. If I try the install on a Windows 2003 server, I get the reported failures where test.ping and state.highstate do not return. If I try the install on a Windows Server 2012 server, I see the behavior exhibited here: https://gist.github.com/mstreetE7/df0de43cb8c9798eb075 The test.ping works, running a test=True will show false positives for changes that need to be made, but if I do a regular highstate on the same server, the only changes that occur are as we intend."
saltstack/salt,https://github.com/saltstack/salt/issues/19400,saltstack_salt_issues_19400,"Provide node creation data to salt-cloud deploy script template

Currently only `vm` data is provided to the deploy script. The data from `#create_node` contains additional information regarding the provisioning of a machine that can be useful in the remaining deployment of that machine.",How about putting all that data into an `instance_data` dict inside `vm_`?,"it's not all uppercase. For instance, the private ips are listed lowercase off the main object. I do think sticking it on the vm object is perfectly fine though. I'm assuming you mean just doing something like vm_['instance_data'] = data? "
saltstack/salt,https://github.com/saltstack/salt/issues/19635,saltstack_salt_issues_19635,"YAML keys with no value cause jinja rendering to fail

I have a pillar that looks something like this: ",Could you please give us more information about what you're doing and under what context you're using the template?,I'm trying to reproduce in a clean file but have been unsuccessful. I will have to dig deeper to find out what it is about this one state file that is causing an issue.
saltstack/salt,https://github.com/saltstack/salt/issues/30432,saltstack_salt_issues_30432,"Cloning linode server with salt-cloud requires payment term

I'm using 2015.8.3, and when trying to clone a node, I get the error:  I've never specified a payment term in my provider or profile configs when creating a machine, so I'm not sure what's going on here.","Can you also post your profile information? I don't see any `size`, `image`, or `location` information with what you've posted here.",Here's the profile I'm using for the clone. 
saltstack/salt,https://github.com/saltstack/salt/issues/30771,saltstack_salt_issues_30771,"Unexpected output of ssh_auth.present 

The output of [ssh_auth.present](https://docs.saltstack.com/en/latest/ref/states/all/salt.states.ssh_auth.html#salt.states.ssh_auth.present) s not as expected: The same output happens for these cases: - file was not present before and gets created - file was present and modified - file was present and not modified since all keys are already present ",What version of salt are you using?,We use this version: 2015.8.3 (Beryllium)
saltstack/salt,https://github.com/saltstack/salt/issues/32678,saltstack_salt_issues_32678,"No useable error message if create user fails

### Description of Issue/Question We try to create a user. It fails. The error message we get does hide the root of the problem. Question: How to find the root of the problem? Why does creating the user fail? ### Setup ",can you use debug? `salt-ssh termserv state.sls tmp.create_user_in_localhome -l debug`,"Here is the output. I removed some non-disclosable information (roster and top.sls) Still I can't find any information which can help me to find the root of the problem. BTW, I love python stacktraces. Does salt hide stacktraces which happen on the minion? "
saltstack/salt,https://github.com/saltstack/salt/issues/35377,saltstack_salt_issues_35377,"Feature Request: Aliases for common Package Names

### Description of Issue/Question If you target RPM and DPKG bases distributions, you know the problem: Package names do differ. On one platform the package is called ""foobar"" on the other it is called ""foo-bar"" It would be great, if salt would provide a basic set of aliases. AFAIK this naming problems gets solved by every user of a configuration management tool again and again. It would be great if salt would be one of the first to solve this. The list of aliases is endless and solving all won't work. But it should be possible to solve most common ones like ""http"" vs ""apache2"". BTW, I am not stupid. I know how to handle conditions in sls files :-) I just want to stop wasting our time. What aliases do you know and how do you solve this up to now?",Do you guys think this would be something you would want to implement into salt? Or should we expect this to be handled by the user?,"Thank you for your reply. I see, a third party library could solve this. What do you, the salt expert, advice to new comers? Imagine your product supports RedHat, SuSE and Ubuntu. Each in two versions. Do you keep six lists of packages to install?"
saltstack/salt,https://github.com/saltstack/salt/issues/37068,saltstack_salt_issues_37068,"Feature Request: Template variable to explain source of a file

### Description of Issue/Question I want to know where config files on a minion come from. Example  I am lazy, and don't want to maintain above information myself. There is a cool feature for ansible. The template system provides a variable `{{ ansible_managed }}` This gets expanded to the source of the file and a time stamp. See: http://docs.ansible.com/ansible/intro_configuration.html#ansible-managed It would be great to have such a feature in salt, too. Related StackO question: http://stackoverflow.com/questions/39747351/saltstack-reverse-engineering-where-a-file-comes-from What do you think?",what do you think ?,@mostafahussein implementing this via pillar looks good. I don't understand why you want to get the user who executed a state. At least in my environment it will always be `root`. I would like to know the source of this file or snippet (`file.blockreplace`)
saltstack/salt,https://github.com/saltstack/salt/issues/44198,saltstack_salt_issues_44198,"Validate Pillars

### Description of Issue/Question I need a way to validate pillar data. In particular I use salt like this: `salt-ssh remote-host state.sls foostate pillar='{...some custom json ...}'` if my custom json is invalid it might result in very strange errors in the end. I want to validate my custom json before salt starts to use it. Up to now I found no way to implement this. I don't ask for much. Just a simple hook to a custom validation method. I know how to code python and how to validate the data. That's my job, no problem. I would be great if salt would provide a hook for this.",Can you provide a little more detail into what kind of JSON you're looking to validate?,"@garethgreenaway You want more infos what kind of JSON I am looking to validate. Imagine I have a key with name `my_int` and this field must contain an integer between (inclusive) 1 and 10. If the value is higher or lower, the servers might catch fire and start to burn. I want to avoid this. Do you understand that I want to be sure that the value is not outside this area? Maybe you find a more funny use case for validating, or maybe you find a more serious use case. Maybe this helps: https://en.wikipedia.org/wiki/Data_validation"
saltstack/salt,https://github.com/saltstack/salt/issues/47535,saltstack_salt_issues_47535,"salt-ssh to localhost not working

### Description of Issue/Question salt-ssh as normal user to localhost does not work. ### Setup I set up a python virtualenv as normal non-root user. Installed salt. Created symlinks (as root) from /etc/salt to my virtualenv. Running salt-ssh to a remote system works. ### Steps to Reproduce Issue ",might be a related or duplciate of https://github.com/saltstack/salt/issues/46891 was this working previously in 2017.7?,"@Ch3LL The client (ssh-salt) runs as non-root-user and the client connects to localhost as root. I tried it with salt-2017.7.3, and yes, it works with the old version of salt."
saltstack/salt,https://github.com/saltstack/salt/issues/17017,saltstack_salt_issues_17017,"state.sls_id causing UnboundLocalError

",Don't you mean `salt \* state.sls_id some_state path.to.file base` ?,@terminalmage++
saltstack/salt,https://github.com/saltstack/salt/issues/12466,saltstack_salt_issues_12466,"Yum: Package not installed/found if fromrepo specified and repo is disabled by default

Version: 2014.1.3 If a yum repo is defined, but left disabled until used, its contents will never make it into **context**['pkg._avail'], and the package will be treated as not found inside of yumpkg.py:check_db(), even though the repoquery runs correctly to get suggestions, resulting in errors such as: `[ERROR ] Package 'site-solr' not found (possible matches: site-solr)` I'm not very familiar with the codebase outside of what I've seen right here, but I think that if we were to, inside check_db(), first test if the repoquery is of the exclusive type (only one repo, exclude everything else), then if so, populate a temporary pkg._avail dict for immediate use, we could cover this case well. While it seems the intent of the global pkg._avail dict was caching the expensive call, this new behavior shouldn't be too costly as most disabled-by-default repos will be on the smaller side.",Can you please provide a test case to reproduce this?,"This should reproduce it, although I should add that since [4b4fb3fb](https://github.com/saltstack/salt/commit/4b4fb3fb52f7e3dd71c49bdfe58a88fdc48896c0), the fact that the repo is created by salt does not matter here, and subsequent runs fail the same way: "
saltstack/salt,https://github.com/saltstack/salt/issues/12487,saltstack_salt_issues_12487,"Unable to spin up Windows based image in Azure

First of all, it's a bit unclear if this is a bug or this is a feature request for me, I'm filing it as a bug right now. I'm trying to spin up a Windows Server 2012 R2 based minion in Azure following these instructions: http://docs.saltstack.com/en/latest/topics/cloud/azure.html According to the documentation it should be possible to spin up Windows Images http://docs.saltstack.com/en/latest/topics/cloud/windows.html But trying to spin up one in Azure gives the error: ",Do you know if the Azure image that you're using meets that requirement?,"Sorry, I have no idea, I used ""list_images"" and just picked one of the default azure images. So I'm guessing that the port is not open. If the win_ configs are not used and the images spin up, is it still possible to configure the minion afterwards or are both needed on spinup?"
saltstack/salt,https://github.com/saltstack/salt/issues/12582,saltstack_salt_issues_12582,"Add follow_symlink option to file.managed

Currently file.managed will always follow symlinks, but sometimes one might want to replace an existing symlink with a real file. See: https://groups.google.com/forum/#!topic/salt-users/Q3l-JSgQALU",Do you have a state where you're seeing this? I tested with a simple file.managed state and the symlink was replaced by the file.,"Haven't tried on develop, but on 2014.1.4, if the file you are managing matches the target of the symlink, the symlink will not be overwritten. I guess the specific case is converting a file from a symlink to a regular file without changing its contents. Does that make sense? This means that adding the `follow_symlinks` flag, no matter what the default, could change existing behavior. On Thu, May 8, 2014 at 6:18 PM, garethgreenaway notifications@github.comwrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/12503,saltstack_salt_issues_12503,"YAML list for env is not processed correctly for cmd.script

see Gist https://gist.github.com/11487623 for example. When passing an environment variables as YAML dictionary:  However the same type of dictionary passed to cmd.run is parsed correctly.",Can you let us know what version of Salt you are running? This really should be provided with any bug report.,"RHEL5; Salt version: 2014.1.0 And as far as I know, this is the most recent version available in EPEL: http://dl.fedoraproject.org/pub/epel/5/x86_64/repoview/salt.html"
saltstack/salt,https://github.com/saltstack/salt/issues/12611,saltstack_salt_issues_12611,"UnicodeEncodeError: 'ascii' codec can't encode character u'\xae'

Getting this error while trying to run salt-call grains.items on Windows 2008 servers:  Master is running on CentOS 6.4 - 0.17.4 salt-minion is 2014.1.3.1",Do you have any custom grains that might have unicode characters?,Nope. But Windows 2008 has Unicode (r) in the name. Can this cause the issue?
saltstack/salt,https://github.com/saltstack/salt/issues/29532,saltstack_salt_issues_29532,"Recursive requisite when names and IDs overlap

I encountered a surprising (to me) recursive requisite:  The problem seems to be that the `pip: pip` requirement checks the `name` first, rather than the `ID`. Maybe this is ""as designed"", but I found it surprising. I would have assumed that the differing IDs were enough. I've worked around the problem by renaming the global pip state `pip-global` and changing the requirement to match, but I thought it worthy of a bug report. I've created [a gist reproducing the situation on a vagrant VM](https://gist.github.com/eykd/2fc7bb012290ed4fbec8).",Can your provide the output from `salt --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/14281,saltstack_salt_issues_14281,"State mongodb_user.present is unavailable

salt-2014.1.5-1.el6.noarch ",Do you have `pymongo` installed? Run a python interpreter and try to `import pymongo` please.,"I installed python-pymongo. import pymongo now produces no errors. However, I now get ""Missing parameter passwd for state mongodb_user.present"". Is it looking for the parameter ""passwd"" instead of ""password""?"
saltstack/salt,https://github.com/saltstack/salt/issues/26814,saltstack_salt_issues_26814,"2015.5.3 Pillar include under nested key is broken

Problem is here https://github.com/saltstack/salt/blob/2015.5/salt/pillar/__init__.py#L418 Variable v is getting value of None. pillar: ","Did this ever work? I don't know that this is a bug, this looks like bad syntax in the pillar sls file","Yes, this did work in the past. It's been in the documentation for a long time as well. https://docs.saltstack.com/en/latest/topics/pillar/#including-other-pillars This feature solves a lot of big problems for us. Example: Making pillar data available to a Jenkins server to get application settings for a build process without colliding with other pillars or duplicating the pillars."
saltstack/salt,https://github.com/saltstack/salt/issues/41330,saltstack_salt_issues_41330,"state pkg.installed will fail if multiples of them are defined (yum)

### Description of Issue/Question A state with multiple `pkg.installed` state id's will fail after the first pkg.installed state id runs. All subsequent ones will fail with error: ","can you try updating the full system? Thanks, Daniel",Confirmed. The issue was resolved after updating curl 
saltstack/salt,https://github.com/saltstack/salt/issues/21929,saltstack_salt_issues_21929,"composer.installed sould not run always

I've discovered the way composer.installed satate can be run only if there is something to do. Check out my handmade state for such purpose: ",What is the output of `salt --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/13591,saltstack_salt_issues_13591,"Docker state id key error

When running a state with docker.pulled on centos with docker 1.0 I get this error: ",Can you please let us know what version of Salt you are running?,"Yep will try tomorrow. On 21 Jun 2014 00:23, ""Erik Johnson"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/13783,saltstack_salt_issues_13783,"docker.pulled fails parsing image name with version

",Can you please check if this is a duplicate of https://github.com/saltstack/salt/issues/13138?,"Yeah, looks the same. Sorry I didn't catch it."
saltstack/salt,https://github.com/saltstack/salt/issues/14544,saltstack_salt_issues_14544,"cloud deploy fails due to dropped arguments

See here: https://github.com/saltstack/salt/commit/7ca9fe5f1997e105d510a43b22dc87e49ebc5313#diff-5c29a90fdbde829422c42791babb52dbR696",Would you mind sending in a PR with your proposed change?,"It might take a few days until I have time to code a fix, also because I don't know how to best fix it yet. I made some more comments on the code linked above."
saltstack/salt,https://github.com/saltstack/salt/issues/30042,saltstack_salt_issues_30042,"salt 2015.8.3 returns wrong value for osrelease grain on Windows Server 2012 R2 due to Python bug

Python 2.7.10's `platform.uname()` returns the following:  I don't have a workaround for this bug yet. To fix it SaltStack would need to re-package the Salt minion for Windows with the newer Python runtime.","How should I proceed? Should we wait until Boron, or shall I create the lookup dictionary?","Wouldn't a bugfix release of Salt 2015.8.3 for Windows that includes Python 2.7.11 be simpler compared to re-implementing [platform.win32_ver()](https://github.com/python/cpython/blob/2.7/Lib/platform.py#L624), especially since the bug's already been patched in Python?"
saltstack/salt,https://github.com/saltstack/salt/issues/12922,saltstack_salt_issues_12922,"salt-minion service crashes after util.sync_modules

salt-minion service crashes after util.sync_modules . It appears to finish the job and the files get copied, but the service goes away without a sound and does not come back. `service salt-minion status` tells me the pid file exists but the process is dead. Also odd, is the last thing the output reports is that it is unable to connect to the master. log from `salt-minion -l all` [DEBUG ] Decrypting the current master AES key [DEBUG ] Loaded minion key: /etc/salt/pki/minion/minion.pem [INFO ] Caching directory '_modules/' for environment 'base' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/getinfo.py' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/getinfo.pyc' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/getinfo.pyo' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/runners/nrpe.py' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/runners/nrpe.pyc' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/runners/nrpe.pyo' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/salttest.py' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/salttest.pyc' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/salttest.pyo' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/sample.py' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/sample.pyc' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/sample.pyo' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/util.py' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/util.pyc' [INFO ] Fetching file from saltenv 'base', *\* skipped *\* latest already in cache 'salt://_modules/util.pyo' [DEBUG ] Local cache dir: '/var/cache/salt/minion/files/base/_modules' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/getinfo.py' to '/var/cache/salt/minion/extmods/modules/getinfo.py' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/getinfo.pyc' to '/var/cache/salt/minion/extmods/modules/getinfo.pyc' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/getinfo.pyo' to '/var/cache/salt/minion/extmods/modules/getinfo.pyo' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/runners/nrpe.py' to '/var/cache/salt/minion/extmods/modules/runners/nrpe.py' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/runners/nrpe.pyc' to '/var/cache/salt/minion/extmods/modules/runners/nrpe.pyc' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/runners/nrpe.pyo' to '/var/cache/salt/minion/extmods/modules/runners/nrpe.pyo' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/salttest.py' to '/var/cache/salt/minion/extmods/modules/salttest.py' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/salttest.pyc' to '/var/cache/salt/minion/extmods/modules/salttest.pyc' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/salttest.pyo' to '/var/cache/salt/minion/extmods/modules/salttest.pyo' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/sample.py' to '/var/cache/salt/minion/extmods/modules/sample.py' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/sample.pyc' to '/var/cache/salt/minion/extmods/modules/sample.pyc' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/sample.pyo' to '/var/cache/salt/minion/extmods/modules/sample.pyo' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/util.py' to '/var/cache/salt/minion/extmods/modules/util.py' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/util.pyc' to '/var/cache/salt/minion/extmods/modules/util.pyc' [INFO ] Copying '/var/cache/salt/minion/files/base/_modules/util.pyo' to '/var/cache/salt/minion/extmods/modules/util.pyo' [DEBUG ] MinionEvent PUB socket URI: ipc:///var/run/salt/minion/minion_event_fe204ff696df2a6b3899476ebfb13c2d_pub.ipc [DEBUG ] MinionEvent PULL socket URI: ipc:///var/run/salt/minion/minion_event_fe204ff696df2a6b3899476ebfb13c2d_pull.ipc [INFO ] Returning information for job: 20140520184559537696 Failed to connect to the Master, is the Salt Master running? Failed to connect to the Master, is the Salt Master running? [edit: formatting]","What OS are you using? If you remove the custom modules from `_modules` on the master, does the minion start properly?",The minion starts fine after the modules are sync'd . It has to be started up manually post-sync
saltstack/salt,https://github.com/saltstack/salt/issues/12943,saltstack_salt_issues_12943,"cmd.script not using env list from sls

Perhaps I am doing something wrong... but cannot figure out what it is. I am using the example given in the [docs](http://docs.saltstack.com/en/latest/ref/states/all/salt.states.cmd.html#salt.states.cmd.script) ",Would using Salt's PPA be an option?,"Sorry should have updated this. I ended up just installing the salt-minion via cloud-init to whatever version it can find, then I use salt to install the PPA and upgrade it as the first step. Solves my problem."
saltstack/salt,https://github.com/saltstack/salt/issues/13247,saltstack_salt_issues_13247,"salt.states.pkg using * in version causes it to fail everytime

This actually has the desired outcome with the version I want installed, but the state returns false. My state: ","What version of salt are you using, and on what system? (`pkg` uses different execution module depending on target system)","I'm using Ubuntu 14.04. I install salt-minion as part of my cloud-init process, then salt the box which adds the PPA and installs the version I want. The package ubuntu provides is 0.17.5+ds-1."
saltstack/salt,https://github.com/saltstack/salt/issues/14836,saltstack_salt_issues_14836,"2014.1.10 Zombie Processes

Pretty much the same as https://github.com/saltstack/salt/issues/10867 ",What OS and what init system is controlling the salt-minion being started under?,"Ubuntu 14.04 and I'm using ""service salt-minion start"", so I'd assume upstart. I've stopped using /etc/init.d style."
saltstack/salt,https://github.com/saltstack/salt/issues/29666,saltstack_salt_issues_29666,"Nova driver broken for 2015.8.[1-3]

I upgraded to 2015.8.1 today. My environment is using centos 7 as OS. Using salt-cloud nova driver with Openstack (kilo) is broken . --snip--  I tested this with salt 2015.8.3 . The results are still the same.",Can you give that a try and let us know if you're still seeing problems?,I can confirm the issue persist on 2015.8.3
saltstack/salt,https://github.com/saltstack/salt/issues/28519,saltstack_salt_issues_28519,"Error on minion ""'service.running' was not found in SLS""

Hello! This is my Salt:  How it could be fixed? Thank you in advance!",Does this only happen for services that don't exist? Will you post the output of `salt <minion> state.show_sls <broken_service>` for the sls file that is failing?,"@jfindlay actually this happened for service that really exists, it is some proprietary service so I changed its name to ""some_service"". This issue is intermittent: happens 1 time out of 100+ runs of this state. Here are more details about failing sls, but again I changed real service name to ""some_service"", sorry for that..  Hope it helps."
saltstack/salt,https://github.com/saltstack/salt/issues/29926,saltstack_salt_issues_29926,"Mine data from minions is being reported to part of masters

Hello! Salt versions info:  So for some reason part of minions reported its grains to mine on one master and another part of minions to the second master.. The same behaviour could be observed if mine_functions were configured through pillar. Do you have any idea why it could happen? Looking forward to your reply.",Did you run from `salt * mine.update` from one master or from both?,It does not matter - result is the same. Also I noticed that if restart all minions again then returns to masters will shuffle again.
saltstack/salt,https://github.com/saltstack/salt/issues/21073,saltstack_salt_issues_21073,"Problem with publish.publish and arg= parameter

Hello, I have a problem for using publish.publish with arg=""['opt=var','var=opt']"". I'm using salt-call on a minion, it's in peer option on the master. The communication is working. When I do a test.ping, it's working:  I don't know if it's a bug or if the documentation is wrong or if the problem is between the keyboard and the chair ;-) Thanks for your help. Damien DESMARETS",Can you post the output of `salt-call --versions-report` please?,Yes for sure: 
saltstack/salt,https://github.com/saltstack/salt/issues/13073,saltstack_salt_issues_13073,"--exsel not working in salt-2014.1.3

Despite of its usefulness, shouldn't this work? ",Should we? Or completely remove it?,"Bye bye --exsel ,nice having you here. I wish you come back soon ;-)"
saltstack/salt,https://github.com/saltstack/salt/issues/13413,saltstack_salt_issues_13413,"2014.1.4 minions cache s3fs sourced files in the wrong place

Honestly, I don't even understand why the minion would have the info to do this. However, here it is: ",Can you run states out of the s3fs just like the other fileserver backends?,Yes. I can run the states with expected names (e.g. wt-test.broker). Even state includes work. E.g.: 
saltstack/salt,https://github.com/saltstack/salt/issues/15773,saltstack_salt_issues_15773,"Pillar modules reloaded even when unchanged

I was developing a new ext_pillar module. Here's the logging when I run pillar.data on a minion:  These logs show up ever time I run the pillar.data on the minion. The ""blahblahblah"" line is logged at the global scope of the module, so why does it appear to be loaded 4 times? Also, if you look in the logging just below that, you'll see that I am updating a cache of my AWS assets. I am trying to update the cache only every 60s. You can see the update is skipped on all but the first time I am updating the cache. This happens within the ext_pillar function. The problem is that the module doesn't keep the cache between invocations, so I end up populating the cache once for ever invocation of pillar.minion, I am guessing that the module is reloaded for every invocation of pillar.data. It also appears that the ext_pillar method is being run 4 time for each invocation of pillar.data. Why is it doing those things?",Can you give us the output of your versions report to help us debug this issue?,How do I do that?
saltstack/salt,https://github.com/saltstack/salt/issues/25891,saltstack_salt_issues_25891,"pillar.show_top runner doesn't work with git_pillar

I get no output for the following command:  I am using the version packages in EPEL6 on Amazon Linux.",Do the minions log show any indication that it's trying to fetch the pillar top file?,Does salt-run have anything to do with minions? Here's another run with debug logs: 
saltstack/salt,https://github.com/saltstack/salt/issues/19306,saltstack_salt_issues_19306,"DigitalOcean API v1 private_networking is set to True instead of 'true'

According to DO support it should be 'true' or '1', else it'll take as false. Tried to set it on cloud profile as 'true' but it'll capitalize it anyway. [DEBUG ] Sending event - data = {'_stamp': '2014-12-30T19:58:26.712097', 'event': 'requesting instance', 'kwargs': {'name': 'test01-fsn', 'size_id': '66', 'image_id': '6918990', 'ssh_key_ids': '167316', 'private_networking': True, 'region_id': '4'}}",Could you verify with a trace logging level whether it is being cast as `True` or `true`?,I did check the URL when doing -l debug and it was with caps as well: 
saltstack/salt,https://github.com/saltstack/salt/issues/19828,saltstack_salt_issues_19828,"Ability to easily call target interface IP on a pillar

This would allow pillars to be more generic. I haven't found a way to do so, specifically in a redis formula on which I have to specify a bind interface. If I could specify ipaddr['eth1'](example) it would facilitate things a lot","Can you clarify what you're trying to do? Maybe with some example pillar code or something? I'm not sure what you mean by ""call target interface IP on a pillar"".","@basepi I'm trying to do something like this:  That portion is something I dug out of googling around, I'm trying to set up redis servers without needing to make a different pillar for each server. And that the 'bind' parameter is set to eth1's IP"
saltstack/salt,https://github.com/saltstack/salt/issues/19852,saltstack_salt_issues_19852,"DigitalOcean APIv2 can't delete machines when there is only 1 page

If you don't have enough VMs for a second page and you try to delete one, it fails with  I'm guessing some sort of condition needs to be set before the while",Can you please post the output of `salt-cloud --versions-report`?,"@rallytime I'm using debian packages + digital_ocean_v2.py from master branch, I did the modifications for it to work with multiple pages, yet it escapes my knowledge on how to 'failsafe' it Cheers "
saltstack/salt,https://github.com/saltstack/salt/issues/39848,saltstack_salt_issues_39848,"Amazon Linux repo appears to be missing 2016.11

https://repo.saltstack.com/yum/amazon/ does not have 2016.11 directory. However, there is a 2016.11 directory under each of the other versions. https://repo.saltstack.com/yum/amazon/2015.03/x86_64/2016.11/ https://repo.saltstack.com/yum/amazon/2015.09/x86_64/2016.11/ https://repo.saltstack.com/yum/amazon/2016.03/x86_64/2016.11/ https://repo.saltstack.com/yum/amazon/2016.09/x86_64/2016.11/ https://repo.saltstack.com/yum/amazon/latest/x86_64/2016.11/ This makes it really confusing to mirror internally.",Can you clarify what those other directories are?,Got it. I was confused by the two date based version systems. Thanks
saltstack/salt,https://github.com/saltstack/salt/issues/13266,saltstack_salt_issues_13266,"salt-cloud: TypeError 'bool' object is unscriptable on map destruction

I am attempting to destroy a map of VM's using the devel vSphere cloud provider. The VM's get created just fine and I can destroy them one-by-one, but I can't seem to destroy them using ""salt-cloud /etc/salt/cloud.maps.d/testpool.map -d"" as it throws this exception. Output: [ERROR ] An un-handled exception was caught by salt's global exception handler: TypeError: 'bool' object is unsubscriptable Traceback (most recent call last): File ""/usr/bin/salt-cloud"", line 10, in <module> salt_cloud() File ""/usr/lib/python2.6/site-packages/salt/scripts.py"", line 142, in salt_cloud cloud.run() File ""/usr/lib/python2.6/site-packages/salt/cloud/cli.py"", line 141, in run matching = mapper.delete_map(query='list_nodes') File ""/usr/lib/python2.6/site-packages/salt/cloud/**init**.py"", line 1515, in delete_map elif vm_details['state'].lower() not in ('running', TypeError: 'bool' object is unsubscriptable Traceback (most recent call last): File ""/usr/bin/salt-cloud"", line 10, in <module> salt_cloud() File ""/usr/lib/python2.6/site-packages/salt/scripts.py"", line 142, in salt_cloud cloud.run() File ""/usr/lib/python2.6/site-packages/salt/cloud/cli.py"", line 141, in run matching = mapper.delete_map(query='list_nodes') File ""/usr/lib/python2.6/site-packages/salt/cloud/**init**.py"", line 1515, in delete_map elif vm_details['state'].lower() not in ('running', TypeError: 'bool' object is unsubscriptable --Map File-- Mob_Server2012R2U1: - TH-ST-12R2-PWH: grains: pool_id: 1234 Mob_Server2008R2: - TH-ST-08R2-NMS1: grains: pool_id: 1234 --End Map File--",What version of salt are you using?,salt-master/cloud is running 2014.1.0-6887-g5fa1127 (Hydrogen). I compiled it a few days ago as the devel branch is the only one with the vSphere module.
saltstack/salt,https://github.com/saltstack/salt/issues/13408,saltstack_salt_issues_13408,"jinja renderer error reporting not fixed

Per issue #8418, Salt was misreporting the line number of jinja renderer errors. This was supposedly fixed with pull #8475 in 2014.1.0. However, I just encountered the same error in 2014.1.4, indicating that the underlying issue is not, in fact, fixed. Is this something wrong with jinja? Error example. As you can see, jinja is reporting an error with the variable hr_db, but pointing to a line containing a different variable (a line which is about 30 lines away from the actual source of the bug). ",Can you provide the whole file for reference?,"FWIW, I have no idea how it picked that line or that variable. It's not the next variable reference in the file, and it's not the next one per set statement."
saltstack/salt,https://github.com/saltstack/salt/issues/13290,saltstack_salt_issues_13290,"specifying batch size to cmd.run hangs after completing all the requests.

Specifying -b option for salt client causes command to hang. Version of salt-master: 2014.1.4+ds-2~bpo70+1 (installed via deb package) python 2.7.3-4+deb7u1 Verified also in earlier versions of salt. To reproduce: `salt -L host1 -b 10 grains.item fqdn` Expected result: `host1 Detected for this batch run Executing run on ['host1'] host1: fqdn: host1` Actual result:  Funny thing is - command works fine and exits when batch size is not specified. After bit of digging I found out that 3 instances of salt-minion were running on host1",Did killing the extra instances of the minion solve the issue?,Yes. killing extra minion instances solved the issue. But. Running small changes with in large environment is still annoying.
saltstack/salt,https://github.com/saltstack/salt/issues/19213,saltstack_salt_issues_19213,"cron.absent & test=True reports wrong state.

I create a crontab task ",Can you also provide the output of `salt --versions-report`?,both server and client 
saltstack/salt,https://github.com/saltstack/salt/issues/44441,saltstack_salt_issues_44441,"salt slower (5 to 10 times) when including a lot of pillar files in pillar's top.sls

### Description of Issue/Question I have architectured my deployment system with many apps having there own sls file. (myapp1.sls, myapp2.sls, myapp3.sls, etc..) I call salt <host> state.sls myapp*.sls for each app to deploy manually. I also have a custom pillar sls file for each application. (myapp1-pillar.sls, myapp2-pillar.sls, etc...) in the pillar's top.sls I include every app's custom pillar ( there are 270) ",Could you try adding `#!json` as the first line in the file? so that it loads using the json renderer instead of yaml,"Thanks for the hint, it gets much better, I now have run times oscilating between 10 and 15 seconds where it was 50 seconds before not using the `#!json` directive. The `#!json` directive is necessary in all of the subfiles. If I use the ""big.sls"" file without implicit top.sls includes, I'm still faster, oscilating between 6 and 10 seconds. Doing a quick and dirty run with python cProfile I can isolate (I believe) the pillar parsing time/communication with master which accounts for the performance gap  is this respectable performance for JSON python parsing ?"
saltstack/salt,https://github.com/saltstack/salt/issues/13533,saltstack_salt_issues_13533,"parameters reversed on os.kill in master.py:clean_proc

`clean_proc` makes the call to `os.kill` as follows:  See: https://github.com/saltstack/salt/blob/develop/salt/master.py#L73 However, the docs have a different take on how it works. :) https://docs.python.org/2/library/os.html#os.kill",What's wrong with the way we're using it?,"The signal and pid parameters are reversed. When it's called the way it is now, it raises an `OSError` with errno 22."
saltstack/salt,https://github.com/saltstack/salt/issues/35827,saltstack_salt_issues_35827,"master not inheriting environment variables

### Description of Issue/Question Since upgrading from 2015.8.10 to 2016.3.2, the master no longer seems to inherit the environment that invoked it. ### Setup We have a few different parts involved here: - a runner that uses `subprocess` to invoke devpi commands (`devpi use`, `devpi login`, `devpi upload`) - an private certificate authority with our root/intermediate certificates installed into the system CA cert bundle - a global environment variable configured in `/etc/profile.d`: `export REQUESTS_CA_BUNDLE=/etc/ssl/certs/ca-certificates.crt` We use the environment variable so that any one of our tools/applications/libraries requiring Requests will use a CA bundle with our root certificates in it. That way we avoid having to ignore SSL validation errors, and we also avoid having to pass CA cert options to every tool that depends on Requests (some of which don't even _have_ options to specify CA certs). Relevant runner source: ",Does my test case above work in your environment?,"Sorry, I somehow completely missed your test case when you shared it. I will try it tomorrow and report back."
saltstack/salt,https://github.com/saltstack/salt/issues/22321,saltstack_salt_issues_22321,"module.portage_config bug with appending accept_keywords

If we run  but this two flags couldn't be together - `~amd64` means that we want to install the last unstable version, and `amd64` flags means that we want to install stable version. I afraid, that this issue could be avoid, but I found one way: I changed function `_merge_flags` into module `portage_config`...",What is the output of `salt --versions-report`? Thanks.,"If two keywords exist (amd64, ~amd64), portage use ~amd64.  Thanks, Jfindlay)"
saltstack/salt,https://github.com/saltstack/salt/issues/13687,saltstack_salt_issues_13687,"Empty requirements.txt file

Is there a reason why the requirements.txt is currently empty? (24 - 06 - 14). In any case, HACKING.rst directs you to run pip install -r requirements.txt, which fails with an empy file.",Can you comment?,"Wow, let me check On Jun 26, 2014 5:56 PM, ""Colton Myers"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/13694,saltstack_salt_issues_13694,"salt-virt times out after ~30VMs on a Hypervisor

I'm having a problem where the salt-virt runner runs into a timeout and is no longer able to find Hypervisors or init or purge VMs on them once they have ~30+ VMs running on them. I tried to set a higher timeout but it seems to be ignored. I'm running 2014.1.5+ds-5trusty on Ubuntu trusty on a one node test setup. ",What salt version are you using?,
saltstack/salt,https://github.com/saltstack/salt/issues/13695,saltstack_salt_issues_13695,"salt-virt pre-seeding breaks when running several virt.init in parallel

I was running the two commands  This happened at the same time I ran into the problems described in issue #13694",What salt version are you using?,Version is 2014.1.5.
saltstack/salt,https://github.com/saltstack/salt/issues/15334,saltstack_salt_issues_15334,"Minion dies with ""TypeError: 'NoneType' object is not iterable""

My system is Ubuntu 14.04 with salt 2014.1.10+ds-1trusty1 My minion is unresponsive though the process is running. The entire minion log is filled with the following repeating message:  I already found issue #1000 ([FreeBSD] 'salt-call state.highstate' results in: TypeError: 'NoneType' object is not iterable) but my sls files are indented correctly and other minions are running fine. What else could I check for?",Could you please let us know which version of Salt is running on your minion? `salt --versions-report`.,I have indeed. One of the formulas I was toying around with is updating a Bind zone file. I believe the root of the problem could be somewhere in the salt mine though because I have another formula that used to generate /etc/hosts based on minion's network.ip_addrs which apparently isn't working anymore either. The bind test formula. This was running on the minion I reported the problem for.  Right now this is all running in my lab setup and when I checked today all 21 minions were unresponsive and there were four salt-minion processes running on each of them. Interestingly the error message they are logging in /var/log/salt/minion is the same they would be logging when their key hasn't been accepted yet (i.e. Salt Master has cached... etc.). So I'm not sure if the two problems are related or if I've ran into another bug. Will have to debug that further.
saltstack/salt,https://github.com/saltstack/salt/issues/15661,saltstack_salt_issues_15661,"salt-ssh doesn't allow --static for --output=json thereby generating unparsable JSON data

The manpage for salt-ssh sais: `If using --out=json, you will probably want --static as well.` However when executed with `--static` salt-ssh throws: `salt-ssh: error: no such option: --static` When using salt-ssh with --out=json and without --static the resulting output is not readable by a JSON parser.",Could you please provide us with a `--versions-report`?,I'm running on CentOS 7 with current EPEL packages. 
saltstack/salt,https://github.com/saltstack/salt/issues/19382,saltstack_salt_issues_19382,"RPM installation via Salt reports error on success

I have a simple formula  This is on CentOS 7 with salt-minion 2014.7.0 (Helium)","Can you please add the actual state output as well? With the result, comment, changes, etc?",That's it! Thank you so much!
saltstack/salt,https://github.com/saltstack/salt/issues/15776,saltstack_salt_issues_15776,"cmd.run state always executes, when using creates parameter and files exists, in 2014.1.7

Similar to #12285, except the documentation says it should be supported in this release: ","Does that help clear that documentation issue up for you? If so, feel free to close this issue.","Yup, I mixed up the 2014.1.7 and 2014.7. Thanks for looking into it, I apologize for opening the unnecessary issue."
saltstack/salt,https://github.com/saltstack/salt/issues/13802,saltstack_salt_issues_13802,"salt.states.alias does not recognize alias if it is in quotes

- target: example@example.com If in /etc/alias we have user: ""example@example.com"" the module will not detect it, though this appears to be a valid entry and equivalent to the one without quotes.",Can you include the full state that you're using?,"root_alias: alias.present: - name: root - target: ""user+example.example@gmail.com"" Just thought that it could be the part after + that interferes with the regexp."
saltstack/salt,https://github.com/saltstack/salt/issues/13992,saltstack_salt_issues_13992,"Please add fqdn_rand function

Puppet has this handy function that returns the random number for each different host, but same host gets the same number everytime. This allows to randomize the cronjob execution efficiently. Here is the source which seems to be quite simple. https://github.com/puppetlabs/puppet/blob/master/lib/puppet/parser/functions/fqdn_rand.rb",Can you explain the use case for this? The cron states already allow for randomized values.,"fqdn_rand is deterministic random. Besically it is mostly the same, but is more flexible comparing to states.cron#random. This is how I used it in puppet.  Besides that states.cron#random does not modify file if it is already present which limits it's use. What if one would like to regenerate these randoms?"
saltstack/salt,https://github.com/saltstack/salt/issues/14338,saltstack_salt_issues_14338,"Please add support for simple variables in top.sls

Would be great to have the ability to set variables directly in the top.sls file, i.e.  Currently the best way I found is to create a custom pillar that reads such variables from plain ini file.",Can you tell me more about your use case?,"Say you have 10 servers and each has it's own setting for innodb pool size, open firewall ports, sshd port and whatever else may be needed. I've been looking for possible options to do that and these were per host grains or pillars, but they are too cumbersome to setup you will likely need a sparate file for each host to only have these settings. You can see this discussion: https://groups.google.com/forum/#!topic/salt-users/6BPSS-iMBiw This was all about pillars, however I don't see why we can't have something like this directly in top.sls "
saltstack/salt,https://github.com/saltstack/salt/issues/14465,saltstack_salt_issues_14465,"Improve debugging for file.source

Currently both master and minion are silent about which particualr files they are trying to fetch and which one is failing Example of sls and minion log. I'm trying to figure out which file I should have in this case, but will likely have to use strace for that.  In case of multiple source lines it would be good to debug-print which files were tried and not found.","What log level are you using? (Edit: log level, not debug level)","The log is from 'salt-minion -l debug', while it's being debug it turned out to be not so much detailed. Thanks for your hard work!"
saltstack/salt,https://github.com/saltstack/salt/issues/14470,saltstack_salt_issues_14470,"Please add a command line option for salt for compact output

Would be great if there would be an option like --output=compact to output only changes, errors and summary. Or I'd rather like it to output like that by default with an option to produce full output. It's just that most of the time I don't need to see all of the 150 unchanged states for my 20 hosts which produces an enormous sheet of unneeded information. For now I'm stuck at using 'salt --force-color ...|less -R' which is more compact and still allows me to search for the lines I need, but this is far from ideal.",Can this be closed?,"This one seems to be good, thank you"
saltstack/salt,https://github.com/saltstack/salt/issues/15400,saltstack_salt_issues_15400,"salt sometimes produces empty output

For me this often happens when I begin working with salt, i.e. first runs tend to be empty more often Here is the log, which gives no clue as to what is happening at all. salt ~ # salt --force-color 's2._' state.highstate salt ~ # salt --force-color 's2._' state.highstate salt ~ # salt --force-color 's2.*' state.highstate",Could you please provide the output of `salt --versions-report`? That will provide a good starting point for us to figure out what's going on here.,"Thanks for looking into this.  In this case it's about timeouts, but still, there is no error/warning message at all. Overall I'd say salt should always report something after each run, unless it was instructed with some 'quite' option, so that user has some idea about what is happening."
saltstack/salt,https://github.com/saltstack/salt/issues/27228,saltstack_salt_issues_27228,"salt-minion not installable on debian jessie x86

I'm getting this ",What system and version are you installing on and what is the contents of `/etc/apt/sources.list` as necessary?,
saltstack/salt,https://github.com/saltstack/salt/issues/15145,saltstack_salt_issues_15145,"Flexible Selection of States

In the current versions (including 2014.7.0) of salt there are the following methods of addressing states: http://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.state.html#salt.modules.state.single http://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.state.html#salt.modules.state.sls http://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.state.html#salt.modules.state.sls_id Can we do the following where basically all states being prefixed by 'state-prefix' are evaluated and executed? `salt-call state.run 'state-prefix*'` As far as we know, there are many ways to target minions like this but we somehow miss those capabilities for states. An option whether to include requisite states should be evaluated and executed would be helpful for all those methods.",What do others think?,"Yes, something like that. The very best would be if state selection would have the very same capabilities like minion targeting like using grains, pillars, tags, globbing etc. The mechanism for that is already available, I think."
saltstack/salt,https://github.com/saltstack/salt/issues/21251,saltstack_salt_issues_21251,"salt-ssh and pkg.installed

What is necessary to do here? ","What is the output of `salt-ssh --versions-report`, and wh are you working with? Thanks.","That should be somehow mentioned on the salt-ssh documentation page in big red letters :+1: I am currently not at work. But I will get you that output soon. Distros are OpenSUSE 12.3 and I remember using salt 2014.7. More info: I had the salt and the salt-minion package already installed on the host. However, ssh is more appropriate for us as we have limited configuration capabilities along the network path. With remote port forwarding (using ssh), we can circumvent that restriction quite easily. So, I gave salt-ssh a try to see how it performed."
saltstack/salt,https://github.com/saltstack/salt/issues/26467,saltstack_salt_issues_26467,"[salt-ssh] aborting a job leads to corrupted salt-thin.tgz in the next run

Aborting a job leads to corrupted salt-thin.tgz in the next run  Shouldn't the file be ignored the next time or another tmp dir be created?",What version are you running? `salt --versions-report` And what are you doing to abort a job? Thanks,Just pressing 'ctrl+c' in the terminal. 
saltstack/salt,https://github.com/saltstack/salt/issues/26954,saltstack_salt_issues_26954,"Titles of Documenation Pages for SEO

When searching for grains, it is not clear to me from seeing a Google result whether the page is about ""Targetting Minions"". Would it harm to add the super category to the title of the page? https://www.google.de/search?q=salt+grains","What do you think, @jacobhammons?",I would love that.
saltstack/salt,https://github.com/saltstack/salt/issues/27518,saltstack_salt_issues_27518,"[Docs] Relationship between Mine and Grains

I wonder what the relationship of Mine and Grains is supposed to be. Both can be used to retrieve several pieces of information **from the minion** and both can be incorporated into states execution. Personally, I find grains more convenient to work with as they have the out of the box experience. Is the salt mine intended to replace grains or is supposed to be a completion to grains?",Does that make sense?,"First, thanks @basepi Does it makes sense: yes and no. :D Yes, because you are right when thinking of IP address, host name, num cps etc. as a static data. More dynamic data might exist which can be re-used by all minions. Thus, the main differences is: grains are minion-local and static, whereas mined data is for all minions and short term. At least this, I can see where the initial intentions are. No, because, at least I find it hard to define a clear boundary between static and dynamic (daily? weekly? monthly?). Can one understand that? @jfindlay's pull request additionally throws the concepts of ""returners"" and ""job cache"" into the game. All of them provide some mechanism to retrieve data from the minions to the master which can then be used for subsequent minion calls. So, I was thinking about more unifying concept which separates out the following orthogonal aspects: 0) update path: minion-driven, master-driven 1) minion-privacy: data is public to all minions or not 2) currentness: data is up to date or obsolete (age) 3) revisions: how many different revisions of the (mining/returning) result is stored Don't get me wrong, I appreciate having several tools to deal with our issues at hand. However, with the number of tools for the (from my perspective) seemingly same thing, it makes it harder A) to find the right approach in the first place B) to chose the right approach before you even know what you really need C) to change the approach once you discover you need the other one (Disclamer: we use salt-ssh to communicate with the minions as they are outside our home network)"
saltstack/salt,https://github.com/saltstack/salt/issues/28333,saltstack_salt_issues_28333,"[salt-ssh] always return exit code 0

Is there some way, I can force the exit code 0?",Can you provide your salt version with:  Why are you wanting to force an exit code 0?,"@jtand That'll be great. We grep the output of salt for ""Failed: 0"" to signal success instead of relying on return codes. Maybe, there is a better way to work with the result (= exit code + stdout) of salt? Here, you are: "
saltstack/salt,https://github.com/saltstack/salt/issues/28351,saltstack_salt_issues_28351,"Skip Set of States when a cmd exits non-zero

Imagine I have n states and I would like to skip them altogether. The `unless` clause might be a solution. The issue with `unless` is that I need to repeat the cmd n times. That has several drawbacks: - code cleanliness and maintainability - execution time (in our case cmd takes several seconds to complete) You might ask, why not using a `{% if %}` to prevent the execution of the states in the first place? Because, before the execution of the cmd, several other states need to be applied in order for the cmd to work properly. Is there an existing solution I am missing?",Does that make sense?,"@basepi Yes, a lot actually. So, for now, I would able to achieve what we need by implementing the later solution. You said there are only two things to cue off something. Would it make sense to add a third one? Something like like ""tags"" where each state could publish arbitrary pieces of data which then can be listened on by other states?"
saltstack/salt,https://github.com/saltstack/salt/issues/31079,saltstack_salt_issues_31079,"Automatic Invalidation of ThinTGZ

After a lot of successful runs of salt-ssh, the following bug occurs:  Our dirty solution: removing the thin-tgz on the minion `minion-server:~ # rm -rf /tmp/.root_dcdf8c_salt`",What is the output of `salt-ssh --versions-report`? Do you have any other info or suspicions on when/how the thin tar becomes corrupted?,Not really. :/ 
saltstack/salt,https://github.com/saltstack/salt/issues/34419,saltstack_salt_issues_34419,"Is OpenSUSE 11.4 as a minion for salt-ssh still supported?

Today, we upgraded from salt-ssh 2015.8.3 to 2016.3.1. For our openSUSE 11.4 hosts, we incur the following issue: ",would you mind trying to change that line to `if not grains.get('lsb_distrib_codename'):` and seeing if that works?,"@Ch3LL Sure. That seem to fix it. :) Another issue related hereto is the changing of the 'osrelease' string. We could fix it more or less easily. Interestingly, it changed from ""114 SP"" to ""114""."
saltstack/salt,https://github.com/saltstack/salt/issues/35594,saltstack_salt_issues_35594,"expand ~ to user home directory

For example:  Would be great if '~' always expands to the desired home's directory (during the execution of the state). Same for file.copy etc. Right now, it expands to '/root'. This would also be great for 'cmd.run'.",Does his solution work for you @srkunze ?,@xenophonf Sounds good! Thanks. :)
saltstack/salt,https://github.com/saltstack/salt/issues/47150,saltstack_salt_issues_47150,"[Regression] ip_to_host and SSH._expand_target require missing reverse-lookup

Hey folks, we got an interesting problem. We fixed it by temporarily updating our DNS entries but this won't last long. So, this problem occurred after upgrading to 2018.3.0. This is what we saw at the first glance  ### Why does gethostbyaddr fail? Because the minion ""minionname"" hadn't a reverse DNS lookup (IP to Name). Temporary adding it fixed it for now but it won't work for long as those are dynamic IP addresses. ### Can you ping the host? Yep, we can even ssh to minionname perfectly fine. ### Why does the reverse-lookup matter for salt? That is this issue about. We cannot even use blank IP addresses. They fail as well. ### Last question: can we have `ip_to_host` reraising it's original exception? That would be great for debugging next time. Because as you can see the catching assert is far away from the original place where None was introduced into the variables. And backtracing took a while to figure out.",Did you add that assert? Can you post the roster entry that corresponds to `minionname`?,Looks good! :+1:
saltstack/salt,https://github.com/saltstack/salt/issues/13878,saltstack_salt_issues_13878,"UnicodeEncodeError failure on cmd.run state enforcement with user argument

When I call `env` program with `cmd.run` it works:  _Software:_ master: salt 2014.1.4 on Linux 3.2.0-4-amd64 #1 SMP Debian 7.3 3.2.57-3 x86_64 GNU/Linux minion: salt 2014.1.5 on Linux 3.11.10-17-desktop #1 SMP openSUSE 13.1 x86_64 GNU/Linux inside VirtualBox. If I specify `root` as a user it works. If I use `name: 'su bin -c ""env""'` it works too. Changing `shell` to `/bin/bash` doesn't help. PS: it looks similar to https://github.com/saltstack/salt/issues/12611 and https://github.com/saltstack/salt/issues/12399 but in my case there is no unicode in env.",Can you please give us more info? What distro is the minion running?,"@terminalmage openSUSE 13.1 inside VirtualBox, Salt minion is installed from the repo: https://build.opensuse.org/package/show?project=devel:languages:python&package=salt"
saltstack/salt,https://github.com/saltstack/salt/issues/13972,saltstack_salt_issues_13972,"Salt minion did not return after 10 min of idle time

After about 10 min of idle time salt minion stops responding and any command that I run from the Master returns:  _Software:_ master: salt 2014.1.4 on Linux 3.2.0-4-amd64 #1 SMP Debian 7.3 3.2.57-3 x86_64 GNU/Linux minion: salt 2014.1.5 on Linux 3.11.10-17-desktop #1 SMP openSUSE 13.1 x86_64 GNU/Linux inside VirtualBox.",Could we please see a `--versions-report` please? This could be a case of needing to upgrade ZeroMQ on your machines.,@cachedout:  I see that PyZMQ versions differ. I've tried to upgrade it on a minion with no luck (Debian Stable). I will try to do it with pip but as I remember I had difficulties installing pyzmq + zmq with pip. Does it matter?
saltstack/salt,https://github.com/saltstack/salt/issues/15210,saltstack_salt_issues_15210,"master config: add support for modules, located in repositories in extension_modules 

I propose to add support for a modules, located in separate repositories. master config would look like this:  On each `saltutil.sync_what` master will sync extensions with minions. Why? 1. It will give an opportunity to easily extend Salt by writing modules/runners/etc. and use they in production not waiting until new Salt release. 2. It will give a very easy way to create 3rd party repositories an attach them to a running salt master and minions. 3. No problems with symlinking (especially in repositories) and installing hooks (to update on incoming commits). I think this isssue correlates with `gitfs` and `hgfs`.",Why not just install the `develop` version of salt at that point?,"Real use case: I needed to install VirtualBox guest additions automatically. I didn't find function for this in Salt. I spent some time, and created #15175. I developed it under `_modules` and `_states` directory (in salt root), which are under version control. I knew that this could be useful for others, to I uploaded those modules to the salt development branch. Then I understood that I have forgotten to check this, document that, etc. I was forced to change this file in the first place, commit, copy it to the salt repo, commit there... It's not very interesting. I couldn't use `develop` version of salt because this is my production server. I guess that a ""true way"" would be run development version of salt, create separate vm for testing, write unit tests, check it, check documentation, then create a final version of my modules and copy them to the production server. But I didn't read how to write unit tests for salt and didn't have enough time for doing this in a right way. If this feature would be implemented I could just use `develop` branch for developing those modules and point into them in the configs."
saltstack/salt,https://github.com/saltstack/salt/issues/15321,saltstack_salt_issues_15321,"Provide a way to cache results of function execution

I've prepared fish shell completion for salt #15310. On bad network connection delay between asking function list on remote minion and response can be long. If I need to wait 3 seconds to get completion it's a bad completion. Having option to cache results could change the way auto-completion works. Completion ask salt to get function list from the minion before user presses TAB to complete the function. When he actually presses it, salt returns immediately with the cached results. Of course I could make caching as a part of my completion script. That solution has two downsides: 1. Bash script completion should duplicate caching functionality. 2. If user fires up salt to get the list of all functions (or packages, for example) two times a row, he gets a long response. Cache invalidating is an a big issue, though. As a simple workaround I propose to add decorator `@readonly` to mark functions that only read the state, but not change it (like `pkg.list_pkgs`, `sys.doc`, etc.). Cache invalidates after some period of time (5 min by default, can be changed in master config) or if some function, that is not marked as `@readonly` was called. It's also possible to add special arguments to functions to manage cache usage (like `use_cache=True`, `set_caching_time=10`, etc.), but I don't think it's a good idea, because it adds magic to the functions.","Why not just pull the function list from the master? Unless you're doing fairly complex module syncing to only certain minions, the master should have all the information you need.","I thought that this approach could fail if I have different salt versions on minion and master (they could potentially have different functions). Also this doesn’t help with other lists (files, packages, grains, states, etc.)"
saltstack/salt,https://github.com/saltstack/salt/issues/15774,saltstack_salt_issues_15774,"sys.argspec and sys.doc inconsistency

Consider outputs:  I think that `sys.doc` does it correctly. For `sys.argspec` behaviour I would add glob support (like `salt server sys.doc 'cmd.which*'`).",Can you give that fix a try?,"Yes, it works. Globs are not implemented, though, I don't think they are required."
saltstack/salt,https://github.com/saltstack/salt/issues/21348,saltstack_salt_issues_21348,"systemd's service.* multiple arguments

I propose to implement multiple services handling in `service.*` functions such as `service.restart`: ",What specific problem are you trying to address? Is this considered to be just a convenience feature or is there a technical reason for this?,Just for convenience. Moreover it's very easy to implement.
saltstack/salt,https://github.com/saltstack/salt/issues/27155,saltstack_salt_issues_27155,"pkgrepo.managed gpgkey argument doesn't work with http in openSUSE

Neither:  work on openSUSE 13.1. Zypper asks for importing gpg key after the first refresh, that's why `pkg.managed` doesn't work.",What version of salt are you using?,"@jfindlay. Oh, forgot to mention: "
saltstack/salt,https://github.com/saltstack/salt/issues/13879,saltstack_salt_issues_13879,"Multi-master can cause reactors to stop working in some cases. 

EDIT by @basepi: We narrowed this down to a multi-master issue, not a 00-minion.conf issue. See comments below. Salt-minion installed from EPEL on CentOS 6.5 64bit. Version information:  The result is that events are not actually being triggered on the salt-master using the reactor system. Resolution: Do not create 00-minion.conf in /etc/salt/minion.d when setting up salt minions on new hosts.",Does it work if you put those contents directly in /etc/salt/minion instead?,Thank you for cleaning it up for me. I have tested this again with different amounts of stuff in 00-minion.conf I have found that the condition only occurs if you have:  If I only set the minion id but not the master ip the minion appears to work as expected when attempting to trigger an event.fire_master with salt-call.
saltstack/salt,https://github.com/saltstack/salt/issues/13943,saltstack_salt_issues_13943,"Powershell commands that expect input hang forever

Simple problem replication: ",What is your desired behavior here?,Sorry for the delay. Looks like we can call powershell with `-NonInteractive` to keep it from expecting input. Seems as though that's also what [puppet does](https://github.com/puppetlabs/puppetlabs-powershell/commit/a2789412cc972529079bec54466dfd0bcf82080d) to solve the same problem.
saltstack/salt,https://github.com/saltstack/salt/issues/14853,saltstack_salt_issues_14853,"Job submitted but never run

What happened to this job? I submitted it but near as I can tell it never got run:  How can I examine this further? Master: 2014.1.7 Minion: 2014.1.10",Could you please provide the debug log on the minion during the run? I want to see if the minion actually got the job or not.,@basepi I think the master/minion may actually have been synced… I'll go back and look at this shortly. I think what may have happened was that the minion was offline at time of job submission (rebooting) but when the minion started it never picked up the job.
saltstack/salt,https://github.com/saltstack/salt/issues/16682,saltstack_salt_issues_16682,"Documentation: Listening/Firing events from Windows minion

I see in the [event documentation](http://docs.saltstack.com/en/latest/topics/event/index.html#firing-events-from-code) how to listen/fire events from *nix hosts, but what about Windows? I've tried: ",Which version of Salt are you running on this Windows minion?,2014.1.10
saltstack/salt,https://github.com/saltstack/salt/issues/18611,saltstack_salt_issues_18611,"v2014.7: event system behaves differently

v2014.7 significantly changes the semantics of the event listeners: ",How are you testing this? Seems like without careful planning you could be very susceptible to race conditions.,"In my ""real code"" I'm firing some events back and forth between the master and minions for message passing, but while testing it I'm generating events by hand. The actual sequence of events is more like: "
saltstack/salt,https://github.com/saltstack/salt/issues/21118,saltstack_salt_issues_21118,"salt-ssh: run as non-root when using password auth

When using `salt-ssh` as a normal user I should be able to use password authentication without requiring the generation of keys.  Version: `salt-ssh 2014.7.1+ds-3precise1`",Does it try to generate keys if you pass in `--askpass`? That's the way to do password authentication.,In this case I have a password specified in a roster file. 
saltstack/salt,https://github.com/saltstack/salt/issues/13983,saltstack_salt_issues_13983,"SMF module for SmartOS can't determine if a service is available.

Packages installed via `pkgin` in SmartOS have one name. When Salt checks `svcs` to see if it is available, `svcs` returns a portion of the FMRI name which is different. For example, `salt 'webserver.*' pkg.install nginx` works as expected. Yet, `salt '*' service.available nginx` returns **false**. Any of the other service functions that begin by checking if the package is available will also fail. So to install _nginx_, we use the name _nginx_. But when the [smf module queries for the available services](https://github.com/saltstack/salt/blob/v2014.1.5/salt/modules/smf.py#L87-L98), it checks to see if _nginx_ is in the results from [get_all](https://github.com/saltstack/salt/blob/v2014.1.5/salt/modules/smf.py#L116-L134). `get_all` returns _pkgsrc/nginx_, not nginx. Any help would be greatly appreciated! ",Will you please submit a pull request?,I've not checked the contributor's guidelines yet. Would a short explanation for the if statement be appropriate in the comments?
saltstack/salt,https://github.com/saltstack/salt/issues/13986,saltstack_salt_issues_13986,"salt cloud gce ""PyCrypto library required""

salt-cloud can't find pycrypto library. But pycrypto is already installed. ",What version are you running?,Thanks for fast replay. I'm running `0.14.1`. 
saltstack/salt,https://github.com/saltstack/salt/issues/19608,saltstack_salt_issues_19608,"Feature: enable salt-cloud to run a list of commands defined in a cloud profile

The idea: I'd like to be able to run arbitrary commands either after salt cloud's bootstrap script has run, or if that was skipped. I'd like to specify that list of commands as part of the cloud profile for a type of machine instance, in YAML format. Example:  The above would then convert into a bash script and execute the commands in sequence, at first probably regardless of whether the previous command was successful (as one could do that as part of the command for now). I will be working on this over the next week or two and hope to get this to work, if someone's interested in this, please get in touch.","Why not just use a custom script that wraps the bootstrap script, and then runs your custom commands in the order you want?","Because I don't want to have to place a script (as root) somewhere so that salt-cloud can access it. I did see that you can specify a full path for the script, but if I'd simply like some 2-3 commands run in order (not necessarily same order or commands) on 20 profiles, I'd have to manage another 20 files, instead of 1 file with the 20 profiles. I also find it to be more obvious what instance will do once bootstrapped by just looking at the profile. If it was anything more complex, and across several profiles, I'd agree, a separate bootstrap script would be more useful and have used that previously."
saltstack/salt,https://github.com/saltstack/salt/issues/14019,saltstack_salt_issues_14019,"os.path.dirname not doing what you think in file.makedirs_ if the path excludes a trailing slash

I just ran a simple test of what's going on in makedirs_ because I couldn't understand why a directory wasn't being created on the minion. The sample below shows a directory I know to exist on the host, and the command that is being used in makedirs_ to assign the path to dirname. Note that I did not include the trailing slash on the path.  I'm not sure what would be preferable here as a solution: 1. Change documentation to reflect that path must include the trailing slash? 2. Append a trailing slash to path and expect os.path.normpath to fix any double slashes? 3. Change the return message formatting to report on the actual value tested?","Can you clarify, just for completeness, which version of salt you're looking at, and where those lines of code come from? Thanks!",We're on 2014.1.5 on the master and minion in question. Those lines are from modules/file.py in the makedirs_ function (lines 2818-2827 in the version in the copy of the source from EPEL).
saltstack/salt,https://github.com/saltstack/salt/issues/15946,saltstack_salt_issues_15946,"exception on master when trying to publish to a node group

Hi, I have defined a node group in my master file which I can use ok from the master. I have peer enabled and I'm able to publish commands between minions via this master as well. What I am not able to do, is publish a peer command to a node group. Here is the command I am trying to run: `salt-call publish.publish boulderqds cmd.run 'grep 874521 /var/log/syslog'` Here is the exception I am seeing on the master 2014-09-18 21:57:04,796 [salt.master ][ERROR ] Error in function minion_pub: Traceback (most recent call last): File ""/usr/lib/python2.7/dist-packages/salt/master.py"", line 1701, in run_func ret = getattr(self, func)(load) File ""/usr/lib/python2.7/dist-packages/salt/master.py"", line 1591, in minion_pub jid_fn = os.path.join(auth_cache, ret['jid']) File ""/usr/lib/python2.7/posixpath.py"", line 75, in join if b.startswith('/'): AttributeError: 'int' object has no attribute 'startswith'",Could we please see a `--versions-report` for this master and this minion? Thanks!,"Hi @cachedout , thanks, here you go: root@bdr-is1:/# salt-master --versions-report Salt: 2014.1.10 Python: 2.7.6 (default, Mar 22 2014, 22:59:56) Jinja2: 2.7.2 M2Crypto: 0.21.1 msgpack-python: 0.3.0 msgpack-pure: Not Installed pycrypto: 2.6.1 PyYAML: 3.10 PyZMQ: 14.0.1 ZMQ: 4.0.4 root@bdr-is7:~# salt-minion --versions-report Salt: 2014.1.10 Python: 2.7.6 (default, Mar 22 2014, 22:59:56) Jinja2: 2.7.3 M2Crypto: 0.21.1 msgpack-python: 0.3.0 msgpack-pure: Not Installed pycrypto: 2.6.1 PyYAML: 3.10 PyZMQ: 14.0.1 ZMQ: 4.0.4"
saltstack/salt,https://github.com/saltstack/salt/issues/25972,saltstack_salt_issues_25972,"Question about salt-cloud pillar configuration

I'm able to use the vmware cloud module with success when I configure my provider in /etc/salt/cloud.providers.d. I would like to use the pillar configuration described here: http://docs.saltstack.com/en/latest/topics/cloud/config.html Even though I can see the provider config in my pillar.items output, I'm not able to list any providers when I try to configure through the pillar. Any help here is appreciated, thank you.",What command are you using?,"Hi @techhat , I'm using the following: "
saltstack/salt,https://github.com/saltstack/salt/issues/23125,saltstack_salt_issues_23125,"Elasticsearch as master_job_cache throws critical

Hi all, Since the local job cache is just too slow(even for only 50 Minions) I wanted to use Elasticsearch as master_job_cache. But I can't get the thing working. Configuration and error message when running a `salt\* test.ping` can be found [here](https://gist.github.com/bemeyert/ab3d0567d953d154a9d4). Salt version is 2014.7.5, OS is CentOS 6, Elasticsearch-py has version 1.4. This might be a duplicate of #20826 Cheers",Would you mind copying your gist contents into a comment here?,@jfindlay Here we go My master configuration: 
saltstack/salt,https://github.com/saltstack/salt/issues/14099,saltstack_salt_issues_14099,"salt-minion cannot start of one of the masters is down (2014.1.5)

With salt multi-master 2014.1.5, if one of the salt masters is not up we seem to be experiencing a problem where salt minions crash while trying to start. If we downgrade to 2014.1.4, the problem goes away. Please advise. [root@134 salt]# salt-minion --versions-report Salt: 2014.1.5 Python: 2.6.6 (r266:84292, Jan 22 2014, 09:42:36) Jinja2: unknown M2Crypto: 0.20.2 msgpack-python: 0.1.13 msgpack-pure: Not Installed pycrypto: 2.0.1 PyYAML: 3.10 PyZMQ: 2.2.0.1 ZMQ: 3.2.4 /etc/salt/minion master: [192.168.1.10, 10.168.1.11] ## One of the master is powered off. 2014-07-10 11:30:10,398 [salt.loader ][DEBUG ] Loaded cmdmod as virtual cmd 2014-07-10 11:30:10,404 [salt.loader ][DEBUG ] Loaded virtualenv_mod as virtual virtualenv 2014-07-10 11:30:10,405 [salt.loader ][DEBUG ] Loaded djangomod as virtual django 2014-07-10 11:30:10,409 [salt.loader ][DEBUG ] Loaded linux_lvm as virtual lvm 2014-07-10 11:30:10,421 [salt.loader ][DEBUG ] Loaded syslog_return as virtual syslog 2014-07-10 11:30:10,421 [salt.loader ][DEBUG ] Loaded couchdb_return as virtual couchdb 2014-07-10 11:30:10,422 [salt.loader ][DEBUG ] Loaded carbon_return as virtual carbon 2014-07-10 11:30:10,422 [salt.loader ][DEBUG ] Loaded sqlite3_return as virtual sqlite3 2014-07-10 11:30:10,423 [salt.minion ][DEBUG ] I am qa134 and I am not supposed to start any proxies. 2014-07-10 11:30:10,425 [salt.log.setup ][ERROR ] An un-handled exception was caught by salt's global exception handler: KeyError: 'minion' Traceback (most recent call last): File ""/usr/bin/salt-minion"", line 14, in <module> salt_minion() File ""/usr/lib/python2.6/site-packages/salt/scripts.py"", line 35, in salt_minion minion.start() File ""/usr/lib/python2.6/site-packages/salt/**init**.py"", line 224, in start self.minion.tune_in() File ""/usr/lib/python2.6/site-packages/salt/minion.py"", line 465, in tune_in minion = minion['minion'] KeyError: 'minion'",Could you test with the newly-released 2014.1.7?,"I'd love to try this asap. Is there an rpm version? Looks like it has not yet hit EPEL, and for the life of me, I cannot build the rpm with the spec file included with the source tree. I'm not new to rpm building. Help please. :-)"
saltstack/salt,https://github.com/saltstack/salt/issues/45386,saltstack_salt_issues_45386,"salt.exceptions.SaltReqTimeoutError: Message timed out from SLES 11 SP4

### Description of Issue/Question We have 2 SLES 11 SP4 minions (from more than 200 working fine) that are getting SaltReqTimeoutError while executing any state execution module. For example: ","can you try uninstalling the salt-minion packages and removing all the .pyc files in /usr/lib/python2.7/site-packages/salt, and see if installing again fixes the problem? Thanks, Daniel","Hi, at minions I have installed python 2.6. I guess this is due to be on SLES 11 SP4. After I remove salt & salt-minion packages there is nothing under /usr/lib64/python2.6/site-packages/salt Thanks."
saltstack/salt,https://github.com/saltstack/salt/issues/14227,saltstack_salt_issues_14227,"rabbitmq-plugin states return unexpected object

I found following exception when using rabbitmq-plugin after enable all the log in command line  The cause is raised by the rabbitmq-plugin states. It return a dict when not set runas parameter. But the highstate.py can not handle this.",Could we please see a `--versions-report` and a sample state that can reproduce this behaviour? Thanks.,I have upgrade my salt-master. So I can not found the original version report. Here is the salt-minion's without a upgrade. 
saltstack/salt,https://github.com/saltstack/salt/issues/14258,saltstack_salt_issues_14258,"sudo_password Doesnt work in Salt-Cloud (saltify)

I am trying to boostrap a few hundred vms via salt-cloud's saltify provider. I have a password similar to q4BKSNi>(<2q. When I put this in my cloud profile like so  According to debug, the initial login via ssh works using this password but when elevating for any tasks using sudo the password does not work. I have tried removing all special characters from the password and it still fails to bootstrap (or create any folders or anything). If i set `sudo: False` and comment remove the `sudo_password`, the bootstrap makes it much further including creating a few folders before failing because it needs permissions.","Can you log in as the user, and then run a command with `sudo` and that password?","the user does have sudo access and the password is valid. this is just a standard ubuntu sudoers file. I can run the same commands from the console. This minion was running 2014.1.4 but i think has been updated to 2014.1.7, we are in the process of upgrading all the minions to 2014.1.7."
saltstack/salt,https://github.com/saltstack/salt/issues/18050,saltstack_salt_issues_18050,"salt '*' test.ping command does not return

I noticed a weird behavior of the command salt -v '*' test.ping ran from Salt master where it is accepted approximately 300 of minions. The Salt master has set worker threads to 100. Salt masters versions report:  Can anybody try to explain me what may going on under the hood?",Can you upgrade to 2014.7?,"Currently, we are running testing/production deployments on 2014.1.7 . There's no plan to upgrade to 2014.7 as there is no stable release yet. Is your 'similar' issue also reported?"
saltstack/salt,https://github.com/saltstack/salt/issues/26952,saltstack_salt_issues_26952,"S3 ext_pillar module has broken caching mechanism

The caching mechanism implemented in the module can't work in versions 2015.5.x and 2015.8.x. Basically, it tries to compare md5 check-sum of a locally cached file with check-sum extracted from S3 bucket meta-data file. The problem is in `_get_file_from_s3` function where it tries to compare two variables but of different types. Variable `file_md5` is a `list` while variable `cached_md5` is a `string`. Pull request for 2015.8: #26953 Pull request for 2015.5: #26955",Do you consider this issue all buttoned up and ready to close?,Are you able to include the fix in upcoming releases 2015.5.6 and 2015.8.0?
saltstack/salt,https://github.com/saltstack/salt/issues/35455,saltstack_salt_issues_35455,"dockerng modules are not working until salt-minion is restarted

### Description of Issue/Question I have issues with dockerng states, as they are not working until salt-minion is restarted. Docker-py is installed. Tried salt 2016.3.2 and 2015.8.11. ### Steps to Reproduce Issue ",Can you try that does that help you out?,"I tried to change state to:  But, still the same issue."
saltstack/salt,https://github.com/saltstack/salt/issues/21009,saltstack_salt_issues_21009,"salt-minion still not responding to salt master commands, despite updates to salt

I still seem to be having issues with salt commands to minions failing, eg,  Sometimes it works, sometimes it doe snot. if I run salt-minion -l debug it always works. I thought this issue was fixed? seems not.",Will you provide the output of `salt --versions-report` for both minion and master? Thanks.,yes I am saying this.
saltstack/salt,https://github.com/saltstack/salt/issues/32225,saltstack_salt_issues_32225,"latest salt causes failures 

### Description of Issue/Question  -bash-4.1#",How did you upgrade? How did you install salt previously? Can you reproduce any of these errors with a new VM?,"Hi, yum -y update salt-minion and yum -y update Yes I built a brand new server and found the issue with the latest salt version not working. I then went back to my desktop and upgraded that. It looks like the package salt has no actual 'salt""? # [root@vuwunicossj0001 ~]# rpm -ql salt /etc/bash_completion.d/salt.bash /etc/logrotate.d/salt /etc/salt /etc/salt/cloud /etc/salt/cloud.conf.d /etc/salt/cloud.deploy.d /etc/salt/cloud.maps.d /etc/salt/cloud.profiles.d /etc/salt/cloud.providers.d /etc/salt/master /etc/salt/master.d /etc/salt/minion /etc/salt/minion.d /etc/salt/pki /etc/salt/pki/master /etc/salt/pki/minion /etc/salt/proxy /etc/salt/roster /usr/bin/spm /usr/lib/python2.7/site-packages/salt-2015.8.8.2-py2.7.egg-info /usr/lib/python2.7/site-packages/salt/**init**.py /usr/lib/python2.7/site-packages/salt/**init**.pyc /usr/lib/python2.7/site-packages/salt/**init**.pyo /usr/lib/python2.7/site-packages/salt/_compat.py /usr/lib/python2.7/site-packages/salt/_compat.pyc /usr/lib/python2.7/site-packages/salt/_compat.pyo /usr/lib/python2.7/site-packages/salt/_syspaths.py /usr/lib/python2.7/site-packages/salt/_syspaths.pyc /usr/lib/python2.7/site-packages/salt/_syspaths.pyo /usr/lib/python2.7/site-packages/salt/_version.py /usr/lib/python2.7/site-packages/salt/_version.pyc /usr/lib/python2.7/site-packages/salt/_version.pyo /usr/lib/python2.7/site-packages/salt/acl /usr/lib/python2.7/site-packages/salt/acl/__init__.py /usr/lib/python2.7/site-packages/salt/acl/**init**.pyc /usr/lib/python2.7/site-packages/salt/acl/**init**.pyo /usr/lib/python2.7/site-packages/salt/auth /usr/lib/python2.7/site-packages/salt/auth/**init**.py /usr/lib/python2.7/site-packages/salt/auth/**init**.pyc /usr/lib/python2.7/site-packages/salt/auth/**init**.pyo /usr/lib/python2.7/site-packages/salt/auth/auto.py /usr/lib/python2.7/site-packages/salt/auth/auto.pyc /usr/lib/python2.7/site-packages/salt/auth/auto.pyo /usr/lib/python2.7/site-packages/salt/auth/django.py /usr/lib/python2.7/site-packages/salt/auth/django.pyc /usr/lib/python2.7/site-packages/salt/auth/django.pyo /usr/lib/python2.7/site-packages/salt/auth/keystone.py /usr/lib/python2.7/site-packages/salt/auth/keystone.pyc /usr/lib/python2.7/site-packages/salt/auth/keystone.pyo /usr/lib/python2.7/site-packages/salt/auth/ldap.py /usr/lib/python2.7/site-packages/salt/auth/ldap.pyc /usr/lib/python2.7/site-packages/salt/auth/ldap.pyo /usr/lib/python2.7/site-packages/salt/auth/mysql.py /usr/lib/python2.7/site-packages/salt/auth/mysql.pyc /usr/lib/python2.7/site-packages/salt/auth/mysql.pyo /usr/lib/python2.7/site-packages/salt/auth/pam.py /usr/lib/python2.7/site-packages/salt/auth/pam.pyc /usr/lib/python2.7/site-packages/salt/auth/pam.pyo /usr/lib/python2.7/site-packages/salt/auth/pki.py /usr/lib/python2.7/site-packages/salt/auth/pki.pyc /usr/lib/python2.7/site-packages/salt/auth/pki.pyo /usr/lib/python2.7/site-packages/salt/auth/rest.py /usr/lib/python2.7/site-packages/salt/auth/rest.pyc /usr/lib/python2.7/site-packages/salt/auth/rest.pyo /usr/lib/python2.7/site-packages/salt/auth/stormpath.py /usr/lib/python2.7/site-packages/salt/auth/stormpath.pyc /usr/lib/python2.7/site-packages/salt/auth/stormpath.pyo /usr/lib/python2.7/site-packages/salt/auth/yubico.py /usr/lib/python2.7/site-packages/salt/auth/yubico.pyc /usr/lib/python2.7/site-packages/salt/auth/yubico.pyo /usr/lib/python2.7/site-packages/salt/beacons /usr/lib/python2.7/site-packages/salt/beacons/**init**.py /usr/lib/python2.7/site-packages/salt/beacons/**init**.pyc /usr/lib/python2.7/site-packages/salt/beacons/**init**.pyo /usr/lib/python2.7/site-packages/salt/beacons/btmp.py /usr/lib/python2.7/site-packages/salt/beacons/btmp.pyc /usr/lib/python2.7/site-packages/salt/beacons/btmp.pyo /usr/lib/python2.7/site-packages/salt/beacons/diskusage.py /usr/lib/python2.7/site-packages/salt/beacons/diskusage.pyc /usr/lib/python2.7/site-packages/salt/beacons/diskusage.pyo /usr/lib/python2.7/site-packages/salt/beacons/inotify.py /usr/lib/python2.7/site-packages/salt/beacons/inotify.pyc /usr/lib/python2.7/site-packages/salt/beacons/inotify.pyo /usr/lib/python2.7/site-packages/salt/beacons/journald.py /usr/lib/python2.7/site-packages/salt/beacons/journald.pyc /usr/lib/python2.7/site-packages/salt/beacons/journald.pyo /usr/lib/python2.7/site-packages/salt/beacons/load.py /usr/lib/python2.7/site-packages/salt/beacons/load.pyc /usr/lib/python2.7/site-packages/salt/beacons/load.pyo /usr/lib/python2.7/site-packages/salt/beacons/network_info.py /usr/lib/python2.7/site-packages/salt/beacons/network_info.pyc /usr/lib/python2.7/site-packages/salt/beacons/network_info.pyo /usr/lib/python2.7/site-packages/salt/beacons/proxy_example.py /usr/lib/python2.7/site-packages/salt/beacons/proxy_example.pyc /usr/lib/python2.7/site-packages/salt/beacons/proxy_example.pyo /usr/lib/python2.7/site-packages/salt/beacons/ps.py /usr/lib/python2.7/site-packages/salt/beacons/ps.pyc /usr/lib/python2.7/site-packages/salt/beacons/ps.pyo /usr/lib/python2.7/site-packages/salt/beacons/service.py /usr/lib/python2.7/site-packages/salt/beacons/service.pyc /usr/lib/python2.7/site-packages/salt/beacons/service.pyo /usr/lib/python2.7/site-packages/salt/beacons/sh.py /usr/lib/python2.7/site-packages/salt/beacons/sh.pyc /usr/lib/python2.7/site-packages/salt/beacons/sh.pyo /usr/lib/python2.7/site-packages/salt/beacons/twilio_txt_msg.py /usr/lib/python2.7/site-packages/salt/beacons/twilio_txt_msg.pyc /usr/lib/python2.7/site-packages/salt/beacons/twilio_txt_msg.pyo /usr/lib/python2.7/site-packages/salt/beacons/wtmp.py /usr/lib/python2.7/site-packages/salt/beacons/wtmp.pyc /usr/lib/python2.7/site-packages/salt/beacons/wtmp.pyo /usr/lib/python2.7/site-packages/salt/cli /usr/lib/python2.7/site-packages/salt/cli/**init**.py /usr/lib/python2.7/site-packages/salt/cli/**init**.pyc /usr/lib/python2.7/site-packages/salt/cli/**init**.pyo /usr/lib/python2.7/site-packages/salt/cli/api.py /usr/lib/python2.7/site-packages/salt/cli/api.pyc /usr/lib/python2.7/site-packages/salt/cli/api.pyo /usr/lib/python2.7/site-packages/salt/cli/batch.py /usr/lib/python2.7/site-packages/salt/cli/batch.pyc /usr/lib/python2.7/site-packages/salt/cli/batch.pyo /usr/lib/python2.7/site-packages/salt/cli/call.py /usr/lib/python2.7/site-packages/salt/cli/call.pyc /usr/lib/python2.7/site-packages/salt/cli/call.pyo /usr/lib/python2.7/site-packages/salt/cli/caller.py /usr/lib/python2.7/site-packages/salt/cli/caller.pyc /usr/lib/python2.7/site-packages/salt/cli/caller.pyo /usr/lib/python2.7/site-packages/salt/cli/cp.py /usr/lib/python2.7/site-packages/salt/cli/cp.pyc /usr/lib/python2.7/site-packages/salt/cli/cp.pyo /usr/lib/python2.7/site-packages/salt/cli/daemons.py /usr/lib/python2.7/site-packages/salt/cli/daemons.pyc /usr/lib/python2.7/site-packages/salt/cli/daemons.pyo /usr/lib/python2.7/site-packages/salt/cli/key.py /usr/lib/python2.7/site-packages/salt/cli/key.pyc /usr/lib/python2.7/site-packages/salt/cli/key.pyo /usr/lib/python2.7/site-packages/salt/cli/run.py /usr/lib/python2.7/site-packages/salt/cli/run.pyc /usr/lib/python2.7/site-packages/salt/cli/run.pyo /usr/lib/python2.7/site-packages/salt/cli/salt.py /usr/lib/python2.7/site-packages/salt/cli/salt.pyc /usr/lib/python2.7/site-packages/salt/cli/salt.pyo /usr/lib/python2.7/site-packages/salt/cli/spm.py /usr/lib/python2.7/site-packages/salt/cli/spm.pyc /usr/lib/python2.7/site-packages/salt/cli/spm.pyo /usr/lib/python2.7/site-packages/salt/cli/ssh.py /usr/lib/python2.7/site-packages/salt/cli/ssh.pyc /usr/lib/python2.7/site-packages/salt/cli/ssh.pyo /usr/lib/python2.7/site-packages/salt/client /usr/lib/python2.7/site-packages/salt/client/**init**.py /usr/lib/python2.7/site-packages/salt/client/**init**.pyc /usr/lib/python2.7/site-packages/salt/client/**init**.pyo /usr/lib/python2.7/site-packages/salt/client/api.py /usr/lib/python2.7/site-packages/salt/client/api.pyc /usr/lib/python2.7/site-packages/salt/client/api.pyo /usr/lib/python2.7/site-packages/salt/client/mixins.py /usr/lib/python2.7/site-packages/salt/client/mixins.pyc /usr/lib/python2.7/site-packages/salt/client/mixins.pyo /usr/lib/python2.7/site-packages/salt/client/netapi.py /usr/lib/python2.7/site-packages/salt/client/netapi.pyc /usr/lib/python2.7/site-packages/salt/client/netapi.pyo /usr/lib/python2.7/site-packages/salt/client/raet /usr/lib/python2.7/site-packages/salt/client/raet/**init**.py /usr/lib/python2.7/site-packages/salt/client/raet/**init**.pyc /usr/lib/python2.7/site-packages/salt/client/raet/**init**.pyo /usr/lib/python2.7/site-packages/salt/client/ssh /usr/lib/python2.7/site-packages/salt/client/ssh/**init**.py /usr/lib/python2.7/site-packages/salt/client/ssh/**init**.pyc /usr/lib/python2.7/site-packages/salt/client/ssh/**init**.pyo /usr/lib/python2.7/site-packages/salt/client/ssh/client.py /usr/lib/python2.7/site-packages/salt/client/ssh/client.pyc /usr/lib/python2.7/site-packages/salt/client/ssh/client.pyo /usr/lib/python2.7/site-packages/salt/client/ssh/shell.py /usr/lib/python2.7/site-packages/salt/client/ssh/shell.pyc /usr/lib/python2.7/site-packages/salt/client/ssh/shell.pyo /usr/lib/python2.7/site-packages/salt/client/ssh/ssh_py_shim.py /usr/lib/python2.7/site-packages/salt/client/ssh/ssh_py_shim.pyc /usr/lib/python2.7/site-packages/salt/client/ssh/ssh_py_shim.pyo /usr/lib/python2.7/site-packages/salt/client/ssh/state.py /usr/lib/python2.7/site-packages/salt/client/ssh/state.pyc /usr/lib/python2.7/site-packages/salt/client/ssh/state.pyo /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/**init**.py /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/**init**.pyc /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/**init**.pyo /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/config.py /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/config.pyc /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/config.pyo /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/cp.py /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/cp.pyc /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/cp.pyo /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/grains.py /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/grains.pyc /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/grains.pyo /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/mine.py /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/mine.pyc /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/mine.pyo /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/pillar.py /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/pillar.pyc /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/pillar.pyo /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/publish.py /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/publish.pyc /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/publish.pyo /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/state.py /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/state.pyc /usr/lib/python2.7/site-packages/salt/client/ssh/wrapper/state.pyo /usr/lib/python2.7/site-packages/salt/cloud /usr/lib/python2.7/site-packages/salt/cloud/**init**.py /usr/lib/python2.7/site-packages/salt/cloud/**init**.pyc /usr/lib/python2.7/site-packages/salt/cloud/**init**.pyo /usr/lib/python2.7/site-packages/salt/cloud/cli.py /usr/lib/python2.7/site-packages/salt/cloud/cli.pyc /usr/lib/python2.7/site-packages/salt/cloud/cli.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds /usr/lib/python2.7/site-packages/salt/cloud/clouds/**init**.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/**init**.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/**init**.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/aliyun.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/aliyun.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/aliyun.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/botocore_aws.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/botocore_aws.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/botocore_aws.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/cloudstack.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/cloudstack.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/cloudstack.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/digital_ocean.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/digital_ocean.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/digital_ocean.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/gce.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/gce.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/gce.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/gogrid.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/gogrid.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/gogrid.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/joyent.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/joyent.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/joyent.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/libcloud_aws.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/libcloud_aws.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/libcloud_aws.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/linode.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/linode.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/linode.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/lxc.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/lxc.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/lxc.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/msazure.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/msazure.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/msazure.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/nova.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/nova.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/nova.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/opennebula.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/opennebula.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/opennebula.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/openstack.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/openstack.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/openstack.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/parallels.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/parallels.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/parallels.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/proxmox.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/proxmox.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/proxmox.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/pyrax.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/pyrax.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/pyrax.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/qingcloud.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/qingcloud.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/qingcloud.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/rackspace.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/rackspace.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/rackspace.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/saltify.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/saltify.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/saltify.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/scaleway.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/scaleway.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/scaleway.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/softlayer.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/softlayer.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/softlayer.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/softlayer_hw.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/softlayer_hw.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/softlayer_hw.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/vmware.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/vmware.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/vmware.pyo /usr/lib/python2.7/site-packages/salt/cloud/clouds/vsphere.py /usr/lib/python2.7/site-packages/salt/cloud/clouds/vsphere.pyc /usr/lib/python2.7/site-packages/salt/cloud/clouds/vsphere.pyo /usr/lib/python2.7/site-packages/salt/cloud/deploy /usr/lib/python2.7/site-packages/salt/cloud/deploy/Arch-git.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/Arch.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/Debian-git.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/Debian.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/Fedora-git.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/Fedora.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/FreeBSD-git.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/FreeBSD.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/None.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/RHEL5-git.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/RHEL5.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/RHEL6-git.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/RHEL6.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/SmartOS.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/Ubuntu-git.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/Ubuntu.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/bootstrap-salt.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/curl-bootstrap-git.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/curl-bootstrap.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/python-bootstrap.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/wget-bootstrap-nocert.sh /usr/lib/python2.7/site-packages/salt/cloud/deploy/wget-bootstrap.sh /usr/lib/python2.7/site-packages/salt/cloud/exceptions.py /usr/lib/python2.7/site-packages/salt/cloud/exceptions.pyc /usr/lib/python2.7/site-packages/salt/cloud/exceptions.pyo /usr/lib/python2.7/site-packages/salt/cloud/libcloudfuncs.py /usr/lib/python2.7/site-packages/salt/cloud/libcloudfuncs.pyc /usr/lib/python2.7/site-packages/salt/cloud/libcloudfuncs.pyo /usr/lib/python2.7/site-packages/salt/config.py /usr/lib/python2.7/site-packages/salt/config.pyc /usr/lib/python2.7/site-packages/salt/config.pyo /usr/lib/python2.7/site-packages/salt/crypt.py /usr/lib/python2.7/site-packages/salt/crypt.pyc /usr/lib/python2.7/site-packages/salt/crypt.pyo /usr/lib/python2.7/site-packages/salt/daemons /usr/lib/python2.7/site-packages/salt/daemons/**init**.py /usr/lib/python2.7/site-packages/salt/daemons/**init**.pyc /usr/lib/python2.7/site-packages/salt/daemons/**init**.pyo /usr/lib/python2.7/site-packages/salt/daemons/flo /usr/lib/python2.7/site-packages/salt/daemons/flo/**init**.py /usr/lib/python2.7/site-packages/salt/daemons/flo/**init**.pyc /usr/lib/python2.7/site-packages/salt/daemons/flo/**init**.pyo /usr/lib/python2.7/site-packages/salt/daemons/flo/caller.flo /usr/lib/python2.7/site-packages/salt/daemons/flo/core.py /usr/lib/python2.7/site-packages/salt/daemons/flo/core.pyc /usr/lib/python2.7/site-packages/salt/daemons/flo/core.pyo /usr/lib/python2.7/site-packages/salt/daemons/flo/dummy.py /usr/lib/python2.7/site-packages/salt/daemons/flo/dummy.pyc /usr/lib/python2.7/site-packages/salt/daemons/flo/dummy.pyo /usr/lib/python2.7/site-packages/salt/daemons/flo/jobber.py /usr/lib/python2.7/site-packages/salt/daemons/flo/jobber.pyc /usr/lib/python2.7/site-packages/salt/daemons/flo/jobber.pyo /usr/lib/python2.7/site-packages/salt/daemons/flo/maint.flo /usr/lib/python2.7/site-packages/salt/daemons/flo/maint.py /usr/lib/python2.7/site-packages/salt/daemons/flo/maint.pyc /usr/lib/python2.7/site-packages/salt/daemons/flo/maint.pyo /usr/lib/python2.7/site-packages/salt/daemons/flo/master.flo /usr/lib/python2.7/site-packages/salt/daemons/flo/minion.flo /usr/lib/python2.7/site-packages/salt/daemons/flo/reactor.py /usr/lib/python2.7/site-packages/salt/daemons/flo/reactor.pyc /usr/lib/python2.7/site-packages/salt/daemons/flo/reactor.pyo /usr/lib/python2.7/site-packages/salt/daemons/flo/worker.flo /usr/lib/python2.7/site-packages/salt/daemons/flo/worker.py /usr/lib/python2.7/site-packages/salt/daemons/flo/worker.pyc /usr/lib/python2.7/site-packages/salt/daemons/flo/worker.pyo /usr/lib/python2.7/site-packages/salt/daemons/flo/zero.py /usr/lib/python2.7/site-packages/salt/daemons/flo/zero.pyc /usr/lib/python2.7/site-packages/salt/daemons/flo/zero.pyo /usr/lib/python2.7/site-packages/salt/daemons/masterapi.py /usr/lib/python2.7/site-packages/salt/daemons/masterapi.pyc /usr/lib/python2.7/site-packages/salt/daemons/masterapi.pyo /usr/lib/python2.7/site-packages/salt/daemons/salting.py /usr/lib/python2.7/site-packages/salt/daemons/salting.pyc /usr/lib/python2.7/site-packages/salt/daemons/salting.pyo /usr/lib/python2.7/site-packages/salt/daemons/test /usr/lib/python2.7/site-packages/salt/daemons/test/**init**.py /usr/lib/python2.7/site-packages/salt/daemons/test/**init**.pyc /usr/lib/python2.7/site-packages/salt/daemons/test/**init**.pyo /usr/lib/python2.7/site-packages/salt/daemons/test/plan /usr/lib/python2.7/site-packages/salt/daemons/test/plan/**init**.py /usr/lib/python2.7/site-packages/salt/daemons/test/plan/**init**.pyc /usr/lib/python2.7/site-packages/salt/daemons/test/plan/**init**.pyo /usr/lib/python2.7/site-packages/salt/daemons/test/plan/actors.py /usr/lib/python2.7/site-packages/salt/daemons/test/plan/actors.pyc /usr/lib/python2.7/site-packages/salt/daemons/test/plan/actors.pyo /usr/lib/python2.7/site-packages/salt/daemons/test/test_master.py /usr/lib/python2.7/site-packages/salt/daemons/test/test_master.pyc /usr/lib/python2.7/site-packages/salt/daemons/test/test_master.pyo /usr/lib/python2.7/site-packages/salt/daemons/test/test_minion.py /usr/lib/python2.7/site-packages/salt/daemons/test/test_minion.pyc /usr/lib/python2.7/site-packages/salt/daemons/test/test_minion.pyo /usr/lib/python2.7/site-packages/salt/daemons/test/test_multimaster.py /usr/lib/python2.7/site-packages/salt/daemons/test/test_multimaster.pyc /usr/lib/python2.7/site-packages/salt/daemons/test/test_multimaster.pyo /usr/lib/python2.7/site-packages/salt/daemons/test/test_plans.py /usr/lib/python2.7/site-packages/salt/daemons/test/test_plans.pyc /usr/lib/python2.7/site-packages/salt/daemons/test/test_plans.pyo /usr/lib/python2.7/site-packages/salt/daemons/test/test_presence.py /usr/lib/python2.7/site-packages/salt/daemons/test/test_presence.pyc /usr/lib/python2.7/site-packages/salt/daemons/test/test_presence.pyo /usr/lib/python2.7/site-packages/salt/daemons/test/test_raetkey.py /usr/lib/python2.7/site-packages/salt/daemons/test/test_raetkey.pyc /usr/lib/python2.7/site-packages/salt/daemons/test/test_raetkey.pyo /usr/lib/python2.7/site-packages/salt/daemons/test/test_saltkeep.py /usr/lib/python2.7/site-packages/salt/daemons/test/test_saltkeep.pyc /usr/lib/python2.7/site-packages/salt/daemons/test/test_saltkeep.pyo /usr/lib/python2.7/site-packages/salt/daemons/test/test_stats.py /usr/lib/python2.7/site-packages/salt/daemons/test/test_stats.pyc /usr/lib/python2.7/site-packages/salt/daemons/test/test_stats.pyo /usr/lib/python2.7/site-packages/salt/defaults /usr/lib/python2.7/site-packages/salt/defaults/**init**.py /usr/lib/python2.7/site-packages/salt/defaults/**init**.pyc /usr/lib/python2.7/site-packages/salt/defaults/**init**.pyo /usr/lib/python2.7/site-packages/salt/defaults/exitcodes.py /usr/lib/python2.7/site-packages/salt/defaults/exitcodes.pyc /usr/lib/python2.7/site-packages/salt/defaults/exitcodes.pyo /usr/lib/python2.7/site-packages/salt/engines /usr/lib/python2.7/site-packages/salt/engines/**init**.py /usr/lib/python2.7/site-packages/salt/engines/**init**.pyc /usr/lib/python2.7/site-packages/salt/engines/**init**.pyo /usr/lib/python2.7/site-packages/salt/engines/logstash.py /usr/lib/python2.7/site-packages/salt/engines/logstash.pyc /usr/lib/python2.7/site-packages/salt/engines/logstash.pyo /usr/lib/python2.7/site-packages/salt/engines/sqs_events.py /usr/lib/python2.7/site-packages/salt/engines/sqs_events.pyc /usr/lib/python2.7/site-packages/salt/engines/sqs_events.pyo /usr/lib/python2.7/site-packages/salt/engines/test.py /usr/lib/python2.7/site-packages/salt/engines/test.pyc /usr/lib/python2.7/site-packages/salt/engines/test.pyo /usr/lib/python2.7/site-packages/salt/exceptions.py /usr/lib/python2.7/site-packages/salt/exceptions.pyc /usr/lib/python2.7/site-packages/salt/exceptions.pyo /usr/lib/python2.7/site-packages/salt/ext /usr/lib/python2.7/site-packages/salt/ext/**init**.py /usr/lib/python2.7/site-packages/salt/ext/**init**.pyc /usr/lib/python2.7/site-packages/salt/ext/**init**.pyo /usr/lib/python2.7/site-packages/salt/ext/ipaddress.py /usr/lib/python2.7/site-packages/salt/ext/ipaddress.pyc /usr/lib/python2.7/site-packages/salt/ext/ipaddress.pyo /usr/lib/python2.7/site-packages/salt/ext/six.py /usr/lib/python2.7/site-packages/salt/ext/six.pyc /usr/lib/python2.7/site-packages/salt/ext/six.pyo /usr/lib/python2.7/site-packages/salt/ext/ssl_match_hostname.py /usr/lib/python2.7/site-packages/salt/ext/ssl_match_hostname.pyc /usr/lib/python2.7/site-packages/salt/ext/ssl_match_hostname.pyo /usr/lib/python2.7/site-packages/salt/ext/win_inet_pton.py /usr/lib/python2.7/site-packages/salt/ext/win_inet_pton.pyc /usr/lib/python2.7/site-packages/salt/ext/win_inet_pton.pyo /usr/lib/python2.7/site-packages/salt/fileclient.py /usr/lib/python2.7/site-packages/salt/fileclient.pyc /usr/lib/python2.7/site-packages/salt/fileclient.pyo /usr/lib/python2.7/site-packages/salt/fileserver /usr/lib/python2.7/site-packages/salt/fileserver/**init**.py /usr/lib/python2.7/site-packages/salt/fileserver/**init**.pyc /usr/lib/python2.7/site-packages/salt/fileserver/**init**.pyo /usr/lib/python2.7/site-packages/salt/fileserver/azurefs.py /usr/lib/python2.7/site-packages/salt/fileserver/azurefs.pyc /usr/lib/python2.7/site-packages/salt/fileserver/azurefs.pyo /usr/lib/python2.7/site-packages/salt/fileserver/gitfs.py /usr/lib/python2.7/site-packages/salt/fileserver/gitfs.pyc /usr/lib/python2.7/site-packages/salt/fileserver/gitfs.pyo /usr/lib/python2.7/site-packages/salt/fileserver/hgfs.py /usr/lib/python2.7/site-packages/salt/fileserver/hgfs.pyc /usr/lib/python2.7/site-packages/salt/fileserver/hgfs.pyo /usr/lib/python2.7/site-packages/salt/fileserver/minionfs.py /usr/lib/python2.7/site-packages/salt/fileserver/minionfs.pyc /usr/lib/python2.7/site-packages/salt/fileserver/minionfs.pyo /usr/lib/python2.7/site-packages/salt/fileserver/roots.py /usr/lib/python2.7/site-packages/salt/fileserver/roots.pyc /usr/lib/python2.7/site-packages/salt/fileserver/roots.pyo /usr/lib/python2.7/site-packages/salt/fileserver/s3fs.py /usr/lib/python2.7/site-packages/salt/fileserver/s3fs.pyc /usr/lib/python2.7/site-packages/salt/fileserver/s3fs.pyo /usr/lib/python2.7/site-packages/salt/fileserver/svnfs.py /usr/lib/python2.7/site-packages/salt/fileserver/svnfs.pyc /usr/lib/python2.7/site-packages/salt/fileserver/svnfs.pyo /usr/lib/python2.7/site-packages/salt/grains /usr/lib/python2.7/site-packages/salt/grains/**init**.py /usr/lib/python2.7/site-packages/salt/grains/**init**.pyc /usr/lib/python2.7/site-packages/salt/grains/**init**.pyo /usr/lib/python2.7/site-packages/salt/grains/chronos.py /usr/lib/python2.7/site-packages/salt/grains/chronos.pyc /usr/lib/python2.7/site-packages/salt/grains/chronos.pyo /usr/lib/python2.7/site-packages/salt/grains/core.py /usr/lib/python2.7/site-packages/salt/grains/core.pyc /usr/lib/python2.7/site-packages/salt/grains/core.pyo /usr/lib/python2.7/site-packages/salt/grains/disks.py /usr/lib/python2.7/site-packages/salt/grains/disks.pyc /usr/lib/python2.7/site-packages/salt/grains/disks.pyo /usr/lib/python2.7/site-packages/salt/grains/esxi.py /usr/lib/python2.7/site-packages/salt/grains/esxi.pyc /usr/lib/python2.7/site-packages/salt/grains/esxi.pyo /usr/lib/python2.7/site-packages/salt/grains/external_ip.py /usr/lib/python2.7/site-packages/salt/grains/external_ip.pyc /usr/lib/python2.7/site-packages/salt/grains/external_ip.pyo /usr/lib/python2.7/site-packages/salt/grains/extra.py /usr/lib/python2.7/site-packages/salt/grains/extra.pyc /usr/lib/python2.7/site-packages/salt/grains/extra.pyo /usr/lib/python2.7/site-packages/salt/grains/fx2.py /usr/lib/python2.7/site-packages/salt/grains/fx2.pyc /usr/lib/python2.7/site-packages/salt/grains/fx2.pyo /usr/lib/python2.7/site-packages/salt/grains/junos.py /usr/lib/python2.7/site-packages/salt/grains/junos.pyc /usr/lib/python2.7/site-packages/salt/grains/junos.pyo /usr/lib/python2.7/site-packages/salt/grains/marathon.py /usr/lib/python2.7/site-packages/salt/grains/marathon.pyc /usr/lib/python2.7/site-packages/salt/grains/marathon.pyo /usr/lib/python2.7/site-packages/salt/grains/mdadm.py /usr/lib/python2.7/site-packages/salt/grains/mdadm.pyc /usr/lib/python2.7/site-packages/salt/grains/mdadm.pyo /usr/lib/python2.7/site-packages/salt/grains/opts.py /usr/lib/python2.7/site-packages/salt/grains/opts.pyc /usr/lib/python2.7/site-packages/salt/grains/opts.pyo /usr/lib/python2.7/site-packages/salt/grains/philips_hue.py /usr/lib/python2.7/site-packages/salt/grains/philips_hue.pyc /usr/lib/python2.7/site-packages/salt/grains/philips_hue.pyo /usr/lib/python2.7/site-packages/salt/grains/rest_sample.py /usr/lib/python2.7/site-packages/salt/grains/rest_sample.pyc /usr/lib/python2.7/site-packages/salt/grains/rest_sample.pyo /usr/lib/python2.7/site-packages/salt/key.py /usr/lib/python2.7/site-packages/salt/key.pyc /usr/lib/python2.7/site-packages/salt/key.pyo /usr/lib/python2.7/site-packages/salt/loader.py /usr/lib/python2.7/site-packages/salt/loader.pyc /usr/lib/python2.7/site-packages/salt/loader.pyo /usr/lib/python2.7/site-packages/salt/log /usr/lib/python2.7/site-packages/salt/log/**init**.py /usr/lib/python2.7/site-packages/salt/log/**init**.pyc /usr/lib/python2.7/site-packages/salt/log/**init**.pyo /usr/lib/python2.7/site-packages/salt/log/handlers /usr/lib/python2.7/site-packages/salt/log/handlers/**init**.py /usr/lib/python2.7/site-packages/salt/log/handlers/**init**.pyc /usr/lib/python2.7/site-packages/salt/log/handlers/**init**.pyo /usr/lib/python2.7/site-packages/salt/log/handlers/fluent_mod.py /usr/lib/python2.7/site-packages/salt/log/handlers/fluent_mod.pyc /usr/lib/python2.7/site-packages/salt/log/handlers/fluent_mod.pyo /usr/lib/python2.7/site-packages/salt/log/handlers/log4mongo_mod.py /usr/lib/python2.7/site-packages/salt/log/handlers/log4mongo_mod.pyc /usr/lib/python2.7/site-packages/salt/log/handlers/log4mongo_mod.pyo /usr/lib/python2.7/site-packages/salt/log/handlers/logstash_mod.py /usr/lib/python2.7/site-packages/salt/log/handlers/logstash_mod.pyc /usr/lib/python2.7/site-packages/salt/log/handlers/logstash_mod.pyo /usr/lib/python2.7/site-packages/salt/log/handlers/sentry_mod.py /usr/lib/python2.7/site-packages/salt/log/handlers/sentry_mod.pyc /usr/lib/python2.7/site-packages/salt/log/handlers/sentry_mod.pyo /usr/lib/python2.7/site-packages/salt/log/mixins.py /usr/lib/python2.7/site-packages/salt/log/mixins.pyc /usr/lib/python2.7/site-packages/salt/log/mixins.pyo /usr/lib/python2.7/site-packages/salt/log/setup.py /usr/lib/python2.7/site-packages/salt/log/setup.pyc /usr/lib/python2.7/site-packages/salt/log/setup.pyo /usr/lib/python2.7/site-packages/salt/master.py /usr/lib/python2.7/site-packages/salt/master.pyc /usr/lib/python2.7/site-packages/salt/master.pyo /usr/lib/python2.7/site-packages/salt/minion.py /usr/lib/python2.7/site-packages/salt/minion.pyc /usr/lib/python2.7/site-packages/salt/minion.pyo /usr/lib/python2.7/site-packages/salt/modules /usr/lib/python2.7/site-packages/salt/modules/**init**.py /usr/lib/python2.7/site-packages/salt/modules/**init**.pyc /usr/lib/python2.7/site-packages/salt/modules/**init**.pyo /usr/lib/python2.7/site-packages/salt/modules/aliases.py /usr/lib/python2.7/site-packages/salt/modules/aliases.pyc /usr/lib/python2.7/site-packages/salt/modules/aliases.pyo /usr/lib/python2.7/site-packages/salt/modules/alternatives.py /usr/lib/python2.7/site-packages/salt/modules/alternatives.pyc /usr/lib/python2.7/site-packages/salt/modules/alternatives.pyo /usr/lib/python2.7/site-packages/salt/modules/apache.py /usr/lib/python2.7/site-packages/salt/modules/apache.pyc /usr/lib/python2.7/site-packages/salt/modules/apache.pyo /usr/lib/python2.7/site-packages/salt/modules/aptpkg.py /usr/lib/python2.7/site-packages/salt/modules/aptpkg.pyc /usr/lib/python2.7/site-packages/salt/modules/aptpkg.pyo /usr/lib/python2.7/site-packages/salt/modules/archive.py /usr/lib/python2.7/site-packages/salt/modules/archive.pyc /usr/lib/python2.7/site-packages/salt/modules/archive.pyo /usr/lib/python2.7/site-packages/salt/modules/artifactory.py /usr/lib/python2.7/site-packages/salt/modules/artifactory.pyc /usr/lib/python2.7/site-packages/salt/modules/artifactory.pyo /usr/lib/python2.7/site-packages/salt/modules/at.py /usr/lib/python2.7/site-packages/salt/modules/at.pyc /usr/lib/python2.7/site-packages/salt/modules/at.pyo /usr/lib/python2.7/site-packages/salt/modules/augeas_cfg.py /usr/lib/python2.7/site-packages/salt/modules/augeas_cfg.pyc /usr/lib/python2.7/site-packages/salt/modules/augeas_cfg.pyo /usr/lib/python2.7/site-packages/salt/modules/aws_sqs.py /usr/lib/python2.7/site-packages/salt/modules/aws_sqs.pyc /usr/lib/python2.7/site-packages/salt/modules/aws_sqs.pyo /usr/lib/python2.7/site-packages/salt/modules/bamboohr.py /usr/lib/python2.7/site-packages/salt/modules/bamboohr.pyc /usr/lib/python2.7/site-packages/salt/modules/bamboohr.pyo /usr/lib/python2.7/site-packages/salt/modules/beacons.py /usr/lib/python2.7/site-packages/salt/modules/beacons.pyc /usr/lib/python2.7/site-packages/salt/modules/beacons.pyo /usr/lib/python2.7/site-packages/salt/modules/bigip.py /usr/lib/python2.7/site-packages/salt/modules/bigip.pyc /usr/lib/python2.7/site-packages/salt/modules/bigip.pyo /usr/lib/python2.7/site-packages/salt/modules/blockdev.py /usr/lib/python2.7/site-packages/salt/modules/blockdev.pyc /usr/lib/python2.7/site-packages/salt/modules/blockdev.pyo /usr/lib/python2.7/site-packages/salt/modules/bluez.py /usr/lib/python2.7/site-packages/salt/modules/bluez.pyc /usr/lib/python2.7/site-packages/salt/modules/bluez.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_asg.py /usr/lib/python2.7/site-packages/salt/modules/boto_asg.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_asg.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_cfn.py /usr/lib/python2.7/site-packages/salt/modules/boto_cfn.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_cfn.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_cloudwatch.py /usr/lib/python2.7/site-packages/salt/modules/boto_cloudwatch.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_cloudwatch.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_dynamodb.py /usr/lib/python2.7/site-packages/salt/modules/boto_dynamodb.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_dynamodb.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_ec2.py /usr/lib/python2.7/site-packages/salt/modules/boto_ec2.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_ec2.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_elasticache.py /usr/lib/python2.7/site-packages/salt/modules/boto_elasticache.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_elasticache.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_elb.py /usr/lib/python2.7/site-packages/salt/modules/boto_elb.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_elb.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_iam.py /usr/lib/python2.7/site-packages/salt/modules/boto_iam.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_iam.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_kms.py /usr/lib/python2.7/site-packages/salt/modules/boto_kms.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_kms.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_rds.py /usr/lib/python2.7/site-packages/salt/modules/boto_rds.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_rds.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_route53.py /usr/lib/python2.7/site-packages/salt/modules/boto_route53.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_route53.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_secgroup.py /usr/lib/python2.7/site-packages/salt/modules/boto_secgroup.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_secgroup.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_sns.py /usr/lib/python2.7/site-packages/salt/modules/boto_sns.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_sns.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_sqs.py /usr/lib/python2.7/site-packages/salt/modules/boto_sqs.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_sqs.pyo /usr/lib/python2.7/site-packages/salt/modules/boto_vpc.py /usr/lib/python2.7/site-packages/salt/modules/boto_vpc.pyc /usr/lib/python2.7/site-packages/salt/modules/boto_vpc.pyo /usr/lib/python2.7/site-packages/salt/modules/bower.py /usr/lib/python2.7/site-packages/salt/modules/bower.pyc /usr/lib/python2.7/site-packages/salt/modules/bower.pyo /usr/lib/python2.7/site-packages/salt/modules/brew.py /usr/lib/python2.7/site-packages/salt/modules/brew.pyc /usr/lib/python2.7/site-packages/salt/modules/brew.pyo /usr/lib/python2.7/site-packages/salt/modules/bridge.py /usr/lib/python2.7/site-packages/salt/modules/bridge.pyc /usr/lib/python2.7/site-packages/salt/modules/bridge.pyo /usr/lib/python2.7/site-packages/salt/modules/bsd_shadow.py /usr/lib/python2.7/site-packages/salt/modules/bsd_shadow.pyc /usr/lib/python2.7/site-packages/salt/modules/bsd_shadow.pyo /usr/lib/python2.7/site-packages/salt/modules/btrfs.py /usr/lib/python2.7/site-packages/salt/modules/btrfs.pyc /usr/lib/python2.7/site-packages/salt/modules/btrfs.pyo /usr/lib/python2.7/site-packages/salt/modules/cabal.py /usr/lib/python2.7/site-packages/salt/modules/cabal.pyc /usr/lib/python2.7/site-packages/salt/modules/cabal.pyo /usr/lib/python2.7/site-packages/salt/modules/cassandra.py /usr/lib/python2.7/site-packages/salt/modules/cassandra.pyc /usr/lib/python2.7/site-packages/salt/modules/cassandra.pyo /usr/lib/python2.7/site-packages/salt/modules/cassandra_cql.py /usr/lib/python2.7/site-packages/salt/modules/cassandra_cql.pyc /usr/lib/python2.7/site-packages/salt/modules/cassandra_cql.pyo /usr/lib/python2.7/site-packages/salt/modules/chassis.py /usr/lib/python2.7/site-packages/salt/modules/chassis.pyc /usr/lib/python2.7/site-packages/salt/modules/chassis.pyo /usr/lib/python2.7/site-packages/salt/modules/chef.py /usr/lib/python2.7/site-packages/salt/modules/chef.pyc /usr/lib/python2.7/site-packages/salt/modules/chef.pyo /usr/lib/python2.7/site-packages/salt/modules/chocolatey.py /usr/lib/python2.7/site-packages/salt/modules/chocolatey.pyc /usr/lib/python2.7/site-packages/salt/modules/chocolatey.pyo /usr/lib/python2.7/site-packages/salt/modules/chronos.py /usr/lib/python2.7/site-packages/salt/modules/chronos.pyc /usr/lib/python2.7/site-packages/salt/modules/chronos.pyo /usr/lib/python2.7/site-packages/salt/modules/cloud.py /usr/lib/python2.7/site-packages/salt/modules/cloud.pyc /usr/lib/python2.7/site-packages/salt/modules/cloud.pyo /usr/lib/python2.7/site-packages/salt/modules/cmdmod.py /usr/lib/python2.7/site-packages/salt/modules/cmdmod.pyc /usr/lib/python2.7/site-packages/salt/modules/cmdmod.pyo /usr/lib/python2.7/site-packages/salt/modules/composer.py /usr/lib/python2.7/site-packages/salt/modules/composer.pyc /usr/lib/python2.7/site-packages/salt/modules/composer.pyo /usr/lib/python2.7/site-packages/salt/modules/config.py /usr/lib/python2.7/site-packages/salt/modules/config.pyc /usr/lib/python2.7/site-packages/salt/modules/config.pyo /usr/lib/python2.7/site-packages/salt/modules/consul.py /usr/lib/python2.7/site-packages/salt/modules/consul.pyc /usr/lib/python2.7/site-packages/salt/modules/consul.pyo /usr/lib/python2.7/site-packages/salt/modules/container_resource.py /usr/lib/python2.7/site-packages/salt/modules/container_resource.pyc /usr/lib/python2.7/site-packages/salt/modules/container_resource.pyo /usr/lib/python2.7/site-packages/salt/modules/cp.py /usr/lib/python2.7/site-packages/salt/modules/cp.pyc /usr/lib/python2.7/site-packages/salt/modules/cp.pyo /usr/lib/python2.7/site-packages/salt/modules/cpan.py /usr/lib/python2.7/site-packages/salt/modules/cpan.pyc /usr/lib/python2.7/site-packages/salt/modules/cpan.pyo /usr/lib/python2.7/site-packages/salt/modules/cron.py /usr/lib/python2.7/site-packages/salt/modules/cron.pyc /usr/lib/python2.7/site-packages/salt/modules/cron.pyo /usr/lib/python2.7/site-packages/salt/modules/cyg.py /usr/lib/python2.7/site-packages/salt/modules/cyg.pyc /usr/lib/python2.7/site-packages/salt/modules/cyg.pyo /usr/lib/python2.7/site-packages/salt/modules/daemontools.py /usr/lib/python2.7/site-packages/salt/modules/daemontools.pyc /usr/lib/python2.7/site-packages/salt/modules/daemontools.pyo /usr/lib/python2.7/site-packages/salt/modules/darwin_pkgutil.py /usr/lib/python2.7/site-packages/salt/modules/darwin_pkgutil.pyc /usr/lib/python2.7/site-packages/salt/modules/darwin_pkgutil.pyo /usr/lib/python2.7/site-packages/salt/modules/darwin_sysctl.py /usr/lib/python2.7/site-packages/salt/modules/darwin_sysctl.pyc /usr/lib/python2.7/site-packages/salt/modules/darwin_sysctl.pyo /usr/lib/python2.7/site-packages/salt/modules/data.py /usr/lib/python2.7/site-packages/salt/modules/data.pyc /usr/lib/python2.7/site-packages/salt/modules/data.pyo /usr/lib/python2.7/site-packages/salt/modules/ddns.py /usr/lib/python2.7/site-packages/salt/modules/ddns.pyc /usr/lib/python2.7/site-packages/salt/modules/ddns.pyo /usr/lib/python2.7/site-packages/salt/modules/deb_apache.py /usr/lib/python2.7/site-packages/salt/modules/deb_apache.pyc /usr/lib/python2.7/site-packages/salt/modules/deb_apache.pyo /usr/lib/python2.7/site-packages/salt/modules/deb_postgres.py /usr/lib/python2.7/site-packages/salt/modules/deb_postgres.pyc /usr/lib/python2.7/site-packages/salt/modules/deb_postgres.pyo /usr/lib/python2.7/site-packages/salt/modules/debbuild.py /usr/lib/python2.7/site-packages/salt/modules/debbuild.pyc /usr/lib/python2.7/site-packages/salt/modules/debbuild.pyo /usr/lib/python2.7/site-packages/salt/modules/debconfmod.py /usr/lib/python2.7/site-packages/salt/modules/debconfmod.pyc /usr/lib/python2.7/site-packages/salt/modules/debconfmod.pyo /usr/lib/python2.7/site-packages/salt/modules/debian_ip.py /usr/lib/python2.7/site-packages/salt/modules/debian_ip.pyc /usr/lib/python2.7/site-packages/salt/modules/debian_ip.pyo /usr/lib/python2.7/site-packages/salt/modules/debian_service.py /usr/lib/python2.7/site-packages/salt/modules/debian_service.pyc /usr/lib/python2.7/site-packages/salt/modules/debian_service.pyo /usr/lib/python2.7/site-packages/salt/modules/defaults.py /usr/lib/python2.7/site-packages/salt/modules/defaults.pyc /usr/lib/python2.7/site-packages/salt/modules/defaults.pyo /usr/lib/python2.7/site-packages/salt/modules/devmap.py /usr/lib/python2.7/site-packages/salt/modules/devmap.pyc /usr/lib/python2.7/site-packages/salt/modules/devmap.pyo /usr/lib/python2.7/site-packages/salt/modules/dig.py /usr/lib/python2.7/site-packages/salt/modules/dig.pyc /usr/lib/python2.7/site-packages/salt/modules/dig.pyo /usr/lib/python2.7/site-packages/salt/modules/disk.py /usr/lib/python2.7/site-packages/salt/modules/disk.pyc /usr/lib/python2.7/site-packages/salt/modules/disk.pyo /usr/lib/python2.7/site-packages/salt/modules/djangomod.py /usr/lib/python2.7/site-packages/salt/modules/djangomod.pyc /usr/lib/python2.7/site-packages/salt/modules/djangomod.pyo /usr/lib/python2.7/site-packages/salt/modules/dnsmasq.py /usr/lib/python2.7/site-packages/salt/modules/dnsmasq.pyc /usr/lib/python2.7/site-packages/salt/modules/dnsmasq.pyo /usr/lib/python2.7/site-packages/salt/modules/dnsutil.py /usr/lib/python2.7/site-packages/salt/modules/dnsutil.pyc /usr/lib/python2.7/site-packages/salt/modules/dnsutil.pyo /usr/lib/python2.7/site-packages/salt/modules/dockerio.py /usr/lib/python2.7/site-packages/salt/modules/dockerio.pyc /usr/lib/python2.7/site-packages/salt/modules/dockerio.pyo /usr/lib/python2.7/site-packages/salt/modules/dockerng.py /usr/lib/python2.7/site-packages/salt/modules/dockerng.pyc /usr/lib/python2.7/site-packages/salt/modules/dockerng.pyo /usr/lib/python2.7/site-packages/salt/modules/dpkg.py /usr/lib/python2.7/site-packages/salt/modules/dpkg.pyc /usr/lib/python2.7/site-packages/salt/modules/dpkg.pyo /usr/lib/python2.7/site-packages/salt/modules/drac.py /usr/lib/python2.7/site-packages/salt/modules/drac.pyc /usr/lib/python2.7/site-packages/salt/modules/drac.pyo /usr/lib/python2.7/site-packages/salt/modules/dracr.py /usr/lib/python2.7/site-packages/salt/modules/dracr.pyc /usr/lib/python2.7/site-packages/salt/modules/dracr.pyo /usr/lib/python2.7/site-packages/salt/modules/drbd.py /usr/lib/python2.7/site-packages/salt/modules/drbd.pyc /usr/lib/python2.7/site-packages/salt/modules/drbd.pyo /usr/lib/python2.7/site-packages/salt/modules/ebuild.py /usr/lib/python2.7/site-packages/salt/modules/ebuild.pyc /usr/lib/python2.7/site-packages/salt/modules/ebuild.pyo /usr/lib/python2.7/site-packages/salt/modules/eix.py /usr/lib/python2.7/site-packages/salt/modules/eix.pyc /usr/lib/python2.7/site-packages/salt/modules/eix.pyo /usr/lib/python2.7/site-packages/salt/modules/elasticsearch.py /usr/lib/python2.7/site-packages/salt/modules/elasticsearch.pyc /usr/lib/python2.7/site-packages/salt/modules/elasticsearch.pyo /usr/lib/python2.7/site-packages/salt/modules/environ.py /usr/lib/python2.7/site-packages/salt/modules/environ.pyc /usr/lib/python2.7/site-packages/salt/modules/environ.pyo /usr/lib/python2.7/site-packages/salt/modules/eselect.py /usr/lib/python2.7/site-packages/salt/modules/eselect.pyc /usr/lib/python2.7/site-packages/salt/modules/eselect.pyo /usr/lib/python2.7/site-packages/salt/modules/esxi.py /usr/lib/python2.7/site-packages/salt/modules/esxi.pyc /usr/lib/python2.7/site-packages/salt/modules/esxi.pyo /usr/lib/python2.7/site-packages/salt/modules/etcd_mod.py /usr/lib/python2.7/site-packages/salt/modules/etcd_mod.pyc /usr/lib/python2.7/site-packages/salt/modules/etcd_mod.pyo /usr/lib/python2.7/site-packages/salt/modules/event.py /usr/lib/python2.7/site-packages/salt/modules/event.pyc /usr/lib/python2.7/site-packages/salt/modules/event.pyo /usr/lib/python2.7/site-packages/salt/modules/extfs.py /usr/lib/python2.7/site-packages/salt/modules/extfs.pyc /usr/lib/python2.7/site-packages/salt/modules/extfs.pyo /usr/lib/python2.7/site-packages/salt/modules/file.py /usr/lib/python2.7/site-packages/salt/modules/file.pyc /usr/lib/python2.7/site-packages/salt/modules/file.pyo /usr/lib/python2.7/site-packages/salt/modules/firewalld.py /usr/lib/python2.7/site-packages/salt/modules/firewalld.pyc /usr/lib/python2.7/site-packages/salt/modules/firewalld.pyo /usr/lib/python2.7/site-packages/salt/modules/freebsd_sysctl.py /usr/lib/python2.7/site-packages/salt/modules/freebsd_sysctl.pyc /usr/lib/python2.7/site-packages/salt/modules/freebsd_sysctl.pyo /usr/lib/python2.7/site-packages/salt/modules/freebsdjail.py /usr/lib/python2.7/site-packages/salt/modules/freebsdjail.pyc /usr/lib/python2.7/site-packages/salt/modules/freebsdjail.pyo /usr/lib/python2.7/site-packages/salt/modules/freebsdkmod.py /usr/lib/python2.7/site-packages/salt/modules/freebsdkmod.pyc /usr/lib/python2.7/site-packages/salt/modules/freebsdkmod.pyo /usr/lib/python2.7/site-packages/salt/modules/freebsdpkg.py /usr/lib/python2.7/site-packages/salt/modules/freebsdpkg.pyc /usr/lib/python2.7/site-packages/salt/modules/freebsdpkg.pyo /usr/lib/python2.7/site-packages/salt/modules/freebsdports.py /usr/lib/python2.7/site-packages/salt/modules/freebsdports.pyc /usr/lib/python2.7/site-packages/salt/modules/freebsdports.pyo /usr/lib/python2.7/site-packages/salt/modules/freebsdservice.py /usr/lib/python2.7/site-packages/salt/modules/freebsdservice.pyc /usr/lib/python2.7/site-packages/salt/modules/freebsdservice.pyo /usr/lib/python2.7/site-packages/salt/modules/gem.py /usr/lib/python2.7/site-packages/salt/modules/gem.pyc /usr/lib/python2.7/site-packages/salt/modules/gem.pyo /usr/lib/python2.7/site-packages/salt/modules/genesis.py /usr/lib/python2.7/site-packages/salt/modules/genesis.pyc /usr/lib/python2.7/site-packages/salt/modules/genesis.pyo /usr/lib/python2.7/site-packages/salt/modules/gentoo_service.py /usr/lib/python2.7/site-packages/salt/modules/gentoo_service.pyc /usr/lib/python2.7/site-packages/salt/modules/gentoo_service.pyo /usr/lib/python2.7/site-packages/salt/modules/gentoolkitmod.py /usr/lib/python2.7/site-packages/salt/modules/gentoolkitmod.pyc /usr/lib/python2.7/site-packages/salt/modules/gentoolkitmod.pyo /usr/lib/python2.7/site-packages/salt/modules/git.py /usr/lib/python2.7/site-packages/salt/modules/git.pyc /usr/lib/python2.7/site-packages/salt/modules/git.pyo /usr/lib/python2.7/site-packages/salt/modules/glance.py /usr/lib/python2.7/site-packages/salt/modules/glance.pyc /usr/lib/python2.7/site-packages/salt/modules/glance.pyo /usr/lib/python2.7/site-packages/salt/modules/glusterfs.py /usr/lib/python2.7/site-packages/salt/modules/glusterfs.pyc /usr/lib/python2.7/site-packages/salt/modules/glusterfs.pyo /usr/lib/python2.7/site-packages/salt/modules/gnomedesktop.py /usr/lib/python2.7/site-packages/salt/modules/gnomedesktop.pyc /usr/lib/python2.7/site-packages/salt/modules/gnomedesktop.pyo /usr/lib/python2.7/site-packages/salt/modules/gpg.py /usr/lib/python2.7/site-packages/salt/modules/gpg.pyc /usr/lib/python2.7/site-packages/salt/modules/gpg.pyo /usr/lib/python2.7/site-packages/salt/modules/grains.py /usr/lib/python2.7/site-packages/salt/modules/grains.pyc /usr/lib/python2.7/site-packages/salt/modules/grains.pyo /usr/lib/python2.7/site-packages/salt/modules/groupadd.py /usr/lib/python2.7/site-packages/salt/modules/groupadd.pyc /usr/lib/python2.7/site-packages/salt/modules/groupadd.pyo /usr/lib/python2.7/site-packages/salt/modules/grub_legacy.py /usr/lib/python2.7/site-packages/salt/modules/grub_legacy.pyc /usr/lib/python2.7/site-packages/salt/modules/grub_legacy.pyo /usr/lib/python2.7/site-packages/salt/modules/guestfs.py /usr/lib/python2.7/site-packages/salt/modules/guestfs.pyc /usr/lib/python2.7/site-packages/salt/modules/guestfs.pyo /usr/lib/python2.7/site-packages/salt/modules/hadoop.py /usr/lib/python2.7/site-packages/salt/modules/hadoop.pyc /usr/lib/python2.7/site-packages/salt/modules/hadoop.pyo /usr/lib/python2.7/site-packages/salt/modules/haproxyconn.py /usr/lib/python2.7/site-packages/salt/modules/haproxyconn.pyc /usr/lib/python2.7/site-packages/salt/modules/haproxyconn.pyo /usr/lib/python2.7/site-packages/salt/modules/hashutil.py /usr/lib/python2.7/site-packages/salt/modules/hashutil.pyc /usr/lib/python2.7/site-packages/salt/modules/hashutil.pyo /usr/lib/python2.7/site-packages/salt/modules/hg.py /usr/lib/python2.7/site-packages/salt/modules/hg.pyc /usr/lib/python2.7/site-packages/salt/modules/hg.pyo /usr/lib/python2.7/site-packages/salt/modules/hipchat.py /usr/lib/python2.7/site-packages/salt/modules/hipchat.pyc /usr/lib/python2.7/site-packages/salt/modules/hipchat.pyo /usr/lib/python2.7/site-packages/salt/modules/hosts.py /usr/lib/python2.7/site-packages/salt/modules/hosts.pyc /usr/lib/python2.7/site-packages/salt/modules/hosts.pyo /usr/lib/python2.7/site-packages/salt/modules/htpasswd.py /usr/lib/python2.7/site-packages/salt/modules/htpasswd.pyc /usr/lib/python2.7/site-packages/salt/modules/htpasswd.pyo /usr/lib/python2.7/site-packages/salt/modules/http.py /usr/lib/python2.7/site-packages/salt/modules/http.pyc /usr/lib/python2.7/site-packages/salt/modules/http.pyo /usr/lib/python2.7/site-packages/salt/modules/ifttt.py /usr/lib/python2.7/site-packages/salt/modules/ifttt.pyc /usr/lib/python2.7/site-packages/salt/modules/ifttt.pyo /usr/lib/python2.7/site-packages/salt/modules/ilo.py /usr/lib/python2.7/site-packages/salt/modules/ilo.pyc /usr/lib/python2.7/site-packages/salt/modules/ilo.pyo /usr/lib/python2.7/site-packages/salt/modules/img.py /usr/lib/python2.7/site-packages/salt/modules/img.pyc /usr/lib/python2.7/site-packages/salt/modules/img.pyo /usr/lib/python2.7/site-packages/salt/modules/incron.py /usr/lib/python2.7/site-packages/salt/modules/incron.pyc /usr/lib/python2.7/site-packages/salt/modules/incron.pyo /usr/lib/python2.7/site-packages/salt/modules/influx.py /usr/lib/python2.7/site-packages/salt/modules/influx.pyc /usr/lib/python2.7/site-packages/salt/modules/influx.pyo /usr/lib/python2.7/site-packages/salt/modules/ini_manage.py /usr/lib/python2.7/site-packages/salt/modules/ini_manage.pyc /usr/lib/python2.7/site-packages/salt/modules/ini_manage.pyo /usr/lib/python2.7/site-packages/salt/modules/inspectlib /usr/lib/python2.7/site-packages/salt/modules/inspectlib/**init**.py /usr/lib/python2.7/site-packages/salt/modules/inspectlib/**init**.pyc /usr/lib/python2.7/site-packages/salt/modules/inspectlib/**init**.pyo /usr/lib/python2.7/site-packages/salt/modules/inspectlib/collector.py /usr/lib/python2.7/site-packages/salt/modules/inspectlib/collector.pyc /usr/lib/python2.7/site-packages/salt/modules/inspectlib/collector.pyo /usr/lib/python2.7/site-packages/salt/modules/inspectlib/dbhandle.py /usr/lib/python2.7/site-packages/salt/modules/inspectlib/dbhandle.pyc /usr/lib/python2.7/site-packages/salt/modules/inspectlib/dbhandle.pyo /usr/lib/python2.7/site-packages/salt/modules/inspectlib/exceptions.py /usr/lib/python2.7/site-packages/salt/modules/inspectlib/exceptions.pyc /usr/lib/python2.7/site-packages/salt/modules/inspectlib/exceptions.pyo /usr/lib/python2.7/site-packages/salt/modules/inspectlib/query.py /usr/lib/python2.7/site-packages/salt/modules/inspectlib/query.pyc /usr/lib/python2.7/site-packages/salt/modules/inspectlib/query.pyo /usr/lib/python2.7/site-packages/salt/modules/introspect.py /usr/lib/python2.7/site-packages/salt/modules/introspect.pyc /usr/lib/python2.7/site-packages/salt/modules/introspect.pyo /usr/lib/python2.7/site-packages/salt/modules/ipmi.py /usr/lib/python2.7/site-packages/salt/modules/ipmi.pyc /usr/lib/python2.7/site-packages/salt/modules/ipmi.pyo /usr/lib/python2.7/site-packages/salt/modules/ipset.py /usr/lib/python2.7/site-packages/salt/modules/ipset.pyc /usr/lib/python2.7/site-packages/salt/modules/ipset.pyo /usr/lib/python2.7/site-packages/salt/modules/iptables.py /usr/lib/python2.7/site-packages/salt/modules/iptables.pyc /usr/lib/python2.7/site-packages/salt/modules/iptables.pyo /usr/lib/python2.7/site-packages/salt/modules/jboss7.py /usr/lib/python2.7/site-packages/salt/modules/jboss7.pyc /usr/lib/python2.7/site-packages/salt/modules/jboss7.pyo /usr/lib/python2.7/site-packages/salt/modules/jboss7_cli.py /usr/lib/python2.7/site-packages/salt/modules/jboss7_cli.pyc /usr/lib/python2.7/site-packages/salt/modules/jboss7_cli.pyo /usr/lib/python2.7/site-packages/salt/modules/junos.py /usr/lib/python2.7/site-packages/salt/modules/junos.pyc /usr/lib/python2.7/site-packages/salt/modules/junos.pyo /usr/lib/python2.7/site-packages/salt/modules/kerberos.py /usr/lib/python2.7/site-packages/salt/modules/kerberos.pyc /usr/lib/python2.7/site-packages/salt/modules/kerberos.pyo /usr/lib/python2.7/site-packages/salt/modules/key.py /usr/lib/python2.7/site-packages/salt/modules/key.pyc /usr/lib/python2.7/site-packages/salt/modules/key.pyo /usr/lib/python2.7/site-packages/salt/modules/keyboard.py /usr/lib/python2.7/site-packages/salt/modules/keyboard.pyc /usr/lib/python2.7/site-packages/salt/modules/keyboard.pyo /usr/lib/python2.7/site-packages/salt/modules/keystone.py /usr/lib/python2.7/site-packages/salt/modules/keystone.pyc /usr/lib/python2.7/site-packages/salt/modules/keystone.pyo /usr/lib/python2.7/site-packages/salt/modules/kmod.py /usr/lib/python2.7/site-packages/salt/modules/kmod.pyc /usr/lib/python2.7/site-packages/salt/modules/kmod.pyo /usr/lib/python2.7/site-packages/salt/modules/launchctl.py /usr/lib/python2.7/site-packages/salt/modules/launchctl.pyc /usr/lib/python2.7/site-packages/salt/modules/launchctl.pyo /usr/lib/python2.7/site-packages/salt/modules/layman.py /usr/lib/python2.7/site-packages/salt/modules/layman.pyc /usr/lib/python2.7/site-packages/salt/modules/layman.pyo /usr/lib/python2.7/site-packages/salt/modules/ldapmod.py /usr/lib/python2.7/site-packages/salt/modules/ldapmod.pyc /usr/lib/python2.7/site-packages/salt/modules/ldapmod.pyo /usr/lib/python2.7/site-packages/salt/modules/linux_acl.py /usr/lib/python2.7/site-packages/salt/modules/linux_acl.pyc /usr/lib/python2.7/site-packages/salt/modules/linux_acl.pyo /usr/lib/python2.7/site-packages/salt/modules/linux_lvm.py /usr/lib/python2.7/site-packages/salt/modules/linux_lvm.pyc /usr/lib/python2.7/site-packages/salt/modules/linux_lvm.pyo /usr/lib/python2.7/site-packages/salt/modules/linux_sysctl.py /usr/lib/python2.7/site-packages/salt/modules/linux_sysctl.pyc /usr/lib/python2.7/site-packages/salt/modules/linux_sysctl.pyo /usr/lib/python2.7/site-packages/salt/modules/localemod.py /usr/lib/python2.7/site-packages/salt/modules/localemod.pyc /usr/lib/python2.7/site-packages/salt/modules/localemod.pyo /usr/lib/python2.7/site-packages/salt/modules/locate.py /usr/lib/python2.7/site-packages/salt/modules/locate.pyc /usr/lib/python2.7/site-packages/salt/modules/locate.pyo /usr/lib/python2.7/site-packages/salt/modules/logadm.py /usr/lib/python2.7/site-packages/salt/modules/logadm.pyc /usr/lib/python2.7/site-packages/salt/modules/logadm.pyo /usr/lib/python2.7/site-packages/salt/modules/logrotate.py /usr/lib/python2.7/site-packages/salt/modules/logrotate.pyc /usr/lib/python2.7/site-packages/salt/modules/logrotate.pyo /usr/lib/python2.7/site-packages/salt/modules/lvs.py /usr/lib/python2.7/site-packages/salt/modules/lvs.pyc /usr/lib/python2.7/site-packages/salt/modules/lvs.pyo /usr/lib/python2.7/site-packages/salt/modules/lxc.py /usr/lib/python2.7/site-packages/salt/modules/lxc.pyc /usr/lib/python2.7/site-packages/salt/modules/lxc.pyo /usr/lib/python2.7/site-packages/salt/modules/mac_group.py /usr/lib/python2.7/site-packages/salt/modules/mac_group.pyc /usr/lib/python2.7/site-packages/salt/modules/mac_group.pyo /usr/lib/python2.7/site-packages/salt/modules/mac_user.py /usr/lib/python2.7/site-packages/salt/modules/mac_user.pyc /usr/lib/python2.7/site-packages/salt/modules/mac_user.pyo /usr/lib/python2.7/site-packages/salt/modules/macports.py /usr/lib/python2.7/site-packages/salt/modules/macports.pyc /usr/lib/python2.7/site-packages/salt/modules/macports.pyo /usr/lib/python2.7/site-packages/salt/modules/makeconf.py /usr/lib/python2.7/site-packages/salt/modules/makeconf.pyc /usr/lib/python2.7/site-packages/salt/modules/makeconf.pyo /usr/lib/python2.7/site-packages/salt/modules/marathon.py /usr/lib/python2.7/site-packages/salt/modules/marathon.pyc /usr/lib/python2.7/site-packages/salt/modules/marathon.pyo /usr/lib/python2.7/site-packages/salt/modules/match.py /usr/lib/python2.7/site-packages/salt/modules/match.pyc /usr/lib/python2.7/site-packages/salt/modules/match.pyo /usr/lib/python2.7/site-packages/salt/modules/mdadm.py /usr/lib/python2.7/site-packages/salt/modules/mdadm.pyc /usr/lib/python2.7/site-packages/salt/modules/mdadm.pyo /usr/lib/python2.7/site-packages/salt/modules/memcached.py /usr/lib/python2.7/site-packages/salt/modules/memcached.pyc /usr/lib/python2.7/site-packages/salt/modules/memcached.pyo /usr/lib/python2.7/site-packages/salt/modules/mine.py /usr/lib/python2.7/site-packages/salt/modules/mine.pyc /usr/lib/python2.7/site-packages/salt/modules/mine.pyo /usr/lib/python2.7/site-packages/salt/modules/mod_random.py /usr/lib/python2.7/site-packages/salt/modules/mod_random.pyc /usr/lib/python2.7/site-packages/salt/modules/mod_random.pyo /usr/lib/python2.7/site-packages/salt/modules/modjk.py /usr/lib/python2.7/site-packages/salt/modules/modjk.pyc /usr/lib/python2.7/site-packages/salt/modules/modjk.pyo /usr/lib/python2.7/site-packages/salt/modules/mongodb.py /usr/lib/python2.7/site-packages/salt/modules/mongodb.pyc /usr/lib/python2.7/site-packages/salt/modules/mongodb.pyo /usr/lib/python2.7/site-packages/salt/modules/monit.py /usr/lib/python2.7/site-packages/salt/modules/monit.pyc /usr/lib/python2.7/site-packages/salt/modules/monit.pyo /usr/lib/python2.7/site-packages/salt/modules/moosefs.py /usr/lib/python2.7/site-packages/salt/modules/moosefs.pyc /usr/lib/python2.7/site-packages/salt/modules/moosefs.pyo /usr/lib/python2.7/site-packages/salt/modules/mount.py /usr/lib/python2.7/site-packages/salt/modules/mount.pyc /usr/lib/python2.7/site-packages/salt/modules/mount.pyo /usr/lib/python2.7/site-packages/salt/modules/mssql.py /usr/lib/python2.7/site-packages/salt/modules/mssql.pyc /usr/lib/python2.7/site-packages/salt/modules/mssql.pyo /usr/lib/python2.7/site-packages/salt/modules/munin.py /usr/lib/python2.7/site-packages/salt/modules/munin.pyc /usr/lib/python2.7/site-packages/salt/modules/munin.pyo /usr/lib/python2.7/site-packages/salt/modules/mysql.py /usr/lib/python2.7/site-packages/salt/modules/mysql.pyc /usr/lib/python2.7/site-packages/salt/modules/mysql.pyo /usr/lib/python2.7/site-packages/salt/modules/nacl.py /usr/lib/python2.7/site-packages/salt/modules/nacl.pyc /usr/lib/python2.7/site-packages/salt/modules/nacl.pyo /usr/lib/python2.7/site-packages/salt/modules/nagios.py /usr/lib/python2.7/site-packages/salt/modules/nagios.pyc /usr/lib/python2.7/site-packages/salt/modules/nagios.pyo /usr/lib/python2.7/site-packages/salt/modules/nagios_rpc.py /usr/lib/python2.7/site-packages/salt/modules/nagios_rpc.pyc /usr/lib/python2.7/site-packages/salt/modules/nagios_rpc.pyo /usr/lib/python2.7/site-packages/salt/modules/netbsd_sysctl.py /usr/lib/python2.7/site-packages/salt/modules/netbsd_sysctl.pyc /usr/lib/python2.7/site-packages/salt/modules/netbsd_sysctl.pyo /usr/lib/python2.7/site-packages/salt/modules/netbsdservice.py /usr/lib/python2.7/site-packages/salt/modules/netbsdservice.pyc /usr/lib/python2.7/site-packages/salt/modules/netbsdservice.pyo /usr/lib/python2.7/site-packages/salt/modules/netscaler.py /usr/lib/python2.7/site-packages/salt/modules/netscaler.pyc /usr/lib/python2.7/site-packages/salt/modules/netscaler.pyo /usr/lib/python2.7/site-packages/salt/modules/network.py /usr/lib/python2.7/site-packages/salt/modules/network.pyc /usr/lib/python2.7/site-packages/salt/modules/network.pyo /usr/lib/python2.7/site-packages/salt/modules/neutron.py /usr/lib/python2.7/site-packages/salt/modules/neutron.pyc /usr/lib/python2.7/site-packages/salt/modules/neutron.pyo /usr/lib/python2.7/site-packages/salt/modules/nfs3.py /usr/lib/python2.7/site-packages/salt/modules/nfs3.pyc /usr/lib/python2.7/site-packages/salt/modules/nfs3.pyo /usr/lib/python2.7/site-packages/salt/modules/nftables.py /usr/lib/python2.7/site-packages/salt/modules/nftables.pyc /usr/lib/python2.7/site-packages/salt/modules/nftables.pyo /usr/lib/python2.7/site-packages/salt/modules/nginx.py /usr/lib/python2.7/site-packages/salt/modules/nginx.pyc /usr/lib/python2.7/site-packages/salt/modules/nginx.pyo /usr/lib/python2.7/site-packages/salt/modules/node.py /usr/lib/python2.7/site-packages/salt/modules/node.pyc /usr/lib/python2.7/site-packages/salt/modules/node.pyo /usr/lib/python2.7/site-packages/salt/modules/nova.py /usr/lib/python2.7/site-packages/salt/modules/nova.pyc /usr/lib/python2.7/site-packages/salt/modules/nova.pyo /usr/lib/python2.7/site-packages/salt/modules/npm.py /usr/lib/python2.7/site-packages/salt/modules/npm.pyc /usr/lib/python2.7/site-packages/salt/modules/npm.pyo /usr/lib/python2.7/site-packages/salt/modules/nspawn.py /usr/lib/python2.7/site-packages/salt/modules/nspawn.pyc /usr/lib/python2.7/site-packages/salt/modules/nspawn.pyo /usr/lib/python2.7/site-packages/salt/modules/omapi.py /usr/lib/python2.7/site-packages/salt/modules/omapi.pyc /usr/lib/python2.7/site-packages/salt/modules/omapi.pyo /usr/lib/python2.7/site-packages/salt/modules/openbsd_sysctl.py /usr/lib/python2.7/site-packages/salt/modules/openbsd_sysctl.pyc /usr/lib/python2.7/site-packages/salt/modules/openbsd_sysctl.pyo /usr/lib/python2.7/site-packages/salt/modules/openbsdpkg.py /usr/lib/python2.7/site-packages/salt/modules/openbsdpkg.pyc /usr/lib/python2.7/site-packages/salt/modules/openbsdpkg.pyo /usr/lib/python2.7/site-packages/salt/modules/openbsdrcctl.py /usr/lib/python2.7/site-packages/salt/modules/openbsdrcctl.pyc /usr/lib/python2.7/site-packages/salt/modules/openbsdrcctl.pyo /usr/lib/python2.7/site-packages/salt/modules/openbsdservice.py /usr/lib/python2.7/site-packages/salt/modules/openbsdservice.pyc /usr/lib/python2.7/site-packages/salt/modules/openbsdservice.pyo /usr/lib/python2.7/site-packages/salt/modules/openstack_config.py /usr/lib/python2.7/site-packages/salt/modules/openstack_config.pyc /usr/lib/python2.7/site-packages/salt/modules/openstack_config.pyo /usr/lib/python2.7/site-packages/salt/modules/oracle.py /usr/lib/python2.7/site-packages/salt/modules/oracle.pyc /usr/lib/python2.7/site-packages/salt/modules/oracle.pyo /usr/lib/python2.7/site-packages/salt/modules/osquery.py /usr/lib/python2.7/site-packages/salt/modules/osquery.pyc /usr/lib/python2.7/site-packages/salt/modules/osquery.pyo /usr/lib/python2.7/site-packages/salt/modules/osxdesktop.py /usr/lib/python2.7/site-packages/salt/modules/osxdesktop.pyc /usr/lib/python2.7/site-packages/salt/modules/osxdesktop.pyo /usr/lib/python2.7/site-packages/salt/modules/pacman.py /usr/lib/python2.7/site-packages/salt/modules/pacman.pyc /usr/lib/python2.7/site-packages/salt/modules/pacman.pyo /usr/lib/python2.7/site-packages/salt/modules/pagerduty.py /usr/lib/python2.7/site-packages/salt/modules/pagerduty.pyc /usr/lib/python2.7/site-packages/salt/modules/pagerduty.pyo /usr/lib/python2.7/site-packages/salt/modules/pagerduty_util.py /usr/lib/python2.7/site-packages/salt/modules/pagerduty_util.pyc /usr/lib/python2.7/site-packages/salt/modules/pagerduty_util.pyo /usr/lib/python2.7/site-packages/salt/modules/pam.py /usr/lib/python2.7/site-packages/salt/modules/pam.pyc /usr/lib/python2.7/site-packages/salt/modules/pam.pyo /usr/lib/python2.7/site-packages/salt/modules/parted.py /usr/lib/python2.7/site-packages/salt/modules/parted.pyc /usr/lib/python2.7/site-packages/salt/modules/parted.pyo /usr/lib/python2.7/site-packages/salt/modules/pecl.py /usr/lib/python2.7/site-packages/salt/modules/pecl.pyc /usr/lib/python2.7/site-packages/salt/modules/pecl.pyo /usr/lib/python2.7/site-packages/salt/modules/philips_hue.py /usr/lib/python2.7/site-packages/salt/modules/philips_hue.pyc /usr/lib/python2.7/site-packages/salt/modules/philips_hue.pyo /usr/lib/python2.7/site-packages/salt/modules/pillar.py /usr/lib/python2.7/site-packages/salt/modules/pillar.pyc /usr/lib/python2.7/site-packages/salt/modules/pillar.pyo /usr/lib/python2.7/site-packages/salt/modules/pip.py /usr/lib/python2.7/site-packages/salt/modules/pip.pyc /usr/lib/python2.7/site-packages/salt/modules/pip.pyo /usr/lib/python2.7/site-packages/salt/modules/pkg_resource.py /usr/lib/python2.7/site-packages/salt/modules/pkg_resource.pyc /usr/lib/python2.7/site-packages/salt/modules/pkg_resource.pyo /usr/lib/python2.7/site-packages/salt/modules/pkgin.py /usr/lib/python2.7/site-packages/salt/modules/pkgin.pyc /usr/lib/python2.7/site-packages/salt/modules/pkgin.pyo /usr/lib/python2.7/site-packages/salt/modules/pkgng.py /usr/lib/python2.7/site-packages/salt/modules/pkgng.pyc /usr/lib/python2.7/site-packages/salt/modules/pkgng.pyo /usr/lib/python2.7/site-packages/salt/modules/pkgutil.py /usr/lib/python2.7/site-packages/salt/modules/pkgutil.pyc /usr/lib/python2.7/site-packages/salt/modules/pkgutil.pyo /usr/lib/python2.7/site-packages/salt/modules/portage_config.py /usr/lib/python2.7/site-packages/salt/modules/portage_config.pyc /usr/lib/python2.7/site-packages/salt/modules/portage_config.pyo /usr/lib/python2.7/site-packages/salt/modules/postfix.py /usr/lib/python2.7/site-packages/salt/modules/postfix.pyc /usr/lib/python2.7/site-packages/salt/modules/postfix.pyo /usr/lib/python2.7/site-packages/salt/modules/postgres.py /usr/lib/python2.7/site-packages/salt/modules/postgres.pyc /usr/lib/python2.7/site-packages/salt/modules/postgres.pyo /usr/lib/python2.7/site-packages/salt/modules/poudriere.py /usr/lib/python2.7/site-packages/salt/modules/poudriere.pyc /usr/lib/python2.7/site-packages/salt/modules/poudriere.pyo /usr/lib/python2.7/site-packages/salt/modules/powerpath.py /usr/lib/python2.7/site-packages/salt/modules/powerpath.pyc /usr/lib/python2.7/site-packages/salt/modules/powerpath.pyo /usr/lib/python2.7/site-packages/salt/modules/ps.py /usr/lib/python2.7/site-packages/salt/modules/ps.pyc /usr/lib/python2.7/site-packages/salt/modules/ps.pyo /usr/lib/python2.7/site-packages/salt/modules/publish.py /usr/lib/python2.7/site-packages/salt/modules/publish.pyc /usr/lib/python2.7/site-packages/salt/modules/publish.pyo /usr/lib/python2.7/site-packages/salt/modules/puppet.py /usr/lib/python2.7/site-packages/salt/modules/puppet.pyc /usr/lib/python2.7/site-packages/salt/modules/puppet.pyo /usr/lib/python2.7/site-packages/salt/modules/pushover_notify.py /usr/lib/python2.7/site-packages/salt/modules/pushover_notify.pyc /usr/lib/python2.7/site-packages/salt/modules/pushover_notify.pyo /usr/lib/python2.7/site-packages/salt/modules/pw_group.py /usr/lib/python2.7/site-packages/salt/modules/pw_group.pyc /usr/lib/python2.7/site-packages/salt/modules/pw_group.pyo /usr/lib/python2.7/site-packages/salt/modules/pw_user.py /usr/lib/python2.7/site-packages/salt/modules/pw_user.pyc /usr/lib/python2.7/site-packages/salt/modules/pw_user.pyo /usr/lib/python2.7/site-packages/salt/modules/pyenv.py /usr/lib/python2.7/site-packages/salt/modules/pyenv.pyc /usr/lib/python2.7/site-packages/salt/modules/pyenv.pyo /usr/lib/python2.7/site-packages/salt/modules/qemu_img.py /usr/lib/python2.7/site-packages/salt/modules/qemu_img.pyc /usr/lib/python2.7/site-packages/salt/modules/qemu_img.pyo /usr/lib/python2.7/site-packages/salt/modules/qemu_nbd.py /usr/lib/python2.7/site-packages/salt/modules/qemu_nbd.pyc /usr/lib/python2.7/site-packages/salt/modules/qemu_nbd.pyo /usr/lib/python2.7/site-packages/salt/modules/quota.py /usr/lib/python2.7/site-packages/salt/modules/quota.pyc /usr/lib/python2.7/site-packages/salt/modules/quota.pyo /usr/lib/python2.7/site-packages/salt/modules/rabbitmq.py /usr/lib/python2.7/site-packages/salt/modules/rabbitmq.pyc /usr/lib/python2.7/site-packages/salt/modules/rabbitmq.pyo /usr/lib/python2.7/site-packages/salt/modules/raet_publish.py /usr/lib/python2.7/site-packages/salt/modules/raet_publish.pyc /usr/lib/python2.7/site-packages/salt/modules/raet_publish.pyo /usr/lib/python2.7/site-packages/salt/modules/rallydev.py /usr/lib/python2.7/site-packages/salt/modules/rallydev.pyc /usr/lib/python2.7/site-packages/salt/modules/rallydev.pyo /usr/lib/python2.7/site-packages/salt/modules/random_org.py /usr/lib/python2.7/site-packages/salt/modules/random_org.pyc /usr/lib/python2.7/site-packages/salt/modules/random_org.pyo /usr/lib/python2.7/site-packages/salt/modules/rbenv.py /usr/lib/python2.7/site-packages/salt/modules/rbenv.pyc /usr/lib/python2.7/site-packages/salt/modules/rbenv.pyo /usr/lib/python2.7/site-packages/salt/modules/rdp.py /usr/lib/python2.7/site-packages/salt/modules/rdp.pyc /usr/lib/python2.7/site-packages/salt/modules/rdp.pyo /usr/lib/python2.7/site-packages/salt/modules/redismod.py /usr/lib/python2.7/site-packages/salt/modules/redismod.pyc /usr/lib/python2.7/site-packages/salt/modules/redismod.pyo /usr/lib/python2.7/site-packages/salt/modules/reg.py /usr/lib/python2.7/site-packages/salt/modules/reg.pyc /usr/lib/python2.7/site-packages/salt/modules/reg.pyo /usr/lib/python2.7/site-packages/salt/modules/rest_package.py /usr/lib/python2.7/site-packages/salt/modules/rest_package.pyc /usr/lib/python2.7/site-packages/salt/modules/rest_package.pyo /usr/lib/python2.7/site-packages/salt/modules/rest_service.py /usr/lib/python2.7/site-packages/salt/modules/rest_service.pyc /usr/lib/python2.7/site-packages/salt/modules/rest_service.pyo /usr/lib/python2.7/site-packages/salt/modules/ret.py /usr/lib/python2.7/site-packages/salt/modules/ret.pyc /usr/lib/python2.7/site-packages/salt/modules/ret.pyo /usr/lib/python2.7/site-packages/salt/modules/rh_ip.py /usr/lib/python2.7/site-packages/salt/modules/rh_ip.pyc /usr/lib/python2.7/site-packages/salt/modules/rh_ip.pyo /usr/lib/python2.7/site-packages/salt/modules/rh_service.py /usr/lib/python2.7/site-packages/salt/modules/rh_service.pyc /usr/lib/python2.7/site-packages/salt/modules/rh_service.pyo /usr/lib/python2.7/site-packages/salt/modules/riak.py /usr/lib/python2.7/site-packages/salt/modules/riak.pyc /usr/lib/python2.7/site-packages/salt/modules/riak.pyo /usr/lib/python2.7/site-packages/salt/modules/rpm.py /usr/lib/python2.7/site-packages/salt/modules/rpm.pyc /usr/lib/python2.7/site-packages/salt/modules/rpm.pyo /usr/lib/python2.7/site-packages/salt/modules/rpmbuild.py /usr/lib/python2.7/site-packages/salt/modules/rpmbuild.pyc /usr/lib/python2.7/site-packages/salt/modules/rpmbuild.pyo /usr/lib/python2.7/site-packages/salt/modules/rsync.py /usr/lib/python2.7/site-packages/salt/modules/rsync.pyc /usr/lib/python2.7/site-packages/salt/modules/rsync.pyo /usr/lib/python2.7/site-packages/salt/modules/runit.py /usr/lib/python2.7/site-packages/salt/modules/runit.pyc /usr/lib/python2.7/site-packages/salt/modules/runit.pyo /usr/lib/python2.7/site-packages/salt/modules/rvm.py /usr/lib/python2.7/site-packages/salt/modules/rvm.pyc /usr/lib/python2.7/site-packages/salt/modules/rvm.pyo /usr/lib/python2.7/site-packages/salt/modules/s3.py /usr/lib/python2.7/site-packages/salt/modules/s3.pyc /usr/lib/python2.7/site-packages/salt/modules/s3.pyo /usr/lib/python2.7/site-packages/salt/modules/saltcloudmod.py /usr/lib/python2.7/site-packages/salt/modules/saltcloudmod.pyc /usr/lib/python2.7/site-packages/salt/modules/saltcloudmod.pyo /usr/lib/python2.7/site-packages/salt/modules/saltutil.py /usr/lib/python2.7/site-packages/salt/modules/saltutil.pyc /usr/lib/python2.7/site-packages/salt/modules/saltutil.pyo /usr/lib/python2.7/site-packages/salt/modules/schedule.py /usr/lib/python2.7/site-packages/salt/modules/schedule.pyc /usr/lib/python2.7/site-packages/salt/modules/schedule.pyo /usr/lib/python2.7/site-packages/salt/modules/scsi.py /usr/lib/python2.7/site-packages/salt/modules/scsi.pyc /usr/lib/python2.7/site-packages/salt/modules/scsi.pyo /usr/lib/python2.7/site-packages/salt/modules/sdb.py /usr/lib/python2.7/site-packages/salt/modules/sdb.pyc /usr/lib/python2.7/site-packages/salt/modules/sdb.pyo /usr/lib/python2.7/site-packages/salt/modules/seed.py /usr/lib/python2.7/site-packages/salt/modules/seed.pyc /usr/lib/python2.7/site-packages/salt/modules/seed.pyo /usr/lib/python2.7/site-packages/salt/modules/selinux.py /usr/lib/python2.7/site-packages/salt/modules/selinux.pyc /usr/lib/python2.7/site-packages/salt/modules/selinux.pyo /usr/lib/python2.7/site-packages/salt/modules/sensors.py /usr/lib/python2.7/site-packages/salt/modules/sensors.pyc /usr/lib/python2.7/site-packages/salt/modules/sensors.pyo /usr/lib/python2.7/site-packages/salt/modules/serverdensity_device.py /usr/lib/python2.7/site-packages/salt/modules/serverdensity_device.pyc /usr/lib/python2.7/site-packages/salt/modules/serverdensity_device.pyo /usr/lib/python2.7/site-packages/salt/modules/service.py /usr/lib/python2.7/site-packages/salt/modules/service.pyc /usr/lib/python2.7/site-packages/salt/modules/service.pyo /usr/lib/python2.7/site-packages/salt/modules/shadow.py /usr/lib/python2.7/site-packages/salt/modules/shadow.pyc /usr/lib/python2.7/site-packages/salt/modules/shadow.pyo /usr/lib/python2.7/site-packages/salt/modules/slack_notify.py /usr/lib/python2.7/site-packages/salt/modules/slack_notify.pyc /usr/lib/python2.7/site-packages/salt/modules/slack_notify.pyo /usr/lib/python2.7/site-packages/salt/modules/slsutil.py /usr/lib/python2.7/site-packages/salt/modules/slsutil.pyc /usr/lib/python2.7/site-packages/salt/modules/slsutil.pyo /usr/lib/python2.7/site-packages/salt/modules/smartos_imgadm.py /usr/lib/python2.7/site-packages/salt/modules/smartos_imgadm.pyc /usr/lib/python2.7/site-packages/salt/modules/smartos_imgadm.pyo /usr/lib/python2.7/site-packages/salt/modules/smartos_virt.py /usr/lib/python2.7/site-packages/salt/modules/smartos_virt.pyc /usr/lib/python2.7/site-packages/salt/modules/smartos_virt.pyo /usr/lib/python2.7/site-packages/salt/modules/smartos_vmadm.py /usr/lib/python2.7/site-packages/salt/modules/smartos_vmadm.pyc /usr/lib/python2.7/site-packages/salt/modules/smartos_vmadm.pyo /usr/lib/python2.7/site-packages/salt/modules/smbios.py /usr/lib/python2.7/site-packages/salt/modules/smbios.pyc /usr/lib/python2.7/site-packages/salt/modules/smbios.pyo /usr/lib/python2.7/site-packages/salt/modules/smf.py /usr/lib/python2.7/site-packages/salt/modules/smf.pyc /usr/lib/python2.7/site-packages/salt/modules/smf.pyo /usr/lib/python2.7/site-packages/salt/modules/smtp.py /usr/lib/python2.7/site-packages/salt/modules/smtp.pyc /usr/lib/python2.7/site-packages/salt/modules/smtp.pyo /usr/lib/python2.7/site-packages/salt/modules/softwareupdate.py /usr/lib/python2.7/site-packages/salt/modules/softwareupdate.pyc /usr/lib/python2.7/site-packages/salt/modules/softwareupdate.pyo /usr/lib/python2.7/site-packages/salt/modules/solaris_group.py /usr/lib/python2.7/site-packages/salt/modules/solaris_group.pyc /usr/lib/python2.7/site-packages/salt/modules/solaris_group.pyo /usr/lib/python2.7/site-packages/salt/modules/solaris_shadow.py /usr/lib/python2.7/site-packages/salt/modules/solaris_shadow.pyc /usr/lib/python2.7/site-packages/salt/modules/solaris_shadow.pyo /usr/lib/python2.7/site-packages/salt/modules/solaris_user.py /usr/lib/python2.7/site-packages/salt/modules/solaris_user.pyc /usr/lib/python2.7/site-packages/salt/modules/solaris_user.pyo /usr/lib/python2.7/site-packages/salt/modules/solarisips.py /usr/lib/python2.7/site-packages/salt/modules/solarisips.pyc /usr/lib/python2.7/site-packages/salt/modules/solarisips.pyo /usr/lib/python2.7/site-packages/salt/modules/solarispkg.py /usr/lib/python2.7/site-packages/salt/modules/solarispkg.pyc /usr/lib/python2.7/site-packages/salt/modules/solarispkg.pyo /usr/lib/python2.7/site-packages/salt/modules/solr.py /usr/lib/python2.7/site-packages/salt/modules/solr.pyc /usr/lib/python2.7/site-packages/salt/modules/solr.pyo /usr/lib/python2.7/site-packages/salt/modules/splay.py /usr/lib/python2.7/site-packages/salt/modules/splay.pyc /usr/lib/python2.7/site-packages/salt/modules/splay.pyo /usr/lib/python2.7/site-packages/salt/modules/splunk_search.py /usr/lib/python2.7/site-packages/salt/modules/splunk_search.pyc /usr/lib/python2.7/site-packages/salt/modules/splunk_search.pyo /usr/lib/python2.7/site-packages/salt/modules/sqlite3.py /usr/lib/python2.7/site-packages/salt/modules/sqlite3.pyc /usr/lib/python2.7/site-packages/salt/modules/sqlite3.pyo /usr/lib/python2.7/site-packages/salt/modules/ssh.py /usr/lib/python2.7/site-packages/salt/modules/ssh.pyc /usr/lib/python2.7/site-packages/salt/modules/ssh.pyo /usr/lib/python2.7/site-packages/salt/modules/ssh_package.py /usr/lib/python2.7/site-packages/salt/modules/ssh_package.pyc /usr/lib/python2.7/site-packages/salt/modules/ssh_package.pyo /usr/lib/python2.7/site-packages/salt/modules/ssh_service.py /usr/lib/python2.7/site-packages/salt/modules/ssh_service.pyc /usr/lib/python2.7/site-packages/salt/modules/ssh_service.pyo /usr/lib/python2.7/site-packages/salt/modules/state.py /usr/lib/python2.7/site-packages/salt/modules/state.pyc /usr/lib/python2.7/site-packages/salt/modules/state.pyo /usr/lib/python2.7/site-packages/salt/modules/status.py /usr/lib/python2.7/site-packages/salt/modules/status.pyc /usr/lib/python2.7/site-packages/salt/modules/status.pyo /usr/lib/python2.7/site-packages/salt/modules/stormpath.py /usr/lib/python2.7/site-packages/salt/modules/stormpath.pyc /usr/lib/python2.7/site-packages/salt/modules/stormpath.pyo /usr/lib/python2.7/site-packages/salt/modules/sudo.py /usr/lib/python2.7/site-packages/salt/modules/sudo.pyc /usr/lib/python2.7/site-packages/salt/modules/sudo.pyo /usr/lib/python2.7/site-packages/salt/modules/supervisord.py /usr/lib/python2.7/site-packages/salt/modules/supervisord.pyc /usr/lib/python2.7/site-packages/salt/modules/supervisord.pyo /usr/lib/python2.7/site-packages/salt/modules/svn.py /usr/lib/python2.7/site-packages/salt/modules/svn.pyc /usr/lib/python2.7/site-packages/salt/modules/svn.pyo /usr/lib/python2.7/site-packages/salt/modules/swift.py /usr/lib/python2.7/site-packages/salt/modules/swift.pyc /usr/lib/python2.7/site-packages/salt/modules/swift.pyo /usr/lib/python2.7/site-packages/salt/modules/sysbench.py /usr/lib/python2.7/site-packages/salt/modules/sysbench.pyc /usr/lib/python2.7/site-packages/salt/modules/sysbench.pyo /usr/lib/python2.7/site-packages/salt/modules/syslog_ng.py /usr/lib/python2.7/site-packages/salt/modules/syslog_ng.pyc /usr/lib/python2.7/site-packages/salt/modules/syslog_ng.pyo /usr/lib/python2.7/site-packages/salt/modules/sysmod.py /usr/lib/python2.7/site-packages/salt/modules/sysmod.pyc /usr/lib/python2.7/site-packages/salt/modules/sysmod.pyo /usr/lib/python2.7/site-packages/salt/modules/sysrc.py /usr/lib/python2.7/site-packages/salt/modules/sysrc.pyc /usr/lib/python2.7/site-packages/salt/modules/sysrc.pyo /usr/lib/python2.7/site-packages/salt/modules/system.py /usr/lib/python2.7/site-packages/salt/modules/system.pyc /usr/lib/python2.7/site-packages/salt/modules/system.pyo /usr/lib/python2.7/site-packages/salt/modules/system_profiler.py /usr/lib/python2.7/site-packages/salt/modules/system_profiler.pyc /usr/lib/python2.7/site-packages/salt/modules/system_profiler.pyo /usr/lib/python2.7/site-packages/salt/modules/systemd.py /usr/lib/python2.7/site-packages/salt/modules/systemd.pyc /usr/lib/python2.7/site-packages/salt/modules/systemd.pyo /usr/lib/python2.7/site-packages/salt/modules/temp.py /usr/lib/python2.7/site-packages/salt/modules/temp.pyc /usr/lib/python2.7/site-packages/salt/modules/temp.pyo /usr/lib/python2.7/site-packages/salt/modules/test.py /usr/lib/python2.7/site-packages/salt/modules/test.pyc /usr/lib/python2.7/site-packages/salt/modules/test.pyo /usr/lib/python2.7/site-packages/salt/modules/test_virtual.py /usr/lib/python2.7/site-packages/salt/modules/test_virtual.pyc /usr/lib/python2.7/site-packages/salt/modules/test_virtual.pyo /usr/lib/python2.7/site-packages/salt/modules/timezone.py /usr/lib/python2.7/site-packages/salt/modules/timezone.pyc /usr/lib/python2.7/site-packages/salt/modules/timezone.pyo /usr/lib/python2.7/site-packages/salt/modules/tls.py /usr/lib/python2.7/site-packages/salt/modules/tls.pyc /usr/lib/python2.7/site-packages/salt/modules/tls.pyo /usr/lib/python2.7/site-packages/salt/modules/tomcat.py /usr/lib/python2.7/site-packages/salt/modules/tomcat.pyc /usr/lib/python2.7/site-packages/salt/modules/tomcat.pyo /usr/lib/python2.7/site-packages/salt/modules/trafficserver.py /usr/lib/python2.7/site-packages/salt/modules/trafficserver.pyc /usr/lib/python2.7/site-packages/salt/modules/trafficserver.pyo /usr/lib/python2.7/site-packages/salt/modules/tuned.py /usr/lib/python2.7/site-packages/salt/modules/tuned.pyc /usr/lib/python2.7/site-packages/salt/modules/tuned.pyo /usr/lib/python2.7/site-packages/salt/modules/twilio_notify.py /usr/lib/python2.7/site-packages/salt/modules/twilio_notify.pyc /usr/lib/python2.7/site-packages/salt/modules/twilio_notify.pyo /usr/lib/python2.7/site-packages/salt/modules/udev.py /usr/lib/python2.7/site-packages/salt/modules/udev.pyc /usr/lib/python2.7/site-packages/salt/modules/udev.pyo /usr/lib/python2.7/site-packages/salt/modules/upstart.py /usr/lib/python2.7/site-packages/salt/modules/upstart.pyc /usr/lib/python2.7/site-packages/salt/modules/upstart.pyo /usr/lib/python2.7/site-packages/salt/modules/uptime.py /usr/lib/python2.7/site-packages/salt/modules/uptime.pyc /usr/lib/python2.7/site-packages/salt/modules/uptime.pyo /usr/lib/python2.7/site-packages/salt/modules/useradd.py /usr/lib/python2.7/site-packages/salt/modules/useradd.pyc /usr/lib/python2.7/site-packages/salt/modules/useradd.pyo /usr/lib/python2.7/site-packages/salt/modules/uwsgi.py /usr/lib/python2.7/site-packages/salt/modules/uwsgi.pyc /usr/lib/python2.7/site-packages/salt/modules/uwsgi.pyo /usr/lib/python2.7/site-packages/salt/modules/varnish.py /usr/lib/python2.7/site-packages/salt/modules/varnish.pyc /usr/lib/python2.7/site-packages/salt/modules/varnish.pyo /usr/lib/python2.7/site-packages/salt/modules/vbox_guest.py /usr/lib/python2.7/site-packages/salt/modules/vbox_guest.pyc /usr/lib/python2.7/site-packages/salt/modules/vbox_guest.pyo /usr/lib/python2.7/site-packages/salt/modules/victorops.py /usr/lib/python2.7/site-packages/salt/modules/victorops.pyc /usr/lib/python2.7/site-packages/salt/modules/victorops.pyo /usr/lib/python2.7/site-packages/salt/modules/virt.py /usr/lib/python2.7/site-packages/salt/modules/virt.pyc /usr/lib/python2.7/site-packages/salt/modules/virt.pyo /usr/lib/python2.7/site-packages/salt/modules/virtualenv_mod.py /usr/lib/python2.7/site-packages/salt/modules/virtualenv_mod.pyc /usr/lib/python2.7/site-packages/salt/modules/virtualenv_mod.pyo /usr/lib/python2.7/site-packages/salt/modules/vsphere.py /usr/lib/python2.7/site-packages/salt/modules/vsphere.pyc /usr/lib/python2.7/site-packages/salt/modules/vsphere.pyo /usr/lib/python2.7/site-packages/salt/modules/win_autoruns.py /usr/lib/python2.7/site-packages/salt/modules/win_autoruns.pyc /usr/lib/python2.7/site-packages/salt/modules/win_autoruns.pyo /usr/lib/python2.7/site-packages/salt/modules/win_dacl.py /usr/lib/python2.7/site-packages/salt/modules/win_dacl.pyc /usr/lib/python2.7/site-packages/salt/modules/win_dacl.pyo /usr/lib/python2.7/site-packages/salt/modules/win_disk.py /usr/lib/python2.7/site-packages/salt/modules/win_disk.pyc /usr/lib/python2.7/site-packages/salt/modules/win_disk.pyo /usr/lib/python2.7/site-packages/salt/modules/win_dns_client.py /usr/lib/python2.7/site-packages/salt/modules/win_dns_client.pyc /usr/lib/python2.7/site-packages/salt/modules/win_dns_client.pyo /usr/lib/python2.7/site-packages/salt/modules/win_file.py /usr/lib/python2.7/site-packages/salt/modules/win_file.pyc /usr/lib/python2.7/site-packages/salt/modules/win_file.pyo /usr/lib/python2.7/site-packages/salt/modules/win_firewall.py /usr/lib/python2.7/site-packages/salt/modules/win_firewall.pyc /usr/lib/python2.7/site-packages/salt/modules/win_firewall.pyo /usr/lib/python2.7/site-packages/salt/modules/win_groupadd.py /usr/lib/python2.7/site-packages/salt/modules/win_groupadd.pyc /usr/lib/python2.7/site-packages/salt/modules/win_groupadd.pyo /usr/lib/python2.7/site-packages/salt/modules/win_ip.py /usr/lib/python2.7/site-packages/salt/modules/win_ip.pyc /usr/lib/python2.7/site-packages/salt/modules/win_ip.pyo /usr/lib/python2.7/site-packages/salt/modules/win_network.py /usr/lib/python2.7/site-packages/salt/modules/win_network.pyc /usr/lib/python2.7/site-packages/salt/modules/win_network.pyo /usr/lib/python2.7/site-packages/salt/modules/win_ntp.py /usr/lib/python2.7/site-packages/salt/modules/win_ntp.pyc /usr/lib/python2.7/site-packages/salt/modules/win_ntp.pyo /usr/lib/python2.7/site-packages/salt/modules/win_path.py /usr/lib/python2.7/site-packages/salt/modules/win_path.pyc /usr/lib/python2.7/site-packages/salt/modules/win_path.pyo /usr/lib/python2.7/site-packages/salt/modules/win_pkg.py /usr/lib/python2.7/site-packages/salt/modules/win_pkg.pyc /usr/lib/python2.7/site-packages/salt/modules/win_pkg.pyo /usr/lib/python2.7/site-packages/salt/modules/win_powercfg.py /usr/lib/python2.7/site-packages/salt/modules/win_powercfg.pyc /usr/lib/python2.7/site-packages/salt/modules/win_powercfg.pyo /usr/lib/python2.7/site-packages/salt/modules/win_repo.py /usr/lib/python2.7/site-packages/salt/modules/win_repo.pyc /usr/lib/python2.7/site-packages/salt/modules/win_repo.pyo /usr/lib/python2.7/site-packages/salt/modules/win_servermanager.py /usr/lib/python2.7/site-packages/salt/modules/win_servermanager.pyc /usr/lib/python2.7/site-packages/salt/modules/win_servermanager.pyo /usr/lib/python2.7/site-packages/salt/modules/win_service.py /usr/lib/python2.7/site-packages/salt/modules/win_service.pyc /usr/lib/python2.7/site-packages/salt/modules/win_service.pyo /usr/lib/python2.7/site-packages/salt/modules/win_shadow.py /usr/lib/python2.7/site-packages/salt/modules/win_shadow.pyc /usr/lib/python2.7/site-packages/salt/modules/win_shadow.pyo /usr/lib/python2.7/site-packages/salt/modules/win_status.py /usr/lib/python2.7/site-packages/salt/modules/win_status.pyc /usr/lib/python2.7/site-packages/salt/modules/win_status.pyo /usr/lib/python2.7/site-packages/salt/modules/win_system.py /usr/lib/python2.7/site-packages/salt/modules/win_system.pyc /usr/lib/python2.7/site-packages/salt/modules/win_system.pyo /usr/lib/python2.7/site-packages/salt/modules/win_task.py /usr/lib/python2.7/site-packages/salt/modules/win_task.pyc /usr/lib/python2.7/site-packages/salt/modules/win_task.pyo /usr/lib/python2.7/site-packages/salt/modules/win_timezone.py /usr/lib/python2.7/site-packages/salt/modules/win_timezone.pyc /usr/lib/python2.7/site-packages/salt/modules/win_timezone.pyo /usr/lib/python2.7/site-packages/salt/modules/win_update.py /usr/lib/python2.7/site-packages/salt/modules/win_update.pyc /usr/lib/python2.7/site-packages/salt/modules/win_update.pyo /usr/lib/python2.7/site-packages/salt/modules/win_useradd.py /usr/lib/python2.7/site-packages/salt/modules/win_useradd.pyc /usr/lib/python2.7/site-packages/salt/modules/win_useradd.pyo /usr/lib/python2.7/site-packages/salt/modules/win_wua.py /usr/lib/python2.7/site-packages/salt/modules/win_wua.pyc /usr/lib/python2.7/site-packages/salt/modules/win_wua.pyo /usr/lib/python2.7/site-packages/salt/modules/x509.py /usr/lib/python2.7/site-packages/salt/modules/x509.pyc /usr/lib/python2.7/site-packages/salt/modules/x509.pyo /usr/lib/python2.7/site-packages/salt/modules/xapi.py /usr/lib/python2.7/site-packages/salt/modules/xapi.pyc /usr/lib/python2.7/site-packages/salt/modules/xapi.pyo /usr/lib/python2.7/site-packages/salt/modules/xfs.py /usr/lib/python2.7/site-packages/salt/modules/xfs.pyc /usr/lib/python2.7/site-packages/salt/modules/xfs.pyo /usr/lib/python2.7/site-packages/salt/modules/xmpp.py /usr/lib/python2.7/site-packages/salt/modules/xmpp.pyc /usr/lib/python2.7/site-packages/salt/modules/xmpp.pyo /usr/lib/python2.7/site-packages/salt/modules/yumpkg.py /usr/lib/python2.7/site-packages/salt/modules/yumpkg.pyc /usr/lib/python2.7/site-packages/salt/modules/yumpkg.pyo /usr/lib/python2.7/site-packages/salt/modules/zcbuildout.py /usr/lib/python2.7/site-packages/salt/modules/zcbuildout.pyc /usr/lib/python2.7/site-packages/salt/modules/zcbuildout.pyo /usr/lib/python2.7/site-packages/salt/modules/zfs.py /usr/lib/python2.7/site-packages/salt/modules/zfs.pyc /usr/lib/python2.7/site-packages/salt/modules/zfs.pyo /usr/lib/python2.7/site-packages/salt/modules/zk_concurrency.py /usr/lib/python2.7/site-packages/salt/modules/zk_concurrency.pyc /usr/lib/python2.7/site-packages/salt/modules/zk_concurrency.pyo /usr/lib/python2.7/site-packages/salt/modules/znc.py /usr/lib/python2.7/site-packages/salt/modules/znc.pyc /usr/lib/python2.7/site-packages/salt/modules/znc.pyo /usr/lib/python2.7/site-packages/salt/modules/zpool.py /usr/lib/python2.7/site-packages/salt/modules/zpool.pyc /usr/lib/python2.7/site-packages/salt/modules/zpool.pyo /usr/lib/python2.7/site-packages/salt/modules/zypper.py /usr/lib/python2.7/site-packages/salt/modules/zypper.pyc /usr/lib/python2.7/site-packages/salt/modules/zypper.pyo /usr/lib/python2.7/site-packages/salt/netapi /usr/lib/python2.7/site-packages/salt/netapi/**init**.py /usr/lib/python2.7/site-packages/salt/netapi/**init**.pyc /usr/lib/python2.7/site-packages/salt/netapi/**init**.pyo /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/**init**.py /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/**init**.pyc /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/**init**.pyo /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/app.py /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/app.pyc /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/app.pyo /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/event_processor.py /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/event_processor.pyc /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/event_processor.pyo /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/tools /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/tools/**init**.py /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/tools/**init**.pyc /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/tools/**init**.pyo /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/tools/websockets.py /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/tools/websockets.pyc /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/tools/websockets.pyo /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/wsgi.py /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/wsgi.pyc /usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/wsgi.pyo /usr/lib/python2.7/site-packages/salt/netapi/rest_tornado /usr/lib/python2.7/site-packages/salt/netapi/rest_tornado/**init**.py /usr/lib/python2.7/site-packages/salt/netapi/rest_tornado/**init**.pyc /usr/lib/python2.7/site-packages/salt/netapi/rest_tornado/**init**.pyo /usr/lib/python2.7/site-packages/salt/netapi/rest_tornado/event_processor.py /usr/lib/python2.7/site-packages/salt/netapi/rest_tornado/event_processor.pyc /usr/lib/python2.7/site-packages/salt/netapi/rest_tornado/event_processor.pyo /usr/lib/python2.7/site-packages/salt/netapi/rest_tornado/saltnado.py /usr/lib/python2.7/site-packages/salt/netapi/rest_tornado/saltnado.pyc /usr/lib/python2.7/site-packages/salt/netapi/rest_tornado/saltnado.pyo /usr/lib/python2.7/site-packages/salt/netapi/rest_tornado/saltnado_websockets.py /usr/lib/python2.7/site-packages/salt/netapi/rest_tornado/saltnado_websockets.pyc /usr/lib/python2.7/site-packages/salt/netapi/rest_tornado/saltnado_websockets.pyo /usr/lib/python2.7/site-packages/salt/netapi/rest_wsgi.py /usr/lib/python2.7/site-packages/salt/netapi/rest_wsgi.pyc /usr/lib/python2.7/site-packages/salt/netapi/rest_wsgi.pyo /usr/lib/python2.7/site-packages/salt/output /usr/lib/python2.7/site-packages/salt/output/**init**.py /usr/lib/python2.7/site-packages/salt/output/**init**.pyc /usr/lib/python2.7/site-packages/salt/output/**init**.pyo /usr/lib/python2.7/site-packages/salt/output/compact.py /usr/lib/python2.7/site-packages/salt/output/compact.pyc /usr/lib/python2.7/site-packages/salt/output/compact.pyo /usr/lib/python2.7/site-packages/salt/output/highstate.py /usr/lib/python2.7/site-packages/salt/output/highstate.pyc /usr/lib/python2.7/site-packages/salt/output/highstate.pyo /usr/lib/python2.7/site-packages/salt/output/json_out.py /usr/lib/python2.7/site-packages/salt/output/json_out.pyc /usr/lib/python2.7/site-packages/salt/output/json_out.pyo /usr/lib/python2.7/site-packages/salt/output/key.py /usr/lib/python2.7/site-packages/salt/output/key.pyc /usr/lib/python2.7/site-packages/salt/output/key.pyo /usr/lib/python2.7/site-packages/salt/output/nested.py /usr/lib/python2.7/site-packages/salt/output/nested.pyc /usr/lib/python2.7/site-packages/salt/output/nested.pyo /usr/lib/python2.7/site-packages/salt/output/newline_values_only.py /usr/lib/python2.7/site-packages/salt/output/newline_values_only.pyc /usr/lib/python2.7/site-packages/salt/output/newline_values_only.pyo /usr/lib/python2.7/site-packages/salt/output/no_out.py /usr/lib/python2.7/site-packages/salt/output/no_out.pyc /usr/lib/python2.7/site-packages/salt/output/no_out.pyo /usr/lib/python2.7/site-packages/salt/output/no_return.py /usr/lib/python2.7/site-packages/salt/output/no_return.pyc /usr/lib/python2.7/site-packages/salt/output/no_return.pyo /usr/lib/python2.7/site-packages/salt/output/overstatestage.py /usr/lib/python2.7/site-packages/salt/output/overstatestage.pyc /usr/lib/python2.7/site-packages/salt/output/overstatestage.pyo /usr/lib/python2.7/site-packages/salt/output/pprint_out.py /usr/lib/python2.7/site-packages/salt/output/pprint_out.pyc /usr/lib/python2.7/site-packages/salt/output/pprint_out.pyo /usr/lib/python2.7/site-packages/salt/output/progress.py /usr/lib/python2.7/site-packages/salt/output/progress.pyc /usr/lib/python2.7/site-packages/salt/output/progress.pyo /usr/lib/python2.7/site-packages/salt/output/raw.py /usr/lib/python2.7/site-packages/salt/output/raw.pyc /usr/lib/python2.7/site-packages/salt/output/raw.pyo /usr/lib/python2.7/site-packages/salt/output/txt.py /usr/lib/python2.7/site-packages/salt/output/txt.pyc /usr/lib/python2.7/site-packages/salt/output/txt.pyo /usr/lib/python2.7/site-packages/salt/output/virt_query.py /usr/lib/python2.7/site-packages/salt/output/virt_query.pyc /usr/lib/python2.7/site-packages/salt/output/virt_query.pyo /usr/lib/python2.7/site-packages/salt/output/yaml_out.py /usr/lib/python2.7/site-packages/salt/output/yaml_out.pyc /usr/lib/python2.7/site-packages/salt/output/yaml_out.pyo /usr/lib/python2.7/site-packages/salt/payload.py /usr/lib/python2.7/site-packages/salt/payload.pyc /usr/lib/python2.7/site-packages/salt/payload.pyo /usr/lib/python2.7/site-packages/salt/pillar /usr/lib/python2.7/site-packages/salt/pillar/**init**.py /usr/lib/python2.7/site-packages/salt/pillar/**init**.pyc /usr/lib/python2.7/site-packages/salt/pillar/**init**.pyo /usr/lib/python2.7/site-packages/salt/pillar/cmd_json.py /usr/lib/python2.7/site-packages/salt/pillar/cmd_json.pyc /usr/lib/python2.7/site-packages/salt/pillar/cmd_json.pyo /usr/lib/python2.7/site-packages/salt/pillar/cmd_yaml.py /usr/lib/python2.7/site-packages/salt/pillar/cmd_yaml.pyc /usr/lib/python2.7/site-packages/salt/pillar/cmd_yaml.pyo /usr/lib/python2.7/site-packages/salt/pillar/cmd_yamlex.py /usr/lib/python2.7/site-packages/salt/pillar/cmd_yamlex.pyc /usr/lib/python2.7/site-packages/salt/pillar/cmd_yamlex.pyo /usr/lib/python2.7/site-packages/salt/pillar/cobbler.py /usr/lib/python2.7/site-packages/salt/pillar/cobbler.pyc /usr/lib/python2.7/site-packages/salt/pillar/cobbler.pyo /usr/lib/python2.7/site-packages/salt/pillar/consul_pillar.py /usr/lib/python2.7/site-packages/salt/pillar/consul_pillar.pyc /usr/lib/python2.7/site-packages/salt/pillar/consul_pillar.pyo /usr/lib/python2.7/site-packages/salt/pillar/django_orm.py /usr/lib/python2.7/site-packages/salt/pillar/django_orm.pyc /usr/lib/python2.7/site-packages/salt/pillar/django_orm.pyo /usr/lib/python2.7/site-packages/salt/pillar/ec2_pillar.py /usr/lib/python2.7/site-packages/salt/pillar/ec2_pillar.pyc /usr/lib/python2.7/site-packages/salt/pillar/ec2_pillar.pyo /usr/lib/python2.7/site-packages/salt/pillar/etcd_pillar.py /usr/lib/python2.7/site-packages/salt/pillar/etcd_pillar.pyc /usr/lib/python2.7/site-packages/salt/pillar/etcd_pillar.pyo /usr/lib/python2.7/site-packages/salt/pillar/file_tree.py /usr/lib/python2.7/site-packages/salt/pillar/file_tree.pyc /usr/lib/python2.7/site-packages/salt/pillar/file_tree.pyo /usr/lib/python2.7/site-packages/salt/pillar/foreman.py /usr/lib/python2.7/site-packages/salt/pillar/foreman.pyc /usr/lib/python2.7/site-packages/salt/pillar/foreman.pyo /usr/lib/python2.7/site-packages/salt/pillar/git_pillar.py /usr/lib/python2.7/site-packages/salt/pillar/git_pillar.pyc /usr/lib/python2.7/site-packages/salt/pillar/git_pillar.pyo /usr/lib/python2.7/site-packages/salt/pillar/hg_pillar.py /usr/lib/python2.7/site-packages/salt/pillar/hg_pillar.pyc /usr/lib/python2.7/site-packages/salt/pillar/hg_pillar.pyo /usr/lib/python2.7/site-packages/salt/pillar/hiera.py /usr/lib/python2.7/site-packages/salt/pillar/hiera.pyc /usr/lib/python2.7/site-packages/salt/pillar/hiera.pyo /usr/lib/python2.7/site-packages/salt/pillar/libvirt.py /usr/lib/python2.7/site-packages/salt/pillar/libvirt.pyc /usr/lib/python2.7/site-packages/salt/pillar/libvirt.pyo /usr/lib/python2.7/site-packages/salt/pillar/mongo.py /usr/lib/python2.7/site-packages/salt/pillar/mongo.pyc /usr/lib/python2.7/site-packages/salt/pillar/mongo.pyo /usr/lib/python2.7/site-packages/salt/pillar/mysql.py /usr/lib/python2.7/site-packages/salt/pillar/mysql.pyc /usr/lib/python2.7/site-packages/salt/pillar/mysql.pyo /usr/lib/python2.7/site-packages/salt/pillar/neutron.py /usr/lib/python2.7/site-packages/salt/pillar/neutron.pyc /usr/lib/python2.7/site-packages/salt/pillar/neutron.pyo /usr/lib/python2.7/site-packages/salt/pillar/pepa.py /usr/lib/python2.7/site-packages/salt/pillar/pepa.pyc /usr/lib/python2.7/site-packages/salt/pillar/pepa.pyo /usr/lib/python2.7/site-packages/salt/pillar/pillar_ldap.py /usr/lib/python2.7/site-packages/salt/pillar/pillar_ldap.pyc /usr/lib/python2.7/site-packages/salt/pillar/pillar_ldap.pyo /usr/lib/python2.7/site-packages/salt/pillar/puppet.py /usr/lib/python2.7/site-packages/salt/pillar/puppet.pyc /usr/lib/python2.7/site-packages/salt/pillar/puppet.pyo /usr/lib/python2.7/site-packages/salt/pillar/reclass_adapter.py /usr/lib/python2.7/site-packages/salt/pillar/reclass_adapter.pyc /usr/lib/python2.7/site-packages/salt/pillar/reclass_adapter.pyo /usr/lib/python2.7/site-packages/salt/pillar/redismod.py /usr/lib/python2.7/site-packages/salt/pillar/redismod.pyc /usr/lib/python2.7/site-packages/salt/pillar/redismod.pyo /usr/lib/python2.7/site-packages/salt/pillar/s3.py /usr/lib/python2.7/site-packages/salt/pillar/s3.pyc /usr/lib/python2.7/site-packages/salt/pillar/s3.pyo /usr/lib/python2.7/site-packages/salt/pillar/sql_base.py /usr/lib/python2.7/site-packages/salt/pillar/sql_base.pyc /usr/lib/python2.7/site-packages/salt/pillar/sql_base.pyo /usr/lib/python2.7/site-packages/salt/pillar/sqlite3.py /usr/lib/python2.7/site-packages/salt/pillar/sqlite3.pyc /usr/lib/python2.7/site-packages/salt/pillar/sqlite3.pyo /usr/lib/python2.7/site-packages/salt/pillar/svn_pillar.py /usr/lib/python2.7/site-packages/salt/pillar/svn_pillar.pyc /usr/lib/python2.7/site-packages/salt/pillar/svn_pillar.pyo /usr/lib/python2.7/site-packages/salt/pillar/varstack_pillar.py /usr/lib/python2.7/site-packages/salt/pillar/varstack_pillar.pyc /usr/lib/python2.7/site-packages/salt/pillar/varstack_pillar.pyo /usr/lib/python2.7/site-packages/salt/pillar/virtkey.py /usr/lib/python2.7/site-packages/salt/pillar/virtkey.pyc /usr/lib/python2.7/site-packages/salt/pillar/virtkey.pyo /usr/lib/python2.7/site-packages/salt/proxy /usr/lib/python2.7/site-packages/salt/proxy/**init**.py /usr/lib/python2.7/site-packages/salt/proxy/**init**.pyc /usr/lib/python2.7/site-packages/salt/proxy/**init**.pyo /usr/lib/python2.7/site-packages/salt/proxy/chronos.py /usr/lib/python2.7/site-packages/salt/proxy/chronos.pyc /usr/lib/python2.7/site-packages/salt/proxy/chronos.pyo /usr/lib/python2.7/site-packages/salt/proxy/esxi.py /usr/lib/python2.7/site-packages/salt/proxy/esxi.pyc /usr/lib/python2.7/site-packages/salt/proxy/esxi.pyo /usr/lib/python2.7/site-packages/salt/proxy/fx2.py /usr/lib/python2.7/site-packages/salt/proxy/fx2.pyc /usr/lib/python2.7/site-packages/salt/proxy/fx2.pyo /usr/lib/python2.7/site-packages/salt/proxy/junos.py /usr/lib/python2.7/site-packages/salt/proxy/junos.pyc /usr/lib/python2.7/site-packages/salt/proxy/junos.pyo /usr/lib/python2.7/site-packages/salt/proxy/marathon.py /usr/lib/python2.7/site-packages/salt/proxy/marathon.pyc /usr/lib/python2.7/site-packages/salt/proxy/marathon.pyo /usr/lib/python2.7/site-packages/salt/proxy/philips_hue.py /usr/lib/python2.7/site-packages/salt/proxy/philips_hue.pyc /usr/lib/python2.7/site-packages/salt/proxy/philips_hue.pyo /usr/lib/python2.7/site-packages/salt/proxy/rest_sample.py /usr/lib/python2.7/site-packages/salt/proxy/rest_sample.pyc /usr/lib/python2.7/site-packages/salt/proxy/rest_sample.pyo /usr/lib/python2.7/site-packages/salt/proxy/ssh_sample.py /usr/lib/python2.7/site-packages/salt/proxy/ssh_sample.pyc /usr/lib/python2.7/site-packages/salt/proxy/ssh_sample.pyo /usr/lib/python2.7/site-packages/salt/queues /usr/lib/python2.7/site-packages/salt/queues/**init**.py /usr/lib/python2.7/site-packages/salt/queues/**init**.pyc /usr/lib/python2.7/site-packages/salt/queues/**init**.pyo /usr/lib/python2.7/site-packages/salt/queues/sqlite_queue.py /usr/lib/python2.7/site-packages/salt/queues/sqlite_queue.pyc /usr/lib/python2.7/site-packages/salt/queues/sqlite_queue.pyo /usr/lib/python2.7/site-packages/salt/renderers /usr/lib/python2.7/site-packages/salt/renderers/**init**.py /usr/lib/python2.7/site-packages/salt/renderers/**init**.pyc /usr/lib/python2.7/site-packages/salt/renderers/**init**.pyo /usr/lib/python2.7/site-packages/salt/renderers/cheetah.py /usr/lib/python2.7/site-packages/salt/renderers/cheetah.pyc /usr/lib/python2.7/site-packages/salt/renderers/cheetah.pyo /usr/lib/python2.7/site-packages/salt/renderers/genshi.py /usr/lib/python2.7/site-packages/salt/renderers/genshi.pyc /usr/lib/python2.7/site-packages/salt/renderers/genshi.pyo /usr/lib/python2.7/site-packages/salt/renderers/gpg.py /usr/lib/python2.7/site-packages/salt/renderers/gpg.pyc /usr/lib/python2.7/site-packages/salt/renderers/gpg.pyo /usr/lib/python2.7/site-packages/salt/renderers/hjson.py /usr/lib/python2.7/site-packages/salt/renderers/hjson.pyc /usr/lib/python2.7/site-packages/salt/renderers/hjson.pyo /usr/lib/python2.7/site-packages/salt/renderers/jinja.py /usr/lib/python2.7/site-packages/salt/renderers/jinja.pyc /usr/lib/python2.7/site-packages/salt/renderers/jinja.pyo /usr/lib/python2.7/site-packages/salt/renderers/json.py /usr/lib/python2.7/site-packages/salt/renderers/json.pyc /usr/lib/python2.7/site-packages/salt/renderers/json.pyo /usr/lib/python2.7/site-packages/salt/renderers/mako.py /usr/lib/python2.7/site-packages/salt/renderers/mako.pyc /usr/lib/python2.7/site-packages/salt/renderers/mako.pyo /usr/lib/python2.7/site-packages/salt/renderers/msgpack.py /usr/lib/python2.7/site-packages/salt/renderers/msgpack.pyc /usr/lib/python2.7/site-packages/salt/renderers/msgpack.pyo /usr/lib/python2.7/site-packages/salt/renderers/py.py /usr/lib/python2.7/site-packages/salt/renderers/py.pyc /usr/lib/python2.7/site-packages/salt/renderers/py.pyo /usr/lib/python2.7/site-packages/salt/renderers/pydsl.py /usr/lib/python2.7/site-packages/salt/renderers/pydsl.pyc /usr/lib/python2.7/site-packages/salt/renderers/pydsl.pyo /usr/lib/python2.7/site-packages/salt/renderers/pyobjects.py /usr/lib/python2.7/site-packages/salt/renderers/pyobjects.pyc /usr/lib/python2.7/site-packages/salt/renderers/pyobjects.pyo /usr/lib/python2.7/site-packages/salt/renderers/stateconf.py /usr/lib/python2.7/site-packages/salt/renderers/stateconf.pyc /usr/lib/python2.7/site-packages/salt/renderers/stateconf.pyo /usr/lib/python2.7/site-packages/salt/renderers/wempy.py /usr/lib/python2.7/site-packages/salt/renderers/wempy.pyc /usr/lib/python2.7/site-packages/salt/renderers/wempy.pyo /usr/lib/python2.7/site-packages/salt/renderers/yaml.py /usr/lib/python2.7/site-packages/salt/renderers/yaml.pyc /usr/lib/python2.7/site-packages/salt/renderers/yaml.pyo /usr/lib/python2.7/site-packages/salt/renderers/yamlex.py /usr/lib/python2.7/site-packages/salt/renderers/yamlex.pyc /usr/lib/python2.7/site-packages/salt/renderers/yamlex.pyo /usr/lib/python2.7/site-packages/salt/returners /usr/lib/python2.7/site-packages/salt/returners/**init**.py /usr/lib/python2.7/site-packages/salt/returners/**init**.pyc /usr/lib/python2.7/site-packages/salt/returners/**init**.pyo /usr/lib/python2.7/site-packages/salt/returners/carbon_return.py /usr/lib/python2.7/site-packages/salt/returners/carbon_return.pyc /usr/lib/python2.7/site-packages/salt/returners/carbon_return.pyo /usr/lib/python2.7/site-packages/salt/returners/cassandra_cql_return.py /usr/lib/python2.7/site-packages/salt/returners/cassandra_cql_return.pyc /usr/lib/python2.7/site-packages/salt/returners/cassandra_cql_return.pyo /usr/lib/python2.7/site-packages/salt/returners/cassandra_return.py /usr/lib/python2.7/site-packages/salt/returners/cassandra_return.pyc /usr/lib/python2.7/site-packages/salt/returners/cassandra_return.pyo /usr/lib/python2.7/site-packages/salt/returners/couchbase_return.py /usr/lib/python2.7/site-packages/salt/returners/couchbase_return.pyc /usr/lib/python2.7/site-packages/salt/returners/couchbase_return.pyo /usr/lib/python2.7/site-packages/salt/returners/couchdb_return.py /usr/lib/python2.7/site-packages/salt/returners/couchdb_return.pyc /usr/lib/python2.7/site-packages/salt/returners/couchdb_return.pyo /usr/lib/python2.7/site-packages/salt/returners/django_return.py /usr/lib/python2.7/site-packages/salt/returners/django_return.pyc /usr/lib/python2.7/site-packages/salt/returners/django_return.pyo /usr/lib/python2.7/site-packages/salt/returners/elasticsearch_return.py /usr/lib/python2.7/site-packages/salt/returners/elasticsearch_return.pyc /usr/lib/python2.7/site-packages/salt/returners/elasticsearch_return.pyo /usr/lib/python2.7/site-packages/salt/returners/etcd_return.py /usr/lib/python2.7/site-packages/salt/returners/etcd_return.pyc /usr/lib/python2.7/site-packages/salt/returners/etcd_return.pyo /usr/lib/python2.7/site-packages/salt/returners/hipchat_return.py /usr/lib/python2.7/site-packages/salt/returners/hipchat_return.pyc /usr/lib/python2.7/site-packages/salt/returners/hipchat_return.pyo /usr/lib/python2.7/site-packages/salt/returners/influxdb_return.py /usr/lib/python2.7/site-packages/salt/returners/influxdb_return.pyc /usr/lib/python2.7/site-packages/salt/returners/influxdb_return.pyo /usr/lib/python2.7/site-packages/salt/returners/kafka_return.py /usr/lib/python2.7/site-packages/salt/returners/kafka_return.pyc /usr/lib/python2.7/site-packages/salt/returners/kafka_return.pyo /usr/lib/python2.7/site-packages/salt/returners/local.py /usr/lib/python2.7/site-packages/salt/returners/local.pyc /usr/lib/python2.7/site-packages/salt/returners/local.pyo /usr/lib/python2.7/site-packages/salt/returners/local_cache.py /usr/lib/python2.7/site-packages/salt/returners/local_cache.pyc /usr/lib/python2.7/site-packages/salt/returners/local_cache.pyo /usr/lib/python2.7/site-packages/salt/returners/memcache_return.py /usr/lib/python2.7/site-packages/salt/returners/memcache_return.pyc /usr/lib/python2.7/site-packages/salt/returners/memcache_return.pyo /usr/lib/python2.7/site-packages/salt/returners/mongo_future_return.py /usr/lib/python2.7/site-packages/salt/returners/mongo_future_return.pyc /usr/lib/python2.7/site-packages/salt/returners/mongo_future_return.pyo /usr/lib/python2.7/site-packages/salt/returners/mongo_return.py /usr/lib/python2.7/site-packages/salt/returners/mongo_return.pyc /usr/lib/python2.7/site-packages/salt/returners/mongo_return.pyo /usr/lib/python2.7/site-packages/salt/returners/multi_returner.py /usr/lib/python2.7/site-packages/salt/returners/multi_returner.pyc /usr/lib/python2.7/site-packages/salt/returners/multi_returner.pyo /usr/lib/python2.7/site-packages/salt/returners/mysql.py /usr/lib/python2.7/site-packages/salt/returners/mysql.pyc /usr/lib/python2.7/site-packages/salt/returners/mysql.pyo /usr/lib/python2.7/site-packages/salt/returners/nagios_return.py /usr/lib/python2.7/site-packages/salt/returners/nagios_return.pyc /usr/lib/python2.7/site-packages/salt/returners/nagios_return.pyo /usr/lib/python2.7/site-packages/salt/returners/odbc.py /usr/lib/python2.7/site-packages/salt/returners/odbc.pyc /usr/lib/python2.7/site-packages/salt/returners/odbc.pyo /usr/lib/python2.7/site-packages/salt/returners/pgjsonb.py /usr/lib/python2.7/site-packages/salt/returners/pgjsonb.pyc /usr/lib/python2.7/site-packages/salt/returners/pgjsonb.pyo /usr/lib/python2.7/site-packages/salt/returners/postgres.py /usr/lib/python2.7/site-packages/salt/returners/postgres.pyc /usr/lib/python2.7/site-packages/salt/returners/postgres.pyo /usr/lib/python2.7/site-packages/salt/returners/postgres_local_cache.py /usr/lib/python2.7/site-packages/salt/returners/postgres_local_cache.pyc /usr/lib/python2.7/site-packages/salt/returners/postgres_local_cache.pyo /usr/lib/python2.7/site-packages/salt/returners/pushover_returner.py /usr/lib/python2.7/site-packages/salt/returners/pushover_returner.pyc /usr/lib/python2.7/site-packages/salt/returners/pushover_returner.pyo /usr/lib/python2.7/site-packages/salt/returners/redis_return.py /usr/lib/python2.7/site-packages/salt/returners/redis_return.pyc /usr/lib/python2.7/site-packages/salt/returners/redis_return.pyo /usr/lib/python2.7/site-packages/salt/returners/sentry_return.py /usr/lib/python2.7/site-packages/salt/returners/sentry_return.pyc /usr/lib/python2.7/site-packages/salt/returners/sentry_return.pyo /usr/lib/python2.7/site-packages/salt/returners/slack_returner.py /usr/lib/python2.7/site-packages/salt/returners/slack_returner.pyc /usr/lib/python2.7/site-packages/salt/returners/slack_returner.pyo /usr/lib/python2.7/site-packages/salt/returners/sms_return.py /usr/lib/python2.7/site-packages/salt/returners/sms_return.pyc /usr/lib/python2.7/site-packages/salt/returners/sms_return.pyo /usr/lib/python2.7/site-packages/salt/returners/smtp_return.py /usr/lib/python2.7/site-packages/salt/returners/smtp_return.pyc /usr/lib/python2.7/site-packages/salt/returners/smtp_return.pyo /usr/lib/python2.7/site-packages/salt/returners/sqlite3_return.py /usr/lib/python2.7/site-packages/salt/returners/sqlite3_return.pyc /usr/lib/python2.7/site-packages/salt/returners/sqlite3_return.pyo /usr/lib/python2.7/site-packages/salt/returners/syslog_return.py /usr/lib/python2.7/site-packages/salt/returners/syslog_return.pyc /usr/lib/python2.7/site-packages/salt/returners/syslog_return.pyo /usr/lib/python2.7/site-packages/salt/returners/xmpp_return.py /usr/lib/python2.7/site-packages/salt/returners/xmpp_return.pyc /usr/lib/python2.7/site-packages/salt/returners/xmpp_return.pyo /usr/lib/python2.7/site-packages/salt/roster /usr/lib/python2.7/site-packages/salt/roster/**init**.py /usr/lib/python2.7/site-packages/salt/roster/**init**.pyc /usr/lib/python2.7/site-packages/salt/roster/**init**.pyo /usr/lib/python2.7/site-packages/salt/roster/ansible.py /usr/lib/python2.7/site-packages/salt/roster/ansible.pyc /usr/lib/python2.7/site-packages/salt/roster/ansible.pyo /usr/lib/python2.7/site-packages/salt/roster/cache.py /usr/lib/python2.7/site-packages/salt/roster/cache.pyc /usr/lib/python2.7/site-packages/salt/roster/cache.pyo /usr/lib/python2.7/site-packages/salt/roster/cloud.py /usr/lib/python2.7/site-packages/salt/roster/cloud.pyc /usr/lib/python2.7/site-packages/salt/roster/cloud.pyo /usr/lib/python2.7/site-packages/salt/roster/clustershell.py /usr/lib/python2.7/site-packages/salt/roster/clustershell.pyc /usr/lib/python2.7/site-packages/salt/roster/clustershell.pyo /usr/lib/python2.7/site-packages/salt/roster/flat.py /usr/lib/python2.7/site-packages/salt/roster/flat.pyc /usr/lib/python2.7/site-packages/salt/roster/flat.pyo /usr/lib/python2.7/site-packages/salt/roster/range.py /usr/lib/python2.7/site-packages/salt/roster/range.pyc /usr/lib/python2.7/site-packages/salt/roster/range.pyo /usr/lib/python2.7/site-packages/salt/roster/scan.py /usr/lib/python2.7/site-packages/salt/roster/scan.pyc /usr/lib/python2.7/site-packages/salt/roster/scan.pyo /usr/lib/python2.7/site-packages/salt/runner.py /usr/lib/python2.7/site-packages/salt/runner.pyc /usr/lib/python2.7/site-packages/salt/runner.pyo /usr/lib/python2.7/site-packages/salt/runners /usr/lib/python2.7/site-packages/salt/runners/**init**.py /usr/lib/python2.7/site-packages/salt/runners/**init**.pyc /usr/lib/python2.7/site-packages/salt/runners/**init**.pyo /usr/lib/python2.7/site-packages/salt/runners/cache.py /usr/lib/python2.7/site-packages/salt/runners/cache.pyc /usr/lib/python2.7/site-packages/salt/runners/cache.pyo /usr/lib/python2.7/site-packages/salt/runners/cloud.py /usr/lib/python2.7/site-packages/salt/runners/cloud.pyc /usr/lib/python2.7/site-packages/salt/runners/cloud.pyo /usr/lib/python2.7/site-packages/salt/runners/doc.py /usr/lib/python2.7/site-packages/salt/runners/doc.pyc /usr/lib/python2.7/site-packages/salt/runners/doc.pyo /usr/lib/python2.7/site-packages/salt/runners/drac.py /usr/lib/python2.7/site-packages/salt/runners/drac.pyc /usr/lib/python2.7/site-packages/salt/runners/drac.pyo /usr/lib/python2.7/site-packages/salt/runners/error.py /usr/lib/python2.7/site-packages/salt/runners/error.pyc /usr/lib/python2.7/site-packages/salt/runners/error.pyo /usr/lib/python2.7/site-packages/salt/runners/f5.py /usr/lib/python2.7/site-packages/salt/runners/f5.pyc /usr/lib/python2.7/site-packages/salt/runners/f5.pyo /usr/lib/python2.7/site-packages/salt/runners/fileserver.py /usr/lib/python2.7/site-packages/salt/runners/fileserver.pyc /usr/lib/python2.7/site-packages/salt/runners/fileserver.pyo /usr/lib/python2.7/site-packages/salt/runners/git_pillar.py /usr/lib/python2.7/site-packages/salt/runners/git_pillar.pyc /usr/lib/python2.7/site-packages/salt/runners/git_pillar.pyo /usr/lib/python2.7/site-packages/salt/runners/http.py /usr/lib/python2.7/site-packages/salt/runners/http.pyc /usr/lib/python2.7/site-packages/salt/runners/http.pyo /usr/lib/python2.7/site-packages/salt/runners/jobs.py /usr/lib/python2.7/site-packages/salt/runners/jobs.pyc /usr/lib/python2.7/site-packages/salt/runners/jobs.pyo /usr/lib/python2.7/site-packages/salt/runners/launchd.py /usr/lib/python2.7/site-packages/salt/runners/launchd.pyc /usr/lib/python2.7/site-packages/salt/runners/launchd.pyo /usr/lib/python2.7/site-packages/salt/runners/lxc.py /usr/lib/python2.7/site-packages/salt/runners/lxc.pyc /usr/lib/python2.7/site-packages/salt/runners/lxc.pyo /usr/lib/python2.7/site-packages/salt/runners/manage.py /usr/lib/python2.7/site-packages/salt/runners/manage.pyc /usr/lib/python2.7/site-packages/salt/runners/manage.pyo /usr/lib/python2.7/site-packages/salt/runners/mine.py /usr/lib/python2.7/site-packages/salt/runners/mine.pyc /usr/lib/python2.7/site-packages/salt/runners/mine.pyo /usr/lib/python2.7/site-packages/salt/runners/nacl.py /usr/lib/python2.7/site-packages/salt/runners/nacl.pyc /usr/lib/python2.7/site-packages/salt/runners/nacl.pyo /usr/lib/python2.7/site-packages/salt/runners/network.py /usr/lib/python2.7/site-packages/salt/runners/network.pyc /usr/lib/python2.7/site-packages/salt/runners/network.pyo /usr/lib/python2.7/site-packages/salt/runners/pagerduty.py /usr/lib/python2.7/site-packages/salt/runners/pagerduty.pyc /usr/lib/python2.7/site-packages/salt/runners/pagerduty.pyo /usr/lib/python2.7/site-packages/salt/runners/pillar.py /usr/lib/python2.7/site-packages/salt/runners/pillar.pyc /usr/lib/python2.7/site-packages/salt/runners/pillar.pyo /usr/lib/python2.7/site-packages/salt/runners/pkg.py /usr/lib/python2.7/site-packages/salt/runners/pkg.pyc /usr/lib/python2.7/site-packages/salt/runners/pkg.pyo /usr/lib/python2.7/site-packages/salt/runners/queue.py /usr/lib/python2.7/site-packages/salt/runners/queue.pyc /usr/lib/python2.7/site-packages/salt/runners/queue.pyo /usr/lib/python2.7/site-packages/salt/runners/sdb.py /usr/lib/python2.7/site-packages/salt/runners/sdb.pyc /usr/lib/python2.7/site-packages/salt/runners/sdb.pyo /usr/lib/python2.7/site-packages/salt/runners/search.py /usr/lib/python2.7/site-packages/salt/runners/search.pyc /usr/lib/python2.7/site-packages/salt/runners/search.pyo /usr/lib/python2.7/site-packages/salt/runners/ssh.py /usr/lib/python2.7/site-packages/salt/runners/ssh.pyc /usr/lib/python2.7/site-packages/salt/runners/ssh.pyo /usr/lib/python2.7/site-packages/salt/runners/state.py /usr/lib/python2.7/site-packages/salt/runners/state.pyc /usr/lib/python2.7/site-packages/salt/runners/state.pyo /usr/lib/python2.7/site-packages/salt/runners/survey.py /usr/lib/python2.7/site-packages/salt/runners/survey.pyc /usr/lib/python2.7/site-packages/salt/runners/survey.pyo /usr/lib/python2.7/site-packages/salt/runners/test.py /usr/lib/python2.7/site-packages/salt/runners/test.pyc /usr/lib/python2.7/site-packages/salt/runners/test.pyo /usr/lib/python2.7/site-packages/salt/runners/thin.py /usr/lib/python2.7/site-packages/salt/runners/thin.pyc /usr/lib/python2.7/site-packages/salt/runners/thin.pyo /usr/lib/python2.7/site-packages/salt/runners/virt.py /usr/lib/python2.7/site-packages/salt/runners/virt.pyc /usr/lib/python2.7/site-packages/salt/runners/virt.pyo /usr/lib/python2.7/site-packages/salt/runners/winrepo.py /usr/lib/python2.7/site-packages/salt/runners/winrepo.pyc /usr/lib/python2.7/site-packages/salt/runners/winrepo.pyo /usr/lib/python2.7/site-packages/salt/scripts.py /usr/lib/python2.7/site-packages/salt/scripts.pyc /usr/lib/python2.7/site-packages/salt/scripts.pyo /usr/lib/python2.7/site-packages/salt/sdb /usr/lib/python2.7/site-packages/salt/sdb/**init**.py /usr/lib/python2.7/site-packages/salt/sdb/**init**.pyc /usr/lib/python2.7/site-packages/salt/sdb/**init**.pyo /usr/lib/python2.7/site-packages/salt/sdb/couchdb.py /usr/lib/python2.7/site-packages/salt/sdb/couchdb.pyc /usr/lib/python2.7/site-packages/salt/sdb/couchdb.pyo /usr/lib/python2.7/site-packages/salt/sdb/etcd_db.py /usr/lib/python2.7/site-packages/salt/sdb/etcd_db.pyc /usr/lib/python2.7/site-packages/salt/sdb/etcd_db.pyo /usr/lib/python2.7/site-packages/salt/sdb/keyring_db.py /usr/lib/python2.7/site-packages/salt/sdb/keyring_db.pyc /usr/lib/python2.7/site-packages/salt/sdb/keyring_db.pyo /usr/lib/python2.7/site-packages/salt/sdb/memcached.py /usr/lib/python2.7/site-packages/salt/sdb/memcached.pyc /usr/lib/python2.7/site-packages/salt/sdb/memcached.pyo /usr/lib/python2.7/site-packages/salt/sdb/rest.py /usr/lib/python2.7/site-packages/salt/sdb/rest.pyc /usr/lib/python2.7/site-packages/salt/sdb/rest.pyo /usr/lib/python2.7/site-packages/salt/sdb/sqlite3.py /usr/lib/python2.7/site-packages/salt/sdb/sqlite3.pyc /usr/lib/python2.7/site-packages/salt/sdb/sqlite3.pyo /usr/lib/python2.7/site-packages/salt/search /usr/lib/python2.7/site-packages/salt/search/**init**.py /usr/lib/python2.7/site-packages/salt/search/**init**.pyc /usr/lib/python2.7/site-packages/salt/search/**init**.pyo /usr/lib/python2.7/site-packages/salt/search/whoosh_search.py /usr/lib/python2.7/site-packages/salt/search/whoosh_search.pyc /usr/lib/python2.7/site-packages/salt/search/whoosh_search.pyo /usr/lib/python2.7/site-packages/salt/serializers /usr/lib/python2.7/site-packages/salt/serializers/**init**.py /usr/lib/python2.7/site-packages/salt/serializers/**init**.pyc /usr/lib/python2.7/site-packages/salt/serializers/**init**.pyo /usr/lib/python2.7/site-packages/salt/serializers/json.py /usr/lib/python2.7/site-packages/salt/serializers/json.pyc /usr/lib/python2.7/site-packages/salt/serializers/json.pyo /usr/lib/python2.7/site-packages/salt/serializers/msgpack.py /usr/lib/python2.7/site-packages/salt/serializers/msgpack.pyc /usr/lib/python2.7/site-packages/salt/serializers/msgpack.pyo /usr/lib/python2.7/site-packages/salt/serializers/yaml.py /usr/lib/python2.7/site-packages/salt/serializers/yaml.pyc /usr/lib/python2.7/site-packages/salt/serializers/yaml.pyo /usr/lib/python2.7/site-packages/salt/serializers/yamlex.py /usr/lib/python2.7/site-packages/salt/serializers/yamlex.pyc /usr/lib/python2.7/site-packages/salt/serializers/yamlex.pyo /usr/lib/python2.7/site-packages/salt/spm /usr/lib/python2.7/site-packages/salt/spm/**init**.py /usr/lib/python2.7/site-packages/salt/spm/**init**.pyc /usr/lib/python2.7/site-packages/salt/spm/**init**.pyo /usr/lib/python2.7/site-packages/salt/spm/pkgdb /usr/lib/python2.7/site-packages/salt/spm/pkgdb/**init**.py /usr/lib/python2.7/site-packages/salt/spm/pkgdb/**init**.pyc /usr/lib/python2.7/site-packages/salt/spm/pkgdb/**init**.pyo /usr/lib/python2.7/site-packages/salt/spm/pkgdb/sqlite3.py /usr/lib/python2.7/site-packages/salt/spm/pkgdb/sqlite3.pyc /usr/lib/python2.7/site-packages/salt/spm/pkgdb/sqlite3.pyo /usr/lib/python2.7/site-packages/salt/spm/pkgfiles /usr/lib/python2.7/site-packages/salt/spm/pkgfiles/**init**.py /usr/lib/python2.7/site-packages/salt/spm/pkgfiles/**init**.pyc /usr/lib/python2.7/site-packages/salt/spm/pkgfiles/**init**.pyo /usr/lib/python2.7/site-packages/salt/spm/pkgfiles/local.py /usr/lib/python2.7/site-packages/salt/spm/pkgfiles/local.pyc /usr/lib/python2.7/site-packages/salt/spm/pkgfiles/local.pyo /usr/lib/python2.7/site-packages/salt/state.py /usr/lib/python2.7/site-packages/salt/state.pyc /usr/lib/python2.7/site-packages/salt/state.pyo /usr/lib/python2.7/site-packages/salt/states /usr/lib/python2.7/site-packages/salt/states/**init**.py /usr/lib/python2.7/site-packages/salt/states/**init**.pyc /usr/lib/python2.7/site-packages/salt/states/**init**.pyo /usr/lib/python2.7/site-packages/salt/states/alias.py /usr/lib/python2.7/site-packages/salt/states/alias.pyc /usr/lib/python2.7/site-packages/salt/states/alias.pyo /usr/lib/python2.7/site-packages/salt/states/alternatives.py /usr/lib/python2.7/site-packages/salt/states/alternatives.pyc /usr/lib/python2.7/site-packages/salt/states/alternatives.pyo /usr/lib/python2.7/site-packages/salt/states/apache.py /usr/lib/python2.7/site-packages/salt/states/apache.pyc /usr/lib/python2.7/site-packages/salt/states/apache.pyo /usr/lib/python2.7/site-packages/salt/states/apache_module.py /usr/lib/python2.7/site-packages/salt/states/apache_module.pyc /usr/lib/python2.7/site-packages/salt/states/apache_module.pyo /usr/lib/python2.7/site-packages/salt/states/aptpkg.py /usr/lib/python2.7/site-packages/salt/states/aptpkg.pyc /usr/lib/python2.7/site-packages/salt/states/aptpkg.pyo /usr/lib/python2.7/site-packages/salt/states/archive.py /usr/lib/python2.7/site-packages/salt/states/archive.pyc /usr/lib/python2.7/site-packages/salt/states/archive.pyo /usr/lib/python2.7/site-packages/salt/states/artifactory.py /usr/lib/python2.7/site-packages/salt/states/artifactory.pyc /usr/lib/python2.7/site-packages/salt/states/artifactory.pyo /usr/lib/python2.7/site-packages/salt/states/at.py /usr/lib/python2.7/site-packages/salt/states/at.pyc /usr/lib/python2.7/site-packages/salt/states/at.pyo /usr/lib/python2.7/site-packages/salt/states/augeas.py /usr/lib/python2.7/site-packages/salt/states/augeas.pyc /usr/lib/python2.7/site-packages/salt/states/augeas.pyo /usr/lib/python2.7/site-packages/salt/states/aws_sqs.py /usr/lib/python2.7/site-packages/salt/states/aws_sqs.pyc /usr/lib/python2.7/site-packages/salt/states/aws_sqs.pyo /usr/lib/python2.7/site-packages/salt/states/beacon.py /usr/lib/python2.7/site-packages/salt/states/beacon.pyc /usr/lib/python2.7/site-packages/salt/states/beacon.pyo /usr/lib/python2.7/site-packages/salt/states/bigip.py /usr/lib/python2.7/site-packages/salt/states/bigip.pyc /usr/lib/python2.7/site-packages/salt/states/bigip.pyo /usr/lib/python2.7/site-packages/salt/states/blockdev.py /usr/lib/python2.7/site-packages/salt/states/blockdev.pyc /usr/lib/python2.7/site-packages/salt/states/blockdev.pyo /usr/lib/python2.7/site-packages/salt/states/boto_asg.py /usr/lib/python2.7/site-packages/salt/states/boto_asg.pyc /usr/lib/python2.7/site-packages/salt/states/boto_asg.pyo /usr/lib/python2.7/site-packages/salt/states/boto_cfn.py /usr/lib/python2.7/site-packages/salt/states/boto_cfn.pyc /usr/lib/python2.7/site-packages/salt/states/boto_cfn.pyo /usr/lib/python2.7/site-packages/salt/states/boto_cloudwatch_alarm.py /usr/lib/python2.7/site-packages/salt/states/boto_cloudwatch_alarm.pyc /usr/lib/python2.7/site-packages/salt/states/boto_cloudwatch_alarm.pyo /usr/lib/python2.7/site-packages/salt/states/boto_dynamodb.py /usr/lib/python2.7/site-packages/salt/states/boto_dynamodb.pyc /usr/lib/python2.7/site-packages/salt/states/boto_dynamodb.pyo /usr/lib/python2.7/site-packages/salt/states/boto_ec2.py /usr/lib/python2.7/site-packages/salt/states/boto_ec2.pyc /usr/lib/python2.7/site-packages/salt/states/boto_ec2.pyo /usr/lib/python2.7/site-packages/salt/states/boto_elasticache.py /usr/lib/python2.7/site-packages/salt/states/boto_elasticache.pyc /usr/lib/python2.7/site-packages/salt/states/boto_elasticache.pyo /usr/lib/python2.7/site-packages/salt/states/boto_elb.py /usr/lib/python2.7/site-packages/salt/states/boto_elb.pyc /usr/lib/python2.7/site-packages/salt/states/boto_elb.pyo /usr/lib/python2.7/site-packages/salt/states/boto_iam.py /usr/lib/python2.7/site-packages/salt/states/boto_iam.pyc /usr/lib/python2.7/site-packages/salt/states/boto_iam.pyo /usr/lib/python2.7/site-packages/salt/states/boto_iam_role.py /usr/lib/python2.7/site-packages/salt/states/boto_iam_role.pyc /usr/lib/python2.7/site-packages/salt/states/boto_iam_role.pyo /usr/lib/python2.7/site-packages/salt/states/boto_kms.py /usr/lib/python2.7/site-packages/salt/states/boto_kms.pyc /usr/lib/python2.7/site-packages/salt/states/boto_kms.pyo /usr/lib/python2.7/site-packages/salt/states/boto_lc.py /usr/lib/python2.7/site-packages/salt/states/boto_lc.pyc /usr/lib/python2.7/site-packages/salt/states/boto_lc.pyo /usr/lib/python2.7/site-packages/salt/states/boto_rds.py /usr/lib/python2.7/site-packages/salt/states/boto_rds.pyc /usr/lib/python2.7/site-packages/salt/states/boto_rds.pyo /usr/lib/python2.7/site-packages/salt/states/boto_route53.py /usr/lib/python2.7/site-packages/salt/states/boto_route53.pyc /usr/lib/python2.7/site-packages/salt/states/boto_route53.pyo /usr/lib/python2.7/site-packages/salt/states/boto_secgroup.py /usr/lib/python2.7/site-packages/salt/states/boto_secgroup.pyc /usr/lib/python2.7/site-packages/salt/states/boto_secgroup.pyo /usr/lib/python2.7/site-packages/salt/states/boto_sns.py /usr/lib/python2.7/site-packages/salt/states/boto_sns.pyc /usr/lib/python2.7/site-packages/salt/states/boto_sns.pyo /usr/lib/python2.7/site-packages/salt/states/boto_sqs.py /usr/lib/python2.7/site-packages/salt/states/boto_sqs.pyc /usr/lib/python2.7/site-packages/salt/states/boto_sqs.pyo /usr/lib/python2.7/site-packages/salt/states/boto_vpc.py /usr/lib/python2.7/site-packages/salt/states/boto_vpc.pyc /usr/lib/python2.7/site-packages/salt/states/boto_vpc.pyo /usr/lib/python2.7/site-packages/salt/states/bower.py /usr/lib/python2.7/site-packages/salt/states/bower.pyc /usr/lib/python2.7/site-packages/salt/states/bower.pyo /usr/lib/python2.7/site-packages/salt/states/cabal.py /usr/lib/python2.7/site-packages/salt/states/cabal.pyc /usr/lib/python2.7/site-packages/salt/states/cabal.pyo /usr/lib/python2.7/site-packages/salt/states/chef.py /usr/lib/python2.7/site-packages/salt/states/chef.pyc /usr/lib/python2.7/site-packages/salt/states/chef.pyo /usr/lib/python2.7/site-packages/salt/states/chronos_job.py /usr/lib/python2.7/site-packages/salt/states/chronos_job.pyc /usr/lib/python2.7/site-packages/salt/states/chronos_job.pyo /usr/lib/python2.7/site-packages/salt/states/cloud.py /usr/lib/python2.7/site-packages/salt/states/cloud.pyc /usr/lib/python2.7/site-packages/salt/states/cloud.pyo /usr/lib/python2.7/site-packages/salt/states/cmd.py /usr/lib/python2.7/site-packages/salt/states/cmd.pyc /usr/lib/python2.7/site-packages/salt/states/cmd.pyo /usr/lib/python2.7/site-packages/salt/states/composer.py /usr/lib/python2.7/site-packages/salt/states/composer.pyc /usr/lib/python2.7/site-packages/salt/states/composer.pyo /usr/lib/python2.7/site-packages/salt/states/cron.py /usr/lib/python2.7/site-packages/salt/states/cron.pyc /usr/lib/python2.7/site-packages/salt/states/cron.pyo /usr/lib/python2.7/site-packages/salt/states/cyg.py /usr/lib/python2.7/site-packages/salt/states/cyg.pyc /usr/lib/python2.7/site-packages/salt/states/cyg.pyo /usr/lib/python2.7/site-packages/salt/states/ddns.py /usr/lib/python2.7/site-packages/salt/states/ddns.pyc /usr/lib/python2.7/site-packages/salt/states/ddns.pyo /usr/lib/python2.7/site-packages/salt/states/debconfmod.py /usr/lib/python2.7/site-packages/salt/states/debconfmod.pyc /usr/lib/python2.7/site-packages/salt/states/debconfmod.pyo /usr/lib/python2.7/site-packages/salt/states/dellchassis.py /usr/lib/python2.7/site-packages/salt/states/dellchassis.pyc /usr/lib/python2.7/site-packages/salt/states/dellchassis.pyo /usr/lib/python2.7/site-packages/salt/states/disk.py /usr/lib/python2.7/site-packages/salt/states/disk.pyc /usr/lib/python2.7/site-packages/salt/states/disk.pyo /usr/lib/python2.7/site-packages/salt/states/dockerio.py /usr/lib/python2.7/site-packages/salt/states/dockerio.pyc /usr/lib/python2.7/site-packages/salt/states/dockerio.pyo /usr/lib/python2.7/site-packages/salt/states/dockerng.py /usr/lib/python2.7/site-packages/salt/states/dockerng.pyc /usr/lib/python2.7/site-packages/salt/states/dockerng.pyo /usr/lib/python2.7/site-packages/salt/states/drac.py /usr/lib/python2.7/site-packages/salt/states/drac.pyc /usr/lib/python2.7/site-packages/salt/states/drac.pyo /usr/lib/python2.7/site-packages/salt/states/elasticsearch_index.py /usr/lib/python2.7/site-packages/salt/states/elasticsearch_index.pyc /usr/lib/python2.7/site-packages/salt/states/elasticsearch_index.pyo /usr/lib/python2.7/site-packages/salt/states/elasticsearch_index_template.py /usr/lib/python2.7/site-packages/salt/states/elasticsearch_index_template.pyc /usr/lib/python2.7/site-packages/salt/states/elasticsearch_index_template.pyo /usr/lib/python2.7/site-packages/salt/states/environ.py /usr/lib/python2.7/site-packages/salt/states/environ.pyc /usr/lib/python2.7/site-packages/salt/states/environ.pyo /usr/lib/python2.7/site-packages/salt/states/eselect.py /usr/lib/python2.7/site-packages/salt/states/eselect.pyc /usr/lib/python2.7/site-packages/salt/states/eselect.pyo /usr/lib/python2.7/site-packages/salt/states/esxi.py /usr/lib/python2.7/site-packages/salt/states/esxi.pyc /usr/lib/python2.7/site-packages/salt/states/esxi.pyo /usr/lib/python2.7/site-packages/salt/states/etcd_mod.py /usr/lib/python2.7/site-packages/salt/states/etcd_mod.pyc /usr/lib/python2.7/site-packages/salt/states/etcd_mod.pyo /usr/lib/python2.7/site-packages/salt/states/event.py /usr/lib/python2.7/site-packages/salt/states/event.pyc /usr/lib/python2.7/site-packages/salt/states/event.pyo /usr/lib/python2.7/site-packages/salt/states/file.py /usr/lib/python2.7/site-packages/salt/states/file.pyc /usr/lib/python2.7/site-packages/salt/states/file.pyo /usr/lib/python2.7/site-packages/salt/states/firewalld.py /usr/lib/python2.7/site-packages/salt/states/firewalld.pyc /usr/lib/python2.7/site-packages/salt/states/firewalld.pyo /usr/lib/python2.7/site-packages/salt/states/gem.py /usr/lib/python2.7/site-packages/salt/states/gem.pyc /usr/lib/python2.7/site-packages/salt/states/gem.pyo /usr/lib/python2.7/site-packages/salt/states/git.py /usr/lib/python2.7/site-packages/salt/states/git.pyc /usr/lib/python2.7/site-packages/salt/states/git.pyo /usr/lib/python2.7/site-packages/salt/states/glance.py /usr/lib/python2.7/site-packages/salt/states/glance.pyc /usr/lib/python2.7/site-packages/salt/states/glance.pyo /usr/lib/python2.7/site-packages/salt/states/glusterfs.py /usr/lib/python2.7/site-packages/salt/states/glusterfs.pyc /usr/lib/python2.7/site-packages/salt/states/glusterfs.pyo /usr/lib/python2.7/site-packages/salt/states/gnomedesktop.py /usr/lib/python2.7/site-packages/salt/states/gnomedesktop.pyc /usr/lib/python2.7/site-packages/salt/states/gnomedesktop.pyo /usr/lib/python2.7/site-packages/salt/states/grafana.py /usr/lib/python2.7/site-packages/salt/states/grafana.pyc /usr/lib/python2.7/site-packages/salt/states/grafana.pyo /usr/lib/python2.7/site-packages/salt/states/grains.py /usr/lib/python2.7/site-packages/salt/states/grains.pyc /usr/lib/python2.7/site-packages/salt/states/grains.pyo /usr/lib/python2.7/site-packages/salt/states/group.py /usr/lib/python2.7/site-packages/salt/states/group.pyc /usr/lib/python2.7/site-packages/salt/states/group.pyo /usr/lib/python2.7/site-packages/salt/states/hg.py /usr/lib/python2.7/site-packages/salt/states/hg.pyc /usr/lib/python2.7/site-packages/salt/states/hg.pyo /usr/lib/python2.7/site-packages/salt/states/hipchat.py /usr/lib/python2.7/site-packages/salt/states/hipchat.pyc /usr/lib/python2.7/site-packages/salt/states/hipchat.pyo /usr/lib/python2.7/site-packages/salt/states/host.py /usr/lib/python2.7/site-packages/salt/states/host.pyc /usr/lib/python2.7/site-packages/salt/states/host.pyo /usr/lib/python2.7/site-packages/salt/states/htpasswd.py /usr/lib/python2.7/site-packages/salt/states/htpasswd.pyc /usr/lib/python2.7/site-packages/salt/states/htpasswd.pyo /usr/lib/python2.7/site-packages/salt/states/http.py /usr/lib/python2.7/site-packages/salt/states/http.pyc /usr/lib/python2.7/site-packages/salt/states/http.pyo /usr/lib/python2.7/site-packages/salt/states/ifttt.py /usr/lib/python2.7/site-packages/salt/states/ifttt.pyc /usr/lib/python2.7/site-packages/salt/states/ifttt.pyo /usr/lib/python2.7/site-packages/salt/states/incron.py /usr/lib/python2.7/site-packages/salt/states/incron.pyc /usr/lib/python2.7/site-packages/salt/states/incron.pyo /usr/lib/python2.7/site-packages/salt/states/influxdb_database.py /usr/lib/python2.7/site-packages/salt/states/influxdb_database.pyc /usr/lib/python2.7/site-packages/salt/states/influxdb_database.pyo /usr/lib/python2.7/site-packages/salt/states/influxdb_user.py /usr/lib/python2.7/site-packages/salt/states/influxdb_user.pyc /usr/lib/python2.7/site-packages/salt/states/influxdb_user.pyo /usr/lib/python2.7/site-packages/salt/states/ini_manage.py /usr/lib/python2.7/site-packages/salt/states/ini_manage.pyc /usr/lib/python2.7/site-packages/salt/states/ini_manage.pyo /usr/lib/python2.7/site-packages/salt/states/ipmi.py /usr/lib/python2.7/site-packages/salt/states/ipmi.pyc /usr/lib/python2.7/site-packages/salt/states/ipmi.pyo /usr/lib/python2.7/site-packages/salt/states/ipset.py /usr/lib/python2.7/site-packages/salt/states/ipset.pyc /usr/lib/python2.7/site-packages/salt/states/ipset.pyo /usr/lib/python2.7/site-packages/salt/states/iptables.py /usr/lib/python2.7/site-packages/salt/states/iptables.pyc /usr/lib/python2.7/site-packages/salt/states/iptables.pyo /usr/lib/python2.7/site-packages/salt/states/jboss7.py /usr/lib/python2.7/site-packages/salt/states/jboss7.pyc /usr/lib/python2.7/site-packages/salt/states/jboss7.pyo /usr/lib/python2.7/site-packages/salt/states/keyboard.py /usr/lib/python2.7/site-packages/salt/states/keyboard.pyc /usr/lib/python2.7/site-packages/salt/states/keyboard.pyo /usr/lib/python2.7/site-packages/salt/states/keystone.py /usr/lib/python2.7/site-packages/salt/states/keystone.pyc /usr/lib/python2.7/site-packages/salt/states/keystone.pyo /usr/lib/python2.7/site-packages/salt/states/kmod.py /usr/lib/python2.7/site-packages/salt/states/kmod.pyc /usr/lib/python2.7/site-packages/salt/states/kmod.pyo /usr/lib/python2.7/site-packages/salt/states/layman.py /usr/lib/python2.7/site-packages/salt/states/layman.pyc /usr/lib/python2.7/site-packages/salt/states/layman.pyo /usr/lib/python2.7/site-packages/salt/states/libvirt.py /usr/lib/python2.7/site-packages/salt/states/libvirt.pyc /usr/lib/python2.7/site-packages/salt/states/libvirt.pyo /usr/lib/python2.7/site-packages/salt/states/linux_acl.py /usr/lib/python2.7/site-packages/salt/states/linux_acl.pyc /usr/lib/python2.7/site-packages/salt/states/linux_acl.pyo /usr/lib/python2.7/site-packages/salt/states/locale.py /usr/lib/python2.7/site-packages/salt/states/locale.pyc /usr/lib/python2.7/site-packages/salt/states/locale.pyo /usr/lib/python2.7/site-packages/salt/states/lvm.py /usr/lib/python2.7/site-packages/salt/states/lvm.pyc /usr/lib/python2.7/site-packages/salt/states/lvm.pyo /usr/lib/python2.7/site-packages/salt/states/lvs_server.py /usr/lib/python2.7/site-packages/salt/states/lvs_server.pyc /usr/lib/python2.7/site-packages/salt/states/lvs_server.pyo /usr/lib/python2.7/site-packages/salt/states/lvs_service.py /usr/lib/python2.7/site-packages/salt/states/lvs_service.pyc /usr/lib/python2.7/site-packages/salt/states/lvs_service.pyo /usr/lib/python2.7/site-packages/salt/states/lxc.py /usr/lib/python2.7/site-packages/salt/states/lxc.pyc /usr/lib/python2.7/site-packages/salt/states/lxc.pyo /usr/lib/python2.7/site-packages/salt/states/makeconf.py /usr/lib/python2.7/site-packages/salt/states/makeconf.pyc /usr/lib/python2.7/site-packages/salt/states/makeconf.pyo /usr/lib/python2.7/site-packages/salt/states/marathon_app.py /usr/lib/python2.7/site-packages/salt/states/marathon_app.pyc /usr/lib/python2.7/site-packages/salt/states/marathon_app.pyo /usr/lib/python2.7/site-packages/salt/states/mdadm.py /usr/lib/python2.7/site-packages/salt/states/mdadm.pyc /usr/lib/python2.7/site-packages/salt/states/mdadm.pyo /usr/lib/python2.7/site-packages/salt/states/memcached.py /usr/lib/python2.7/site-packages/salt/states/memcached.pyc /usr/lib/python2.7/site-packages/salt/states/memcached.pyo /usr/lib/python2.7/site-packages/salt/states/modjk.py /usr/lib/python2.7/site-packages/salt/states/modjk.pyc /usr/lib/python2.7/site-packages/salt/states/modjk.pyo /usr/lib/python2.7/site-packages/salt/states/modjk_worker.py /usr/lib/python2.7/site-packages/salt/states/modjk_worker.pyc /usr/lib/python2.7/site-packages/salt/states/modjk_worker.pyo /usr/lib/python2.7/site-packages/salt/states/module.py /usr/lib/python2.7/site-packages/salt/states/module.pyc /usr/lib/python2.7/site-packages/salt/states/module.pyo /usr/lib/python2.7/site-packages/salt/states/mongodb_database.py /usr/lib/python2.7/site-packages/salt/states/mongodb_database.pyc /usr/lib/python2.7/site-packages/salt/states/mongodb_database.pyo /usr/lib/python2.7/site-packages/salt/states/mongodb_user.py /usr/lib/python2.7/site-packages/salt/states/mongodb_user.pyc /usr/lib/python2.7/site-packages/salt/states/mongodb_user.pyo /usr/lib/python2.7/site-packages/salt/states/monit.py /usr/lib/python2.7/site-packages/salt/states/monit.pyc /usr/lib/python2.7/site-packages/salt/states/monit.pyo /usr/lib/python2.7/site-packages/salt/states/mount.py /usr/lib/python2.7/site-packages/salt/states/mount.pyc /usr/lib/python2.7/site-packages/salt/states/mount.pyo /usr/lib/python2.7/site-packages/salt/states/mysql_database.py /usr/lib/python2.7/site-packages/salt/states/mysql_database.pyc /usr/lib/python2.7/site-packages/salt/states/mysql_database.pyo /usr/lib/python2.7/site-packages/salt/states/mysql_grants.py /usr/lib/python2.7/site-packages/salt/states/mysql_grants.pyc /usr/lib/python2.7/site-packages/salt/states/mysql_grants.pyo /usr/lib/python2.7/site-packages/salt/states/mysql_query.py /usr/lib/python2.7/site-packages/salt/states/mysql_query.pyc /usr/lib/python2.7/site-packages/salt/states/mysql_query.pyo /usr/lib/python2.7/site-packages/salt/states/mysql_user.py /usr/lib/python2.7/site-packages/salt/states/mysql_user.pyc /usr/lib/python2.7/site-packages/salt/states/mysql_user.pyo /usr/lib/python2.7/site-packages/salt/states/network.py /usr/lib/python2.7/site-packages/salt/states/network.pyc /usr/lib/python2.7/site-packages/salt/states/network.pyo /usr/lib/python2.7/site-packages/salt/states/nftables.py /usr/lib/python2.7/site-packages/salt/states/nftables.pyc /usr/lib/python2.7/site-packages/salt/states/nftables.pyo /usr/lib/python2.7/site-packages/salt/states/npm.py /usr/lib/python2.7/site-packages/salt/states/npm.pyc /usr/lib/python2.7/site-packages/salt/states/npm.pyo /usr/lib/python2.7/site-packages/salt/states/ntp.py /usr/lib/python2.7/site-packages/salt/states/ntp.pyc /usr/lib/python2.7/site-packages/salt/states/ntp.pyo /usr/lib/python2.7/site-packages/salt/states/openstack_config.py /usr/lib/python2.7/site-packages/salt/states/openstack_config.pyc /usr/lib/python2.7/site-packages/salt/states/openstack_config.pyo /usr/lib/python2.7/site-packages/salt/states/pagerduty.py /usr/lib/python2.7/site-packages/salt/states/pagerduty.pyc /usr/lib/python2.7/site-packages/salt/states/pagerduty.pyo /usr/lib/python2.7/site-packages/salt/states/pagerduty_escalation_policy.py /usr/lib/python2.7/site-packages/salt/states/pagerduty_escalation_policy.pyc /usr/lib/python2.7/site-packages/salt/states/pagerduty_escalation_policy.pyo /usr/lib/python2.7/site-packages/salt/states/pagerduty_schedule.py /usr/lib/python2.7/site-packages/salt/states/pagerduty_schedule.pyc /usr/lib/python2.7/site-packages/salt/states/pagerduty_schedule.pyo /usr/lib/python2.7/site-packages/salt/states/pagerduty_service.py /usr/lib/python2.7/site-packages/salt/states/pagerduty_service.pyc /usr/lib/python2.7/site-packages/salt/states/pagerduty_service.pyo /usr/lib/python2.7/site-packages/salt/states/pagerduty_user.py /usr/lib/python2.7/site-packages/salt/states/pagerduty_user.pyc /usr/lib/python2.7/site-packages/salt/states/pagerduty_user.pyo /usr/lib/python2.7/site-packages/salt/states/pecl.py /usr/lib/python2.7/site-packages/salt/states/pecl.pyc /usr/lib/python2.7/site-packages/salt/states/pecl.pyo /usr/lib/python2.7/site-packages/salt/states/pip_state.py /usr/lib/python2.7/site-packages/salt/states/pip_state.pyc /usr/lib/python2.7/site-packages/salt/states/pip_state.pyo /usr/lib/python2.7/site-packages/salt/states/pkg.py /usr/lib/python2.7/site-packages/salt/states/pkg.pyc /usr/lib/python2.7/site-packages/salt/states/pkg.pyo /usr/lib/python2.7/site-packages/salt/states/pkgbuild.py /usr/lib/python2.7/site-packages/salt/states/pkgbuild.pyc /usr/lib/python2.7/site-packages/salt/states/pkgbuild.pyo /usr/lib/python2.7/site-packages/salt/states/pkgng.py /usr/lib/python2.7/site-packages/salt/states/pkgng.pyc /usr/lib/python2.7/site-packages/salt/states/pkgng.pyo /usr/lib/python2.7/site-packages/salt/states/pkgrepo.py /usr/lib/python2.7/site-packages/salt/states/pkgrepo.pyc /usr/lib/python2.7/site-packages/salt/states/pkgrepo.pyo /usr/lib/python2.7/site-packages/salt/states/portage_config.py /usr/lib/python2.7/site-packages/salt/states/portage_config.pyc /usr/lib/python2.7/site-packages/salt/states/portage_config.pyo /usr/lib/python2.7/site-packages/salt/states/ports.py /usr/lib/python2.7/site-packages/salt/states/ports.pyc /usr/lib/python2.7/site-packages/salt/states/ports.pyo /usr/lib/python2.7/site-packages/salt/states/postgres_database.py /usr/lib/python2.7/site-packages/salt/states/postgres_database.pyc /usr/lib/python2.7/site-packages/salt/states/postgres_database.pyo /usr/lib/python2.7/site-packages/salt/states/postgres_extension.py /usr/lib/python2.7/site-packages/salt/states/postgres_extension.pyc /usr/lib/python2.7/site-packages/salt/states/postgres_extension.pyo /usr/lib/python2.7/site-packages/salt/states/postgres_group.py /usr/lib/python2.7/site-packages/salt/states/postgres_group.pyc /usr/lib/python2.7/site-packages/salt/states/postgres_group.pyo /usr/lib/python2.7/site-packages/salt/states/postgres_schema.py /usr/lib/python2.7/site-packages/salt/states/postgres_schema.pyc /usr/lib/python2.7/site-packages/salt/states/postgres_schema.pyo /usr/lib/python2.7/site-packages/salt/states/postgres_tablespace.py /usr/lib/python2.7/site-packages/salt/states/postgres_tablespace.pyc /usr/lib/python2.7/site-packages/salt/states/postgres_tablespace.pyo /usr/lib/python2.7/site-packages/salt/states/postgres_user.py /usr/lib/python2.7/site-packages/salt/states/postgres_user.pyc /usr/lib/python2.7/site-packages/salt/states/postgres_user.pyo /usr/lib/python2.7/site-packages/salt/states/powerpath.py /usr/lib/python2.7/site-packages/salt/states/powerpath.pyc /usr/lib/python2.7/site-packages/salt/states/powerpath.pyo /usr/lib/python2.7/site-packages/salt/states/process.py /usr/lib/python2.7/site-packages/salt/states/process.pyc /usr/lib/python2.7/site-packages/salt/states/process.pyo /usr/lib/python2.7/site-packages/salt/states/pushover.py /usr/lib/python2.7/site-packages/salt/states/pushover.pyc /usr/lib/python2.7/site-packages/salt/states/pushover.pyo /usr/lib/python2.7/site-packages/salt/states/pyenv.py /usr/lib/python2.7/site-packages/salt/states/pyenv.pyc /usr/lib/python2.7/site-packages/salt/states/pyenv.pyo /usr/lib/python2.7/site-packages/salt/states/pyrax_queues.py /usr/lib/python2.7/site-packages/salt/states/pyrax_queues.pyc /usr/lib/python2.7/site-packages/salt/states/pyrax_queues.pyo /usr/lib/python2.7/site-packages/salt/states/quota.py /usr/lib/python2.7/site-packages/salt/states/quota.pyc /usr/lib/python2.7/site-packages/salt/states/quota.pyo /usr/lib/python2.7/site-packages/salt/states/rabbitmq_cluster.py /usr/lib/python2.7/site-packages/salt/states/rabbitmq_cluster.pyc /usr/lib/python2.7/site-packages/salt/states/rabbitmq_cluster.pyo /usr/lib/python2.7/site-packages/salt/states/rabbitmq_plugin.py /usr/lib/python2.7/site-packages/salt/states/rabbitmq_plugin.pyc /usr/lib/python2.7/site-packages/salt/states/rabbitmq_plugin.pyo /usr/lib/python2.7/site-packages/salt/states/rabbitmq_policy.py /usr/lib/python2.7/site-packages/salt/states/rabbitmq_policy.pyc /usr/lib/python2.7/site-packages/salt/states/rabbitmq_policy.pyo /usr/lib/python2.7/site-packages/salt/states/rabbitmq_user.py /usr/lib/python2.7/site-packages/salt/states/rabbitmq_user.pyc /usr/lib/python2.7/site-packages/salt/states/rabbitmq_user.pyo /usr/lib/python2.7/site-packages/salt/states/rabbitmq_vhost.py /usr/lib/python2.7/site-packages/salt/states/rabbitmq_vhost.pyc /usr/lib/python2.7/site-packages/salt/states/rabbitmq_vhost.pyo /usr/lib/python2.7/site-packages/salt/states/rbenv.py /usr/lib/python2.7/site-packages/salt/states/rbenv.pyc /usr/lib/python2.7/site-packages/salt/states/rbenv.pyo /usr/lib/python2.7/site-packages/salt/states/rdp.py /usr/lib/python2.7/site-packages/salt/states/rdp.pyc /usr/lib/python2.7/site-packages/salt/states/rdp.pyo /usr/lib/python2.7/site-packages/salt/states/redismod.py /usr/lib/python2.7/site-packages/salt/states/redismod.pyc /usr/lib/python2.7/site-packages/salt/states/redismod.pyo /usr/lib/python2.7/site-packages/salt/states/reg.py /usr/lib/python2.7/site-packages/salt/states/reg.pyc /usr/lib/python2.7/site-packages/salt/states/reg.pyo /usr/lib/python2.7/site-packages/salt/states/rvm.py /usr/lib/python2.7/site-packages/salt/states/rvm.pyc /usr/lib/python2.7/site-packages/salt/states/rvm.pyo /usr/lib/python2.7/site-packages/salt/states/saltmod.py /usr/lib/python2.7/site-packages/salt/states/saltmod.pyc /usr/lib/python2.7/site-packages/salt/states/saltmod.pyo /usr/lib/python2.7/site-packages/salt/states/schedule.py /usr/lib/python2.7/site-packages/salt/states/schedule.pyc /usr/lib/python2.7/site-packages/salt/states/schedule.pyo /usr/lib/python2.7/site-packages/salt/states/selinux.py /usr/lib/python2.7/site-packages/salt/states/selinux.pyc /usr/lib/python2.7/site-packages/salt/states/selinux.pyo /usr/lib/python2.7/site-packages/salt/states/serverdensity_device.py /usr/lib/python2.7/site-packages/salt/states/serverdensity_device.pyc /usr/lib/python2.7/site-packages/salt/states/serverdensity_device.pyo /usr/lib/python2.7/site-packages/salt/states/service.py /usr/lib/python2.7/site-packages/salt/states/service.pyc /usr/lib/python2.7/site-packages/salt/states/service.pyo /usr/lib/python2.7/site-packages/salt/states/slack.py /usr/lib/python2.7/site-packages/salt/states/slack.pyc /usr/lib/python2.7/site-packages/salt/states/slack.pyo /usr/lib/python2.7/site-packages/salt/states/smtp.py /usr/lib/python2.7/site-packages/salt/states/smtp.pyc /usr/lib/python2.7/site-packages/salt/states/smtp.pyo /usr/lib/python2.7/site-packages/salt/states/splunk_search.py /usr/lib/python2.7/site-packages/salt/states/splunk_search.pyc /usr/lib/python2.7/site-packages/salt/states/splunk_search.pyo /usr/lib/python2.7/site-packages/salt/states/ssh_auth.py /usr/lib/python2.7/site-packages/salt/states/ssh_auth.pyc /usr/lib/python2.7/site-packages/salt/states/ssh_auth.pyo /usr/lib/python2.7/site-packages/salt/states/ssh_known_hosts.py /usr/lib/python2.7/site-packages/salt/states/ssh_known_hosts.pyc /usr/lib/python2.7/site-packages/salt/states/ssh_known_hosts.pyo /usr/lib/python2.7/site-packages/salt/states/stateconf.py /usr/lib/python2.7/site-packages/salt/states/stateconf.pyc /usr/lib/python2.7/site-packages/salt/states/stateconf.pyo /usr/lib/python2.7/site-packages/salt/states/status.py /usr/lib/python2.7/site-packages/salt/states/status.pyc /usr/lib/python2.7/site-packages/salt/states/status.pyo /usr/lib/python2.7/site-packages/salt/states/stormpath_account.py /usr/lib/python2.7/site-packages/salt/states/stormpath_account.pyc /usr/lib/python2.7/site-packages/salt/states/stormpath_account.pyo /usr/lib/python2.7/site-packages/salt/states/supervisord.py /usr/lib/python2.7/site-packages/salt/states/supervisord.pyc /usr/lib/python2.7/site-packages/salt/states/supervisord.pyo /usr/lib/python2.7/site-packages/salt/states/svn.py /usr/lib/python2.7/site-packages/salt/states/svn.pyc /usr/lib/python2.7/site-packages/salt/states/svn.pyo /usr/lib/python2.7/site-packages/salt/states/sysctl.py /usr/lib/python2.7/site-packages/salt/states/sysctl.pyc /usr/lib/python2.7/site-packages/salt/states/sysctl.pyo /usr/lib/python2.7/site-packages/salt/states/syslog_ng.py /usr/lib/python2.7/site-packages/salt/states/syslog_ng.pyc /usr/lib/python2.7/site-packages/salt/states/syslog_ng.pyo /usr/lib/python2.7/site-packages/salt/states/sysrc.py /usr/lib/python2.7/site-packages/salt/states/sysrc.pyc /usr/lib/python2.7/site-packages/salt/states/sysrc.pyo /usr/lib/python2.7/site-packages/salt/states/test.py /usr/lib/python2.7/site-packages/salt/states/test.pyc /usr/lib/python2.7/site-packages/salt/states/test.pyo /usr/lib/python2.7/site-packages/salt/states/timezone.py /usr/lib/python2.7/site-packages/salt/states/timezone.pyc /usr/lib/python2.7/site-packages/salt/states/timezone.pyo /usr/lib/python2.7/site-packages/salt/states/tls.py /usr/lib/python2.7/site-packages/salt/states/tls.pyc /usr/lib/python2.7/site-packages/salt/states/tls.pyo /usr/lib/python2.7/site-packages/salt/states/tomcat.py /usr/lib/python2.7/site-packages/salt/states/tomcat.pyc /usr/lib/python2.7/site-packages/salt/states/tomcat.pyo /usr/lib/python2.7/site-packages/salt/states/trafficserver.py /usr/lib/python2.7/site-packages/salt/states/trafficserver.pyc /usr/lib/python2.7/site-packages/salt/states/trafficserver.pyo /usr/lib/python2.7/site-packages/salt/states/tuned.py /usr/lib/python2.7/site-packages/salt/states/tuned.pyc /usr/lib/python2.7/site-packages/salt/states/tuned.pyo /usr/lib/python2.7/site-packages/salt/states/uptime.py /usr/lib/python2.7/site-packages/salt/states/uptime.pyc /usr/lib/python2.7/site-packages/salt/states/uptime.pyo /usr/lib/python2.7/site-packages/salt/states/user.py /usr/lib/python2.7/site-packages/salt/states/user.pyc /usr/lib/python2.7/site-packages/salt/states/user.pyo /usr/lib/python2.7/site-packages/salt/states/vbox_guest.py /usr/lib/python2.7/site-packages/salt/states/vbox_guest.pyc /usr/lib/python2.7/site-packages/salt/states/vbox_guest.pyo /usr/lib/python2.7/site-packages/salt/states/victorops.py /usr/lib/python2.7/site-packages/salt/states/victorops.pyc /usr/lib/python2.7/site-packages/salt/states/victorops.pyo /usr/lib/python2.7/site-packages/salt/states/virtualenv_mod.py /usr/lib/python2.7/site-packages/salt/states/virtualenv_mod.pyc /usr/lib/python2.7/site-packages/salt/states/virtualenv_mod.pyo /usr/lib/python2.7/site-packages/salt/states/win_dacl.py /usr/lib/python2.7/site-packages/salt/states/win_dacl.pyc /usr/lib/python2.7/site-packages/salt/states/win_dacl.pyo /usr/lib/python2.7/site-packages/salt/states/win_dns_client.py /usr/lib/python2.7/site-packages/salt/states/win_dns_client.pyc /usr/lib/python2.7/site-packages/salt/states/win_dns_client.pyo /usr/lib/python2.7/site-packages/salt/states/win_firewall.py /usr/lib/python2.7/site-packages/salt/states/win_firewall.pyc /usr/lib/python2.7/site-packages/salt/states/win_firewall.pyo /usr/lib/python2.7/site-packages/salt/states/win_network.py /usr/lib/python2.7/site-packages/salt/states/win_network.pyc /usr/lib/python2.7/site-packages/salt/states/win_network.pyo /usr/lib/python2.7/site-packages/salt/states/win_path.py /usr/lib/python2.7/site-packages/salt/states/win_path.pyc /usr/lib/python2.7/site-packages/salt/states/win_path.pyo /usr/lib/python2.7/site-packages/salt/states/win_powercfg.py /usr/lib/python2.7/site-packages/salt/states/win_powercfg.pyc /usr/lib/python2.7/site-packages/salt/states/win_powercfg.pyo /usr/lib/python2.7/site-packages/salt/states/win_servermanager.py /usr/lib/python2.7/site-packages/salt/states/win_servermanager.pyc /usr/lib/python2.7/site-packages/salt/states/win_servermanager.pyo /usr/lib/python2.7/site-packages/salt/states/win_system.py /usr/lib/python2.7/site-packages/salt/states/win_system.pyc /usr/lib/python2.7/site-packages/salt/states/win_system.pyo /usr/lib/python2.7/site-packages/salt/states/win_update.py /usr/lib/python2.7/site-packages/salt/states/win_update.pyc /usr/lib/python2.7/site-packages/salt/states/win_update.pyo /usr/lib/python2.7/site-packages/salt/states/winrepo.py /usr/lib/python2.7/site-packages/salt/states/winrepo.pyc /usr/lib/python2.7/site-packages/salt/states/winrepo.pyo /usr/lib/python2.7/site-packages/salt/states/x509.py /usr/lib/python2.7/site-packages/salt/states/x509.pyc /usr/lib/python2.7/site-packages/salt/states/x509.pyo /usr/lib/python2.7/site-packages/salt/states/xmpp.py /usr/lib/python2.7/site-packages/salt/states/xmpp.pyc /usr/lib/python2.7/site-packages/salt/states/xmpp.pyo /usr/lib/python2.7/site-packages/salt/states/zcbuildout.py /usr/lib/python2.7/site-packages/salt/states/zcbuildout.pyc /usr/lib/python2.7/site-packages/salt/states/zcbuildout.pyo /usr/lib/python2.7/site-packages/salt/states/zk_concurrency.py /usr/lib/python2.7/site-packages/salt/states/zk_concurrency.pyc /usr/lib/python2.7/site-packages/salt/states/zk_concurrency.pyo /usr/lib/python2.7/site-packages/salt/syspaths.py /usr/lib/python2.7/site-packages/salt/syspaths.pyc /usr/lib/python2.7/site-packages/salt/syspaths.pyo /usr/lib/python2.7/site-packages/salt/template.py /usr/lib/python2.7/site-packages/salt/template.pyc /usr/lib/python2.7/site-packages/salt/template.pyo /usr/lib/python2.7/site-packages/salt/templates /usr/lib/python2.7/site-packages/salt/templates/**init**.py /usr/lib/python2.7/site-packages/salt/templates/**init**.pyc /usr/lib/python2.7/site-packages/salt/templates/**init**.pyo /usr/lib/python2.7/site-packages/salt/templates/debian_ip /usr/lib/python2.7/site-packages/salt/templates/debian_ip/conf.jinja /usr/lib/python2.7/site-packages/salt/templates/debian_ip/debian_eth.jinja /usr/lib/python2.7/site-packages/salt/templates/debian_ip/debian_ppp_eth.jinja /usr/lib/python2.7/site-packages/salt/templates/debian_ip/debian_source.jinja /usr/lib/python2.7/site-packages/salt/templates/debian_ip/display-network.jinja /usr/lib/python2.7/site-packages/salt/templates/debian_ip/network.jinja /usr/lib/python2.7/site-packages/salt/templates/debian_ip/route_eth.jinja /usr/lib/python2.7/site-packages/salt/templates/git /usr/lib/python2.7/site-packages/salt/templates/git/ssh-id-wrapper /usr/lib/python2.7/site-packages/salt/templates/git/ssh-id-wrapper.bat /usr/lib/python2.7/site-packages/salt/templates/lxc /usr/lib/python2.7/site-packages/salt/templates/lxc/salt_tarball /usr/lib/python2.7/site-packages/salt/templates/rh_ip /usr/lib/python2.7/site-packages/salt/templates/rh_ip/conf.jinja /usr/lib/python2.7/site-packages/salt/templates/rh_ip/network.jinja /usr/lib/python2.7/site-packages/salt/templates/rh_ip/rh5_eth.jinja /usr/lib/python2.7/site-packages/salt/templates/rh_ip/rh6_eth.jinja /usr/lib/python2.7/site-packages/salt/templates/rh_ip/rh6_route_eth.jinja /usr/lib/python2.7/site-packages/salt/templates/rh_ip/rh7_eth.jinja /usr/lib/python2.7/site-packages/salt/templates/rh_ip/route_eth.jinja /usr/lib/python2.7/site-packages/salt/templates/virt /usr/lib/python2.7/site-packages/salt/templates/virt/libvirt_domain.jinja /usr/lib/python2.7/site-packages/salt/templates/virt/libvirt_volume.jinja /usr/lib/python2.7/site-packages/salt/textformat.py /usr/lib/python2.7/site-packages/salt/textformat.pyc /usr/lib/python2.7/site-packages/salt/textformat.pyo /usr/lib/python2.7/site-packages/salt/tops /usr/lib/python2.7/site-packages/salt/tops/**init**.py /usr/lib/python2.7/site-packages/salt/tops/**init**.pyc /usr/lib/python2.7/site-packages/salt/tops/**init**.pyo /usr/lib/python2.7/site-packages/salt/tops/cobbler.py /usr/lib/python2.7/site-packages/salt/tops/cobbler.pyc /usr/lib/python2.7/site-packages/salt/tops/cobbler.pyo /usr/lib/python2.7/site-packages/salt/tops/ext_nodes.py /usr/lib/python2.7/site-packages/salt/tops/ext_nodes.pyc /usr/lib/python2.7/site-packages/salt/tops/ext_nodes.pyo /usr/lib/python2.7/site-packages/salt/tops/mongo.py /usr/lib/python2.7/site-packages/salt/tops/mongo.pyc /usr/lib/python2.7/site-packages/salt/tops/mongo.pyo /usr/lib/python2.7/site-packages/salt/tops/reclass_adapter.py /usr/lib/python2.7/site-packages/salt/tops/reclass_adapter.pyc /usr/lib/python2.7/site-packages/salt/tops/reclass_adapter.pyo /usr/lib/python2.7/site-packages/salt/transport /usr/lib/python2.7/site-packages/salt/transport/**init**.py /usr/lib/python2.7/site-packages/salt/transport/**init**.pyc /usr/lib/python2.7/site-packages/salt/transport/**init**.pyo /usr/lib/python2.7/site-packages/salt/transport/client.py /usr/lib/python2.7/site-packages/salt/transport/client.pyc /usr/lib/python2.7/site-packages/salt/transport/client.pyo /usr/lib/python2.7/site-packages/salt/transport/frame.py /usr/lib/python2.7/site-packages/salt/transport/frame.pyc /usr/lib/python2.7/site-packages/salt/transport/frame.pyo /usr/lib/python2.7/site-packages/salt/transport/ipc.py /usr/lib/python2.7/site-packages/salt/transport/ipc.pyc /usr/lib/python2.7/site-packages/salt/transport/ipc.pyo /usr/lib/python2.7/site-packages/salt/transport/local.py /usr/lib/python2.7/site-packages/salt/transport/local.pyc /usr/lib/python2.7/site-packages/salt/transport/local.pyo /usr/lib/python2.7/site-packages/salt/transport/mixins /usr/lib/python2.7/site-packages/salt/transport/mixins/**init**.py /usr/lib/python2.7/site-packages/salt/transport/mixins/**init**.pyc /usr/lib/python2.7/site-packages/salt/transport/mixins/**init**.pyo /usr/lib/python2.7/site-packages/salt/transport/mixins/auth.py /usr/lib/python2.7/site-packages/salt/transport/mixins/auth.pyc /usr/lib/python2.7/site-packages/salt/transport/mixins/auth.pyo /usr/lib/python2.7/site-packages/salt/transport/raet.py /usr/lib/python2.7/site-packages/salt/transport/raet.pyc /usr/lib/python2.7/site-packages/salt/transport/raet.pyo /usr/lib/python2.7/site-packages/salt/transport/server.py /usr/lib/python2.7/site-packages/salt/transport/server.pyc /usr/lib/python2.7/site-packages/salt/transport/server.pyo /usr/lib/python2.7/site-packages/salt/transport/tcp.py /usr/lib/python2.7/site-packages/salt/transport/tcp.pyc /usr/lib/python2.7/site-packages/salt/transport/tcp.pyo /usr/lib/python2.7/site-packages/salt/transport/zeromq.py /usr/lib/python2.7/site-packages/salt/transport/zeromq.pyc /usr/lib/python2.7/site-packages/salt/transport/zeromq.pyo /usr/lib/python2.7/site-packages/salt/utils /usr/lib/python2.7/site-packages/salt/utils/**init**.py /usr/lib/python2.7/site-packages/salt/utils/**init**.pyc /usr/lib/python2.7/site-packages/salt/utils/**init**.pyo /usr/lib/python2.7/site-packages/salt/utils/aggregation.py /usr/lib/python2.7/site-packages/salt/utils/aggregation.pyc /usr/lib/python2.7/site-packages/salt/utils/aggregation.pyo /usr/lib/python2.7/site-packages/salt/utils/args.py /usr/lib/python2.7/site-packages/salt/utils/args.pyc /usr/lib/python2.7/site-packages/salt/utils/args.pyo /usr/lib/python2.7/site-packages/salt/utils/async.py /usr/lib/python2.7/site-packages/salt/utils/async.pyc /usr/lib/python2.7/site-packages/salt/utils/async.pyo /usr/lib/python2.7/site-packages/salt/utils/atomicfile.py /usr/lib/python2.7/site-packages/salt/utils/atomicfile.pyc /usr/lib/python2.7/site-packages/salt/utils/atomicfile.pyo /usr/lib/python2.7/site-packages/salt/utils/aws.py /usr/lib/python2.7/site-packages/salt/utils/aws.pyc /usr/lib/python2.7/site-packages/salt/utils/aws.pyo /usr/lib/python2.7/site-packages/salt/utils/boto.py /usr/lib/python2.7/site-packages/salt/utils/boto.pyc /usr/lib/python2.7/site-packages/salt/utils/boto.pyo /usr/lib/python2.7/site-packages/salt/utils/cache.py /usr/lib/python2.7/site-packages/salt/utils/cache.pyc /usr/lib/python2.7/site-packages/salt/utils/cache.pyo /usr/lib/python2.7/site-packages/salt/utils/cloud.py /usr/lib/python2.7/site-packages/salt/utils/cloud.pyc /usr/lib/python2.7/site-packages/salt/utils/cloud.pyo /usr/lib/python2.7/site-packages/salt/utils/compat.py /usr/lib/python2.7/site-packages/salt/utils/compat.pyc /usr/lib/python2.7/site-packages/salt/utils/compat.pyo /usr/lib/python2.7/site-packages/salt/utils/configcomparer.py /usr/lib/python2.7/site-packages/salt/utils/configcomparer.pyc /usr/lib/python2.7/site-packages/salt/utils/configcomparer.pyo /usr/lib/python2.7/site-packages/salt/utils/context.py /usr/lib/python2.7/site-packages/salt/utils/context.pyc /usr/lib/python2.7/site-packages/salt/utils/context.pyo /usr/lib/python2.7/site-packages/salt/utils/debug.py /usr/lib/python2.7/site-packages/salt/utils/debug.pyc /usr/lib/python2.7/site-packages/salt/utils/debug.pyo /usr/lib/python2.7/site-packages/salt/utils/decorators /usr/lib/python2.7/site-packages/salt/utils/decorators/**init**.py /usr/lib/python2.7/site-packages/salt/utils/decorators/**init**.pyc /usr/lib/python2.7/site-packages/salt/utils/decorators/**init**.pyo /usr/lib/python2.7/site-packages/salt/utils/dictdiffer.py /usr/lib/python2.7/site-packages/salt/utils/dictdiffer.pyc /usr/lib/python2.7/site-packages/salt/utils/dictdiffer.pyo /usr/lib/python2.7/site-packages/salt/utils/dicttrim.py /usr/lib/python2.7/site-packages/salt/utils/dicttrim.pyc /usr/lib/python2.7/site-packages/salt/utils/dicttrim.pyo /usr/lib/python2.7/site-packages/salt/utils/dictupdate.py /usr/lib/python2.7/site-packages/salt/utils/dictupdate.pyc /usr/lib/python2.7/site-packages/salt/utils/dictupdate.pyo /usr/lib/python2.7/site-packages/salt/utils/doc.py /usr/lib/python2.7/site-packages/salt/utils/doc.pyc /usr/lib/python2.7/site-packages/salt/utils/doc.pyo /usr/lib/python2.7/site-packages/salt/utils/error.py /usr/lib/python2.7/site-packages/salt/utils/error.pyc /usr/lib/python2.7/site-packages/salt/utils/error.pyo /usr/lib/python2.7/site-packages/salt/utils/etcd_util.py /usr/lib/python2.7/site-packages/salt/utils/etcd_util.pyc /usr/lib/python2.7/site-packages/salt/utils/etcd_util.pyo /usr/lib/python2.7/site-packages/salt/utils/event.py /usr/lib/python2.7/site-packages/salt/utils/event.pyc /usr/lib/python2.7/site-packages/salt/utils/event.pyo /usr/lib/python2.7/site-packages/salt/utils/filebuffer.py /usr/lib/python2.7/site-packages/salt/utils/filebuffer.pyc /usr/lib/python2.7/site-packages/salt/utils/filebuffer.pyo /usr/lib/python2.7/site-packages/salt/utils/files.py /usr/lib/python2.7/site-packages/salt/utils/files.pyc /usr/lib/python2.7/site-packages/salt/utils/files.pyo /usr/lib/python2.7/site-packages/salt/utils/find.py /usr/lib/python2.7/site-packages/salt/utils/find.pyc /usr/lib/python2.7/site-packages/salt/utils/find.pyo /usr/lib/python2.7/site-packages/salt/utils/fsutils.py /usr/lib/python2.7/site-packages/salt/utils/fsutils.pyc /usr/lib/python2.7/site-packages/salt/utils/fsutils.pyo /usr/lib/python2.7/site-packages/salt/utils/gitfs.py /usr/lib/python2.7/site-packages/salt/utils/gitfs.pyc /usr/lib/python2.7/site-packages/salt/utils/gitfs.pyo /usr/lib/python2.7/site-packages/salt/utils/github.py /usr/lib/python2.7/site-packages/salt/utils/github.pyc /usr/lib/python2.7/site-packages/salt/utils/github.pyo /usr/lib/python2.7/site-packages/salt/utils/gzip_util.py /usr/lib/python2.7/site-packages/salt/utils/gzip_util.pyc /usr/lib/python2.7/site-packages/salt/utils/gzip_util.pyo /usr/lib/python2.7/site-packages/salt/utils/http.py /usr/lib/python2.7/site-packages/salt/utils/http.pyc /usr/lib/python2.7/site-packages/salt/utils/http.pyo /usr/lib/python2.7/site-packages/salt/utils/iam.py /usr/lib/python2.7/site-packages/salt/utils/iam.pyc /usr/lib/python2.7/site-packages/salt/utils/iam.pyo /usr/lib/python2.7/site-packages/salt/utils/immutabletypes.py /usr/lib/python2.7/site-packages/salt/utils/immutabletypes.pyc /usr/lib/python2.7/site-packages/salt/utils/immutabletypes.pyo /usr/lib/python2.7/site-packages/salt/utils/itertools.py /usr/lib/python2.7/site-packages/salt/utils/itertools.pyc /usr/lib/python2.7/site-packages/salt/utils/itertools.pyo /usr/lib/python2.7/site-packages/salt/utils/jid.py /usr/lib/python2.7/site-packages/salt/utils/jid.pyc /usr/lib/python2.7/site-packages/salt/utils/jid.pyo /usr/lib/python2.7/site-packages/salt/utils/jinja.py /usr/lib/python2.7/site-packages/salt/utils/jinja.pyc /usr/lib/python2.7/site-packages/salt/utils/jinja.pyo /usr/lib/python2.7/site-packages/salt/utils/job.py /usr/lib/python2.7/site-packages/salt/utils/job.pyc /usr/lib/python2.7/site-packages/salt/utils/job.pyo /usr/lib/python2.7/site-packages/salt/utils/kinds.py /usr/lib/python2.7/site-packages/salt/utils/kinds.pyc /usr/lib/python2.7/site-packages/salt/utils/kinds.pyo /usr/lib/python2.7/site-packages/salt/utils/lazy.py /usr/lib/python2.7/site-packages/salt/utils/lazy.pyc /usr/lib/python2.7/site-packages/salt/utils/lazy.pyo /usr/lib/python2.7/site-packages/salt/utils/locales.py /usr/lib/python2.7/site-packages/salt/utils/locales.pyc /usr/lib/python2.7/site-packages/salt/utils/locales.pyo /usr/lib/python2.7/site-packages/salt/utils/mako.py /usr/lib/python2.7/site-packages/salt/utils/mako.pyc /usr/lib/python2.7/site-packages/salt/utils/mako.pyo /usr/lib/python2.7/site-packages/salt/utils/master.py /usr/lib/python2.7/site-packages/salt/utils/master.pyc /usr/lib/python2.7/site-packages/salt/utils/master.pyo /usr/lib/python2.7/site-packages/salt/utils/memcached.py /usr/lib/python2.7/site-packages/salt/utils/memcached.pyc /usr/lib/python2.7/site-packages/salt/utils/memcached.pyo /usr/lib/python2.7/site-packages/salt/utils/migrations.py /usr/lib/python2.7/site-packages/salt/utils/migrations.pyc /usr/lib/python2.7/site-packages/salt/utils/migrations.pyo /usr/lib/python2.7/site-packages/salt/utils/minion.py /usr/lib/python2.7/site-packages/salt/utils/minion.pyc /usr/lib/python2.7/site-packages/salt/utils/minion.pyo /usr/lib/python2.7/site-packages/salt/utils/minions.py /usr/lib/python2.7/site-packages/salt/utils/minions.pyc /usr/lib/python2.7/site-packages/salt/utils/minions.pyo /usr/lib/python2.7/site-packages/salt/utils/msazure.py /usr/lib/python2.7/site-packages/salt/utils/msazure.pyc /usr/lib/python2.7/site-packages/salt/utils/msazure.pyo /usr/lib/python2.7/site-packages/salt/utils/nb_popen.py /usr/lib/python2.7/site-packages/salt/utils/nb_popen.pyc /usr/lib/python2.7/site-packages/salt/utils/nb_popen.pyo /usr/lib/python2.7/site-packages/salt/utils/network.py /usr/lib/python2.7/site-packages/salt/utils/network.pyc /usr/lib/python2.7/site-packages/salt/utils/network.pyo /usr/lib/python2.7/site-packages/salt/utils/odict.py /usr/lib/python2.7/site-packages/salt/utils/odict.pyc /usr/lib/python2.7/site-packages/salt/utils/odict.pyo /usr/lib/python2.7/site-packages/salt/utils/openstack /usr/lib/python2.7/site-packages/salt/utils/openstack/**init**.py /usr/lib/python2.7/site-packages/salt/utils/openstack/**init**.pyc /usr/lib/python2.7/site-packages/salt/utils/openstack/**init**.pyo /usr/lib/python2.7/site-packages/salt/utils/openstack/neutron.py /usr/lib/python2.7/site-packages/salt/utils/openstack/neutron.pyc /usr/lib/python2.7/site-packages/salt/utils/openstack/neutron.pyo /usr/lib/python2.7/site-packages/salt/utils/openstack/nova.py /usr/lib/python2.7/site-packages/salt/utils/openstack/nova.pyc /usr/lib/python2.7/site-packages/salt/utils/openstack/nova.pyo /usr/lib/python2.7/site-packages/salt/utils/openstack/pyrax /usr/lib/python2.7/site-packages/salt/utils/openstack/pyrax/**init**.py /usr/lib/python2.7/site-packages/salt/utils/openstack/pyrax/**init**.pyc /usr/lib/python2.7/site-packages/salt/utils/openstack/pyrax/**init**.pyo /usr/lib/python2.7/site-packages/salt/utils/openstack/pyrax/authenticate.py /usr/lib/python2.7/site-packages/salt/utils/openstack/pyrax/authenticate.pyc /usr/lib/python2.7/site-packages/salt/utils/openstack/pyrax/authenticate.pyo /usr/lib/python2.7/site-packages/salt/utils/openstack/pyrax/queues.py /usr/lib/python2.7/site-packages/salt/utils/openstack/pyrax/queues.pyc /usr/lib/python2.7/site-packages/salt/utils/openstack/pyrax/queues.pyo /usr/lib/python2.7/site-packages/salt/utils/openstack/swift.py /usr/lib/python2.7/site-packages/salt/utils/openstack/swift.pyc /usr/lib/python2.7/site-packages/salt/utils/openstack/swift.pyo /usr/lib/python2.7/site-packages/salt/utils/pagerduty.py /usr/lib/python2.7/site-packages/salt/utils/pagerduty.pyc /usr/lib/python2.7/site-packages/salt/utils/pagerduty.pyo /usr/lib/python2.7/site-packages/salt/utils/parsers.py /usr/lib/python2.7/site-packages/salt/utils/parsers.pyc /usr/lib/python2.7/site-packages/salt/utils/parsers.pyo /usr/lib/python2.7/site-packages/salt/utils/pkg /usr/lib/python2.7/site-packages/salt/utils/pkg/**init**.py /usr/lib/python2.7/site-packages/salt/utils/pkg/**init**.pyc /usr/lib/python2.7/site-packages/salt/utils/pkg/**init**.pyo /usr/lib/python2.7/site-packages/salt/utils/pkg/rpm.py /usr/lib/python2.7/site-packages/salt/utils/pkg/rpm.pyc /usr/lib/python2.7/site-packages/salt/utils/pkg/rpm.pyo /usr/lib/python2.7/site-packages/salt/utils/process.py /usr/lib/python2.7/site-packages/salt/utils/process.pyc /usr/lib/python2.7/site-packages/salt/utils/process.pyo /usr/lib/python2.7/site-packages/salt/utils/psutil_compat.py /usr/lib/python2.7/site-packages/salt/utils/psutil_compat.pyc /usr/lib/python2.7/site-packages/salt/utils/psutil_compat.pyo /usr/lib/python2.7/site-packages/salt/utils/pycrypto.py /usr/lib/python2.7/site-packages/salt/utils/pycrypto.pyc /usr/lib/python2.7/site-packages/salt/utils/pycrypto.pyo /usr/lib/python2.7/site-packages/salt/utils/pydsl.py /usr/lib/python2.7/site-packages/salt/utils/pydsl.pyc /usr/lib/python2.7/site-packages/salt/utils/pydsl.pyo /usr/lib/python2.7/site-packages/salt/utils/pyobjects.py /usr/lib/python2.7/site-packages/salt/utils/pyobjects.pyc /usr/lib/python2.7/site-packages/salt/utils/pyobjects.pyo /usr/lib/python2.7/site-packages/salt/utils/raetevent.py /usr/lib/python2.7/site-packages/salt/utils/raetevent.pyc /usr/lib/python2.7/site-packages/salt/utils/raetevent.pyo /usr/lib/python2.7/site-packages/salt/utils/raetlane.py /usr/lib/python2.7/site-packages/salt/utils/raetlane.pyc /usr/lib/python2.7/site-packages/salt/utils/raetlane.pyo /usr/lib/python2.7/site-packages/salt/utils/reactor.py /usr/lib/python2.7/site-packages/salt/utils/reactor.pyc /usr/lib/python2.7/site-packages/salt/utils/reactor.pyo /usr/lib/python2.7/site-packages/salt/utils/reclass.py /usr/lib/python2.7/site-packages/salt/utils/reclass.pyc /usr/lib/python2.7/site-packages/salt/utils/reclass.pyo /usr/lib/python2.7/site-packages/salt/utils/rsax931.py /usr/lib/python2.7/site-packages/salt/utils/rsax931.pyc /usr/lib/python2.7/site-packages/salt/utils/rsax931.pyo /usr/lib/python2.7/site-packages/salt/utils/s3.py /usr/lib/python2.7/site-packages/salt/utils/s3.pyc /usr/lib/python2.7/site-packages/salt/utils/s3.pyo /usr/lib/python2.7/site-packages/salt/utils/saltminionservice.py /usr/lib/python2.7/site-packages/salt/utils/saltminionservice.pyc /usr/lib/python2.7/site-packages/salt/utils/saltminionservice.pyo /usr/lib/python2.7/site-packages/salt/utils/schedule.py /usr/lib/python2.7/site-packages/salt/utils/schedule.pyc /usr/lib/python2.7/site-packages/salt/utils/schedule.pyo /usr/lib/python2.7/site-packages/salt/utils/schema.py /usr/lib/python2.7/site-packages/salt/utils/schema.pyc /usr/lib/python2.7/site-packages/salt/utils/schema.pyo /usr/lib/python2.7/site-packages/salt/utils/sdb.py /usr/lib/python2.7/site-packages/salt/utils/sdb.pyc /usr/lib/python2.7/site-packages/salt/utils/sdb.pyo /usr/lib/python2.7/site-packages/salt/utils/smb.py /usr/lib/python2.7/site-packages/salt/utils/smb.pyc /usr/lib/python2.7/site-packages/salt/utils/smb.pyo /usr/lib/python2.7/site-packages/salt/utils/smtp.py /usr/lib/python2.7/site-packages/salt/utils/smtp.pyc /usr/lib/python2.7/site-packages/salt/utils/smtp.pyo /usr/lib/python2.7/site-packages/salt/utils/stormpath.py /usr/lib/python2.7/site-packages/salt/utils/stormpath.pyc /usr/lib/python2.7/site-packages/salt/utils/stormpath.pyo /usr/lib/python2.7/site-packages/salt/utils/systemd.py /usr/lib/python2.7/site-packages/salt/utils/systemd.pyc /usr/lib/python2.7/site-packages/salt/utils/systemd.pyo /usr/lib/python2.7/site-packages/salt/utils/templates.py /usr/lib/python2.7/site-packages/salt/utils/templates.pyc /usr/lib/python2.7/site-packages/salt/utils/templates.pyo /usr/lib/python2.7/site-packages/salt/utils/thin.py /usr/lib/python2.7/site-packages/salt/utils/thin.pyc /usr/lib/python2.7/site-packages/salt/utils/thin.pyo /usr/lib/python2.7/site-packages/salt/utils/timed_subprocess.py /usr/lib/python2.7/site-packages/salt/utils/timed_subprocess.pyc /usr/lib/python2.7/site-packages/salt/utils/timed_subprocess.pyo /usr/lib/python2.7/site-packages/salt/utils/url.py /usr/lib/python2.7/site-packages/salt/utils/url.pyc /usr/lib/python2.7/site-packages/salt/utils/url.pyo /usr/lib/python2.7/site-packages/salt/utils/validate /usr/lib/python2.7/site-packages/salt/utils/validate/**init**.py /usr/lib/python2.7/site-packages/salt/utils/validate/**init**.pyc /usr/lib/python2.7/site-packages/salt/utils/validate/**init**.pyo /usr/lib/python2.7/site-packages/salt/utils/validate/net.py /usr/lib/python2.7/site-packages/salt/utils/validate/net.pyc /usr/lib/python2.7/site-packages/salt/utils/validate/net.pyo /usr/lib/python2.7/site-packages/salt/utils/validate/path.py /usr/lib/python2.7/site-packages/salt/utils/validate/path.pyc /usr/lib/python2.7/site-packages/salt/utils/validate/path.pyo /usr/lib/python2.7/site-packages/salt/utils/validate/user.py /usr/lib/python2.7/site-packages/salt/utils/validate/user.pyc /usr/lib/python2.7/site-packages/salt/utils/validate/user.pyo /usr/lib/python2.7/site-packages/salt/utils/verify.py /usr/lib/python2.7/site-packages/salt/utils/verify.pyc /usr/lib/python2.7/site-packages/salt/utils/verify.pyo /usr/lib/python2.7/site-packages/salt/utils/virt.py /usr/lib/python2.7/site-packages/salt/utils/virt.pyc /usr/lib/python2.7/site-packages/salt/utils/virt.pyo /usr/lib/python2.7/site-packages/salt/utils/vmware.py /usr/lib/python2.7/site-packages/salt/utils/vmware.pyc /usr/lib/python2.7/site-packages/salt/utils/vmware.pyo /usr/lib/python2.7/site-packages/salt/utils/vt.py /usr/lib/python2.7/site-packages/salt/utils/vt.pyc /usr/lib/python2.7/site-packages/salt/utils/vt.pyo /usr/lib/python2.7/site-packages/salt/utils/vt_helper.py /usr/lib/python2.7/site-packages/salt/utils/vt_helper.pyc /usr/lib/python2.7/site-packages/salt/utils/vt_helper.pyo /usr/lib/python2.7/site-packages/salt/utils/winapi.py /usr/lib/python2.7/site-packages/salt/utils/winapi.pyc /usr/lib/python2.7/site-packages/salt/utils/winapi.pyo /usr/lib/python2.7/site-packages/salt/utils/winservice.py /usr/lib/python2.7/site-packages/salt/utils/winservice.pyc /usr/lib/python2.7/site-packages/salt/utils/winservice.pyo /usr/lib/python2.7/site-packages/salt/utils/xdg.py /usr/lib/python2.7/site-packages/salt/utils/xdg.pyc /usr/lib/python2.7/site-packages/salt/utils/xdg.pyo /usr/lib/python2.7/site-packages/salt/utils/xmlutil.py /usr/lib/python2.7/site-packages/salt/utils/xmlutil.pyc /usr/lib/python2.7/site-packages/salt/utils/xmlutil.pyo /usr/lib/python2.7/site-packages/salt/utils/yamldumper.py /usr/lib/python2.7/site-packages/salt/utils/yamldumper.pyc /usr/lib/python2.7/site-packages/salt/utils/yamldumper.pyo /usr/lib/python2.7/site-packages/salt/utils/yamlencoding.py /usr/lib/python2.7/site-packages/salt/utils/yamlencoding.pyc /usr/lib/python2.7/site-packages/salt/utils/yamlencoding.pyo /usr/lib/python2.7/site-packages/salt/utils/yamlloader.py /usr/lib/python2.7/site-packages/salt/utils/yamlloader.pyc /usr/lib/python2.7/site-packages/salt/utils/yamlloader.pyo /usr/lib/python2.7/site-packages/salt/utils/zeromq.py /usr/lib/python2.7/site-packages/salt/utils/zeromq.pyc /usr/lib/python2.7/site-packages/salt/utils/zeromq.pyo /usr/lib/python2.7/site-packages/salt/version.py /usr/lib/python2.7/site-packages/salt/version.pyc /usr/lib/python2.7/site-packages/salt/version.pyo /usr/lib/python2.7/site-packages/salt/wheel /usr/lib/python2.7/site-packages/salt/wheel/**init**.py /usr/lib/python2.7/site-packages/salt/wheel/**init**.pyc /usr/lib/python2.7/site-packages/salt/wheel/**init**.pyo /usr/lib/python2.7/site-packages/salt/wheel/config.py /usr/lib/python2.7/site-packages/salt/wheel/config.pyc /usr/lib/python2.7/site-packages/salt/wheel/config.pyo /usr/lib/python2.7/site-packages/salt/wheel/error.py /usr/lib/python2.7/site-packages/salt/wheel/error.pyc /usr/lib/python2.7/site-packages/salt/wheel/error.pyo /usr/lib/python2.7/site-packages/salt/wheel/file_roots.py /usr/lib/python2.7/site-packages/salt/wheel/file_roots.pyc /usr/lib/python2.7/site-packages/salt/wheel/file_roots.pyo /usr/lib/python2.7/site-packages/salt/wheel/key.py /usr/lib/python2.7/site-packages/salt/wheel/key.pyc /usr/lib/python2.7/site-packages/salt/wheel/key.pyo /usr/lib/python2.7/site-packages/salt/wheel/minions.py /usr/lib/python2.7/site-packages/salt/wheel/minions.pyc /usr/lib/python2.7/site-packages/salt/wheel/minions.pyo /usr/lib/python2.7/site-packages/salt/wheel/pillar_roots.py /usr/lib/python2.7/site-packages/salt/wheel/pillar_roots.pyc /usr/lib/python2.7/site-packages/salt/wheel/pillar_roots.pyo /usr/share/doc/salt-2015.8.8 /usr/share/doc/salt-2015.8.8/LICENSE /usr/share/doc/salt-2015.8.8/README.fedora /var/cache/salt /var/log/salt /var/log/salt/master /var/log/salt/minion # [root@vuwunicossj0001 ~]# ?"
saltstack/salt,https://github.com/saltstack/salt/issues/33523,saltstack_salt_issues_33523,"file.replace broken

### Description of Issue/Question # 8><--- ",Can you try adding the required options for `file.replace`? Do you still get the error then?,Sorry Ch3ll I did not see this come through.
saltstack/salt,https://github.com/saltstack/salt/issues/40812,saltstack_salt_issues_40812,"Is RHEL5 still supported?  we have salt-minions spawning 20~30 instances on every server

### Description of Issue/Question ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)","However, can you provide the debug log on the minion and master that will show what is being run? Thanks, Daniel","Thanks, my co-worker has opened a new case, 40815 so we can close this one, but the info is useful, we bought extended support off RH for 1 year as we lacked the labour to get all converted to 6/7 in time."
saltstack/salt,https://github.com/saltstack/salt/issues/23047,saltstack_salt_issues_23047,"TypeError: unhashable type 'dict'

When running cp.get_file from the CLI against all minions using --batch, we receive the following error: ",What was the full CLI command you used?,this was just 
saltstack/salt,https://github.com/saltstack/salt/issues/54430,saltstack_salt_issues_54430,"Phanton Minion Return Errors

### Description of Issue If I target a command by grain match, in addition to minions with the appropriate grain value responding as expected, I also see a list of ""phantom"" minions that don't even exist anymore with the ""did not return"" error. I have tried clearing the cached grain values completely from the master, but that doesn't have any effect. ### Setup - Salt 2019.2.0 on master and minions - Minion data cache enabled ### Steps to Reproduce Issue 1. Enable and populate minion data cache 2. Delete a few minions 3. Run a grain-match command (like `salt -G asset_type:server test.ping`) 4. See valid returns for minions with the matching `asset_type` value, but ALSO see the minions you deleted earlier show up with `did not return [No response]`.",Can you run a `salt-key -L` and see if they still show up?,"The keys don't exist. They don't show up with `salt-key -L` and they don't have files in /etc/salt/pki/master/minions. If they're still defined somewhere, I have no idea where that could be."
saltstack/salt,https://github.com/saltstack/salt/issues/14435,saltstack_salt_issues_14435,"Return system exit codes on failures

When executing salt states or modules from the command line, it would be extremely helpful for it to return standard system exit codes. When combined with other automation pieces, it is impossible to catch any possible errors. I have seen other reasons why there are no codes returned, but as OPS using this tool, I need to know if something went wrong. Anything non-zero would be ok. For example, when an SLS is not found. ",Would you mind testing on the develop branch or the 2014.7 branch to verify?,"Sure thing. I will look at it today/tomorrow. On Wed, Jul 23, 2014 at 7:11 PM, Colton Myers notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/14453,saltstack_salt_issues_14453,"attempting cross-environment includes chokes on unordered dict

#2683 [DEBUG ] Results of YAML rendering: OrderedDict([('include', [OrderedDict([('a', 'tarballs')]), OrderedDict([('a', 'formulae')])]), ('a', OrderedDict([('E@._salt-minion._', [OrderedDict([('match', 'compound')]), 'tarballs', 'formulae/mongodb', 'formulae/mongodb/server'])]))]) [DEBUG ] Loaded no_out as virtual quiet [DEBUG ] Loaded json_out as virtual json [DEBUG ] Loaded yaml_out as virtual yaml [DEBUG ] Loaded pprint_out as virtual pprint local: ## Data failed to compile:  File ""/usr/lib/python2.7/dist-packages/salt/state.py"", line 2483, in call_highstate top = self.get_top() File ""/usr/lib/python2.7/dist-packages/salt/state.py"", line 2036, in get_top tops = self.get_tops() File ""/usr/lib/python2.7/dist-packages/salt/state.py"", line 1936, in get_tops for sls in fnmatch.filter(self.avail[saltenv], sls_match): File ""/usr/lib/python2.7/fnmatch.py"", line 50, in filter if not pat in _cache: TypeError: unhashable type: 'OrderedDict'","Could you include the state which caused the ""Data failed to compile"" error?",you bet. 
saltstack/salt,https://github.com/saltstack/salt/issues/14485,saltstack_salt_issues_14485,"non root minion not responding sometimes

I have a setup of multiple minions on a single machine. Sometimes these minions, running as non root, do not respond. If I change them to run as root I have no problems. ",Would you mind testing on the 2014.1.7 release? There were some issues with the 2014.1.5 release and I just want to rule them out.,Same problem after upgrading. 
saltstack/salt,https://github.com/saltstack/salt/issues/14536,saltstack_salt_issues_14536,"file.patch returns ""extra operand"" error when path contains spaces

I'm using SaltStack on Windows minions and trying to use file.patch to patch some files (after manually installing a patch.exe binary for it to use). The files are under ""Program Files"" and that space in the path causes the patch command to fail with the error ""extra operand"". Hopefully just a case of changing salt/modules/file.py, line 1454, from: `cmd = 'patch {0}{1} {2} {3}'.format(` to: `cmd = 'patch {0}{1} ""{2}"" ""{3}""'.format(`",Would you like to submit a PR with your proposed changes or would you prefer that we make the changes?,"Hi @cachedout, I can certainly provide a PR but I currently only have a 2014.1.7 on Windows servers, and don't yet have anything setup to run the project tests. I just worked around the issue by dropping in a modified file.py file which works fine for me in states and from the salt master command line. If this is okay I'll clone and submit a PR (against 2014.7 branch?)."
saltstack/salt,https://github.com/saltstack/salt/issues/14695,saltstack_salt_issues_14695,"Encoding problem with users on Windows

In French 'Guest' is named 'Invité', so when listing users, we get an encoding error: ",Can you please give us the output of `salt --versions`?,
saltstack/salt,https://github.com/saltstack/salt/issues/16262,saltstack_salt_issues_16262,"a question about cmd.run with memcache 

I use the memcached default script `salt 'salt-centos' cmd.run '/etc/init.d/memcached start` the target of salt-centos will start 11211 port successfully. then I use any of other ports except 11211 run the script again and again the target of salt-centos won't start. when I run the command: `salt 'salt-centos' cmd.run '/usr/bin/memcached -d -p 11211 -u memcached -m 100 -c 1024 -l 192.168.79.56 -P /tmp/memcached11211.pid'` the target of salt-centos will start 11211 port successfully. But when I run the command: `salt 'salt-centos' cmd.run '/usr/bin/memcached -d -p 11220 -u memcached -m 100 -c 1024 -l 192.168.79.56 -P /tmp/memcached11220.pid'` the target of salt-centos won't start. the problem also is in the state cmd.run or cmd.wait I don't know what happend in salt? Can you help me? Maybe this is a bug Thanks.",Why would you do that instead of using service.start? http://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.service.html#salt.modules.service.start,"Thank you,everyone. I know the answer here. the reason is selinux doesn't close."
saltstack/salt,https://github.com/saltstack/salt/issues/17134,saltstack_salt_issues_17134,"salt 2014.1.13 has a bug

python version: 2.6.8 `salt-minion -c /etc/salt -l debug` the result is: ",Can you please show us your schedule config? That appears to be where the problem is. Any other relevant information you can show us would also be helpful.,I didn't set schedule config. I just set master and id value. others config use default config.
saltstack/salt,https://github.com/saltstack/salt/issues/53032,saltstack_salt_issues_53032,"Documentation of Minion Keys

### Description of Issue/Question I'm having trouble finding technical documentation on the type of encryption keys used for authorization of salt minions, and the encryption of the traffic sent on ports 4505 and 4506. Is there a white paper or other similar technical documentation?","Does this page answer your question, https://docs.saltstack.com/en/getstarted/system/communication.html?","That page covers the communication at a high level, but doesn't include things like key strength, the mechanics of the RSA key vs the AES rotating key, the negotiation process between the master minion, and a host of other things. I'm looking for something more technical that would be useful to a security team in understanding the deep detail of these things."
saltstack/salt,https://github.com/saltstack/salt/issues/55160,saltstack_salt_issues_55160,"XTablesError: can't find directory with extensions; please set XTABLES_LIBDIR

### Description of Issue <!-- Note: Please direct questions to the salt-users google group. Only post issues and feature requests here --> I'm not running any specific states. Nothing related to iptables. Seeing the following traceback in my salt-minion logs: ",Do you have any additional information to help me replicate it? Thanks.,"Sure, happy to provide any additional information. What additional information would be helpful?"
saltstack/salt,https://github.com/saltstack/salt/issues/23220,saltstack_salt_issues_23220,"Debian Jessie: Bootstrap uses Jessie Repository ;)

which is commonly a very bad idea/behavior: ",Can you verify that this is also happens on 2014.7? Thanks.,"It works fine with latest 2014.7.5 The idea behind this bug report ist that the ""stable"" Debian repository package is outdated: https://packages.debian.org/jessie/salt-minion `Package: salt-minion (2014.1.13+ds-3)` so http://bootstrap.saltstack.com script should add the Salt Repo even within Debian Jessie."
saltstack/salt,https://github.com/saltstack/salt/issues/29309,saltstack_salt_issues_29309,"Feature Request: check for 1st run / ""boot time""

as salted state/module to check if we are ""fresh"" setup / started and want e.g. making system-wide package upgrades to have latest versions and other tasks of interest when initalizing / starting an instance. ;) There should some states for it because cron can also use `@reboot` instead of normal 5 time fields ( `man 5 crontab` ) .",Does that satisfy your need?,"Thats the way I do it for longer times ... But 1. It seems that people implement it different. Already saw that people checkout files/""1st run state done"" to /tmp because they didn't aware that tje tmp folders are regulary swept by crons / while booting up. 2. The stop/start of an instance (e.g. in AWS) is not effected in this solution. Example: I have set the grain `foo: True` but the instance was e.g. one week down and suffers for git checkouts, security updates and so on)... so this grain state is for the birds :) Thats why I opened this feature request. Perhaps you / other find it also useful."
saltstack/salt,https://github.com/saltstack/salt/issues/43311,saltstack_salt_issues_43311,"salt-cloud 2017.7.x broken saltitfy/ec2

### Description of Issue/Question Didn't recognize setup ""master"" in provider section in latest python3-based setup without changing anything in my profiles :fire:... (in 2016.x it was working fine):  ... not special problems by distro/packages possible... (here latest Debian Jessie) EDIT: Whole content (minion, grains ...) of providers content is now ignored/overwritten by profile content...",Can you share a snaitized version of your provider/profile/map configs?,"I have the problem on other instances, too - I added temporary the needed data by copying it from provider to profile file. with <= salt-2016.x this setup was working fine. Actual setup is ""default"" installed by salt except the cherrypy version which needs to be the wheezy package to get SSL/TLS activated for salt-api; but this shouldn't be used for salt-cloud. "
saltstack/salt,https://github.com/saltstack/salt/issues/14716,saltstack_salt_issues_14716,"Merging syslog-ng modules from salt-contrib

Hi All, I wrote a syslog-ng state and execution module, which was halfly merged into Salt's code(mainly the docs [1], [2], [3]). I was asked to make some changes before merging it into this repo, and I did it in salt-contrib [4]. Now It is sitting for a while there. I replied to the PRs but I think you didn't received those mails. Could you give it a review? After that, I'd like to update the documentation here, too. [1] [http://docs.saltstack.com/en/latest/topics/tutorials/syslog_ng-state-usage.html](http://docs.saltstack.com/en/latest/topics/tutorials/syslog_ng-state-usage.html) [2] [https://docs.saltstack.com/en/latest/ref/states/all/salt.states.syslog_ng.html](https://docs.saltstack.com/en/latest/ref/states/all/salt.states.syslog_ng.html) [3] [http://salt.readthedocs.org/en/latest/ref/modules/all/salt.modules.syslog_ng.html](http://salt.readthedocs.org/en/latest/ref/modules/all/salt.modules.syslog_ng.html) [4] [https://github.com/saltstack/salt-contrib](https://github.com/saltstack/salt-contrib) Thanks for your help :)",Can you please link the PR in question?,Thanks for yoor reply! Here they are: https://github.com/saltstack/salt-contrib/pull/87 https://github.com/saltstack/salt/pull/14033
saltstack/salt,https://github.com/saltstack/salt/issues/15143,saltstack_salt_issues_15143,"salt master UnboundLocalError

Hi i'm using salt-master 2014.7.0-234-g1858114 and i got error  after remove all cache and restart master, this error disappeared. as a backend used git + localfs",When did you receive this error? Was it on master start or after a particular amount of time?,this error had appeared after a two days on master start
saltstack/salt,https://github.com/saltstack/salt/issues/15801,saltstack_salt_issues_15801,"salt.states.mdadm duplicate information in mdadm.conf

Hi. On my server i have raid1 for root. My mdadm.conf ",Can you please post the output from doing a `salt --versions-report`? That will help us be able to debug your issue more easily.,
saltstack/salt,https://github.com/saltstack/salt/issues/16781,saltstack_salt_issues_16781,"New git branch won't become environment after salt-master restart with gitfs

When using gitfs for states , creating a new branch will only become available after a salt-master restart. ",Can you check the master log file for errors?,"Will check again tomorrow when i'm work but i had the debug log open, but since that shows a lot i could have missed something. Can you advice a log level to set ?"
saltstack/salt,https://github.com/saltstack/salt/issues/17700,saltstack_salt_issues_17700,"Salt doesn't honor symlinks with gitfs

I use salt in combination with gitfs. Git stores a symlink by putting the symlink as text in the file like this: ",Can you tell us what version you're running on by posting the output of `salt --versions-report`?," After reading my first post again perhaps i wasn't very clear(That's what you get for addressing issues when it's late). I found the following about git and symlinks: git just stores the contents of the link (i.e. the path of the file system object that it links to) in a 'blob' just like it would for a normal file. It then stores the name, mode and type (including the fact that it is a symlink) in the tree object that represents its containing directory. When you checkout a tree containing the link, it restores the object as a symlink regardless of whether the target file system object exists or not. If you delete the file that the symlink references it doesn't affect the git-controlled symlink in any way. You will have a dangling reference. It is up to the user to either remove or change the link to point to something valid if needed. What i want salt with gitfs to do is see the difference between a normal file and a symlink in git. So if you control a symlink with git i want salt to create a symlink and not a normal file with text."
saltstack/salt,https://github.com/saltstack/salt/issues/15435,saltstack_salt_issues_15435,"Group Install - yumpkg.py still broken

I received an updated yumpkg.py (for my 2014.1.7 version of Salt) from one of your esteemed members and today upgraded my Salt installation to 2014.1.10 (CentOS 6.5). All group installs fail and only succeed when I use the attached yumpkg.py and sync_modules. I thought this would have been merged into the 2014.1.10 release. Will this issue be addressed in future releases? Hmmm, can't attach the file (at least not in this UI). Anyway, the failure is due to the missing --plugins option for the yum-related command line strings.",Could you perhaps test on the `2014.7` branch?,"Unfortunately I don't think so. I'm in a secure facility and we only get what is pushed to EPEL6, which is only 2014.1.10 at this point. I might be able to try at home this weekend by building a CentOS 6.5 VM and putting 2014.7.x on that. Sent from my iPhone On Sep 2, 2014, at 17:44, Colton Myers notifications@github.com wrote: It's possible that the fix was made in 2014.7 but not backported to 2014.1. Could you perhaps test on the 2014.7 branch? — Reply to this email directly or view it on GitHub https://github.com/saltstack/salt/issues/15435#issuecomment-54222402."
saltstack/salt,https://github.com/saltstack/salt/issues/14793,saltstack_salt_issues_14793,"[salt-cloud][azure] Deployment of vm succeeds, but no response after that

Hi there, we can successfully spin up vms on azure (as seen in the web management portal), but salt-cloud does not seem to get any response and waits until it times out after 900 seconds. Here is the output:  Also, please notice the trace ""Failed to execute 'azure.list_nodes()' while querying for running nodes: invalid literal for int() with base 10: "" - not sure if this has to do with it or is just cosmetic. BTW: What exactly should happen now? Is it something like waiting from azure to get the hostname so salt can go and install minion through ssh or is it waiting for the minion to respond with the hostname? Thanks! 7oku",Would you mind submitting a pull request?,"I'll send you a pull request tomorrow, when I added a more secure way to not only check for just a present value in the variable, but also for a valid ip address."
saltstack/salt,https://github.com/saltstack/salt/issues/25723,saltstack_salt_issues_25723,"file.directory fails in test mode when using recurse ignore_files

The ability to ignore files when recursively setting directory permissions was added in #14795. This works fine, except when running the state in test mode, which claims that only `user`, `group` and `mode` are supported by recurse. Here's the lines with the issue: https://github.com/saltstack/salt/blob/develop/salt/states/file.py#L469 I'm not sure if it's as simple as adding the new options here or if they need to be stripped before calling `_check_directory`.",What version of salt are you using?,@jfindlay 2015.5.2.
saltstack/salt,https://github.com/saltstack/salt/issues/14958,saltstack_salt_issues_14958,"Saltl-minion on windows - nssm issue

Hi, I'm still having issue with many windows with new latest version (2014.1.10) of the windows minion which keeps hanging many of my windows 7 Pro English machines. The system is freezing completly many times during the day, and the only way to have the machine back to a normal state is by doing a hard reset by hand... When I disabled the minion service, everything is fine. The only thing I see in the windows event log is the nssm doing the following thing in loop:  :(",What's the exact command you're using to start Salt?,"Case closed, the problem seems fine with 2014.1.10 with a fresh install of the minion..."
saltstack/salt,https://github.com/saltstack/salt/issues/14815,saltstack_salt_issues_14815,"salt minion doesn't respond when working as non-root account on freebsd

Hi Salt minion doesn't respond when working as non-root account on freebsd.  Before minion start, I was execute ""chown -R salt:salt /var/run/salt/ /var/log/salt/ /usr/local/etc/salt/ /var/cache/salt/"". And service start correctly and I see salt-minion in process list (also I see established conncetion betweenminion amd master with lsof). When minion started under root account all things work fine. py27-salt-2014.1.7_1 freebsd-9.2",How are you starting your minion?,minion started with init script (/usr/local/etc/rc.d/salt_minion).
saltstack/salt,https://github.com/saltstack/salt/issues/14856,saltstack_salt_issues_14856,"file.symlink default behavior for user/group permissions

I have a situation where some paths are mounted via NFS into a virtual machine using Vagrant. One of the characteristics of such a shared filesystem is that the uid:gid seems to be immutable from within my guest VM without at least some sort of hack/workaround. If I have a state set up to create a symlink, e.g.:  I took a look at the [source for the file state](https://github.com/saltstack/salt/blob/v2014.1.10/salt/states/file.py#L823-L832) and I see that even if the `user` and `group` options are not provided for the state it will default them and attempt to set ownership anyway. Should this really be the desired behavior? I think that either: 1. it should not try to set the ownership unless values are provided or 2. some option should exist to tell it to skip setting ownership Right now my only alternative is to set these symlinks up in a shell script instead of managing them in my Salt states.","Which version are you using? I just ran a check against 2014.7 and did not receive the same error, so it's possible that this issue was already fixed.","When I was running this on Friday I was using 2014.1.10. To clarify my particular issue, my host filesystem has some files set to uid:gid of 503:20. I mount these as a shared folder using Vagrant and they get mounted using NFS to my guest. When the salt provisioner runs on my guest and creates the symlink it does so successfully but cannot change ownership to root:root. All files on the mount are basically forced to use the uid:gid of the mount (503:20 in my case). Everything would be fine if I could let it just take the ownership forced upon the symlink when it's created."
saltstack/salt,https://github.com/saltstack/salt/issues/21601,saltstack_salt_issues_21601,"Multiple returns with syndic

I am trying to figure out if I've done something wrong or if this is actually a bug of some sort. My setup has a main salt master and lower-level masters running the syndic (I'll call these syndic-masters). Whenever I try to run something (e.g. test.ping) from the main master targeting minions under a syndic-master I am seeing multiple returns: `root@salt:~# salt ddmvarnish01-ssl.deseretdigital.com test.ping`  I have no idea what's happening here but if I'm not mistaken I think I'm seeing the same job actually being run multiple times on the minion. This issue does not happen if I run the same command from the syndic-master.","Can you tell us what version of salt you're running by posting the output of `salt --versions-report` for your ""Super Master"", syndic, and affected minion?",Thanks for the reply @rallytime. Our servers are all running the same version: **Super Master:** 
saltstack/salt,https://github.com/saltstack/salt/issues/14903,saltstack_salt_issues_14903,"raid.present fails

I'm having issues with raid.present state. Here is the state file: ",What's the salt-minion version running on your `server-blah1`?,2014.1.10 ----- Original Message -----
saltstack/salt,https://github.com/saltstack/salt/issues/14916,saltstack_salt_issues_14916,"Missing documentation about recursive update of pillar dictionary

I'm using `salt-call 2014.1.10` and I have the following example files  that is a correct behavior for me using nested keys, it seems that recursive update of pillars when top files are loaded was introduced by the pull request #9184 but I find that isn't clearly explained in the documentation about [Pillar namespace flattened](http://docs.saltstack.com/en/latest/topics/pillar/#pillar-namespace-flattened). Is this a good practice to use and merge data from different pillar files and it needs to be documented?",Does that help clarify your question?,@rallytime it's perfect! thanks guys!
saltstack/salt,https://github.com/saltstack/salt/issues/14932,saltstack_salt_issues_14932,"Documentation about logging and minion restart in Job Management

Currently the documentation located at http://docs.saltstack.com/en/latest/topics/jobs/ does not say how to verify that a scheduled job ran. I think that the page should specifically say that a minion must have it's logs turned to ""info"" as documented here: http://docs.saltstack.com/en/latest/ref/configuration/minion.html#minion-logging-settings Also the Job Management documentation does not say that a salt-minion must be restarted in order for the new schedule to be applied.",Would you mind [submitting a pull request](http://docs.saltstack.com/en/latest/topics/development/contributing.html) with the change?,It will be my first time but I will give it a shot this weekend when I actually have free time. I would also like to add the info about using saltutil.refresh_pillar and restarting a minion if it's a minion config.
saltstack/salt,https://github.com/saltstack/salt/issues/20811,saltstack_salt_issues_20811,"Dedicated file.backup state for backing up files not managed by salt

I have a state where I'm attempting to backup a file before executing a command that may modify it. I don't want to replace the file, so I'm not specifying the `source` parameter in `file.managed`. However, it seems that `file.managed`, when there is no `source` parameter, gets to the point where it checks the permissions and then returns immediately when it detects no changes. https://github.com/saltstack/salt/blob/develop/salt/states/file.py#L1374 This means the file is never backed up. ",Can you post the output of `salt --versions-report`?,"@rallytime, the file where I linked to the line of code that results in the issue is in the develop branch. I'm testing on a 2014.7.0 minion. "
saltstack/salt,https://github.com/saltstack/salt/issues/20910,saltstack_salt_issues_20910,"file.replace overwrites symbolic links

If the target of `file.replace` is a symbolic link, `file.replace` is writing a new, regular file over the symbolic link. This happens whether or not there is a change to the file. ",What did you expect to happen? What change do you think that should be done in order for this feature to work as you expect?,"Well, it was a complete surprise to me. I would never expect `file.replace` to change a file attribute like that, and most especially not if `file.replace` doesn't actually make any changes. I would expect `file.replace` to dereference the symbolic link and operate on the regular file it points to."
saltstack/salt,https://github.com/saltstack/salt/issues/33354,saltstack_salt_issues_33354,"Clarification on how `mod_aggregate` works

I've written a custom state module with a `mod_aggregate` function and gotten it to work. It does indeed aggregate all the state data into one state and it executes that state with the aggregated data, as expected. However, it is also still executing all the states from which data was aggregated, which I did not expect. I thought `mod_aggregate` would aggregate all the state data and execute the function one time. I fiddled with my `mod_aggregate` function for a while, debugging the inputs and attempting to influence the outputs, but I couldn't figure out how to get it to stop executing states that had been aggregated. Can anyone please clarify how `mod_aggregate` is supposed to work, and whether it is possible to make it work that the way I expected? Doc link: https://docs.saltstack.com/en/latest/ref/states/aggregate.html Cross post to user group: https://groups.google.com/d/msg/salt-users/iS82msSo4os/roE0Zzd0BwAJ",Does that point you in the right direction?,"@Ch3LL, I do have that line in my `mod_aggregate` function. Perhaps the `salt.utils.gen_state_tag(chunk)` function is somehow not accounting for custom state modules?"
saltstack/salt,https://github.com/saltstack/salt/issues/33356,saltstack_salt_issues_33356,"state.orchestrate for salt masterless mode?

Is there a way to run `state.orchestrate` using salt-call? I don't see it as a function in the execution module, only in the runner.",How would you expect this to work? How would your minion know about other minions and talk to them? How would that differ from that minion being a master?,"I don't want to talk to multiple minions, just the local one. I just want to run states, re-initializing the loader and renderer in between. That way I can have a state that does something, then run another state that can render (via Jinja or whatever) objects set by the prior state."
saltstack/salt,https://github.com/saltstack/salt/issues/36307,saltstack_salt_issues_36307,"Bad osrelease grain on Windows 2008 R2 and Windows 2012 R2 in Salt v2016.3.3

Python 2.7.12, used by salt v2016.3.3, changes again how `platform.uname()` reports the value used by `osrelease`. Related sorta to #30042. Probably broken by the ""fix"" from this issue from python, http://bugs.python.org/issue26513. ",What's the desired behaviour? from what you're showing me this is working how I would expect.,"Oh, right, I should have mentioned the desired behavior. It's working fine in the sense that the osrelease grain is set to the third value of the tuple returned by `platform.uname()`. It's bad in the sense that the value (for the reported OS) is supposed to be `2008ServerR2`. For Windows Server 2012 R2 it should be `2012ServerR2` (but in Python 2.7.12 it will report incorrectly as `8.1`). There's more history in the linked issue, and the issue linked from that issue. :) It was returning the correct value in Python 2.7.11 with the prior version of salt that I was using, 2015.5.8. Earlier versions of Python had a related, but different bug. I expect the problem is a result of Microsoft deprecating the API that the `platform` module used previously to get this value, and now there is a bit of shuffling to figure out how to get it to report correctly using the new API. I'm not sure when salt on Windows switched over to Python 2.7.12, but probably all versions with 2.7.12 will be reporting the incorrect value for Windows Server systems (Desktop systems are fine)."
saltstack/salt,https://github.com/saltstack/salt/issues/36895,saltstack_salt_issues_36895,"Simplifying the win_reg execution module interface

The win_reg function names introduced in 2015.5 are overly wordy, and the explicit functionality can largely (entirely?) be inferred to simplify the function names and the interface. I propose three public functions: - `reg.get` - `reg.set` - `reg.delete` All functions would accept `name`. Whether `name` represents a key or a value can be inferred through registry calls, or a secondary parameter. Or, perhaps these functions could be a simpler interface wrapping the more explicit current functions. I'd also propose simplifying the return structure, with an option to get the complex structure that was introduced with the 2015.5 functions. Maybe kind of like the wrappers around `cmd.run_all()`.",What do you think about possibly simplifying the names?,"To clarify, I don't mean that we should _skip_ those 5% of use cases. Instead, simplify the interface and use sane defaults to address the 95% of use cases. Then let the other 5% override those defaults as needed. UI stays simple, and we get 100% coverage. win/win."
saltstack/salt,https://github.com/saltstack/salt/issues/15133,saltstack_salt_issues_15133,"Salt Master hangs on service start/stop

OS: Ubuntu 14.04 The salt master process hangs when I try to start it with ""service salt-master start"" or ""service salt-master stop"". Install method:  It does seem to work if I manually run `salt-master`, but if I run service salt start/stop, it hangs and the call to `service` never returns, nor does a python process start to host the salt-master. It never creates its logfile at /var/log/salt/master, even if I set the logging level in the YAML to ""trace"", nor is anything written to /var/log/upstart/salt-master.log to indicate that there is a problem.",Does the problem occur even after you completely stop the salt-master and try to start it via the init system?,"Yes, I actually killed the salt-master process after it hung for a while, and it then proceeded to hang again on start. Let me rebuild the machine (it's just an AWS box) and give it another try."
saltstack/salt,https://github.com/saltstack/salt/issues/19928,saltstack_salt_issues_19928,"Regression in archive.extracted with tar_options

I've got the following state: ",Does that help explain the behavior you're seeing?,"No, it doesn't. As you note in the first state (the newer one), I'm only passing `- tar_options: ""--strip=1""` and it's making a tar command that reads `'tar', 'x--strip=1', '-f'` when it should be `'tar', 'x', '--strip=1', '-f'`"
saltstack/salt,https://github.com/saltstack/salt/issues/22959,saltstack_salt_issues_22959,"Windows Salt hangs if file.directory is trying to write to a drive that doesn't exist

This is sort of a ""well duh"" error but Salt hangs rather than displaying an error if the drive that a file.directory operation is working on doesn't exist. ",Can you provide an example sls that will trigger this?,"It only triggers if `makedirs: True`, it seems: 22959.sls: "
saltstack/salt,https://github.com/saltstack/salt/issues/15240,saltstack_salt_issues_15240,"No way to update a package installed via ""sources"" and salt:// url

I have some locally compiled RPMs that I dumped in directory inside my Salt state, and installed using pkg.installed with a ""sources"" that uses a salt:// url. This worked great. However, I figured out that one of the package was missing the mysql-devel package when it was compiled. So I install that, rebuild all the RPMs, and then... There doesn't seem to be a simple way to force a reinstall of these packages everywhere. The ""pkg.latest"" state doesn't support ""sources"", and ""pkg.installed"" might not work it if checks the version. It'd be nice to have a simple way of dealing with this in Salt. Thanks!",Would that suit your needs?,"And I'm not a RedHat expert. But one way or another, it'd be nice to expose this at the ""pkg.installed"" level, doing the right thing both when ""sources"" is used and when it isn't. (And I know that at least apt-get also supports reinstalling.) Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/23682,saltstack_salt_issues_23682,"Pip module requires system pip, even when not used (with env_bin)

I'm running SaltStack on a RHEL 6.5 system. However I don't really use the system Python and have instead an install of Anaconda in /opt. I was looking to install additional packages in there, and the pip state looked like it would do the job:  However this does not work, because the `pip` SaltStack state is not loaded, because it seems it refuses to load unless there is a pip command installed in the system Python. I made things work by installing pip in the system Python, even though I will never use it and having it installed may actually lead to errors on my part in the future (any invocation of the system pip on my part was meant to be an invocation of pip installed in Anaconda). Would it be possible to postpone the check for an available pip until the `pip.installed` state is executed. That way, `pip.installed` calls with an `env_bin` pointing to a working installation of Python with pip would work without requiring an (unrelated) system pip to be available.",Would you mind opening a new issue for it? Thanks.,Thanks for the quick turnaround! Opened #23753 at your suggestion for more general issue.
saltstack/salt,https://github.com/saltstack/salt/issues/16456,saltstack_salt_issues_16456,"salt-ssh fails with 'Argument list too long'

In my current configuration command length (populated SSH_SH_SHIM) in client/ssh/**init**.py is 1718830. With this command length salt-ssh fails with following exception: <pre> [WARNING ] Failed to spawn the VT: [Errno 7] Argument list too long Process Process-1: Traceback (most recent call last): File ""/usr/lib/python2.7/multiprocessing/process.py"", line 258, in _bootstrap self.run() File ""/usr/lib/python2.7/multiprocessing/process.py"", line 114, in run self._target(*self._args, **self._kwargs) File ""/home/CORP/kirill.timofeev/salt-ssh-virtualenv/local/lib/python2.7/site-packages/salt/client/ssh/__init__.py"", line 325, in handle_routine stdout, stderr, retcode = single.run() File ""/home/CORP/kirill.timofeev/salt-ssh-virtualenv/local/lib/python2.7/site-packages/salt/client/ssh/__init__.py"", line 613, in run stdout, stderr, retcode = self.cmd_block() File ""/home/CORP/kirill.timofeev/salt-ssh-virtualenv/local/lib/python2.7/site-packages/salt/client/ssh/__init__.py"", line 785, in cmd_block stdout, stderr, retcode = self.shell.exec_cmd(cmd_str) File ""/home/CORP/kirill.timofeev/salt-ssh-virtualenv/local/lib/python2.7/site-packages/salt/client/ssh/shell.py"", line 282, in exec_cmd ret = self._run_cmd(cmd) File ""/home/CORP/kirill.timofeev/salt-ssh-virtualenv/local/lib/python2.7/site-packages/salt/client/ssh/shell.py"", line 310, in _run_cmd stream_stderr=False) File ""/home/CORP/kirill.timofeev/salt-ssh-virtualenv/local/lib/python2.7/site-packages/salt/utils/vt.py"", line 216, in __init__ 'Failed to spawn the VT. Error: {0}'.format(err) TerminalException: Failed to spawn the VT. Error: [Errno 7] Argument list too long </pre>",Which version of salt are you using?,2014.7.0 installed into virtualenv via 'pip install'
saltstack/salt,https://github.com/saltstack/salt/issues/16605,saltstack_salt_issues_16605,"Can't remove and install packages under same id declaration

Here is fragment from my salt state: <pre> 3 .packages: 4 pkg.removed: 5 - pkgs: 6 - sendmail 7 pkg.installed: 8 - pkgs: 9 - postfix </pre> It fails with following error: <pre> [DEBUG ] Results of YAML rendering: OrderedDict([('.packages', OrderedDict([('pkg.removed', [OrderedDict([('pkgs', ['sendmail'])])]), ('pkg.installed', [OrderedDict([('pkgs', ['postfix'])])])])), ('/etc/postfix/main.cf', OrderedDict([('file.managed', [OrderedDict([('source', 'salt://postfix/main.cf.jinja')]), OrderedDict([('template', 'jinja')]), OrderedDict([('context', None), ('fqdn', 'salt-test-els-c6'), ('host', 'salt-test-els-c6')]), OrderedDict([('user', 'root')]), OrderedDict([('group', 'root')]), OrderedDict([('mode', 644)])])])), ('/etc/postfix/master.cf', OrderedDict([('file.managed', [OrderedDict([('source', 'salt://postfix/master.cf')]), OrderedDict([('user', 'root')]), OrderedDict([('group', 'root')]), OrderedDict([('mode', 644)])])])), ('.service_setup', OrderedDict([('service', [OrderedDict([('name', 'postfix')]), 'running', OrderedDict([('enable', True)]), OrderedDict([('watch', [OrderedDict([('file', '/etc/postfix/main.cf')]), OrderedDict([('file', '/etc/postfix/master.cf')])])])])]))]) [ERROR ] Error found while pre-processing the salt file postfix: '.packages:pkg' Traceback (most recent call last): File ""/usr/lib/python2.6/site-packages/salt/renderers/stateconf.py"", line 138, in process_high_data add_implicit_requires(data) File ""/usr/lib/python2.6/site-packages/salt/renderers/stateconf.py"", line 428, in add_implicit_requires states_after.remove(tag) KeyError: '.packages:pkg' </pre> I had to separate pkg installation and removal using 2 id declarations.",What version of Salt are you using?,I've got this issue using 2014.1.10. Is this limitation of current design that I can't use several functions from same module under same id declaration? If yes can this be fixed?
saltstack/salt,https://github.com/saltstack/salt/issues/15229,saltstack_salt_issues_15229,"losing executable permissions

I try to copy a jboss server from salt-master to salt-minion. My init.sls looks like that: /opt/jboss/jboss-as-7.1.1.Final: file.recurse: - source: salt://jbossas7/jboss-as-7.1.1.Final - user: root - group: root - include_empty: True On the salt-master the file standalone.sh has executable permissions as it should be: root@salt:/home/root# ls -als /srv/salt/jbossas7/jboss-as-7.1.1.Final/bin/standalone.sh 8 -rwxr-xr-x 1 root root 7563 Aug 21 16:04 /srv/salt/jbossas7/jboss-as-7.1.1.Final/bin/standalone.sh After copying this file to my minion with salt '*' state.highstate -v the same file on minion has the permission: root@minion3:~# ls -als /opt/jboss/jboss-as-7.1.1.Final/bin/standalone.sh 8 -rw-r--r-- 1 root root 7563 Aug 25 13:27 /opt/jboss/jboss-as-7.1.1.Final/bin/standalone.sh without executable permission! So i can't start my jboss server......",Did you mean to re-open this issue or did you want it to remain closed?,"The re-open was because i have pressed the wrong button... (""Close and comment ""instead of ""Comment"") ...sorry! I think preservation of file permissions in file.recurse would be a helpful feature..."
saltstack/salt,https://github.com/saltstack/salt/issues/26459,saltstack_salt_issues_26459,"Untar file does not work anymore with salt-minion 2015.5.3

I try to copy and untar a file:  Do i something wrong or is there a bug in the new version?",What is the rest of the error message you get?,There is nothing else as error message. All i get is: [ERROR ] Module function archive.tar threw an exception. Exception: 'NoneType' object is not iterable and 
saltstack/salt,https://github.com/saltstack/salt/issues/15787,saltstack_salt_issues_15787,"add mulipath module

Add following functionality: http://linux.die.net/man/8/multipath Please advice on where to put this. blockdev seems not very appropriate.",How about a new module called devmap?,"On it, then."
saltstack/salt,https://github.com/saltstack/salt/issues/15788,saltstack_salt_issues_15788,"Add scsi administration commands

 I would be happy to dig around and try to make scsi module to feature this and some other most used commands if this is approved.",What other kinds of functions would go in it?,I'll write down the list of what could be in there is a few days.
saltstack/salt,https://github.com/saltstack/salt/issues/15290,saltstack_salt_issues_15290,"can't provision linode instances with salt-cloud with latest salt, or with develop branch

I've just pulled both the develop branch and the latest stable version for ubuntu (or at least the latest version returned by apt-get). I can no longer provision Linode instances, and get this failure: root@178.79.134.155's password: [ERROR ] Failed to deploy 'kola_wowuser_1'. Error: Command 'ssh -oStrictHostKeyChecking=no -oUserKnownHostsFile=/dev/null -oControlPath=none -p 22 root@178.79.134.155 \'test -e \""/tmp/.saltcloud-0b5a86fe-cd91-4ee8-a00e-f38e21ae6dce\""\'' failed. Exit code: 1 [INFO ] Complete kola_wowuser_1: ---------- Error: Command 'ssh -oStrictHostKeyChecking=no -oUserKnownHostsFile=/dev/null -oControlPath=none -p 22 root@178.79.134.155 \'test -e \""/tmp/.saltcloud-0b5a86fe-cd91-4ee8-a00e-f38e21ae6dce\""\'' failed. Exit code: 1",Can you give me the output from `salt-cloud --versions-report`?,"➜ ~ salt-cloud --versions-report Salt: 2014.7.0rc1-1234-g5ffffc6 Python: 2.7.6 (default, Mar 22 2014, 22:59:56) Jinja2: 2.7.2 M2Crypto: 0.21.1 msgpack-python: 0.3.0 msgpack-pure: Not Installed pycrypto: 2.6.1 libnacl: Not Installed PyYAML: 3.10 ioflo: Not Installed PyZMQ: 14.0.1 RAET: Not Installed ZMQ: 4.0.4 Mako: 0.9.1 Apache Libcloud: 0.15.1 ➜ ~"
saltstack/salt,https://github.com/saltstack/salt/issues/25783,saltstack_salt_issues_25783,"postgresql_local_cache bug's

Hi, Following this convert in returner(load) from postgresql_local_cache  The NETAPI output from /jobs/(jid) doesn't contain the MINIONs section {} when used postgresql_local_cache",What is the output of `salt --versions-report`?,"Oh, sure "
saltstack/salt,https://github.com/saltstack/salt/issues/19167,saltstack_salt_issues_19167,"""salt-minion.exe"" thread leak in Salt 2014.7.0 on Windows 

Running the official Salt 2014.7.0 release on a Windows 7 Enterprise 64bit Minion. The minion is running for 3 days and was only occasionally connected to the salt-master. When connected, I have issued only testing commands (like test.version). In Sysinternals Process Explorer I searched for ""salt-minion"" and found 400 `salt-minion.exe` threads, spawned of `crss.exe` (Microsoft client server runtime process). 20 were created in the last 2 hours, when I was connected to the master for 1 hour and 40 during writing this report (and offline). This means the number of threads is rapidly rising. I don't get where the answer is in ""Explain the number of master procs and worker_threads"" https://github.com/saltstack/salt/pull/14907 At which number of threads Python is supposed to reclaim threads? Is this a thread leak?",Maybe we need to enable some kind of a log on the minion?,"I observe in [Process explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx) (search before and after for ""salt-minion"") that `salt '*' test.ping` adds either 10 or 12 salt-minion threads. @akurdyukov, can you observe that too? I have now 734 salt-minion threads (and consider this a thread leak). This is a case of debugging, not logging, if you asked me."
saltstack/salt,https://github.com/saltstack/salt/issues/19269,saltstack_salt_issues_19269,"Undocumented  feature `names:` of `file.directory`

The documentation of [file.directory](http://docs.saltstack.com/en/latest/ref/states/all/salt.states.file.html#salt.states.file.directory) only contains `name:`, but `names:` seems to work too. I find this handy, but is the use of `names:` safe or is an ""experimental feature""? ",What version of salt are you using? Run salt --versions-report and send back the output.,"Very happy that `names` is a (compiler) feature and would like to humbly suggest to add this information to the (latest) documentation, maybe as a link. I currently use 2014.1.13, but this does not matter and (advertisement warning) is only due to the [lack of automated testing on Windows.](https://github.com/saltstack/salt/issues/18950)"
saltstack/salt,https://github.com/saltstack/salt/issues/19842,saltstack_salt_issues_19842,"`salt \* test.ping` hangs when a minion is on VPN

I have salt 2014.7.0 (Helium) master on Debian 7 and 3 Windows 7 Professional (64bit) minions 2014.1.13 (Hydrogen). The third minion is connected via VPN. `salt \* test.ping` finds 2 minions only if the salt service on the third (VPN) minion is NOT running. When the salt service on the VPN minion is running, `salt \* test.ping` hangs forever and I have to do ^C (Ctrl C). It hangs whether the VPN minion replys or not. What documentation can I add? ''' root@MP2Pdebian:~# ps aux | grep salt root 2993 0.0 0.3 237616 30472 ? S 2014 0:00 /usr/bin/python /usr/bin/salt-master -d root 3032 7.1 8.7 1007064 705292 ? S 2014 3413:27 /usr/bin/python /usr/bin/salt-master -d root 3033 0.0 0.3 321284 28584 ? Sl 2014 0:00 /usr/bin/python /usr/bin/salt-master -d root 3034 0.0 0.3 320384 28136 ? Sl 2014 0:00 /usr/bin/python /usr/bin/salt-master -d root 3037 0.0 0.3 237616 26600 ? S 2014 0:00 /usr/bin/python /usr/bin/salt-master -d root 3040 0.0 0.6 485964 52472 ? Sl 2014 0:38 /usr/bin/python /usr/bin/salt-master -d root 3041 0.0 0.6 485712 52072 ? Sl 2014 0:38 /usr/bin/python /usr/bin/salt-master -d root 3042 0.0 0.6 485468 51928 ? Sl 2014 0:40 /usr/bin/python /usr/bin/salt-master -d root 3043 0.0 0.6 485588 51932 ? Sl 2014 0:39 /usr/bin/python /usr/bin/salt-master -d root 3044 0.0 0.6 484880 51756 ? Sl 2014 0:40 /usr/bin/python /usr/bin/salt-master -d root 3045 0.0 0.6 567224 55592 ? Sl 2014 0:04 /usr/bin/python /usr/bin/salt-master -d root 17275 0.0 0.0 9716 876 pts/0 S+ 19:19 0:00 grep salt '''",Can you show us the output of `salt \* test.ping -v` please?,"Hi Colton, thank you for hinting to the `-v` option. Below I document my 5 steps till success. It seems like setting ""on"" the VPN minion only is the trigger for a problem, which I resolved by removing the key of a (former) minion that no longer has a salt-minion installed. Is there already a bug report of ""not connected"" minions that can freeze the `salt` command? If yes, please link to that report and close this one. Thank you, Markus Round 1) Set off the salt-minion of the VPN client (MarkusTp)  Nice."
saltstack/salt,https://github.com/saltstack/salt/issues/37656,saltstack_salt_issues_37656,"NSIS installer only uses master and id from previous config

### Description of Issue/Question https://github.com/saltstack/salt/blob/develop/pkg/windows/installer/Salt-Minion-Setup.nsi contains logig for an an upgrade. Function  ### Versions Report Any version",What do you think? @meggiebot Would this need to be a higher priority?,"@twangboy I agree with @lorengordon, this leads into the direction of a parser for the config file, and a rather smart one. While this is doable in the (upcoming) msi installer https://github.com/saltstack/salt-windows-msi, this would be a nightmare in NSIS. (For curiosity: how do the UNIX installers parse the config file on an upgrade?) I would like to propose to discuss to reduce `salt/conf/minion` to the absolute, bare minimum. This maybe just `master` and `id` (minion name). All other configuration (I argue) should be grains, including root_dir. This way, the master could 'upgrade' any new settings. There would be no in-place comments, but I don't see this as a disadvantage, as configuration must be documented centrally anyhow. I have the gut feeling that minion configuration outside of grains is like 'reinventing the wheel'. Also, Salt should have the ability to configure itself."
saltstack/salt,https://github.com/saltstack/salt/issues/52162,saltstack_salt_issues_52162,"Python socket.getfqdn() ends with domain ""mshome.net"" of Hyper-V NIC

### Description of Issue/Question The domain grain is ""mshome.net"" which is not correct This domain appears also in the fqdn  ### Setup Installed 2018.3.4 Py3 on Windows 10. ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) salt-call --versions-report Salt Version: Salt: 2018.3.4 Dependency Versions: cffi: 1.10.0 cherrypy: 10.2.1 dateutil: 2.6.1 docker-py: Not Installed gitdb: 2.0.5 gitpython: 2.1.3 ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: 1.6.1 M2Crypto: Not Installed Mako: 1.0.6 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 3.5.3 (v3.5.3:1880cb95a742, Jan 16 2017, 16:02:32) [MSC v.1900 64 bit (AMD64)] python-gnupg: 0.4.1 PyYAML: 3.12 PyZMQ: 16.0.3 RAET: Not Installed smmap: 2.0.5 timelib: 0.2.4 Tornado: 4.5.1 ZMQ: 4.1.6 System Versions: dist: locale: cp1252 machine: AMD64 release: 10 system: Windows version: 10 10.0.16299 SP0 Multiprocessor Free",What is the workgroup setting on this machine?,Which command shall I execute for the workgroup settings?
saltstack/salt,https://github.com/saltstack/salt/issues/52961,saltstack_salt_issues_52961,"Sporadic KeyError: 'runner' in reactor

### Description of Issue/Question A salt-master has only one runner that reacts on the minion_ping event of 3000 client.. The runner works fine, but there are sporadic errors in `/var/log/salt/master` like the one below What does this error mean?  ### Versions Report Salt Version: Salt: 2018.3.4 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: 1.2.5 pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Apr 9 2019, 14:30:50) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.6.1810 Core locale: UTF-8 machine: x86_64 release: 3.10.0-957.5.1.el7.x86_64 system: Linux version: CentOS Linux 7.6.1810 Core Minions are 2016 Windows",Can you provide the contents of the reactor in question that is producing these messages?,"The reactor has just 4 lines, apart from the comments "
saltstack/salt,https://github.com/saltstack/salt/issues/53890,saltstack_salt_issues_53890,"Collection of Windows CPU consumption of a simple command for several salt-minions

### Description of Issue We compared Windows CPU consumption of several salt-minions with 2016.11.3 (Python 2) and noted a very strong (up to 10-fold) performance detoriation for Python3. This is to publically collect Windows CPU consumption of several salt-minions. ### Test command The test command `test.version` is intentionally simple ### Test procedure To observe CPU, open Windows Task Manager, selected Details, sort by Name. Installer ______________________________ | Observations of `test.version` in the Windows Task Manager ---------------------|--------------- 3000.1-Py3-64bit | One python.exe process above 25% runs for 60 seconds, a second python.exe process above 10% runs for 60 seconds. 3000-Py3-64bit.msi | One python.exe process above 20% runs for 4 seconds, a second python.exe process is quiet. Fan starts. 2018.3 Git 1255 Py3 AMD64 | One python.exe process above 20% runs for 8 seconds. (zmq_filtering) 2018.3.4-Py3-AMD64 | Two python.exe processes above 20%, each, run for 15 seconds at the same time, resulting in a combined CPU consumption of 50% for 15 seconds. (zmq_filtering: False) 2018.3.4-Py2-AMD64 | As 2016.11.3-AMD64 2018.3.3-Py2-AMD64 | As 2016.11.3-AMD64 2017.7.8-Py3-x86 | One python.exe processe above 20% runs for 6 seconds, after the salt-master got the return, a second python.exe processe above 20% runs for another 6 seconds, sometimes a third python.exe above 20% runs for another 4 seconds. (zmq_filtering: False) 2016.11.3-AMD64 | One python.exe process above 20% runs for 3 seconds. (any zmq_filtering)",How did you test this? What states or modules did you run?,"@waynew , the more modern Salt versions with Python 3 have a much worser performance. I hope this issue helps to depict the importance for an effort to understand the underlying issues."
saltstack/salt,https://github.com/saltstack/salt/issues/16467,saltstack_salt_issues_16467,"pkg state thinks it failed to install specific version even though it was successful

**Environment:**  Step 2. Run: `salt-call --local --file-root=./ state.sls bug` Now observe the state fails with this _Comment_: `The following packages failed to install/update: kernel-devel=2.6.32-431.3.1.el6.x86_64.` If you try to run the command that was launched according to the log (`yum -y install ""kernel-devel-2.6.32-431.3.1.el6.x86_64""`), you'll see that the package was actually installed successfully.",Can you include the contents of that `kernel_version` grain please?,That worked. Thanks!
saltstack/salt,https://github.com/saltstack/salt/issues/15397,saltstack_salt_issues_15397,"Correct return for state when in test

According to the docs, section 22.25.20.5, it seems that a state module should return None for `return` when `__opts__['test']` is set irregardless of any changes to be made. Is that the correct interpretation? Many states don't seem to appear to follow that rule however. For example, `file.prepend` works as I would expect from the documentation returning a `changes` dict and `result=None` whether or not there would be changes made when `__opts__['test']` is set `file.append` on the other hand returns `result=None` only if there would be changes made and `result=True` if there would be no changes made when `__opts__['test']` is set",Does that make sense? The only time `result=None` should be used is if we expect changes will be made when the state is run with `test=False`.,Thanks @basepi for clearing up the confusion.
saltstack/salt,https://github.com/saltstack/salt/issues/16305,saltstack_salt_issues_16305,"exception in hg.latest

See an issue with `hg.latest` in latest develop branch ",Can you please show us the state you used to trigger this error? Also include the output of `salt --versions-report`. Thanks!,@basepi I was able to track this to a bug in `cmdmod._run`. I submitted PR #16311 which demonstrates the bug and fixes it. Let me know if that fix looks good or you see any potential issues.
saltstack/salt,https://github.com/saltstack/salt/issues/16598,saltstack_salt_issues_16598,"Issue with salt version numbers, bootstrap script and salt-run manage

Latest bootstrap install script creates a `saltversion` when installing from git (`sudo sh ./install_salt.sh git develop`) which fools `salt-run manage.versions` into thinking that it is an older version Both master and testmachine.local are using develop branch version 400303e below ",Can you please try bootstrapping again? ... the minion ...,It is working now. Thanks
saltstack/salt,https://github.com/saltstack/salt/issues/15963,saltstack_salt_issues_15963,"remote execution + high state= Minion did not return

Hi, I have a setup described as in [https://github.com/saltstack/salt/issues/15442]. The problem i am facing is when i try to do remote execution in a minion and if high state is running at that point in that minion. The remote execution says ""Minion did not return"". Upon looking into logs, minion got the job but return the output. What could be the possible issue?",do you mean that the job did indeed finish eventually and that its output is what you expect?,"@babilen In the minion log, When a job is successfully executed it says ""Returning data to jid ..."" In the failure case, I don't see that line for that jid. I see that minion got the command properly, but no returning."
saltstack/salt,https://github.com/saltstack/salt/issues/16900,saltstack_salt_issues_16900,"Authentication issues on salt master

Sorry about the vague title, but I have no clue what it going on. I was having files on the salt master not be available on the minions as well as two other problems (shown below). I upgraded from Helium rc3 to Helium rc5. I no longer have the file availablity problems. However, I still have the other two problems. Using salt-call I can get this odd error message:  Some of the times it just works though. If I had to guess, I would say it is about half the time. Also, on the second on, some minions may return correctly before this error happens. I am using Ubuntu 12.04.4. I have been running this salt master for a while. I was using the salt master with no problem when this started happening. It seemed that everything just stopped working correctly in the middle of a session of working on my states.",Could we see a `salt --versions-report` please?,Versions report on the master. 
saltstack/salt,https://github.com/saltstack/salt/issues/24906,saltstack_salt_issues_24906,"pkg.latest fails to install packages if no version information is available

If this is desired behavior, then just close this. I have a state:  When I switched from Ubuntu to OSX, this no longer works because brew does not store version information for cmake. It seems like the desired behavior would be for cmake to be installed if it is not.","What is the output of `salt --versions-report`, what is the minion debug log, and what is the specific error message you're getting?","Versions report:  The operating system is OSX Yosemite. If I install cmake manually with `brew install cmake` and then run salt, it succeeds with the message: `Package cmake is already up-to-date`."
saltstack/salt,https://github.com/saltstack/salt/issues/15519,saltstack_salt_issues_15519,"git.latest says: I don't handle protocol '/root/https

When I ask a state to clone me a git repository it fails with an error I can't make any sense of. This is the relevant part of the output of state.highstate call: ",Does it work if you change it to `git://` instead of `https://`?,"Yes, with `git://` it works perfectly."
saltstack/salt,https://github.com/saltstack/salt/issues/32711,saltstack_salt_issues_32711,"ssh_known_hosts doesn't take into account ssh configuration file

When I try to add a host to known hosts with this function and I don't have access to SSH on port 22 I can't do the HTTPS forwarding, because if I modify the ssh/config file before running this state and telling to forward to port 433 the configuration is just ignored.  The SSH config file: ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",What version of salt are you using?,"Hello @jfindlay, I'm using the last version from the repository: "
saltstack/salt,https://github.com/saltstack/salt/issues/16588,saltstack_salt_issues_16588,"State tomcat.wait unavailable under windows

Minion OS: Windows Server 2008 R2 Master OS: CentOS 6 Salt version: 2014.1.10 It seems the tomcat states (http://docs.saltstack.com/en/latest/ref/states/all/salt.states.tomcat.html#salt.states.tomcat.wait) are not available under windows. ""State tomcat.wait found in sls test is unavailable.""",Can you try adding the path to where tomcat is located on Windows by default to this list here? https://github.com/saltstack/salt/blob/develop/salt/modules/tomcat.py#L73,The default installation directory from the Tomcat 8 from the Windows Installer is C:\Program Files\Apache Software Foundation\Tomcat 8.0 But the most users recommend this directory: C:\tomcat8 or C:\tomcat
saltstack/salt,https://github.com/saltstack/salt/issues/23799,saltstack_salt_issues_23799,"[docs] 2015.2 release notes aren't in the 2015.2 docs

http://docs.saltstack.com/en/latest/topics/releases/2015.2.0.html",Did that fix the issue @iggy ?,It was probably pulling .2 from my browser history (I still have machines on 2015.2rcSOMETHING fwiw). Thanks for doing the forwarding rule. Fixed.
saltstack/salt,https://github.com/saltstack/salt/issues/25270,saltstack_salt_issues_25270,"[2015.8.0rc1] salt-bootstrap fails to properly install a minion

`curl -s -L https://bootstrap.saltstack.com | sudo sh -s -- -U -P -p python-jinja2 -A master git v2015.8.0rc1` results in the following output:  Let me know what other information you need.",Can you please paste the script's full output while passing `-D` to it? ... probably in a gist ...,"I can't. When I try to select the output to copy it, my terminal dies. But it did it again and there was (again) no /etc/init.d/salt-minion"
saltstack/salt,https://github.com/saltstack/salt/issues/31388,saltstack_salt_issues_31388,"[salt-cloud - vultr provider] - salt-cloud hangs trying to spin up new instance

salt-cloud hangs trying to spin up a new node on vultr This is the last thing that prints out. It just hangs forever after this:",What version of salt-cloud are you using?,"Crap, I thought I had salt --versions output in there  I was using an older version, but upgraded to develop to see if the problem was there too. It is."
saltstack/salt,https://github.com/saltstack/salt/issues/15847,saltstack_salt_issues_15847,"RSAError: data too large for modulus on minion start

When a new minion starts up I am getting the error ""RSAError: data too large for modulus"" and then ""RSAError: oaep decoding error"". Most of the time the minion starts and applies the state just fine, but maybe 1 out of every 10 machines fail with the error. I have pasted the log below. These are new machines that startup from an image and on boot the /etc/salt/minion_id and /etc/salt/pki/ are deleted to force a new id and keys. All machines are identical, except for a different timestamp in the hostname, and run the same states. Also, if it helps I seem to run into this error more often when launching a group of machines at the same time. It just happened to me when I launched 5 machines, but the size varies. Salt master is open. OS: Ubuntu Server 14.04.1 Minion version: 2014.1.10 Master version: 2014.1.10 ",What's the ID of this minion?,"I don't have the ID for that instance. I'll be sure to capture the ID the next time it happens, with that said all of our instances follow a naming convention so it would have been something like this, ""production-signals-api-092314175537"". The number on the end is just the date and 24 hour timestamp of when the instance was created so that does change. Hopefully that helps. Annndd actually I may have just discovered the issue, I bet two instances are starting up with the same timestamp therefore same ID. Would that cause this issue? I'm off to verify if that's the case. I'll report back shortly."
saltstack/salt,https://github.com/saltstack/salt/issues/15926,saltstack_salt_issues_15926,"Windows minions assume winrepo cache file location regardless of win_repo_mastercachefile value

Windows minions seem to assume winrepo cache file location regardless of the win_repo_mastercachefile: setting on the master side. Unless win_repo_mastercachefile: is set to something that translates to salt://win/repo/winrepo.p , the Windows minion will complain that salt://win/repo/winrepo.p can't be found. Setting win_repo_mastercachefile: to another file or directory/file that is within salt://win/ doesn't work either, even though the minion can clearly access that location. The minion conf file contains the default contents of: ",Can you clarify?,"Sorry, just edited to clarify. win_repo_mastercachefile:, on the master side, is the only thing explicitly set."
saltstack/salt,https://github.com/saltstack/salt/issues/15951,saltstack_salt_issues_15951,"Salt-cloud stuck waiting for VM IP when using ""ssh_interface: private_ips""

### I'm attempting to have Salt-cloud bootstrap a VM using a private IP on Rackspace. When I leave out the option to use `ssh_interface: private_ips` then the build and bootstrap will go fine. (Separate issue: I need to tell it which version of Salt to use. I'm testing the Release candidate, and it instead will install stable **2014.1.10 (Hydrogen)** , which is usually good, but I need **2014.7.0rc1 (Helium)** to continue testing ) The problem I have when attempting to use the `ssh_interface: private_ips` is that **salt-cloud** will never attempt to connect to the VM. It always says something like the following (repeated for 10 minutes, which is the standard timeout). ##### I enter the following command: `$ salt-cloud -p loadbalancer_1gb normal3-loadbalancer-staging -l debug` ##### The following is repeated over and over for 10 minutes until the timeout period. ",What was the issue? I'm having the exact same problem.,"#### Edit: I composed a reply, but forgot to post it before I left work. I ended up re-writing it below: --- I didn't find a specific solution to the problem, but I found a workaround. The machines I'm creating all have public IP's for convenience. The thing I wanted to be sure of was that Salt would only talk over the internal IP's since they are faster and we don't get charged for the bandwidth usage. So, I just did the following: - I commented out the `ssh_interface: private_ips` line and just made sure that I was providing the internal IP for the Salt Master.  That way the public IP is only used for the bootstrap, and after that, all the traffic goes over the internal network. I still have the same problem if I use the `ssh_interface: private_ips` setting (i.e. Salt-cloud never sees that the VM has come up, and won't bootstrap it. It just waits for 10 minutes with the VM being up and available for all 9 minutes and 30 seconds of that time, and then destroys it). It hardly matters for my use, but it does appear that it may be a legitimate bug."
saltstack/salt,https://github.com/saltstack/salt/issues/15897,saltstack_salt_issues_15897,"Salt-Master 2014.7 network.py lsof command returns non-zero on SmartOS base64 14.2.0

Salt was installed on SmartOS base64 14.2.0 with: wget -O bootstrap.sh bootstrap.saltstack.org sh bootstrap.sh git v2014.7 separate issue, ""svccfg export salt-master"" shows config_dir expected to be in /opt/local/etc/, had to also do ""mv /etc/salt /opt/local/etc/"" On SmartOS base64 14.2.0, lines 930-934 of /opt/local/lib/python2.7/site-packages/salt/utils/network.py http://pastebin.com/raw.php?i=GZHHC05G show what appears to be the ""Linux lsof"" that differs from the illumos lsof shown here http://pastebin.com/raw.php?i=As808KkY A snippet of /var/log/salt/master shows http://pastebin.com/raw.php?i=tjAXgPWC shows an lsof command that won't run on base64 14.2.0 http://pastebin.com/raw.php?i=PMuAV9BG",Do you have an idea for an `lsof` command that will work on your OS in this instance?,"@cachedout lsof in http://pastebin.com/raw.php?i=As808KkY appears to work, does it provide what Salt needs?"
saltstack/salt,https://github.com/saltstack/salt/issues/34261,saltstack_salt_issues_34261,"salt.modules.dnsmasq documentation errors

### Description of Issue/Question The documentation for the dnsmasq module is in error in two examples, and incomplete and confusing for the setconfig function. Both the getconfig and setconfig examples are given with a ""file="" switch. That switch does not exist. The correct name is ""config_file="". should be: Documentation really falls apart for the dnsmasq.set_config function. The document says that: ""salt will attempt to set the option"". What option? There is no indication that ""the option"" consists of a keyword argument for the command. The reader is left wondering what is the meaning of the keyword argument ""domain="" in the examples. If we were informed that the line ""domain=my.domain"" was going to be appended to the configuration file, this would become clear. This is an extreme example of the common failing in the SaltStack module documents that the reader is not informed what the example is intended to accomplish. ### Setup No setup required. I am reading from [the development doc page](https://docs.saltstack.com/en/develop/ref/modules/all/salt.modules.dnsmasq.html). ### Steps to Reproduce Issue See the example quotations in the description. ### Versions Report (salt)Vernons-MacBook-Pro:~ vernoncole$ salt-call --local test.version local: 2016.3.0-784-g945b21b Salt is for installed from git source on a MacBook Pro running OS-x 10.11.5",Can this issue be closed now?,Fix confirmed. Well done.
saltstack/salt,https://github.com/saltstack/salt/issues/32706,saltstack_salt_issues_32706,"salt-ssh does not honor -i option if you set priv: 'None' in roster

### Description of Issue/Question  on Debian 7 But I guess this affects also latest master ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) 1. Configure ""priv"" in roster to be empty (so do no key or password based authentication) 2. try to connect with the documented ""-i"" switch to ignore host keys ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) as this affects salt-ssh and (probably) not salt, the salt-ssh version above",Would you mind mentioning the type of authentication you are attempting to use?,"Hi, well I try to run salt-ssh as a regular user, that is, the users are authenticated against freeipa and get a kerberos ticket, once they are authenticated, you can ssh into the mentioned machine without password or key. The following workaround seems to work: 1. Accept the ssh host key via other means (e.g. simply ssh'ing into the machine) 2. Use salt-ssh, works This has some drawbacks, though: for large numbers of hosts you might not want to type everytime ""yes"" for accepting ssh host keys.. ;) HTH"
saltstack/salt,https://github.com/saltstack/salt/issues/16919,saltstack_salt_issues_16919,"Salt-cloud can not create the instances at  aws vpc 

I has copy the website http://docs.saltstack.com/en/latest/topics/cloud/aws.html the 15.5.4.7. CLOUD PROFILES content about the vpc configure ",Can you please format the YAML so it will be easier to read the issue? Also please provide the output of `salt --versions`,"this is my cloud.profiles files: <pre> cange: provider: aws-east-config image: ami-e784fc8e size: m1.small ssh_interface: private ssh_username: yadmin script: /etc/salt/cloud.deploy.d/user_data.sh network_interfaces: - DeviceIndex: 0 PrivateIpAddresses: - Primary: True #auto assign public ip (not EIP) AssociatePublicIpAddress: True SubnetId: subnet-8b38c2e5 SecurityGroupId: - sg-ccb041a3 volumes: - { size: 10, device: /dev/sdf } del_all_vol_on_destroy: True tag: {'Environment': 'production', 'Role': 'database'} sync_after_install: grains </pre> my salt versions <pre> # salt-cloud --versions Salt: 2014.7.0rc4-46-ga06ed6d Python: 2.7.8 (default, Oct 18 2014, 06:08:50) Jinja2: 2.7.3 M2Crypto: 0.22 msgpack-python: 0.4.2 msgpack-pure: Not Installed pycrypto: 2.6.1 libnacl: 1.3.6 PyYAML: 3.11 ioflo: 1.0.1 PyZMQ: 14.4.0 RAET: 0.3.6 ZMQ: 4.0.5 Mako: Not Installed Apache Libcloud: 0.15.1 </pre>"
saltstack/salt,https://github.com/saltstack/salt/issues/16871,saltstack_salt_issues_16871,"win_useradd ""user.add"" doesn't set password for user

In the module https://github.com/saltstack/salt/blame/develop/salt/modules/win_useradd.py the ""add"" method doesn't accept a password parameter, and tries to create the user with a blank password. The comments suggest it should take a password. I notice that the way the user.present state works, it adds the user as one step and then sets the password, so the win_useradd module is consistent with that. This creates a problem though - the majority of Windows systems will not allow a user to be added with an empty password, unless the local security policy is changed - and this is probably not a good idea. I think some special handling for Windows might be required here.",What version was this issue found in?,"This was in 2014.1.11. I checked the release notes for 2014.1.12 and 2014.1.13 and didn't see any mention. I also checked github and looked at the development tree, but I couldn't see any significant change in the code."
saltstack/salt,https://github.com/saltstack/salt/issues/23543,saltstack_salt_issues_23543,"Adding PPA with pkgrepo.managed fails silently if owner name contains non-ASCII

Using 2014.7.5 with this state code:-  The PPA is at https://launchpad.net/~ondrej/+archive/ubuntu/php5 and the author's name is Ondřej Surý.",Would you try to reproduce the issue with this version? Thanks.,I confirm this issue is still present in the 2015.5.0 version. 
saltstack/salt,https://github.com/saltstack/salt/issues/29085,saltstack_salt_issues_29085,"salt-cloud ec2 driver missing ""Deploy: False"" option

I'm trying to create Windows EC2 instances with salt-cloud using the **ec2** driver. I want to handle bootstrapping of the box myself, so I added:  to my profiles. However, after creating the device salt-cloud still attempts to SSH into the box and takes a very long time to time out. Looking at the code briefly, it looks to me like the **aws** driver had the ""deploy: False"" option but it's not in the **ec2** driver, which I think is a bug.",Could you please post the output of `salt-cloud --versions-report`?,"@techhat I can't say that it ever actually did work with EC2. I think on balance, probably not. Sorry I can't be more certain. "
saltstack/salt,https://github.com/saltstack/salt/issues/16152,saltstack_salt_issues_16152,"git.latest identity doesn't escape windows path

In SaltStack 2014.1.10, when cloning a repository on windows, the identity parameter is not escaping windows paths correctly. I expected the state below to work, however that resulted a bad path to the identity file. ",Did the git.latest state clone it to the correct directory once you escaped the identity?,"Yes, git.latest does clone into the correct directory once I escaped the identity."
saltstack/salt,https://github.com/saltstack/salt/issues/19215,saltstack_salt_issues_19215,"salt-ssh JSON Render failed

i just write some sls files they can initialize system , but always get error in the end. some output like this  by the way , my salt version is newest ,salt-ssh 2014.7.0-2017-g59622f5 (Helium)",Does the state you wrote work normally and only fails with salt-ssh? Can you post what your state looks like?,"yes , the state file works fine , it do everything i want to do. some sle file content in https://www.refheap.com/95364"
saltstack/salt,https://github.com/saltstack/salt/issues/19216,saltstack_salt_issues_19216,"salt-key cmd return error

in salt-ssh 2014.7.0-2017-g59622f5 (Helium) , use command salt-key , i got error  Happy Christmas, ^_^","Could you give us the exact command and output that you ran? Additionally, salt-key doesn't really apply for salt-ssh, as we don't have to manage minion keys.","i just do something like this  i also put salt-master in debug mode , but no info report when i execute ""salt-key"" command."
saltstack/salt,https://github.com/saltstack/salt/issues/20165,saltstack_salt_issues_20165,"Feature: support multiple unless statements

Currently unless statements are only valid as a single line: ",How would you ensure that the tests were executed in the written order in a dictionary?,"Hadn't thought about that. Not particularly familiar with the Salt internals, but I guess that would necessitate implementing unless/onlyif with an OrderedDict (salt.utils.odict) which seems overkill. A multi-line ""unless: | "" with lines trailed with '&& \' might just be more explicit and expressive. Perhaps just a documentation update to include such an example of a complex unless statement would be warranted. Really though the silently doing nothing with a dictionary inside an unless (no error, nothing executed, just ""unless succeed"") is the kind of YAML/SaltStack idiosyncrasy that can drive you mad. That part feels like a bug to me."
saltstack/salt,https://github.com/saltstack/salt/issues/16265,saltstack_salt_issues_16265,"couchdb: Only the first returning minion gets to return its output

Disclaimer: I'm new to couchdb. Only the first returning minion will get to write to the couchdb database. Subsequent writes encounter: `Unable to create document: ""{'error': 'HTTP Error 409: Conflict'}""` This is because the job id is used as document id, and that subsequent uploads of a couchdb document conflict with the winner of the race. I currently don't have a nice proposition to do (updating the previous document would lead to more conflict+re-upload). Perhaps use a concatenation of `minion_id`\+ `job_id`, or have the master allocate the document ids and fill a database with them?",Can this be closed since you found a workaround?,Yup! Perhaps I'll open a PR to document it.
saltstack/salt,https://github.com/saltstack/salt/issues/22513,saltstack_salt_issues_22513,"salt-ssh package install with 'sources' argument from fileserver fails

Test case (from develop branch):  Also fails when defined as a state. Logging didn't show me anything. Let me know what you need!","Can you post the output of `salt-ssh --versions-report` on your master, please? ping @basepi",Sure! 
saltstack/salt,https://github.com/saltstack/salt/issues/22386,saltstack_salt_issues_22386,"Salt's presence detection

http://docs.saltstack.com/en/latest/ref/runners/all/salt.runners.manage.html#salt.runners.manage.alived I couldn't find any documentation on what ""presence detection"" actually does. Can this be explained?",Does that help answer you question?,"That is an extremely brief explanation. 1. There should be a link to the `presence events` doc in the `runners.manage` documentation. 2. My interpretation of the documentation leads me to believe that `runners.manage.alived` will return only minions that are not in the `lost` state. Is this correct? 3. With default settings, `presence_events: False`, what is expected from `runners.managed.alived`?"
saltstack/salt,https://github.com/saltstack/salt/issues/23051,saltstack_salt_issues_23051,"Recursive requisite found after upgrade from 2014.7.4 to 2014.7.5

",Can we see your state files that are involved?,@rallytime This is the state that's causing it: 
saltstack/salt,https://github.com/saltstack/salt/issues/24758,saltstack_salt_issues_24758,"salt-minion uses 100% CPU for periodic status.master task on a server with a lot of TCP connections (a LB).

Greetings. I'm having a problem with salt-minion on a few load balancer machines. There's one (or sometimes two) salt-minion processes which are using 100% of single CPU core. I investigated the matter using strace and turning debug logs in the minion and I found out that this happens when minion runs a periodic status.master task. When the task runs there is a lot of reading from /proc/[salt-minion-PID]/net/tcp. Running strace -f salt-call status.master confirms that entire /proc/[salt-minion-PID]/net/tcp file is read, and while it's done the CPU is at 100%. I suppose it's a way of checking (by looking in /proc/[salt-minion-PID]/net/tcp file) weather salt-minion is connected to it's master. This solution may work for servers with few connections (looking for line in file is a CPU-heavy operation, even if the file is small), but in my case (a load balancer with a lot of connections, and /proc/[salt-minion-PID]/net/tcp file size of 4GB) it presents a real problem. ","How many minions are connected? EDIT: Oh, this is the _minion_. Now I'm ever more confused. Is it showing _all_ TCP connections under the PID of the minion?","@cachedout :) it's not a master, it's a minion. The server is a LB for an RTB DSP system."
saltstack/salt,https://github.com/saltstack/salt/issues/31010,saltstack_salt_issues_31010,"salt.states.dockerng.running: Image name is required to run a container

I should be able to run existing container just by specifying it's name/ID:  Specifying image parameter in the state fixes the situation. In my use case, I only know the name of the container but not the image it was built from, that's should be enough to run the container (docker allows that)",What version of salt are you using?,@jfindlay 2015.8.3
saltstack/salt,https://github.com/saltstack/salt/issues/42937,saltstack_salt_issues_42937,"salt crashes after upgrading to 2017.7.0

### Description of Issue/Question ",What version were you upgrading from? Are you able to restart Salt and have it function again?,"@garethgreenaway upgraded from 2016.11.6, restarting salt services doesn't help. I've reverted back to 2016.11.6 and it works again."
saltstack/salt,https://github.com/saltstack/salt/issues/48204,saltstack_salt_issues_48204,"State mysql_user.present Exception with mysql 8.0.11

### Description of Issue/Question ",When adding a user is the password being automatically encrypted now? As a workaround you can specify a pre-hashed password using the `password_hash` option.,"@garethgreenaway yeah, when you create a user the password is hashed by default. pre-hashed password wih `password_hash` could be an option, but now when they removed the password() function I'm not sure how to generate a hash...."
saltstack/salt,https://github.com/saltstack/salt/issues/50433,saltstack_salt_issues_50433,"Wildcard grant fails in mysql_grants.present in mysql 8.x

### Description of Issue/Question ### Setup ",What is the output from `show grants for 'debian-sys-maint'@'localhost';`?,
saltstack/salt,https://github.com/saltstack/salt/issues/17944,saltstack_salt_issues_17944,"ENC parameters - how to access from sls/template

Hi, I have an external node classifier returning data as shown below. In sls and template files I have tried `{{ vim_new_value }}` and `{{ vim_test_value }}` but for each I get `<variable> is undefined`. I have also tried a suggestion from the salt newsgroup: `{{ salt\['pillar.get'\]('vim_test_value') }}`, also without success. How do I access vim_new_value and vim_test_value? Is it possible? ENC return data:  Thanks, Mark.",Can you provide the output of `salt --versions` and also a minimal configuration to demonstrate the problem? Thanks.," Then reference the 'vim_new_value' and 'vim_test_value' in a state file or template. I don't know how to reference the parameters, which was partly my question, so I'm not sure how to write that part."
saltstack/salt,https://github.com/saltstack/salt/issues/16437,saltstack_salt_issues_16437,"scp_file always fails, even if the file is actually copied successfully (2014.1 branch)

Using 2014.1.11 Master & minion are ubuntu 14.04 on EC2 Run command: `salt-cloud -p base_ec2_small --log-level debug testapp-7` When it gets time to copy the minion key, this happens: ",Can anyone verify that this is fixed in 2014.7?,"I haven't tested 2014.7, but the faulty code is gone, so I think it's safe to say that this exact bug is fixed in that branch. However, I would still support merging this fix into 2014.1.12 because: - This is a regression from 2014.1.10 - This completely breaks core functionality of salt-cloud - The saltstack PPA no longer has 2014.1.10 available, which makes downgrading difficult on ubuntu"
saltstack/salt,https://github.com/saltstack/salt/issues/31342,saltstack_salt_issues_31342,"State ""service.running"" w/ ""enable: true"" doesn't enable service

Have a formula defined for configuring `yum-cron` on EL6. After I've applied the config-mods to `/etc/sysconfig/yum-config`, I have a service.running state configured like:  This feels like a bug, but wanted to make sure I wasn't misreading the documentation.",What version of salt are you using?,The one in the current EL6 repository: 
saltstack/salt,https://github.com/saltstack/salt/issues/16589,saltstack_salt_issues_16589,"Slow response from minions

OS: centos 6.3 number of minions: 144 Salt version: 2014.7rc3 When I do a command on all minions, it takes 4-5 seconds to return. This used to be 0.8 seconds on older versions. I traced this back to payload.py:SREQ:send. The following takes between 1 - 2 seconds: polled = self.poller.poll(timeout \* 1000) This happens when the minion tries to authenticate itself just before it returns the response. Is there any more debugging that I can do to pinpoint the issue on the master side?",What version are you comparing against? Could you provide debug logs for the master/minion side for a test.ping that illustrates the slowness? Thanks!,"Against 2014.1.7. I'll post some debugging tomorrow, thx On Oct 14, 2014 5:18 PM, ""Mike Place"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/25447,saltstack_salt_issues_25447,"SaltMaster is crippled with Minion Re-Authentication 

I have been facing a problem with Salt Minions, where the minion fails to decrypt the payload on a salt master poll event; raises an exception, and then re-authenticates with the master. This has the effect that CPU usage on the saltmaster is 100% utilised as almost all the minions are periodically re-authenticating on each and every command.  Please feel free to ask for any information. This is a really big issue, making the salt system essentially useless.",Can you post your master and minion configs and also the debug logs of the master and minion when this happens?,"Hi, While looking for the data I requested, I noticed that the problem is not just that the minion that you run the command on re-auths. for every command I run on any given host, all the minions that are connected to the master do a re-auth. for example, if i run a test.ping to hostname foo Debug log on the minion: "
saltstack/salt,https://github.com/saltstack/salt/issues/27487,saltstack_salt_issues_27487,"git.latest incorrectly wants local and remote HEAD refs to match exactly

Since upgrading to saltstack 2015.8.0, the `git.latest` function is returning incorrect results when the first commit on top of a repo is not the same as the origin repo. Here is the local repo:  Commit `b4174e4` is already in the local repo, but salt thinks that it needs to be the HEAD of the repo. The HEAD of a local repo does _not_ need to be the same as the remote for it to be up to date with the remote.","Does it mean the remote repo has been fetched, or the current branch successfully rebased on the corresponding remote branch?","@jfindlay I would say yes to both. In my case, the local current branch has been successfully rebased. The error message from salt is stating that it wants commit `b4174e4`, but you can see in my commit history that `b4174e4` already is there, it's just not the HEAD"
saltstack/salt,https://github.com/saltstack/salt/issues/16698,saltstack_salt_issues_16698,"gitfs: per-remote auth params are rejected as invalid

Now I'm trying out gitfs :) I need to use per-remote auth keys, but when I put a 'pubkey' param into the gitfs config, the master logs:  In the gitfs source, I think maybe PER_REMOTE_PARAMS was intended to be a superset of AUTH_PARAMS but it isn't. This is with v2014.7.0rc3.",What version of pygit2 and libgit2 do you have installed?,This is more of a documentation / error reporting issue as discussed in #16724. Closing since the bug (as reported) is invalid. Apologies!
saltstack/salt,https://github.com/saltstack/salt/issues/16658,saltstack_salt_issues_16658,"Bug - Archive State Module - Python exception

Since upgrading to 2014.7rc3, the archive state module throw an exception. Here is my state definition: highshare_install_{{ application['version'] }}: archive.extracted: - name: /home/{{ website['name'] }}/{{ application['directory'] }} - source: salt://web/apps/highshare/files/highshare.{{ application['version'] }}.tar.gz - archive_format: tar - tar_options: xz",Could you please provide the output of that state run with debug logging enabled? Thanks!,Here is the full log: http://pastebin.com/ZRAfJXW0 The relevant part should start at line: 2172
saltstack/salt,https://github.com/saltstack/salt/issues/16709,saltstack_salt_issues_16709,"- '__reqs__' is an invalid keyword argument for 'service.mod_watch'.

Hi All, Is see this message when applying a single state, but not all the time. Seems it's related to a template (file) being updated. ---  --- I love the idea to be able to use variables in jinja templates without the need to address them in the managed file directive in my SLS files. Is Salt moving to or away from the context key,value dict concept in the SLS file? If this is a bug and there's anything else I need to provide please let me know. Regards, Gerard.",Could you provide us with a simple test case that produces this error for you? I'd like to have some context around what you're trying to do. Thanks!,"Hi @cachedout, I originally saw it on another code part, but just bumped into it again. As far as I can tell it occurs when a service definition fails to start. The definition:  The reason being, the mysql-server package installation failed.Thus no service available yet to start. I'll progress until it does run error free, and post my findings from the state before last. If that helps. Maybe similar: https://groups.google.com/forum/#!topic/salt-users/0cNe6NAnYW4 Kind regards, Gerard."
saltstack/salt,https://github.com/saltstack/salt/issues/18552,saltstack_salt_issues_18552,"Writing to text file from execution module lacks eol char \n

Hi All, I see different behaviour between a simple commandline script and a Salt execution module while execution this code snippet:  Am I missing something obvious or is this deviate behaviour? Thanx a lot. Kind regards, Gerard.",Could you provide your Salt execution module ?,"As requested. Even if I change the `\n` to `\n\n` the flags are stil glued together.  NB: Some items where obfuscated for security reasons, but this is the gist. Thanx a lot! Kind regards, Gerard."
saltstack/salt,https://github.com/saltstack/salt/issues/16740,saltstack_salt_issues_16740,"Custom modules not available through 'salt' in templates

Hey - I've written a custom salt module, that works fine and as expected through states on all hosts. I have a function within that module which generates output to be used within a jinja template, but when I attempt to call {{ salt['my_module.some_func']() }} jinja returns a dict error. Adding {{ salt }} to the bottom of the template to see what functions were available, confirmed that none of my custom module functions were present. I am using latest 2014.7 commit a06ed6d151. Have I missed some setup within my module to make it available through this interface? Cheers for the help!",Could you please paste the exact error you received? Thanks!,Hey - Sorry it looks like I was doing something wrong/being stoopid! Now that i've came back to this with fresh eyes its working. Apologies C
saltstack/salt,https://github.com/saltstack/salt/issues/16765,saltstack_salt_issues_16765,"user.list_groups on OS X 10.10 Yosemite

We've had developers wanting to use OS X Yosemite but our salt states haven't been working on that OS. The core error seems to be from the user.list_groups state. Here is the output (curious that Mavericks seems to have other problems going on but seem to be working): Yosemite $ sudo salt-call user.list_groups Function user.list_groups is not available Mavericks $ sudo salt-call user.list_groups mattwinchester [CRITICAL] Failed to load grains defined in grain file core.zmqversion in function <function zmqversion at 0x107394aa0>, error: Traceback (most recent call last): File ""/usr/local/Cellar/saltstack/2014.1.10/lib/python2.7/site-packages/salt/loader.py"", line 1034, in gen_grains ret = fun() File ""/usr/local/Cellar/saltstack/2014.1.10/lib/python2.7/site-packages/salt/grains/core.py"", line 1205, in zmqversion import zmq File ""/usr/local/Cellar/saltstack/2014.1.10/libexec/lib/python2.7/site-packages/zmq/**init**.py"", line 49, in <module> from zmq.backend import * File ""/usr/local/Cellar/saltstack/2014.1.10/libexec/lib/python2.7/site-packages/zmq/backend/**init**.py"", line 41, in <module> reraise(*exc_info) File ""/usr/local/Cellar/saltstack/2014.1.10/libexec/lib/python2.7/site-packages/zmq/backend/**init**.py"", line 29, in <module> _ns = select_backend(first) File ""/usr/local/Cellar/saltstack/2014.1.10/libexec/lib/python2.7/site-packages/zmq/backend/select.py"", line 26, in select_backend mod = __import__(name, fromlist=public_api) File ""/usr/local/Cellar/saltstack/2014.1.10/libexec/lib/python2.7/site-packages/zmq/backend/cython/**init**.py"", line 6, in <module> from . import (constants, error, message, context, ImportError: dlopen(/usr/local/Cellar/saltstack/2014.1.10/libexec/lib/python2.7/site-packages/zmq/backend/cython/constants.so, 2): Library not loaded: /usr/local/lib/libzmq.3.dylib Referenced from: /usr/local/Cellar/saltstack/2014.1.10/libexec/lib/python2.7/site-packages/zmq/backend/cython/constants.so Reason: image not found local: - admin - staff Any other info you need I will be happy to provide. Thanks for looking into this.",Can you try upgrading ZeroMQ to the latest available for OS X and see if the issue is resolved? Thanks!,"To be honest, the error under Mavericks isn't what concerns me. Mavericks still works. user.list_groups not available on Yosemite is what concerns me. Unless you're saying you think ZeroMQ is responsible for the error on Yosemite. Anytime we use `cmd.run` with `- user` we'll get this as the KeyError."
saltstack/salt,https://github.com/saltstack/salt/issues/18522,saltstack_salt_issues_18522,"When the GPG renderer is enabled on the master, the requirement is passed to the minions

So we have the GPG renderer enabled via the master config option 'renderer: jinja | yaml | gpg'. We then have cipher data in our pillar that the masters properly parse and decrypt, great feature addition! The trouble is, the GPG requirement seems to be passed to the minions, so they fail to execute highstate. If the python-gnupg package is installed, this issue is resolved. The state file that references the GPG data is only seen by the masters via conditionals in top.sls, and I've confirmed on the minion via -l debug that the state file is not being loaded. This shouldn't matter though, as if the renderer isn't available, it will just write the raw cipher data.  I've confirmed removing the gpg renderer from the master resolves the issue, so I believe this is a bug and the master is incorrectly telling the minion the renderer is required. The error is being produced here, but I'm at a loss tracing it further back: https://github.com/saltstack/salt/blob/v2014.7.0/salt/renderers/gpg.py#L133","Can you please post the output of `salt --versions-report`? I take it you're running on 2014.7.0, but this will help us debug with more certainty.","@rallytime it sounds like @paha spotted an earlier report of this issue, so we can reference that one and close this one if it's appropriate. The work around is to just specify the renderer in a shebang in the pillar file, so it's not enabled globally. I think the 3 of us are in agreement though, this is a bug, as it makes no sense to enforce the availability of the function on the minions that will never use it. Here is that versions-report for posterity though: "
saltstack/salt,https://github.com/saltstack/salt/issues/26075,saltstack_salt_issues_26075,"Options that rely on CACHE_DIR use the default in syspaths.py rather than in the conf

It appears because the configs are loading in a single operation, config options that rely on other configs options default to the ones built into the code. In this case it's the CACHE_DIR in syspaths.py. This seems to only apply to the master, as it has 2 config options that build on top of CACHE_DIR in config.py:  I think we need to force options that are the base elsewhere to be loaded first to ensure they are available. This is obviously a small issue as you can simply hardcode the 2 settings above in your conf, but it's a bit confusing. In my case we changed our cachedir, but noticed only a queues directory kept getting creating in /var/cache/salt/master on Linux.",What version of salt are you running?,Oops sorry: 
saltstack/salt,https://github.com/saltstack/salt/issues/17147,saltstack_salt_issues_17147,"Regression: state_verbose setting is not considered

The option `state_verbose: False` is ignored in Salt v2014.7.0rc7. This was not the case in v2014.7.0rc3. All green successful, unchanged states should be omitted. ![state_verbose_error](https://cloud.githubusercontent.com/assets/7572266/4902909/dcc5bf30-643c-11e4-8c29-eef8fc922ca2.png)",Could you try the released version please?,It's working again. Thank you!
saltstack/salt,https://github.com/saltstack/salt/issues/16847,saltstack_salt_issues_16847,"salt-ssh hangs on some remote hosts and does not timeout

Hi, I have a weird issue with salt-ssh where it hangs some Amazon Linux instances. On some machines I have to disable requiretty and then it works, on others requiretty is present (I also have the option set to true in the roster file). I am stuck on a couple of instances where I get no response from this command  What should I do to debug this further?",What does your roster and config look like? Is there anything in the output when you run with -l debug?,"Hi,  If we have requiretty in sudoers then in some cases this above config hangs. To get it working, I need to set requiretty to be off and comment the last line in my roster."
saltstack/salt,https://github.com/saltstack/salt/issues/18058,saltstack_salt_issues_18058,"Salt-SSH: Error when trying to run a state file that contains file.recurse

I'm getting an error when trying to run a state file that contains file.recurse. Here is the state file: ",Could you reproduce this? this looks like it might be related to the thin tarball generation issue I fixed yesterday,"@thatch45 - this is still an issue in the latest release testing. This one has sat for a while, slipped through the cracks."
saltstack/salt,https://github.com/saltstack/salt/issues/16920,saltstack_salt_issues_16920,"Support `opts` argument for git state

The git module supports an `opts` argument where you can specify arguments to be passed (e.g. `--depth=1` ). The git state doesn't support this argument though. It would be nice if it did.",Do you think you could provide some more detailed examples of what you would like to see?,"Just `--depth=1` at this time, for repos that have a big history."
saltstack/salt,https://github.com/saltstack/salt/issues/17189,saltstack_salt_issues_17189,"Minion ignores configured ID - v2014.7rc7

If the minion_id file is missing, the minion does not use the configured id, but guesses one: [DEBUG ] Guessing ID. The id can be explicitly in set /etc/salt/minion [INFO ] Found minion id from generate_minion_id(): host.domain.com This seems to happen only after a minion has been successfully started and authenticated the first time, but, for whatever reason, the minion_id file was not created. The 'id:' value is properly set in the minion configuration, so it should use this value. Manually creating the minion_id file solves the problem.","Can you show us your minion config? I wonder if there's a typo there. In any case, we'll look into this.",
saltstack/salt,https://github.com/saltstack/salt/issues/18806,saltstack_salt_issues_18806,"Stack trace when fail_function returns false and data is a dictionary

Running an orchestration with `salt.function` where that function returns a dictionary (like `cmd.run_all`) and a `fail_function` that returns `False` results in a stack trace on the minion and the master. ","what version are you running (--versions-report), can you provide the failtest state file to reproduce here?",This is on 2014.7. Here is the orchestration I'm testing: 
saltstack/salt,https://github.com/saltstack/salt/issues/56078,saltstack_salt_issues_56078,"salt-ssh fails with FreeBSD target and 'unless' requisite

### Description of Issue When using salt-ssh, with the target system running FreeBSD, state execution fails if the SLS contains an `unless` requisite. ### Setup Here is the SLS I'm using to reproduce this issue: ",Can you try 2019.2.3?,I can't reproduce this with 2019.2.3. How can I obtain a 2019.2.3 build for Fedora?
saltstack/salt,https://github.com/saltstack/salt/issues/17687,saltstack_salt_issues_17687,"No syntax checking of id in /etc/salt/minion_id 

1. Issue: can't delete psp3 key ",What is the contents of /etc/salt/pki/master/minions ? Any idea how the duplicates were created? Any details on how this environment was created would help..,1. What is the contents of /etc/salt/pki/master/minions ? [root@psp2 ~]# ls -lrt /etc/salt/pki/master/minions total 12 -rw-r--r-- 1 root root 800 Nov 11 06:17 psp2 -rw-r--r-- 1 root root 800 Nov 11 06:19 psp3?psp3 -rw-r--r-- 1 root root 800 Nov 11 15:20 psp3 [root@psp2 ~]# salt-key -L Accepted Keys: psp2 psp3 psp3 psp3 Unaccepted Keys: Rejected Keys: [root@psp2 ~]# 2. Any idea how the duplicates were created? I ran following command twice by mistake for a fresh minion installed on psp3. hostname >> /etc/salt/minion_id hostname >> /etc/salt/minion_id 1. Any details on how this environment was created would help.. centos 6.6 using following rpms. [root@psp2 ~]# rpm -qa |grep salt salt-minion-2014.7.0-3.el6.noarch salt-master-2014.7.0-3.el6.noarch salt-2014.7.0-3.el6.noarch [root@psp2 ~]#
saltstack/salt,https://github.com/saltstack/salt/issues/18134,saltstack_salt_issues_18134,"Documentation error: WARNING: unusable reference target found: TCP:4506

",Can you please provide the steps you took to get this error? Thanks.,"doc-tjy shown above is my own doc directory. you can reproduce by cd doc && make latex I went into source file(topics/development/architecture.rst) and change ""TCP: 4506"" to ""TCP-4506) to resolve the issue. Looks like the "":"" character got treated as .rst keyword."
saltstack/salt,https://github.com/saltstack/salt/issues/19697,saltstack_salt_issues_19697,"cp.is_cached is not returning result correctly

",Can you explicitly call `cache_file` and see if the result of `is_cached` changes at all? I haven't inspected that code but it could be a checksum mismatch or something.,"sorry, this is not about return code. shouldn't cp.is_cached return a Boolean of true or false ?"
saltstack/salt,https://github.com/saltstack/salt/issues/29385,saltstack_salt_issues_29385,"[salt-ssh] salt-run state.orchestrate difference in targetting

The following works fine: ",What is the result of `salt-ssh testje test.ping`?,"There is no minion 'testje', the target list is an empty string. Which works when you do it using regular salt-ssh (no minions matched), but fails when doing it over ssh. Note that I'm not in the habit of putting an empty target string in my orchestration file, this happened because of a jinja instruction (correctly) resulting in an empty list. I'm just showing it using a plain empty string since that best shows off the difference in behavior."
saltstack/salt,https://github.com/saltstack/salt/issues/17100,saltstack_salt_issues_17100,"Salt minions time out

Hi, I am running a salt-master (2014.1.13) with about 20 minions on amazon aws (a couple of them are in another datacenter). The master is at version 2014.1.13 and the minions are at versions ranging from 0.17.5 (which are running ubuntu 12.04) to 2014.1.13. The problem is that most of the time more than half of the machines time out during execution of simple command like `salt 'sensu_enabled:True' test.ping`. I attach a run of said command with `-l debug` but I can not see anything wrong with it.  Is anybody else having this issue? (also, is there a way to count how many machines have a specific pillar without relying on test.ping?) Please let me know if I can provide additional details to help diagnose this.","Does the problem persist, or does it go away as you trigger a few pings in a row?","Hi, it depends on what I'm doing. if the command is something like salt '*' test.ping then it goes away after a few pings (and comes back randomly). If the command is the one above, it persists with the same set of clients timing out. If the command is something like salt -I 'some_pillar:True' state.highstate test=true gradually they all converge (even tough sometimes this takes over 10 triggers of the same command)."
saltstack/salt,https://github.com/saltstack/salt/issues/18253,saltstack_salt_issues_18253,"salt-cloud does not delete machines

When I try to delete machines with `salt-cloud -p myprofile -d machine.name` I get  The rename does not happen at all and the delete fails. I have `salt-cloud 2014.1.13 (Hydrogen)` installed from your ppa on ubuntu 14.04",can you try salt-cloud 2014.7.0 which should be in the testing ppa to see if you get the same result?,"Updated, works now! Thank you"
saltstack/salt,https://github.com/saltstack/salt/issues/51065,saltstack_salt_issues_51065,"Feature request? A way to deal with predictable network interfaces

Many OSs come with systemd's so-called predictable network interfaces enabled by default. This makes it difficult or impossible to predict what the interface name will be at any given boot. This is especially a problem when working with servers in a remote DC where you may have remote hands changing your hardware. See https://github.com/systemd/systemd/issues/3715 for a more detailed explanation of the problem. Is there a way to deal with this problem in salt? If not, this could be considered feature request. If so, I guess it'd be a documentation request. It'd be useful to have some way to determine the correct interface names to use when applying, say, sysctl states (think `net.ipv4.conf.eth0.arp_filter` which may now be, say, `net.ipv4.conf.enp24s0f0.arp_filter`). You're supposed to be able to programmatically determine the interface name with a `lspci -d`, and I figure that results could be exposed as grain values.  which map to `enp24s0f0` and `enp24s0f1` (`0x18` is dec `24`, `:00` is `s0` and the last `0` or `1` are `f0` or `f1`, I believe). If we assume that the sorted order of the interfaces returned by `lspci` is always consistent (i.e. the first one in the sorted list is always the first interface in the computer) then I think it'd be totally possible to expose the value as a grain named something like `eth0` (heh), which would then map automatically to the correct value. With this feature, if someone added a video card their network-related rules would still work unchanged. If they added a network card they may be SOL, but that'd be something they'd need to watch out for even if they weren't using predictable network interface names. I don't know enough about the underpinnings of salt to know if this is even possible, but I'm hoping y'all have already considered it and have some ideas about a solution. (Other than disabling the ""predictable"" feature entirely, which I'm hoping to avoid if only because I don't know how long that will be possible.)",Could you determine the name using some jinja logic and then refer to that interface with `{{ interface_name }}` throughout your states?,"network.default_route is interesting -- thanks! I'll see what I can do with it. And yeah, I really, really, really don't like this feature of systemd, but I'm concerned that it's just the way of the future, so I'm going along with it. (As for how they're determined, as you say you may be able figure it out if you know the order in which the hardware is attached, but most of my work is remote-hands. Even in person, I don't know if the physical slot order will always match the order exposed to the software. I think it'd be an interesting challenge to give someone: ""here's a computer with built-in NICs. tell me exactly what the network interface names will be after this RAID adapter is installed."")"
saltstack/salt,https://github.com/saltstack/salt/issues/18593,saltstack_salt_issues_18593,"salt-master - a lot of gettimeofday

I found that when salt-master is utilizing 100% cpu then strace shows that a lof of time is used for: [pid 11271] gettimeofday({1417438130, 875611}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 875984}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 876220}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 876456}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 876705}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 876938}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 877172}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 877405}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 877638}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 878014}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 878250}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 878490}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 878752}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 879005}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 879244}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 879482}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 879860}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 880116}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 880360}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 880604}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 880862}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 881106}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 881344}, NULL) = 0 [pid 11271] gettimeofday({1417438130, 881584}, NULL) = 0 Any chances for improvment ?","Could you show the full process title of the PID making those calls? (There are several types of master processes, such as `MWorker`, `ReqServer`, etc, etc.)",How can I distinguish salt-master processes?
saltstack/salt,https://github.com/saltstack/salt/issues/19994,saltstack_salt_issues_19994,"Ext pillar refresh interval

According to log file it looks like external pillar with gitfs backend is not refreshed with the same interval as states/formulas (loop_interval) but with every minion highstate. In small deploymonents it's not a problem but with 1200+ minions it's quite big overhead. Proccess list many times contains multiple git-remote-http entries. In my opinion it should be refreshed with the same interval as gitfs states. My log file is full of: <pre> 2015-01-23 13:13:48,204 [root ][ERROR ] Unable to checkout branch master: 'git checkout origin/master' returned exit status 128: fatal: Unable to create '/var/cache/salt/master/pillar_gitfs/db7c3cf862a6464d5db742699e319e50/.git/index.lock': File exists. If no other git process is currently running, this probably means a git process crashed in this repository earlier. Make sure no other git process is running and remove the file manually to continue. 2015-01-23 13:14:48,777 [root ][ERROR ] Unable to checkout branch master: 'git checkout origin/master' returned exit status 128: fatal: Unable to create '/var/cache/salt/master/pillar_gitfs/db7c3cf862a6464d5db742699e319e50/.git/index.lock': File exists. If no other git process is currently running, this probably means a git process crashed in this repository earlier. Make sure no other git process is running and remove the file manually to continue. 2015-01-23 13:14:52,974 [root ][ERROR ] Unable to checkout branch master: 'git checkout origin/master' returned exit status 128: fatal: Unable to create '/var/cache/salt/master/pillar_gitfs/db7c3cf862a6464d5db742699e319e50/.git/index.lock': File exists. If no other git process is currently running, this probably means a git process crashed in this repository earlier. Make sure no other git process is running and remove the file manually to continue. 2015-01-23 13:14:55,080 [root ][ERROR ] Unable to checkout branch master: 'git checkout origin/master' returned exit status 128: fatal: Unable to create '/var/cache/salt/master/pillar_gitfs/db7c3cf862a6464d5db742699e319e50/.git/index.lock': File exists. </pre> My salt version is: <pre> Salt: 2014.7.0 Python: 2.6.6 (r266:84292, Jan 22 2014, 09:42:36) Jinja2: unknown M2Crypto: 0.20.2 msgpack-python: 0.1.13 msgpack-pure: Not Installed pycrypto: 2.0.1 libnacl: Not Installed PyYAML: 3.10 ioflo: Not Installed PyZMQ: 14.3.1 RAET: Not Installed ZMQ: 3.2.4 Mako: Not Installed </pre>","How will increasing the frequency of updates fix the scaling issue? `ext_pillar` is only refreshed as often as pillar is refreshed, which is usually only on state calls.",It would be nice if pillar could be defined the same way as states/formulas with gitfs and refresh with loop interval. As a workaround i've changed ext_pillar to pillar with local directory which is cloned from git by cron every 10 minutes.
saltstack/salt,https://github.com/saltstack/salt/issues/37436,saltstack_salt_issues_37436,"New grain for minions meta-data on OpenStack

It would be nice to have grains with information from http://169.254.169.254/latest/meta-data/. Openstack provides a lot of useful information about instance for example floating IP. This grains could be parsed if grain productname == ""OpenStack Nova"". If you agree that this could be usefull I could spend some time to writing it and provide pull request. I see only one disadvantage that for each key single http request to meta-data server is required.",Do you think this is a good idea to implement? Thanks,"So finally should we just check availability of 169.254.169.254? I'm wondering if is there better solution because it could bring some latency into grains generation when this address is not available or responding slowly. But on the other side short timeout to that connection could be enough. I'm not aware now about 100% sure way of determining if instance is ec2, ironic or nova instance but i could investigate that (maybe existence of cloud-init in system?)."
saltstack/salt,https://github.com/saltstack/salt/issues/50544,saltstack_salt_issues_50544,"salt-key: key deletion not working with eauth

### Description of Issue/Question When using external auth is not possible to delete the minion key. It looks that key name is not passed to `_run_cmd` function in https://github.com/saltstack/salt/blob/develop/salt/key.py#L179 ",Does that seem like a proper fix?,@DmitryKuzmenko unfortunately yours patch is not working :(
saltstack/salt,https://github.com/saltstack/salt/issues/18244,saltstack_salt_issues_18244,"Minion install ends with a stack trace

Getting a stack trace when executing a minion install on a Windows Server 2008 R2 DataCenter VM. ",How are you upgrading your minion? Did the upgrade seem to succeed?,@ jfindlay : Upgraded by uninstalling the older one and installing the new version. The minion works fine.
saltstack/salt,https://github.com/saltstack/salt/issues/21740,saltstack_salt_issues_21740,"authentication/ timeout errors with Cherry api

This looks similar to #20285 Salt api throws a timeout . It worked briefly for a while . ",Do you have concurrent requests going when you see the issue?,"@whiteinge : The difference is that there are no concurrent requests. Interestingly, I switched the Salt master to RAET transport and was able to successfully login and use the token --- on a Linux system or Cygwin. Curl on a windows , gives me an authentication error: "
saltstack/salt,https://github.com/saltstack/salt/issues/17313,saltstack_salt_issues_17313,"salt-ssh v2014.7.0-67-gf26fa79 does not work on debian wheezy when executed from debian testing/sid

salt-ssh v2014.7.0-67-gf26fa79 does not work on debian wheezy when executed from debian testing/sid. Raw commands work fine, though any python modules don't work.  The problem is python-urllib3 on debian which when copied by salt-ssh from testing/sid to wheezy is missing the ssl-match-hostname in python ssl module. Two problems lead to this bug: 1. Because salt-ssh copies python system modules not intendend to be universal between two different systems 2. debian intentionally removed the embedded copy of ssl.match_hostname from python-urllib3 (http://sources.debian.net/src/python-urllib3/1.9.1-2/debian/patches/05_do-not-use-embedded-ssl-match-hostname.patch/) (in reference to #16739 ) As things stand now i think this is an importan problem, because it means salt-ssh does not work anymore from debian testing/sid to _any_ older system missing ssl-match-hostname in python ssl module (and ubuntu may be a problem too)",Can Salt/salt-ssh avoid copying system libraries entirely and draw them from PyPI before rolling them into the thin tarball? Being distribution-agnostic is seemingly the only universal solution.,"@davidjb yes sure ;). In this case as the compatibility code was needlessly removed by Debian i just added it back into python-urllib3 on my system, though this is not a generic workaround (just in this special case easy to resolve). This dependency part and copying from one system to another and hoping it will work will always be a pain point IMHO, but it should only hurt _once_ (not for each user)! For most systems it should not be a big problem to get things working, but there are certainly some delicate special cases lurking around (though restricted by the cpython minimal requirement and thus maximum distribution age). I'm not even sure that automatically creating the bootstrap environment is really feasible for all systems, as there are definitely cases where a single bootstrap environment does not work on all salt-ssh targets. An easy solution would be the 95% solution and just try hard to make a salt-ssh bootstrap environment which works on most systems, though this solutions on it's own makes the last 5% very hard for most users if not impossible. For the last 5%, for systems where it's impossible to have the generic salt-ssh bootstrap running, it would be nice to specify a dedicated bootstrap environment in the roster. And some tooling to create custom salt-ssh bootstrap packages"
saltstack/salt,https://github.com/saltstack/salt/issues/25857,saltstack_salt_issues_25857,"[2015.5.3-2] file.recurse with lots of small files on windows minions very slow

I'm trying to sync a node application with text and binary files (images etc) to about 200 minions. The application is made up of 1159 files,282 folders and 17MB of data. My `node.sls` file contains the following,  I'm finding the initial file synchronization speed to be quite slow, about 10 minutes per minion. The copy command seems to process each file at a time. Our minions connect back to the sever over 3G, so latency might be an issue. _Lots of small half duplex data (or handshaking) over 3G will dramatically increase the processing time - each packet adding 120-300ms of latency._ If each file needs a separate command, then on initial copy without payload it would be over two minutes. (I'm sure there are additional command exchanges) **My guesstimate** _command exchange 1159 files x 120 ms the process would take 139080ms or (2.318 minutes)_ Can the minions start multiple downloads sessions to the server? Can the content be compressed into a single file, transmitted and decompressed the other side? _I saw windows zip support is still under development._ Will the system diff binary files or transfer them?","What do you think, @whiteinge and @UtahDave?","@jfindlay archived file sounds like a great solution, but I believe not currently available with windows minions #12992"
saltstack/salt,https://github.com/saltstack/salt/issues/17956,saltstack_salt_issues_17956,"Salt-minion consuming all memory and not freeing it when running twadmin

When using salt to run twadmin to generate a key when a key already exists all memory is consumed by the minion and not released even when the twadmin process is killed. When a key already exists twadmin prompts for an overwrite:  Also tested with the official version from the EPEL 5 repo 2014.1.13.",Can you provide more information on how you're running twadmin with salt? Salt execution modules do not necessarily work with interactive processes.,"I'm running it like this:  I understand that salt doesn't necessarily work with interactive processes, but I also wouldn't expect it to use up all system memory and not release it even after the twadmin process ends."
saltstack/salt,https://github.com/saltstack/salt/issues/19535,saltstack_salt_issues_19535,"Batch.py is adding duplicate entries in self.minions causing batch mode to never complete

Somehow batch mode is loading duplicates into self.minions and only the first one is being updated with a return value. This causes the batch to never finish since len(ret) never equals len(self.minions). I haven't yet investigated to the cause of the duplicate entries, but adding a unique function to pass self.minions through fixes the batch mode regardless of other issues/misconfigurations that may be present.",Can you tell us what version you're running by posting the output of `salt --versions-report`?,"Sorry, should have put that in the initial report. "
saltstack/salt,https://github.com/saltstack/salt/issues/17957,saltstack_salt_issues_17957,"salt always fails the first time after a restart

I am testing salt master and minion on the same machine. Every time I run :  will increase everytime I make a restart to master and minion.","Can you provide a `salt --versions` report? Also, salt-master/minion will take a few seconds to restart.",
saltstack/salt,https://github.com/saltstack/salt/issues/22376,saltstack_salt_issues_22376,"Syndic start event

When a minion starts there are salt/minion/*/start events. When a master-syndic starts and connects to master-of-masters, I don't see a corresponding start event, just salt/auth event which repeats periodically. I am trying to react and trigger something when a Syndic starts and connects to master-of-masters in a similar way that one can trigger something when a minion starts. I would like Salt to trigger a syndic start event.","Can you please post the output of `salt --versions-report`, please?","""super-master"" or master-of-masters: "
saltstack/salt,https://github.com/saltstack/salt/issues/18048,saltstack_salt_issues_18048,"svn fileserver backend option ""svnfs_trunk"" not recognized. 

The svn fileserver backend option ""svnfs_trunk"" not recognized. I set ""svn_trunk: HEAD"" in Master config and the System is still watching for trunk. Master Config File: ",Can you give this another try when you've had a chance to upgrade?,Hi I can confirm it works in Salt: 2014.7.0.
saltstack/salt,https://github.com/saltstack/salt/issues/18424,saltstack_salt_issues_18424,"ext_pillar svn problem / straight behavior why branches?

Hi With ext_pillar and the behavior I do not agree why does it creates this kind of url? The ""branches"" directory is not necessary in the url! Config: ",What is the use you're trying to get with salt and subversion?,"i want to use ext_pillar from SVN. My Subverion works perfect. I just not do understan where the ""braches"" folder comes from. "
saltstack/salt,https://github.com/saltstack/salt/issues/18534,saltstack_salt_issues_18534,"minion schedule highstate makes infinity loop 100% cpu allt the time

When i schedule highstate run via pillar for a minion it runs highstate and after that inifinity loop. what happen: CPU 100% ",Can you give an example of what is running during a highstate?,I will try a highstate with a smaller state set. By the way. Salt version report: 
saltstack/salt,https://github.com/saltstack/salt/issues/39105,saltstack_salt_issues_39105,"cmdmod and other modules together with the state  should have sudo support 

### Description of Issue/Question We run salt-minion as user and we need sudo access to specific commands. we need an kwarg for sudo=True like ansible can do. ### Setup ","What's your reasoning for having `salt-call` sudo internally instead of running salt-call _with_ sudo, like `sudo salt-call --local cmd.run ""yum info bash""`?","We are running 2 minions on the servers. 1 - root minion for Ops People 2- user minion for Application People Because the 2nd Minion runs with in user we need sudo rights. But not everything have to run as sudo. Just specific commands like ""yum, zypper, service, systemctl etc"". What i did now I change the cmdmod and made a sudocmdlist config in the minion config. The cmdmod module now validates the list and checks if he must use sudo or not. Better would be an kwarg which command should run with sudo. My solution.  https://github.com/bigg01/salt-sudo-wrapper/blob/master/module/README.md"
saltstack/salt,https://github.com/saltstack/salt/issues/18083,saltstack_salt_issues_18083,"salt-ssh commands are mostly broken after SaltStack update

I recently updated SaltStack and Salt-SSH on an Oracle Linux server (with the yum install commands for both). Now salt-ssh commands are mostly broken. When I run this: salt-ssh '*' test.ping I get ""retcode: 1"" and this is the most recent part of the traceback:  I therefore did this: pip install backports.ssl_match_hostname But that requirement was already satisfied. I'm using Python 2.6.6. Why won't the salt-ssh commands work now? A test.ping is very simple. The salt-ssh -r (raw shell commands) still work. It all broke after I updated the Salt Master and salt-ssh.",Will you provide the output of `salt --versions` and also tell which version of salt you were using before upgrading? Thanks.,Before the upgrade I was using Salt: 2014.1.13 After the upgrade I use Salt: 2014.7.0 
saltstack/salt,https://github.com/saltstack/salt/issues/22512,saltstack_salt_issues_22512,"gpg renderer should abort when decryption fails

Currently, in case decryption fails, the raw encrypted data is stored as pillar state as if nothing happened. Instead, it would be much better if the whole rendering process would be aborted to avoid pushing corrupt data.",Do you know if it is new behavior or if it seems to have been always like this? Thanks.,"I think it has always been like this and looking at the code in develop, this is still the case. There is even a comment there that this is the case: - https://github.com/saltstack/salt/blob/develop/salt/renderers/gpg.py#L118 But I think that this is bad as it may cause corruption of configuration when a whole multiline ciphertext block is included in the place where for example a single value (when decrypted) is expected. So IMO it would be better if the renderer would just raise an error that decryption has failed."
saltstack/salt,https://github.com/saltstack/salt/issues/20093,saltstack_salt_issues_20093,"Git pull via Salt is very slow

Hi, We are experiencing some issues with git on Windows machines. The problem is that the ""git pull""-command is executed very slowly. I'm not sure if this is a Salt issue, Git issue or a Windows issue. Example  We have tried with: Git versions: Git-1.9.5-preview20141217 Git-1.9.2-preview20140411 Windows OS: Windows Server 2012 Windows 2008 R2 Standard Salt Minion versions: 2014.7.1 2014.7.0 Salt Master versions: 2014.7.0 2014.1.13 Any ideas? Have I done something stupid (it has happened before!)? I tried to search for similiar issues but didn't find anything. Thanks in advance //Daniel","Does `git fetch` have the same problem? What about `git rebase`, and `git pull --rebase`?",Hello @jfindlay and thanks for the answer.  Same issue with the last two. They work fine when I'm running them on Windows in cmd. /Daniel
saltstack/salt,https://github.com/saltstack/salt/issues/18152,saltstack_salt_issues_18152,"sqlite3 module does not commit writes to database

https://github.com/saltstack/salt/blob/develop/salt/modules/sqlite3.py sqlite3 module does not commit changes after 'INSERT' call hard fix: call 'con.commit()' after function: modify easy fix: line 26 change to: con = sqlite3.connect(db, **isolation_level=None**) from: con = sqlite3.connect(db) to reproduce:  Run without modification to sqlite3.py entry 1 is not created. After modification database file is updated correctly.",What modification did you make? Are you planning a pull request?,"Hi guys, I've sent a pull request. Sorry if I've done it horribly wrong, it's my first interaction with github."
saltstack/salt,https://github.com/saltstack/salt/issues/34510,saltstack_salt_issues_34510,"ps.top: psutils.cpu_times() return changed

psutils package changed return tuple adding two more values leading to exception for packages versions >=4.1.0 Return a (user, system, children_user, children_system) namedtuple psutils.cpu_times() Changed in version 4.1.0: return two extra fields: children_user and children_system. ### Setup salt/modules/ps.py File ""/usr/lib/python2.6/site-packages/salt/modules/ps.py"", line 132, in top user, system = process.cpu_times() ValueError: too many values to unpack ### Steps to Reproduce Issue salt-call ps.top ### Versions Report I checked this line in develop branch and it still unpacks into two values",Would you mind giving that fix a try?,"yes, obviously the fix will work. I was trying to find the ticket to avoid creating duplicate. Sorry."
saltstack/salt,https://github.com/saltstack/salt/issues/20307,saltstack_salt_issues_20307,"unless and onlyif should run salt execution modules

Obviously this can be worked around by using  The existing functionality of executing shell commands should be done by using `- onlyif cmd.run`",How could Salt determine whether an execution was (not) successful?,"Definitely a more complicated issue than I realized when suggesting this. My intention was always to use this with modules that return boolean, like file.file_exists, pkg.upgrade_available and cmd.has_exec. I think it'd be okay to throw an error if a module doesn't return boolean. But another option could be to catch any errors and return false, and otherwise cast the return code to boolean and return, which in most cases would be true. Of course now I realize that cmd.run doesn't return a boolean, so I guess to replace existing functionality there needs to be a cmd.test that returns a boolean based on the return code. I think creating more test functions in modules is okay though. The main reason I submitted this is because if I have to write a test to determine when a state should run, I'd rather be writing that test in python than bash."
saltstack/salt,https://github.com/saltstack/salt/issues/28770,saltstack_salt_issues_28770,"scheduled item does not run until minion is restarted

After adding or changing a scheduled item using [schedule.present](https://docs.saltstack.com/en/latest/ref/states/all/salt.states.schedule.html#salt.states.schedule.present) the schedule does not run until the minion is restarted. Running [schedule.reload](https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.schedule.html#salt.modules.schedule.reload) has no effect.",What version of salt are you using?,
saltstack/salt,https://github.com/saltstack/salt/issues/32966,saltstack_salt_issues_32966,"ZFS names are converted to lower case.

@sjorge ZFS dataset names are converted to lower case by `name = name.lower()` throughout [states/zfs.py](https://github.com/saltstack/salt/blob/develop/salt/states/zfs.py). On FreeBSD zfs datasets are case sensitive which leads to problematic behavior when datasets are created as lower case.",Does @sjorge's change fix the issue?,Yes.
saltstack/salt,https://github.com/saltstack/salt/issues/18304,saltstack_salt_issues_18304,"Problem with API job lookup in 2014.7

I think I've got a problem with 2014.7's API. Submitting a job to /minions, then looking up the returned jid from /job/JID throws a http 500 error. These same commands appear to work properly on 2014.1.10. ###### LOGIN ",Will you add '@runner' to your eauth config as described below to see that resolves the traceback? http://docs.saltstack.com/en/latest/topics/eauth/index.html,"Excellent! Adding '@runner' does fix that query. That might be something to add to the release notes, as this is a change for currently working 2014.1.\* setups and it was not obvious what was needed. Thanks much!"
saltstack/salt,https://github.com/saltstack/salt/issues/30864,saltstack_salt_issues_30864,"lxc runner returns UnboundLocalError: local variable 'saved_kwargs' referenced before assignment

Just started testing the lxc runner. On invocation I get: ",What version of salt are you using?,Whoops! Sorry about that. Here you are: 
saltstack/salt,https://github.com/saltstack/salt/issues/30900,saltstack_salt_issues_30900,"modules/qemu_nbd.py assumes versions of utilities that don't exist on ubuntu

In testing virt.init with kvm on 2015.8.3 (Beryllium), I ran into a situation where the kvm host never returned. The minion log showed a constant loop of:  I was able to quickly hack in the use of `sfdisk -d` in order to get nbd detection going, but don't know if that's a universal solution.",What does your hack look like?,Just replaced the cfdisk command with `sfdisk -d` Another alternative is to use `parted` but that may not be available everywhere either.
saltstack/salt,https://github.com/saltstack/salt/issues/32497,saltstack_salt_issues_32497,"local_subset from salt-api seems to not actually subset in 2016.3.0_rc2 

### Description of Issue/Question I noticed while testing 2016.0_rc2 that the salt command works as expected: ",Do you know if this has worked in any previous versions?,"@jfindlay I believe the subset function is a new feature first released in 2016.3 ( [salt doc only shows the local_subset funtion in development release](https://docs.saltstack.com/en/develop/topics/netapi/#salt.netapi.NetapiClient.local_subset)), so I don't have anything to compare it to. According to the [google groups discussion](https://groups.google.com/forum/#!topic/salt-users/3JH5U1SD294) about the feature, it should work with the salt-api."
saltstack/salt,https://github.com/saltstack/salt/issues/18315,saltstack_salt_issues_18315,"salt-cloud fails for ec2 for query without params

I am getting the following error when trying to create a new instance with salt-cloud (2014.7.0):  A quick look at `_toggle_delvol` showed that `query` is called without the parameter `params` in `_toggle_delvol`'s return statement. Then, `params` is used in `query` without a check whether it is `None`.","Can you also state what distro you are running this on and how your installed, please?","We're using `Ubuntu 14.04.1 LTS`, `salt-cloud` was installed via `apt`: "
saltstack/salt,https://github.com/saltstack/salt/issues/24556,saltstack_salt_issues_24556,"gpg encoded invalid password crashing yaml

The gpg encoded literal block is converted to a non-literal one on decoding, causing some passwords to crash the server. The GPG encoded passwordcontained the {} ' "" chars. When salt gpg decodes the data then this happens. Given a properly encoded input like this: ",Did you try a YAML literal block?,I have updated my bug description to be more clear @diginc
saltstack/salt,https://github.com/saltstack/salt/issues/25803,saltstack_salt_issues_25803,"artifactory error reporting lacking

If the hostname cannot be resolved ",What is the output of `salt --versions-report`?,original/develop commit b3bed2d5d232710d80f218f28b69f52713f68be9 Merge: 6ebc61b 1010eef Author: original/developJustin Findlay jfindlay@gmail.com Date: Mon Jul 27 13:34:56 2015 -0600
saltstack/salt,https://github.com/saltstack/salt/issues/18423,saltstack_salt_issues_18423,"Bad docs for salt-cloud's digitalocean config

http://docs.saltstack.com/en/latest/topics/cloud/config.html#digitalocean Here it says that in the new configuration you should use `personal_access_token: xxx`, but the code requires for a key called `api_key` Furthermore, in DO the tokens ARE called ""Personal Access Token"", and adding a generated one as the `api_key` Also, it seems like the DO interface has changed somewhat since the docs were written, I don't know if I have to register access for a new API, and what's the OAuth server, or how to set it up if that's the new way...",What version are you using?,`2014.1.7` latest for the saltstack ppa
saltstack/salt,https://github.com/saltstack/salt/issues/18425,saltstack_salt_issues_18425,"use salt-ssh to install the salt-minion for client server in batch

backgroup: I trying to use salt-ssh to install the salt-minion for client server in batch.  isn't cause by python?","What does 'salt-ssh --versions' tell you, and what distribution are you running?",@cro [root@localhost .ssh]#salt --version salt 2014.7.0 (Helium)
saltstack/salt,https://github.com/saltstack/salt/issues/18429,saltstack_salt_issues_18429,"Pillars passed from command-line override pillar subtrees instead of merging

assuming a pillar containing:  which should be using Pillar.merge_sources() instead, in order to apply the pillar merge policy","However, I'm confused by this line: ""pillar values passed from the command line can't be referenced in pillar files"" -- could you clarify?","@basepi Well, now that you're asking the question I can see what you mean, but it was a mix of what I needed, wishful thinking and a curtain lack of clarity regarding what's available where. I'm not sure whether it's officially supported but I started using pillars in orchestration sls files, and the pillars ended up becoming a very useful, quite elaborate hierarchy. (A common theme I've noticed in a lot of formulas.) Some values in that hierarchy were only defaults meant to be override-able, essentially arguments for the orchestration runs. However I left the details for later being sure that wouldn't be a problem, having noticed the pillar argument to salt-run. With time some pillar values became dependent on other pillar values, so no problem, right? jinja imports to the rescue... At that point I made the wrong assumption that I'd be able to override those key pillars, which is where your question comes in - I can only see overridden pillars in states, but now I have a problem - they should all be separately override-able values, but I have to put some of them in state templates. It was even worse, because of the above bug I couldn't put any override-able values in the hierarchy, creating more such key pillars. The bottom line is [it's been emotional](https://www.google.com/search?q=youtube+it+been+emotional) since there are too many contexts (CLI, runners/orchestration, pillars, states...) that influence each other and no way to know what's available vs actually supposed to be available (aka supported) in each, and just as important where and by what way they're coming from. I remember seeing a related bug/feature request, and I also remember it's been just hanging there for quite a while."
saltstack/salt,https://github.com/saltstack/salt/issues/18476,saltstack_salt_issues_18476,"Upgrading salt on my master caused dependency issues

I don't know exactly where to report this or put it, but we can go from here. System: Ubuntu 14.04 PPA: Saltstack and Chris-Lea/zeromq I did a normal upgrade and upgraded my saltstack via apt-get. The upgrade went okay, but I was unable to run salt commands correctly. It kept on throwing issues because it could not find the correct zmq. pyzmq was installed correctly. I found out the version was incorrect. I had to back out my pyzmq package from Ubuntu and push in the correct package from pypi. I would consider this a low issue as there are workarounds.",What version of pyzmq did you have before? We should not hard dep on a new pyzmq...,"I don't know what version of pyzmq I had before. I just did an apt-get upgrade and it broke salt. I just did some troubleshooting and it seemed that my version of pyzmq was too ""new"" ~Jonathan C. On Tue, Nov 25, 2014 at 10:07 AM, Thomas S Hatch notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/19450,saltstack_salt_issues_19450,"documentation: topics/cloud/config

The bits involving migration from the old config expression needs to be turned into its own document or at least its own section. The way this doc is organized makes it very difficult to read if the reader is not already familiar with the (old) salt-cloud config. Confuses mutch. Clarifies nothing.",What specific questions do you have about salt-cloud configuration?,"Hey there. The attached version of doc/topics/cloud/config.rst is an example. I made modifications down to the section covering Linode (I'd love to rewrite the whole thing, but I'm still pretty new to salt-cloud and am a bit short on time at the moment) -S On Wed, Jan 7, 2015 at 10:23 AM, jfindlay notifications@github.com wrote: ## You know, I used to think it was awful that life was so unfair. Then I thought, wouldn't it be much worse if life were fair, and all the terrible things that happen to us come because we actually deserve them? So, now I take great comfort in the general hostility and unfairness of the universe."
saltstack/salt,https://github.com/saltstack/salt/issues/31227,saltstack_salt_issues_31227,"Short, gentle rant

 I just spent a week (7-days) putting together a set of [Sentry](http://getsentry.com) states. It works perfectly. It is integrated perfectly with the Rest of The Things (iptables rules, configures correctly with local or remote databases/caches, signed tls keys, etc) I just got rid of the last (innocuously) failing state (Green is Good! :grinning: ) If I specify the right minion_id, I can kick off salt-cloud, walk away for 20 minutes and when I come back, I've got a perfectly working Sentry environment... that I have absolutely no use for. I started working on this because of some issues I've run into with the 2015.8 releases, one of which caused the disk on the salt-master to fill up (logs) which caused various problems on our minion hosts. ""Sentry! I've fiddled with that! And there's already Things that make Saltstack work with it!, WHEEE!"" --- Today I find out the sad truth that the thing is pretty much broken for my purposes. Maybe I didn't understand what `log_handlers` are supposed to be used for (not handling things on the salt-master??) I started out with the latest `raven` client--found the posts wrt to needing to downgrade it for the time being. I wish I had time to Just Fix It. I understand that OSS projects are like little kids and old dogs--there always seems to be something wrong with them, right? But the nature of a lot of these modules is that they require services that require time/resource investment to set up--they've got their own proclivities--their own bugs, api-breaking changes, etc. Most of these (salt) module types are not nearly as a complex as the services they are designed to interface with, so a responsible, (non-bitchy, non-enterprise) user of saltstack is going to spend a bit of time making sure the complicated thing (elasticsearch, logstash, sentry, etc) is _also_ configured properly before assuming that the salt module is not working correctly. Anyway, you guys do a great job. You are very forthcoming with letting folks know when a module has rotted or is non-functional when asked on the list or through an issue. Unfortunately, this knowledge does not percolate down (up?) to the documentation and sometimes an issue just gets old, goes uncommented upon and then closed without an actual fix. Blah. Ok. I'm done. Thank you for reading :smile:",Do you have any examples of this happening?,"Thanks for your reply, @jfindlay. Not off the top of my head. It may indeed be that the issues that I am remembering were blocked awaiting more data from the OP. I'll give you a heads-up if I spot something like that (I sometimes peruse closed issues looking for info) With regards to your previous response, I've got a pretty good handle (what I think of) as the outter-layer modules as to the master/minion functionality split. Most of the time, at that layer, it is reasonably obvious as to whether or not a module/function is meant for minion-only or master-only use. runner/wheel/pillar/tops -> master execution/util -> mix states/grains -> minion I think where the fog sets in, for me anyway, is in that middle-layer--returners and log handlers come to mind. I guess I assumed that the salt-master environment would be a first-tier customer for these kinds of modules--I find execution, grains and state modules to be (relatively) brain-dead simple to debug since they are running in a fairly low-concurrency environment; however, the salt-master, being extremely concurrent and touching All the Things is a bit tricker. I'm hoping to have a block of time in the next couple months to revisit the log handler code--maybe bring it into line with both the minion and master environments (would sure be a useful thing to have!) Anyway, thanks again."
saltstack/salt,https://github.com/saltstack/salt/issues/20185,saltstack_salt_issues_20185,"master stuck as 2014.7.0

crazy thing, updated the master first and the minions but the master calls himself as 2014.7.0 and not as 2014.7.1 ",What distro are you running this on?,"upgrade via aptitude full-upgrade and 14.04 as distro, same bug on a minion with 14.04 and pkg.install salt-minion"
saltstack/salt,https://github.com/saltstack/salt/issues/25057,saltstack_salt_issues_25057,"Windows minion downloads are not updated when new releases are made

How is a build of the newer installer of the windows salt-minion triggered? @UtahDave It seems strange to me, that there is still no 2015.5.1 or 2015.5.2 windows salt minion installer posted?",Where are you looking for them? http://docs.saltstack.com/downloads/,"Loren, Short version, I end up at the http://docs.saltstack.com/en/latest/topics/installation/windows.html http://docs.saltstack.com/en/latest/topics/installation/windows.html doc link and it only goes up to 2015-5.0-2 version. Hence my issue I raised. Long version, well my steps are usually. 1. www.saltstack.com http://www.saltstack.com/ click on community on top right. That get’s me to 2. http://saltstack.com/community/ http://saltstack.com/community/ once there I choose ‘Learn salt’ and click on the ‘Documentation’ link in middle column. which gets me to 3. http://docs.saltstack.com/en/latest/ http://docs.saltstack.com/en/latest/ where I click on the ‘Installation’ hyperlink under the ‘Download’ section. Which get’s me to the Installation section 4. http://docs.saltstack.com/en/latest/topics/installation/index.html http://docs.saltstack.com/en/latest/topics/installation/index.html where I click on ‘Windows’ and this gets me to 5. http://docs.saltstack.com/en/latest/topics/installation/windows.html http://docs.saltstack.com/en/latest/topics/installation/windows.html which stops at the 2015.5.0-2 http://docs.saltstack.com/downloads/Salt-Minion-2015.5.0-2-x86-Setup.exe versions. ;-) OK, I will get busy doing/updating the windows winner sls files for the updated x86 and AMD64 versions of the newer salt minions. BTW do you happen to know who one would speak to about saltstack adding the building of the new or updated minion windows winrepo sls files to the build or release process? @UtahDave"
saltstack/salt,https://github.com/saltstack/salt/issues/26926,saltstack_salt_issues_26926,"pls publish latest 2015.8.0rc5 windows salt minion installer in 'repo.saltstack.com/windows'

The 2015.8.0rc4 is already there, but for final testing the 2015.8.0rc5 should really also be added if possible. Thanks.","What do you think, @TheBigBear?","@jfindlay sure works for me too. ;-) I was simply trying to keep the salt winrepo and winrepo-ng salt-minion sls files updated with the official releases in the git repso, but I guess some RCs don't make sense to be published there, and it looks to me like there is only two commits or so between RC4 and RC5, should have checked these details."
saltstack/salt,https://github.com/saltstack/salt/issues/27082,saltstack_salt_issues_27082,"winrepo: wmi_provider/init.sls Error: Jinja variable 'dict' object has no attribute 'os'

When I run a `salt-run winrepo.genrepo` I get three lines of error before any of the expected output:  @UtahDave ^^ is that ""old"" 'wmi_provider/init.sls', needing another look, now that we have jinja2 templating support in winrepo?","Does this error prevent genrepo from working? Also, on what version of salt do you see this?","@jfindlay, no it doesn't stop genrepo, but we have not had jinja2 templating so this code has not been tried to be run for months. and now that we have jinja2 templating the old jinja2 code may need a spruce up to actually start working - if it is indeed still needed? This is on 2015.8.0"
saltstack/salt,https://github.com/saltstack/salt/issues/27220,saltstack_salt_issues_27220,"[ERROR   ] Exception 'close_fds is not supported on Windows platforms if you redirect stdin/stdout/stderr' 

@terminalmage hi Erik, sorry just ran into anohter glitch on a 2015.8 standalone masterless windows salt-minion. When trying to run `salt-call --local winrepo.update_git_repos` it gives me the following error: ",Shouldn't the `--local` be enough?,"@twangboy, OK, I recked my brain as to what might be different as I definitly am still getting this. And I have found a way to replicate it. My windows minion already has 'pygit2' support in it. and with pygit2 support it does give me this error message, I guess using pygit2 uses some IO redirection under windows which does not support ""close_fds"". The easiest way to add pygit2 support is, taking it from a ready made python wheel from Christoph Gohlke's famous python wheel site at http://www.lfd.uci.edu/~gohlke/pythonlibs/ (to get the pygit2 one got to http://www.lfd.uci.edu/~gohlke/pythonlibs/#pygit2 and choose the correct bitness of the python 27 one) then run the pip.exe that comes with the windows salt minion to install it. (in my case it is) `C:\salt\bin\Scripts\pip.exe install \Users\sysadmin.uk\Downloads\pygit2-0.21.3-cp27-none-win_amd64.whl` and to verify that it installed correctly `salt-call --versions` and double check that pygit2 shows version 0.21.3. I think @terminalmage (Erik), might be quite familiar with this part of the code and possibly know how to best navigate this? He did say that pygit2 under windows should be considered a 'experimental' feature in Berryllium, and he was right. ;-)"
saltstack/salt,https://github.com/saltstack/salt/issues/27433,saltstack_salt_issues_27433,"winrepo - drops ""trailing zeroes"" from version numbers on un-install?

This is pretty new regression, this used to work, i think. The version number is '5.10' on on install it does get recognized as such, but on un-install it tries un-installing '5.1 instead, which is not installed and version '5.10' stays on the computer. ",What version of salt are you using?,@jfindlay the latest released windows minion 2015.8-3 and the latest released salt master 2015.8.0 on centos 7 
saltstack/salt,https://github.com/saltstack/salt/issues/29627,saltstack_salt_issues_29627,"new error since upgrading to 2015.8.3 - [ERROR   ] Exception raised when processing __virtual__ function for nova. Module will not be loaded global name 'novaclient' is not defined

on all winrepo-ng installs I now get the following error since I upgraded to 2015.8.3 ",Would you mind posting your findings there as well?,"Sure, sorry I didn't notice that one first."
saltstack/salt,https://github.com/saltstack/salt/issues/40947,saltstack_salt_issues_40947,"win_pkg: 2016.11.4 regression - not loading tls module ???

### Description of Issue/Question ### Setup 2016.11.4 master on centos 6 and 2016.11.4 minion on win 10 x64 ### Steps to Reproduce Issue ",What version did you upgrade from? I'll try from a fresh windows install.,"@twangboy sorry didn't see your question earlier. This one was quite an old install on my CFOs machine. So I can't easily get it back for further testing, sorry. But at a quick glance it looks as if this upgrade was straight from a 2015.8.10 amd64 install."
saltstack/salt,https://github.com/saltstack/salt/issues/18551,saltstack_salt_issues_18551,"(helium) salt-master worker threads slowly ramp up to consuming 100% cpu

Since I upgraded to Helium, the worker threads slowly ramp up their cpu usage from close to 0% at the start of the days to close to 100% at midday. restarting the master restarts that cycle. Here is the average cpu usage for my virtualized salt master. the sharp increase in usage corresponds to the upgrade: ![cpu1](https://cloud.githubusercontent.com/assets/966422/5217591/b87a2d6a-7642-11e4-8994-6456a9ebf5ca.png) I tried to double the resources (8cores, 8G ram, 8 worker threads), and here are the results before (yesterday) and after (today): ![cpu2](https://cloud.githubusercontent.com/assets/966422/5217610/129dea84-7643-11e4-90ec-401b00acf763.png) Memory usage is also ramping up: ![mem1](https://cloud.githubusercontent.com/assets/966422/5217611/1fcb2faa-7643-11e4-8ca2-fb1fe75c81bd.png) ![mem2](https://cloud.githubusercontent.com/assets/966422/5217612/2657162c-7643-11e4-9b6c-a9a3f3afa8f9.png) Here is the versions report:  How can I help track down the problem? It is making salt unusable :-(","Could we see a (sanitized) copy of your master config, please?","There's really not much to see, but here you go: /etc/salt/master.d/master.conf "
saltstack/salt,https://github.com/saltstack/salt/issues/18566,saltstack_salt_issues_18566,"/modules/boto_asg.py missing if

Default code is: ",Can you also post the output of `salt --versions-report`?,"I've tried to run this: salt-call boto_asg.exists nodejs_0.5.0 region=ap-northeast-1 There was no such ASG in the region but salt returned True. I've added ""if"" to boto_asg.py , now it works fine The problem is that conn.get_all_groups(names=[name]) returns an array and if this array is empty (if there is no ASG in the region), will not raise the error so it will return True. "
saltstack/salt,https://github.com/saltstack/salt/issues/20546,saltstack_salt_issues_20546,"Safeguarding for change execution in production environments

Using saltstack with mission-critical production environments can be potentionally very dangerous - as simple human mistake can easily render your complex environment into non-desired (and non-working) state. And for complex systems reverting the state can be non-trivial and can take some (down)time. Consider simple scenarios where you have similar environments - like testing / staging / production - and you make simple human mistake by executing state in the wrong environment or you just miss test=True for getting changes overview first - and trigger unwanted execution. Both use cases have been taken from practical experiences using saltstack with complex mission-critical production systems. Result: we had to ban saltstack management from production environments - until there will be some simple safeguarding mechanism. Our proposal to solve this would be: - to be able to specify optional safeguards or safeguard hooks per environment - safeguard option 1: force execution of states with test=True set by default - making changes to system explicit - safeguard option 2: force execution of (high)state/orchestration without test=True explicit - by asking interactive confirmation - safeguard option 3: combine options 1 and 2 into single process - ie force first state run with test=True for change overview - and then ask confirmation BEFORE executing the change itself I think these simple measures would safeguard against most common human mistakes (especially when doing copy-paste with CLI commands).",Does that serve your purposes?,"""test: True"" in salt-master config will take care the main issue here - yes. I think everything else (like safeguarding against accidental environment change or enforcing some particular change process) we can currently implement outside of salt."
saltstack/salt,https://github.com/saltstack/salt/issues/18602,saltstack_salt_issues_18602,"ImportError: No module named packages

Hello, I'm running two salt masters, both of them using Helium 2014.7.0-03 and python 2.6.6-52. After a restart, one of them started producing this error whenever issuing a salt command. The salt master and minion will no longer start, either:  Both machines are running Centos 6.6",Can you tell us about how you installed salt on the failed hosts?,Using yum: 
saltstack/salt,https://github.com/saltstack/salt/issues/43017,saltstack_salt_issues_43017,"wheel.key.accept reactor broken in 2017.7.1

### Description of Issue/Question I have a reactor that is used to auto accept minions with specific public keys that is working well using salt 2017.7.0. In 2017.7.1 I am seeing an exception about accept in the event log: ","Can you double check that? Thanks, Daniel","Thanks Daniel, that seems to have fixed the issue. Sorry for the trouble."
saltstack/salt,https://github.com/saltstack/salt/issues/30969,saltstack_salt_issues_30969,"salt crash when progressbar used in conjunction with --batch

command `sudo salt \* pkg.install salt-minion -p -b 3 refresh=True` fails hard: ",What version of salt are you using? `salt versions-report`,
saltstack/salt,https://github.com/saltstack/salt/issues/18645,saltstack_salt_issues_18645,"Salt-Cloud no longer provisioning

After updating Salt, salt-cloud was deleted, and is no longer working. I reinstalled salt-cloud, however I'm not able to manually provision a server now. We use AWS if you can't tell from the output :p ",Which distro are you running on? And which version of salt were you running before you upgraded?,"Centos 6.5 I can't be sure to be honest, I believe 2014.1.0"
saltstack/salt,https://github.com/saltstack/salt/issues/24750,saltstack_salt_issues_24750,"LocalClient fails to initialize with python3

I have the latest stable of Salt currently, along with the 2015.5.2 version of salt installed via pip. When initializing LocalClient(), an exception is thrown and I'm not sure what the correct fix is:  I could probably try casting cmd1 and cmd2 via network.py, but I did want to raise this issue before I mess with it, as I'd be at best guessing. Thanks for any help you can provide.","Do I have that correct, @msteed?","Thank you for the feedback @rallytime, I overlooked that."
saltstack/salt,https://github.com/saltstack/salt/issues/18719,saltstack_salt_issues_18719,"2014.7 : __opt__['files_root'] overwritten by pillar_roots value

I have random faillures with commands like cp.hash_files. eg :  In fileservers.root module, find_file it uses the global value **opt**['files_root'] which points to /srv/salt/mutu, but sometimes it's set to /srv/pillar/mutu",what version are you running (salt-call --versions-report)? Anything in the log files that may help when this occurs (/var/log/salt/*) or details of the failure?,"Nothing in the logs, I had to add debugging lines in order to find the cause of the issue. "
saltstack/salt,https://github.com/saltstack/salt/issues/18742,saltstack_salt_issues_18742,"Bug in salt-maser (salt 2014.7.0 (Helium))

Hi, I find a strange bug, when i use salt -G ""id:*"" the output is: Traceback (most recent call last): File ""/usr/bin/salt"", line 10, in <module> salt_main() File ""/usr/lib/python2.7/dist-packages/salt/scripts.py"", line 240, in salt_main client.run() File ""/usr/lib/python2.7/dist-packages/salt/cli/**init**.py"", line 189, in run self._output_ret(ret_, out) File ""/usr/lib/python2.7/dist-packages/salt/cli/**init**.py"", line 243, in _output_ret salt.output.display_output(ret, out, self.config) File ""/usr/lib/python2.7/dist-packages/salt/output/__init__.py"", line 44, in display_output display_data = get_printout(out, opts)(data).rstrip() File ""/usr/lib/python2.7/dist-packages/salt/output/highstate.py"", line 74, in output return _format_host(host, hostdata)[0] File ""/usr/lib/python2.7/dist-packages/salt/output/highstate.py"", line 94, in _format_host .format(hcolor, err, colors))) UnicodeDecodeError: 'ascii' codec can't decode byte 0xc4 in position 141: ordinal not in range(128) Can someone help me?","What OS are you running on? What is the provider of the OS: cloud, local (vmware, vagrant, etc)?",OS: Linux 3.2.0-4-amd64 #1 SMP Debian 3.2.60-1+deb7u3 x86_64 GNU/Linux. This is a local machine.
saltstack/salt,https://github.com/saltstack/salt/issues/19818,saltstack_salt_issues_19818,"file.managed state introduces variable {{ user }} into context

When using  A simple test for `user is defined` in the source file returns `true`. I added a unit test in `tests/unit/templates/jinja_test.py` to recreate the issue, but at the `jinja_test.py` level, user is truly undefined. I tried creating a states.file test or a modules.file test but was unable to properly setup the SaltFile Cache etc. I created a test repo that demonstrates the issue https://github.com/pykler/salt-jinja-test Also here is the unit test that shows that the basic jinja rendering works fine https://github.com/LeadSift/salt/commit/5e32a38100229315f0e1eabfd5fefd441413bb1f",What version are you seeing this in (--versions-report)? Do you have a reference version where the functionality was different?,"The test repo has the commit hash in the requirements.txt, here is what I get for the `--versions-report` "
saltstack/salt,https://github.com/saltstack/salt/issues/18800,saltstack_salt_issues_18800,"Windows minion fail on ""state.highstate"" config issue?

I'm new to using SALT, but so far have a working environment in Linux, now trying to demo in windows... Here is my scenario, I want to push out our standard software packages, and add certain registry settings... I want to know when they change and have the ""auto heal"" so to speak. I have this working in Linux, here are my config files and one package for our windows - zabbix agent(s). Im just wondering what i am doing wrong, and if someone can point me in the right direction. MINION:  Any help or guidance is greatly appreciated! i do love the product, and have had great success considering I have never used it and find it much easier than CHEF or Puppet Thanks, Mark",Could you please restate what the problem is and what you think should be happening? Thanks.,"The minion is Windows 2008 R2. The issue is when we do a:  The items that show failed are packages with a ""space"" in the name that is returned. I have tried renaming them in my init.sls files, but they still seem to fail. Mow 7zip and Notepad++ work fine... Just curious how to get around this or have I misconfigured something?"
saltstack/salt,https://github.com/saltstack/salt/issues/26633,saltstack_salt_issues_26633,"Unicode in file.serialize

Hi, I have some unicode in pillar, that I wan't to push into a json file with file.serialize. It seems to me that the data is passed fin through pillar:  Which looks to me like a double escape.",What version of salt are you using and what is the sanitized output of `salt-call grains.items`? Thanks. @s0undt3ch,"@jfindlay I didn't apply the workarround, because i am actually marschalling a whole arbitrary deep nested data structure stored in pillar into json. (btw. @nidico is a coworker of mine)"
saltstack/salt,https://github.com/saltstack/salt/issues/27662,saltstack_salt_issues_27662,"LXC init does not pass template param to lxc-create

Creating a new lxc instance via salt-cloud fails, probably because the `-t templatename` parameter is missing. Output:  Configuration and a vagrant setup to reproduce the issue can be found in this repo: https://github.com/martinhoefling/molten - The configuration (master / cloud profiles, ...) are in [./vagrant/salt](https://github.com/martinhoefling/molten/tree/master/vagrant/salt) - Run vagrant up dev-cloud in the repo (this creates a single instance with salt master / minion / lxc installed and configured) - `vagrant ssh dev-cloud`, `sudo bash`, `salt-cloud -p ubuntu-lxc test` If I run `lxc-create -t ubuntu -n test -B dir` everything works fine. Without `-t ubuntu`, I get the same output as in the salt init job.",Could you please try with these settings? Do let me know how it goes!,"Hmm, my profile now looks like this:  However, this should be supported by lxc as documented here: https://github.com/lxc/lxc/blob/master/templates/lxc-download.in Anyhow, this problem probably is not related to salt."
saltstack/salt,https://github.com/saltstack/salt/issues/34678,saltstack_salt_issues_34678,"config.get module is broken due to bug in dictupdate.py

### Description of Issue The line in question is https://github.com/saltstack/salt/blob/develop/salt/utils/dictupdate.py#L61 When using `merge=recurse`, e.g.  the pillar is not merged due to a problem with the above line. The `__pillar__` is not an ordinary dict but a `NamespacedDictWrapper` and thus the `update` does nothing. As a result, the pillar information is not in the merged `data` structure in https://github.com/saltstack/salt/blob/develop/salt/modules/config.py#L364 Further this affects `lxc.get_container_profile` module, where it is not sure why `recursive` merge strategy was selected. I could not find any other hardcoded usages of the `recursive` merge strategy, so maybe that one should be removed, too. ### Steps to Reproduce Issue Store some data in pillar and try config.get with merge=recurse use pdb around line https://github.com/saltstack/salt/blob/develop/salt/utils/dictupdate.py#L61 ### Versions Report current stable version, probably also develop since the problematic code has not changed. ### Suggested fix: Iterate over keys instead of `update` in https://github.com/saltstack/salt/blob/develop/salt/utils/dictupdate.py#L61",Did you want to submit a PR for this?,PR #34726 with suggested update added. Please backport to 2016.3 and 2015.8.
saltstack/salt,https://github.com/saltstack/salt/issues/18848,saltstack_salt_issues_18848,"Specifying placement group for AWS regular instances 

I am trying to use AWS placement group in the cloud.providers file to launch the instance in a specific placement group on ec2. I tried various combination, none of which worked. I learnt from the salt user group that 'placement group' option is only added for spot instances, and not for regular instances.","Would you please check to see if `placementgroup` works for you? If not, we'll troubleshoot further.","Joseph, I had tested 'placementgroup' this morning before I submitted the issue. Thanks, Bramh Bramh Gupta President, SRB Technologies | 571.338.2443 | www.srbtech.com | Cloud. Middleware. Big Data. Consulting"
saltstack/salt,https://github.com/saltstack/salt/issues/18919,saltstack_salt_issues_18919,"Windows: pkg.refresh_db returns false-positive success

pkg.refresh_db running on salt-master returns success when winrepo.p is absent. Running pkg.refresh_db on salt-minion returns failure (as expected). Master and Minion versions: 2014.7.0","Can you add the exact commands you're running and their results? On both the master and the minion? Also, what instructions are you following?","Well, I did make a small mistake. Minion shows an error but reports True also. Master: "
saltstack/salt,https://github.com/saltstack/salt/issues/35938,saltstack_salt_issues_35938,"Minion ID not set when using salt-call inside a masterless docker container

### Description of Issue/Question The title say it all; the minion ID is not set when using salt-call in a masterless docker container. I am running the minion as part of a gitlab-ci setup ### Setup `.gitlab-ci.yml`  Please, let me know if I can provide any extra informations.",Does your minion capture the correct pillar data?,"Thanks for the clarification. Concerning the `top.sls` file and minions matching, multiples typos messed up with my mind, but I managed to find them. Thanks again for the support."
saltstack/salt,https://github.com/saltstack/salt/issues/18980,saltstack_salt_issues_18980,"salt-cloud: ExtraData: unpack(b) received extra data.

Suddenly all my attempts at starting or stopping ec2 nodes fail with the bellow error.... ",What was the last thing that happened before this started? Updating to latest develop? Updating your provider/profile/map file? Something else?,"I really dont remember changing anything on the system where I am running salt-cloud, before when it worked and when it stopped.. but might have forgotten. Well, I did add more nodes to the map, and changed the ami id, but tried undoing that to no avail. I tired re-installing, un-installing, various versions, but seems like they all give me the same error now! One thing I can confirm is the a simple image look up works, so it's not having this issue with every interaction with AWS. "
saltstack/salt,https://github.com/saltstack/salt/issues/22230,saltstack_salt_issues_22230,"salt.master.MWorker  died with exit status None

Trying to run latest git develop in a centos6 Docker container... when master starts, it seems all workers die with the following error. Bot sure which file is missing.... ",Can you run `which selinuxenabled` on the command line?,"I was gonna reply: But of course i checked that!.... Maybe not... my shell had it builtin, but actual external */bin/which does not exist indeed... ""yum install which"" fixed this."
saltstack/salt,https://github.com/saltstack/salt/issues/18981,saltstack_salt_issues_18981,"file.replace should not search with unescaped repl

[file.replace](https://github.com/saltstack/salt/blob/develop/salt/modules/file.py#L1201) searches the file with `re.search(repl, line)`. But `repl` is not meant to be a regex, and it can contain characters which are compiled as a regex, or not compiled, because they are invalid in a regex. The correct thing to do would be:  But even that is problematic, because one could use in reply `\1` backreferences to replace the content, but then those backreferences would not be found in the file, so file.replace would be called again. cc @kostko",Does the current form of file.replace still cause the regex problems you report? Thanks.,"From the code it seems it does not use the regex, but it also has a bit worse detection if replacement was already made? It just tries to apply the pattern and this is it? This could lead to mistakes, no?"
saltstack/salt,https://github.com/saltstack/salt/issues/42058,saltstack_salt_issues_42058,"Allow both list and glob matching

Currently, one can or do a list matching or glob matching, but not both at the same time. But commas are not so common in server names, so I think that we could have both at the same time. This is at least what in most cases I would need. A simply way to list servers and sometimes to use some wildcard. I managed to implement this pretty easily in Python: ","Can you not do this with compound match? salt -C `L@minion1,minion2 or www*` test.ping https://docs.saltstack.com/en/latest/topics/targeting/compound.html",I guess I am just asking for alternative syntax. :-) Which is somewhere in between of all-powerful compound match and just a fixed list.
saltstack/salt,https://github.com/saltstack/salt/issues/19032,saltstack_salt_issues_19032,"Detected conflicting IDs with show_highstate but not with highstate

Hello all, I ran into a Detected conflicting IDs error that does not show up with highstate, which silently succeeds, but does with show_highstate as shown below:  Please tell me if you need more input to take into account the bug report, Regards, Erick",Can you post what you have in your top files? That will help with reproducing/debugging this one.,"Thank you @rallytime. I simplified like this, with same behaviour: "
saltstack/salt,https://github.com/saltstack/salt/issues/41732,saltstack_salt_issues_41732,"Typo in doc when asking to use cmd.run with onchange instead of cmd.wait

### Description of Issue/Question Quickly... `Use cmd.run with onchange instead.` [in latest doc](https://docs.saltstack.com/en/latest/ref/states/all/salt.states.cmd.html#salt.states.cmd.wait) to replace with, for example:  As salt does not complain with a non-existent option like `onchange`, a copy-paste makes a buggy state, for me anyway.","Would you mind submitting a PR with this change? Thanks, Daniel",@abednarik thank you!
saltstack/salt,https://github.com/saltstack/salt/issues/19048,saltstack_salt_issues_19048,"salt.utils.files.recursive_copy has problems on Windows

because it uses non-crossplatform path separator, see: https://github.com/saltstack/salt/blob/71bba6c676dde3ca762181cd45b45688ea9e0835/salt/utils/files.py#L24 on Windows, a `\` path separator is commonly used in paths, and this is not supported here. It failed for me on code fragment like below: ",How did you install the minion on your Windows machine? What is the OS of your minion?,"@ssgward - the quoted snippet is from a custom module I'm writing; sorry for not making this clear in the original report. Unfortunately, I'm not sure as of now if I'm clear to provide the version details & machines info. Are they really blocking for this? Installation was done using a regular salt-2014.7.0 installer, possibly with a custom pre-installation of VC runtime. By the way, please note, that this seems to happen specifically when `remove_existing=False` (as is by default)."
saltstack/salt,https://github.com/saltstack/salt/issues/19090,saltstack_salt_issues_19090,"State apache_module.enable found in sls apache.sls is unavailable

Hi, When using the following state: ",Do you see a similar error if you try and run the apache module (not a state call)? Eg. salt 'hostname' apache.a2enmod rewrite,"Running the apache module works:  Note that Apache is not installed on the SaltStack master, could it be the issue?"
saltstack/salt,https://github.com/saltstack/salt/issues/48342,saltstack_salt_issues_48342,"UnicodeDecodeError when using cache mysql

### Description of Issue/Question I configured mysql cache. The master was able to contact the mariadb server and create the specified table in the correct db but the salt masters log file is spammed with the error below. ",can you share a sanitized version of your mysql cache salt master config to help replicate the issue?,
saltstack/salt,https://github.com/saltstack/salt/issues/19609,saltstack_salt_issues_19609,"Azure: when using service_name a VM is not seen as created when runnning salt-cloud again

It then tries to create the VM again which results in a conflict error.",Can you also post the output of `salt --versions`?,Here you go! 
saltstack/salt,https://github.com/saltstack/salt/issues/19618,saltstack_salt_issues_19618,"Azure: Failed to create VM, KeyError 'ssh_host' or 'ssh_password'...

I think this is linked to the new [saltify driver](http://salt-cloud.readthedocs.org/en/latest/topics/config.html#saltify) I don't know why it gets activated when I am using my azure provider. However now my master does not connect to my minions. Here is the sanitized traceback:  I think this got merged by mistake since the unit tests only check for the VM existing and the error does not stop the deployment.",When did this start happening for you?,"It happened during my latest pull, which was 2 days ago. Previous pull was 4 days ago I think"
saltstack/salt,https://github.com/saltstack/salt/issues/19171,saltstack_salt_issues_19171,"Minion fails to start if DNS lookup of saltmaster fails

Salt seems to get hung trying to resolve the master hostname through DNS. Here is the error received: [ERROR ] DNS lookup of 'SaltMaster' failed. [ERROR ] Master hostname: 'SaltMaster' not found. Retrying in 30 seconds I have some minions (e.g. laptop) which need to use a different hostname for the salt-master depending on which network the minion is connected to. it seems that now that salt can communicate with multiple masters, the minion should not get hung up if one of the master's hostnames cannot be resolved. https://github.com/saltstack/salt/blob/215a4d0e89edec189a6d5feff0c8957357084e50/salt/utils/__init__.py#L483 https://github.com/saltstack/salt/blob/e29b7be9f8a97e2686e566134ea281c921696e67/salt/minion.py#L113 Pre 0.16, I could see where the minion would reasonably be expected to become stuck if the master couldn't be resolved. However, with multiple masters being possible, it's not possible that a master may not resolve while another resolves just fine. Another scenario might be an organization preparing to migrate to a new salt master, but there may be a transition period where the minions are configured to look for the old master and the new master. At some point, the old master may be switched off, and thus, would be unresolvable. However, if another master is available, the minion should still run, but log the error.",What version are you running on for these minions? (--versions-report),"Actually the same master - just a different address to access the master based on which network the minion is connected to. When the minion is on the same network as the master, the minion needs to connect to the master via it's local hostname. When the minion is connected externally, it needs to connect using a public URL. There are possibly some work arounds for my particular case - but I don't think the intent is to have the minion die when a DNS lookup fails for a given master. There are many reasons a particular DNS may fail to resolve, even temporarily, but an alternate master may still be available and therefore the minion daemon should continue to load and run. I have set my minion.conf file as such: master: - SaltMaster - master.wolfpackmars2.com this works great for minions on my local network who can resolve SaltMaster using the local DNS server. The problem is, my remote minions that aren't connected locally fail to connect at all because they are having trouble resolving the host SaltMaster. I've considered having separate config files for local minions and non-local minions - but in the case of a minion that is occasionally not local this could create problems."
saltstack/salt,https://github.com/saltstack/salt/issues/19379,saltstack_salt_issues_19379,"salt.states.sysctl fails if /etc/sysctl.d/99-salt.conf does not exist on CentOS7/RHEL7 and probably others

On CentOS7, the state will fail unless you manually create 99-salt.conf as outlined below. Should it perhaps be trying to use 99-sysctl.conf which is the CentOS7 default? Even so, it's not fortunate for it to fail if the file is missing. ",Can you please post the output of `salt --versions-report`?,@rallytime Apologies for the obvious omission Master 
saltstack/salt,https://github.com/saltstack/salt/issues/19193,saltstack_salt_issues_19193,"pip state reporting changes on every run

It does this in two scenarios: - upgrade: True - a requirements file is specified",Can you please provide the output of `salt --versions-report`?,"sure thing. this is occurring on two debian wheezy hosts, both show exactly the same output: "
saltstack/salt,https://github.com/saltstack/salt/issues/23391,saltstack_salt_issues_23391,"pillar.item ""key"" and pillar.get ""key"" can return different results

When pillar data is updated pillar.get seems to still return the old data, while pillar.item returns the new data. Pillar.get returns the outdated pillar information even after issuing a saltutil.refresh_pillar or a saltutil.clear_cache. Restarting the minion seems to resolve the issue. Tested with the following: - salt 2015.2.0rc2 - CentOS 6.6 salt master - @40 CentOS 6.2-6.6 minions - @70 Windows minions (combination of workstations/servers All minions show the problem when pillar data is changed. Inital pillar (example):  In looking at the code for pillar.get uses **pillar** for pillar data where as pillar.item (indirectly) uses salt.pillar.get_pillar. I did a quick patch locally to see if updating pillar.get to use items (same way pillar.item does) to get the pillar data fixes the issue. It does. Assuming nobody has issues with it, I'll submit a patch for this.",Does `salutil.pillar_refresh` have _any_ effect for you on the minion's view of its own pillar data or is it just completely broken?,We are not doing a pillar refresh from within a state. All of the examples above are directly from the CLI. I took the following steps: 1. No changes made to PIllar data: 1. salt saltmaster1 pillar.item python 2. salt saltmaster1 pillar.get python Both commands retrieve the same data 2. Update the Pillar data: 1. salt saltmaster1 pillar.item python 2. salt saltmaster1 pillar.get python The pillar.item gets the correct (updated) data. The pillar.get retrieves the old data. 3. refresh the pillar data: 1. salt saltmaster1 saltutil.refresh_pillar 2. salt saltmaster1 pillar.item python 3. salt saltmaster1 pillar.get python The pillar.item gets the correct (updated) data. The pillar.get retrieves the old data. 4. restart the salt-master: 1. service salt-master restart 2. salt saltmaster1 pillar.item python 3. salt saltmaster1 pillar.get python The pillar.item gets the correct (updated) data. The pillar.get retrieves the old data. 5. restart the salt-minion: 1. service salt-minion restart 2. salt saltmaster1 pillar.item python 3. salt saltmaster1 pillar.get python The pillar.item gets the correct (updated) data. The pillar.get retrieves the correct(updated) data. So it appears that only by restarting the minion does this correct the data. What are the circumstances under which pillar.get will have different information from pillar.item? Using pillar.get in states is desirable for something like:  Otherwise you end up needing to validate that the Pillar exists as you think it does layer by layer.
saltstack/salt,https://github.com/saltstack/salt/issues/19953,saltstack_salt_issues_19953,"lsb_distrib grains on CentOS/RHEL

If redhat-lsb-core package is installed, then /etc/lsb-release is populated with:  In core grains, if this file exists then there's a regex to identify id, release, codename and description. https://github.com/saltstack/salt/blob/develop/salt/grains/core.py#L992 These aren't available so the grains aren't populated. If /etc/lsb-release doesn't exist, then /etc/{redhat,centos}-release is parsed for this same information, and the grains are populated correctly.",What aren't available? Thanks.,"With redhat-lsb-core rpm installed:  The logic is to try and find those values in /etc/lsb-release if it exists, and then try /etc/centos-release if it doesn't. With redhat-lsb-core rpm installed /etc/lsb-release exists, but doesn't contain the necessary information - it can only be gathered from /etc/centos-release."
saltstack/salt,https://github.com/saltstack/salt/issues/19524,saltstack_salt_issues_19524,"salt.loaded.int.module.sysrc.__virtual__() is wrongly returning `None`

I'am using Salt on 'CentOS 7'. After installing some python-libs, especially 'docker-py' this warning has started to pop up after each 'salt-call'-call: ","What was your install method? That module is not present at all in that version of salt, so I'm wondering if there's something wrong with the versions report or something.",Thanks for your quick reply on this quite unurgent matter ;) In the moment its really an aesthetical problem. I ran the bootstrap scripts on a fresh CentOS7 minimal install (KVM virtualized).  Very strange. I also use Salt-Formula for minion- and master-config. Is there a way to uninstall/deactivate this module to stop this messages? Edit: This Problem only exists on the Docker-Node ... the other 2 Nodes are not showing this messsage
saltstack/salt,https://github.com/saltstack/salt/issues/19659,saltstack_salt_issues_19659,"state process.absent is failing on Ubuntu 14.04 because psutil is not installed

Ran into an issue trying to run process.absent state on Ubuntu 14.04 and worked out that there is no dependency on python-psutil package being installed by default. This is using the standard ppa install. This appears to be needed for the for the states.process as well as anything using the modules/ps.py",What version of salt are you running?,Running 2014.7.0 But I looked at the current develop code for modules/ps.py but it only has 
saltstack/salt,https://github.com/saltstack/salt/issues/19669,saltstack_salt_issues_19669,"file.managed with `contents` and without `contents_newline` seems broken

The following state gave us a headache today:  Version in use: v2014.7.0 + some commits, including ea4cf06a78d92e019488c3016318eee207cbbbf2, cherry-picked on top (see https://github.com/sinnerschrader/salt/commits/szops_production).","What the.....are you sure you're running the version you think you're running? Note that this would be the minion-side version, not the master-side version, where this code would be running.","Thank you a lot! You're right, we were running `2014.7.0` without our patches on this machine. This is what actually happened: The machine is an EC2 instance, setup via salt-cloud with this in the provider.conf:  this is exactly the command we use to manually salt our non-cloud machines. However, the bootstrap-salt script that gets executed is too old to support the (at least) `-g` parameter. So we ended up with the latest stable salt instead. I'm now looking into salt-cloud docs on how to provide a more recent bootstrap-salt script. Thanks for looking into this case @basepi!"
saltstack/salt,https://github.com/saltstack/salt/issues/21477,saltstack_salt_issues_21477,"salt.module.mdadm regression in 2014.7 - `python_shell=False`

Running 2014.7 (+some backports) on Ubuntu14.04, the mdadm state does not currently work. The error seems to basically come from the addition of `python_shell=False` to modules/mdadm.py in https://github.com/saltstack/salt/pull/18288/files#diff-e37643eaf3d236b3cd45ab6b89a99da3R50 Also see my comment to the mentioned commit: https://github.com/saltstack/salt/pull/18288#issuecomment-77892998 Regarding the error message, I assume that something is messing with the PATH, however the env dict seems to have it right (`mdadm` is in /sbin/). So it might be a more general problem with the 2014.7 implementation of `cmd.run` with python_shell=False. My salt: ",Do you still have the problem after upgrading to 2014.7.2?,@jfindlay Thank you for your quick reply. I updated our self made packages to the `v2014.7.2` git tag. Strangely --versions-report still reports 2014.7.0: 
saltstack/salt,https://github.com/saltstack/salt/issues/19671,saltstack_salt_issues_19671,"Feature: Joyent private cloud SDC (Smart Data Center) integration

Joyent recently opensourced their private cloud solution called SDC (Smart Data Center) https://github.com/joyent/sdc . There is a Joyent salt-cloud provider option but this is for their public Cloud integration. The API calls should be the same just need to be able to direct them to an alternative IP/hostname (headnode). Some background here: https://groups.google.com/forum/#!topic/salt-users/d3CnGzESrwE",Would you mind opening another issue that includes both?,Great - will open a new one for these. Thanks
saltstack/salt,https://github.com/saltstack/salt/issues/20565,saltstack_salt_issues_20565,"use_vt broken under freebsd

## works ",Can you also post the output of `salt --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/25980,saltstack_salt_issues_25980,"salt fails to start on ipv6 (on freebsd)

I'm trying to run a salt-master / salt-minion setup on a single machine (freebsd 9) using ipv6. This is continuously failing with ""Invalid argument"". Master config file: http://paste2.org/ZhFypIas Minion config file: http://paste2.org/mwmB30kK Master log level all: http://paste2.org/jwmBBssM Minion log level all: http://paste2.org/bbm59AYy We've hit this on freebsd infrastructure. I've created a clean freebsd-9 VM just to test this, and hit it as well. Let me know if any info is needed",What version of Salt are you testing this with?,2015.5.3
saltstack/salt,https://github.com/saltstack/salt/issues/26190,saltstack_salt_issues_26190,"pkg.latest failing on el6

Hi! I'm not really sure what's happening. I had a pkg.latest on a bunch of packages. Today I added rpm ""ftp"" to the list. Running salt, pkg installation failed repeatedly! I switched the minion to debug level, and did a run, please find the log file at http://ur1.ca/nel2y When I switched pkg.latest to pkg.installed it worked! Also, if I had tried the ""yum -y install xxxx"" command in the log file before that, it seemed to work fine too! Not sure what's going on here Thanks",What version of salt are you using?,@jfindlay Thanks .. here you go 
saltstack/salt,https://github.com/saltstack/salt/issues/19720,saltstack_salt_issues_19720,"2014.7.0  SaltReqTimeoutError

I update salt to 2014.7.0 ,I got a problem. When I run state.sls command,it return the message after a few time.In the log from minion,I find a SaltReqTimeoutError ,it make the wait.I want to know what caused this situation. This is the log message: ",Does the problem happen each time you use state.sls? Does restarting your master/minion fix the issue?,"The problem Often happened when I use state.sls. I have restarted my master/minion already,It doesn't work. state.sls: "
saltstack/salt,https://github.com/saltstack/salt/issues/28761,saltstack_salt_issues_28761,"Numerous module import errors in /var/log/salt/minion (test,oracle,archive)

Hi, I am getting numerous import errors in /var/log/salt/minion: ","Did these begin to happen recently, with an upgrade, for example? Have you modified the salt source code in any way? Did you install salt from git/pip?","This is a new installation of 2015.8.1, and I have noticed these errors since the installation. The code has not been modified in any way. Salt master was installed as following: "
saltstack/salt,https://github.com/saltstack/salt/issues/28868,saltstack_salt_issues_28868,"salt-minion hangs randomly 

salt-minion appears to hang randomly, restarting salt-minion service or even the AWS instance on which it is running is not helping. I have had to terminate the instance and create a new one since I could not find any other way of getting it to work. ","How have you installed salt on the minions that are failing? @cachedout, do you have any ideas here?","Yes, minion is installed on the AWS instances that are failing. The minions are installed via salt-cloud bootstrap.sh. I have tried to stop the minion and run 'salt-call state.highstate -l debug' and I have tried salt-minion -l debug, both hang."
saltstack/salt,https://github.com/saltstack/salt/issues/29031,saltstack_salt_issues_29031,"Authentication failure of type ""user"" occurred.

Related to #11628 I am seeing the below error message in my master log: 2015-11-18 23:48:59,976 [salt.master ][WARNING ][1166] Authentication failure of type ""user"" occurred. salt-master and salt-minion are both running from /etc/init.d. I did not define 'user' in my master config. salt --versions Salt Version: Salt: 2015.8.1 Dependency Versions: Jinja2: 2.7.2 M2Crypto: Not Installed Mako: 0.9.1 PyYAML: 3.10 PyZMQ: 14.4.0 Python: 2.7.6 (default, Mar 22 2014, 22:59:56) RAET: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 cffi: Not Installed cherrypy: Not Installed dateutil: 2.4.2 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed libnacl: Not Installed msgpack-pure: Not Installed msgpack-python: 0.3.0 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed python-gnupg: Not Installed smmap: 0.8.2 timelib: Not Installed System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 3.13.0-48-generic system: Ubuntu 14.04 trusty",What were you doing when the error occurred?,"Sorry, missed that part. I see 4 errors in my master's log file: 2015-11-18 17:51:36,153 [salt.master ][WARNING ][1165] Authentication failure of type ""user"" occurred. 2015-11-18 17:51:36,445 [salt.master ][WARNING ][1176] Authentication failure of type ""user"" occurred. 2015-11-18 17:52:06,920 [salt.master ][WARNING ][1177] Authentication failure of type ""user"" occurred. 2015-11-18 23:48:59,976 [salt.master ][WARNING ][1166] Authentication failure of type ""user"" occurred. In terms of how to reproduce or what I was doing, I had installed a new minion which was not showing up on the master so I was going through the log files to figure out what was happening. I reported that issue in #29032 . That's about it. For reproducing the issue, I guess you can install an Ubuntu based salt-minion in AWS with the ami-id of ubuntu-trusty-14.04-amd64-server-20141125 (ami-978dd9a7). And then run apt-get update, followed by installing salt-minion. You should then see this error on the master. Hope that helps? I can run some more debug output if that helps, thanks! :)"
saltstack/salt,https://github.com/saltstack/salt/issues/19834,saltstack_salt_issues_19834,"file.managed mode: setuid and setgid only work on second run

Changing a files user and setting uid needs 2 runs, e.g. first: `File.recurse('/tmp',user='nobody')` and then: `File.managed('/tmp/check_pidfile',user=root,mode='4750')` -> `-rwxrwx--- 1 root nobody 11K Jan 18 15:10 check_pidfile` after a second run of `File.managed('/tmp/check_pidfile',user=root,mode='4750')` -> `-rwsrwx--- 1 root nobody 11K Jan 18 15:10 check_pidfile`","Can you post the output of `salt --versions-report`, please?",
saltstack/salt,https://github.com/saltstack/salt/issues/27960,saltstack_salt_issues_27960,"salt-cloud CLI 2015.8 borks out with SaltClientError: 'timeout'

During deploying a single VM with the `cloudstack` driver with `salt-cloud` CLI, it borks out:  (and yes, considering #27953 and #27956, this is turning out to be a quite bumpy ride :P)",Would you please take a look at it?,@basepi FYI & roughly from the top of my head (I can provide more precise timings if you want) - from start (`salt-cloud -p profile oneminion`) to trace is ~1min - from sending the `created instance` event to trace is <10sec  between these three is <1sec
saltstack/salt,https://github.com/saltstack/salt/issues/39720,saltstack_salt_issues_39720,"Salt-SSH Jinja2 pillar/grains module property-like loading borks as it returns a function wrapper

Salt-SSH does some magical override-fu on pillars & grains. This is the most likely cause for the fact that both the pillar and grain module cannot be used in conjunction with Jinja2's property-like syntax. ### Reproduce  The client is a `Yakkety` VM w/Py3 and Py2 installed. Only pillar_roots is active & used, no ext_pillars.","What command are you running to get that output? Thanks, Daniel","@gtmanfred this is a 'regular' SLS file, so `state.sls imateapot` or something like that ;)"
saltstack/salt,https://github.com/saltstack/salt/issues/40008,saltstack_salt_issues_40008,"RFE: PyGit2 backend should also support SSH Agent Authentication

### Description of Issue/Question In Salt-SSH rosters you can already use `agent-forwarding` to use a key from the SSH Agent. Using GitPython as backend for the gitfs SSH Agent auth (accidentally) also works PyGit2 has support for this as well, but the code needs some minor adjustments to make it work.",Do you have any examples of this? There's no mention of agent forwarding in the [documentation](http://www.pygit2.org/remotes.html#credentials) for the Credentials objects.,https://github.com/libgit2/pygit2/pull/424
saltstack/salt,https://github.com/saltstack/salt/issues/43729,saltstack_salt_issues_43729,"Docker events engine broken on newer docker.py 

### Description of Issue/Question With `docker-py` 2.0+ some stuffs changed around. This seems fixed in the `dockermod._get_client`, which however isn't used in the Engine. ### Setup Try enabling the docker events engine w/up-to-date `docker-py`. ### Related #39216 @terminalmage Move the `get_client` into `utils` and reuse it on both the engine & the module sound like a plan? Or overload import through `salt.compat`? ### Versions report ",Do you like the idea of utils @terminalmage for reuse?,"np, tnx for the quick resolution :)"
saltstack/salt,https://github.com/saltstack/salt/issues/19847,saltstack_salt_issues_19847,"Salt-cloud refusing to list or create servers

I'm unable to create or list servers using salt-cloud. Listing available images or sizes works fine. salt-cloud --versions-report shows:  I'm not sure whether this is a regression in 2014.7.0 or if I'm doing something wrong, but it was working when I last tried it (using the same profile/provider files) under 2014.1.something, several months ago.","Do you recall if libcloud was upgraded during this time too? Also, could you give us a (sanitized) copy of your provider and profile configs?","I rebuilt the server when I moved to 2014.7.0, so libcloud wasn't ""upgraded"" per se. It's currently version 0.14.1-3trusty1 according to aptitude. I cut some unnecessary bits from my profiles/providers files, verified the problem still existed, and sanitized what was left. Here you go: "
saltstack/salt,https://github.com/saltstack/salt/issues/19957,saltstack_salt_issues_19957,"Salt-syndic process stuck on Debian

**Setup:** 1. Master of master controlling multiple syndics. 2. Multiple salt masters with syndic installed and pointing to the master of masters. 3. Each syndic has the minion connected to the master of masters. **How to reproduce:** - Stop the salt-syndic service. - The service does not stop and a strace will show:  - Restart the syndic service and you will end up with 2 services which will result in doubling the test.ping result. Restart the service again and you will have 3 instances..",Can you also post the output of `salt --versions-report`?,Even with the new version (updated today) I see the same issue: 
saltstack/salt,https://github.com/saltstack/salt/issues/20626,saltstack_salt_issues_20626,"Implementing boto rds state

I'm trying to write the state for boto_rds but I am not sure how to structure things. And to be clear, writing the boto_rds.py state which is not implemented. So far I have this options: - Separating parameter group from rds:  - Or just create a new state called something like `boto_rds_pg`. Or maybe there are other better options? Any suggestions on how this should be implemented?",How are pg_options related to MySQL?,"Indeed they are related to all sql services in AWS. I took under consideration only MySQL since this is what I am trying to implement and test. Parameter groups (pg_options) is a list o parameters that can be associated to one or multiple RDS instances (of the same type: mysql, postgres, oracle, etc). So in this case it would be best to write a new state only for parameter groups. This way those can be kept in the desired state (present or absent). Thanks :)"
saltstack/salt,https://github.com/saltstack/salt/issues/19879,saltstack_salt_issues_19879,"Error recieved ""State 'artifactory.downloaded' found in SLS 'xxxx.pkgs' is unavailable""

I am trying to use Salt State artifactory.downloaded in my sls file and it is throwing error ""State 'artifactory.downloaded' found in SLS 'xxxx.pkgs' is unavailable"" The output of salt <minion id> grains.items |grep os is as follows: ",Can you please post the output of `salt --versions-report` as well as the state file(s) you are trying to run?,Hi @rallytime! Thanks for your response and lookingi into this issue! Following are the various versions installed on my machine: 
saltstack/salt,https://github.com/saltstack/salt/issues/36252,saltstack_salt_issues_36252,"Windows Slow Down win_psget & win_dsc determine version is costly, Change to Registry

### Description of Issue/Question Every run of salt it appears that psget and dsc on initialisation [def **virtual**()], call powershell to get its version, to check if its valid for the version of powershell. 2016-09-13 13:39:42,471 [salt.loaded.int.module.win_psget._pshell][DEBUG ] win_psget. PSGET: $PSVersionTable.PSVersion.Major | ConvertTo-Json 2016-09-13 13:39:43,165 [salt.loaded.int.module.cmdmod.run][DEBUG ] cmdmod. output: 5 It's expensive to start powershell just to check its version. **Please change to check the registry** HKEY_LOCAL_MACHINE\Software\Microsoft\PowerShell\1\Install HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\PowerShell\3\Install and, if it exists, whether the value is 1 (for installed) To determine the version of PowerShell that is installed, you can check the registry keys HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\PowerShell<version>\PowerShellEngine\PowerShellVersion e.g. 5.0.10586.0 under 3 ",What do you think of this proposed code improvement?,Please label C4 & Carbon
saltstack/salt,https://github.com/saltstack/salt/issues/36666,saltstack_salt_issues_36666,"Question: Standard for Version Value, when their is no version or not installed

### Description of Issue/Question Salt has many different package manages it needs to work with. e.g.  I suggest `None` should be return when the software is not installed and empty string returned when the version can not be determined. What are the thoughts on this? Also windows can have multiple version of the same software installed at the same time.",What do you think about this implementation?,Thanks @terminalmage I will have a look at the list_pkgs code in pkg.py understand the current common data structures.
saltstack/salt,https://github.com/saltstack/salt/issues/40134,saltstack_salt_issues_40134,"win_pkg saltenv not passed onto all functions introduced in PR#40029

### Description of Issue/Question Windows Pkg allows support for different environments? In a recent update it appears functions are being called without passing on the saltenv ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue See Code Review comments in PR #40029 See also issue #39607 ### Versions Report Develop",Maybe you did this on purpose? Not sure just hoping to get some of your discussion here. Looks like there was some changes from `**kwargs` to specific kwargs,Thanks
saltstack/salt,https://github.com/saltstack/salt/issues/45193,saltstack_salt_issues_45193,"salt.modules.cmdmod.shell_info docstring needs fixing 2016.11

### Description of Issue/Question salt.modules.cmdmod.shell_info needs fixing Should be more like Args: - shell (str): Name of the shell. Support shells/script languages include bash, cmd, perl, php, powershell, python, ruby and zsh - list_modules (bool): True to list modules available to the shell. Currently only lists powershell modules.","Would you mind submitting a PR with this? Thanks Damon, Daniel","Is their a way to generate the doco in html format so it can be checked, from the checkout git"
saltstack/salt,https://github.com/saltstack/salt/issues/47962,saltstack_salt_issues_47962,"salt.utils.http.query results not consistent across backends.

### Description of Issue/Question salt.utils.http.query result ouput not consistent across backends. The following is inside salt.utils.http.query  ### Setup ### Steps to Reproduce Issue Change backend and run the test suite. Or use fileclient.get_url() ### Versions Report Development, 2018.X 2017.X",Can you describe what problems this is causing for you with the different returns?,"fileclient.get_url gets from salt.utils.http.query the following tornado comes back with  request comes back with ` {'handle': <class 'requests.models.Response'>}` If someone changes the minion.conf `backend` option, things will most likely break."
saltstack/salt,https://github.com/saltstack/salt/issues/20013,saltstack_salt_issues_20013,"Command executing after auth failure

I have external auth configured as below:  However, I find it kind of strange (and possibly buggy) that the command executes on the minion even after I receive an authentication failure.",Can you please post the output of `salt --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/25137,saltstack_salt_issues_25137,"keystone.tenant_present issue with not finding state

i'm using salt-master 2015.5.2, and i have the following state: ",Do you have the keystone python package installed?,yep: 
saltstack/salt,https://github.com/saltstack/salt/issues/24117,saltstack_salt_issues_24117,"ext pillar mongo fails with pymongo 3.0.x

There is some deprecated usage of pymongo that results in errors connecting and requesting specific fields in the find_one statement. This is due to deprecated usage becoming removed from latest releases. The following is observed with pymongo 3.0.2. From master log on connection: ",Do we need to support pymongo < 3.0? Or do we need to enforce pymongo >= 3.0?,"Pymongo > 3.0 introduces some breaking changes but using 'Connection' instead of 'MongoClient' has been deprecated since pymongo-2.4 about 3 years back. It would take a really old pymongo for this to be a breaking change for users. Up until pymongo 2.8.1 Connection was still supported (http://api.mongodb.org/python/2.8.1/api/pymongo/connection.html#module-pymongo.connection) but it's now totally absent and forcing usage of MongoClient. The more ""breaking"" change will be the fields list in find_one. In pymongo 2.x this was 'fields' and now is 'projection' and no backwards compatibility is provided. Testing on pymongo 2.8.1 the usage of 'projection' in place of 'fields' just leads to it being ignored. The side effect is the whole document gets returned, not just the pillar field specified by the user. This may be enough to place a requirement on pymongo > 3.0 though. The merged pull request above allows users with 'fields' in their master config and pymongo 3.x to get the filtered down field list. I left the config as 'fields' in the master config to not break people's master config file, and it just uses projection in the background. A future change to consider will be using 'projection' instead of 'fields' in the master configuration."
saltstack/salt,https://github.com/saltstack/salt/issues/24463,saltstack_salt_issues_24463,"service.enable and service.running do not create /etc/rcX.d files Ubuntu 14.04

The service.enable and service.running functions do not create /etc/rcX.d files to stop/start the service at boot. This also results in service.enable and service.running showing changed every time. To reproduce: On an existing server with default nginx install, the following shows no changes ( already enabled) ",Does changing the command to `enable` work in your case? This was the change in #18854 that #24013 reverted.,"To clarify, are you saying that service.enabled should now be service.enable? Do not see that in documentation."
saltstack/salt,https://github.com/saltstack/salt/issues/29633,saltstack_salt_issues_29633,"user.present does not modify home directory

user.present will not modify the home directory in /etc/passwd unless createhome is set to true. modification of the home directory should not be dependent on createhome being True. Appears to be similar to closed case #15649 **test.sls** ",Would it make sense to rename `createhome` to `manage_home`?,"Yes, I meant /etc/passwd. I updated my initial comment to fix that. The goal was not to get 3 different users, but to show that changing the home directory of a user works if createhome: True and does not work if createhome: False My understanding of this state is it will set the home directory to the value passed by home and then optionally create the home directory if createhome is set to True. The setting of the home directory should not be dependent on having createhome set to True."
saltstack/salt,https://github.com/saltstack/salt/issues/41178,saltstack_salt_issues_41178,"mysql_grants.present incorrectly escaping % sign in  '%.*'

### Description of Issue/Question When using services like AWS RDS Mysql, specifying a global grant with '*.*' returns an permission denied error. MySQL supports using '%.*' which is also supported by AWS RDS MySQL. mysql_grants.present will allow the use of the % and returns a success, but the grant has an invalid escape character. ### Setup ","Can you give me an example of how this should actually be applied in mysql, and possibly the documentation? Thanks. Daniel","This is the best writeup I have found for the problem http://www.fidian.com/problems-only-tyler-has/using-grant-all-with-amazons-mysql-rds I looked at the MySQL 5.5, 5.6, and 5.7 documentation and this text is in all 3  As for how I use this. My MySQL databases are in Amazon RDS, so just like the above webpage a grant using '*.*' fails. I want to create an admin user besides the built-in. To do this I use the '%.*' syntax"
saltstack/salt,https://github.com/saltstack/salt/issues/20193,saltstack_salt_issues_20193,"Async commands via Reactor not working correctly with salt-minion on Windows

I have a Salt Reactor/State combination that runs a Python script on *nix based servers to pull the hostname/IP address, fire a reactor event, and pass the data to the reactor. The reactor then takes this data and puts it into static pillar data and executes a state file on our AD Domain Controller. This state file runs a PowerShell command to add the *nix hostname/IP address to the DNS server. This state works fine if we run it one at a time (""salt-call state.sls dns.add-entry"" or ""salt '<hostname>' state.sls dns.add-entry""), but if we run it on multiple servers at the same time, only the first server in the list gets added to the DNS. I've also tried running the PowerShell command as a ""job"", but that doesn't help either. It seems like cmd.run on Windows doesn't have the ability to run asynchronously. I could be wrong about that, but I'm not really sure what would keep this from working. Below are the files I'm using.  I can post more logs if needed. Thanks for all your help!",Can you also post the output of `salt --versions-report` on your master and `salt <windows-minion> test.versions_report`?,@rallytime Of course! 
saltstack/salt,https://github.com/saltstack/salt/issues/20396,saltstack_salt_issues_20396,"salt-api data.get doesn't seem to recognize newlines

I have a chain of salt states that allows a Python script of mine to POST a public/private keypair for SSH, which then triggers a Salt Reactor to create the key files on two machines. The problem is with the private keyfile. Since there is not any functionality in salt.states.ssh_auth to create/manage a private key, I have been using the example from http://docs.saltstack.com/en/latest/ref/states/all/salt.states.file.html#salt.states.file.managed to create the file using ""contents_pillar"". This is supposed to ""honor"" the newlines, but the resultant keyfile is just a long string with spaces where the newlines should be. I'm assuming it is because of the way the data is handed off from the POST > event reactor > pillar. Regardless, if I manually remove the spaces, add newlines where the need to be, and then attempt an SSH connection, it works fine. ",Do you see anything like that?,"Actually, it turned out my FTP client changed the permissions for /reactor/core/ssh-keys.sls to ""766"". After I changed that, it rendered correctly and passed the SSH key _with_ the newlines. So, your changes worked. Thank you! Passing it as a real data structure works. I didn't realize it couldn't parse complex data like that."
saltstack/salt,https://github.com/saltstack/salt/issues/20201,saltstack_salt_issues_20201,"Archive extract broken

This patch passes repr(filename), when it should just pass filename: 726eb220b2e60856fbf1522db943d8e7fb150e7c This has totally broken archive extract (for me); I get this:  Note that the filename is double quoted. This is incorrect when using argv style command invocation.",Do you think that removing the `repr()` call will fix the problem you're having? Thanks.,"Sorry, by argv-style I mean the program arguments are specified in an array, rather than as a space-separated string which must then be parsed by the shell. Quotes are used to influence the parsing of the latter. So yes, I don't think you want quotes here, and removing the repr() should fix the problem. I'll try to test it. Is there a target date for 2014.7.2?"
saltstack/salt,https://github.com/saltstack/salt/issues/20208,saltstack_salt_issues_20208,"No errors when running state to minion that doesn't respond

Hello, When salt minion process hangs up and doesn't respond, running command or any state from master ends without any error. For example:  returns nothing. States don't make any changes to minion. I used state.highstate for all hosts in nodegroup and I didn't notice that one node didn't respond, because there was no error. I noticed it when this one node was running old software, because it didn't receive the new one from salt-master. Does it is something wrong with my configuration or with Salt itself? Best Regards, Konrad Dudek",Can you tell us what the output of `salt --versions-report` is on your master? Can you do the same for your minion with `salt-call --versions-report`?,@rallytime On the master:  Both servers use Ubuntu 14.04
saltstack/salt,https://github.com/saltstack/salt/issues/25777,saltstack_salt_issues_25777,"rabbitmq states do not honor (nor has it retired) runas for all module calls

rabbitmq_user, at the very least, makes rabbitmqctl calls without applying the runas setting, resulting in failed calls.",What salt version(s) are you noticing this on?,For instance: https://github.com/saltstack/salt/blob/2015.5/salt/states/rabbitmq_user.py#L49
saltstack/salt,https://github.com/saltstack/salt/issues/29983,saltstack_salt_issues_29983,"glusterfs.created should perform changes necessary to match the desired state

With an example volume of:  glusterfs.created should `remove-brick...start`, wait for completion, and `remove-brick...commit` (with options for not waiting after start, and force removal). Obviously sanity checks would be required for volume types other than distribute-only. State changes should also handle increasing and decreasing replica counts, volume option changes, etc. The state should check for remove-brick and rebalance pending status and optionally wait for it to complete and/or commit the change if it is complete.",What do you think of this?,"@cachedout Yes, I'll be working on this."
saltstack/salt,https://github.com/saltstack/salt/issues/20956,saltstack_salt_issues_20956,"Adding output_file to master config does not result in a new file

Just like the title says, it does not result in a new file. And not only that. It also completely eradicates any output. As advised by @rallytime in the post https://github.com/saltstack/salt/issues/20629#issuecomment-74272510 I added the line  is completely gone. The master still speaks with the minions. I can see the request going in on the minions but the master doesn't show it anymore. So I'd say this is the complete opposite effect of what this feature is supposed to do and I'd therefore like to open a bug-report.","Can you also post the output of `salt --versions-report`, just so all of the relevant info is contained here?",sure  thank you!
saltstack/salt,https://github.com/saltstack/salt/issues/46281,saltstack_salt_issues_46281,"Failing tests in 2018.3 branch

I wanted to test if upgrading the official Debian package to the current 2018.3 branch (commit 7382654c704c589790f87c311dca5a82a80e715e) works, but several tests cases (start to) fail: ",what version of mock do you have installed? in our test suite we are using 'mock==2.0.0',I am using the mock library from Python 3.6.4
saltstack/salt,https://github.com/saltstack/salt/issues/51555,saltstack_salt_issues_51555,"test_argspec_report fails

### Description of Issue/Question The test_argspec_report test fails on Debian testing/unstable: ",Can you provide some additional information about the environment where tests are running? Thanks!,Here is the setup of the test environment: https://ci.debian.net/data/packages/testing/amd64/s/salt/1867772.log Test log: https://ci.debian.net/data/autopkgtest/testing/amd64/s/salt/1874812/log.gz Why does the test case expect `args` to be `None` despite `_test_spec` having arguments? Why does this test case uses `create_autospec`? What's the purpose of this test?
saltstack/salt,https://github.com/saltstack/salt/issues/25366,saltstack_salt_issues_25366,"salt-ssh `--ignore-host-keys` option doesn't work

Hi, We were having trouble with Salt refusing to connect to a server whose host keys have changed, so we started playing around with the `-i` / `--ignore-host-keys` option. This flag doesn't appear to work, as you'll still get the host key changed warning from SSH when trying to connect:  So far the only workaround we've found is to trash the `~/.ssh/known_hosts` file.",What is your salt --versions-report?, Running on Ubuntu 14.04.2
saltstack/salt,https://github.com/saltstack/salt/issues/26380,saltstack_salt_issues_26380,"JSON Render Failed for mysql_grants.present

Hi, We're getting the following error when trying to use JSON output with `mysql_grants.present` and `salt-ssh`:  Thanks /cc @zyio",Do you have the mysql python package installed on the system you are running salt-ssh from (probably `MySQL-python`)?,"Sorry, forgot about this bug until I've just come across it again now - installing `MySQL-python` package on the remote fixed this issue. Perhaps a better error message wouldn't go amiss for this one, but otherwise I'm closing this as it's not really a bug but more RTFM."
saltstack/salt,https://github.com/saltstack/salt/issues/24304,saltstack_salt_issues_24304,"cmd.retcode Behaves Unexpectedly When Using Pipes

It seems that when cmd.retcode comes across a pipe, it does not use the return code of the final piped command, but instead, it uses the first one. i.e.  I think this was working before, since I use Jinja to run a piped command to see if I need to process certain states.",What salt version are you using? If it's 2015.5.\* it might be related to python_shell now defaulting to False - see warning in http://docs.saltstack.com/en/latest/topics/releases/2015.5.0.html,"I'm using 2015.5.0, so that would appear to be the issue. I didn't see that announcement. In my case, it should be easy enough for me to fix. Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/20451,saltstack_salt_issues_20451,"Salt-ssh unable to run custom state

Hi , We're trying to run salt-ssh with a few custom _states. The local cache shows all the files but remotely it always fails with State ' ' found in SLS ' <file name' is unavailable. How do we fix this issue remotely? We're unable to find any of the local sls files remotely as well",Will you provide the output of `salt --versions-report`? Thanks.,Actually this was because there was an error in the file. Is there a way where in you can say the state modules have errors ? The logging can be a little more helpful IMHO like it is for the statefile. Thanks.
saltstack/salt,https://github.com/saltstack/salt/issues/20620,saltstack_salt_issues_20620,"Custom statefiles

Hi, We've a bunch of custom statefiles that use a few common methods. I tried adding a 'helper' file that can be imported but it looks like all these have to be in the same file. Can you confirm if that is the case ? If no , can you please point me out to the right way of importing common helper methods ? If yes, can this be added ?",Which state file format do you use?,Thanks! I'll try that out. Is there an example that I can look at for an implementation of utils + execution module ?
saltstack/salt,https://github.com/saltstack/salt/issues/43358,saltstack_salt_issues_43358,"Thorium state with requisite never gets triggered

### Description of Issue/Question For me, all of the examples at https://docs.saltstack.com/en/latest/ref/thorium/all/salt.thorium.check.html using a requisite fail and never trigger a state. I could be sending events wrong though and this is entirely my own fault. I should expect to see the following instead of an empty log file  This also happens on 2016.11.7.","What does your register assignment look like? https://docs.saltstack.com/en/latest/topics/thorium/index.html#using-register-data You have to put the data in the register to use the `check` module against the register. Thanks, Daniel","@gtmanfred Following the example from your link, I get the following when I restart my salt-master.  Additionally, `/tmp/thorium.log` is not written either."
saltstack/salt,https://github.com/saltstack/salt/issues/21055,saltstack_salt_issues_21055,"Windows private_key

See internal issue 196. Although I have private_key set in both the provider and the profile: provider:  Thanks!","Can you post the output of `salt --versions-report`, please?","Yes, I submitted the fix. Sent from my iPhone On Feb 26, 2015, at 1:41 PM, Nicole Thomas <notifications@github.com<mailto:notifications@github.com>> wrote: @freimerhttps://github.com/freimer Actually, did you submit a fix for this already in #21080https://github.com/saltstack/salt/pull/21080? — Reply to this email directly or view it on GitHubhttps://github.com/saltstack/salt/issues/21055#issuecomment-76239188."
saltstack/salt,https://github.com/saltstack/salt/issues/21528,saltstack_salt_issues_21528,"Cloud Deploy with Multi-Master-PKI

Modify Cloud Deploy to be capable of a multi-master-pki deploy, copying down the master_sign.pub key to the minion during the installation if master_sign_pub_file is set in the provider/profile/vm config.",Should we close this up or should we wait until @s0undt3ch updates the bootstrap version?,This is working for me on Linux also. Closing issue...
saltstack/salt,https://github.com/saltstack/salt/issues/21667,saltstack_salt_issues_21667,"Expanded Capabilities for ec2_pillar

While the capabilities of ec2_pillar are a start, there are some cache-22 or chicken-egg scenarios, as well as reduced capabilities for Windows hosts. The existing 2017.2 installable executable for Windows does not provide the capability of executing boto modules. So, the Windows minions can't get their own tags with the community provided ec2_tags, and provide to ec2_pillar the instance-id, which the master uses to query AWS for the ""authoritative"" ec2_tags info. While reducing security somewhat, the capability already exists in ec2_pillar to allow the minion to provide the instance-id via a grain `(__grains__['instance-id'])`. The needed expanded capability is to allow Windows hosts to provide the instance-id when the minion-id is not the instance-id, and when boto is not available. This is provided (in the to-be submitted PR) via a new grains module that provides all AWS instance meta-data, of which the instance-id is one component. Since these are simple HTTP requests to the locally significant web server 169.254.169.254, Windows hosts can readily implement this capability, with the exact same code as for Linux hosts. The ec2_pillar is updated to accept either a `___grains___['instance-id']` or a `___grains___['ec2_metadata']['instance-id']` grain to provide the instance-id, the former of which was available in previous versions, and the latter of which is available with the new ec2_metadata grain. Note that the ec2_metadata.py grain is typically of a user-contributed grain module, and hence would typically not be included in the main Salt distribution. However, while not required, it is closely coupled to the ec2_pillar module, and hence is included in the PR to be submitted. However, if desired, it can be left out; the modified ec2_pillar will not ""fail"" without the ec2_metadata grain, it just will not find the ec2_metadata grain and revert to old behavior...",Can this be closed? Thanks.,"@jfindlay Honestly, I think ec2_pillar.py should be pulled from the main distribution and put into contrib. But that's not my call. Thanks,"
saltstack/salt,https://github.com/saltstack/salt/issues/20925,saltstack_salt_issues_20925,"[question] Plans to integrate support for Azure Pack (on premise cloud)

As title Any plans to include support for Windows Azure Pack (on premise cloud) to provide SaltStack as a service for tenants?",Does the Azure SDK that we're using now support it?,"@techhat, I am not entirely sure, but it may be a matter of changing the url to point towards the tenant API server that gets installed when deploying the azure pack environment, but my knowledge is limited on the differences between Microsofts Azure cloud and the Windows Azure Pack. I haven't tried changing the urls in the salt source code yet, but if I get a chance to, I will come back with what I find"
saltstack/salt,https://github.com/saltstack/salt/issues/27897,saltstack_salt_issues_27897,"request to add \r escape character for salt.states.host for windows

Heya I'd like to request including the carriage return ""\r"" when appending to the hosts file on windows, otherwise the hosts file becomes a single line when opening it up in notepad. @henriksp45 @jensbrask",What version of salt are you using?,Master: 
saltstack/salt,https://github.com/saltstack/salt/issues/44283,saltstack_salt_issues_44283,"pip install python 3 version of salt causes DecodeError

### Description of Issue/Question I wanted to try some of the new python3 capable code, but it turns out installing the python3 salt libraries via pip causes some confusions for the salt script in /usr/bin/salt when salt is already installed via apt repos. ### Setup normal apt installation of salt-master and salt-minion version 2017.7.2 ### Steps to Reproduce Issue doing this: ","Does that work? Thanks, Daniel","Yeah it does, I kind of wanted to have both at the same time, to run some of the python3 code via client api calls for a personal project, but it's not really so important, thank you :)"
saltstack/salt,https://github.com/saltstack/salt/issues/34362,saltstack_salt_issues_34362,"Data failed to compile

### Description of Issue/Question ",Did you check to see if this was the case?,"Hi, I am reasonably sure that we don't have any existing state.highstate running. I've restarted the services on both the master and this minion. I don't find anything in /var/cache/salt/minion/proc. "
saltstack/salt,https://github.com/saltstack/salt/issues/24851,saltstack_salt_issues_24851,"pkg.hold fails when using yum/rpm packages containing a dot (.) at package name

Hi, When using pkg.hold feature, my states keep reporting 'Package Foo.Bar is set to be held.' on each state run, however pkg lock has been configured: ",Would you mind closing this bug?,Sure..
saltstack/salt,https://github.com/saltstack/salt/issues/27016,saltstack_salt_issues_27016,"KeyError: 'rabbitmq_plugin.enabled' while trying to install rabbitmq & setup a plugin at one single pass

Hi, It looks like trying to install rabbitmq and then setting up some plugin/user/vhost/etc. against it inside the same highstate pass will fail miserably, even if 'reload_modules: True' is used. This is a sample 'sample.sls' file which reproduces the issue using salt 2015.05.03 on CentOS-6.x. ",Will you post the output of `salt-call -l debug state.show_sls sample.sls` for both layouts of `sample.sls` that you used?,"Hi, state.show_sls assumes state to be at some env, instead of being a local file (as state.template), so I just got an error: "
saltstack/salt,https://github.com/saltstack/salt/issues/20859,saltstack_salt_issues_20859,"ImportError: No module named while running masterless minion

 The above is the error i get while executing the masterless minion. Can anyone please give me a solution. Since i am new to salt i am not able to trace the error. Please help me","Can you post the output of `salt-call --versions-report`? I am not very familiar with the running salt on windows, but @shanedlee or @UtahDave might be able to help out here.",
saltstack/salt,https://github.com/saltstack/salt/issues/20862,saltstack_salt_issues_20862,"Error running ""salt-unity.exe master"" after cx-freeze'ing salt-unity.py

I used cx-freeze to create an EXE build of salt-unity.py. Below is the setup.py I used: #  Does anyone have a tip that might explain what is going on?",Will you post the output of `salt --versions-report` and also the contents of your master config? Thanks.,"I discovered the root of the problem: The ""...\library.zip\salt\fileserver"" directory does not have in it all the files that are in the analogous ""...\Python27\Lib\site-packages\salt\fileserver"" directory when salt-unity.py is run directly. Does anyone know how those files could be made to be populated in the library.zip based directory?"
saltstack/salt,https://github.com/saltstack/salt/issues/20929,saltstack_salt_issues_20929,"__query_ip_address() takes exactly 1 argument (2 given)

#18457 fix was an incomplete fix. They removed the extra argument, but did not fix up any of the callers. Essentially breaking everything that would call it. ",Can you please post the output of `salt-cloud --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/27930,saltstack_salt_issues_27930,"No top data for masterless minion with master_tops

We are using reclass adapter to generate our top and pillar data, this works well with salt master. Recently we found some use cases where we would like to run salt minion in masterless mode. We have it largely working, and we can use commends such as: ",What is the output of `salt-call --versions-report`?,"salt-call --versions-report Salt Version: Salt: 2015.8.0 Dependency Versions: Jinja2: 2.2.1 M2Crypto: 0.20.2 Mako: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 Python: 2.6.6 (r266:84292, Jul 22 2015, 16:47:47) RAET: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed libnacl: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed python-gnupg: Not Installed smmap: Not Installed timelib: Not Installed System Versions: dist: redhat 6.3 Carbon machine: x86_64 release: 2.6.32-573.3.1.el6.x86_64 system: Scientific Linux 6.3 Carbon"
saltstack/salt,https://github.com/saltstack/salt/issues/20997,saltstack_salt_issues_20997,"Reported error on broken compilation is misleading

While attempting to deploy a new service, I had initially called it stream but changed the name to stream_service. The layout looked like: <pre> stream_service | stream_bin.sls | init.sls </pre> stream_bin.sls contained the following lines at the start (which were the issues): <pre> include: - stream - supervisor </pre> When running highstate, I received the following error: <pre> cloud-server-13: Data failed to compile: ---------- No matching sls found for 'stream_service.stream_bin' in env 'base' </pre> Which is of course generated because the file that stream_service.stream_bin attempted to include did not exist. However, the error reported a file which attempted to include the stream_bin file (which of course exists, just did not compile). The expected error should have been: <pre> Data failed to compile: ---------- No matching sls found for 'stream' in env 'base' </pre> or something closer to the actual root of the problem.",Will you upgrade to 2014.7.2 and try again to verify that the specious error still occurs? Thanks.,"@jfindlay -- thanks for the response. I upgraded the master and minion and the output (when I reverted the file to its buggy state) is now fixed so this is clearly fixed on 2014.7.2. Thanks again! <pre> cloud-server-13: Data failed to compile: ---------- Specified SLS stream in saltenv base is not available on the salt master </pre> New versions report: <pre> Salt: 2014.1.10 Python: 2.7.3 (default, Dec 18 2014, 19:10:20) Jinja2: 2.6 M2Crypto: 0.21.1 msgpack-python: 0.1.10 msgpack-pure: Not Installed pycrypto: 2.4.1 PyYAML: 3.10 PyZMQ: 13.1.0 ZMQ: 3.2.3 </pre>"
saltstack/salt,https://github.com/saltstack/salt/issues/42511,saltstack_salt_issues_42511,"Missing support for urllib3 version 1.22 (on FreeBSD 11)

### Description of Issue/Question Salt crashes with a nice python trace after upgrading urllib3 from 1.21.1 to 1.22. ",Can you check for a py27-salt pkg update?,The latest update of FreeBSD seems to have fixed the issue for me. Apparently the latest commit for py27-requests fixed it: http://www.freshports.org/www/py-requests/ I guess this issue can be closed now.
saltstack/salt,https://github.com/saltstack/salt/issues/21256,saltstack_salt_issues_21256,"win.exe package for RH 6

Hi, while bootstrapping a Windows Server 2008R2 AWS instance via salt-cloud, the Salt Minion installer (2014.7.1) doesn't create the salt-minion service. OTOH, salt-cloud doesn't notice it's not there:  When running the installer manually, the service IS created, though. Bye... Dirk",What happens when you run one of the above `winexe` commands manually?,"To verify this, I created an instance using salt-cloud, then connected to it and found no minion (should have bootstrapped 2014.7.2). Manually installing 2014.7.2 using winexe afterwards also didn't work. However, it worked with 2014.7.1: "
saltstack/salt,https://github.com/saltstack/salt/issues/24491,saltstack_salt_issues_24491,"cmd.wait ignores watchers if file given in ""creates"" is present

This is for 2015.5.0. Given the following state:  then mycommand is NOT executed if /some/file exists, even if myfile was executed. mycommand should be executed if ANY of the conditions is not fulfilled.",Could please you clarify why you think this should behave in the way you describe? Thanks. :],"No. _cmd.wait_ is NOT being called if _/some/file_ exists, although the watched file _myfile_ has been modified. I would expect it to be executed if either the watched file has been modified or the to-be-created file doesn't exist, each one regardless of the other condition."
saltstack/salt,https://github.com/saltstack/salt/issues/24884,saltstack_salt_issues_24884,"Pillar: Specified SLS 'data' in environment 'base' is not available on the salt master

I get the following message when I start a highstate on a Windows minion using 2015.5.0, getting pillar data and states from a Git repo: ",What about when you copy your gitfs backend into /srv/salt as well? Thanks.,"OK, seems like I had a ""- data"" line also in /srv/pillar/top.sls, but no /srv/pillar/data/init.sls"
saltstack/salt,https://github.com/saltstack/salt/issues/47763,saltstack_salt_issues_47763,"saltutil.sync_XXX doesn't sync items which are not available in base

### Description of Issue/Question We're using gitfs for providing the environments served by our Salt master. Now, when a new custom grain, module, state, etc. is added to the Git repository on a branch (in _grains, _states, ...), a following `salt-call saltutil.sync_all saltenv=thebranch` doesn't actually sync the new item to the minion. It only starts doing so once the item is available in the base environment, too (after the branch has been merged into master, for example). ### Setup ","Can you provide me with a setup and git repository that is able to replicate this? Thanks, Daniel","Shame on me. This seems to have been an issue on my side. I use packer to provision machines in AWS, which in turn remote execs a script on the Salt master to sync stuff and then trigger a highstate. Said script had a bug which caused it to always pass ""saltenv=base"" to the salt command, regardless of which environment was specified on its command line options."
saltstack/salt,https://github.com/saltstack/salt/issues/21397,saltstack_salt_issues_21397,"salt-minion getaddrinfo in dns_check() never gets updated nameservers because of glibc caching

There can be a race condition when the minion starts where it might start before the network is fully initialized (perhaps DHCP is slow or was down). In these cases, I've seen salt-minion stuck querying 127.0.0.1 for DNS. Even after the network does come online, it never picks up the changes because glibc caches the resolv.conf forever. Supposedly, debian/ubuntu and opensuse actually patch glibc to stat /etc/resolv.conf for changes (I have not verified this, just saw a reference online somewhere), but this doesn't happen on redhat. Without a fix in glibc, the current solution is to restart the salt-minion if the resolv.conf changes. However, salt could also trigger a res_init() to force glibc to reload the resolv.conf configuration. I've tested the following by copying the dns_check() and hacking on it a bit. With the `res_init()` in there, it does pick up changes to resolv.conf:  This might become more important if #15122 and/or #10032 is addressed. I'm running 2014.7.2, fyi.","Would it be better to locally read resolv.conf? I don't feel qualified to make a decision about this, though perhaps @cachedout or @whiteinge have better ideas.","If you plan to continue using `socket.getaddrinfo()` to do the actual DNS resolution, there's no point in reading the resolv.conf yourself. In all the research I've done on this, it's a glibc problem that affects a lot of long-running processes. In one post I read, folks talked about Firefox being the only thing that doesn't have this problem because they go out of their way to force the res_init() like I'm suggesting here."
saltstack/salt,https://github.com/saltstack/salt/issues/21140,saltstack_salt_issues_21140,"locale.present state executed successfully, although originally fails

When I try to set locale, I've got a strange result. State says locale added successfully, although logs says locale-gen failed with exit code 1. ","Does the locale get correctly set/uncommented in /etc/locale.gen? what happens if you run `locale-gen ""ar_AE.UTF-8 UTF-8""` manually?","@jfindlay I don't even have that file in there and on whole FS :) And what's interesting when you set locales multiple times, with jinja cycle (Actually would be nice to have `names` already supported?), it gives error only once, with first locale. That strange, before that it's been giving around 3 errors regarding some locales. Not sure what's changed."
saltstack/salt,https://github.com/saltstack/salt/issues/39880,saltstack_salt_issues_39880,"syndic is not added to startup rhX

### Description of Issue/Question salt-syndic is not added to start automatically on boot. it was removed from #32308. ping @terminalmage I also don't understand why the restart is commented out ( although it would need to have a condrestart in the init script ) ### Steps to Reproduce Issue install latest salt-syndic in a rh os and check with chkconfig if its added to startup. ### Versions Report 2016.11.x haven't checked other versions.","Can you elaborate? I don't think that any of the daemons are set to automatically start on boot, and that is the intended behavior I believe.",at the spec file for rhX https://github.com/saltstack/salt/blob/develop/pkg/rpm/salt.spec#L342 adds master to automatically start on boot and below you can find minion but not the syndic. %postun restarts master and minion but not syndic. https://github.com/saltstack/salt/blob/develop/pkg/rpm/salt.spec#L353
saltstack/salt,https://github.com/saltstack/salt/issues/41092,saltstack_salt_issues_41092,"Read-only file system

### Description of Issue/Question The bellow error happens when minion runs in a read only tmpfs filesystem in /dev/shm I'm adding a ticket since somebody else might have fixed this or there is a workaround without remounting the partition are rw ofc.  ### Setup mount tmpfs /dev/shm are readonly ### Versions Report centos6(should happen to other OSs too but haven't tried) all salt minion versions","What type of system are you running this in? Is it a dedicated server, a vm, or a container like docker? Thanks, Daniel","Hi Daniel, Its a VM."
saltstack/salt,https://github.com/saltstack/salt/issues/43139,saltstack_salt_issues_43139,"Feature request: Windows build patches folder

### Description of Issue/Question I would like to run to extra script for the windows build but at the moment I have to change the build_pkg.bat script in order to do so. Suggestion Add an option to see if folder 'Patches' exists and if it does run all bat files in that folder. ",Why not just patch salt? What are you patching for example? Would the items in the Patches directory be committed into the salt repo? What is the use case here?,"Hi @twangboy , Patches require some maintenance in case code is changed from upstream. No items would be committed to upstream ofc. As I described, I would like to run some scripts before building the exe like patching salt code, deleting/adding/downloading files"
saltstack/salt,https://github.com/saltstack/salt/issues/44736,saltstack_salt_issues_44736,"Windows runas command issue

### Description of Issue/Question ","Would you mind submitting a PR for this? Thanks, Daniel",maybe @twangboy can have a look ? I have no problem submitting a pr if he also thinks this is the correct solution.
saltstack/salt,https://github.com/saltstack/salt/issues/53548,saltstack_salt_issues_53548,"maintenance process restarted

### Description of Issue  ### Versions Report should affect all versions.",Can you give us the output of `salt-call --local test.versions` from the master and describe the module/state/command that was being invoked when this error was encountered?,I wrote that all versions should be affected. The maintenance process doesn't have anything to do with commands being invoked afaik.
saltstack/salt,https://github.com/saltstack/salt/issues/53549,saltstack_salt_issues_53549,"race condition with init script

### Description of Issue If user tries to start the agent at the same time with the init script in RH/centos the agent will be started twice. ### Steps to Reproduce Issue run the script at the same time on the same box ### Versions Report all versions of the minion",Can we get more details about exactly how to reproduce the bug as well as the output of `salt-call --local test.versions` on one of the minions with the issue?,@Akm0d I added both the information you requested in the initial message. Feels like you are copy pasting the message instead of reading the ticket.
saltstack/salt,https://github.com/saltstack/salt/issues/21180,saltstack_salt_issues_21180,"FreeBSD 10: Minion not starting properly, hogging CPU

Hi, I've built a current Salt 2014.7.2 from ports on a FreeBSD 10 VM and configured rc.conf to enable the minion. However, ""service salt_minion start"" prints ""Starting salt_minion"", but doesn't return and the minion process hogs the CPU at ~99%. I need to explicitely kill the process from another terminal to get the prompt back (CTRL-C doesn't work). If I run it from the shell, I get this output:  where it hangs forever and brings the CPU to 99% again. Bye... Dirk",What is your minion config? Can you run `salt-minion -l trace` or `strace salt-minion`? These may reveal something obviously ridiculous being done by salt.,My minion config is an unmodified copy of the sample config. 
saltstack/salt,https://github.com/saltstack/salt/issues/26510,saltstack_salt_issues_26510,"'Apache_module' state module crashes instead of gracefully reporting state unavailability

In Salt 2015.5.2 any attempts to use apache_module states on non-Debian distros results in a report that the state is not found. In 2015.5.3, it crashes in the following manner:  which could be related to #26454 The documentation in this case can be considered slightly misleading by not specifying the state module being Debian-specific.",Would you mind filing a separate issue for that?,"Sorry for the very late reply. Well, issue here is that, to my limited knowledge, it's Debian-specific to not necessarily immediately enable modules that are being installed, as opposed to, say, RHEL, which dumps Apache modules to a dir and doesn't do any configuration mangling when a module is installed. In fact, module management in Debian is done specifically using Perl scripts written by Debian maintainers, not `apachectl`, so there's no need for filling that issue, unless someone's willing to go the extra mile to do something rather invasive (at least in RHEL's approach towards Apache)."
saltstack/salt,https://github.com/saltstack/salt/issues/42979,saltstack_salt_issues_42979,"Red Hat 6 and CentOS 6 are no longer fully supported after version 2017.x.x

### Description of Issue/Question I have been using https://github.com/saltstack-formulas/mysql-formula for ages but after I upgraded to 2017.7.0 and later 2017.7.1 it's no longer possible to manage users in MySQL for Red H I changed the state to it's minimum and it still fails exactly the same way (took example just to be sure I did not do anything wrong: https://docs.saltstack.com/en/latest/ref/states/all/salt.states.mysql_user.html) State test.sls: ",Do you have the MySQLdb python27 module installed? in 2017.7.0 we dropped python 2.6 support so salt will only run on python2.7 in redhat6.,"Hi @Ch3LL, thank you for your reply. Python 2.7 are not supported by Red Hat 6 Does this mean that SaltStack are no longer supporting Red Hat/CentOS 6? I know it's technically possible to install Python 2.7 but It's not supported by Red Hat and as we are using Red Hat 6 in production environments we are not able to do anything that are unsupported by Red Hat. Best regards Johan Ryberg"
saltstack/salt,https://github.com/saltstack/salt/issues/21311,saltstack_salt_issues_21311,"salt-master fails to pick up RHEL default certs

Attempts to use external_auth ldap with TLS enabled on RHEL 6 causes a failure due to OS trusted CA info not being loaded by salt master:  Steps to reproduce: - Configure ldap external_auth - Start salt-master - Attempt to run an authorized command. - Output: above CommandExecutionError in DEBUG log, and user receives 'Failed to authenticate!' Workaround: Start salt-master manually with: - `LDAPTLS_CACERT=/etc/ssl/certs/ca-bundle.crt salt-master` - Commands work as expected.",What is the output of `salt --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/27951,saltstack_salt_issues_27951,"bootstrap breaks /etc/salt/minion upon installation via salt-cloud

Hi, I am using salt-cloud to provision virtual machines in vmware using a Debian Jessie template that does not have salt installed. What happens is it appears that the bootstrap script installs saltstack 2015.5.3 (which is one thing I'm concerned about.. why not install 2015.8??) and creates /etc/salt/minion which is broken b/c of this line: ",Does that help answer your questions?,"@rallytime thanks for the advice. the `script_args: git v2015.8.0` configurable resulted in a bunch of errors and a broken salt-minion installation, so instead what i decided to do was create an /etc/apt/sources.list.d/saltstack.list file on my template which points to repo.saltstack.com, which seemed to help.. at least 2015.8 was installed via apt. i also used `master_type: standard` in my salt-cloud profile config, and it created /etc/salt/minion with that line in it, only now salt-minion won't start b/c it doesn't like that either. is there a way to prevent `master_type` from being included in /etc/salt/minion entirely? i think that would at least enable me to provision a bunch of servers with 2015.8 and get salt-minion running successfully. fwiw, my salt-master is running 2015.8 and is where i'm running salt-cloud from."
saltstack/salt,https://github.com/saltstack/salt/issues/38292,saltstack_salt_issues_38292,"how to force salt-cloud to keep salt-minion/salt-common on an older version

### Description of Issue/Question We use salt-cloud for vmware provisioning. We've experienced a number of issues with 2016.11 version, and so we want to keep salt-minion & salt-common on version 2016.3.4 until we can verify that the latest version no longer has debilitating bugs in our environment. When we use salt-cloud to provision, we're finding that it tries to upgrade the version already installed in our template from 2016.3.4 to 2016.11. To try to circumvent this, we've use apt pinning to force the version to remain 2016.3.4 as well as apt holding (eg. echo salt-minion hold | dpkg --set-selections; echo salt-common hold | dpkg --set-selections), but salt-cloud fails with the following error ",does that work as a solution for you?,"@Ch3LL yes, that sounds good. i will give that a try and will update this issue w/the results. thank you!"
saltstack/salt,https://github.com/saltstack/salt/issues/26536,saltstack_salt_issues_26536,"'git.latest' raises a KeyError when `git` is not installed.

",What version?,"Hey, sorry bout that: # Master "
saltstack/salt,https://github.com/saltstack/salt/issues/21749,saltstack_salt_issues_21749,"missing number of ret events between master and syndic 20152

on intermediary masters, seeing discrepancy between the number of ret events in the master log and syndic log.  shows different number of events each time. Obviously this is causing number of ret events in master of master to be wrong from the actual. not sure if this is a case in 2014.7.2 as well...",Which branch/version were you testing this on? I'd give the HEAD of either the 2014.7 branch or the 2015.2 branch a try.,"Tried with 2015.2 today but i still see discrepancies in number of results. On Mar 24, 2015 6:21 PM, ""Nicole Thomas"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/22110,saltstack_salt_issues_22110,"batch mode from master of master doesnt work as expected -- 

running `salt '*' test.ping -b 50` runs against the minions (intermediary masters or minions directly connected) only. This is on rc1",Do you want syndics to respond to `test.ping` as well?,"this is not just for test.ping, i tested it using cmd.run as well. Or are you saying that i should not be running the commands from master of master?? if i were to run with -b option, it runs fine.. but adding -b would only applies to minions that are directly connected."
saltstack/salt,https://github.com/saltstack/salt/issues/23158,saltstack_salt_issues_23158,"client_acl and syndic 

While client_acl works from master where minions actually connected to, client_acl doesn't work from master of master . ie : `salt '*' test.ping` works from master that has direct connections from the minions `salt '*' test.ping` from master of master shows timeout from the directed minions only, ie syndics of masters. Sound very familiar to the issue i am having while using batch mode https://github.com/saltstack/salt/issues/22110 thats the ticket i raised about batch mode not working in #20152. ",Can you show us your client_acl config?,"The config is really simple..  running the same command from the intermediary master returns ""all"" the minions that are directly connected and not VIA syndic. Is it more clearer? CKminions function not returning properly??"
saltstack/salt,https://github.com/saltstack/salt/issues/23418,saltstack_salt_issues_23418,"same job using reactor

I see two jobs with different JID from same reactor firing like mulitple seconds apart. Has anyone experienced this ? I am running 201502 from the recent branch. I wondering if there is loop issue or not.","Will you post the associated configs, logs, and commands you're looking at?","Looking at the minions local job cache the job got executed twice about 20secs apart. I am consistently seeing mulitple jobs Once thing that is really puzzling is that this script does git pull and the result output is same for both pull which doesnt make sense. IE if git pull is successful, the next subsequent pull should not have same output or none, but the jobs output shows otherwise.. "
saltstack/salt,https://github.com/saltstack/salt/issues/23733,saltstack_salt_issues_23733,"missing results using peer (publish.publish)

We have multilevel syndics and running 201502 branch. (Guess i will need to update to 201505 branch) For some pattern matching, the results are returned properly but sometimes it doesnt. on a minion:  So the jobs are getting to the tagetted minions with different JID (is this normal?) Is there a like jid table on the master to match the jid it sent and received initially by a minion? So on the minion that published, i see no result other than above using --metadata The other thing to note is that, should the executing user be root on the targetted minion as opposed to the euid?","Will you try again with 2015.5.0? Also, what are the debug logs and the configs and commands you are using? Thanks.","upgrading it today -- will provide more info as you requested then ,"
saltstack/salt,https://github.com/saltstack/salt/issues/29052,saltstack_salt_issues_29052,"unclosed TCP connections on salt master

on saltmaster netstat -na |grep 10.197.207.1 tcp 0 0 10.198.135.29:4505 10.197.207.1:55231 ESTABLISHED tcp 0 0 10.198.135.29:4505 10.197.207.17:38670 ESTABLISHED tcp 0 0 10.198.135.29:4506 10.197.207.1:40850 ESTABLISHED tcp 0 0 10.198.135.29:4506 10.197.207.17:45154 ESTABLISHED on minion netstat -na |egrep "":450[56] "" tcp 0 0 10.197.207.1:40850 10.198.135.29:4506 ESTABLISHED tcp 0 0 10.197.207.1:55231 10.198.135.29:4505 ESTABLISHED I seem to recall there was a ticket similar in the past that is supposely fixed but i cant locate..  msgpack-python: 0.4.6 msgpack-pure: Not Installed pycrypto: 2.6.1 libnacl: Not Installed PyYAML: 3.11 ioflo: Not Installed PyZMQ: 14.7.0 RAET: Not Installed ZMQ: 4.1.2 Mako: Not Installed Tornado: 4.2.1 timelib: Not Installed dateutil: 2.2",Can you point to a specific series of steps that can recreate this problem?,duplicate ticket ref #28640
saltstack/salt,https://github.com/saltstack/salt/issues/21527,saltstack_salt_issues_21527,"State in SLS is Unvailable

Trying to get a CentOS 7 minion to work in a fairly simple state file:  Doing a service.get_all returns the proper service name. Nginx exists in /usr/sbin on CentOS 7, but symlinking it to /usr/bin has no effect. Any other likely issues or things to look at with this?",Can you also post the output of `salt --versions-report`?,The command is just to put highstate on the single clent this policy is applied to. From master: `salt 'clientname' state.highstate` Version report from master: 
saltstack/salt,https://github.com/saltstack/salt/issues/21713,saltstack_salt_issues_21713,"module/state dockerio requires docker-py==0.5.0 which is deprecated

Current latest stable version of `docker-py` is `1.1.0` : https://pypi.python.org/pypi/docker-py Earliest version available in the github repo is `0.6.0` : https://github.com/docker/docker-py/ _ie_. `0.5.0` is no longer maintained. The current salt docs require `0.5.0` which I have tested and it works. However updating to any stable version of `docker-py` breaks the `dockerio` module/state. http://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.dockerio.html",Can you be more specific? What actions fail? Are there tracebacks?,"@terminalmage I am not seeing any errors however, the port_binding is not working. This was when running it was 2015.2 HEAD and `docker-py` version `1.1.0`"
saltstack/salt,https://github.com/saltstack/salt/issues/21582,saltstack_salt_issues_21582,"virt.start VM fails without error

I've been experimenting with salt.virt but I noticed there was a missing error message. On several times, when I use `salt-run virt.start vm` to start a VM on a host it returns `Started VM vm` with no error although the VM failed to start on the hypervisor due to a certain problem.",Do you have the same problem if you upgrade to the latest stable version (2014.7.2)?,Thanks for your answer. My bad! I guess I didn't use the salstack official repo for installing the minion. I'll do that first thing on monday and get back to you.
saltstack/salt,https://github.com/saltstack/salt/issues/23564,saltstack_salt_issues_23564,"output duplication

is this an issue on the develop version or i have a issue on my machine ?! it also happens with state.sls so its not just test.ping ![screenshot from 2015-05-12 01 07 45](https://cloud.githubusercontent.com/assets/4104127/7576955/e1c8b7aa-f84b-11e4-858e-cc55accb0b25.png) ",Will you also post the debug master and minion log output during the test.ping operation? Is this consistently reproducible?,@jfindlay I am using 2015.5.0 before it marked as latest release. I will try the version which is marked as latest release if it has the same issue minion debug:  it shows one command however on master i got duplicated output
saltstack/salt,https://github.com/saltstack/salt/issues/26382,saltstack_salt_issues_26382,"Archive execution module works in a wrong way

I am trying to tar a file using the following options `cvfP` but every time saltstack is adding a hyphen before the options which makes the command not executing in a correct way. ",What is the output of `salt --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/42351,saltstack_salt_issues_42351,"question about the publisher port

Hello, May I know why there is no way to configure the master publish port on the minion side ? something similar to `master_port` but should provide an alternative port instead of 4505 which should be equivalent to the `publish_port` on master configuration. Is there a workaround within salt code or something I could do in order to add this feature to the minion ?",Can you share a sanitized version of your master/minion configs?, when i tested these configs i found that the master is telling the minion about the publish_port at the initial connection when the salt key is sent from the minion to master. before testing i thought i have to make a redirect rule in order to make it work
saltstack/salt,https://github.com/saltstack/salt/issues/21864,saltstack_salt_issues_21864,"applying a formula with git.latest states and test=True will rm an existing target path

Apologies if this is a duplicate, I looked for an existing issue but could not find one specific to this problem. I am running `Helium`:  ..the path `/srv/salt/foobar-salt-formula` is still on the filesystem and populated. I've received consistent results in my tests here, salt is definitely losing data on me (likely through mishandling of git).","Do you know the package and version that you're using with salt, GitPython, pygit, or dulwich?","@jfindlay:  What is the best way to determine the backend? From what I can tell, I have not installed any of those, and salt is using git directly. When I review the module's code (`/usr/lib/python2.7/dist-packages/salt/modules/git.py` on the filesystem), I only see the `cmd` module used to run `git` directly, and the module's `__virtual__()` does a `which git`."
saltstack/salt,https://github.com/saltstack/salt/issues/33645,saltstack_salt_issues_33645,"saltutil.sync_all does not sync custom pillar modules to masterless minions

### Description of Question In attempting to use the `saltutil.sync_all` module and the `extension_modules` configuration option, and having read various docs ([1], [2] in particular), I am unclear about the semantics and what I should expect from these when used in combination. Herein, I have a couple of questions: 1) If `extension_modules` is _not_ in use, where does `saltutil.sync_all` sync modules too? 2) If using `extension_modules`, when should I expect `saltutil.sync_all` to remove/delete files that are not in my `file_roots` paths? (`_states`, `_modules`, etc). EG, if I manually (not with salt) put modules into the `extension_modules` path (`/srv/salt-ext` in my case), when will `saltutil.sync_all` remove those modules of mine? 3) If you wish to include a custom pillar (`ext_pillar`), can I expect `saltutil.sync_all` to sync that pillar module from `_pillar` in my `file_roots`? In the past I copied these custom pillar modules into `/srv/salt-ext/` manually. ### Versions Report I have this setup in masterless mode, primarily:  ### Links [1] https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.saltutil.html#salt.modules.saltutil.sync_all [2] https://docs.saltstack.com/en/latest/ref/states/writing.html#using-custom-state-modules",Does that help answer all your questions?,"Hi @Ch3LL, thank you for your time and attention in helping me out. There are a few small details I would appreciate confirmation on: - If I understand correctly, setting `extension_modules` to `/srv/salt-ext`, overrides the default of `/var/cache/salt/minion/extmods/modules`, and that is where `saltutil.sync_all` will put those files that it syncs. Yes? - Will `saltutil.sync_all` actually _create_ that `extension_modules` path if it does not exist? I see log entries that suggest that as expected behavior, but I don't see it functional unless I ensure that base path exists before running `sync_all`."
saltstack/salt,https://github.com/saltstack/salt/issues/34080,saltstack_salt_issues_34080,"saltutil.sync_all fails when building AMI with packer, but works with manual tests

### Description of Issue/Question I have a bit of a heisenbug that is driving me bonkers, and I'm running out of ideas. I'd appreciate a review of the details and any insights you might have that could lead to the behavior I am seeing. **this is on masterless** - I am running these operations with `salt-call --local ...` ### Setup I am building AMIs for AWS with packer. I have a set of scripts which install and configure salt, then use `salt-call --local` to apply a bunch of formula. In the middle of these scripts, I run `salt-call --local saltutil.sync_all` to ensure later `state.sls` and `state.highstate` can use the custom modules/states included in the file_roots setup during bootstrap. When that `sync_all` runs in the scripts, it fails to find and sync those custom modules/states: ",Can you ensure the files are indeed where hey need to be synced from? Maybe include a `ls <directory` before that command is run to make sure.,"The salt formula are checked out with git as part of the salt bootstrap (before the sync), so they should be in place. I am almost certain that is the case, though I will check with care to be even more sure."
saltstack/salt,https://github.com/saltstack/salt/issues/42485,saltstack_salt_issues_42485,"SSL handshake errors from file.managed for Atlassian.com

### Description of Issue/Question When I use `file.managed` to download release tarballs from `https://www.atlassian .com/`, I see a confusing SSL handshake failure. Wget, curl, and my browser download those files fine. It looks like Atlassian is doing something that interferes with the `file.managed` retrieval. I've run tests on the latest release (installed with `pip install --upgrade` from 2015.5.11), as well as with 2015.5.11, and I see the same error. ### Setup I am using masterless with `salt-call --local`, and ``state.low` to show the example: ",Can you try using the URL that the original request is redirected to in the call?,"Hi @garethgreenaway, thanks for the review. so yea, reviewing the wget / curl logs again, I see 3 URLs.. * www.atlassian.com * my.atlassian.com * downloads.atlassian.com Using wget/curl, I can retrieve the archive with either www or my.atlassian.com, but not downloads.atlassian.com:  If the cookie/session handling is not an issue, perhaps `requests` (or similar, whoever does the SSL validation) is failing to use the `subjectAltName`, and instead sees the `subject` with `*.atlassian.io`?"
saltstack/salt,https://github.com/saltstack/salt/issues/21907,saltstack_salt_issues_21907,"Test scenario using master|syndic|minions (minions of syndic not seen by master of master)

I am new to using saltstack. Doing a POC where I have the following topology:  My setup is done using docker - I would be happy to share dockerfiles and my notes",Did you make sure `order_master` is set to `True` in the top-level master's config file?,"All nodes are running the same version of salt - I have been setting up using a common docker image that uses yum to install salt. You are right. From syndic, all 3 minions (self, host1, host2) are found using ""_"" from top level master host1 is missing (self, sydic, host2 are found). Additional problem is that on syndic ""host_"" matches host1 and host2, but on top level master, it matches nothing. The top level master does NOT have order_master set to True. I missed that in the syndic setup instructions. Will test and update with results"
saltstack/salt,https://github.com/saltstack/salt/issues/21985,saltstack_salt_issues_21985,"minion daemon fails to install packages when environment requires http proxy

My environment requires access via http proxy. I use RHEL 6.4 and run salt-minion as a service. When I try to use state.sls to install packages, I get failures (""Error Downloading Packages"" in log) I have tried setting htt_proxy, https_proxy in ~root/.profile and also in /etc/environment (and re-starting the minion service) but that does not work. I found prior issues on this: https://github.com/saltstack/salt/pull/5937 https://github.com/saltstack/salt/issues/13786 but no indication of what the final resolution is, if any.",What do you mean `this needs to be added to salt-minion configuration`?,"@basepi what I meant is that I expected some parameter in the minion config to set the proxy. That may not be a good idea, but I could not find any guidelines as to how to overcome the proxy issue when using pkg: install. I had naively believed that the solution I used in my standard linux env (setting http_proxy in the environment) would work. I think a low hanging fruit solution would be to add a note in the docs for salt.states.pkg mentioning how to best handle deployments using an http_proxy."
saltstack/salt,https://github.com/saltstack/salt/issues/21923,saltstack_salt_issues_21923,"Salt cloud not running  provisioning script as root

Hi Guys: I've pasted my issue to this pastebin: http://pastebin.com/JJkweVmN Essentially, after the minion is cloned salt cloud copies the required files and scripts across to the minion and SSHs in to run the scripts. This fails with this error: ERROR: Salt requires root privileges to install. Please re-run this script as root. However, I've configured the option (as you'll see in the pastebin) sudo_password: mypassword, however it still dose not seem to work. It seems like it's a bug and simply not running sudo before the whoami. My workaround on Ubuntu was to enable the root user and tell salt to use that so when it runs it's whoami it returns root and the provisioning script can continue. In case the pastebin dies: Configuration: However, this is my configuration: ",Can you post the output of `salt --versions-report`? Are you in a place to give this a try using develop as @djcrabhat suggested? @techhat Have you seen this one before?,Thanks @rallytime! I'm not really in a position to try develop at the moment but might be able to spin up a new box when I get some time. 
saltstack/salt,https://github.com/saltstack/salt/issues/22295,saltstack_salt_issues_22295,"salt-auth yubico isnt working.

I am trying to test the new yubico auth in 2015.2.0rc1. I am getting this error. ",Would you mind taking a look here?,"root@saltmaster-dev:~# python -c 'import yubico_client' root@saltmaster-dev:~# echo $? 0 2015-04-03 13:46:00,276 [salt.master ][ERROR ][8309] Exception occurred while authenticating: 'delimiter', 'show_timeout' and 'show_jid' are invalid keyword arguments for salt.loaded.int.auth.yubico.auth. If you were trying to pass additional data to be used in a template context, please populate 'context' with 'key: value' pairs. root@saltmaster-dev:~# salt --versions Salt: 2015.2.0rc1 Python: 2.7.8 (default, Oct 20 2014, 15:05:19) Jinja2: 2.7.3 M2Crypto: 0.21.1 msgpack-python: 0.4.2 msgpack-pure: Not Installed "
saltstack/salt,https://github.com/saltstack/salt/issues/22649,saltstack_salt_issues_22649,"Open files issue with gitfs (pygit2) Backend 

I have in issue with open file limit and gitfs fileserver backend. I see no message in Logs until the system open file limit reached, then i get the following messages  but all python Module are from head of 2014.7 branch from March 26 2015.",Did you try runing lsof and seeing where all the open filehandles are?,"Yes i did, that why i think the issue is with git. Here my lsof (open file count: ~160k) "
saltstack/salt,https://github.com/saltstack/salt/issues/23604,saltstack_salt_issues_23604,"service.dead on systemd Minion create an Error Message

I have an service.dead State in my setup. On my Minions with systemd i get an ""Command Excection"" error Message. The message reported that ""systemctl is-active <service>.service"" exited with exit code 3. Exit code 3 is the correct exit code from this command. I think there shouldn't be a error message. I use Salt 2014.7.5.",Do you consider this issue ready to be closed since your pull request has been merged?,"Yes, i think i can close the issue."
saltstack/salt,https://github.com/saltstack/salt/issues/21997,saltstack_salt_issues_21997,"chef.solo IndexError: list index out of range

The /var/log/chef-solo.log file shows that chef-solo runs successfully, but salt returns this error: ",Would you mind taking a look here?,That fixed the problem. Thanks for the quick fix.
saltstack/salt,https://github.com/saltstack/salt/issues/22003,saltstack_salt_issues_22003,"ImportError: No module named salt.scripts

Fresh install of the salt-minion from epel won't start. Is this maybe a issue with a python dependency that has changed? This also happens when I install 2014.7.2 from epel-testing ",What distro are you installing this on? ping @terminalmage,This is with the latest Amazon Linux AMI. I was able to install and run salt as recently as last week with the same distro [ec2-user@ip-192-168-211-30 ~]$ uname -a Linux ip-192-168-211-30 3.14.23-22.44.amzn1.x86_64 #1 SMP Tue Nov 11 23:07:48 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux
saltstack/salt,https://github.com/saltstack/salt/issues/27138,saltstack_salt_issues_27138,"Exception occurred while authenticating: 'dict' object has no attribute 'endswith' with external_auth: ldap

Hello, I'm getting the following exception when trying to do external_auth: ldap with LDAP (FreeIPA 3.x to be more precise): Output of salt-master -l all  Salt-master is running as 'salt' user.",Does that fix it? Cheers Tim,@tbaker57 Unfortunately it does not: 
saltstack/salt,https://github.com/saltstack/salt/issues/33807,saltstack_salt_issues_33807,"salt 2016.3.0 will not start on FreeBSD

### Description of Issue/Question salt 2016.3.0 does not start on FreeBSD 10.3. py27-salt-2016.3.0 was installed with defaults from FreeBSD ports. When I run /usr/local/etc/rc.d/salt_master onestart (or start or even salt-master -l debug), it just hangs. ",Did you upgrade your packages or is this a clean install?,"Hi @Ch3LL, this is a completely clean installation of Salt and FreeBSD. System is less than 10 days old. System has been fully updated too. I can't think of a reason why it would be trying to stat or read /etc/nsswitch.conf but I do have an idea. I started doing some more research on my working, clean FreeBSD 10.3 VM. On that VM, I was able to bring up salt-master successfully. While trussing the salt-master process, I noticed that it was trying to open /usr/local/lib/python2.7/site-packages/pysss.so which was missing on the working VM. Whether that was salt-master or some other module, I don't know but I'll try to find out. pysss.so belongs to sssd package/daemon which would explain nsswitch.conf but I'm not sure why anything would read it when the daemon is stopped. I then removed sssd package on my system that wouldn't start salt processes and now salt-master starts up successfully. Success! What's strange is that sssd was not running on any of my systems. I'll dig deeper to see if maybe some other tool caused it to hiccup."
saltstack/salt,https://github.com/saltstack/salt/issues/45154,saltstack_salt_issues_45154,"Missing repo for AMZN Linux 2 (2017.12)

### Description of Issue/Question Seems like there is a missing repo for Salt packages for Amazon Linux 2 (2017.12) ### Setup Just a standard EC2 instance with Amazon Linux 2 provisioned: amzn2-ami-hvm-2017.12.0.20171212.2-x86_64-gp2 (ami-7707a10f) ### Steps to Reproduce Issue Install the Salt Amazon repo file:  ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)","Did Amazon Linux 2 change the default `$releasever` value? It used to by default resolve to `latest`, which would still work, http://repo.saltstack.com/yum/amazon/latest/x86_64/latest/...","@lorengordon It seems like YUM points to `2017.12` instead of `latest`:  Tweaking `/etc/yum.conf` did not seem to work. Regardless, I will wait patiently for the new Salt release to drop :)"
saltstack/salt,https://github.com/saltstack/salt/issues/24910,saltstack_salt_issues_24910,"-T, --make-token flag does NOT work- LDAP Groups

The salt ""-T (--make-token)"" token flag fails to work with the ""external_auth"" enabled. This seems to only happen when specifying the LDAP group. For example: external_auth: ldap: mygroup%: - '_': - ._ On another note, it would be great to have the CLI pick up the user directly from the shell, thus having to avoid specifying --username. Thanks!",What version of salt are you using? `salt --versions-report`,Salt: 2014.7.6 Python: 2.6.6 Jinja2: 2.7.3 M2Crypto: 0.22 msgpack-python: 0.4.6 msgpack-pure: Not Installed pycrypto: 2.6.1 libnacl: Not Installed PyYAML: 3.10 ioflo: 1.2.4 PyZMQ: 14.6.0 RAET: Not Installed ZMQ: 4.0.5 Mako: 1.0.1
saltstack/salt,https://github.com/saltstack/salt/issues/28807,saltstack_salt_issues_28807,"pkg.installed fails under 2015.8.1 with ""-"" in the key name

There seems to be a bug in 2015.8.1 with pkg.installed when there is a ""-"" in the name of the source package key. For example ",Why are you suspecting `-` characters in the key name? Have you tried keys without `-` in the name?,@jfindlay yes we have. It only failed with '-' in the key name. Failed: aspera-scp-p2p: salt://aspera/files/aspera-scp-p2p-3.5-linux-64.rpm Worked: asperascpp2p: salt://aspera/files/aspera-scp-p2p-3.5-linux-64.rpm Thanks!
saltstack/salt,https://github.com/saltstack/salt/issues/25368,saltstack_salt_issues_25368,"salt-ssh highstate output in 2015.8

I assume this is is only a `salt-ssh` issue but haven't tested the other clients. Highstate runs are currently very verbose, while `state.sls` runs output as normal.  Furthermore, like half the outputters specified with `--out` have errors. I can provide examples of the error output if you like, but they seem easily reproducible.","Do you know if this applies to other releases, or is it specific to 2015.8?","Definitely an issue with 2015.8. I have a local git copy installed with `pip install -e`, and switching between the 2015.5 and 2015.8 branch makes the errors disappear and appear, respectively. I could try some git bisecting, if you have any ideas what commits I should target."
saltstack/salt,https://github.com/saltstack/salt/issues/26368,saltstack_salt_issues_26368,"Less output when Salt-SSH can't connect to server

Currently, if I `salt-ssh '*' state.apply` and one of the servers are down, I get over 200 lines of output, including the entire master options dict. I suggest something like this instead: ","Do you consider this issue good to close, then?",Sure.
saltstack/salt,https://github.com/saltstack/salt/issues/29670,saltstack_salt_issues_29670,"Error when caching reactor?

",Do you know if this worked in previous releases?,"Unfortunately, I have no idea."
saltstack/salt,https://github.com/saltstack/salt/issues/30226,saltstack_salt_issues_30226,"Custom returner exceptions are swallowed

If I have a custom returner that throws an exception, that exception is never logged anywhere.",Do you have a minimal example?,"Oddly enough, I can't reproduce the issue. I'll close the issue for now and re-open if I find out what caused it to happen in the first place."
saltstack/salt,https://github.com/saltstack/salt/issues/31576,saltstack_salt_issues_31576,"salt-ssh doesn't seem to work with binary pillar data

I'm storing a GPG private key in a pillar using the yaml `!! binary` tag. This seems to be working fine in a master/minion setup, but when running salt-ssh I get this error: ",What salt-ssh version are you using?,I was running v2015.8.7 when I first encountered it.
saltstack/salt,https://github.com/saltstack/salt/issues/32357,saltstack_salt_issues_32357,"salt.log.setup causing Salt's exception handler/logger to always be registered

I'm using `salt.client.LocalClient` in my code. `salt.client` imports `salt.utils`. `salt.utils` imports `salt.log`. `salt.log` imports `salt.log.setup`. `salt.log.setup` has [a line of code](https://github.com/saltstack/salt/blob/e1ef4a9d668b2ba8948092118566c689ada953db/salt/log/setup.py#L807-L808) that modifies the global exception handler as soon as the module gets imported. I don't really want this to happen. Is it possible to wrap this operation in a function that needs to be called for the exception logging to be set up, or not have `salt.log.setup` be imported so easily?",Could you just set it back after the import in your code?,"I guess I could, but it still feels wrong. "
saltstack/salt,https://github.com/saltstack/salt/issues/32662,saltstack_salt_issues_32662,"salt-cloud: allow templating of EC2 userdata, similar to deploy script

In my mind, AWS EC2 userdata could be used as a replacement for the salt cloud deploy script. In that regard, all it's missing is the ability to template in the salt minion keys, minion ID etc.. This could be done by replacing https://github.com/saltstack/salt/blob/develop/salt/cloud/clouds/ec2.py#L1691-L1693 with `userdata = salt.utils.cloud.os_script(userdata_file)`, but that might not be backwards compatible? Then again, what are the chances of someone using jinja tags in their userdata file?",What about using something like the [cloud state](https://docs.saltstack.com/en/latest/ref/states/all/salt.states.cloud.html)? @techhat What are your thoughts on this one?,"We want to use Salt purely for host configuration management, so putting EC2 (and other AWS resource) information into a state tree isn't really an option for us. We're only evaluating salt-cloud because it is a decent wrapper around the logic we need (generating and accepting keys, spawning the instance and making sure a salt minion is started). This was one of the main missing features for our usecase - we'd like to avoid configuration over SSH entirely, if possible."
saltstack/salt,https://github.com/saltstack/salt/issues/32888,saltstack_salt_issues_32888,"git_pillar lock file persists when restarting Salt master

Restarting the Salt master seems to cause the git_pillar lock file to stay. Right after the restart, log messages about there being a lock file starts popping up all the time and we have to manually clear the lock. ",Can you test against the head of the 2015.8 branch?,Seems to work OK now. I'll re-open if the issue pops up again. Thanks!
saltstack/salt,https://github.com/saltstack/salt/issues/47921,saltstack_salt_issues_47921,"[develop] file.serialized with json and merge_if_exists doesn't work due to wrong options being passed to deserialize function

I was looking forward to using `file.serialize`'s new `serializer_opts` argument on the develop branch, but ran into a problem when trying it out. Given a state like: ",How did you install salt? did you do a `pip install -e .`? Can you run `git describe` in the repository? ,"Made a virtualenv, `pip install -e .`. I re-created the virtualenv from scratch just now and wiped all .pyc and __pycache__ files just to be sure. "
saltstack/salt,https://github.com/saltstack/salt/issues/22081,saltstack_salt_issues_22081,"master unable to contact minion after server restart

Hi there, After restarting our salt-master server it is unable to contact the minions until each minion service is restarted, is this a known issue? Thanks, Luka Page",What operating systems are you using for your master and affected minions?,"Hi, Apologies for the late response, the salt version for the master is: Salt: 2014.7.1 and the minion is: Salt: 2014.7.1 We installed Salt via yum and we are running Oracle Linux 6 on both minion and master. Thanks,"
saltstack/salt,https://github.com/saltstack/salt/issues/41646,saltstack_salt_issues_41646,"Duplicate Salt instances on Minion Upgrade

### Description of Issue/Question Hi, We're in the process of upgrading our instance from 2016.11.3 to 2016.11.5 and I have a state which is below that will upgrade the minions however once ran the previous version of salt-minion is still running, the only way I've managed to rectify this is ssh'ing into the minion, stopping the salt service then killing any remaining processes - this isn't ideal for a large estate like ours and it's happened on each minion I've upgraded. Is there a suggested way to control this? has this been confirmed as a bug at all?  As you can see I'm reloading the service in my state but this doesn't resolve the issue - a test_versionreport will return the new and old version of the minion until all processes have been killed. ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt-master version report: `Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: 1.8.2 cherrypy: 3.2.2 dateutil: 1.4.1 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.20.2 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pygit2: Not Installed Python: 2.6.6 (r266:84292, Jul 23 2015, 05:13:40) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.3.1 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 3.2.5 System Versions: dist: oracle 6.7 machine: x86_64 release: 3.8.13-98.5.2.el6uek.x86_64 system: Linux version: Oracle Linux Server 6.7 ` I don't really fancy having to SSH into 100 minions to kill the processes :( Thanks, Luka Page",What about the other workaround I mentioned to schedule a forcekill of the PIDS that aren't properly shutting down?,"Hi @Ch3LL Thanks for your response, I ended up writing a script outside of salt to do the upgrade that killed the old PIDs then did the upgrade, was abit more hassle not using Salt to do it but atleast we're upgraded. Thanks,"
saltstack/salt,https://github.com/saltstack/salt/issues/22149,saltstack_salt_issues_22149,"newbie with a question.

I've been following the example command line but still get syntax error at ^Z in python 2.7 ",Can you provide a link to the example/docs you are looking at?,https://search.yahoo.com/search?p=brute+force+hacking+tool&ei=UTF-8&fr=chr-greentree_ff&ilc=12&type=635779
saltstack/salt,https://github.com/saltstack/salt/issues/24096,saltstack_salt_issues_24096,"salt-ssh: Too many authentication failures

salt-ssh `--passwd` option doesn't seem to work. I'm getting a `Too many authentication failures for root` when trying to run anything. Running from a script on an OSX machine if that matters. I can execute a command in my terminal like `ssh root@myhost 'ls /'` without issue. I'm prompted for a password and upon supplying it my command runs. Therefore, it doesn't appear to be an issue with the ssh configuration on the host. In the diagnostic info dumped when the command fails, `ssh_user` and `ssh_passwd` are correct, so I know the `--passwd` option is being seen. If I use the `--askpass` option, I am prompted for a password. Upon supplying it, the command fails with the same `Too many...` error. Adding `--key-deploy` doesn't change anything, presumably because I'm never authenticated in the first place. I'm trying to figure out if there's something I've overlooked.",What system are you trying to salt-ssh into? Does it work if you try something else?,"Fresh Ubuntu-14.04 install with a root password set and no other modifications. salt-ssh fails no matter what command I try. As stated at the end of the above comment, other means of connecting via SSH w/ pasword work fine. I can do it from command line with ssh, and I've got a node+pty.js script that spawns a command line process which also works fine."
saltstack/salt,https://github.com/saltstack/salt/issues/24727,saltstack_salt_issues_24727,"Unexpected pillar behavior when setting up a master with salt-ssh

I'm standing up a salt master via salt ssh. My process is as follows: - Use salt-ssh salt.master to install salt-master service on the target - Checkout my states and pillar data from git into `/srv/salt` and `/srv/pillar` on the target Problem is, once I populate /srv/pillar from git, that data starts getting merged into the local pillar data I've supplied from salt-ssh. All further calls from salt-ssh get pillar data I did not intend to be used during salt-ssh calls. Is this expected? Is there any way I can tell salt-ssh calls to ignore the contents of /srv/pillar on the target? As an example, I have an `sshd_config` pillar item for use with the openssh formula under /srv/pillar on my local machine (the machine I run salt-ssh on). In my git repo that gets checked out into /srv/pillar on the target, I have a different `sshd_config` that I intend to be applied to all minions this master will manage. However, once that git repo has been checked out, its `sshd_config` pillar item starts getting applied whenever I call `salt-ssh '*' state.highstate` instead of the pillar item defined on my local machine.",What is your salt --versions-report output?,@arroyoc Sorry. I keep forgetting to append that. 
saltstack/salt,https://github.com/saltstack/salt/issues/25455,saltstack_salt_issues_25455,"salt:// transfers are very slow for large files

## Repro steps 1) Place alargefile (100MB or so) on srv/salt on master 2) Run  I don't know how this may or may not be related to earlier issue #24048 - since apparently tornado is no longer required and I don't have it installed (if I believe salt --versions).",Do you have any potential network issues? Do the master or minion debug or trace logs show anything interesting or pause at interesting places?,"@jfindlay thank you for trying to repro. I just did another repro attempt with an even larger file and it worked fine (100MB in 5 secs - which is acceptable). Unfortunately, I think I simplified this test case a bit too much. My real use case is pulling large files out of a gitfs-hosted (pygit2/libgit2 backed) formula. I just tried that again and it is still slow. This probably deserves a different ticket #25672"
saltstack/salt,https://github.com/saltstack/salt/issues/22366,saltstack_salt_issues_22366,"Minion stops responding to commands after highstate with bad indentation in state

After running: `salt '*' state highstate test=True` on the master, the minion stopped responding to any command until salt-minion was killed and restarted. In the minion log: ",Could you provide a sample state which can reliably illustrate this error? Thanks!,"I did some debugging. This occurs when refreshing pillar data on the minion. I'm using `ext_pillar` with `gitfs`, and have a post-receive hook triggering `saltutil.refresh_pillar`. When this happens, the minion stops respondig even to `test.ping`. This is all I see in the debug log:  I tried stracing the process, it is stuck in a POLL."
saltstack/salt,https://github.com/saltstack/salt/issues/22402,saltstack_salt_issues_22402,"tls.create_self_signed_cert misses subjectKeyIdentifier

with openssl you may create a self signed cert like this:  Depending on default openssl.cnf for example from openssl ubuntu package, `[usr_cert]` includes `subjectKeyIdentifier=hash`. But `tls.create_self_signed_cert` misses this, which will let fail, in my case, the certificate creation from salt master (with external pillar, best practice see [here](https://groups.google.com/forum/#!msg/salt-users/D1WRJPaE284/Zjz-rXnucG8J)) for encrypted bacula backups, because bacula file daemon needs `subjectKeyIdentifier` within the self signed cert. `subjectKeyIdentifier` is set only within the salt module for ca cert based certificate creation",Can you post the output of `salt --versions-report` please? This will help with identifying where the bug should be fixed and for historical purposes., same happened to official Ubuntu build (same version 2014.7.2)
saltstack/salt,https://github.com/saltstack/salt/issues/36223,saltstack_salt_issues_36223,"External_pillar returns twice?

We are testing our own external_pillar source, we've seen ""calls"" to the external_pillar source twice on every call. ### Setup our external_pillar used in debugging this ""issue"" ",Do you agree this is what you are running into? User states they found the initial problem when the external pillar was being called twice thanks,To be honest I have no idea :$ Trying to understand what is being discussed in #21342; it looks like that discussion is more about git as an external pillar source?
saltstack/salt,https://github.com/saltstack/salt/issues/23536,saltstack_salt_issues_23536,"when I run as  salt-ssh \* state.sls test pillar='{""hello"":""hello""}' ,The following error occurred,but I run as salt \* state.sls test pillar='{""hello"":""hello""}' is ok ,this is why 

",Do you have the same problem after upgrading to 2015.5.0?,"@jfindlay 7.2 version of the test results are correct,but with list target execution error like this "
saltstack/salt,https://github.com/saltstack/salt/issues/47364,saltstack_salt_issues_47364,"ZFS grain/module unable to be reloaded during state run

### Description of Issue/Question Unable to reload the zfs module during a state run. #### Expected behaviour 0. run `state.apply` 0. Install zfsutils-linux package 0. reload zfs module 0. create zpool 0. `state.apply` finishes #### Actual behaviour 0. Installs zfsutils-linux package 0. Reloads module but does not enable (because `zfs_available` grain is not updated) 0. Fails the create zpool due to module not being loaded corectly 0. `state.apply` finishes 0. run `state.apply` again and it works Debug log: https://www.hastebin.com/himapiladu Looks like it's unable to reload and activate the module due to relying on the grain `zfs_support` which is not being updated, changing the order of `reload_modules` and `reload_grains` in the below formula has no effect. ### Setup ",Can you try again after you have removed  from the is_supported function in salt.utils.zfs?,So I edited `/usr/lib/python2.7/dist-packages/salt/utils/zfs.py` then removed `/usr/lib/python2.7/dist-packages/salt/utils/zfs.pyc` and started the salt-master. Assuming this works (in lieu of an actual salt dev environment). Removing `@real_memoize` from above `is_supported` did not work (same formula as above).
saltstack/salt,https://github.com/saltstack/salt/issues/22514,saltstack_salt_issues_22514,"git.latest fails on tag in 2015.2.0rc2

Contents of gitbug.sls:  I think this issue may be related to https://github.com/saltstack/salt/issues/22056#issuecomment-91066465","Do you know if this happen consistently? Also, can you provide the output of `salt-call -l debug --local state.sls gitbug`?","Yes, this happens consistently. If I remove the repository. I can reproduce the entire process (with the first run succeeding, and the second run failing), and also every run after the second fails in the same way as the second run. Output of `salt-call -l debug --local state.sls gitbug` https://gist.github.com/Bjwebb/c9676fa89a2e2e668fe4 Also, here's the output of the same command is run the first time (when the repository does not yet exist) https://gist.github.com/Bjwebb/1ca1eb0ab50bd6578487"
saltstack/salt,https://github.com/saltstack/salt/issues/22528,saltstack_salt_issues_22528,"Not able to install Saltstak master .

Hi all. While install saltstack on ubuntu I see below issue . ","Could you show us the output of `apt-cache policy salt-{master,common}` ? Did you follow http://docs.saltstack.com/en/latest/topics/installation/ubuntu.html ?","Yes I am following same document .  On Fri, Apr 10, 2015 at 5:00 PM, Wolodja Wentland notifications@github.com wrote: ## _Regards._ _SkylabReddyInfrastructure Specialist for Cloud CoE , IBM Cloud India , * *+91-968-664-4000_"
saltstack/salt,https://github.com/saltstack/salt/issues/24979,saltstack_salt_issues_24979,"[Discussion] Support for more than 1 netapi.rest_tornado server process

Currently rest_tornado cannot start multiple server processes due to app.event_listener reusing the same sock_dir and handler to open up the ipc on zmq event bus, ending up with killing the ipc repeatedly:  Wondering if it's reasonable to create multiple Tornado server processes since Tornado is already a non-blocking server framework. The reason I opening this discussion issue is that we're having about half million jobs filed per day from native salt command. With the effort of porting majority of the jobs via netapi for automation as well as more and more minions added in, support more Tornado server processes is a nicer perf improvement for us. Yet, this is just a suggestion for discussion.","What is the output of `salt --versions-report`? @jacksontj, do you have any ideas?",@jfindlay Sorry for late reply. It happens with 2015.5.0 Can't use the Helium version since it has a socket handler leak issue which is fixed in 2015.5.0 @jacksontj it's not b/c of Tornado :)
saltstack/salt,https://github.com/saltstack/salt/issues/22814,saltstack_salt_issues_22814,"Events are lost when salt-master is shutdown

2015.2 adds Event Returners ( http://docs.saltstack.com/en/latest/ref/returners/#event-returners ) Two new configuration options have been added to the Master config. event_return: <list of one or more returners> event_return_queue: <the number of events to queue before flushing to the event_return function in each returner specified in the Master config event_return parameter> The default for event_return_queue value is 0 ( https://github.com/saltstack/salt/blob/2015.2/salt/config.py ) The Event Return interface implements a multiprocess FIFO queue that flushes to the event_return function in each returner when len(event_queue) >= event_return_queue Events are lost if the event_queue contains events (hasn't filled the queue) and salt-master is shutdown. For example, if event_return_queue is set to 10, and salt-master is shutdown while there are 9 events in the event_queue, the 9 events in the queue are lost. Perhaps the graceful way to ensure all events have a chance to complete their journey (i.e. persist a DB), the salt-master should at least try to flush the queue(s) when salt-master is signaled to shutdown.",Can this be closed or does more work need to be done here?,@rallytime - Testing this now. I will close this issue if the patch proves to work.
saltstack/salt,https://github.com/saltstack/salt/issues/23046,saltstack_salt_issues_23046,"pip3 install error in 2015.2 - TypeError

A TypeError is encountered while installing Salt 2015.2. @thatch45 says to make this a blocker and that it should be a quick fix to setup.py Environment: Ubuntu 14.04 LXC container Salt: 2015.2 Steps to reproduce: sudo su - apt-get update apt-get install -y git python3-pip cd /usr/src/ git clone https://github.com/saltstack/salt.git -b 2015.2 cd salt pip3 install -e . <pre> root@saltmaster:/usr/src/salt# pip3 install -e . Obtaining file:///usr/src/salt Running setup.py (path:/usr/src/salt/setup.py) egg_info for package from file:///usr/src/salt 2015.2.0rc2-170-ge86e974 warning: no files found matching 'tests/unit/templates/files/*' Downloading/unpacking Jinja2 (from salt==2015.2.0rc2-170-ge86e974) Downloading Jinja2-2.7.3.tar.gz (378kB): 378kB downloaded Running setup.py (path:/tmp/pip_build_root/Jinja2/setup.py) egg_info for package Jinja2 warning: no files found matching '*' under directory 'custom_fixers' warning: no previously-included files matching '*' found under directory 'docs/_build' warning: no previously-included files matching '*.pyc' found under directory 'jinja2' warning: no previously-included files matching '*.pyc' found under directory 'docs' warning: no previously-included files matching '*.pyo' found under directory 'jinja2' warning: no previously-included files matching '*.pyo' found under directory 'docs' Downloading/unpacking msgpack-python>0.3 (from salt==2015.2.0rc2-170-ge86e974) Downloading msgpack-python-0.4.6.tar.gz (116kB): 116kB downloaded Running setup.py (path:/tmp/pip_build_root/msgpack-python/setup.py) egg_info for package msgpack-python Downloading/unpacking PyYAML (from salt==2015.2.0rc2-170-ge86e974) Downloading PyYAML-3.11.tar.gz (248kB): 248kB downloaded Running setup.py (path:/tmp/pip_build_root/PyYAML/setup.py) egg_info for package PyYAML Downloading/unpacking MarkupSafe (from salt==2015.2.0rc2-170-ge86e974) Downloading MarkupSafe-0.23.tar.gz Running setup.py (path:/tmp/pip_build_root/MarkupSafe/setup.py) egg_info for package MarkupSafe Requirement already satisfied (use --upgrade to upgrade): requests>=1.0.0 in /usr/lib/python3/dist-packages (from salt==2015.2.0rc2-170-ge86e974) Installing collected packages: Jinja2, msgpack-python, PyYAML, MarkupSafe, salt Running setup.py install for Jinja2 warning: no files found matching '*' under directory 'custom_fixers' warning: no previously-included files matching '*' found under directory 'docs/_build' warning: no previously-included files matching '*.pyc' found under directory 'jinja2' warning: no previously-included files matching '*.pyc' found under directory 'docs' warning: no previously-included files matching '*.pyo' found under directory 'jinja2' warning: no previously-included files matching '*.pyo' found under directory 'docs' Running setup.py install for msgpack-python building 'msgpack._packer' extension x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 -fPIC -D__LITTLE_ENDIAN__=1 -I. -I/usr/include/python3.4m -c msgpack/_packer.cpp -o build/temp.linux-x86_64-3.4/msgpack/_packer.o cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for C/ObjC but not for C++ [enabled by default] x86_64-linux-gnu-g++ -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-Bsymbolic-functions -Wl,-z,relro -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 build/temp.linux-x86_64-3.4/msgpack/_packer.o -o build/lib.linux-x86_64-3.4/msgpack/_packer.cpython-34m.so building 'msgpack._unpacker' extension x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 -fPIC -D__LITTLE_ENDIAN__=1 -I. -I/usr/include/python3.4m -c msgpack/_unpacker.cpp -o build/temp.linux-x86_64-3.4/msgpack/_unpacker.o cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for C/ObjC but not for C++ [enabled by default] msgpack/_unpacker.pyx: In function ‘PyObject* __pyx_pf_7msgpack_9_unpacker_2unpackb(PyObject*, PyObject*, PyObject*, PyObject*, int, PyObject*, PyObject*, PyObject*, PyObject*, Py_ssize_t, Py_ssize_t, Py_ssize_t, Py_ssize_t, Py_ssize_t)’: msgpack/_unpacker.pyx:141:33: warning: comparison between signed and unsigned integer expressions [-Wsign-compare] if off < buf_len: ^ msgpack/_unpacker.pyx: In function ‘PyObject* __pyx_f_7msgpack_9_unpacker_8Unpacker_read_from_file(__pyx_obj_7msgpack_9_unpacker_Unpacker*)’: msgpack/_unpacker.pyx:367:21: warning: comparison between signed and unsigned integer expressions [-Wsign-compare] self.max_buffer_size - (self.buf_tail - self.buf_head) ^ msgpack/_unpacker.pyx: In function ‘PyObject* __pyx_pf_7msgpack_9_unpacker_8Unpacker_8read_bytes(__pyx_obj_7msgpack_9_unpacker_Unpacker*, Py_ssize_t)’: msgpack/_unpacker.pyx:412:21: warning: comparison between signed and unsigned integer expressions [-Wsign-compare] nread = min(self.buf_tail - self.buf_head, nbytes) ^ In file included from msgpack/unpack.h:278:0, from msgpack/_unpacker.cpp:241: msgpack/unpack_template.h: In function ‘int unpack_execute(unpack_context*, const char*, size_t, size_t*) [with bool construct = false; unpack_context = unpack_context; size_t = long unsigned int]’: msgpack/unpack_template.h:346:9: warning: ‘obj’ may be used uninitialized in this function [-Wmaybe-uninitialized] c->map_key = obj; ^ x86_64-linux-gnu-g++ -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-Bsymbolic-functions -Wl,-z,relro -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 build/temp.linux-x86_64-3.4/msgpack/_unpacker.o -o build/lib.linux-x86_64-3.4/msgpack/_unpacker.cpython-34m.so Running setup.py install for PyYAML checking if libyaml is compilable x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 -fPIC -I/usr/include/python3.4m -c build/temp.linux-x86_64-3.4/check_libyaml.c -o build/temp.linux-x86_64-3.4/check_libyaml.o build/temp.linux-x86_64-3.4/check_libyaml.c:2:18: fatal error: yaml.h: No such file or directory #include <yaml.h> ^ compilation terminated. libyaml is not found or a compiler error: forcing --without-libyaml (if libyaml is installed correctly, you may need to specify the option --include-dirs or uncomment and modify the parameter include_dirs in setup.cfg) Running setup.py install for MarkupSafe building 'markupsafe._speedups' extension x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 -fPIC -I/usr/include/python3.4m -c markupsafe/_speedups.c -o build/temp.linux-x86_64-3.4/markupsafe/_speedups.o x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-Bsymbolic-functions -Wl,-z,relro -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 build/temp.linux-x86_64-3.4/markupsafe/_speedups.o -o build/lib.linux-x86_64-3.4/markupsafe/_speedups.cpython-34m.so Running setup.py develop for salt 2015.2.0rc2-170-ge86e974 Traceback (most recent call last): File ""<string>"", line 1, in <module> File ""/usr/src/salt/setup.py"", line 940, in <module> setup(distclass=SaltDistribution) File ""/usr/lib/python3.4/distutils/core.py"", line 148, in setup dist.run_commands() File ""/usr/lib/python3.4/distutils/dist.py"", line 955, in run_commands self.run_command(cmd) File ""/usr/lib/python3.4/distutils/dist.py"", line 973, in run_command cmd_obj.ensure_finalized() File ""/usr/lib/python3.4/distutils/cmd.py"", line 107, in ensure_finalized self.finalize_options() File ""/usr/lib/python3/dist-packages/setuptools/command/develop.py"", line 51, in finalize_options easy_install.finalize_options(self) File ""/usr/lib/python3/dist-packages/setuptools/command/easy_install.py"", line 261, in finalize_options self._expand('install_dir','script_dir','build_directory','site_dirs') File ""/usr/lib/python3/dist-packages/setuptools/command/easy_install.py"", line 1263, in _expand config_vars = self.get_finalized_command('install').config_vars File ""/usr/lib/python3.4/distutils/cmd.py"", line 298, in get_finalized_command cmd_obj = self.distribution.get_command_obj(command, create) File ""/usr/lib/python3.4/distutils/dist.py"", line 847, in get_command_obj cmd_obj = self.command_obj[command] = klass(self) File ""/usr/lib/python3/dist-packages/setuptools/__init__.py"", line 82, in __init__ _Command.__init__(self,dist) File ""/usr/lib/python3.4/distutils/cmd.py"", line 62, in __init__ self.initialize_options() File ""/usr/src/salt/setup.py"", line 438, in initialize_options if __saltstack_version__.info >= SaltStackVersion.from_name('Boron'): TypeError: unorderable types: tuple() >= SaltStackVersion() Complete output from command /usr/bin/python3 -c ""import setuptools, tokenize; __file__='/usr/src/salt/setup.py'; exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))"" develop --no-deps: 2015.2.0rc2-170-ge86e974 running develop Traceback (most recent call last): File ""<string>"", line 1, in <module> File ""/usr/src/salt/setup.py"", line 940, in <module> setup(distclass=SaltDistribution) File ""/usr/lib/python3.4/distutils/core.py"", line 148, in setup dist.run_commands() File ""/usr/lib/python3.4/distutils/dist.py"", line 955, in run_commands self.run_command(cmd) File ""/usr/lib/python3.4/distutils/dist.py"", line 973, in run_command cmd_obj.ensure_finalized() File ""/usr/lib/python3.4/distutils/cmd.py"", line 107, in ensure_finalized self.finalize_options() File ""/usr/lib/python3/dist-packages/setuptools/command/develop.py"", line 51, in finalize_options easy_install.finalize_options(self) File ""/usr/lib/python3/dist-packages/setuptools/command/easy_install.py"", line 261, in finalize_options self._expand('install_dir','script_dir','build_directory','site_dirs') File ""/usr/lib/python3/dist-packages/setuptools/command/easy_install.py"", line 1263, in _expand config_vars = self.get_finalized_command('install').config_vars File ""/usr/lib/python3.4/distutils/cmd.py"", line 298, in get_finalized_command cmd_obj = self.distribution.get_command_obj(command, create) File ""/usr/lib/python3.4/distutils/dist.py"", line 847, in get_command_obj cmd_obj = self.command_obj[command] = klass(self) File ""/usr/lib/python3/dist-packages/setuptools/__init__.py"", line 82, in __init__ _Command.__init__(self,dist) File ""/usr/lib/python3.4/distutils/cmd.py"", line 62, in __init__ self.initialize_options() File ""/usr/src/salt/setup.py"", line 438, in initialize_options if __saltstack_version__.info >= SaltStackVersion.from_name('Boron'): TypeError: unorderable types: tuple() >= SaltStackVersion() ---------------------------------------- Cleaning up... Command /usr/bin/python3 -c ""import setuptools, tokenize; __file__='/usr/src/salt/setup.py'; exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))"" develop --no-deps failed with error code 1 in /usr/src/salt Storing debug log for failure in /root/.pip/pip.log </pre>",Should this be closed?,@rallytime - I will try @s0undt3ch's patch this morning and let give you feedback.
saltstack/salt,https://github.com/saltstack/salt/issues/27079,saltstack_salt_issues_27079,"grains.items fqdn is not correct

Hi, I want get some minios hostname via granis.items fqdn ,but I got a wrong hostname , Why?  Thank you!!!",what's the result of  ?,
saltstack/salt,https://github.com/saltstack/salt/issues/22869,saltstack_salt_issues_22869,"attribute error on fileclient.get_url for s3 urls

From an EC2 with instance credentials, when trying to access an s3 via fileclient.get_url an AttributeError is raised and squashed. ",What it the output of `salt --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/31748,saltstack_salt_issues_31748,"PSUtil 2.2 incompatible.

Salt is not compatible with the latest redhat / epel release of python-psutils 2.2 ",Does `salt-call -l debug ps.get_pid_list` return an error?,No it returns just fine
saltstack/salt,https://github.com/saltstack/salt/issues/24564,saltstack_salt_issues_24564,"State run errors on file.managed when test=True

When running one of my states from the command line with test=True, I receive an error: ",Can this be reproduced or did it only happen once and not again?,"Yes, this is perfectly reproducible for me: test.sls:  After some further experimentation, I only see this occur when 1) the source file does not exist, and 2) the source file is a (jinja) template."
saltstack/salt,https://github.com/saltstack/salt/issues/30851,saltstack_salt_issues_30851,"ssh_auth.present fails to find public key in salt:// path with ""Source file ... is missing""

after upgrading our salt-minion from 2015.5.5-1.el7 to 2015.8.4-1.el7 one of our old states that used to work started failing the master is at: 2015.8.4 (Beryllium) Summary: - looks like ssh_auth.present fails to find our ssh public key that is in our file_roots - the file url is: salt://_a_binaries/certs/jenkins/ssh_id_rsa.pub - the same file is successfully referenced by file.managed - however, ssh_auth.present (source:) seems to fail to find this file Here is a snippet of the failing state: ",Will you also post the minion debug log when this happens?,"hi @jfindlay here is the snippet from our minion log - let me know if you need anything else 2016-02-05 01:13:12,901 [salt.minion ][INFO ][17357] User sudo_jerome Executing command state.sls with jid 20160205011312872925 2016-02-05 01:13:12,908 [salt.minion ][INFO ][82233] Starting a new job with PID 82233 2016-02-05 01:13:13,671 [salt.state ][INFO ][82233] Loading fresh modules for state activity 2016-02-05 01:13:13,688 [salt.fileclient ][INFO ][82233] Fetching file from saltenv 'prod', *\* skipped *\* latest already in cache u'salt://exp/jjp/salt-30851.sls' 2016-02-05 01:13:13,697 [salt.state ][INFO ][82233] Running state [/tmp/ssh_id_rsa.pub] at time 01:13:13.697304 2016-02-05 01:13:13,698 [salt.state ][INFO ][82233] Executing state file.managed for /tmp/ssh_id_rsa.pub 2016-02-05 01:13:13,711 [salt.fileclient ][INFO ][82233] Fetching file from saltenv 'prod', *\* skipped *\* latest already in cache u'salt://_a_binaries/certs/jenkins/ssh_id_rsa.pub' 2016-02-05 01:13:13,712 [salt.state ][INFO ][82233] File changed: New file 2016-02-05 01:13:13,712 [salt.state ][INFO ][82233] Completed state [/tmp/ssh_id_rsa.pub] at time 01:13:13.712363 2016-02-05 01:13:13,713 [salt.state ][INFO ][82233] Running state [ssh_auth_fails] at time 01:13:13.712984 2016-02-05 01:13:13,713 [salt.state ][INFO ][82233] Executing state ssh_auth.present for ssh_auth_fails 2016-02-05 01:13:13,716 [salt.state ][ERROR ][82233] Failed to add the ssh key. Source file salt://_a_binaries/certs/jenkins/ssh_id_rsa.pub is missing 2016-02-05 01:13:13,716 [salt.state ][INFO ][82233] Completed state [ssh_auth_fails] at time 01:13:13.716387 2016-02-05 01:13:13,718 [salt.minion ][INFO ][82233] Returning information for job: 20160205011312872925"
saltstack/salt,https://github.com/saltstack/salt/issues/25828,saltstack_salt_issues_25828,"user shows 501 and group shows staff for archive.extracted

I have a stat state which extractor the file to tmp folder. This is my code.  Why here user shows 501 and group shows staff ? I am using salt 2015.5.0",What user are you using to run the salt minion process on that system?,"I am running salt-minion as a service in sudo. @cachedout May i know, how can i give user and group for extracted files and folders"
saltstack/salt,https://github.com/saltstack/salt/issues/23147,saltstack_salt_issues_23147,"Cassandra cql returner and master_job_cache

I am trying to use the Cassandra CQL returner with the master_job_cache and getting the following error:  When I comment out the master_job_cache everything returns to normal. I have the Cassandra driver from Datastax properly configured and tested as well.",Can you also post the output of `salt --versions-report`? @ckochenower Do you mind taking a look here?,"You bet, here it is: "
saltstack/salt,https://github.com/saltstack/salt/issues/51348,saltstack_salt_issues_51348,"salt.modules.systemd documentation improvement

### Description of Issue/Question I wanted to run a ""systemd force_reload"" command. I found the module 'systemd' and its function 'systemd.force_reload'. I tried to use it in a state via a 'module.run' call. Low and behold - error! Not found. I saw in documentation that all examples where with name 'service.' . What the hell? After some time I said - Let's try my call with 'system.force_reload'. It worked. Damn, such a waste of time. Please update the header of the module's documentation (and somehow I think other 'service' implementations might need the same thing), that you MUST call it via its virtual? name 'service' and NOT systemd. Thank you. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",Can you please make a PR with the changes you have in mind?,Added PR #51364
saltstack/salt,https://github.com/saltstack/salt/issues/27894,saltstack_salt_issues_27894,"feature request - exclude for pkg.uptodate

hello currently Salt doesn't support the exclude for packages on Linux like yum command '--exclude'. This would be really good feature for enterprises. salt.states.pkg.uptodate(name, refresh=False, **kwargs) is there any reality implementing this feature?",Can anyone provide information about further package managers?,"yum -x or --exclude. Yum is a python application and it is replaced in Fedora 22 to DNF. I don't know them in that depth as you Gentoo. On 14/10/15 08:18, Elias Probst wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/28401,saltstack_salt_issues_28401,"pkg.installed not available

hello I've just wanted to make sure the vim-common package is installed on the system but the pkg.installed module doesn't work. https://docs.saltstack.com/en/latest/ref/states/all/salt.states.pkg.html salt 'host' pkg.installed 'name=vim-common' host: 'pkg.installed' is not available. ERROR: Minions returned with non-zero exit code","Does that help? So, given that information, your command should look like this: ","thank you your help but I think you misunderstood my goal. I wanted to check the package is installed or not. I don't want to install it at once just collect the info. yes I would use cmd.run 'rpm -qa |grep vim-common' but isn't there a salt solution for this? On 29/10/15 14:41, Nicole Thomas wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/30386,saltstack_salt_issues_30386,"OEL - State 'service.running' was not found in SLS

hello this happens only on OEL 6.x ",What version of salt are you using? OEL is [supposed to](https://github.com/saltstack/salt/blob/v2015.8.3/salt/modules/rh_service.py#L55) pick up `rh_service.py` as its service module.,"2015.8.1 On 15/01/16 17:35, Justin Findlay wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/30434,saltstack_salt_issues_30434,"highstate doesn't work with multiple environment

my top.sls contains 'base' and 'live'. The base section is the first one. When I run the 'salt-call state.highstate' only 'base' section will be set. The 'salt-call state.highstate saltenv=live' returns with: ",What is the debug log output in that case? What are your master and minion configs?,output from debug log:  I think the saltenv attribute is not working. If I remove it from the command the highstate is executed but ONLY the first (base) section.
saltstack/salt,https://github.com/saltstack/salt/issues/23360,saltstack_salt_issues_23360,"VMware new driver : config file credential parsing seems incorrect

Listing vm / creating vm with salt-cloud is not relying on pyvmomi it seems but on the old pysphere. [ERROR ] Failed to get the output of 'vsphere.avail_images()': global name 'VIServer' is not defined. any workaround yet ?",Does that answer your question?,"Yep thanks for support, I close this, I test this tommorow and get back to you if i have further questions. :+1:"
saltstack/salt,https://github.com/saltstack/salt/issues/23373,saltstack_salt_issues_23373,"reactor/orchestrate race condition on salt['pillar.get']

Hi all, with `2015.2.0rc2` I have the following reactor sls that calls an orchestrate runner: ",Can you paste those? They'll be right after those rendering lines you already pasted.,Here they are: 
saltstack/salt,https://github.com/saltstack/salt/issues/23401,saltstack_salt_issues_23401,"Custom Ext Pillars should be injected with __salt__ or allow resource management

We are trying to initialize an http connection pool (request futures) in a custom http pillar, but there is no hook to hold onto any re-useable resource (db, http, etc connections) we are currently using the opts dictionary hold the connection pool, but this is a hack and it still starts up N pools, instead of 1. can dunder **salt** be made available so we can effect a singleton of sorts by using dunder **salt**? Or some other resource initialization and holder mechanism? Thanks",Do external pillars not support `__context__`? I will check,Thanks!
saltstack/salt,https://github.com/saltstack/salt/issues/56179,saltstack_salt_issues_56179,"Lack of FQDN on host blocks salt-master startup

### Description of Issue Some VPS providers do not provision hostname at /etc/hosts at Ubuntu 18.04 image. Right now it leads to salt-master failure to start. From UX point of view, it looks like this: 1. User gets a new VPS with Ubuntu 18.04 2. Installs salt-master from SaltStack's py3 repo 3. salt-master never starts Current workaround: add hostname lines to `/etc/hosts` manually, e.g.: ",Can you give that a shot and let me know? Thanks!,"@dwoz Thanks for advice. Tried both `master_id:` and `id:` at master config, but exception still happens. @waynew Thanks for your patience. I agree that this issue depends on environment. Checking variable values: Without `127.0.1.1 hostname` line in /etc/hosts:  So the reason why --all-fqdns returns a single dot is **lack of a valid ipv6 reverse DNS**. And hostname line at /etc/hosts forced ipv4-only reverse lookup instead of ipv6. ------ I guess we can conclude that salt-master currently fails to boot if it gets invalid response on hostname reverse DNS lookup. Must salt-master rely on it? Could it use some fallback value in case for '.' or even any invalid reverse DNS response? Not trying to pin responsibility, I agree that this is an environment issue and empty reverse DNS is not a common case. Just wondering if its possible to workaround such situation to avoid startup block."
saltstack/salt,https://github.com/saltstack/salt/issues/23464,saltstack_salt_issues_23464,"cmd_iter_no_block() blocks

The `client.cmd_iter_no_block()` never returns `None`. The problem seems to be around the `get_iter_returns()` method. At the end of it there is a sleep and there is no empty `yield` or `yield None` inside the method. Here's my versions report: ",Can you give that change a try and close this issue if it is resolved? Thanks!,"Hey, I'll give it a try over the weekend and will report back with the results. Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/23861,saltstack_salt_issues_23861,"Salt-cloud : Minion Deployment stuck at ""Rendering Deploy Script"" since 2015.5

Worked with 2014.7.5 before, now if i try `salt-cloud -p myprofile myvm`, clone works fine but deployment is stuck at ""Rendering"" and exit with this message :  No firewall or Iptable on the Machine, am I the only one getting this issue ?","Can you also post the output of `salt --versions-report` for historical purposes? Also, it might be helpful to post what distro you're running. ping @techhat and @s0undt3ch",Here it is :  Debian source package: 2015.5.0+ds-1~bpo70+1 I'm running salt on a Debian 7.8
saltstack/salt,https://github.com/saltstack/salt/issues/24268,saltstack_salt_issues_24268,"Ability to specify revision for win_gitrepos undocumented

We recently ended up in a situation where our win_repo couldn't be updated due to a recent syntax error introduced into the official salt-winrepo. We needed to either use a different repository or use a previous revision of the salt-winrepo repository to avoid the problem. After looking through the code, it turns out that salt supports specifying a specific revision to use for a `win_gitrepos` entry, probably added to defend against the situation we ran into. All we had to do was find the revision before the problem was introduced and update our config like so:  It be great if this feature was documented","Can you also post the output of `salt <windows-minion> test.versions_report`? That way we know what ""recent syntax error introduced into official salt-winrepo"" refers to. @twangboy","@rallytime Absolutely and I'll do ya one better. Below is the output from our versions report, but we also found/fixed the salt-winrepo issue and [submitted a pull request](https://github.com/saltstack/salt-winrepo/pull/214). It turns out the issue was just some YAML syntax mistake in a winrepo entry, nothing specific to our salt setup. As always - really appreciate the quick responses! "
saltstack/salt,https://github.com/saltstack/salt/issues/32605,saltstack_salt_issues_32605,"pkgrepo.managed with apt does not add comments value later

### Description of Issue/Question If one add `comments:` (see [comments](https://docs.saltstack.com/en/latest/ref/states/all/salt.states.pkgrepo.html#salt.states.pkgrepo.managed)) state option later after state has once ran (and .list file is already created), comments are no actually added to the file. If file is deleted and state is run, then new file is created with `comments` present. ### Setup Let's say we have initial pgdg.sls state: ","Maybe this is a new feature or something similar? I ended up closing the PR, because I did a rebase against the incorrect branch, sorry.",Yep. Thank you @abednarik !
saltstack/salt,https://github.com/saltstack/salt/issues/33747,saltstack_salt_issues_33747,"svn.latest ignores trust=True after initial checkout when running state.highstate test=True

### Description of Issue/Question I am using svn.latest to checkout our repository using https with self-signed certificate. It does work for initial checkout, and for later updates, BUT it shows error when running `sate.highstate test=True`. This error is bogus. ### Setup salt 2015.8.10 Debian Wheezy amd64 ### Steps to Reproduce Issue Temporarily move `/etc/ssl/certs` into `/etc/ssl/certs.backup` to make any target host untrusted for testing purposes. Test case:  Though, again, running _without_ test=True, it works OK. Moving `/etc/ssl/certs.backup` back into `/etc/ssl/certs` makes test=True work, as host is trusted again. ### Versions Report Salt Version: Salt: 2015.8.10 Dependency Versions: Jinja2: 2.6 M2Crypto: Not Installed Mako: 0.7.0 PyYAML: 3.10 PyZMQ: 13.1.0 Python: 2.7.3 (default, Mar 13 2014, 11:03:55) RAET: Not Installed Tornado: 4.2.1 ZMQ: 3.2.3 cffi: Not Installed cherrypy: 3.2.2 dateutil: 1.5 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed libgit2: Not Installed libnacl: Not Installed msgpack-pure: Not Installed msgpack-python: 0.3.0 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed python-gnupg: Not Installed smmap: 0.8.2 timelib: Not Installed System Versions: dist: debian 7.10 machine: x86_64 release: 3.2.0-4-amd64 system: debian 7.10",Do you have a proposal on a different approach? Maybe different behavior when the running test=True?,"Well, I guess all is needed is that svn.diff should also get trust=True then. Running `svn --trust-server-cert --non-interactive diff -r HEAD` runs without certificate error. Note the `--trust-server-cert`."
saltstack/salt,https://github.com/saltstack/salt/issues/23678,saltstack_salt_issues_23678,"Display exception when module cannot be loaded

By default, salt attempts to load all modules. For example, if all my code is:  I could debug it remotely with epdb of course, but it would be nice if the traceback was displayed, particularely with the `-l trace` option.",Can you provide an example of an exception being swallowed when it should be logged?,"Here's an example of empty errors:  I could debug it remotely with epdb of course, but it would be nice if the traceback was displayed, particularely with the `-l trace` option."
saltstack/salt,https://github.com/saltstack/salt/issues/24997,saltstack_salt_issues_24997,"Custom grains modules do not have access to __salt__

In Salt 2015.5.0 custom grain modules do not have access to `__salt__`.","Can you provide a custom grain that demonstrates this behaviour, please?","Here's an example, please note that this is just an example: "
saltstack/salt,https://github.com/saltstack/salt/issues/28239,saltstack_salt_issues_28239,"Issues with pip states in 2015.8

I installed the `python-pip` package before trying to use any pip states. However, when trying to run any pip.installed states I get the error: I can login to the minion, fire up python, and do `import pip` and `import pip.req` without any issue. Doing `pip install -U pip` fixes the issue. This issue didn't come up on 2015.5 and it didn't occur on any servers I updated from 2015.5 to 2015.8.","Can you give the changes made in #27996 a try and see if that resolves this issue for you? If so, that fix will be available in 2015.8.2.","Sorry for being slow to respond. @jfindlay - All systems were installed with salt-bootstrap. However since it currently doesn't install 2015.8, I had to use pip to upgrade salt from 2015.5 to 2015.8 after the bootstrap. Systems that had already been configured under 2015.5 (i.e. already ran the highstate) before upgrading to 2015.8 didn't show the issue. Systems that applied their first highstate on 2015.8 did show the problem. @rallytime - Pretty sure that is a separate issue, the error is different."
saltstack/salt,https://github.com/saltstack/salt/issues/23900,saltstack_salt_issues_23900,"salt ubuntu network building issue 2015.5.0

When previously building network interfaces with saltstack 2014.7.5 ","What version of Ubuntu is this one? Looking at the Debian & Ubuntu documentation for bonding, it seems that bond-master is a valid parameter.","Trusty, it is a valid parameter but the debian_ip module is unable to parse the interfaces in the interfaces file because its a - and not _. Previously in 2014.7.5 the interfaces files was built using underscores for bonds/vlans which meant the parser would be able to determine the interfaces in that file correclty"
saltstack/salt,https://github.com/saltstack/salt/issues/24962,saltstack_salt_issues_24962,"Unable to manage file: SaltReqTimeoutError: after 180 seconds, ran 3 tries

I am getting this error in one of minion and unable to run any command from master on the same. I have tried test.ping and state.apply for example. Salt-Master version : 2015.5.0 (Lithium) Salt-Minion version : 2015.5.0 (Lithium)",Could you provide the full debug log and the full command(s) you are running to get this error? Thanks!,"Ok. I got the fix. I had this network.managed for interfaces and were been called automatically from salt-master. They kind of changed the interfaces settings on minion. Due to this, minion wasn't able to reach master and hence the error. To debug, I removed minion's key from master and waited for it to re-accept which never happened. Going on level down to networking, I tried pinging salt master from minion and then I found the root cause. Thanks for replying though !!"
saltstack/salt,https://github.com/saltstack/salt/issues/48263,saltstack_salt_issues_48263,"Import file (json|yaml ...) from a pillar file does not work anymore

### Description of Issue/Question I try to migrate from salt 2016.3.4 to Salt 2017.7.6 and I found that importing file from external git pillar file does not work anymore. Thanks for your help. ### Setup sls from git ext pillar  ### Versions Report Salt Version: Salt: 2017.7.6 Dependency Versions: cffi: 1.11.5 cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: 2.0.3 gitpython: 2.1.10 ioflo: Not Installed Jinja2: 2.7.2 libgit2: 0.24.6 libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.1 mysql-python: Not Installed pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.24.2 Python: 2.7.5 (default, Aug 4 2017, 00:39:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: 2.0.3 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.4.1708 Core locale: UTF-8 machine: x86_64 release: 3.10.0-693.21.1.el7.x86_64 system: Linux version: CentOS Linux 7.4.1708 Core","can you clarify where the versions.sls file is set? as you state: `versions.sls file from a local directory` can you clarify if that is in your pillars, file_roots etc?","From pillar_roots, I will update my issue description."
saltstack/salt,https://github.com/saltstack/salt/issues/24693,saltstack_salt_issues_24693,"Installing RPM from file_roots always returns FALSE:

I have rabbitmq state which uses deploy rpm inside my file_roots. Due to the fact that this always returns false on node that has rabbitmq already installed I am unable to use requisite logic. If installing a rpm package from the local file system Salt should determine if this is already installed it should return True instead of False. ",What is your output for salt --versions-report?,"➜ ~ salt --versions-report Salt: 2015.5.0 Python: 2.6.6 (r266:84292, Oct 12 2012, 14:23:48) Jinja2: 2.2.1 M2Crypto: 0.20.2 msgpack-python: 0.1.13 msgpack-pure: Not Installed pycrypto: 2.0.1 libnacl: Not Installed PyYAML: 3.10 ioflo: Not Installed PyZMQ: 14.3.1 RAET: Not Installed ZMQ: 3.2.4 Mako: Not Installed"
saltstack/salt,https://github.com/saltstack/salt/issues/23969,saltstack_salt_issues_23969,"Command 'npm --version' failed with return code: 127

Hi all, Since upgrading to 2015.5.0 on RHEL5 nodes, and although I can't seem to find any of my states related to npm/nodejs, I get:  Something wrong in my setup (apart from the old Linux distribution) ?",Can you post what version of npm you have installed on the RHEL 5 box that is failing?,"@rallytime this issue did not occur on the previous installed rpm: `salt-minion-2014.7.5-1`. It appeared when upgrading from `2014.7.5-1` to `2015.5.0-1`. The strange thing is neither `npm` nor `nodejs` are installed on the RHEL5 boxes _and_ I can't find any of my states related with these packages. But it turns out I have few RHEL5 boxes on which the issue does not occur. I tried to disable rules specific to the ill nodes, without success. I'm not sure about how to reproduce the problem on the healthy production nodes... Any hint on what could trigger the call the `npm --version` ?"
saltstack/salt,https://github.com/saltstack/salt/issues/24523,saltstack_salt_issues_24523,"Unknown Yaml Render Error on Block String Pillar Values.

I'm attempting to add a private RSA key to a salt-minion's user's `~/.ssh/id_rsa` file. The format of these must not exceed 64 characters line length due to the standard. This means I have to use a multiline string that includes new line characters. I have a users state file located at `/srv/salt/user/init.sls` with the contents:  This issue seems to occur regardless of using Folded style `key: >` or literal style `key: |` blocks. Versions: salt-minion 0.17.5 salt master 0.17.5",Can you upgrade to 2015.5.1 and see if this issue is already resolved?,@rallytime I've upgraded the salt-master and salt-minion to `salt-minion 2015.5.0 (Lithium)` This issue still occurs.
saltstack/salt,https://github.com/saltstack/salt/issues/24113,saltstack_salt_issues_24113,"file.copy with test=True always return pending changes

After upgrading from 2014.7 to 2015.5, all file.copy states return pending changes even if the file hasn't changed and force is set to False. Is this new behavior normal ?",Would you be able to provide example output for this?,Here is the state : 
saltstack/salt,https://github.com/saltstack/salt/issues/26948,saltstack_salt_issues_26948,"Reactor loading concurrency issues.

We have been using reactors fairly extensively and have been seeing what we believe to be significant issues with its use of caching of runners and module loading. What we see is that when there are many events at the same time we get messages that suggest that the modules cannot be loaded or are not available. I believe the issue may be in this code that is using a CacheDict to cache the various Clients and in the fact that the loader is shared across threads. In this case two threads can detect that the client is out of date and create a new one at the same time.  It seems that in this can result in the same module being loaded by two threads at the same time and result in unpredictable results. Am I missing something or should there be some level of locking to avoid these issues.",Do you have a reproduceable test case for this or is this just something you've witnessed in your install? @jacksontj This may be something you're interested in as well., msgpack-python: 0.4.5 msgpack-pure: Not Installed pycrypto: 2.3 libnacl: Not Installed PyYAML: 3.08 ioflo: Not Installed PyZMQ: 14.5.0 RAET: Not Installed ZMQ: 4.0.5 Mako: Not Installed Tornado: Not Installed timelib: Not Installed dateutil: Not Installed
saltstack/salt,https://github.com/saltstack/salt/issues/29501,saltstack_salt_issues_29501,"state modules are no longer available.

in the _states directory we had the file  This code works properly on 2015.5.5. On 2015.8.x when we run this we get a module not found error.",Can you verify that the custom state has been synced to the minion before running it?,We modified the state to do `reload_...` as in below and that caused it to function now. Is that a requirement with 2015.8.3 
saltstack/salt,https://github.com/saltstack/salt/issues/30739,saltstack_salt_issues_30739,"manage.present does not work when minion is using localhost

We are using a local minion for consistency in our operations and when the minion id has: master: localhost then manage.present does not show that local minion as being connected. It is there when we do manage.up If you change it to the actual host name then manage.present begins to work correctly.",What version of salt are you using?,Currently we are at 2015.5.9
saltstack/salt,https://github.com/saltstack/salt/issues/26332,saltstack_salt_issues_26332,"git ext_pillar slow and not scaling 

We love using git as our ext_pillar... we also love having out minions dynamically decide which pillars they have access to. We do this with the following pillar top.sls  So basically we load the grains and decide which pillars should be loaded to a minion. It works great, but as we start scaling I am seeing things get slower and slower. The above is repeated for envrionments dev, stg, prd. In my logs I see a ton of this.... `2015-08-14 18:26:31,198 [salt.pillar.git_pillar][DEBUG ][1151] Updating fileserver for git_pillar module` It seems like for every run the salt-master is rebuilding the pillar for each machine running a job and each environment. This makes things pretty slow. I was hoping that there was some option to do cacheing or speed up this process. Otherwise we will probably start looking at other ext_pillar solutions.",What is the output of `salt --versions-report`?, @jfindlay
saltstack/salt,https://github.com/saltstack/salt/issues/29631,saltstack_salt_issues_29631,"pygit2: git submodules cause traceback in file_list

We use the file recurse state and can not update to v2015.8.3 because in combination with gitfs, the state does not work. ",What version of pygit2?,Yes the state that is failing is exactly the same as this file... https://github.com/saltstack-formulas/salt-formula/blob/master/salt/master.sls
saltstack/salt,https://github.com/saltstack/salt/issues/24203,saltstack_salt_issues_24203,"State 'Service.running ' is unavailable

This seems to be similar to #13703. This problem is confined to using salt within a docker running the fedora:20 base image. I am running in masterless mode (using salt-call and passing --local). I am trying to use docker to create automated test for my salt deployment. Doing this same deployment on a fedora 20 VM works fine. The signs point to some incompatibility between salt 2014.7.1 and the fedora:20 docker base image. I will try to recreate this in a docker suitable for sharing publicly on the docker registry. Then I will add a link to it so you can easily reproduce the problem. As requested in the FAQ: ","Does the same issue occur on the Fedora 21 docker image ? Don't forget Fedora 20 will be EOL on June 23 (https://lists.fedoraproject.org/pipermail/announce/2015-May/003267.html) cheers, Tim","I'll test this out as well and report back. Unfortunately we have committed to deploying onto Fedora 20 for our current release cycle, so I would really like to be able test on it."
saltstack/salt,https://github.com/saltstack/salt/issues/24231,saltstack_salt_issues_24231,"npm.bootstrap

First off... **SALT IS AWESOME!** :grin: Secondly, I don't know where to post this, so if I'm in the wrong place, please redirect me. It took me a whole day to hunt this down, and I'm trying to help others as well as perhaps get a fix for this. I tried using [npm.bootstrap](http://docs.saltstack.com/en/latest/ref/states/all/salt.states.npm.html#salt.states.npm.bootstrap) on a node project that had an indirect reference to [node-gyp](https://github.com/TooTallNate/node-gyp), but the install process hung. I couldn't recover the machine and had to `vagrant halt` it. Here's what broke it: ",Do you think this will fix this issue?,"@jfindlay, that is amazing! At first, I didn't specify a user, because I was already root, but then when I saw a user issue, I instinctively tried providing `user: root` to see if it would fix it. So I think your solution will be perfect. I'm happy to try to test if if you like, but I might need some guidance as I don't know how to run salt without installing it. In the meantime, I read your patch and it looks like just what is needed. Thank you so much. I'm super excited to see the patch!"
saltstack/salt,https://github.com/saltstack/salt/issues/28805,saltstack_salt_issues_28805,"syndic presence events are in an incorrect dict format.

Upon testing reactors within a syndic environment, the MastersMaster has the following inside /etc/salt/master.d/reactor.conf:  My guess would be that instead of being passed the prettied up dict, the reactor is actually being handed the syndic version which is missing the data field.",What version of salt are you using?,"2015.8.1 on all machines. Master, Syndic, and Minion."
saltstack/salt,https://github.com/saltstack/salt/issues/29616,saltstack_salt_issues_29616,"Executing LocalClient inside a custom Runner causes 2 threads to be left open upon return

Ive been testing this for a while and for some reason it seems 2 of the 4 spawned threads close when the runner module is completed. After a while this causes a massive overflow when minions ranging in the thousands are executing said runners via reactors. Let me know what data you want me to collect.",Do you consider this issue 'solved' from your perspective? Should we update the documentation? Can we work some of your code/sls into an in-documentation example?,"Absolutely, Id love for you to work some of my code into the documentation examples. I think that would help alleviate any future issues regarding this situation. I would consider this solved. Let me know if you need anything from me or would like me to do a write up on it! Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/24587,saltstack_salt_issues_24587,"git.latest rev changing from a branch to a detached HEAD fails

When you set up a git.latest to start from a branch, but want to later move to a detached head, the git.latest state will fail (but it does checkout the new revision anyway, so will be okay next time) Seems like a minor/pedantic issue but can be frustrating when dependent states don't run (and onchanges/watches won't run subsequently either until moving to a new rev again) state: `repo.sls`  To reproduce - run `state.sls repo` with no pillar, succeeds - run `state.sls repo pillar='{""checkout_rev"":""COMMIT_HASH""}'` (where commit hash is a hash different from the current master HEAD) - state fails (`Comment: Command 'git config branch.126581e468db3831c9eef46614e2ab184aa38023.remote' failed. Stderr: ''`) but the repository is on the new detached HEAD I haven't checked too closely but I have a feeling the check on [this line #L296](https://github.com/saltstack/salt/blob/develop/salt/states/git.py#L296) should match the [earlier check #L217](https://github.com/saltstack/salt/blob/develop/salt/states/git.py#L217)",What is the output for `salt --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/24477,saltstack_salt_issues_24477,"salt-minion crashes, sticks in a restart loop, and eventually stops responding

On FreeBSD 10.1-RELEASE-p10, the salt-minion will start up, connect to the master, and then fail with a very uninformative `2015-06-06 21:37:51,712 [salt.scripts ][ERROR ][35629] Invalid argument`. The fun part about this is that the minions are running in jails, but only two out of seven exhibit this problem. All are using the same config and I have tried clearing the pki, as well as the salt folders in /var/cache and /var/run. Here's a log from one of the salt minions exhibiting the symptoms:  And after that ""sleeping"" message, the minion becomes unresponsive and stops logging.","Can you include the output of `salt --versions-report`? Also, any additional information if you run the minion in debug?",@cedwards The output above was from the minion while in debug mode. Here's --versions-report for master: 
saltstack/salt,https://github.com/saltstack/salt/issues/24483,saltstack_salt_issues_24483,"clouds/ec2.py: del_root_vol_on_destroy and del_all_vols_on_destroy not working

Test case: ",Can you please post the output of `salt-cloud --versions-report`?,I just retested with develop@88d2eec 
saltstack/salt,https://github.com/saltstack/salt/issues/24484,saltstack_salt_issues_24484,"clouds/ec2.py: create_snapshot throws exception

Test case: ",Can you also post the output of `salt-cloud --versions-report`?,I just retested with develop @88d2eeca00ff345a2692c1173933ac00af9a15c4 
saltstack/salt,https://github.com/saltstack/salt/issues/28341,saltstack_salt_issues_28341,"Initial highstate seems to ignore global returner

I am about 80% sure that the initial highstate that the minion runs doesn't respect the returner. Given these settings in /etc/salt/minion  I'm not seeing the above (custom) returner statsd being called. Even though I know it is on the system before hand and the minion file is correct when the run begins.",Do you see it on subsequent highstate runs? What versions of salt are you using?,"Subsequent runs that happen via this configured schedule seem to work fine: /etc/salt/minion.d/schedule.conf:  The custom returner has some log.info messages it always sends that are missing from the output on the initial run, and no data appears until subsequent runs, so I'm pretty sure it isn't being called at all."
saltstack/salt,https://github.com/saltstack/salt/issues/24559,saltstack_salt_issues_24559,"salt-cloud - Azure - should be possible to specify virtual network & subnet in profile

In the profile file for an Azure provider, it should be possible to optionally specify which Virtual Network and Subnet the VM will belong to. A resulting profile could look like:  I tested the code with an Azure account and it seems to work",Would you be willing to put in a pull request so that you get credit?,"@techhat done. I hope I didn't mess up anything, it's been my first pull request ever."
saltstack/salt,https://github.com/saltstack/salt/issues/24624,saltstack_salt_issues_24624,"mysql returner can't get credentials from master's config

Hi, after I have upgraded to newest version of salt, I encountered new issue, that I can't get mysql credentials from master's config, so my minions have set default values and waren't able to insert return to mysql server. I used to have these credentials only on master. Thanks.",What is the output of `salt --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/28440,saltstack_salt_issues_28440,"Run different configuration on nodegroups

I have 2 nodegroups:  The issue is: When I run `salt -N t1 state.sls setup`, is executed nothing. # `UPDATE`: using this `(grains.id in salt['pillar.get']('master:nodegroups:t1', []))` instead of `grains.id in salt['pillar.get']('master:nodegroups:t1', [])` it setup the both config, not just config for group `t1`.","What version of salt are you using? Also, your update is confusing me. Is this python code that you are running or jinja code? What is the context?",salt version `salt-master 2015.5.0 (Lithium)` It is jinja code into config file. I want to run the same config file with different parameters for different group nodes.
saltstack/salt,https://github.com/saltstack/salt/issues/41923,saltstack_salt_issues_41923,"Can generate multiple files based on pillar data?

### Description of Issue/Question So, there is a way to do that? ### Setup I have pillar data: ",What do you want the actual contents of the file to be? How do you want the file to look?,"So, I have the pillar specified before. And this code  So, based on data from pillar, I want to generate every file with own config. `file1` to has data from `data1 ` ... `file1` == `pillar['deploy'][data1]` ... So, there is a way to specify, hey config file, please put only data from pillar['deploy'][data1], not all as it's doing now."
saltstack/salt,https://github.com/saltstack/salt/issues/25789,saltstack_salt_issues_25789,"scheduler doesn't work

### I have  in /etc/salt/minion.d/_schedule.conf, which in I guess must be created, but was never created... what I'm doing wrong?",Can you try adding persist: True to the state file?,"I've set  I've added manually to check that scheduler is generally working - it's working fine, the only problem I have - I can't manage it from scheduler states."
saltstack/salt,https://github.com/saltstack/salt/issues/34129,saltstack_salt_issues_34129,"fqdn_ip4 and fqdn_ip6 are empty on 2016.3+

### Description of Issue/Question I've discovered really strange behaviour after upgrade, `fqdn_ip4` and `fqdn_ip6` are empty. According to [documentation](https://docs.saltstack.com/en/latest/ref/grains/all/salt.grains.core.html#salt.grains.core.fqdn_ip4) it is supported and no word about deprecation ### Steps to Reproduce Issue  I believe this is a bug, but let me know if I'm missing some configuration here.",HOw are you installing salt on ubuntu15? For record I installed it using the bootstrap script as a git install v2016.3.1,"I'm installing it using deb repository for trusty, and `apt-get install salt-*` all the steps are done from salt state. I can copy paste it here, but I believe it is not needed as you've already reproduced the issue. We do not use Centos or any RPM based systems, I can't comment whether it is working there or not :("
saltstack/salt,https://github.com/saltstack/salt/issues/24730,saltstack_salt_issues_24730,"Events don't seem to be sent over salt-api cherypy websocket for a javax.websocket based client 

Hi - this regards a PoC I'm trying with SUSE netapi (https://github.com/SUSE/saltstack-netapi-client-java/issues/79). PoC is about extending netapi to cherrypy websocket endpoint. Here's the issue in short: When I'm connecting to salt-api websocket (endpoint /ws) with a python based client all seems to work fine. That is I can see the TCP packets been sent over the connection (`tcpdump -i any 'port 8000'`) and the python client does get the salt events. Yet, when I'm trying to mimic the same scenario with a simple javax.websocket based java client I can see the socket connection being set up normally but for some reason events never seem to be sent over. That is I don't even see TCP packets being sent and instead I see a Broken pipe error in salt-api console:  Host system: Linux Mint 17 Qiana Linux v 3.13.0-24-generic #47-Ubuntu SMP Fri May 2 23:30:00 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux",Does the handshake when using the python or JS client look different than the Java client?,"Ah, I think the problem starts with differences in login. Java client logs in expecting json while python one expects x-yaml. ![salt-login-diff](https://cloud.githubusercontent.com/assets/12730010/8205712/f33ec1e4-14ea-11e5-9ed4-a7f359b1f6d3.jpg) So I think we can narrow this issue down to json sessions."
saltstack/salt,https://github.com/saltstack/salt/issues/28396,saltstack_salt_issues_28396,"salt-cloud parallel provisioning (-P option) failed on 2015.8.1

I tried to create the AWS VM with -P option but got the following errors ",Does this _only_ happen with `-P` or is it present with all your salt-cloud provisoned instances on AWS? cc: @rallytime @techhat,so far only the salt-cloud -P has the problem
saltstack/salt,https://github.com/saltstack/salt/issues/29431,saltstack_salt_issues_29431,"salt-cloud Waiting for VM IP -- Ec2

So I'm attempting to create an instance via salt, however it seems to be getting stuck at ""Waiting for VM IP"" even though the instance creation XML returns the private IP address. After a 10 minute timeout it just quits on me and the instance remains up without it being bootstrapped. I've tested the username and key specified on the profile, as well as the ssh port. Any other reason why this would fail? ",Do you consider your pull request to fix it?,"@jfindlay Yes, that should warn anyone running into the issue that private_ips isn't specified and may need to be specified."
saltstack/salt,https://github.com/saltstack/salt/issues/29543,saltstack_salt_issues_29543,"Jinja failing to parse conditions correctly.

I've got a saltstate in the following format  And I've tried all sorts of variations when using the minus sign, from none, to some on both the beginning and the end.",What is your output of ,
saltstack/salt,https://github.com/saltstack/salt/issues/29938,saltstack_salt_issues_29938,"boto_secgroup.present mapping failure

",Could you please provide more information about what the issue is here? Thanks.,"@cachedout Sorry, maybe this will provide more info. When I ran my saltstate (stated above), this is the error I get.  It doesn't seem to accept from_port at all, although not sure why."
saltstack/salt,https://github.com/saltstack/salt/issues/24862,saltstack_salt_issues_24862,"gpg.import_key returns error after succesfully completed

I am running the bellow comand from master to minion: ",can you provide the output from salt --versions-report?,Forgot the obvius info: 
saltstack/salt,https://github.com/saltstack/salt/issues/24907,saltstack_salt_issues_24907,"file.uncomment does not uncomment as expected 

I want to uncomment a line from a config file,  How can i achieve the desired output using file.uncomment ?",Can you reproduce this on salt versions 2015.5.2?,@arroyoc Will update the salt versions to that and get back with the results soon.
saltstack/salt,https://github.com/saltstack/salt/issues/24915,saltstack_salt_issues_24915,"Salt-cloud not working in 2014.7.6

When using salt-cloud in 2014.7.6 I get a traceback when trying to provision a vm. This works on 2014.7.1-2014.7.5 and 2015.2 +. I've noticed this issue on CentOS 7 with both Linode and RackSpace drivers. ",Can this one be closed?,@rallytime yep.
saltstack/salt,https://github.com/saltstack/salt/issues/32902,saltstack_salt_issues_32902,"OpenSUSE hangs on ZeroMQ test on 2016.3

### Description of Issue/Question Running the test suite causes opensuse to hang on `unit.transport.zeromq_test.AESReqTestCases.test_normalization`. This only happens the 2016.3 branch on opensuse. ### Setup Need an opensuse VM with salt installed and a salt checkout. ### Steps to Reproduce Issue python tests/runtests.py -v -n unit.transport.zeromq_test ### Versions Report  @meggiebot @s0undt3ch",Did the master crash prior to this running?,"@cachedout Not that i'm aware of. when running it manually, if you ctrl-c to get out it continues on with the rest of the tests. I don't think it's a broken test, but a hanging process that doesn't get cleaned up. I spoke with @s0undt3ch about it, since similar things have happened before that he fixed."
saltstack/salt,https://github.com/saltstack/salt/issues/24943,saltstack_salt_issues_24943,"Static grains do not appear to work if added to minion config

When I set /etc/salt/minion to contain static grains as per the comments int he config file, static grains are not set. Using /etc/salt/grains seems to work. Example:  The above results in nothing matching the key ""node_name"" or ""cassandra_cluster_name"" when using `salt-call grains.items` on the node or using salt on the master. Moving the same file into /etc/salt/grains does work.",What is your salt --versions-report output? Does it work after you do salt-call saltutil.sync_grains?, Running saltuilts.sync_grains doesn't do anything.
saltstack/salt,https://github.com/saltstack/salt/issues/34962,saltstack_salt_issues_34962,"Legacy git_pillar broken in 2016.3.1 when using environments

### Description of Issue After an upgrade from 2015.8.5 to 2016.3.1, Git pillar in Legacy mode (with `__env__` supplied as the branch) stopped being usable. We traced the issue to the master omitting the `__opts__['environment']` minion option, which is the reason Git pillar never considers any branch different than 'gitfs_base' (master in most cases). To be sure, we tested the same workflow in a 2015.8.5 environment (master + minions), where the ""environment"" option correctly arrived from minion to master and up to the code in git_pillar.py . Based on that value, `_LegacyGitPillar()` was able to determine the correct Git branch to load Pillar data from and do the processing. However, in 2016.3.1, `__opts__['environment']` is None and `_LegacyGitPillar()` always builds the pillar from ""base"", a.k.a. master branch. ### Setup Git pillar config on saltmaster:  **EDIT:** The issue with configuration variable ""pillarenv"" is the same; `__opts__['pillarenv']` is None on the master no matter the configuration on minion.",Should someone expect using the legacy configuration to work in 2016.3?,"@Ch3LL Yes, at first the feature of dynamic branch mapping with `__env__` was about to be dropped, but then #28282 has been merged into 2015.8.0, so we expected the legacy git pillar to keep working. The merge was a response to #28125."
saltstack/salt,https://github.com/saltstack/salt/issues/39420,saltstack_salt_issues_39420,"Inconsistent pillar data from git_pillar

### Description of Issue/Question I am using git_pillar as the only pillar provider, with ""dynamic"" environments (`__env__` instead of hardcoded branch name). The way I understand it, this setup allows you to fork a branch in your Git repo and change values in Pillar so that only minions in the same `pillarenv` see that change. Unfortunately, pillar representation is flapping between different branches; here's a minion in `environment: dev` and `pillarenv: dev` to whose pillar I added a new key with a value that occasionally disappears, either when getting the key from master or from the minion. In the `dev` branch this key exists with the value you see in first two attempts; in another branch `production` the key doesn't exist. ",Can you check the master log?,"There is this error in the master log, but not explicitly tied to gitfs locking - although suspicious enough:  Unfortunately I don't have an in-depth knowledge of how the master handles simultaneous pillar compilation for more minions, but my best guess is that some stray checkout doesn't adhere to the lock you mentioned. I'll do my best to look into git_pillar implementation in the next few days and see if we can easily mimick the behavior of gitfs for state files; that is having a separate directory for each dynamic environment. Thanks for any help until then."
saltstack/salt,https://github.com/saltstack/salt/issues/29443,saltstack_salt_issues_29443,"jinja2 templating broken when jinja_lstrip_blocks: True on RHEL/CentOS 6

",Can you upgrade jinja on your minion?,"It is an option! I'm just wondering if you guys could replace the jinja2 package in the Salt repo for the latest supported jinja2 version, which I think is 2.7.3. Since it is a dependency, it should be provided in the Salt repo, just like it was done with the python-crypto and python-tornado.  Makes sense?"
saltstack/salt,https://github.com/saltstack/salt/issues/31052,saltstack_salt_issues_31052,"Exception 'pillar' occurred in scheduled job on the master

This exception is happening every loop_interval only when I have a schedule set on the master config using the ""- when:"" option. If I change that to use ""minutes: 300"", for example, it works fine. The scheduled runner does not execute at all when this exception occurs. Here is my /etc/salt/master.d/schedule.conf: ",Do you at least have the full error message returned on the console and the associated minion debug log?,"@jfindlay There's nothing in the minion log because the schedule is configured in the master config. I've changed the log_level to trace but, as you mentioned, that didn't help much. Here is the only line that I get regarding the scheduled job. "
saltstack/salt,https://github.com/saltstack/salt/issues/25047,saltstack_salt_issues_25047,"Regression: State 'pkg.purged' doesn't purge a partially removed package on Ubuntu

This is similar to a bug in 2013 but the cause this time must be different.  The expected result would be that the package would be fully purged.",Can you also show that the package has not been purged completely after the state has been run? Thanks!,
saltstack/salt,https://github.com/saltstack/salt/issues/27130,saltstack_salt_issues_27130,"salt-run broken in 2015.8?

Hi, I noticed some strange errors using various salt-runners, it looks like salt-run; ",Can you provide additional information on how you installed your minion?,"Installed from repo.saltstack.com  I completely purged salt from my system, even moved /var/salt/cache, but that didn't fix the problem. Any suggestions on how to further debug this issue? Could it be related to the python installation itself? Or a configuration option? (Will try to reproduce this in a container)"
saltstack/salt,https://github.com/saltstack/salt/issues/31427,saltstack_salt_issues_31427,"salt.states.grains.list_present adds duplicates names

Hi, I noticed that using the 'grains' state multiple times results in duplicate list items. One would expect that the grains state immediately updates the roles grains after modifying it. For example this state  Is this a bug or a feature? It feels wrong to force a grain update in the state file?",What version of salt are you using?,2015.8.7
saltstack/salt,https://github.com/saltstack/salt/issues/36402,saltstack_salt_issues_36402,"pushover fails to notify

### Description I noticed that pushover messages are not delivered, but the minion returns 'True' when using pushover.post_message module. Config was working in previous version. ### Setup Latest saltmaster and minion running on Arch Linux ",Which version was this working in?,2016.3.2 I believe
saltstack/salt,https://github.com/saltstack/salt/issues/37044,saltstack_salt_issues_37044,"pkg module and state not working in Arch Linux

### Description of Issue/Question The pkg state and module won't work on latest Arch Linux. This might be related to an Arch upgrade, since it was working before in current version. ### Setup Latest Arch Linux x64, running salt-zmq 2016.3.3 ### Steps to Reproduce Issue ",Can you paste a version here? And I will see if I can replicate the behavior. thanks,"Hi @Ch3LL , Thanks for the feedback, after manually adding that line things are working again, there is something wrong with the os detection, this issue happens on 3 other servers too.  I rolled back updated packages (glib2, python2-setuptools, python2-pyparsing, python2-psutil) to see if things recovered, but no show. As damon-atkins pointed out, there is an issue on Arch notable in the empty --versions output"
saltstack/salt,https://github.com/saltstack/salt/issues/37598,saltstack_salt_issues_37598,"pkg.uptodate ignores kwargs on RedHat systems

### Description of Issue/Question The _kwargs_ defined in state.pkg.uptodate seem to be ignored on RedHat. ### Setup RedHat 6 ### Steps to Reproduce Issue ",Can you try passing it as an actual kwarg instead of to the kwargs variable? ,"This works as expected, thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/39916,saltstack_salt_issues_39916,"[Feature] compound matcher based on config.get

### Description of Issue/Question It would be nice to be able to match minions based on _config_ values.  I don't think this is possible in current version?",Would that work for you?,@mirceaulinic that would work... The nice thing of a config compound matcher is that you get in fact the running value. Sometime pillar data is set but not active because a minion config reload is needed for example.
saltstack/salt,https://github.com/saltstack/salt/issues/47135,saltstack_salt_issues_47135,"Vault vault.read_secret fails if missing m2crypto

### Description of Issue/Question It seems that when M2Crypto is not installed the vault read_secret module fails with an RSA error. ### Setup Latest Saltstack 2018.3.0 on master and minion. ### Steps to Reproduce Issue ",Do you have M2Crypto installed on the Salt master? I haven't been able to duplicate this is when the python m2crypto libraries are not installed at all.,"Hi @garethgreenaway , I have m2crypto installed on the salt master. I notice that a Windows minion is missing the m2crypto library and will result in an error. Unfortunately I'm unable to install m2crypto on Windows. This should work without m2crypto right?"
saltstack/salt,https://github.com/saltstack/salt/issues/35322,saltstack_salt_issues_35322,"Remove m2crypto dependency in x509 module

### Description of Issue/Question x509 module has a dependency on M2Crypto, which is no longer provided by SaltStack with point releases since 2015.8.0. The x509 module needs to be rewritten to utilize another maintained crypto library providing similar functionality. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) see Missing m2crypto dependency breaks x509 module #35013 ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",Where was the announcement that it's been abandoned?,"@cachedout I relied on a conversation with Tom, mea culpa, I should have checked. Adjusted description."
saltstack/salt,https://github.com/saltstack/salt/issues/40068,saltstack_salt_issues_40068,"service salt-minion stop drops resources

### Description of Issue/Question With repeated use of service salt-minion restart, it was noticed that resources are not cleaned up correctly (zombie). The issue was isolated to use of /etc/rc.d/init.d/salt-minion stop. ### Setup This was found with the latest 2016.11.3 but may exist in earlier versions of Salt on Redhat 6.6 ### Steps to Reproduce Issue Install salt-minion and active it with a connection to a salt-master. Once the salt-minion is running, execute **_service salt-minion restart_**, for example: root@tc6min:~# ps -efl | grep -v grep | grep salt 1 S root 30231 1 3 80 0 - 136420 poll_s 15:37 ? 00:00:00 /usr/bin/python2.6 /usr/bin/salt-minion -c /etc/salt -d 1 S root 30232 30231 0 80 0 - 112079 pipe_w 15:37 ? 00:00:00 /usr/bin/python2.6 /usr/bin/salt-minion -c /etc/salt -d root@tc6min:~# service salt-minion restart Stopping salt-minion:root:t6 daemon: OK Starting salt-minion:root:t6 daemon: OK root@tc6min:~# ps -efl | grep -v grep | grep salt 1 S root 30232 1 0 80 0 - 112079 pipe_w 15:37 ? 00:00:00 /usr/bin/python2.6 /usr/bin/salt-minion -c /etc/salt -d 1 S root 30709 1 16 80 0 - 136420 poll_s 15:38 ? 00:00:00 /usr/bin/python2.6 /usr/bin/salt-minion -c /etc/salt -d 1 S root 30710 30709 0 80 0 - 112079 pipe_w 15:38 ? 00:00:00 /usr/bin/python2.6 /usr/bin/salt-minion -c /etc/salt -d root@tc6min:~# service salt-minion restart Stopping salt-minion:root:t6 daemon: OK Starting salt-minion:root:t6 daemon: OK root@tc6min:~# ps -efl | grep -v grep | grep salt 1 S root 30232 1 0 80 0 - 112079 pipe_w 15:37 ? 00:00:00 /usr/bin/python2.6 /usr/bin/salt-minion -c /etc/salt -d 1 S root 30710 1 0 80 0 - 112079 pipe_w 15:38 ? 00:00:00 /usr/bin/python2.6 /usr/bin/salt-minion -c /etc/salt -d 1 S root 31185 1 8 80 0 - 136421 poll_s 15:38 ? 00:00:00 /usr/bin/python2.6 /usr/bin/salt-minion -c /etc/salt -d 1 S root 31186 31185 0 80 0 - 112080 pipe_w 15:38 ? 00:00:00 /usr/bin/python2.6 /usr/bin/salt-minion -c /etc/salt -d root@tc6min:~# service salt-minion stop Stopping salt-minion:root:t6 daemon: OK root@tc6min:~# ps -efl | grep -v grep | grep salt 1 S root 30232 1 0 80 0 - 112079 pipe_w 15:37 ? 00:00:00 /usr/bin/python2.6 /usr/bin/salt-minion -c /etc/salt -d 1 S root 30710 1 0 80 0 - 112079 pipe_w 15:38 ? 00:00:00 /usr/bin/python2.6 /usr/bin/salt-minion -c /etc/salt -d 1 S root 31186 1 0 80 0 - 112080 pipe_w 15:38 ? 00:00:00 /usr/bin/python2.6 /usr/bin/salt-minion -c /etc/salt -d root@tc6min:~# It can be easily seen that processes are not getting cleaned up, and typically the grandchild of the parent process: signal not propagating to grandchild. ### Versions Report root@tc6min:~# salt-call --versions-report Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8.1 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.3.4 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.6.6 (r266:84292, Aug 18 2016, 15:13:37) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: centos 6.6 Final machine: x86_64 release: 2.6.32-504.el6.x86_64 system: Linux version: CentOS 6.6 Final root@tc6min:~#",could you try to reproduce on 2.7? I can recall some ugly multiprocessing bugs in 2.6,This issue does not occur on Redhat 7 with python 2.7
saltstack/salt,https://github.com/saltstack/salt/issues/25105,saltstack_salt_issues_25105,"`salt` should be runnable from remote hosts

I have a feature request: to make `salt` CLI runnable from remote hosts (not Master only). It's often required to run some commands from multiple remote hosts (e.g. from TeamCity Agents) which are not the same as Master. `salt` is a CLI and it would be nice to run it from remote server (not Master). E.g. that's how `supervisorctl` works - you can run it on its ""master"" host as well as remotely, specifying `--serverurl` option",Did you take a look at https://github.com/saltstack/pepper ?,"Yes, I did. I think that it's too complex workflow: master - API - pepper. I actually don't need API but I have to install it to have remote CLI. Pepper is in pre-alpha (actually [it is broken](https://github.com/saltstack/pepper/issues/40#issuecomment-117733768) right now) And pepper is mirroring `salt` commands. So it's just another CLI that's actually a mirror of the first one, with the only feature - to allow remote calls. So why do you need two equal CLI? `salt` could be the one."
saltstack/salt,https://github.com/saltstack/salt/issues/25134,saltstack_salt_issues_25134,"salt-ssh sudo issues

Having an issue with salt-ssh using sudo where `requiretty` is enabled for sudo use. `test.ping` works: `$ salt-ssh '*' --config-dir=/home/tmapp/tomcat/salt/conf/ test.ping test1: True` Passing a raw command works:  Based on similar issues surrounding `requiretty`, thought the version we are trying to use would not have these issues in this version of salt-ssh. If there are other details needed, let me know and I will work to provide those.",Will you also post the output of `salt-ssh '*' -l debug --config-dir=/home/tmapp/tomcat/salt/conf/ file.exists /tmp/tylertest`?,"@jfindlay, here you go: "
saltstack/salt,https://github.com/saltstack/salt/issues/54719,saltstack_salt_issues_54719,"Regression in file.managed - Non-Ascii Files Not Found

### Description of Issue This system uses gitfs as the backend. These states that contained non-ascii characters worked on 18.X versions of Salt. `file.managed` fails to find files with high UTF-8 characters (with a data transport is broken warning on the minion). The master logs the following: ",Can you share your config files?,"My config as follows:  The config file, before and after the changes. https://gist.github.com/Silvenga/650012ce00d6cfe56f2a9b9261d2ba5c I'll definitely try upgrading to 2019.2.1."
saltstack/salt,https://github.com/saltstack/salt/issues/28583,saltstack_salt_issues_28583,"datasource_exists fails to create a new one but succeeds if datasource is already there

I am trying to write a state file to add a new datasource for wildfly 9. Here is my state (I have removed sensative data and replaced it with <data name>):  Which to me indicates that my state is set up right. What am I missing? Is it because I am using Wildfly 9? Thanks",What version of salt are you using?,2015.5.5.6
saltstack/salt,https://github.com/saltstack/salt/issues/25955,saltstack_salt_issues_25955,"nova seems to require cinder be installed. in both nova module and nova driver for salt-cloud. 

while running through a problem i was having i think i found an issue. nova seems to assume that cinder is installed in openstack. [or at least nova-volume.] neither is needed for a functioning openstack cluster. nor is it described in the docs that a volume endpoint type is needed. anyway here is the tracepath I would get whenever I ran a nova command without cinder installed.  some things to consider. the error message should also included what value it is searching for since this error makes no sense without all the info it is using for the search. also you can run openstack without a volume storage manager. all disk space is ephemeral storage in this case. this seems to only affect the newer nova stuff. the old openstack driver for salt-cloud still works without cinder installed. [however i can't run nova module commands. ]",What version of salt are you using?," as for not requiring cinder [or any volume manager] there is a reference for it asking for a volume endpoint in the nova code this is normally handled by cinder [or nova-volume if you are really old school]. https://github.com/saltstack/salt/blob/develop/salt/utils/openstack/nova.py#L198-L207 a volume endpoint is not needed for a functioning openstack cluster however. like i said in the configuration i am talking about storage is handled through a shared drive on the compute servers and is considered ephemeral storage. there are no volumes. the most lightweight openstack cluster can be created using only 4 endpoint types. identity, image, network and compute."
saltstack/salt,https://github.com/saltstack/salt/issues/46633,saltstack_salt_issues_46633,"Oxygen OpenStack Documentation.

### Description of Issue/Question Documentation in Develop for the OpenStack driver is confusing. The user could end up coming to https://docs.saltstack.com/en/develop/topics/cloud/openstack.html which has information on the old OpenStack salt-cloud driver. While the driver documentation at https://docs.saltstack.com/en/develop/topics/cloud/config.html#module-salt.cloud.clouds.openstack is correct.","Can you verify this? Thanks, Daniel",strange. it looks good now. When i had put in this ticket the content on the first page was still the old libcloud info.
saltstack/salt,https://github.com/saltstack/salt/issues/46906,saltstack_salt_issues_46906,"Windows failure with PR 46541

### Description of Issue/Question Using the new version of metadata.py from https://github.com/saltstack/salt/pull/46541. Works in linux. However, depending on if using py2 or py3 casts an error in windows. In py2 windows error is as follows: ",Can you test this PR? https://github.com/saltstack/salt/pull/46541 It will be in 2017.7.6 and 2018.3.1,That is the PR that was being tested already. it works great in linux. it results in windows are above.
saltstack/salt,https://github.com/saltstack/salt/issues/47934,saltstack_salt_issues_47934,".format in log.debug can cause unicode error in template.py

### Description of Issue/Question Much like the unicode error That happened in #44452. .format does not like when unicode is put through it's variables. For that reason if unicode is in any of the variables between https://github.com/saltstack/salt/blob/v2017.7.5/salt/utils/templates.py#L456-L460 You will end up with a unicode error, instead of the actual error produced. even if not useing debug. ### Setup Use a template that will be rendered and has unicode, and get jinja to throw an error that isn't caught through the other catches. ### Steps to Reproduce Issue This is based on observation. Have not found a way to trip the exception everytime that gets to that point. but have seen .format throw unicode exceptions in much the same way before. ### Versions Report ",Does this still happen in 2018.3?,"@gtmanfred no, it does not happen in 2018.3. Sorry for the late response."
saltstack/salt,https://github.com/saltstack/salt/issues/52776,saltstack_salt_issues_52776,"Feature request- multi-yaml documents as more complex sls structures

So this is not a fully fleshed out Idea I wanted to run it by the greater community before solidifying it. Currently, the state system does not work with multi-document yaml files. So while talking with a small group I had an idea. What if that was to change. If multi-documents not only could be used but could be used for the betterment of the structure of sls files. What I'm thinking is that in the current setup we would still allow single document files and would treat them as standard sls files, keeping backward compatibility. However, if the yaml parser finds a multi-document yaml file it treats the first document as a header. and then the second and supplemental documents as the sls portion. This could be taken further since rendering would still be run before this section. So the `header` section could change things like which document is considered the sls. allowing multi-document yaml files to be run differently on different operating systems cutting down on the jinja needed for systems that act vastly differently. Could also put things like sls version information into this header section.  So again this is just a random neuron firing so take the idea with a grain of salt.",Would that be a conflict in this case or would it be somehow handled differently?,"I should have explained the example case, I knew I forgot something. My fault. my brain cell decided to go on vacation mid-thought. in the example sls_doc would be pointing to the 1 document, which would be the first testing sls, the header document being sls_doc: 0. So doc 2 would not be seen by the state system unless you changed the sls_doc manually. or put jinja in to change it based on some other item. Also Since this would be using yaml the jinja would still be seen before the yaml so the whole thing would still need to render for all of the jinja. which does make it a bit problematic. An idea to expand this would be to allow sls_doc to have a list so you could enumerate through the internal docs"
saltstack/salt,https://github.com/saltstack/salt/issues/33225,saltstack_salt_issues_33225,"win_servermanager reporting incorrect/truncated results on minion 2015.8.8-2

### Description of Issue/Question win_servermanager is reporting changes regarding features installed via state module in instances where those features had already previously been installed (and shouldn't be reporting changes), and is displaying truncated feature names from win_servermanager.list_installed. The two issues appear to be related, as the former only appears to occur for features with truncated names. This is occurring on Windows minion version 2015.8.8-2. ### Setup Test state: ",Do I have a way to install it using Salt??,"@pavankumar2203 Something like this should work:  ...and call it as needed. Depending on how the check is done in the module, you might need to restart the minion service too...can't remember for sure."
saltstack/salt,https://github.com/saltstack/salt/issues/26354,saltstack_salt_issues_26354,"file comment regex broken

When using the following state to remove adjkerntz entries in crontab on FreeBSD with salt 2015.5.3. ","Could this be related to #25866 ? Cheers, Tim","Yes, that looks very similar. I'll close this one. Thanks. How do such fundamental ""this feature doesn't come close to working"" bugs make it through salt's unit tests?"
saltstack/salt,https://github.com/saltstack/salt/issues/44689,saltstack_salt_issues_44689,"FreeBSD performance problem with virt-what

### Description of Issue/Question There is a significant performance issue in FreeBSD 11.1 around 'arch' and 'virt-what'. ### Steps to Reproduce Issue # time salt-run salt.cmd test.ping takes 25 seconds to run. That's clearly way too slow. For more detail, I looked at the 'trace' level logging and saw the slowness in this section: ",What happens if you just run `dmidecode` in this environment?,"virt-what doesn't exist on FreeBSD, but I've basically debugged the problem down to a dozen or more cmd.run calls. The code calls cmd.run intead of subprocess.call but I cannot see what is happening inside cmd.run since the log level is lost and nothing is logged inside there."
saltstack/salt,https://github.com/saltstack/salt/issues/25500,saltstack_salt_issues_25500,"Could someone please provide end to end example for Proxy Minion with REST

I am new to SALT and trying to configure the Proxy Minion with REST support . I have gone through documentation at ''http://docs.saltstack.com/en/latest/topics/topology/proxyminion/index.html#proxytype-connection-class' and also watched the video at 'https://www.youtube.com/watch?v=_AQvk3Ca790' . But none of them give complete end to end scenario for running Proxy Minion with REST . I have python rest service running on localhost (https://github.com/cro/salt-proxy-rest), but couldnt figure out the ways to call REST endoints It would be great, i f someone could provide step by step instruction a) sample for top.sls b) sample for restservice.sls c) where to put rest_sample.py file . I would greatly appreciate any help on this .",Could you take a look and see if that helps at all?,"@cachedout The document looks good, and currently waiting for #25908 in order to validate the same ."
saltstack/salt,https://github.com/saltstack/salt/issues/25854,saltstack_salt_issues_25854,"Disabling CMD module on minion

I was trying to disable the CMD module on minion using 'disable_modules' configuration, so that it should not be available even from master . But it seems that its not supported and minion never comes up by throwing following error ",What is the output of `salt --versions-report`? Are there any other log statements that seem related? Does this happen if you instead add some other module to `disable_modules`?,@jfindlay :- Please find the underlying output from salt --versions-report . I have tried adding Test module 'disable_modules' and it works fine as expected . 
saltstack/salt,https://github.com/saltstack/salt/issues/27561,saltstack_salt_issues_27561,"Starting multiple proxy minions in same ssh session

When we issue the command 'salt-proxy --proxyid=p1' to start salt proxy minion the it never return the control back to console, as a result we have to start another ssh session in order to start another proxy i.e. 'salt-proxy --proxyid=p2' . One work around for this problem to issue above commands on nohup, but i believe it should be taken care by product .",What is the output of `salt-proxy --versions-report` Do you have any relevant debug log information or configs?,"@Ch3LL Please find the underlying output from 'salt-proxy --versions-report'. There are no specific debug info available, but in order to reproduce the issue just type ""salt-proxy --proxyid=p8000"" command on console and you will observer that control never comes back to console . [root@localhost salt]# salt-proxy --versions-report Salt Version: Salt: 2015.8.0 Dependency Versions: Jinja2: 2.7.3 M2Crypto: Not Installed Mako: Not Installed PyYAML: 3.11 PyZMQ: 14.7.0 Python: 2.7.5 (default, Jun 24 2015, 00:41:19) RAET: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed libnacl: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed python-gnupg: Not Installed smmap: Not Installed timelib: Not Installed System Versions: dist: centos 7.1.1503 Core machine: x86_64 release: 3.10.0-229.14.1.el7.x86_64 system: CentOS Linux 7.1.1503 Core"
saltstack/salt,https://github.com/saltstack/salt/issues/25544,saltstack_salt_issues_25544,"Issue with salt-call as non-root user

Hi all, I'm currently having an issue where i'm trying to run salt-call (on the same server where the salt-minion is running) in order to pull the configurations from the salt-master. (OS: RedHat 5) Running ""sudo salt-call state.highstate"", as an non-root user (the user that i am running salt-call has been given sudo rights to execute salt-call) will not completely succeed. Some of the configuration will be applied but some will fail. Specifically those who fail have to do with the creation of users or groups, and so far i'm having issue with the commands usermod, useradd, and groupadd. Running it with the debug mode, i can see that salt-call is complaining that the above commands do not exist. So, that made me think that the user that is running salt-call doesn't have /usr/sbin in his PATH. And so i exported /usr/sbin in the user's PATH, but still am getting the same issue. Running as root ""salt-call cmd.run 'echo $PATH' "" outputs the PATH of the root user: /usr/kerberos/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin Important to note, that as root i have no issue running salt-call. Of course...is root. But when i run ""sudo salt-call cmd.run 'echo $PATH' "" as my user, i get only: /usr/bin:/bin That is different from the PATH of my user account But in /etc/rc.d/init.d/functions, i see that PATH is being exported as: /sbin/:/usr/sbin/:/bin:/usr/bin So, why is that when running salt-call as my user, i don't get the same PATH as set in /etc/rc.d/init.d/functions or as set for my user account? I believe this is the reason why i am getting ""command not found"" for useradd, groupadd, usermod when running salt-call. Has anyone encountered this before or anything similar ? Version of Salt: 2014.1.4 Thank you in advance !",Can you try with 2015.5.3? Thanks.,"@jfindlay, thanks for your answer. For the time being, we cannot upgrade yet to a later version. I found another way, though. I wrote a web application in python/cherrypy running on the salt-master which pushes the configs to the specified slave. This way works as you'd push the configs from the salt-master itself, and no need for any kind of permissions."
saltstack/salt,https://github.com/saltstack/salt/issues/51659,saltstack_salt_issues_51659,"Create cron job every RANDOM minutes from a range of numbers without applying the state with every run

Currently, there's the ability to create a cron job that runs every RANDOM minutes/hours/days/months if you specify `random` in the respective field:  This gets applied successfully and a cronjob will be created with the `minute` entry set randomly between 10 and 20. This state, however, gets applied every time. I think that happens because now there's no more a numeric value in the `minute` field since we add the '*/' part to it. But setting `- minute: '{{ range(10,20) | random }}'` has the same effect and it gets applied with every run. I would think that this would work because there will only be a numeric value. Is there a way to achieve this? That is, setting the RANDOM cron minute/hour/day/month field from a range of numbers without the state getting applied with every run? ### Versions Report `salt 2018.3.3 (Oxygen)` Thanks,",Maybe @terminalmage has some insight?,"@mgriffin13 thanks for the reply. Unfortunately, the suggestion you made is not working - the state gets re-applied still. Furthermore, by setting `'10:20'` will create a cron entry like : `17 * * * * /script` and not like `*/17 * * * * /script`"
saltstack/salt,https://github.com/saltstack/salt/issues/26005,saltstack_salt_issues_26005,"winrepo pkg.removed state (and pkg module) do not remove if uninstaller is URI even if file is cached

I'm running the salt minion locally (version 2015.5.3) and have a winrepo set up. If a package in the winrepo has an uninstaller set to the URI of the .msi then the pkg.removed state or pkg.remove module will fail with an error message about being unable to open the installer file with the URI. This is true even if the file from that URI has been cached locally by running a pkg.installed state on it. The only way to get this to work is to have the installer cached somewhere manually. It seems like the correct functionality for uninstall should be the same as for installation in that if the uninstaller is specified and is cached locally, it will use it and if not it will download and cache the file. On windows though what would be a lot nicer is if the UninstallString value from the registries were used to uninstall a package if the uninstaller property in the wiinrepo state were not present. I noted in the code for win_pkg.py that the list_pkgs() function is going through the correct registry keys via _get_reg_software() and those same keys iterated in _get_reg_software() also _may_ contain a value called ""UninstallString"" that is a command that (usually) will uninstall that package (this is how add/remove programs works). What I'd ideally like to see the functionality be for pkg.remove is as follows: If a package is in the winrepo and has a specified uninstaller, it uses that uninstaller. (this usually works if the uninstaller is a file under salt://path/to/uninstaller or an absolute file path) If a package is in the winrepo and has an uninstaller that is a URI and matches the cached file from the installer, it uses the cached file. (this doesn't work and it doesn't try to download the file) if a package is in the winrepo and has no uninstaller specified, it tries to use the UninstallString in the registry (this is a feature request). if a package is NOT in the winrepo and the UninstallString value is present in the registry, it uses the UninstallString to attempt to uninstall the package (this is a feature request) If none of that is true, you get some sort of error. It looks like probably only the win_pkg module would need to be fixed since the state just calls that module.",Could you post the software definition you are using or an example?,"I have modified the sls from the winrepo and I have a few that don't exist in the winrepo (and still a few more that are a total clusterfuck because one of them is Java). Here's the init.sls in my local winrepo that I have defined for python2. The only thing I'm really doing differently is adding the TARGETDIR param to install_flags: <pre> python2: 2.7.10150: installer: 'https://www.python.org/ftp/python/2.7.10/python-2.7.10.amd64.msi' full_name: 'Python 2.7.10 (64-bit)' locale: en_US reboot: False install_flags: '/qn /norestart TARGETDIR=c:\python27' uninstaller: 'https://www.python.org/ftp/python/2.7.10/python-2.7.10.amd64.msi' uninstall_flags: '/qn' msiexec: True 2.7.6: full_name: 'Python 2.7.6 (64-bit)' msiexec: True installer: 'http://www.python.org/ftp/python/2.7.6/python-2.7.6.amd64.msi' install_flags: '/qn /norestart' uninstaller: 'http://www.python.org/ftp/python/2.7.6/python-2.7.6.amd64.msi' uninstall_flags: '/qn' locale: en_US reboot: False </pre> I have installed this package using `salt-call --local state.highstate` (although calling pkg.install works too). I then ran this command: `salt-call --local --log-file-level=debug pkg.remove python2` and here is the log file: <pre> 2015-08-06 11:40:50,783 [salt.config ][DEBUG ][28256] Reading configuration from c:\salt\conf\minion 2015-08-06 11:40:50,805 [salt.config ][DEBUG ][28256] Including configuration from 'C:\\src\\dev-setup\\minion.conf' 2015-08-06 11:40:50,808 [salt.config ][DEBUG ][28256] Reading configuration from C:\src\dev-setup\minion.conf 2015-08-06 11:40:51,621 [salt.utils.lazy ][DEBUG ][28256] LazyLoaded jinja.render 2015-08-06 11:40:51,625 [salt.utils.lazy ][DEBUG ][28256] LazyLoaded yaml.render 2015-08-06 11:40:51,634 [salt.utils.lazy ][DEBUG ][28256] LazyLoaded cmd.run 2015-08-06 11:40:51,636 [salt.utils.jinja ][DEBUG ][28256] Jinja search path: ['c:\\srv\\pillar'] 2015-08-06 11:40:51,642 [salt.template ][DEBUG ][28256] Rendered data from file: c:\srv\pillar\top.sls: base: '*': - devstuff 2015-08-06 11:40:51,661 [salt.utils.lazy ][DEBUG ][28256] LazyLoaded config.get 2015-08-06 11:40:51,665 [salt.loaded.int.render.yaml][DEBUG ][28256] Results of YAML rendering: OrderedDict([('base', OrderedDict([('*', ['devstuff'])]))]) 2015-08-06 11:40:51,669 [salt.utils.jinja ][DEBUG ][28256] Jinja search path: ['c:\\srv\\pillar'] 2015-08-06 11:40:51,673 [salt.template ][DEBUG ][28256] Rendered data from file: c:\srv\pillar\devstuff.sls: # source code folders are all in this root folder srcroot: c:\src\monolith # the repository you want devcon to manipulate (should be in the srcroot folder above) # if you have no repository in this location, do not set this pillar value # repository: trunk-shortcycle 2015-08-06 11:40:51,677 [salt.loaded.int.render.yaml][DEBUG ][28256] Results of YAML rendering: OrderedDict([('srcroot', 'c:\\src\\monolith')]) 2015-08-06 11:40:51,694 [salt.utils.lazy ][DEBUG ][28256] LazyLoaded jinja.render 2015-08-06 11:40:51,698 [salt.utils.lazy ][DEBUG ][28256] LazyLoaded yaml.render 2015-08-06 11:40:51,721 [salt.utils.lazy ][DEBUG ][28256] LazyLoaded pkg.remove 2015-08-06 11:40:51,727 [salt.utils.lazy ][DEBUG ][28256] LazyLoaded pkg_resource.parse_targets 2015-08-06 11:40:52,031 [salt.loader ][DEBUG ][28256] Error loading module.tls: ['PyOpenSSL must be installed before this module can be used.'] 2015-08-06 11:40:52,262 [salt.loader ][DEBUG ][28256] Error loading module.nacl: libnacl import error, perhaps missing python libnacl package 2015-08-06 11:40:52,571 [salt.loader ][DEBUG ][28256] Error loading module.ipmi: No module named pyghmi.ipmi 2015-08-06 11:40:52,596 [salt.loaded.int.module.cmdmod][INFO ][28256] Executing command 'npm.cmd --version' in directory 'C:\\Users\\jtucker' 2015-08-06 11:40:53,389 [salt.loaded.int.module.cmdmod][DEBUG ][28256] output: 2.11.3 2015-08-06 11:40:53,513 [salt.utils.lazy ][DEBUG ][28256] Could not LazyLoad pkg.normalize_name 2015-08-06 11:40:53,518 [salt.utils.lazy ][DEBUG ][28256] LazyLoaded roots.envs 2015-08-06 11:40:53,549 [salt.utils.lazy ][DEBUG ][28256] Could not LazyLoad roots.init 2015-08-06 11:40:53,553 [salt.fileserver ][DEBUG ][28256] Updating roots fileserver cache 2015-08-06 11:40:53,596 [salt.loaded.int.module.cmdmod][INFO ][28256] Executing command ['msiexec', '/x', 'https:\\\\www.python.org\\ftp\\python\\2.7.10\\python-2.7.10.amd64.msi', '/qn'] in directory 'C:\\Users\\jtucker' 2015-08-06 11:40:55,745 [salt.loaded.int.module.cmdmod][ERROR ][28256] Command ['msiexec', '/x', 'https:\\\\www.python.org\\ftp\\python\\2.7.10\\python-2.7.10.amd64.msi', '/qn'] failed with return code: 1619 2015-08-06 11:40:55,747 [salt.loaded.int.module.cmdmod][ERROR ][28256] output: T h i s i n s t a l l a t i o n p a c k a g e c o u l d n o t b e o p e n e d . V e r i f y t h a t t h e p a c k a g e e x i s t s a n d t h a t y o u c a n a c c e s s i t , o r c o n t a c t t h e a p p l i c a t i o n v e n d o r t o v e r i f y t h a t t h i s i s a v a l i d W i n d o w s I n s t a l l e r p a c k a g e . 2015-08-06 11:40:55,763 [salt.utils.lazy ][DEBUG ][28256] LazyLoaded nested.output </pre>"
saltstack/salt,https://github.com/saltstack/salt/issues/25569,saltstack_salt_issues_25569,"AWS Security groups cannot be specified along with network interfaces

When specifying a new network interface in AWS you cannot specify  Might be good to clarify documentation for AWS network interfaces or create a code fix for this to allow specification of groups and interfaces on separate calls",What is the output of `salt --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/26540,saltstack_salt_issues_26540,"Cannot match minion with reactor tgt

I'm following the latest documents on salt for reactor, however I seems to get problem matching the minions using grains:  I do have a minion with the role satis, and running salt -G 'roles:satis' state.highstate does work. However, running salt 'G@roles:satis' state.highstate also does not work.",Can you also try to confirm this on 2015.5.3 or later?,"The salt-call grains.items command result is too long, I will just paste one part of it:  @jfindlay I will see how I can upgrade on my server and report the result back"
saltstack/salt,https://github.com/saltstack/salt/issues/32460,saltstack_salt_issues_32460,"salt-minion config has wrong comment about default for `hash_type`

### Description of Issue/Question When starting the minion with the standard config, it gives this warning in the log: `... [salt.cli.daemons ][WARNING ][<pid>] IMPORTANT: Do not use md5 hashing algorithm! Please set ""hash_type"" to SHA256 in Salt Minion config!` This is in contrast to a comment in the config, which gives the impression that sha256 is the default. https://github.com/saltstack/salt/blob/develop/conf/minion#L480: `... The default is sha256, sha224, sha384 and sha512 are also supported.` ### Setup Simply install the latest salt-minion and start it. ### Steps to Reproduce Issue (see setup) ### Versions Report Salt: 2015.8.8.2","Did you install the minions with salt-cloud? This may be a duplicate of #32246, which has already been fixed.",Nope! Used the package from the official repo (http://repo.saltstack.com/#ubuntu to be precise)
saltstack/salt,https://github.com/saltstack/salt/issues/40737,saltstack_salt_issues_40737,"Fix consul_pillar documentation: 'root=' canNOT start with a slash

https://docs.saltstack.com/en/latest/ref/pillar/all/salt.pillar.consul_pillar.html currently uses ""`/`""-prepended values for `root=`: `root=/salt`, `/salt/%(minion_id)s`, etc. If you follow that, salt will complain in the log and not load the consult pillar. Line in master log: `2017-04-10 09:39:29,275 [salt.pillar ][CRITICAL][29745] Pillar render error: Failed to load ext_pillar consul: keys should not start with a forward slash`",Do you know the correct syntax? If so it seems an easy enough fix if you want to take a stab at it.,"Yes, I do. I have to say that I havent looked at how the docs are generated, btw, but I think I know. PR incoming."
saltstack/salt,https://github.com/saltstack/salt/issues/41435,saltstack_salt_issues_41435,"2016.11: Keystone.endpoint_present overwrites all interfaces

### Description of Issue/Question Using keystone.endpoint_present v3 API, and setting up admin, internal, and public URLs (ie, interfaces), the last interface in will overwrite and remove the previous ones ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) Using a simple for loop to setup say Designate endpoints from pillar: {%- for interface in ('admin', 'internal', 'public') %} keystone {{ interface }} endpoint: keystone.endpoint_present: - name: designate - interface: {{ interface }} - region: 'RegionOne' - url: 'http://{{ pillar['vip'][interface]['designate'] }}:9001' - require: - cmd: Identity service pre-setup {%- endfor %} And in pillar, having the following setup: vip: admin: ceilometer: X.X.X.X cinder: X.X.X.X db: X.X.X.X designate: X.X.X.X glance: X.X.X.X heat: X.X.X.X keystone: X.X.X.X mongodb: X.X.X.X neutron: X.X.X.X nova: X.X.X.X pdns: X.X.X.X rabbitmq: X.X.X.X internal: ceilometer: X.X.X.X cinder: X.X.X.X db: X.X.X.X designate: X.X.X.X glance: X.X.X.X heat: X.X.X.X keystone: X.X.X.X mongodb: X.X.X.X neutron: X.X.X.X nova: X.X.X.X pdns: X.X.X.X rabbitmq: X.X.X.X ldap: X.X.X.X public: ceilometer: X.X.X.X cinder: X.X.X.X db: X.X.X.X designate: X.X.X.X glance: X.X.X.X heat: X.X.X.X horizon: X.X.X.X keystone: X.X.X.X mongodb: X.X.X.X neutron: X.X.X.X nova: X.X.X.X pdns: X.X.X.X rabbitmq: X.X.X.X IPs are intentionally set to X.X.X.X for company secrecy, but for testing, make sure you have different IPs listed here. ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) Test using an OpenStack setup w/ the aforementioned SLS entry and pillar entry. You'll get output like so stating it's creating/updating the entries. Run it again, and you'll see that the admin one is being replaced w/ the proper IP due to something like: Comment: URL changes from ""http://X.X.X.X:9001"" to ""http://X.X.X.X:9001"" Interface changes from ""internal"" to ""public"" Endpoint for service ""designate"" has been updated And, doing a check for the endpoints, of which 3 should exist, you only get one: | 2169747cfff24d92979d587ebf3ab7df | RegionOne | designate | dns | True | public | http://X.X.X.X:9001 I've ran this several times and I either consistent get a report that 3 were added, but each subsequent interface will brick all others, leaving you in the end with just the public interface, no admin or internal one, or sometimes no endpoints at all as it would seem that public nukes itself? ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2016.11.5 Dependency Versions: cffi: 1.6.0 cherrypy: Not Installed dateutil: 2.4.2 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: 0.8.1 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 1.2.5 pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: 3.4.3 pygit2: Not Installed Python: 2.7.5 (default, Nov 6 2016, 00:28:07) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.4.2 ZMQ: 4.1.4 System Versions: dist: centos 7.3.1611 Core machine: x86_64 release: 4.9.28-1.el7.centos.x86_64 system: Linux version: CentOS Linux 7.3.1611 Core","Can you check if this PR fixes your issue? https://github.com/saltstack/salt/pull/39850 Thanks, Daniel","Per a comment I made on #35874: Could we get this fix backported to 2016.11 and likely 2016.3? Also, there's another issue that I'll open separately if you have multiple interfaces on V3, they'll keep overwriting themselves. The PR mentioned here fixes the region aspect, but there's still a problem w/ the interface. I'll look into the keystone*.py and see if it's readily apparent why interface is being overridden by each subsequent call and submit a PR. I should know later today/tomorrow if it's going to be a simple fix or not. If not, unless someone else with my knowledge of this module wants to take a swing at it, I'll await the Oxygen release and see if that fixes it and in the interim utilize the cmd.run/unless combination I'm using currently."
saltstack/salt,https://github.com/saltstack/salt/issues/44034,saltstack_salt_issues_44034,"salt-call pillar overrides broken in 2016.11.8 and 2017.7.2

### Description of Issue/Question Pillar overrides using salt-call fail to pass updated pillar information to ext_pillar. salt, not salt-call, still works however. This worked in 2016.11.7, but due to ""fixes"" in 2016.11.8, the functionality was broken. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) Using a command similar to the following and tracking the pillar information, you'll notice that the override status option isn't set. Similarly, using simpler options of pillar='{{""foo"": ""bar""}}' doesn't change anything. /usr/bin/salt-call state.highstate pillar='{""override"":{""status"": ""on""}}' ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) Install salt* 2016.11.7 and pass pillar overrides via salt-call, NOT salt. Notice it works. Update salt* to 2016.11.8 and redo test, you'll see it fails to work anymore. It's worth mentioning I'm using an external pillar and if I log the results of pillar in 2016.11.8 vs. 2016.11.7, I see the following in my logs: Oct 10 15:22:12 XXXXXXXXXXXXXXX salt-master: [CRITICAL] PILLAR: {} Oct 10 15:22:12 XXXXXXXXXXXXXXX journal: 2017-10-10 15:22:12,667 [salt.loaded.ext.pillar.roles][CRITICAL][26500] PILLAR: {} Oct 10 15:24:04 XXXXXXXXXXXXXXX salt-master: [CRITICAL] PILLAR: {} Oct 10 15:24:04 XXXXXXXXXXXXXXX journal: 2017-10-10 15:24:04,275 [salt.loaded.ext.pillar.roles][CRITICAL][26631] PILLAR: {} Oct 10 15:24:04 XXXXXXXXXXXXXXX salt-master: [CRITICAL] PILLAR: {'override': {'status': 'on'}} Oct 10 15:24:04 XXXXXXXXXXXXXXX journal: 2017-10-10 15:24:04,942 [salt.loaded.ext.pillar.roles][CRITICAL][26632] PILLAR: {'override': {'status': 'on'}} Oddly enough, running `/usr/bin/salt-call pillar.items pillar='{""override"":{""status"": ""on""}}'` does show the override in there. For now, I'm reverted back to 2016.11.7 due to this bug and the salt-api bug reported in #43581 which didn't start manifesting itself til upgrading to 2016.11.8. ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2016.11.8 Dependency Versions: cffi: 1.6.0 cherrypy: unknown dateutil: 1.5 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: 1.4.3 M2Crypto: 0.21.1 Mako: 0.8.1 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 1.2.5 pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: 3.4.3 pygit2: Not Installed Python: 2.7.5 (default, Nov 6 2016, 00:28:07) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.3.1611 Core machine: x86_64 release: 4.9.54-1.el7.centos.x86_64 system: Linux version: CentOS Linux 7.3.1611 Core BTW, if due to all the pillar override changes made in 2016.11.8, this changed the way pillar is passed to ext_pillar, could we get the documentation updated on how to utilize ext_pillar and pillar overrides, assuming that's even the root issue.","Can you include a test case with some sls examples and pillar data and configs? I tried with git pillar as external pillar, and also with pillar on the box.","Just create the simplest def ext_pillar referenced at https://docs.saltstack.com/en/2016.11/topics/development/external_pillars.html and make sure to reference it properly in your /etc/salt/master. Then, have it log the pillar variable and testing using v2016.11.7 and v2016.11.8, notice that when you do a `salt-call state.highstate pillar='{{""foo"": ""bar""}}'` that what's logged for the pillar variable will show foo:bar in .7, but not in .8. No SLS required for this test, you could even just have an empty top.sls for /srv/salt/top.sls Also, I'm starting a bisect in a moment, as I have a few spare cycles, and hopefully can pinpoint the git commit(s) that broke this functionality soon."
saltstack/salt,https://github.com/saltstack/salt/issues/25811,saltstack_salt_issues_25811,"salt state.highstate 'data failed to compile' returns 0, but should return >1

When running salt state.highstate it occasionally returns `data failed to compile` but still returns an exit code of 0 which makes it a little more difficult to verify the success of salt commands when scripted. ",Does this only happen with batch mode?,"I think, when not in batch mode, that it returns > 1. I will need to reproduce for certain."
saltstack/salt,https://github.com/saltstack/salt/issues/25652,saltstack_salt_issues_25652,"salt-cloud unable to create proxmox profile

I'm not able to create a new openVZ container via proxmox. I should mention that in the past (one or two salt versions ago, I was able to with the same provider and profiles). ",Does that fix resolve this issue for you?,"I installed a wildcard certificate on my proxmox server, and still wasn't able to get things working when salt-cloud was verifying ssl. I'm not sure if that is an issue with my configuration, or something else. In regards to the pull request, I was able to successfully get things working with the changes I made. In the little bit of research I did, it looks like salt cloud never used to verify ssl for proxmox (which is why i never had any problems in the past), but then that was changed with this commit (https://github.com/saltstack/salt/commit/860d4b73387497269f30c76ef533acc1ef60d1f1). All I changed in the code was give an option in the proxmox provider file to give the user the choice to verify SSL or not instead of having it hard-coded on or off."
saltstack/salt,https://github.com/saltstack/salt/issues/25670,saltstack_salt_issues_25670,"pkg.purged fails on some packages but not others (none are installed)

Running SaltStack (master & minion) v2015.5.2 on Ubuntu 14.04.2 (fully updated) I have 'oracle-java7.sls' that purges all non-oracle java versions before installation. ( See https://gist.github.com/PredatorVI/489819f205ef34693826 for full file and error. ) Of all the packages listed, 5 or 6 fail with: ",What is the minion debug log output when you run this state?,"As it so happened, I was struggling to reproduce this. Then it cropped up again whilst debugging another state. Output seen on master: "
saltstack/salt,https://github.com/saltstack/salt/issues/26471,saltstack_salt_issues_26471,"rabbitmq_user.py throwing exception when installing secondary rabbitmq node

I am using https://github.com/saltstack-formulas/rabbitmq-formula to install a 3 node rabbitmq cluster. The first node installs correctly which includes the cluster .erlang.cookie. On the 2nd node when it attempts to add the users (which should already exist I believe), the user tagged with 'administrator' fails with the following: ",What is the output of `salt --versions-report`?,# salt --versions-report  Debian source package: 2015.5.3+ds-1trusty1
saltstack/salt,https://github.com/saltstack/salt/issues/27207,saltstack_salt_issues_27207,"archive.extracted state not preserving file permissions

I have a state that downloads the latest Groovy Language ZIP file and extracts it to the system (see below) on Ubuntu 14.04. When I run this state, the /usr/lib/groovy/groovy-2.4.4/bin/\* files are not set as executable. If I do a WGET and download the zip file manually and unzip, the permissions are preserved. # State file ",What is the version of salt you are using?,"Sorry, missed the notification on this...we are using the latest 2015.5.3 available from the APT repository."
saltstack/salt,https://github.com/saltstack/salt/issues/26794,saltstack_salt_issues_26794,"Salt-ssh archive.extracted keep default doesn't appear to be 'False'

We were attempting to use archive extracted to download a tar file, extract it to /tmp/test. Even though by default it is not suppose to cache the file since Keep='False' by default, according to the API. The state was failing with the error  Editing the state file and adding `keep = False` seems to have fixed the issue. There also doesn't seem to be a good way (or at least good documentation) to extract archives which don't contain any subfolders. Even though it seems as though `if_missing` works for files also, not just directories, if so, it should be made more clear in the docs.",Will you provide more context about where you added `keep = False` to the state? I looked over the code but didn't see anything obvious to me.,"I just added to the SLS file. Sorry for the confusion. On Aug 31, 2015 12:00 PM, ""Justin Findlay"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/25721,saltstack_salt_issues_25721,"Strange ""Permission denied"" error with ""/etc/apache2/sites-available/default-ssl.conf"" with salt-ssh

I noticed a strange error when I tried to write a state which manages `/etc/apache2/site-available/default-ssl.conf`. The state failed with:  This might be related to https://github.com/saltstack/salt/issues/18310#issuecomment-98094716 as the error message is the same.",What happens if you replace the contents of the file with nothing or something else? Are there any extended attributes on the file?,"The file has no special/extended attributes, no acls. Plain 0644. Replacing the contents by something like ""12345"" makes the `-r cat` working as expected, so it pretty much must be related to original contents. You can easily reproduce this by just copying the contents into a file on any remote server and trying to retrieve the contents via salt-ssh. For reference, I put the contents of the file on http://pastebin.geany.org/8Oemn/. Note. that this is the stock Apache2 config of the Ubuntu 14.04 apache2 package."
saltstack/salt,https://github.com/saltstack/salt/issues/25735,saltstack_salt_issues_25735,"Comment about missing requisite adding unnecessary newlines

This is a small issue but I thought it looks like an error that should be documented. Version: 2014.7.1 (Helium) OS: CentOS 6 Note how in the first report of this missing requisite everything is laid out properly. ",Does this also happen on 2015.5.3?,"I haven't been able to try the new version yet. On 27 July 2015 at 11:14, Justin Findlay notifications@github.com wrote: ## -Scott"
saltstack/salt,https://github.com/saltstack/salt/issues/27495,saltstack_salt_issues_27495,"""SSL certificate is invalid"" despite gitfs_ssl_verify = False

Hello, I'm trying to setup gitfs with pygit2 provider with the following:  Maybe the problem is in init_repo() function of salt/utils.py for the Pygit2 class ...",What version of salt are you using?,Here it is :) :  in my ~/.gitconfig works.
saltstack/salt,https://github.com/saltstack/salt/issues/25806,saltstack_salt_issues_25806,"Ability to use personal images in Azure

When attempting to use a User image and not a Public image you'll receive the following error. <Error xmlns=""http://schemas.microsoft.com/windowsazure"" xmlns:i=""http://www.w3.org/2001/XMLSchema-instance""><Code>BadRequest</Code><Message>OSImage tt-win-sysprep not found. If you are using a VM image, it must be specified as VMImageName for the role, not as SourceImageName for OSVirtualHardDisk.</Message></Error> salt-cloud 2015.5.2 (Lithium) To get a list of User images available via Powershell $images = get-azureVMImage | where ( $_.Category -eq ""User"" } $images",What do you think? Want to add this information there instead of tracking two issues?,"@rallytime You are correct. I'll close this issue and add to the other ticket. That didn't come up in my search, sorry :-)"
saltstack/salt,https://github.com/saltstack/salt/issues/25847,saltstack_salt_issues_25847,"test=test functionality for state.sls_id

When running state.sls_id , if you append test=test to the command, it executes the command and makes changes, without actually running a test, showing diffs, etc. Please add test=test functionality to state.sls_id !",What versions of Salt are you seeing this in?,Master: salt 2015.5.2 (Lithium) Minions: salt-call 2015.5.2 (Lithium) salt-call.exe 2014.7.2 (Helium)
saltstack/salt,https://github.com/saltstack/salt/issues/30838,saltstack_salt_issues_30838,"require inside cmd.wait results in a True result every time

If you use a require inside of a cmd.wait, the state returns as True every time, even if the exit code of the cmd is 1. This doesn't happen if you use a watch statement instead of a require. eg;  Salt Master and minion: 2015.8.3",Does that help?,"That helps, thanks."
saltstack/salt,https://github.com/saltstack/salt/issues/38327,saltstack_salt_issues_38327,"2016.3.4 Windows minion broke s3 source for file.managed

### Description of Issue/Question Using an S3 source for file.managed state module appears to have been broken in Windows minion version 2016.3.4. This works fine on Windows minion 2016.3.3. Host is running Windows Server 2012 R2. `Exception: global name '__utils__' is not defined` ### Setup `yourstate.sls` ",Can you confirm this and close this issue? Thanks! Daniel,Confirmed. Duplicate of https://github.com/saltstack/salt/issues/37388 Closing.
saltstack/salt,https://github.com/saltstack/salt/issues/28511,saltstack_salt_issues_28511,"vmware clone task fails instead of waiting to completion

The task fails immediately, even though the clone process is still in progress. This occurs randomly, sometimes it works fine and sometimes it fails and I've not been able to find a reason for it. ",Can you assign me to this issue and other VMware cloud driver related issues in future? It would make it easier for me to keep track of assigned issues.,Running
saltstack/salt,https://github.com/saltstack/salt/issues/41214,saltstack_salt_issues_41214,"On AWS EC2: salt-cloud create -f create_keypair  does not returns the private key 

In order to create a new keypair on AWS EC2 you have to run the corresponding salt-cloud command and in theory you should get back the the private key pair (along with the other response info) but it does not work  Using salt-cloud 2016.11.4 (Carbon) it does not shows the private key pair nor relevant information.",Would you mind contributing that to salt?,"Sure, I will be more than happy to help with that little grain of salt. Just having a look to the issue seems I commit twice for the same issue, but only the last one (a08be24) is the correct one, first one (634f1f4) is wrong."
saltstack/salt,https://github.com/saltstack/salt/issues/26825,saltstack_salt_issues_26825,"After configuring salt-syndic, master/minion communication on the syndic node takes a long time to set up

I recently configured my home gateway as a syndic node (instead of just being a minion), so my master (which is on the other side of the intarwebz) has less overhead and my home minions just talk to the syndic node. I followed https://docs.saltstack.com/en/latest/topics/topology/syndic.html and was able to get it up and running after pruning the old keys and accepting the new ones. However, I noticed a certain slowdown when starting the master and the minion on the syndic node. The master starts up fine:  is what's bugging me and I believe to be related to the issue. That string is coming from one of my /etc/hosts 127.0.0.1 entries, which I have there for ad-blocking purposes. I know, I might be old-schooled, but shouldn't this not happen? It's not the first nor the last entry, it's right there in the middle, and I have made sure that 'tanya' shows up both in the system's LAN IP address AND 127.0.0.1 before all the ad-blocking entries. EDIT: forgot the version, 2015.5.3","When you make the code change, do you also not get the timeouts/master CPU hogging that you had before?","@jfindlay thanks for your comments. I noticed I do get the CPU hog, but I believe this is actually due to being an old system (1 core, 1GB RAM, going to upgrade to a newer one soon). However, no timeouts (well, if I test.ping way too soon, I do hit the CLI timeout, but another ping right afterwards and it completes). With the change applied, here is the master & minion log:  However, I don't care about this one in particular: I know the master and minion are starting up just fine, and I believe it just takes them a bit more time to start up given the resources' constraints. Also, no SaltReqTimeoutError's anywhere anymore :) As for the change, after chatting on IRC I learnt that MasterMinion is used only in a syndic context apparently, and my logic says that it's meant to act as both a minion (for the master of masters) and a master (for the lower-level minions), which makes sense. Am I on the right track here? If so, I do believe in this context that the minion_config() function should be receiving the path to the minion config file, instead of the master (since I don't have that many modifications from the defaults, this just works albeit with the issue as described). I know hard coding is not the way, it was just a quick test :) Cheers"
saltstack/salt,https://github.com/saltstack/salt/issues/25993,saltstack_salt_issues_25993,"Create a plugin for Hygieia DevOps Dashboard

I'd like to see a plugin for Salt deployments to integrate into the continuous delivery process displayed in Hygieia. This would make salt part of a comprehensive toolset. Hygieia is a DevOps Dashboard to track development. More info and a link to a video explaining the benefits are here: https://github.com/capitalone/Hygieia",Does Hygieia have an API? I took a quick look but didn't see anything that looked complete or semi complete,This is what I found on the site: https://github.com/capitalone/Hygieia/tree/master/api
saltstack/salt,https://github.com/saltstack/salt/issues/27266,saltstack_salt_issues_27266,"Cannot listen to directory for changes, can only watch

So I know I can watch a directory for changes, but I would like to trigger a service restart at the end of a salt run with listen. Unfortunately, that does not appear to be supported. Salt returns the following  For the short term, I will revert back to watch, but I feel like this behavior should also exist for listen. Related issue: https://github.com/saltstack/salt/issues/663",What version of salt are you using? Is it possible to post the debug log output of the minion when you run this state? Thanks.,I'm running `salt-minion 2015.5.3 (Lithium)`.  Do you need the log output to be more verbose than this?
saltstack/salt,https://github.com/saltstack/salt/issues/31468,saltstack_salt_issues_31468,"Feature Request: Allow users to enable ""queue=True"" for all state runs via config file

I'm having issues where a salt state that is already in progress is preventing deploys from occurring because `queue` is set to False by default. I noticed that another user had asked for this literally just a few days ago over [here](https://groups.google.com/forum/#!msg/salt-users/4W1xnzROfas/Jdnlj-J0CwAJ), and I was wondering if there is something I can do in the interim. This is particularly tricky for me because I am using `publish.full_data` and that is not a supported argument. So unless there is something I haven't found yet, I will have to parse the YAML output and then have to do a retry of sorts to ensure the deploys go out in 1 go and not require user intervention.  https://groups.google.com/forum/#!msg/salt-users/4W1xnzROfas/Jdnlj-J0CwAJ https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.publish.html","Can you wrap your module call in the 'module' state (https://docs.saltstack.com/en/develop/ref/states/all/salt.states.module.html) and run that state with queue=True ? A hacky workaround I know :smile: cheers, Tim","Ah, I should have wrote to allow the user to change the default behavior via some sort of config option in the salt master config. I've tried running with `arg='queue=True'` and it returned the following error to me"
saltstack/salt,https://github.com/saltstack/salt/issues/26017,saltstack_salt_issues_26017,"Missing functions in the 'file' module on Windows.

Versions report:  I suspect the issue here is that on windows, the `file` module is provided by `bin/Lib/site-packages/salt/modules/win_file.py`, which imports some, but not all, of the functions from the regular `file.py` module. Ideally `win_file.py` would import symbols without using an explicit list, so issues like this wouldn't crop up in the future, but I don't know enough about it to know whether that's possible.",Could you send a list of functions you'd like to see added to `win_file.py`?,"I can put together a list when I get a bit more time (the weekend should do), but in the meantime I have a thought: right now if you call one of those functions you get an error, so as long as the function is going to throw an error anyway, why not make them all available and let them error out if they don't work on windows (or at least issue an explicit ""this is not available on windows"" error)?"
saltstack/salt,https://github.com/saltstack/salt/issues/26452,saltstack_salt_issues_26452,"Unable to run tls.create_self_signed_cert

Hi, We are unable to create a self signed certificate for our salt instance, the error is shown below.  Any Ideas? Thanks,",Did you restart the minion after upgrading to 0.14 (0.15)?,Hi @jfindlay That worked like a charm. Thanks for your assistance.
saltstack/salt,https://github.com/saltstack/salt/issues/29270,saltstack_salt_issues_29270,"envrion.items not returning all variables

Hi, When running environ.items on a server we are not getting all of the environment variables, at first we were wondering why custom env variables weren't appearing now we can't see all the default ones.  As you can see we should be getting alot more info from the salt command. Thanks,",What version of salt are you using? What is the output of `salt 'zathras' cmd.run env`?,Hi @jfindlay On the minion the version is: 
saltstack/salt,https://github.com/saltstack/salt/issues/30595,saltstack_salt_issues_30595,"salt-minion memory overflow??

Last Friday,like memory leaks in some host problems. ![20160125095053](https://cloud.githubusercontent.com/assets/6895983/12540805/27442aee-c349-11e5-8e11-6a0e1a92d499.png) ENV: The server was started but havn't connected with the salt-master. LOG:(All is...) RROR ][2274] The Salt Master has cached the public key for this node, this salt minion will wait for 10 seconds before attempting to re-authenticate 2016-01-21 21:46:58,418 [salt.crypt ][ERROR ][2274] The Salt Master has cached the public key for this node, this salt minion will wait for 10 seconds before attempting to re-authenticate 2016-01-21 21:47:08,438 [salt.crypt ][ERROR ][2274] The Salt Master has cached the public key for this node, this salt minion will wait for 10 seconds before attempting to re-authenticate 2016-01-21 21:47:18,458 [salt.crypt ][ERROR ][2274] The Salt Master has cached the public key for this node, this salt minion will wait for 10 seconds before attempting to re-authenticate 2016-01-21 21:47:28,469 [salt.crypt ][ERROR ][2274] The Salt Master has cached the public key for this node, this salt minion will wait for 10 seconds before attempting to re-authenticate 2016-01-21 21:47:38,488 [salt.crypt Version: salt-2015.8.3-1.el6.noarch salt-minion-2015.8.3-1.el6.noarch",Could this be related to #30411?,@jfindlay Thanks~
saltstack/salt,https://github.com/saltstack/salt/issues/32610,saltstack_salt_issues_32610,"Use client_acl got error.

### Description of Issue/Question ",Do you see any interesting information in the master's debug log when you try to use the client_acl feature?,"@jfindlay ,I tested it again. ### Test command:  --- ### Conclusion After job 20160416122725056560, I use the client_acl feature and execute the same command agent , it seem's that master didn't send any messages. Like the master is not responding~"
saltstack/salt,https://github.com/saltstack/salt/issues/26316,saltstack_salt_issues_26316,"KeyError: 'process.absent' for salt 2015.5.3 version

I have a simple sls file: ",What is the output of `salt '*' sys.doc ps.pkill`?,"It's lack of psutil, after I install it, it's run correct"
saltstack/salt,https://github.com/saltstack/salt/issues/28017,saltstack_salt_issues_28017,"Using salt-cloud nova driver, raise error: SaltNova' object has no attribute '_discover_extensions' 

",What version of salt are you using? Will you post the redacted salt-cloud provider and profile configs that you are using?,
saltstack/salt,https://github.com/saltstack/salt/issues/27157,saltstack_salt_issues_27157,"salt.util.smb loads even when impacket library is missing

The salt.utils.smb module has a dependency on impacket. There is code for catching when the module impacket fails to load and HAS_IMPACKET is set accordingly however there is no __virtual__ function that verifies it so the module always loads. This for example makes bootstrapping a windows minion fail with a error and traceback about the global name 'impacket' not being defined. A workaround is of course to install the impacket library. Is the behaviour maybe by design?",Would you please post the traceback so that we can clean it up there?,Here is a traceback: 
saltstack/salt,https://github.com/saltstack/salt/issues/31509,saltstack_salt_issues_31509,"cmd.powershell causes certain commands to never return

With the behaviour of cmd.powershell automatically adding 'ConvertTo-Json -Depth 32' some commands will not return. The bug isn't really with salt but rather how the PowerShell command ConvertTo-Json deals with such a high depth. ### Expected Behavior cmd.powershell should return the output of the command ### Actual Behavior Certain commands will not return data in a reasonable time frame. ### Steps to Reproduce Issue cmd.run 'dir' works cmd.run 'dir' shell='powershell' works cmd.run 'dir | ConvertTo-Json' works cmd.run 'dir | ConvertTo-Json -Depth 32' never returns cmd.powershell 'dir' never returns Simply running 'dir | ConvertTo-Json -Depth 32' in PowerShell on a windows machine will display the same behaviour I would propose that the default depth of 2 is used and a flag 'json_depth' is introduced to allow users needing a higher depth to override it.",What version of salt are you using?,"Sorry for the late reply, currently on develop:  It would seem the behaviour was introduced by #25935"
saltstack/salt,https://github.com/saltstack/salt/issues/39143,saltstack_salt_issues_39143,"sdb modules cannot access any dunders

Sdb modules seem to not get access to any dunder dicts at all, if I understand the [source]( https://github.com/saltstack/salt/blob/develop/salt/loader.py#L843) correctly? This makes sharing code between an sdb module and other modules tricky, since they will likely use `__utils__`, `__opts__`, etc. Is there some reasoning here? I've read a bunch of issues about the potential for hard-to-understand dependencies, but sdb seems like a pretty benign case?",Can you share a small use case were you are not seeing dunders working with sdb modules?,@techhat Thanks! Left a small comment regarding possible expansion outside my immediate needs.
saltstack/salt,https://github.com/saltstack/salt/issues/42488,saltstack_salt_issues_42488,"pip_state cannot find system pip on Windows

### Description of Issue `pip_state` cannot find or use the pip binary that is bundled with Salt on Windows. Even pointing it out with the `bin_env` parameter does not work. ### Setup Without specifying pip path: ",Does it also need to add the `Scripts` dir?,"+1 on `use_salt_pip`, that would be much clearer! We're trying to use the same formulas in both our Windows and Linux environments, and having to differentiate on bin_env and cwd would make them much less clear. Explicitly saying that we want to use the bundled pip would on the other hand be clear."
saltstack/salt,https://github.com/saltstack/salt/issues/35166,saltstack_salt_issues_35166,"state_output_profile defaults are confusing

### Description of Issue/Question Defaulting to different values is confusing:  #29217 is related cc @clan",Can we improve the docs? I'm a little unclear what the issue at hand is exactly. Any other clarifying information would be appreciated. Thanks.,"@Ch3LL I think that default in code should be the same as in example config. I am happy to make a PR if salt developers agree. If salt developers disagree, I'd like to understand why."
saltstack/salt,https://github.com/saltstack/salt/issues/39118,saltstack_salt_issues_39118,"Minion ipv6 option is not documented

### Description of Issue/Question Salt master docs: https://docs.saltstack.com/en/latest/ref/configuration/master.html ![image](https://cloud.githubusercontent.com/assets/89186/22519970/5f4ad232-e867-11e6-99ae-c1ddb5b8602c.png) Salt minion docs: ![image](https://cloud.githubusercontent.com/assets/89186/22519993/70fc4768-e867-11e6-8161-ac9f08df48d7.png) Salt minion docs say that `master` is `ipv4` address and don't mention `ipv6`. When running `salt-call --master=ipv6.google.com test.ping` salt fails: ","Would you mind submitting a pull request with the update docs information? Thanks, Daniel",I can trade the docs PR for a fix for #38758 :)
saltstack/salt,https://github.com/saltstack/salt/issues/42758,saltstack_salt_issues_42758,"file.recurse exclude_pat doesn't work with ""clean: true"" anymore

### Setup This is what we have in state: ",What does your `dictionaries` data look like?,"My bad, here's a simpler test case to reproduce:  It seems like `exclude_pat` may be unrelated, it's `/tmp/issue-42758` that removed the file, not `/tmp/issue-42758/foo`. It works if I add require for `file: /tmp/issue-42758` in `config.xml`. The actual behavior change then is that `clean` started working recursively and you now need to put reverse requisites for each level that is getting cleaned up instead of just one parent level. Is that expected change? It doesn't seem intuitive."
saltstack/salt,https://github.com/saltstack/salt/issues/26601,saltstack_salt_issues_26601,"file.recuse face UnicodeDecodeError  with Chinese filename

Hi, When I try to sync directory with file.recuse function, if the some of the filename contains chinese, the sync filed as below. I tried to decode 'fn_' with 'utf-8', won't help either. my salt version: salt 2015.5.0 (Lithium) ",Can you please paste a sanitized output of that minion's grains?,"Hi @s0undt3ch, Sanitized grains output as below. this issue seems trigged by format. ![image](https://cloud.githubusercontent.com/assets/12538637/9456700/989d4b30-4b0d-11e5-9d2f-113a1266de42.png) "
saltstack/salt,https://github.com/saltstack/salt/issues/26624,saltstack_salt_issues_26624,"salt.state.host.present does not preserve order with multiple names

In Ubuntu (and possibly other distributions), the order of host names in a line in `/etc/hosts` matters, at least for 127.0.1.1. For example, the following causes `dnsdomainname` to return `example.com`:  I expect Salt to ensure that the hostnames are listed in `/etc/hosts` in the given order. Alas, if `foo` is already present, `foo.example.com` is appended.",What version of salt are you using?,I'm running 2015.5.3 (from the [saltstack/salt PPA](https://launchpad.net/~saltstack/+archive/ubuntu/salt)) on master and minions. The master and minions are running Ubuntu 14.04 64-bit server. I did some digging in the code and it looks like it will not be trivial to change `salt.states.host.present()` to behave as I had originally expected. This is due to the way the [names declaration](http://docs.saltstack.com/en/latest/ref/states/highstate.html#names-declaration) works. I have an idea on how to get the behavior I want; I'll submit a merge request when I have the time to put it together.
saltstack/salt,https://github.com/saltstack/salt/issues/26922,saltstack_salt_issues_26922,"Windows package partially downloaded

I've a weird issue on Windows right now. Only on some specific machines. When doing a package installation, the package download seems to block in the middle of the download operation and salt waits for the download to complete indefinitely. In the cache folder, the file is present but partially... ~100Ko instead of 3Mo. When restarting the service and deleting the file, I have the same comportment. But some time it finally download completly. This pattern can be reproduce on multiple machine and some machine does not have this issue. I'm running on Windows Xp and downloading the package through HTTP. I don't have any problem with my Apache server. Everything works fine for linux. Do you know if there's a bug with python-requests? This is the minion: ","How are you downloading the package? Manually, or via a script/salt state file? 2. Where are you downloading from?","@ssgward I'm downloading the package from pkg.installed state via an http Apache server on my network. Le ven. 4 sept. 2015 16:56, ssgward notifications@github.com a écrit :"
saltstack/salt,https://github.com/saltstack/salt/issues/47634,saltstack_salt_issues_47634,"saltclass fails to expand all variables

Saltclass variable expansion does not work if the variable is in a list, such as if you have a list of dictionaries in the pillar. This functionality worked in reclass. Make a pillar with a list of dictionaries and put a variable that you want expanded in the list <pre> pillars: substitute: key: value list_of_dicts: - id: dict1 a: ${substitute:key} - id: dict2 b: ${substitute:key} </pre> Run a pillar.get on list_of_dicts and the variable ${substitute:key} will not be expanded. <pre> # salt 'minion' pillar.get list_of_dicts minion: |_ ---------- a: ${substitute:key} id: dict1 |_ ---------- b: ${substitute:key} id: dict2 </pre> <pre> # salt-call --versions-report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 1.5.2 cherrypy: 3.6.0 dateutil: 2.4.2 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: 0.24.0 libnacl: Not Installed M2Crypto: 0.21.1 Mako: 1.0.1 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 1.2.5 pycparser: 2.10 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.24.0 Python: 2.7.13 (default, Jan 03 2017, 17:41:54) [GCC] python-gnupg: 0.3.7 PyYAML: 3.12 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.2.2 System Versions: dist: SuSE 42.3 x86_64 locale: UTF-8 machine: x86_64 release: 4.4.114-42-default system: Linux version: openSUSE 42.3 x86_64 </pre>",can you include how you have reclass setup with information sanitized? Also was this working previously with your current setup and if so what version?,"I have reclass working with Salt 2017.7.2 and reclass version 1,4,1. I use a YAML anchor in my master config: <pre> reclass: &reclass storage_type: yaml_fs inventory_base_uri: /srv/reclass </pre> and then use it like: <pre> master_tops: reclass: *reclass ext_pillar: - reclass: *reclass </pre> For the node files something like /srv/reclass/nodes/minion.yml: <pre> classes: - some_app environment: base parameters: hostname: minion </pre> and the class files something like /srv/reclass/classes/some_app.yml <pre> applications: - some_app parameters: substitute: key: value list_of_dicts: - id: dict1 a: ${substitute:key} - id: dict2 a: ${substitute:key} </pre> Then in /srv/salt/some_app/init.sls you could have: <pre> {% set data = salt['pillar.get']('list_of_dicts', {}) %} {% for item in data -%} touch /tmp/{{ item.id }}_{{ item.a }}: cmd.run: - creates: /tmp/{{ item.id }}_{{ item.a }} {% endfor %} </pre> You can see the variables are expanded properly with pillar_get: <pre> # salt 'minion' pillar.get list_of_dicts minion: |_ ---------- a: value id: dict1 |_ ---------- a: value id: dict2 </pre> and that the state some_app runs fine: <pre> # salt 'minion' state.sls some_app minion: ---------- ID: touch /tmp/dict1_value Function: cmd.run Result: True Comment: Command ""touch /tmp/dict1_value"" run Started: 09:28:23.855013 Duration: 24.864 ms Changes: ---------- pid: 5311 retcode: 0 stderr: stdout: ---------- ID: touch /tmp/dict2_value Function: cmd.run Result: True Comment: Command ""touch /tmp/dict2_value"" run Started: 09:28:23.880336 Duration: 17.711 ms Changes: ---------- pid: 5312 retcode: 0 stderr: stdout: Summary for minion ------------ Succeeded: 2 (changed=2) Failed: 0 ------------ Total states run: 2 Total run time: 42.575 ms </pre>"
saltstack/salt,https://github.com/saltstack/salt/issues/28796,saltstack_salt_issues_28796,"Enabling and disabling individual beacons that use YAML block sequences (""- "") fails with no comment.

Enabling and disabling individual beacons that use YAML block sequences (""- "") fails with no comment. Example of the problematic beacon configuration: ",What do you think?,@jfindlay thanks for the feedback. I agree with you that the list formatting would be more consistent with the rest of the system and will work on implementing that change.
saltstack/salt,https://github.com/saltstack/salt/issues/26703,saltstack_salt_issues_26703,"Broken selinux.mode for RHEL6

While trying to force selinux.mode RHEL6 keeps throwing the below error. Is there anything that I may have missed? ","What does `salt-call sys.doc selinux.getenforce` return? If it returns nothing, then it may be that salt thinks selinux is not installed.","Yes, nothing gets return for salt-call sys.doc selinux.getenforce. Also please note that it is a problem on RHEL5 as well."
saltstack/salt,https://github.com/saltstack/salt/issues/50593,saltstack_salt_issues_50593,"Redis returner fail with KeyError when 'cluster_mode' set to False

### Description of Issue/Question using configurations as below:  the configuration will be ignored if the configure value is like as `False`, `0` ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",what version of salt are you seeing this in?,"Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 1.6.0 cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: 0.26.3 libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.1 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.26.4 Python: 2.7.5 (default, Nov 6 2016, 00:28:07) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.3.1 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 3.2.5 System Versions: dist: centos 7.2.1511 Core locale: ANSI_X3.4-1968 machine: x86_64 release: 3.10.0-693.17.1.el7.x86_64 system: Linux version: CentOS Linux 7.2.1511 Core Megan Wilhite <notifications@github.com> 于2018年11月21日周三 下午11:05写道："
saltstack/salt,https://github.com/saltstack/salt/issues/52109,saltstack_salt_issues_52109,"TCPPubServerChannel._publish_daemon exit with error ""Cannot share PollIOLoops across processes""

### Description of Issue/Question with python2.7 and tornado > 5.0.0 the `PollIOLoop` is not allowed share across processes but the code in https://github.com/saltstack/salt/blob/develop/salt/transport/tcp.py#L1434  ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",Can you take a look here?,"@DmitryKuzmenko after digging some code, I found the Master called the `tornado.ioloop.IOLoop.current()` in the [GitFS.__new__](https://github.com/saltstack/salt/blob/develop/salt/utils/gitfs.py#L2698) when [Master._pre_flight](https://github.com/saltstack/salt/blob/develop/salt/master.py#L590) is called so when you use gitfs with tcp transport together the the publish daemon process will terminated with this error. by the way, you did not cache the error and log it:  so user can't instantly found the reason why publish daemon process exit"
saltstack/salt,https://github.com/saltstack/salt/issues/26730,saltstack_salt_issues_26730,"__opts__['user'] on Windows minion incorrect (eg for file.symlink)

__opts__['user'] defaults to 'root' if not specified, even though on Windows the installer has it running as 'Local System' or something. This causes a minor issue when creating symlinks on Windows because (according to the docs) the user/owner defaults to the user that is running the minion. As file.symlink uses __opts__['user'] to figure that out, by default Windows will try to create symlinks as 'root' and fail which doesn't match the behaviour in the docs. The docs say that the user arg will default to the user running the minion. The workaround for file.symlink is to always specify the user on Windows. But this could also be a problem for other modules and states that assume __opts__['user'] is the actual user running the minion rather than the default from the config file. Should the minion actually test which user it is running under to populate __opts__['user']? Even if that contradicts the config file? Maybe only test if user is not specified in the config file? Or should all the states and modules be more careful about whether they really want the actual running user or the value/fallback from the config file?",What version of salt are you using?,2015.5.2 on Windows 2012R2 installed by the salt provisioner in Vagrant 1.7.4 
saltstack/salt,https://github.com/saltstack/salt/issues/26802,saltstack_salt_issues_26802,"Erlang formatted strerr caused state module to print data instead of output

",Does the salt minion process have access to this file?,"The issue pertains to the output, not the actual error reported. The output of state.sls should be state output not a data report."
saltstack/salt,https://github.com/saltstack/salt/issues/27896,saltstack_salt_issues_27896,"Error executing gem.install (TypeError)

replicated on Archlinux  Looks like an environment problem?",What is the output of `salt --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/33090,saltstack_salt_issues_33090,"Reactors currently broken on develop

Reactors are not triggering on events I can see that the events are being triggered but no reactions Also logs don't show reactions being loaded ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue ","Can you also post the reactor configs you're using, or whatever may be necessary for a reproducible test case?",reactor config is pretty simple /etc/salt/master 
saltstack/salt,https://github.com/saltstack/salt/issues/48967,saltstack_salt_issues_48967,"host.only creates invalid host entries with garbage 

### Description of Issue/Question Given I am collecting host entries using salt mine and updating hosts using host.only then I ocassionally I get garbage in my hosts file. Expected Host.only should do some validation on input data ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2018.3.2 Dependency Versions: cffi: 1.11.5 cherrypy: 3.2.3 dateutil: 2.6.1 docker-py: 1.10.6 gitdb: 2.0.0 gitpython: 2.1.1 ioflo: Not Installed Jinja2: 2.9.4 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 1.2.3 pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (default, Nov 24 2017, 17:33:09) python-gnupg: 0.3.9 PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.1 timelib: Not Installed Tornado: 4.4.3 ZMQ: 4.1.6 System Versions: dist: debian 9.3 locale: UTF-8 machine: x86_64 release: 4.9.0-5-amd64 system: Linux version: debian 9.3",Can you provide some example states to replicate this? and also the garbage output you are seeing would be useful. Daniel,"here's the state, as for the output it looks like there is some binary daa mixed in, the issue could be in the salt mine also , I'm trying to see if there is any thing inmy state that might cause it "
saltstack/salt,https://github.com/saltstack/salt/issues/26843,saltstack_salt_issues_26843,"salt-cloud not passing name through to aliyun

So i've gone through and setup my cloud.profile and providers files point to aliyun. I then run the command `[root@ip-172-31-8-86 cloud.providers.d]# salt-cloud -p aliyun_centos centos_http_01` But then I get a error back saying the following.  I've run the same command in debug and it looks like it is creating the machine but not assigning it the correct name (getting a default name from aliyun). Here is the debug output https://gist.github.com/djpain/4373670a80c2997c5802",What is the output of `salt-cloud --versions`? Is it possible to post your cloud.profiles and cloud.providers files with the tokens and keys removed?,sure. I've put everything into this gist. https://gist.github.com/djpain/d0bbb643719f8831ef88
saltstack/salt,https://github.com/saltstack/salt/issues/37463,saltstack_salt_issues_37463,"Executing commands by targeting minions by pillar does not work with new pillars

### Description of Issue/Question When a new pillar is assigned to a minion and I try to target that minion by the pillar (salt -I '<pillar-name>') it can't execute any command (e.g. state.highstate, test.ping, state.sls). As described in the documentation (https://docs.saltstack.com/en/latest/topics/targeting/pillar.html => Note section) after a highstate the salt-master recognizes the new pillar and shows up the minion id, but no commands can be executed. ### Steps to Reproduce Issue 1. Add new pillar to minion (e.g. test_pillar: 1234) 2. Execute highstate for that minion (e.g. salt 'myserver' state.highstate) 3. Call a highstate by targeting that minion on its pillar (salt -I 'test:pillar:1234' test.ping) and the output will look like this:  **salt-minion** `salt-minion 2016.3.3 (Boron)`",What about running `salt '*' saltutil.refresh_pillar does that resolve the issue? In my test case it does.,"@Ch3LL Yes, after calling `saltutil.refresh_pillar` it worked. But a highstate should do the same, shouldn't it?"
saltstack/salt,https://github.com/saltstack/salt/issues/44184,saltstack_salt_issues_44184,"problem archive.extracted with accents

### Problem accent archive.extracted ### Hello, I have a zip archive with inside directories with accents. When extracted this archive, the accents as é è ê are replaced with a comma. I tried with the client Windows version of Salt-Minion-2017.7.2-Py3-x86, and everything works fine. So I have the impression that this is a bug with the client version salt running with python 2 ### Uses the client version Salt-Minion-2017.7.2-Py2-x86 for Windows Server: Salt: 2017.7.2 ### System Versions: dist: debian 8.9 locale: UTF-8 machine: x86_64 release: 3.16.0-4-amd64 system: Linux version: debian 8.9 ###",Can you please share the state you are using to extract the zip directory?,"xxxxxxmachin.fr: ---------- ID: extract-zip-test Function: archive.extracted Name: C:\ Result: True Comment: salt://win/repo-ng/logiciels/test/test.zip extracted to C:\\, due to absence of one or more files/dirs Started: 18:16:56.362000 Duration: 327.0 ms Changes: ---------- extracted_files: - test/gÂnÂ/ - test/gÂnÂ/Nouveau document texte.txt Summary for xxxxxxmachin.fr ------------ Succeeded: 1 (changed=1) Failed: 0 ------------ Total states run: 1 Total run time: 327.000 ms"
saltstack/salt,https://github.com/saltstack/salt/issues/27038,saltstack_salt_issues_27038,"Data from external pillars stored in list-types gets duplicated

Hi, I'm using Salt 2015.8.0 and I'm currently working on some external pillars. I've observed that data stored in list-types get duplicated when the pillar is evaluated. A small external pillar demonstrates the behavior: ",Will you post more information on where you're putting your external pillar and how you're telling salt-call about it? Thanks.,"I've set the the masters `extension_modules` setting to `srv/modules`, put the python file into `/srv/modules/pillar` and configured the `ext_pillar` setting. I've tried to reproduce this on a different server today, but couldn't reproduce it either. "
saltstack/salt,https://github.com/saltstack/salt/issues/27105,saltstack_salt_issues_27105,"Minion is down on the master, but is still running.

I am having an odd issue with salt. I have 7 minions that just stop responding on the master side somewhere around 24 hours after a restart. This is out of almost 50 minions. I cannot pinpoint when they stop working as I see nothing in the log or the debug output on either the minion or the master. The really odd thing is that the minion service is still running just fine and I can use salt-call locally to run states. All machines are running ubuntu 12.04 and are up to date with the newest version of salt and the version of zeromq from the salt repo. I am not sure what more to do to troubleshoot. I have tried to use debug mode on both the minion and the master and purged and reinstalled the minion on a couple of the machines. The salt versions report shows these versions and it is the same for both minion and master. They all install and update from the same repo that I have internally set up.  All of these servers are on different vlans, some are on the same one as the Salt Master, some are not. All of the vlans have minions on them that are working perfectly though.",Do you get any zmq debug log output when using `zmq_monitor: True`?,I have not gotten anything from setting zmq_monitor: True
saltstack/salt,https://github.com/saltstack/salt/issues/28151,saltstack_salt_issues_28151,"minion state filesystem not updating

Not sure if that is an accurate description, but here is what I am seeing: On master, salt minionname cp.list_master ",Do you know if this happens between the master and minions running another version of salt (something earlier or later than 2015.5.5)?,After working through issues documented in #28229 I can document here that the problem also exists between minion and master v2015.8.1. minion versions 
saltstack/salt,https://github.com/saltstack/salt/issues/28721,saltstack_salt_issues_28721,"winrepo repositories must reside within file_roots base:

After some hair tearing today, I've discovered that the winrepo MUST live within the file_roots base: I had configured the winrepo to be at the same level in my local filesystem as file_roots base: and had some very strange and unhelpful errors as a result. Seems that if this is a dependency, that the configuration should require a relative path instead of absolute.","What do you think, @UtahDave?","It seems that winrepo_dir is not a required setting and defaults /srv/salt/win/repo. If I change file_roots.base to /srv/salt/formulas, it silently breaks winrepo functionality. IMO, it would follow rulle of least astonishment to have winrepo default to a location that is relative to file_roots.base. And of course require an absolute path if you point it to some other location. If you place it outside of a file_roots path, it should generate some warning. In this same winrepo functionality, I ran across another issue that I will create a separate issue for. Mentioning it here as it is related. It seems there is no way to turn off the default repo locations for winrepo_remotes as well. I'm find that if I don't set a remote, I get the saltstack/salt-winrepo.git. I believe this requires me to rename my fork of the repo and still leaves me vulnerable to issues with the public repo. I'll open another issue for this. And of course all of this applies to _ng variants as well."
saltstack/salt,https://github.com/saltstack/salt/issues/29290,saltstack_salt_issues_29290,"Reactor triggered by cloud/*/created fails to execute on minion

I've been chasing this for several days and am coming to the conclusion that it does not work. I am trying to trigger the following state file from a <code>'salt/cloud/*/created'</code> event. On the master, I see the reactor properly rendered in the master logfile, I see the following state file rendered. On the minion, in a debug logfile I see no indication that the minion was contacted by this reactor. In an IRC conversation, it has been suggested that this cannot dependably work and that there is no way to assure that the master can communicate with the minion when this event is triggered. However, in the documentation, I see a nearly identical example of this goal with comments stating that the "" a minion fires an event when it is able to receive commands"". The doc here: https://docs.saltstack.com/en/latest/topics/cloud/reactor.html#example-reactor-based-highstate So either I am doing something wrong in this state file or there is a bug, or the doc needs to be updated. Not sure which. I appreciate any help sorting this out. Running on salt version 2015.8.1 on both master and minion with minion being a Windows instance on EC2. ",Could you gist a larger portion of the logs? The stuff I'm looking for will be after all of the rendering of the reactor SLS file.,I'll need to recreate this as I am not confident in the logfile I have in my possession. I'll get back to you on this over coming days as I am traveling for the next few. Tks
saltstack/salt,https://github.com/saltstack/salt/issues/37450,saltstack_salt_issues_37450,"FreeBSD EC2 deployment fails ssh login

### Description of Issue/Question Attempting to deploy a FreeBSD AMI in EC2. The deployment process proceeds to stage of ssh connecting to minion to complete config and hangs attempting to login. Every possible linux login is used (ubuntu, ec2-user, etc.) despite the configuration explicitly setting 'root' as the ssh_username: I've also tried without setting ssh_username as the docs suggest that the default is root. ### Setup Instance profile config: ",Can you manually ssh into the box after its created?,Affirmative
saltstack/salt,https://github.com/saltstack/salt/issues/27599,saltstack_salt_issues_27599,"Minion dies silently after highstate

 Salt is installed minions and master with the RedHat distribution. Salt minions and master are used in user mode (Use of root_dir: <path to user home>/salt/ No log, no trace, no core, even started with -l debug. No problem reported on the master side. The highstate is success but the next salt actions timeout on the newly missing minions. It is random but repeatable, 0 to 5 minions on a set of 45 servers. Not always the same servers. This appeared this week, having worked without trouble for 1.5 month with this version and before 8 months with the 2014.1.12 version.",Could the minion be running out of memory?,Nothing in the logs so far. Plenty of memory on the minions:  It doesn't appear when targeting one minion only. Appears frequently when there is plenty of output from 5+ minions.
saltstack/salt,https://github.com/saltstack/salt/issues/30151,saltstack_salt_issues_30151,"archive.extracted doesn't accept source; 

archive.extracted doesn't accept source: attribute as a list. The try I made was using :  with the same http entry works. As described by its documentation, source: should behave the same way as in file.managed.",What version of salt are you using?,I am using salt 2015.5.0 (Lithium) on this server.
saltstack/salt,https://github.com/saltstack/salt/issues/27169,saltstack_salt_issues_27169,"Amazon Linux NameError: global name '__salt__' is not defined

I am seeing the same behavior below with the Salt Minion installed through Amazon Linux as recently as today. As with the original post of this issue, I receive the same errors for any calls using the following states with a minion at v2015.5.5 :  I can repeat this behavior with any Salt Minion installed on Amazon Linux that is running v 2015.5.5. However, my Salt Minions that are using version 2014.7.5 work without issues using the same Salt Master and SLS files. My Salt Master is version 2015.5.5. Thanks, Dave",Does this failure happen only for those two state functions?,"It occurs on newly installed minions. At this time, it is only those two functions but I am going through more of my SLS files today to see if any others produce the same error message. On Wed, Sep 16, 2015 at 11:49 AM, Justin Findlay notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/51881,saltstack_salt_issues_51881,"Create a grain that lists the salt modules that are loadable on a given minion

### Description of Issue/Question A built in grain that provides a list of loadable modules for a given minion would provide a wide range of benefits. The mechanism used by sys.doc to determine what documentation to should may provide a good starting point. The idea originally came from the excellent mind of @whytewolf. Could have a significant impact on User Interfaces that are built on top of Salt.",Why a grain and not just a module function? How this is different from `sys.list_modules`?,"The goal for this idea is to have information in the grain cache of the Salt Master, which supports knowing the capabilities of a minion by inspecting grain cache, rather than having to first trigger a remote execution to retrieve the list of applicable modules."
saltstack/salt,https://github.com/saltstack/salt/issues/27191,saltstack_salt_issues_27191,"Request: show multiple comments if appropriate?

I ran into an issue today where the comment in my state.apply said that my service was going to be restarted and it was confusing to me because I only expected it to be enabled and I was unsure as to whether or not the enable was going to take place. Ideally, I would've liked to have seen that it was going to be enabled _and_ restarted from just the comments.","What state are you using to restart the service, `service.enabled`, `service.restarted`? Also, is it possible to paste an example output of what you're seeing? Thanks.",I'm using service.running with enable: True. Relevant snippet after state.apply:  ... something along those lines.
saltstack/salt,https://github.com/saltstack/salt/issues/33709,saltstack_salt_issues_33709,"Any/All Salt-SSH invocations in 2016.3.0 Fails with AttributeError: 'module' object has no attribute 'BASE_THORIUM_ROOTS_DIR'

CC @basepi as this is a total road block with salt-ssh on 2016.3.0. We cannot run anything. ### Description of Issue/Question Any call to salt-ssh fails with `AttributeError: 'module' object has no attribute 'BASE_THORIUM_ROOTS_DIR'` ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) The gist here is that we use a SaltFile and relative paths in our master config. Do note none of our config or states seem relevant as far as I can tell. The code fails really early. ### Steps to Reproduce Issue Run any salt-ssh invocation on any target.  ### Versions Report Cannot get this due to the error, traceback same as above for `salt-ssh --versions-report` salt-ssh = 2016.3.0 python = 2.7.10 Gentoo I am happy to provide any further information you may be interested in.",Do you have any leftover pyc files by chance? how did you install salt-ssh? Did you upgrade from a previous version?,"Hello @Ch3LL , thanks for your response. To answer your questions: I deleted the PYC files. I installed using pip in a virtualenv on python 2.7.10. I upgraded from 2015.8.10. I will try to repro with a fresh virtualenv, but I would expect this to work OK via a pip install -U."
saltstack/salt,https://github.com/saltstack/salt/issues/27217,saltstack_salt_issues_27217,"Gitfs cleans up wrong directories

When running a file recurse state, copying some files fails because the wrong directory is cleaned up.  which removes the gitfs directory.","Can you please post your master config, as well as the version of Salt you are running? You shouldn't have the second ""gitfs"" there unless there is some misconfiguration.","We're running the 2015.8 branch.  I can also confirm, that this fixes our problem with the gitfs directory vanishing during file transfer."
saltstack/salt,https://github.com/saltstack/salt/issues/44373,saltstack_salt_issues_44373,"states.file.managed and modules.file.manage_file fail on some http downloads

### Description of Issue/Question Downloading a file using `file.managed` from a local http server (Apache2) which previously (in versions <2017.7.2, probably 2016.11.*) succeeded, now fails. It results in a 0 bytes file which subsequently fails the hash check, failing the state. Interestingly, downloading the same file from github.com works. It seems to be a bug in `salt.utils http.query` (tornado backend) or `salt.modules.file.manage_file` since 2016.11. ### Setup Apache2 fileserver config: ",can you give https://github.com/saltstack/salt/pull/44016 a try?,"I can't run any non-release salt versions on these boxes at the moment, but I can validate that #44016 fixes this issue. Basically, setting:  immediately fixes the problem, so an empty `Content-type` HTTP header caused it. Thanks for the immediate response. I'm closing this, as it's effectively addressed by a merged patch and thereby ""duplicates"" #44013."
saltstack/salt,https://github.com/saltstack/salt/issues/30971,saltstack_salt_issues_30971,"sls with empty output leads to ""requisites were not found""

Hi, In this example I have two states, which retrieve some data from pillar. One state is depend from another. The error occurs when the first state doesn't get any data from pillar, so it produces zero output, and the second state fails with `The following requisites were not found: require: sls:` ",Do you have an alternative expectation?,"@jfindlay, actually `contents_pillar` is another issue there, not related to the bug, I'm talking about. Sure the state rendering fails if `contents_pillar` is absent. But in this example this state does a job only if pillar data `yumrepos:` exist. So, execution of a module doesn't pass to the inside of a loop, where `contents_pillar` is defined. The first state works with or without any content in pillar. It's some kind of state, which are applied to all of my hosts (70+). In case some data is defined at pillar, the state does a job. In other case, it does nothing. And it actually working that way. salt/repos/custom.sls (short version)  In that case, the second state (packages/init.sls) is working good. It's find the require dependence to be resolved. (There are also no data at pillar) But I don't think that this is a good solution. I suppose there is some bug in sls rendering subsystem."
saltstack/salt,https://github.com/saltstack/salt/issues/27436,saltstack_salt_issues_27436,"salt-master high cpu usage when minions are taken offline without deleting keys

If you forget to delete a minion from your salt-key's the master will progressively build up in cpu usage. I ran into this issue because I was testing some new servers which I added to my main salt cluster. After testing I got rid of the servers but I forgot to remove their salt keys from the master. I assume the salt master is continuously trying to contact them. Perhaps some exponential backoff logic would fix this? ![bad salt](https://cloud.githubusercontent.com/assets/5204642/10120064/69f8c28a-6478-11e5-8aed-73e41b476932.png)",What is the output of `salt --versions-report`?,@jfindlay See below 
saltstack/salt,https://github.com/saltstack/salt/issues/41673,saltstack_salt_issues_41673,"scheduling job in pillar environment doesn't work outside of base

### Description of Issue/Question You can not schedule jobs via pillars in environments besides `base`. NOTE I tested on the latest develop branch(2017.5.0-241-gbc0f969) as of yesterday. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) Master config ",Can you confirm that the scheduled job shows up if you do a pillar.items?,@garethgreenaway it's showing up in `pillar.items pillarenv=prod`. I'd like to note I have set the environment and pillarenv in the minion config to `base` to prevent accidentally running states with mixed pillars(from prod and test). 
saltstack/salt,https://github.com/saltstack/salt/issues/27265,saltstack_salt_issues_27265,"State: dockerng.running; creation hostconfig replaced with runtime hostconfig when using runtime options

Hi, when using the dockerng.running state like this: ",What versions of salt and docker are you working with?,"@jfindlay see above, I use the 2015.8 Release with docker 1.8.1 and docker-py 1.4.0"
saltstack/salt,https://github.com/saltstack/salt/issues/27685,saltstack_salt_issues_27685,"salt-ssh : No Top file or external nodes data matches found

Hi, Each first `salt-ssh -i '*' state.highstate`, on a fresh install server, i have the error ""No Top file or external nodes data matches found"" ( host : debian 8, guest : debian 8). This same command run perfectly the second time. ",What is the output of `salt-ssh --versions-report`?,@jfindlay thanks for your interest in this issue 
saltstack/salt,https://github.com/saltstack/salt/issues/32553,saltstack_salt_issues_32553,"git.clone on Windows worked in 2015.2.0rc2 but not on 2015.8.8

### Description of Issue/Question When running git.clone on windows 2015.8.8 I am getting the following call stack:  After looking into the code, it seems like git.clone is now using the ssh module, however the ssh module will return False in **virtual** if salt.utils.is_windows(), thus it does not exist.",What version of Windows is your minion running on? What is the exact command you're running? Are you running salt from the CLI? or in a state file?,"We are calling it from a external module. Furthermore, it is happening on multiple versions of the windows os (although if you look at the the code associated with the call stack it will obviously occur on any version of Windows"
saltstack/salt,https://github.com/saltstack/salt/issues/27404,saltstack_salt_issues_27404,"Full name includes unicode prefix when creating user in osx

We get RealNames like "" u'REAL NAME' "", but only on first run. If you run the state a second time it actually corrects the real name to be ""REAL NAME"" First run debug: ",What version of salt are you using?,salt minion 2015.5.5 salt master 2015.5.3
saltstack/salt,https://github.com/saltstack/salt/issues/27435,saltstack_salt_issues_27435,"firewalld state: firewalld.prepare calls new_service, not add_service

Given the following state: ",What is the output of `salt-call --versions-report`?,@jfindlay thanks for the prompt triage. Output as follows: 
saltstack/salt,https://github.com/saltstack/salt/issues/27460,saltstack_salt_issues_27460,"Orchestrate runner not resolving reference to a built in state

I have some custom states related to setting up GlusterFS that invoke the builtin glusterfs state. When these were all invoked as part of the top file all was peachy (except the event ordering that I need). I created an orchestrate sls file and now my references to the built in glusterfs state are not being resolved. This is the orchestrate state file /srv/salt/orch/genotyper.sls ",What version of salt are you using?,@jfindlay - Thanks for checking in. Here's the info. 
saltstack/salt,https://github.com/saltstack/salt/issues/44683,saltstack_salt_issues_44683,"Overriding state/pillar values.

I'm trying to use Saltstack in a scenario where there is a base product with some states/pillar defined in a git repo, and then there are custom applications of that base product with augmented/overridden states/pillar as necessary in a separate git repo. For each custom application, the user copies the top file from the base product and customizes it as necessary. I have gitfs set up with the two repos and states seem to function reasonably well this way, but I am running into an issue with pillar, where if I list the customization first in the master file and then the base product:  ... then pillar values are overridden as desired, but the base product top file is used, thus new sls files, and new keys, are not picked up. Is something wrong in this setup? What is the right way to get the desired behaviour, i.e.: Base product states/pillar by default, and custom states/pillar with overridden values if desired. Thanks.",Do you have any pillar specific master settings setup?,"What do you mean by this? The code excerpts above are from my master file. Below is pretty much the entire master configuration, with a bit of redaction: "
saltstack/salt,https://github.com/saltstack/salt/issues/27490,saltstack_salt_issues_27490,"Small patch to fix pkg.latest on OpenSuse

Looks like the expected return content of pkg.latest_version has changed and the zypper module was not updated to suit. This (along with an unchecked list deref) were causing pkg.latest to stackdump during my state runs after updating to 2015.8.0. Adding insult to injury, recent zypper versions append ""(version XXX installed)"" to the ""out-of-date"" status field, which was borking the simple ""if string in [ ... ]"" match. Here's a small patch which tunes it up. Since it uses 'startswith()' rather than 'in', it should (untested) be backwards compatible with older zypper versions. And yes, I really did just edit the file live on my system as root :-p Sometimes yah gotta live out on the fringes like that... ",Will you open a pull request against 2015.8?,"PR @ https://github.com/saltstack/salt/pull/27556 Thanks t. On Tue, Sep 29, 2015 at 2:18 PM, Justin Findlay notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/27492,saltstack_salt_issues_27492,"salt-ssh 2015.5.3: JSON Render failed for cmd.run

I have the following in a state file:  I am using sudo: True to become root, in case that's relevant.",What is the output of `salt-ssh --versions-report`? Does something like this command succeed? ,"@jfindlay:  Your command works fine. I'm also using cmd.run in other states without problems. The only difference is that I'm using a pipe in the problematic one, I think that might be the cause."
saltstack/salt,https://github.com/saltstack/salt/issues/29452,saltstack_salt_issues_29452,"Deep copy issue in reactors

Running into this issue occasionally:  'provserv.create' is our own custom runner. This has also been happening in some of the other functions in the runner. It doesn't happen all the time - just occasionally - even when running with the same data. May be related to #29123, as we are also using the **opts** dunder.",What version of salt are you using?,@jfindlay - 2015.8.1 ( both master and minion )
saltstack/salt,https://github.com/saltstack/salt/issues/30487,saltstack_salt_issues_30487,"pillar top files not merging cleanly.

The pillar top file merge strategy doesn't seem to be working as cleanly as it should. Here's the config: /etc/salt/master  The other option would be to add an option to prevent an environment from redefining another environment's top. Ideally, it would just throw out the 'base' section in the /srv/pillar/dev/top.sls file.",What version of salt are you working with?,@jfindlay - 2015.8.3
saltstack/salt,https://github.com/saltstack/salt/issues/33212,saltstack_salt_issues_33212,"external_auth requires users are allowed read access to salt-master configs

### Description of Issue/Question When using external_auth, commands fail if they don't have access to all the configuration files. ",Do you have any ideas around this one @techhat ?,"So, two thoughts ( and not fully-formed ): 1 - Would it be possible to limit the needs of the salt command to read the master configs? ( Or at least, read ALL of them? ). We could limit access to those secrets via normal filesystem permissions. Not fantastic, but it's the age old problem of how to securely keep secrets in config/scripts. 2 - Was thinking of how we could, internally, integrate salt with something like Hashicorp's Vault. Something along the lines of generating a token that is required for the salt-master to start, which it would then use to read config values from the Vault, and then revoke it's own token. Could then extend the salt command to accept a token that would then be used to access the Vault with that user's access. Like I said - half baked idea at this point, but it'd be interesting to see something along those lines for holding secure data. sdb seems to be an interesting idea - but as you mentioned, it'd be nice to wrap some type of ACL/authorization around sdb. It accomplishes the goal of getting the passwords out of the configs, but they're still just as easily accessible via sdb.get it would seem."
saltstack/salt,https://github.com/saltstack/salt/issues/33276,saltstack_salt_issues_33276,"minion_id_caching has no documentation

### Description of Issue/Question The minion_id_caching option has no documentation. It's not documented in the docs, nor in the configuration examples. Not sure what else to say :)",Does that help?,"@rallytime - yup! Especially since, somehow, that config value ended up in our master config and now I can take it out. :D"
saltstack/salt,https://github.com/saltstack/salt/issues/36702,saltstack_salt_issues_36702,"Make _modules/_grains/_pillar, etc configurable lists

### Description of Issue/Question Right now, each 'team' we have in Salt has their own git repo that we sync down to a directory like /srv/salt/org/<team name> I'd like to be able to offer our users the ability to sync custom modules to their minions, and allow them to keep those modules in their git repos. However, it seems like the only module dir that is looked in is the <fileroot>/_[modules|grains|pillars] in each environment. There are a few ways I can think of doing this: a) Adding a sync_dirs as a configurable location, much like module_dirs, or runner_dirs. This would add a configurable location for the fileserver to add to the directories that it will sync down. b) Expanding the _dir search to subdirs c) Allowing a git repo's subdirs to be mounted to different subdirectories. ( and probably others ). We could work around it with separate repos specifically to hold the modules and then mount those in new environments but that doesn't seem user friendly. Option A seems to be a bit cleaner than the other options.",Would that work?,"@gtmanfred - so I don't think extension_modules works like that. What I know ( or thought I knew ) about the extension_modules and module_dirs configuration options: - extension_modules is a parent directory where a master or the minion will read extra modules for use. It's also the directory that a minion will install the modules synced from the master into. - module_dirs is a list of directories to read execution modules from. There's also runner_dirs to read runners, util_dirs to read util modules, etc. However, the only place that the master will sync modules to minions is the <fileserver env>/_modules or <fileserver env>/_grains, etc. That's why you can actually specify extension_modules be a directory outside of salt's fileroots - because it's simply a place where modules are read/installed into. In order to sync modules, the directory would have to be something in the fileserver in order for the minion to grab it."
saltstack/salt,https://github.com/saltstack/salt/issues/29307,saltstack_salt_issues_29307,"Suggestion: salt-master, salt-minion should not be able to run multiple instances

I lost half a day yesterday (because I'm dumb) to debugging a problem with the event system before I discovered that I had inadvertently started two instances of salt-minion on the same computer. That was 100% absolutely my fault … but at the same time I can't think of a _good_ reason why anybody would want to do that, in production or even in testing. I freely admit this may be a failure of imagination on my part, but right now I'm inclined to suggest that salt-master and salt-minion (and maybe salt-api?) should include some kind of mutex mechanism that would prevent multiple instances from starting up. If there's already an instance running that was started by `systemd`, trying to start another instance from the command line would result in an error message. Just a suggestion.",What version? We recently made a number of improvements in this area.,"I'm using 2015.8.1, specifically the packages for CentOS from the Salt repo.  Doing a `-l trace` instead just gives the expected messages related to starting up the minion. Nothing about there already being a minion running. I should point out that this particular server is both a master and a minion, but I can get the same behavior on any of my minion-only minions (which run either CentOS 7 1510 or OS X 10.11)."
saltstack/salt,https://github.com/saltstack/salt/issues/29546,saltstack_salt_issues_29546,"Can't seem to get orchestrate to recognize a failed state

(This is reminiscent of, and may be somehow related to, #29465.) I can't seem to get `state.orchestrate` to recognize when a state has failed. My minimal test case consists of two state files and an orchestration. state/whatever/test1.sls:  It looks _to me_ — and please recall that I'm a rank amateur at Salt — like the test1 state is pretty clearly returning word of its failure, but that the orchestrate runner is failing to correctly interpret that ret. But again, I'm still so new at this that you can practically assume I'm making all this up as I go. In any case, right now this is preventing me from deploying Salt in production. I really want to be able to trap failed states and interrupt orchestrations that have gone sideways before they wreak havoc. Any suggestions for such a workaround would be _incredibly_ welcome. Thanks!",What version of salt are you using?,"I'm so sorry, I got so caught up in making sure my example was solid I forgot to give you this: "
saltstack/salt,https://github.com/saltstack/salt/issues/31504,saltstack_salt_issues_31504,"Returner Influxdb 404 page not found

Hi ! ### Expected Behavior Want to return some Salt output on InfluxDB ### Actual Behavior When I try : `salt-call influxdb.db_list` No problem, It give me the list of databases But When I try : `salt-call test.ping return= influxdb` I got : ### Steps to Reproduce Issue Try so send output to InfluxDB ? ### Versions Report Salt Version: Salt: 2015.8.7 Dependency Versions: Jinja2: 2.7.3 M2Crypto: 0.21.1 Mako: Not Installed PyYAML: 3.11 PyZMQ: 14.4.0 Python: 2.7.9 (default, Mar 1 2015, 12:57:24) RAET: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 cffi: 0.8.6 cherrypy: Not Installed dateutil: 2.4.2 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed libgit2: Not Installed libnacl: Not Installed msgpack-pure: 0.1.3 msgpack-python: 0.4.2 mysql-python: 1.2.3 pycparser: 2.10 pycrypto: 2.6.1 pygit2: Not Installed python-gnupg: Not Installed smmap: Not Installed timelib: Not Installed System Versions: dist: debian 8.3 machine: x86_64 release: 3.16.0-4-amd64 system: debian 8.3 I Try with Influx 0.9.x et 0.10.x (the new one). ### Relevant Logs, Configs, or States The **minion.d/influxdb.conf** is simple, localhost:8066 (it work because influxdb.db_list work) I find something : When I curl localhost:8086, I got logs in **influxdb.log** but when I salt return, not any logs... Thanks =)",Did you create the InfluxDB database first?,"Yes, the database exist and the user 'salt' grant all permissions. "
saltstack/salt,https://github.com/saltstack/salt/issues/32404,saltstack_salt_issues_32404,"IPv6 network.managed bug

### Description of Issue/Question Hi, I found a bug when I try to appli an IPV6 on eth1 (for example) with or without an IPV4. ### Setup  I have try on Salt 2015.5.3 and 2015.8.8. My connexion Master/Minion only in IPV6 work only with 2015.5.3 and not on 2015.8 (this is another problem).",Would you mind submitting a separate issue for your IPv6 connection issues?,Here is the issue for my IPv6 interconnexion problem : https://github.com/saltstack/salt/issues/32430
saltstack/salt,https://github.com/saltstack/salt/issues/38672,saltstack_salt_issues_38672,"IPv6 Network states is incomplete

### Description of Issue/Question I'm trying to deploy IPv6 Addresses to my minions, but following documentation, it doesn't work. I have looked at states/modules in develop branch about networking and debian.IP but can't be able to find some usefull thinks for v6. ### Setup *networking.sls* : ",Does it work if you change it to `- ipv6ipaddr: fc00::1/128` ?,"Hi, Same result here : "
saltstack/salt,https://github.com/saltstack/salt/issues/27670,saltstack_salt_issues_27670,"salt-bootstrap used by salt-cloud can't install python-requests

After a upgrade to 2015.8.0, initiating a Amazon instance with salt-cloud in a functional profile we receive the next error message: ",Can you please run `salt-cloud -u` to update to the latest stable bootstrap script and try again?,"Update the bootstrap script didn't solve the problem, but passing params to bootstrap script with:  in the provider config, solves de problem."
saltstack/salt,https://github.com/saltstack/salt/issues/27807,saltstack_salt_issues_27807,"Information about syntax error in custom execution module

Unfortunately, in normal way any Python syntax error in custom execution module does not displayed at salt-master -- there is only one message like `'my.test' is not available`. To find a mistake one need to call the module's function at minion by means of `salt-call`.",What version of salt are you using? Similar to #26755.,"@jfindlay, I use 2015.8.0"
saltstack/salt,https://github.com/saltstack/salt/issues/28290,saltstack_salt_issues_28290,"""cmd"" function of Salt's client interface sometimes returns empty dict

Mater: Ubuntu 14.04, Salt 2015.8.1 Minion: Windows 8.1, Salt 2015.8.1 I have the following SLS-file `cp_dir.sls`: ",What am I missing here?,"@cachedout, please, excuse me. Unfortunately, I have a problem with free time. I will try to investigate this issue in more detailes on the next weekend."
saltstack/salt,https://github.com/saltstack/salt/issues/27800,saltstack_salt_issues_27800,"Multiple simultaneous daemons (or highstates?) when using startup_states: highstate

I am having an issue where Salt executes the same state twice when the deamon is started. Minion information:  I can't tell if the processes I'm seeing are just daemons or simultaneous highstates, but ultimately I end up with two instances of my application running. If I kill both instanes of JBoss and just execute salt-call state.highstate, I don't have this issue. So my theory is that there are either multiple simultaneous highstates, or a single highstate that is somehow getting processed by two instances of the salt-minion. If I remove the 'startup_states: highstate' from the configuration, I no longer have issues with simultaneous highstates.",Do you know if this happens on 2015.5.5 or later?,"Hey @jfindlay, I will try to reproduce with 2015.5.5 today. One other relevant factor - we had a startup_states specified both in the startup.conf file locally on the minion as well as in pillar data."
saltstack/salt,https://github.com/saltstack/salt/issues/39922,saltstack_salt_issues_39922,"disk.fstype doesn't properly check the filesystem for unmounted volumes

The salt module `disk.fstype` uses the `df -T` command to check the filesystem type on volumes. Unfortunately df only lists filesystems that are mounted, `file -s` should be used to test block devices for their file types. ### Setup Attach a volume to a machine and format it as ext4 without mounting it, try to use disk.fstype on it. It will report the type as `devtmpfs`. Now mount it and try again, it will report the type as ext4. Salt Version: Salt: 2016.11.2 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.6.9 (unknown, Sep 1 2016, 23:34:36) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.3.1 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 3.2.5 System Versions: dist: machine: x86_64 release: 4.4.30-32.54.amzn1.x86_64 system: Linux version: Not Installed","Would you mind submitting a pull request to fix this? If not, i have tagged out platform team to take a look. Thanks, Daniel",Here's a PR #39925
saltstack/salt,https://github.com/saltstack/salt/issues/27817,saltstack_salt_issues_27817,"If the order masters can use the rest_tornado?

I configured the order masters and tornado api ,but using an error I use the architect is master - syndic - minion I want to start the rest interface in the master to control the minion ,trying to use rest_tornado with a syndic setup [tornado.application][ERROR ][24274] Future exception was never retrieved: TimeoutException Where is the timeout configuration, please Use no problem on the master,Just use an error in the order master",What version of salt are you using?,
saltstack/salt,https://github.com/saltstack/salt/issues/28121,saltstack_salt_issues_28121,"Unable to manage file: SaltReqTimeoutError: after 180 seconds, ran 3 tries

i got a error when I use minion to run state Unable to manage file: SaltReqTimeoutError: after 180 seconds, ran 3 tries  I don't know and I configured the two file is there a link between the root But haven't seen the wrong",What state? Can you provide an SLS example?,"the state is very simple,Each run But running after a period of time will appear this problem I restart master service solution #flume_ng.tar.gz flume_source: file.managed: - name: /tmp/flume-1.5.0.tgz - source: salt://flume_ng_z/flume-1.5.0.tgz rm_flume: cmd.run: - name: rm -rf /tmp/flume-1.5.0.tgz"
saltstack/salt,https://github.com/saltstack/salt/issues/31048,saltstack_salt_issues_31048,"salt.states.rvm.gemset_present not working

Hi, When I use the rvm state provided in the salt documentation it doesn't work, and always raise **RVM is not installed** error, even sourcing rvm, while working when i run **gem install ...** from command line. Here is my rvm init.sls :  Can you tell me what's wrong with **salt.states.rvm.gemset_present** state please? Thankk you. Regards.","What version of salt are you using? This looks like a bug to me, but I'm not sure exactly what the fix would be.","Hi @jfindlay , This is my salt version :  I'm using **Debian Wheesy** Regards."
saltstack/salt,https://github.com/saltstack/salt/issues/27855,saltstack_salt_issues_27855,"boto_vpc is not reading availability_zone

Hi All, I think there is a bug in both_vpc state module. When i start to create two subnets in two different zones they are ignored. This is in my state file:  as you can see, they are both created in us-west-1a. Also if i set both to us-west-1b they are sill created in us-west-1a.",What version of salt are you using?,"Hi, Have have test it on two different machines. I have test it on mij Macbook and my virtual machine CentOS 7.1(clean install) On my Mac it works and on my VM not. The version i am using on my centos machine is the development branch, but is also happend when installing it from the new repo.saltstack.com. Versions MacOS:  I also created a script in python using boto 2.38.0 and create multiple subnets(create_subnet function) with it and this works on both my Mac an CentOS. Let me know if i need to test things out."
saltstack/salt,https://github.com/saltstack/salt/issues/27895,saltstack_salt_issues_27895,"Can't launch any command using salt 2015.8 on mac os X

I get this error each time I try to launch a command using sudo salt (I tried sudo salt '*' test.ping, and sudo salt '*' state.highstate) I installed salt using 'sudo pip install salt' Binaries salt-cloud and salt-key are working correctly. <img width=""1368"" alt=""screen shot 2015-10-13 at 10 07 05"" src=""https://cloud.githubusercontent.com/assets/4005291/10449183/34da476e-7192-11e5-9b6c-9c5cc8fc4786.png""> [10:07]$>sudo salt --version salt 2015.8.0 (Beryllium) Thanks in advance",Can you brew update? How did you install a newer version?,"Hi, thank you for looking, I used pip to get the latest version. But if 2015.8 is now available on Brew, that's a good news !"
saltstack/salt,https://github.com/saltstack/salt/issues/27980,saltstack_salt_issues_27980,"salt-cloud 2015.5.0 azure provider could not be loaded

We have configured both an AWS and Azure provider for a salt-cloud POC. The AWS provider works but we receive the below error for Azure when running any command such as:  We have installed all dependencies (Azure python SDK, OpenSSL) and our python version is 2.7.10.","Could you please post the output from `salt-cloud -l debug --list-sizes my-azure-config` and `salt-cloud --versions-report`? Also, which version of requests are you running?",Python requests version: 1.2.3 `salt-cloud -l debug --list-sizes my-azure-config` 
saltstack/salt,https://github.com/saltstack/salt/issues/28034,saltstack_salt_issues_28034,"get_docker not returning weird information

get_docker is not retu returning weird information: ",Do you mean information on _wired_ network interfaces?,Sorry for vague description. This is actually duplicate of #18509.
saltstack/salt,https://github.com/saltstack/salt/issues/32009,saltstack_salt_issues_32009,"Add batch size to compound matchers

Expected functionality: be able to run reactor on exactly one node when highstate fails. Scenario: 1. X number of master servers 2. Y number of minion nodes 3. When any of highstates from any of the minion fails, execute a command with reactor exactly one time from any of the master servers Seems like adding batch size to compound matchers would solve this..","Could you clarify, please?","I want a failure in highstate on any minion to execute _some reactor_ on _exacty one_ master node (exactly one == only once). I'm not sure if this is achievable via compound matcher modification only (I doubt it). So, to achieve this, the following needs to be achievable in the reactor run: - execute some shell script - doable - target only master nodes, to make sure that we only run it from known set of nodes - doable - limit the execution to only 1 - this is for me unknown for now, as the compound matcher will try to run the reactor on all of the master nodes (in parallel). The goal is to actually run it in a sequence: - try to run on first master - if it succeeds, stop - if master unreachable or command retval > 0, continue to the next minion from compound matcher"
saltstack/salt,https://github.com/saltstack/salt/issues/28014,saltstack_salt_issues_28014,"a gpg'ed pillar affects also minions who are not targets for that pillar

I have a gpg'ed string in a pillar. If i add a new minion, which is not a target for that pillar, the minion can not do a highstate. The result is:  This is an unexpected behavior. From my point of view, minions should not get affected by pillars not targeting them.",What are the versions of the master and minion?,Ah sorry that i missed that. salt-master version is 2015.8.1 salt-minion version is 2015.8.1 both are installed from saltstack debian packages 2015.8.1+ds-1
saltstack/salt,https://github.com/saltstack/salt/issues/28278,saltstack_salt_issues_28278,"salt-ssh publish.publish: Permission denied on thin_dir

I'm having problem with `salt-ssh` using `publish.publish`, basically when I run:  I use a `Saltfile` pointing the config directory to my current directory. Am I doing it wrong? Does `salt-ssh` support the `publish` module?",What is the output of `salt-ssh --versions-report`?,"Sorry, forgot to mention that: "
saltstack/salt,https://github.com/saltstack/salt/issues/30199,saltstack_salt_issues_30199,"dockerng run attach

Is it possible for dockerng to start a container via state or module and attach the output to the console until the container stops? In my workflow many container just needs to run once until it stops, then start another state. If not, is this a viable feature?",Can you let me know the versions of docker and docker-py that you have installed?,"Docker version 1.9.1, build a34a1d5 docker-py==1.6.0"
saltstack/salt,https://github.com/saltstack/salt/issues/30266,saltstack_salt_issues_30266,"dockerng.create links kwargs error

This works: ",What version of salt are you using? Will you also post the minion debug log when you run the `dockerng.create` state?,"I am using salt develop, I do a pull every day so its fairly recent. "
saltstack/salt,https://github.com/saltstack/salt/issues/28086,saltstack_salt_issues_28086,"Stop service dependency

I deployed [SNMP formula](https://github.com/saltstack-formulas/snmp-formula) however instead of adding users in normal location I would like to add them in the recommended config file: `/var/lib/net-snmp/snmpd.conf`. This requires to stop SNMP service before and I'm having troubles to do so using code listed below, `require_in` complains about `Recursive requisite found` and `prereq_in` creates a recursion loop. I'm sure there is a way to do this and I'm just simply doing something wrong. ",Could it be getting confused by the `onchanges` requisite pointing to the same place as `require_in`?,"@jfindlay, sorry for the late reply, seems like I don't receive email notifications any more. I still can't get this to work, the requirement is simple, stop service before append to a file but only if ""usmUser"" content is not in config file. I tried a few different [requisites](https://docs.saltstack.com/en/latest/ref/states/requisites.html). I think that [onchanges](https://docs.saltstack.com/en/latest/ref/states/requisites.html#onchanges) would be best here but unfortunately append file function doesn't support it."
saltstack/salt,https://github.com/saltstack/salt/issues/33852,saltstack_salt_issues_33852,"Nagios returner not working

**1.** The `__virtualname__ = 'nagios_nrdp'` so I think the documentation should be updated to reflect that, i.e.: ",Do you mind looking at the changes and giving some input as to whether they are the right way to approach these issues?,@Ch3LL thanks for picking this up @garethgreenaway `Nagios Core 3.5.1` but I don't think that's the case here. It's just not returning the correct data:  This will need some more tweaking because it's still doesn't work with `scheduler`: - it doesn't honor the `return_kwargs` options - scheduler has a different output
saltstack/salt,https://github.com/saltstack/salt/issues/36615,saltstack_salt_issues_36615,"Returner sends invalid results data from scheduled tasks

These two jobs were scheduled at the same time: ",Do the jobs run correctly and its just the return output of the jobs that is incorrect?,"Yes, jobs run correctly and this seems to be related to scheduler because it works fine when scheduled with system cron:  This is affecting our monitoring system because incorrect data is returned to Nagios."
saltstack/salt,https://github.com/saltstack/salt/issues/28122,saltstack_salt_issues_28122,"Unable to set Docker log driver when using Dockerng

states.dockerng.running has no ""log-driver"" option, so I am unable to switch to using the syslog driver and keep all the logs on the host without sharing any host volumes. ( see https://docs.docker.com/reference/logging/overview/ ) As a workaround I tried setting DOCKER_OPTS in /etc/default/docker which seems to have no effect when the containers are started from the command line, but I really want to set the options per container. I think being able to set log-driver is essential, or at least useful for anyone trying to use Docker and Salt in anger! Many thanks",What version of salt are you working with?,salt-minion 2015.8.1 (Beryllium) salt 2015.8.1 (Beryllium)
saltstack/salt,https://github.com/saltstack/salt/issues/28136,saltstack_salt_issues_28136,"HTML Parser is not defined

Hey guys, Was trying to run: salt-run manage.up To get a list of my minions and ran into this:  easy fix?",What version of Salt do you have installed?,salt 2015.8.1-2437-gb8271c7 (Beryllium) installed with boostrap url.
saltstack/salt,https://github.com/saltstack/salt/issues/28455,saltstack_salt_issues_28455,"highstate.cache is world readable, and contains secrets

",Can you confirm?,"I can confirm that I'm using state.sls. I'm attempting to test with highstates now, but it sounds as though that code path does not have this issue. I've worked around it for now with:  but it will probably effect a lot of people who run state.sls."
saltstack/salt,https://github.com/saltstack/salt/issues/30167,saltstack_salt_issues_30167,"Salt-Cloud: Windows EC2 provisioning.

This is related to year back issue - #18308. It seems fixed (as suggested) but still getting similar errors. Any pointers would help. ### Issue: - Provider: EC2 - Description: _While trying to provision EC2 windows machine (with settings of win_deploy_auth_retry_delay is set as 120 and total number of retires are set as 10), I am getting below error - no matter how many times I run. Above setting should give sufficient time for password generation and setting. (doc says 4 minutes)._ ### Log:  `Error: There was a profile error: Failed to authenticate against remote windows host`",Can you provide your cloud configs with the private info redacted? What version of salt are you using?,Thanks @jfindlay Salt version: `salt 2015.8.3 (Beryllium)` Few details (master IP etc) are masked but it will not change anything :) - Provider Config 
saltstack/salt,https://github.com/saltstack/salt/issues/28153,saltstack_salt_issues_28153,"brew module can't find brew executable

Salt - 2015.8.1 OSX - any version Brew - any version Salt pkg module is broken in OSX. ie: ""salt 'hostname' pkg.list_pkgs"" Does nothing, like it can't find the ""brew"" executable (by default in ""/usr/local/bin"") After creating a symlink of ""/usr/local/bin/brew"" in ""/bin/brew"". Now I get an output in the salt minion log saying that brew cannot run from ""/usr/bin"" (this is a security feature of Brew) Now at least I know it's calling brew but it can't run from that location. How do we change the way pkg looks for brew ? I see these lines here but I'm not sure what to change where... https://github.com/saltstack/salt/blob/develop/salt/modules/brew.py#L55-L73","What is the output of `brew --prefix`? BTW, I've renamed this issue to give it a more descriptive title.","If I'm on the client via command line I get ""/usr/local"". If I do from the salt master "" salt 'hostname' cmd.run 'brew --prefix "" I get nothing..."
saltstack/salt,https://github.com/saltstack/salt/issues/28219,saltstack_salt_issues_28219,"salt-minion hangs system on OSX

Starting salt-minion on OSX hangs the system for a couple of minutes... Here's a dtruss log ",What version of salt are you using and how did you install it? Do you have any relevant configs or other information?,"Salt 2015.8.1 I have many OSX systems, It hangs on some of them on any version, 10.9 or 10.10. But it works on some... I believe I juggled to much with the last couple of versions of Salt. I installed some via homebrew, others via PIP. I did uninstall in between but there might be some weird package somewhere still stuck there... I will do a clean install of OSX 10.10 and see how it goes."
saltstack/salt,https://github.com/saltstack/salt/issues/28322,saltstack_salt_issues_28322,"When salt-minion schedule task  exit abnormally, the schedule  task will not start again

I have one schedule task like this:  But test.getinfo may happen coredump sometimes for some unknown reason. Then the task will not start again, because the pid which coredumped was used by another process in 10 seconds. Details: 1. salt-minion start this task, It will get a new pid(for example 777) by os.getpid() in salt.utils.schedule.handle_func(), and record task information in ""/var/cache/salt/minion/proc/jid"" . 2. then coredump happens , salt.utils.schedule.handle_func() will exit abnormally without delete the file ""/var/cache/salt/minion/proc/jid"". 3. another process started and used this pid 777 in 10 seconds 4. 10 seconds timeout , salt-minion try to start a new task, but 'jobcount' will be 1 under this scenario . because ""/var/cache/salt/minion/proc/jid"" exist and salt.utils.process.os_is_running(pid) return True. How to resolve this problem? such as checking the process name ?",What is the output of `salt --versions-report`?,"@jfindlay , thanks for your attention. The output of salt-minion --versions-report :  I think the latest version has this probelem too. Because the realization of function salt.utils.process.os_is_running(pid) is not changing"
saltstack/salt,https://github.com/saltstack/salt/issues/28363,saltstack_salt_issues_28363,"Although it is se i get ""Configuration value 'provider' needs to be set""

I'm trying o write my own cloud module I have profile and provider files set, vm_ loads in all other variables set in those directories EXCEPT variable ""provider"" Any clue what could be wrong??? # cat /etc/salt/cloud.profiles.d/pb.profile.conf  .... Any idea??? p.s. however, if i write some other varible: value in profile file, it gets there to create(vm_) function properly",Does that help? Let me know if you have any questions.,"yes, thnx"
saltstack/salt,https://github.com/saltstack/salt/issues/36243,saltstack_salt_issues_36243,"system.set_computer_name not working

When trying to set the computer name on the Windows Machine using `system.set_computer_name`, it returns false ### Setup Linux Master and Windows Minion ### Steps to Reproduce Issue ",How are you installing Salt?,@UtahDave Using the bootstrap script for the master.
saltstack/salt,https://github.com/saltstack/salt/issues/39119,saltstack_salt_issues_39119,"Head of 2016.3 - Salt-Master uses 90 seconds to restart

When restarting the master on head of 2016.3, it uses about 90 seconds to restart. The minion restart fine. ",Can you tell me how much data is in the master cache? Particularly the number of files?,"It was a clean machine with just salt installed, I tried twice with clean machines on head of 2016.3, with same result. "
saltstack/salt,https://github.com/saltstack/salt/issues/47901,saltstack_salt_issues_47901,"2017.7.6 - Exiting command with CTRL-C gives Error/Traceback

### Description of Issue/Question On 2017.7.6 when using CTRL-C to exit running command it gives this traceback: ",Can you give that a try when you have a moment?,It is working correctly for me with that fix.
saltstack/salt,https://github.com/saltstack/salt/issues/47955,saltstack_salt_issues_47955,"2018.3.1 Creating Windows machine in Amazon using salt-cloud fails.

### Description of Issue/Question In 2018.3.1 when trying to create a windows machine in amazon from a linux master with salt-cloud it fails with this error: ",Can you apply that fix to your 2018.3.1 test branch (or pull down #47998) and test this again?,It's working fine with that fix.
saltstack/salt,https://github.com/saltstack/salt/issues/49114,saltstack_salt_issues_49114,"[Fluorine] Minionswarm dont work - ImportError

### Description of Issue/Question In Fluorine, when trying to use minionswarm, it fails with tis error: ",Did this work with previous versions?,"@garethgreenaway I installed using the bootstrap script, not the newest version since that dont work with Fluorine. I did this:  which is not in the 2018.3.2 minionswarm.py, which I just tried and it works fine there"
saltstack/salt,https://github.com/saltstack/salt/issues/55787,saltstack_salt_issues_55787,"KeyError: 'saltutil.is_running' on Fedora 31

### Description of Issue Getting `KeyError: 'saltutil.is_running'` on Fedora 31 ### Steps to Reproduce Issue ",How did you install salt? And where did you get the `2019.2.1rc0` salt version from? We do not have that version as part of the Saltstack repo in GIthub. Thanks.,I installed via salt-bootstrap.
saltstack/salt,https://github.com/saltstack/salt/issues/28570,saltstack_salt_issues_28570,"Pillar calls from CLI and pillar calls from custom module do not produce the same results

I am writing a custom module to support some functionality I am building into SaltStack and have noticed that the results I get from passing ""pillar.get"" on the command line do not match what is being returned by ""pillar.get"" in my custom module. It appears that the data being returned by the command line call is the current data, while the data returned by executing it from a custom module is cached data. The behavior is consistent across any pillar.\* command I issue and will produce the same results in the custom module whether I use ""__pillar__"" or ""__salt__['pillar.get']"". The only way to work around this currently is to issue a saltutil.refresh_pillar. After issuing this, there is a 15-20 second delay while the minion cache is refreshed on the Salt master, at which point the current data will become available to the minions. I am currently using SaltStack 2015.8.1-1 (minion and master) on CentOS 6.2. Using GitFS for pillar data, as well. Please let me know if you need anything else from me.",Would you say this issue is the same as #24050?,"@jfindlay, this does appear to be related to #24050."
saltstack/salt,https://github.com/saltstack/salt/issues/39269,saltstack_salt_issues_39269,"Remount forced with lizardfs fuse filesystem due to device missmatch

### Description of Issue/Question I'm in the process of upgrading to 2016.11.2 (master and minion in question are upgraded to these versions) from 2015.8 but I have an issue where my lizardfs fuse mounts are always remounted. 2015.8 did this historically, but I was hoping I'd be able to stop that with the newer salt version. When I run my mount.mounted state, I get: ### Setup My mount SLS looks like this: ","Can you provide the debug log from the minion when you run this state with `salt-call`? And also the output of /etc/mtab? Thanks, Daniel",I tried adding the double quotes as suggested and that doesn't seem to make any difference. Hopefully the output you wanted below. Thank you :) /etc/mtab: 
saltstack/salt,https://github.com/saltstack/salt/issues/28607,saltstack_salt_issues_28607,"Network module execution time on Centos7

I find some problems in network module. When I try make some operations with basic network interfaces (on physical and virtual servers based on Centos7) - work fine, but when I try configure bond and br with vlan's work too slow or not work at all. This state change server ip from pxe vlan (an-tagged) to normal (tagged) Pillar ",What version of salt are you using?,I'm test it few time's with centos6 and centos7 with different versions of salt. Currently problem on: 
saltstack/salt,https://github.com/saltstack/salt/issues/34443,saltstack_salt_issues_34443,"Items orgering problem

Hi, when i try dynamically append file, sometime i get another ordering Pillars example ",Could you try upgrading your master and see if you still see the behavior?,I was upgrade both master and minion. Now all OK.
saltstack/salt,https://github.com/saltstack/salt/issues/28616,saltstack_salt_issues_28616,"pip.installed fails to detect failure

I mistakenly forgot to remove `bin_env` from my `pip.installed` arguments. The venv is no longer created, thus the pip binary cannot be found: ",What version of salt are you using?,@jfindlay 2015.5 and 2015.8.1 both have this issue
saltstack/salt,https://github.com/saltstack/salt/issues/32930,saltstack_salt_issues_32930,"Highstate error when using RAET with salt-call

I recently switched to using RAET because of continued issues I'm having with salt.. hoping that it would alleviate some of the pain I'm having. I am seeing highstates run _really_ slow and I see the following error. ",What other issues are you having?,We can start an email if you'd like.. I have a number of issues from random master hangs to log spamming to slowless. All in all salt feels very fragile and temperamental. Can honestly say I've never felt terribly confident in it's stability. I went to SaltConf hoping for some answers.. but didn't get many.
saltstack/salt,https://github.com/saltstack/salt/issues/33433,saltstack_salt_issues_33433,"Number of master processes

### Description of Issue/Question I'm seeing on some masters that I have a single master process running with a good number of subprocesses running under it.. which is to be expected. On other boxes I see multiple master processes running with a few subprocesses.. as well as the larger main master process. This seems to cause some issues with minions running commands against the master. If I restart the salt master service then the smaller master processes go away. So my question is how many top level master processes should I expect to see? I have attached a few htop screenshots of what I""m seeing in terms of the processes on a box with more than one master process. Thanks! ### Setup Master config  Master process with many subprocesses. ![screen shot 2016-05-23 at 08 50 50](https://cloud.githubusercontent.com/assets/243169/15474777/a7378eb2-20c3-11e6-8fe5-a8f97df2338d.png) Other Master processes on the same box with a few subprocesses. ![screen shot 2016-05-23 at 08 50 32](https://cloud.githubusercontent.com/assets/243169/15474784/abae38ce-20c3-11e6-976c-cb7d2178f895.png)",Do you have `htop` showing you threads? Hit the `H` key and see if it looks more reasonable.,Sadly no.. it doesn't look any better.. here is a screenshot. It still shows the main parent process and a few other single master processes. ![screen shot 2016-05-23 at 22 38 47](https://cloud.githubusercontent.com/assets/243169/15492322/491a5444-2137-11e6-9e30-8800fcc8a5cc.png)
saltstack/salt,https://github.com/saltstack/salt/issues/29281,saltstack_salt_issues_29281,"[Salt-Syndic] Negative timeout in syndic main loop

Version:  If anyone can offer some assistance as the ""Negative timeout in syndic main loop"" seems to be a black hole.. can find any real information to resolve the error",Did you find a way to fix this?,"@strocknar ya fiddled around some more and it started working.. didnt spend the time to see what item fixed it but i started with http://irclog.perlgeek.de/salt/2014-12-24/text and found this irc thread talking about the negative timeout issue. next i look for the loop text. In my scenario it was uncommented so i commented out. Restarted the syndic; still had issue, restarted the master and life became good."
saltstack/salt,https://github.com/saltstack/salt/issues/43872,saltstack_salt_issues_43872,"Salt Master Performance 

### Description of Issue/Question Recently we have noticed that the salt-master has becoming very slow to the point that it can take 10 to 15 minutes for small jobs to (complete couple lines in a state file and about 20-30 minions) . After reviewing the box and the troubleshooting documentation we could find any errors. We have spun up a fresh build of the master and time for one state to be executed is taking 1 minute to come back. If i did more the one box at a time will time will escalate up to 10 to 15 minutes. **_The only error i can find is when running the debug the master continuously claims that a return code is missing from client_** This happens when attempting against any box in the fleet IE CentOS6 or CentOS7 Please note the node id does say docker but that is name of the host the state is not trying to be committed to a docker container. Any help would be grateful as salt and effectively slowed down to a crawl and not reliable any more ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ",What about on the minion side? What do the debug logs show there? Can you verify outside of salt that there wasn't any network slowdown possibly in your environment?,Regarding the the CPU/MEM running salt now pings the processors and memory will go from ~600 megs to around 1.74GB when running this statement.. See the picture included (This is while running the state listed above) ![selection_003](https://user-images.githubusercontent.com/5123879/31176677-ae5fa9fc-a8e1-11e7-82a9-b1d265f0f1ed.jpg) Additional Information: This server is only running the salt master it is not being used for anything else.
saltstack/salt,https://github.com/saltstack/salt/issues/28692,saltstack_salt_issues_28692,"puppet.run fails with arguments

The default for puppet.run is to set the puppet.subcmd = agent. This means that if you run puppet.run with no other arguments the minion will correctly run puppet agent --test. However, I've noticed that if you provide any arguments, or as I found it, if you run noop with no arguments then puppet will run without --test being set. This results in an empty puppet run with no output (puppet agent, or puppet agent --noop). The bug is in the puppet.py file in modules. Here is the code. ",Will you open a pull request for this against the 2015.8 branch?,Thanks I've submitted a pull request.
saltstack/salt,https://github.com/saltstack/salt/issues/31197,saltstack_salt_issues_31197,"Nodegroups does not play nice with batching

Hey guys, when issuing a command like: `salt -b 3 -N 'nodegroup1' test.ping`, my expectation is that the master will parse the nodegroup list and begin execution of test.ping on 3 minions at a time until the nodegroup list is exhausted. This does not appear to be the case. I noticed this issue when trying to issue such a command against minion VMs running on a single KVM virtual host. There are greater than a hundred salted VMs and the load is already pretty high on the server. Execution of the command resulted in a load spike and returned inconsistent results.",What version of salt are you using?,"Hi @jfindlay, was using 2015.5.5 on the master originally but then upgraded to 2015.8.5. I think is actually my fault for not accounting for how much cpu time is required for test.ping to run on a minion. With this particular virtual host I was just overloading it and causing inconsistencies as it would take too long for minions to return."
saltstack/salt,https://github.com/saltstack/salt/issues/29001,saltstack_salt_issues_29001,"debconf.set doesn't support ""prereq"" in states

 I'm using salt 2015.8.1 (Beryllium)",Can you also post the output of the debug logs of the master and minion when this happens?,"I'm not sure how to get relevant debug output (""salt-{minion,master} -l debug"" gives too much) but this issue looks same as this one https://github.com/saltstack/salt/issues/16709 and same patch fixes issue for me (no warnings output, order looks right): "
saltstack/salt,https://github.com/saltstack/salt/issues/28766,saltstack_salt_issues_28766,"salt-cloud ec2 image creates two keys and minion can't connect

We've just started out with Salt and have hit a brick wall almost immediately trying to provision an Ubuntu image on ec2. The instance is created, but the minion is unable to connect due to a key issue. There are two keys created in salt-keys: the minion id supplied to salt-cloud and the ec2 hostname provided by AWS. My cloud profile: ",Did `salt-cloud -u` fix the issues you were having?,Yes it did.
saltstack/salt,https://github.com/saltstack/salt/issues/32016,saltstack_salt_issues_32016,"file creation inside a clean directory is not possible

### Description of Issue/Question When defining a directory with `clean: True`, and also creating a file inside this directory, then salt cleans the directory and creates the file in every state.highstate run (sometimes even with wrong order, thus creating the file and then removing it). The expected behaviour would be to remove all of the unmanaged files, and keep the managed ones (the ones created via salt). ### Setup _Please provide relevant configs and/or SLS files (Be sure to remove sensitive info)._ ",What do you think?,"It could be an acceptable workaround to achieve the end result that I would like to see, but I still believe the initial issue remains"
saltstack/salt,https://github.com/saltstack/salt/issues/28907,saltstack_salt_issues_28907,"""state.apply"" is not available

Hi! I'm fairly new to salt-stack and programming, so this may be something simple that I'm missing, but all the googling I did for the past couple of hours produced no results. I've set up both minion and master on AWS (using boto and fabric libraries in Python), and have installed the most recent version of SaltStack on both (salt-minion on minion, salt-master on master). I've managed to pass and accept the key, and I can ping the minion from master. However when I try to do a state.apply I receive a '""state.apply"" is not available' error. The ""salt <minion_id> grains.items | grep os"" command returns the following:  And some more information, just in case. My master is in a different security group from my minion (but test.ping works), and I ran a sudo apt-get update && sudo apt-get upgrade on the minion before installing and running salt-minion. Let me know if you need more information. [Edit] As a test I created a minion in the same security group as the master, but the I still could not apply states.",What version of salt? state.apply is a fairly recent addition (I think 2015.8).,"On master, both salt and salt-master return version 0.17.5 On minion, salt-minion returns version 0.17.5 as well. Oh, I'm working with an old version. Well now I just feel silly. Thank you! [Edit] For posterity's sake, in case someone stumbles into this with a similar issue. I called `sudo apt-get install salt-master` and `sudo apt-get install salt-minion` right after I initialized the instances. This installed version 0.17.5 on the machine. A better way to do this at the moment appears to be installing from the SaltStack repository, the process for which is described over here (for Ubuntu): https://docs.saltstack.com/en/latest/topics/installation/ubuntu.html"
saltstack/salt,https://github.com/saltstack/salt/issues/31907,saltstack_salt_issues_31907,"pillars not updated on minions until salt-minion is restarted

### Description of Issue/Question When using git_pilalr, if I make a change to the pillar data on the repo and run: `salt '*' saltutil.refresh_pillar` The pillar data is not updated. only if the minion is restarted that new pillars show up when I run `salt '*' pillar.item pillar_name` the git_pillar config file in /etc/salt/master.d/pillar_config.conf: ",What happens when you do `salt '*' pillar.get pillar_name`?,`salt '*' pillar.get pillar_name` return the old pillar value.
saltstack/salt,https://github.com/saltstack/salt/issues/33643,saltstack_salt_issues_33643,"Question Not and Issue: When does the Salt master execute highstate?

### Description of Issue/Question I have two Salt masters in redundant mode both setup with gitfs to the same repo. I am trying to figure out how to ensure both push the same configurations once a change is made to the repo. Question: Does the Salt master by default (without user-defined scheduler) execute state.highstate command? if so how often? The master config has the `loop_interval: 60`. But according to the descriptino that only updates the fileserver backend, cleans the jobs cache, and executes the scheduler. So does that mean if I do not have a defined highstate scheduler on the master it will not run highstate? If a scheduler is needed should I configure it on one master? or both? won't scheduling on both master be redundant or cause conflicts? ### Versions Report Salt Version: Salt: 2015.8.8.2 Dependency Versions: Jinja2: 2.7.2 M2Crypto: 0.21.1 Mako: Not Installed PyYAML: 3.11 PyZMQ: 14.7.0 Python: 2.7.5 (default, Oct 11 2015, 17:47:16) RAET: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 cffi: 0.8.6 cherrypy: 3.2.2 dateutil: 1.5 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed libgit2: 0.21.0 libnacl: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.7 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pygit2: 0.21.4 python-gnupg: Not Installed smmap: 0.8.1 timelib: Not Installed System Versions: dist: redhat 7.2 Maipo machine: x86_64 release: 3.10.0-327.13.1.el7.x86_64 system: Red Hat Enterprise Linux Server 7.2 Maipo",Does that help answer all your questions?,Thanks @Ch3LL
saltstack/salt,https://github.com/saltstack/salt/issues/34892,saltstack_salt_issues_34892,"Questions: Is it possible to target minions in top file with negative matching on grains?

### Description of Issue/Question Can I target minions in the top file by applying states if they Do Not have a specific grain? for example, I have a grain called `roles` and I want to apply specific changes to hosts who have that role and anything else to the rest of the hosts. ",Does this work in your instance?,@Lomexian works perfectly. just needed to add `match: compound` there. Thanks.
saltstack/salt,https://github.com/saltstack/salt/issues/35205,saltstack_salt_issues_35205,"salt-run compact outputter (--out=compact) broken

### Description of Issue/Question The compact outputter option (--out=compact) seems to be broken. Error message: ",Can you take a look at those suggestions and make sure I've covered all of the use cases that the compact outputter was supposed to cover?,Hi @rallytime . Thanks for the quick response. good to know that its not just me facing this issue. I'll add my questions to the original post.
saltstack/salt,https://github.com/saltstack/salt/issues/28976,saltstack_salt_issues_28976,"RabbitmqUser change_password escaping problem

The recipe as written (as of 2015.8.1) doesn't set the password correctly if it contains a dollar-sign ""$"" On the command line: `rabbitmqctl change_password guest te\$t` # works However, if we send 'te\$t' to RabbitmqUser.present(), the backslash gets escaped twice i.e. 'te\\$t' gets sent to change_password i.e. On the command line: `rabbitmqctl change_password guest te\\\\$t` # is not the right password If we send 'te$t' then rabbitmq doesn't have the correct password i.e. we can't log in. i.e. On the command line: `rabbitmqctl change_password guest te$t` # doesn't set the right password",Can you explain what you mean by the recipe?,"I don't know what else to call it. Directive? cmd.run or rabbitmq_user.present ... these are ""recipes"" ... a collection of recipes are a state i.e. a collection of ""recipes"" contained in a single SLS file. Recipes are the things that consumers-of-salt write."
saltstack/salt,https://github.com/saltstack/salt/issues/30672,saltstack_salt_issues_30672,"Pecl.installed reports sucess even when there is a failure.

 Clearly there is an error in the installation, and pecl_http is not in the output of `pecl list` after-the-fact.",What version of salt are you using?,"Was 2015.8.1, now 2015.8.3. Same issue."
saltstack/salt,https://github.com/saltstack/salt/issues/30976,saltstack_salt_issues_30976,"s3.location defaults to empty string, not `us-east-1`

The documentation [as seen in salt/modules/s3.py](https://github.com/saltstack/salt/blob/ef02779391e1ee39890ce92a0eb41babdaa699c4/salt/modules/s3.py#L47) states that `s3.location` defaults to `us-east-1`. My experience is that this is not presently the case and I have to specify this value in order for `s3.get` to work. Further corroborating this claim is [the unit test I've added](https://github.com/timcharper/salt/blob/2015.8/tests/unit/modules/s3_test.py#L39) for `salt/modules/s3.py`, `_get_key` method. Is that default supposed to be injected somewhere else? Or is it expected that `_get_key` provides the default?",What do you think @techhat?,"Great, thanks for confirming @rallytime . My test @jfindlay was already pushed and merged :) It's [here](https://github.com/saltstack/salt/blob/2015.8/tests/unit/modules/s3_test.py#L29), is asserting the broken behavior, and is passing."
saltstack/salt,https://github.com/saltstack/salt/issues/30123,saltstack_salt_issues_30123,"grains['oscodename'] incorrect for Debian testing.

`grains['oscodename']` seems to be parsed incorrectly from `/etc/os-release` on Debian testing, due to the slash in the codename. For Debian-based distros (or just Debian), the codename should probably be pulled from `/etc/debian_version` since it's much easier to parse without error. ","Did you want to work up a PR for this one, @optix2000 ?","Yeah, I'll work up a PR for this. Wanted to see if anyone had any concerns before I started touching it."
saltstack/salt,https://github.com/saltstack/salt/issues/30692,saltstack_salt_issues_30692,"acl.present doesn't show changes when it changes ACLs

Compare the following excerpt where `A` has acl's preset and `B` does not:  When the state is run, both show up as green as if no changes had been done, where instead B should have had changes.",What version of salt are you using?,"@jfindlay, Oops forgot the version info. Here it is: "
saltstack/salt,https://github.com/saltstack/salt/issues/29099,saltstack_salt_issues_29099,"Changing password via user.present state on ends up in modules/pw_user.py chgroups()

The following state ends up invoking modules/pw_user.py chgroups(): ",What version of salt is running on the minion?,salt 2015.8.0 (Beryllium)
saltstack/salt,https://github.com/saltstack/salt/issues/35769,saltstack_salt_issues_35769,"In reactor grains.id has an unusual value

### Description of Issue/Question Not sure if this is a bug in the code or expected behavior that is not documented anywhere. In a reactor `salt[""grains.get""](""id"")` does not return the correct value, rather it returns the correct value with ""_master"" appended to it. ### Versions Report ",Does that help to clarify the issue at hand?,Unfortunately it's not documented in the 2015.8.11 version of the docs. Now that I know grains are not supposed to be available (even though they are) I'll move my code to a runner.
saltstack/salt,https://github.com/saltstack/salt/issues/36187,saltstack_salt_issues_36187,"event.send with_grains parameter sends ""None"" instead of None if grain undefined

### Description of Issue/Question I have a custom reactor in which I am creating a custom event and including grain values ",Can you paste your custom grain from that file? ust looking for that alert_channel grain please?,"@Ch3LL An example is `alert_channel: ""#ops-alerts""`, on some instances there is no grain with that name at all which is when the value returned is ""None""."
saltstack/salt,https://github.com/saltstack/salt/issues/37746,saltstack_salt_issues_37746,"salt-ssh doesn't detect changes to the local code

### Description of Issue/Question The salt-ssh command doesn't detect changes to the local code. If I change /usr/lib/python2.7/*-packages/salt/*/*.py files and run salt-ssh again, I get old code. The old code is cached in /var/tmp/.(username)_(hash)_salt. I do have ssh_wipe: True, so it isn't a remote copy. I am making local changes by adding patches to my salt packages to fix certain issues. The workaround is to run ""rm -rf /var/tmp/.*_salt"". ### Versions Report 2016.3.4","Can you test that? Thanks, Daniel","I had added --refresh-cache to my script before, but didn't help. The --regen-thin isn't in 2016.3.4, but is in 2016.11.0. Which is why I had never heard or seen it."
saltstack/salt,https://github.com/saltstack/salt/issues/45962,saltstack_salt_issues_45962,"rabbitmq_user.present seems to error from a dependecy on python-sss

### Description of Issue/Question I added the rabbitmq_user.present below and got the error below till I installed the python-sss package. It seems like an odd dependency to require pysss for this use case. ### Error ---------- ID: sensu_rabbitmq_user Function: rabbitmq_user.present Name: sensu Result: False Comment: Error: RabbitMQ command failed: [TRACE ] Trying pysss.getgrouplist for 'rabbitmq' [TRACE ] Trying generic group list for 'rabbitmq' [TRACE ] Group list for user 'rabbitmq': '['rabbitmq']' Started: 22:33:10.276671 Duration: 184.277 ms Changes: ### Setup sensu_rabbitmq_user: rabbitmq_user.present: - name: sensu - password: {{ pillar['sensu']['rabbit_pass'] }} - perms: - '/sensu': - '.*' - '.*' - '.*' - runas: rabbitmq - require: - service: rabbitmq-server ### Versions Report Salt Version: Salt: 2017.7.3 Dependency Versions: cffi: 1.9.1 cherrypy: Not Installed dateutil: 2.6.0 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.3.0 mysql-python: 1.2.3 pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Jul 18 2016, 15:02:52) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 System Versions: dist: Ubuntu 14.04 trusty locale: UTF-8 machine: x86_64 release: 3.13.0-79-generic system: Linux version: Ubuntu 14.04 trusty","Can you provide the trace? Thanks, Daniel",This is all I get from salt. salt-call -l trace state.apply sensu.server : 
saltstack/salt,https://github.com/saltstack/salt/issues/29201,saltstack_salt_issues_29201,"module win_dns_client with international windows

Microsoft thinks it is a good idea to translate network interface name... so in french ""local area network"" is ""connexion au réseau local"" when I try to add or remove dns (add_dns or rm_dns method) it doesn't work, it seems that ""é"" is not sent to netsh with good encode. I try to send with utf8 and 8859-15 trace show this for utf8 : `get_event() received = {'tag': 'salt/job/20151125182020187707/ret/MINIONNAME', 'data': {'fun_args': ['8.8.8.8', 'Connexion au r\xc3\xa9seau local', 2], 'jid': '20151125182020187707', 'return': False, 'retcode': 0, 'success': True, 'cmd': '_return', '_stamp': '2015-11-25T17:20:23.035583', 'fun': 'win_dns_client.add_dns', 'id': 'MINIONNAME'}}` if I rename interface without ""é"", it work's.",What version of salt are you using?,"sorry, I forget these information... salt master 2015.8.1 on debian jessie salt minion 2015.8.1 on windows 7 it's seems that windows use utf16LE, I try to convert interface name with iconv but it's not working get_event() received = {'tag': 'salt/job/20151126075322268337/ret/MINIONAME', 'data': {'fun_args': ['8.8.8.8', 'Connexion au r\xe9seau local', 2], 'jid': '20151126075322268337', 'return': False, 'retcode': 0, 'success': True, 'cmd': '_return', '_stamp': '2015-11-26T06:53:24.975249', 'fun': 'win_dns_client.add_dns', 'id': 'MINIONNAME'}} I have the same type of issue with status.uptime, salt use ""net stats srv"" and find ""Statistics since"", ""net stats srv"" is localized, so the line is ""Statistiques depuis"""
saltstack/salt,https://github.com/saltstack/salt/issues/32122,saltstack_salt_issues_32122,"exception fopen on directory that doesn't exist

I'm seeing a recurring error in my logs indicating there was an error when trying to fopen a file that doesn't exist but the error is saying it's a directory. The file that it's trying to open contains a minion name that no longer exists and was removed with the salt-key -d command. ### Log ","Do you still have the file in question on the system, `/etc/salt/pki/master/minions_pre/nonexistant-minion-name` and is it a directory?","No, the file is not within the minions_pre directory."
saltstack/salt,https://github.com/saltstack/salt/issues/47635,saltstack_salt_issues_47635,"Grain SSDs does not seem to be reliable on Windows

### Description of Issue/Question In some testing I'm doing, it does not seem that the SSDs grain is reliable for testing for the existence of SSDs. For example, I have a Windows machine with a Samsung Evo 840 SSD which has it's grains.get 'SSDs' returning blank. On the one machine that I do have that returns correctly, the model of the drive in WMI is ""NVMe SAMSUNG MZVLW512"" ### Steps to Reproduce Issue salt minion grains.get 'SSDs' ### Versions Report ",Can you speak to the windows os support here?,It can be closed but I really wanted to have Win7 support on this ;)
saltstack/salt,https://github.com/saltstack/salt/issues/42292,saltstack_salt_issues_42292,"file.find unicode errors in 2016.11.6

### Description of Issue/Question file.find fails if the search path have directories with unicode characters: `UnicodeDecodeError: 'ascii' codec can't decode byte` ### Setup Very similar to #40578 - creating a new issue per @terminalmage request. CentOS6/7. Note that this was not an issue on 2016.11.1 and I found it in 2016.11.5 and 2016.11.6 - other versions could also be affected. Searching for regex pattern in a directory on a mounted fs. As mount is not directly controlled, it may have ascii characters in some paths. ### Steps to Reproduce Issue Original comment https://github.com/saltstack/salt/issues/40578#issuecomment-312297344 Call: `{% set copy_path = salt.file.find(...)|sort|last %}` with parameters fails. Log from CentOS6: ",Can you see anything wrong with my test case? or any other information you can supply to help replicate?,"@Ch3LL I'd need to set up environment to test it as I worked around it by removing unicode chars from path names to give you more details. From what I have on me now: one of the characters in question that turned out to be difficult to track was `ef80a8` or `0xF028`. From what I understand while not being a 'character' per se the code is still valid and should processed. Note also that unicode was in a directory name, not a file, and was a level deeper from the root of the search - might not be relevant, but worth mentioning."
saltstack/salt,https://github.com/saltstack/salt/issues/29327,saltstack_salt_issues_29327,"Can't provision EBS volumes over 1000GB in AWS

Hi, I am trying to provision 5TB EBS volumes in AWS. Anything over 1TB (1000GB) fails with the following error : `Client.InvalidParameterCombination: Could not create volume with size 5000GiB from snapshot 'null'` Here is the block_device_mapping :  I've been looking for issues related to this but I guess this is not a frequent use case. EBS can be provisioned up to 16TB according to AWS documentation. Starting an instance with more than 1TB through the AWS interface works correctly. Thanks for your help, Charles.",What version of salt are you using? Are you using the `boto_lc` state or the `ec2` cloud?,"@jfindlay Thanks for the reply, the version is `Salt Version: Salt: 2015.8.1` We are using the ec2 cloud, not boto_lc."
saltstack/salt,https://github.com/saltstack/salt/issues/29328,saltstack_salt_issues_29328,"boto_route53.present state is unavailable 

Hi, I have an issue in one of my states This is my state  boto is also installed",What is the minion debug log output of `salt <minion> boto_route53.zone_exists <zone>`?,"Thanks for reply! boto on master is The debug output is salt 'api*' boto_route53.zone_exists vpc.example.com. -l debug [DEBUG ] Reading configuration from /etc/salt/master [DEBUG ] Using cached minion ID from /etc/salt/minion_id: salt01.example.com [DEBUG ] Missing configuration file: /root/.saltrc [DEBUG ] Configuration file path: /etc/salt/master [DEBUG ] Reading configuration from /etc/salt/master [DEBUG ] Using cached minion ID from /etc/salt/minion_id: salt01.example.com [DEBUG ] Missing configuration file: /root/.saltrc [DEBUG ] MasterEvent PUB socket URI: ipc:///var/run/salt/master/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: ipc:///var/run/salt/master/master_event_pull.ipc [DEBUG ] Sending event - data = {'_stamp': '2015-12-03T18:45:35.090852'} [DEBUG ] LazyLoaded local_cache.get_load [DEBUG ] get_iter_returns for jid 20151203184535096340 sent to set(['api.example.com']) will timeout at 18:45:40.099305 [DEBUG ] jid 20151203184535096340 return from api.vpc.example.com [DEBUG ] LazyLoaded nested.output api.example.com: ""boto_route53.zone_exists"" is not available. [DEBUG ] jid 20151203184535096340 found all minions set(['api.example.com'])"
saltstack/salt,https://github.com/saltstack/salt/issues/31350,saltstack_salt_issues_31350,"Failed to spawn the VT: StringIO instance has no attribute 'fileno'

We have a heavily used for AWS autoscaling salt-master and after some time salt starts to throw in log exceptions like this: ","How are you initiating the salt-cloud action, with the cloud runner on the master, or the cloud execution or state module on a minion, or a cmd.run?",using reactor on master via api. we are using reactor from here: https://github.com/saltstack-formulas/ec2-autoscale-reactor
saltstack/salt,https://github.com/saltstack/salt/issues/40327,saltstack_salt_issues_40327,"Strange big delay between receiving API request and executing clouds.ec2

### Description of Issue/Question We have a quite aggressive EC2 autoscaling and use Salt to bootstrap instances. Also we use a slightly modified reactor from here https://github.com/saltstack-formulas/ec2-autoscale-reactor. The problem is that sometimes we have a very big delay between receiving API request by reactor and Salt starts to bootstrap instance. ","Can you provide us with the debug log of this in action? Thanks, Daniel",It could be related to #34776 I'll enable debug log and check
saltstack/salt,https://github.com/saltstack/salt/issues/43929,saltstack_salt_issues_43929,"salt-run manage.down removekeys=True returns ""CRITICAL] kwargs must be passed inside the low data...""

### Description of Issue/Question salt-run manage.down removekeys=True returns: `[CRITICAL] kwargs must be passed inside the low data within the 'kwarg' key. See usage of salt.utils.args.parse_input() and salt.minion.load_args_and_kwargs() elsewhere in the codebase.` Full output: ","Would you be able to test the 2017.7.2 branch? http://github.com/saltstack/salt/tree/2017.7.2 Thanks, Daniel","Sorry, we install salt from deb packages and I don't want to break it. But I could apply patch manually if you provide a link to it."
saltstack/salt,https://github.com/saltstack/salt/issues/32385,saltstack_salt_issues_32385,"git.latest throws expected string or buffer

### Description of Issue/Question The state git.latest sometimes fails. There is no consistent behavior as far as I noticed, that it impacts only certain ec2 instances. Executing the state on the same instance, first time it fails, the second, (sometimes from the third attempt) it succeeds. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) I am trying to execute the sls id  The salt-minion version `salt-minion 2015.8.8 (Beryllium)`",Do you have any ideas as to why git would be complaining about a non-fast-forward on the `APP-861-MyStatistics2` branch?,"@jfindlay `APP-861-MyStatistics` is a development branch, not yet merged with master, but merging with master at this moment would cause conflicts. I also noticed that the local reference for this branch is different from the reference on the remote origin Show the ref of this branch locally  But all this shouldn't cause git.latest to fail at random times. If this would be a problem then it would fail every time."
saltstack/salt,https://github.com/saltstack/salt/issues/29488,saltstack_salt_issues_29488,"salt.cloud.clouds.vmware.revert_to_snapshot crash when using the default value

When using a command like: `salt-cloud -a revert_to_snapshot foo -y` The following crash occur with salt 2015.8.1:  Looking at the code in master (https://github.com/saltstack/salt/blob/develop/salt/cloud/clouds/vmware.py#L3172) the problem is still present. The argument kwargs should be check to make sure it's a dict. I'm guessing a check like https://github.com/saltstack/salt/blob/develop/salt/cloud/clouds/vmware.py#L3101 should be done. I could provide a patch however this may take longer then needed. Still what would be the best step forward? Is there a test I should add to show the unexpected behavior or a strait fix?","Do you have any ideas, @jtand?","Awesome, thanks for doing the work!"
saltstack/salt,https://github.com/saltstack/salt/issues/29407,saltstack_salt_issues_29407,"bson.errors.InvalidDocument: key must not contain '.'

hi i am seeing bson.errors.InvalidDocument: key must not contain '.' errors when running salt-run jobs.active . i am using mongodb for storing jobs and returners. Any help on how to solve this other than changing my minions name ? ","Do you have any ideas here, @rhealitycheck, @Lothiraldan?","pymongo version is 3.1.1. Just a note: Job and returners logs is successfully being added to the Mongodb for the job i initiated but the above error only pops up if i have a active job and run ""salt-run jobs.active"""
saltstack/salt,https://github.com/saltstack/salt/issues/45679,saltstack_salt_issues_45679,"docker port_bindings brocken with udp

This is a follow up to #29662 as this is closed. The Problem still exists in latest Saltstack release. If you try to use udp ports with the `port_bindings` Parameter it doesn't work and must be workarounded with an additional `ports` Parameter. ",Can you test to confirm it works?,Works for me:  Thanks!
saltstack/salt,https://github.com/saltstack/salt/issues/29564,saltstack_salt_issues_29564,"Duplicate minion execution

Version of salt on master & minion : salt-master 2015.8.3 (Beryllium)  I already tried to restart master, minion, and reset the minion (stop, delete /etc/salt/pki/minion/\* then start salt-minion and add the key again into the salt master) It's quite strange !",What happens when you start the minion process manually? `salt-minion -l debug`?,I have the same behavior : minion output : http://pastebin.com/LKjhnDx1 I launched on the salt-master : 
saltstack/salt,https://github.com/saltstack/salt/issues/29570,saltstack_salt_issues_29570,"error when using sources in pkg.install

`salt 'hostname' pkg.install sources='[{""git"": ""salt://git/files/git-2.4.6-1.el6.x86_64.rpm""}, {""perl-Git"": ""salt://git/files/perl-Git-2.4.6-1.el6.x86_64.rpm""}]'` will output if use state, the output is similar",What version of salt are you using?,"@jfindlay CentOS 6.7, saltstack 2015.5.5"
saltstack/salt,https://github.com/saltstack/salt/issues/29580,saltstack_salt_issues_29580,"Serve repo.saltstack.com content over IPv6 as well

ping @jfindlay Currently the content hosted on `repo.saltstack.com` is only reachable via IPv4. I have an environment in which IPv6-only hosts also exist, currently those hosts cannot retrieve the .deb packages from `repo.saltstack.com`. I see `repo.saltstack.com` is hosted on DigitalOcean, as far as I know they support IPv6 on their droplets, so hopefully this change is straight forward. Don't forget to set up monitoring for the IPv6 endpoint as well when you add it :-)",Could you test that out for me? Thanks!,"@UtahDave I see there is an AAAA record for `repo.saltstack.com`, but I cannot resolve that AAAA record (or any other record) for anything under the `saltstack.com` domain, because the authoritive nameservers for `saltstack.com` (namely `dns1.stabletransit.com.` and `dns2.stabletransit.com.`) do not have IPv6 connectivity or published AAAA records. The IPv6-only environment runs its resolvers also IPv6-only, so the authoritve nameservers `saltstack.com` need to be made dual-stack as well for optimal IPv6-only experience. Would that be possible?"
saltstack/salt,https://github.com/saltstack/salt/issues/29590,saltstack_salt_issues_29590,"I have setup salt syndic structure, sometime i am getting test.ping result 2 time.

I am using latest salt version 2015.8.3 and i have setup syndic architecture. when i am pinging simple command salt 'minion' test.ping sometimg it gives me below output. ","Do you have multiple syndic servers deployed? Are minions connected to multiple syndics? Is the ""test.ping"" command initiated from the master?","Yes multiple syndic, And I am running from master of master On 10 Dec 2015 19:45, ""rdutch"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/29733,saltstack_salt_issues_29733,"salt -S <ipaddress> test.ping  command output getting list of minions which did not not return.

salt -S 192.168.12.21 test.ping command output getting list of minions which did not not return. ",What version of salt are you using?,"Latest 2015.8.3 On 17 Dec 2015 22:48, ""Justin Findlay"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/29598,saltstack_salt_issues_29598,"Duplicated MTU entry added

Using the mtu option of the network.managed state generates a duplicated ""MTU=9000"" entry in ifcfg-eno2:  Tested in CentOS 7.",What version of salt are you using?,I am using version 2015.8.3. I will test the fix.
saltstack/salt,https://github.com/saltstack/salt/issues/31676,saltstack_salt_issues_31676,"grains.get high cpu usage

### Description of Issue/Question Sometimes I find grains.get stuck at high CPU usage seemingly forever. Below find stack traces. ### Setup Set up a salt master a few minions. On the master set up a cron job like this: ",Do you have batch mode configured in your config? You shouldn't be hitting `salt.cli.batch` unless you do.,I am not using `-b`. Is there another way to turn batch mode on?
saltstack/salt,https://github.com/saltstack/salt/issues/30013,saltstack_salt_issues_30013,"cannot configure  -m recent --name  with iptables.insert

a state definition such as ","Why `rname`? There's also a similar unhandled collision for the `--save` argument to the connsecmark module, which also needs an alias.","'rname' because I was looking at -m recent. Problem here is that depending on the module name has different meaning: list, counter, etc. Maybe some kind of escape character can be introduced for such cases? Something like _state, _name, _save?"
saltstack/salt,https://github.com/saltstack/salt/issues/43936,saltstack_salt_issues_43936,"manage.present still reports `lost` minion

### Description of Issue/Question `manage.present`, `manage.alived`, etc. (the docs are unhelpful on the distinctions, #22386) continue to report the presence of a minion that is `lost`. I believe this is a distinct issue from #33466, where from the best I can there was never a `salt/presence/change` event for the `lost` minion? In any case, that issue appears to be marked as fixed in 2017.7 with `zmq` transport, which is what I'm using. ### Setup A very vanilla `master` configuration with `presence_events: True` and `log_level: debug`. Four minions (`manager[12]`, `worker[12]`) with pre-seeded keys. All brought up with vagrant. ### Steps to Reproduce Issue Start the hosts. Once everything is up, remove a minion instance with prejudice. (I used `vagrant halt worker2`.) Looking at the `salt/presence` events on the master: ",Could you possibly be running into: https://github.com/saltstack/salt/issues/38367 ?,"I'm using the default transport, so I guess that's `zeromq` (not `zmq` as I said in the summary). It does sound like I'm running into #38367, though I never would have found that myself... thanks! If I'm reading that one right, the fact that `include_localhost=True` is in the argument list in the manager runner still (see https://github.com/saltstack/salt/blob/v2017.7.1/salt/runners/manage.py#L250) suggests that it is almost certainly the same issue."
saltstack/salt,https://github.com/saltstack/salt/issues/56645,saltstack_salt_issues_56645,"[BUG] gpg.encrypt text=foo output=/some/file does not write to a file

**Description** A clear and concise description of what the bug is. **Setup** Create/import a GPG key. **Steps to Reproduce the behavior** Try to encrypt some text:  </details>",Can I try and solve this issue ?,@ritwikbadola Definitely! Here's a link to information on contributing: https://docs.saltstack.com/en/latest/topics/development/contributing.html
saltstack/salt,https://github.com/saltstack/salt/issues/29784,saltstack_salt_issues_29784,"Masterless mode: `event.send` blocks `state.apply`

Take the following state declaration and save it as event.sls:  This is probably not the desired behaviour.",What do you see as the correct behavior here?,"Thanks! Sorry for not replying; If I understand correctly, event.send blocked because it was waiting for the master's reply, which was not present?"
saltstack/salt,https://github.com/saltstack/salt/issues/29796,saltstack_salt_issues_29796,"Fail to use 'highstate' outputter explicitly 

Hi, I've configured the master to use custom output module and it works great. When I tired to get back to 'highstate' outputter once for a while, it failed miserably: ",Do you have any more information on what may cause the failure condition to happen to help narrow in on the cause of the issue?,"Yep, I did a deeper dive into it. Basic module test works: "
saltstack/salt,https://github.com/saltstack/salt/issues/30707,saltstack_salt_issues_30707,"pkg.get_locked_pkgs is not available

Hi, When using the pkg module to lock packages, I am not able to list the packages that are currently locked. Both pkg.hold and pkg.unhold are working as expected. ",What system are you running?,@jfindlay I am running Oracle Linux which uses yum as the package handler
saltstack/salt,https://github.com/saltstack/salt/issues/34846,saltstack_salt_issues_34846,"salt-cloud vmware documentation: examples for kickstarting

Hi, I am attempting to use salt-cloud to create a new vm on an ESXi host. I would like to do this using a kickstart url, however I cannot find any documentation stating where to put this url. I am getting a response from salt-cloud --query, so I know that I am able to connect to the host. The host is not part of a cluster so I cannot test the clonefrom operation. My vmware profile currently looks like this ",Do I have that right @nmadhok?,Thanks for making that clearer!
saltstack/salt,https://github.com/saltstack/salt/issues/35649,saltstack_salt_issues_35649,"salt-cloud key creation using incorrect minion id

### Description of Issue/Question When creating a vm using salt-cloud (vmware module), the salt key is created as the vm name, not the fqdn, but the minion tries to connect using its fqdn. This means that the master is unable to connect to the minion until the new key is accepted, or the name of the accepted key is altered and the minion restarted. ### Setup vmware.conf (profile) ",Do you happen to possibly have salt already installed on the VM? Or something else that would prevent this from working?,"@Ch3LL The template I am using doesn't have salt installed, until it is deployed by salt-cloud. The key is created on the master just before the vm clone starts, (i.e, just before this line on the salt-master `[INFO ] Creating test3 from template(templ)` ) which is also before the deploy script (which installs salt) is run."
saltstack/salt,https://github.com/saltstack/salt/issues/29882,saltstack_salt_issues_29882,"FreeBSD osrelease should not use kernelversion

The osrelease (and therefore related grains) on FreeBSD currently assume that the userland version equals the kernel's version: https://github.com/saltstack/salt/blob/f105f3927540e9c930033904b56e7dcd9d83de66/salt/grains/core.py#L1355  This is not always a safe assumption. Obviously, this is incorrect mid-upgrade, but it is also possible to run a full userland of a different version inside of a jail. As of 10.0, FreeBSD provides the `freebsd-version` tool. `freebsd-version -u` will report the userland version, like `10.2-RELEASE-p3`. There is also a -k option to freebsd-version to ask about the kernel, but I don't think this is wise to use, because it's possible to install one of these full-userland jails without a kernel. The command with -k will fail in this situation. `uname` will report the correct kernel version from the host as usual.",Do we need to preserve support for <10?,"@cachedout - Sorry for the delayed reply. I'd be happy to work on a fix, but it'll probably be a couple weeks before I have a chance."
saltstack/salt,https://github.com/saltstack/salt/issues/29992,saltstack_salt_issues_29992,"Salt 2015.5.3 - VALUE_TRIMMED

Somehow output of command are getting trimmed before the upgrade to 2015.5.2/2015.5.3 I was able to display large output, like tar -ztvf data.tgz but now this no longer works I end up changing the the master and minions value to max_event_size to 5242880 however Im getting timeout and sometime : segmentation fault (core dumped) deeper check: the system ran out of memory (thsi as a vm with 1GB of memory), upgrading the vm with 2G and the problem goes way So maybe the module should send/log a better error when this happen?",Could you elaborate a little more on your use case? I'm trying to understand what you're doing here. There might be a better way to accomplish what you need.,"Hi Mike, That was my first thought, and so I added more memory, and the problem was solved. Use: case a t2-micro instance in AWS to test simple salt stuff with 3 minions. In the past this was never a problem... The 'thing' is that the error message was not very helpful, I *think' it would has been nice to see a out of memory error. Make sense? As always thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/30019,saltstack_salt_issues_30019,"Antergos not supported

[Antergos](https://antergos.com/) is a spin-off of Arch Linux. It's only #31 at time of writing on [distrowatch](http://distrowatch.com/), but I like it. Salt currently does not support it, but I _think_ this could be fixed by adding a mapping to `grains/core.py`",Do you want to take a swing at making these modifications? It should be pretty straightforward.,"I had a crack at this, but some of the jenkins builds are failing :( https://github.com/saltstack/salt/pull/30111 I must have messed up somewhere. On Mon, Dec 28, 2015 at 09:56:02AM -0800, Mike Place wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/33813,saltstack_salt_issues_33813,"DigitalOcean create_dns_record incorrectly parses domain_name if tld has more than one element.

### Description of Issue/Question The Digital Ocean cloud script can create dns records for VMs with a FQDN, but only if the domain name doesn't have a country-specific suffix. Eg, `minion.example.com` will be interpreted as `dns_hostname=""minion"", dns_domain=""example.com""` However, because the domain names are calculated by grabbing the last two elements from the vm name, `minion.example.com.au` will be interpreted as `dns_hostname=""minion.example"", dns_domain=""com.au""`. I'm not important enough to be managing `com.au` on my Digital Ocean account ;) ### Setup Sample cloud profile ",Do you have an ideas on how to approach this?,"@Ch3LL That seems like a great idea. Are hostnames always single tokens? My concern would be that if people use subdomains, with potential conflicts: - `mumble.public.example.com.au` - `mumble.staff.example.com.au` In that case, I think the hostname would end up conflicting. I'm no DNS expert though, and maybe that kind of situation would never happen. I was looking through the [salt-cloud documentation](https://docs.saltstack.com/en/latest/topics/cloud/profiles.html) and profiles support an `append_domain` option. Perhaps we could use that?"
saltstack/salt,https://github.com/saltstack/salt/issues/30419,saltstack_salt_issues_30419,"Obtain jid when salt-call event.send is raised and query for completion?

Hi again, In my scenario, I'm executing a `salt-call event.send` to raise a minion-side event. While running the salt-master in debug mode, I've noticed that internally, the salt-master registers an object with a `jid` (job id?). I'd like to obtain the said `jid` at `salt-call` time and the query the salt-master from the minion for completion, passing that `jid` Is this scenario possible?",How are you executing the salt-call command?,"@jfindlay hi there, What I'm doing, is I'm starting a `cmd.exe /c` process from C# with the following arguments : `salt-call event.send 'customevent' {} --return local --out quiet` When the process terminates, I'm left with STDOUT response containing a JSON response, and I'm deserializing the JSON to obtain the JID. I figured out that much on my own, however I still have no idea how to check whether or not that particular job has completed/failed/is still running? Any ideas? Regards"
saltstack/salt,https://github.com/saltstack/salt/issues/34101,saltstack_salt_issues_34101,"archive.extracted breakage due to 2016.3.0 upgrade from 2015.8.10

### Description of Issue/Question Hi We upgraded from 2015.8 to 2016.3 and most of our file.archive states broke. They apparently broke because we are using both user, group, and if_missing, and in most/all cases if_missing is pointing to a specific file. Apparently, there is a non backwards compatible change in 2016.3 (as documented): ""Changed in version 2016.3.0: When used in combination with if_missing, ownership will only be enforced if if_missing is a directory""/ We had been using file.archive to place into existing directory structures additional sub footprints delivered to us as zip, tar, and war files. And we were relying on the user and group switches so to be able to correctly set the file ownership. Note that some of these zip files are being placed into pre existing (!) directories. Is there any way to get back to the 2015.8 functionality of the file.archive function naturally setting the file ownership INDEPENDENT of whether if_missing is pointing to a directory or file? In addition, even when we set if_missing to a directory, in our limited testing of this scenario the archive is still exploding with root ownership of the files (salt is running as root) - the user and group args are not being honored. Is 2016.3 really supposed to behave as documented - which as we interpret, is if if_missing points to a directory, the user and group args are honored, while if if_missing points to a non-directory inode, user and group are not honored? Is there a test that we can run to validate that behavior? ### Setup Sorry - don't have one handy. Yes this is lame, but a single file.archive state with a zip files of a small directory would be enough of a replication test. ### Steps to Reproduce Issue For issue one, the question is about breaking backwards compatibility with 2015.8 documented behavior (as well as observed behavior). For issue two, we cannot seem to get the user and group arguments to be honored even as documented in 2016.3. ### Versions Report $ sudo salt --versions-report Salt Version: Salt: 2016.3.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.4.1 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.3 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.20.2 Mako: 0.3.4 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.6.6 (r266:84292, May 22 2015, 08:34:51) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: redhat 6.8 Santiago machine: x86_64 release: 2.6.32-504.23.4.el6.x86_64 system: Linux version: Red Hat Enterprise Linux Server 6.8 Santiago",do you think it could be possible at all to ensure that is_missing does not need to be a directory? Or maybe a workaround?,"Apologies - yes I mean archive.extracted. FWIIW 2016.3 would work for us if at the implementation level the implementation effectively did a chmod -R at the root directory of the archive.extract. Yes we place extracted trees within other trees, but the order of extraction is _always_ from folder to subfolder (downwards) and never from subfolder to folder (upwards). So I think a single effective 'chmod -R' would be ok for our specific use case. In fact our quick fix has been to add an explicit cmd.run state that does that - it runs a 'chmod -R' after the extract."
saltstack/salt,https://github.com/saltstack/salt/issues/30230,saltstack_salt_issues_30230,"pkg.install uses 100% CPU whenever there are no changes to the registry

`pkg.install` uses 100% CPU whenever there are no changes to the registry. This is due to a for cycle that is in place in order to make sure there are no effective changes that still have to be applied to it. This cycle made my **Windows** VM CPU spike, this is not very efficient and: - may cause performance issues to other applications or the OS - may cause unnecessary CPU credits consumption on AWS burstable instances - causes Salt to timeout and return no date unless a -t flag is set in the command The relevant code is [here](https://github.com/saltstack/salt/blob/998b55b2bf46ade5e7941b61adbd17bbcae05a5d/salt/modules/win_pkg.py#L788):  Any thoughts on this?",Will you open a pull request against the 2015.8 branch? Thanks.,"@jfindlay Thanks, sure thing!"
saltstack/salt,https://github.com/saltstack/salt/issues/30109,saltstack_salt_issues_30109,"issues changing shadow attributes in user.present state

Having created my users with the user.present state and associated pillar data ","Will you please add the output from `salt --versions-report` from your master to this issue? Also, on what OS are your minions running?","@ssgward - sorry about that I had added the output - yesterday - but it wasn't showing - until I pressed the update ""comment button"". The master is running Centos 7.1.1503 Core The minion Centos 7.2.1511 Core"
saltstack/salt,https://github.com/saltstack/salt/issues/30130,saltstack_salt_issues_30130,"Non-root minion not work with state.sls module

### Issue description Executing the state.sls module get the error with non-root user in saltstack minion client: ",What is the exact command you are running to produce the error?,@ssgward Here is the produce 
saltstack/salt,https://github.com/saltstack/salt/issues/39271,saltstack_salt_issues_39271,"ImportError! No module named salt.loaded of Salt-API in PyPy-5.6.0

### Description of Issue/Question Salt-API fail to launch and get `No module named salt.loaded` ","Could you provide the debug output of the salt-api command? I am currently unable to reproduce this error. Thanks, Daniel","@gtmanfred I'm using [pyenv](https://github.com/yyuu/pyenv) to install it. `pyenv install pypy-5.6.0`. And then use the default pip to install salt.  Anywhy, thank you response. I just want to know how fast if `salt-api` use Tonador with Pypy."
saltstack/salt,https://github.com/saltstack/salt/issues/32294,saltstack_salt_issues_32294,"Salt pkgrepo.managed for PPA Does not Import Keys

### Description of Issue/Question Salt no longer imports keys when using `pkgrepo.managed` with a `ppa` repository. ### Setup ","Does importing the key separately, like in another state, resolve the install problem? Do you know the last version of salt you were using when this was working?","@jfindlay Sorry, I don't know the last version when it was working since I haven't had to do a whole lot with PPAs in awhile :( I have not tried importing the keys separately. I just ran `salt -I 'roles:php' cmd.run 'add-apt-repository ppa:ondrej/php'`"
saltstack/salt,https://github.com/saltstack/salt/issues/30147,saltstack_salt_issues_30147,"salt.cloud.CloudClient method create() not working for VMware driver

I am trying to run simple python code to Provision VM using salt.cloud.CloudClient create() API (Create the named VMs, without using a profile) using vmware driver, but unable to execute. Salt-Cloud Version : salt-cloud 2015.8.3 (Beryllium) Base OS : Centos 6 Sample Code:  Here, I am getting empty json without any exception.",Can you post your relevant cloud provider and profile configs with the private info removed? Can you verify that other operations with the provider work as expected using `salt-cloud`?,"@jfindlay, following are my cloud.provider & profile configs: /etc/salt/cloud.providers  I can able to provision VM using salt-cloud cli command as well as salt.cloud.CloudClient profile() api. But not able to create VM from salt.cloud.CloudClient create() method"
saltstack/salt,https://github.com/saltstack/salt/issues/31763,saltstack_salt_issues_31763,"Unable to create more than 7 harddisk for windows VM using vmware cloud provider

### Unable to create more than 7 harddisk for windows VM using vmware cloud provider ### Setup ",Does it work if you remove one of the disks? Ping @nmadhok,@nmadhok below debug log of `salt-cloud` command: 
saltstack/salt,https://github.com/saltstack/salt/issues/30173,saltstack_salt_issues_30173,"salt-ssh hardcodes SSH port 22 as default

I'm running my ssh server on my systems on a Port != 22. So while I configure the system correct in `~/.ssh/config`, I can ssh just by `ssh <host>`. So the ideal case would be, that I use the salt-roster only for translating the Salt ID to the ssh hostname:  This leads to doubled information. Also: The port 22 is default by SSH. Why do we have to set the default Port of salt-ssh to 22, if SSH has it already set?",What version of salt are you using?,
saltstack/salt,https://github.com/saltstack/salt/issues/30318,saltstack_salt_issues_30318,"ERROR: Sorry, Windows does not support runas functionality

`salt-api cmd.run windows minion` ,return `ERROR: Sorry, Windows does not support runas functionality`  How to solve?",What version of salt are you using? Will you also post your salt-api configs?,"@jfindlay thanks for your reply. version: salt 2015.8.3 salt-api 0.8.4.1 salt-api config: Only configure the user name and password POST / HTTP/1.1 Host: localhost:8000 Accept: application/json X-Auth-Token: d40d1e1e Content-Type: application/x-www-form-urlencoded fun=cmd.run&client=local&tgt=*&arg=C:/Powershell/a.ps1 return ""ERROR: Sorry, Windows does not support runas functionality"" I want to execute powershell script on windows minion"
saltstack/salt,https://github.com/saltstack/salt/issues/30429,saltstack_salt_issues_30429,"windows packege fails to install. Error: retcode 1203

I get this error trying to instal several different packages on Windows. For example, this happens installing Oracle Java JRE8_x86 on Win 7 32 bits:  Than you very much in advance for your help.","Do you get the same `retcode: 1203` when you run the install manually? @TheBigBear, do you have any suggestions?","@TheBigBear, @jfindlay I am sorry. I mixed two errors. Error 1203 As you can see in the log lines I attached to my original post, error 1203 appeared trying to install another product, (Legato Networker). I fixed that error, including a couple of strategicaly place quotes (???) in the install flags. As to the error tying to install jre8_x86, the error was  The solution in this case was to remove HKLM\SOFTWARE\JavaSoft registry entry; I am sorry i got confused and could not fixed the errors before opening the bug. None of them was saltstack fault. Thank you very much."
saltstack/salt,https://github.com/saltstack/salt/issues/30480,saltstack_salt_issues_30480,"Salt Master Stops Responding

In a 2015.8.0 environment while running commands against the salt-api the following errors are encountered. The error seems to occur randomly without warning. I was not able to find any issues that matched this behavior exactly, but have seen a few describing similar issues. (with windows minions. This environment is entirely Linux.) The master is: `Linux cm15virtual 3.10.0-229.el7.x86_64 #1 SMP Thu Jan 29 18:37:38 EST 2015 x86_64 x86_64 x86_64 GNU/Linux` My understanding of what is happening from the master log (included below) is that the master stops responding to the minion for some reason (there are plenty of worker_threads for the given environment). Any help with is would be appreciated. Thanks! The following is from the salt master log: ",Can you interact with the salt master after/when this happens? Does it lose contact with the minion in this context?,"api config:  The master does not appear to stop being able to be interacted with. However, it is difficult to tell because it happens so quickly and without warning. This also means that it happens with different commands being sent to the master via the api. The master can be interacted with after this happens, and responds without any issues. It is not known if the minion truly looses contact with the master in the environment. It is able to receive and send commands after this happens. Also there are 13 minions in the environment."
saltstack/salt,https://github.com/saltstack/salt/issues/43239,saltstack_salt_issues_43239,"spm install -f doesn't update spm info

### Description of Issue/Question When an spm package has been previously installed, and spm install -f is used to install a newer version of the package, running spm info <formula> doesn't show that the version has been updated. ### Steps to Reproduce Issue Generate a new SPM-enabled formula repo, such as with this cookiecutter: https://github.com/mitodl/saltstack-formula-cookiecutter (formula doesn't have to do anything, just having the format is good enough) Version should already be set to 1 in the FORMULA file Run spm build Run spm install <formula> Run spm info <formula> Make a change to init.sls file in the formula Bump the version to 2 in the FORMULA file Run spm build Run spm update_repo Run spm install -f <formula> Run spm info <formula> Note that the sls change was made, but the version from spm info was not updated ### Versions Report Salt Version: Salt: 2016.11.2 Dependency Versions: cffi: Not Installed cherrypy: 3.7.0 dateutil: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.7 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.5 (default, Nov 20 2015, 02:00:19) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.7.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: centos 7.2.1511 Core machine: x86_64 release: 3.10.0-327.22.2.el7.x86_64 system: Linux version: CentOS Linux 7.2.1511 Core",Can you update to 2017.7? We made a lot of changes to spm in this release. And I am wondering if this got fixed. Thanks! Daniel,"We're running redhat 6 and last time we attempted that, yum was broken by the python version upgrade. We had to pin the salt repo at 2016.11."
saltstack/salt,https://github.com/saltstack/salt/issues/43318,saltstack_salt_issues_43318,"Generating SPM-METADATA outside of salt

### Description of Issue/Question I want to upload packages to Artifactory and have it generate the SPM-METADATA file on the server side as packages are added. Is the format of this file fairly fixed at this point? I've considered shelling out from a groovy plugin to a locally installed salt on the Artifactory server, but I'm wondering if straight groovy would be better. The [development guide](https://docs.saltstack.com/en/latest/topics/spm/dev.html#spm-development) is very helpful, but doesn't define the file format as much as it discusses implementing new providers. I have a [working POC](https://gist.github.com/daveneeley/4ae247cf006dcf9fc16a347f9242a7e8) that does package generation and metadata setup from any salt minion with pushes and pulls from Artifactory at appropriate times. Basically the whole repo gets copied from Artifactory, updated with spm, and then pushed back to Artifactory. Installing packages from Artifactory on the salt master works just fine. The POC just grows more inefficient as more packages are added. Perhaps I am missing the point, and I can add an Artifactory provider to SPM using it's native metadata capabilities instead of using the SPM-METADATA file?","What do you mean by ""providers""? The `SPM-METADATA` file is based on `yum`'s `METADATA` file, though obviously the format is different. How does artifactory serve `yum` `METADATA` files?","The rpm plugin for artifactory appears to be closed-source. I'm not sure how they are doing it. By ""providers"" I just meant the plugin systems for SPM - pkgdbs and pkgfiles. What I'm wanting is for `spm update_repo` to call Artifactory, which does whatever it wants to return something that spm can consume. In other words `SPM-METADATA` in `_download_repo_metadata` is just an endpoint (and could be replaced with a custom endpoint if needed).  Clarified, is the format of `SPM-METADATA` specific to the sqlite implementation, or is it just a yaml file that contains the latest FORMULA file content from each package? Could I return json from Artifactory instead and have spm parse that? The latter would be nice, as then in theory anyone could use the open source, on-premise version of Artifactory. Plugins are only available in the paid versions."
saltstack/salt,https://github.com/saltstack/salt/issues/30502,saltstack_salt_issues_30502,"service module broken on Oracle Linux 6.7

The service module on Oracle Linux 6.7 is broken due to a core grain parsing problem in /salt/grains/core.py. Oracle Linux 6.7 has the file /etc/os-release. Previous versions of Oracle Linux 6 do not. The regular expressions that parse /etc/os-release cause the grains to have erroneous double quotes in them. ","What version of salt are you using? This should be fixed in #29435, which will come out in 2015.8.4 in the next one or two weeks.",I just tested https://github.com/saltstack/salt/pull/29435 on an amd64 Oracle Linux 6.7 box. The fix you posted seems to work. Thanks. I am using 2015.8.3
saltstack/salt,https://github.com/saltstack/salt/issues/46419,saltstack_salt_issues_46419,"Possibility to avoid failing entire apply due to `onfail_in` states failing

### Description of Issue/Question We are looking for ways to work around a minor issue in `postgres_user.present` (it fails instead of returning `clean` when the account is already set up, but nevermind that). To work around that, we implemented a state to simply try to connect to the postgres server. If it passes, we don't bother with the `postgres_user` state at all. (You might rightly point out that we could used `unless` instead of a whole `cmd.run` here, but I wanted to mask the postgres password from the system's audit log.) ",Can you provide the states where you using it and it's not working?,"@garethgreenaway the _internal_ behavior of salt here was exactly right. But we're running in a context where the unix exit status matters. Given that the failure was expected and _handled_, I'm asking for a way where, in this scenario, the failure of a single state doesn't translate to the failure of the entire salt run. One solution would be for salt to return a different exit status if the only states that failed are all onfail_in states."
saltstack/salt,https://github.com/saltstack/salt/issues/30667,saltstack_salt_issues_30667,"Persist iptables rules through reboot

I'm attempting to set iptables rules for a Ubuntu machine using Salt, however the rules do not persist through reboot with the save: True option. Am I missing anything or is this an issue? Any help appreciated!  Both the master and minion are on version 2015.5.3 (Lithium) on Ubuntu 14.04.",Does this also happen on 2015.5.9 or 2015.8.4?,"@jfindlay, only tested on 2015.5.3. Could have possibly been Docker interfering with the rules."
saltstack/salt,https://github.com/saltstack/salt/issues/30716,saltstack_salt_issues_30716,"git.latest will not use an identity file that does not end in _rsa

If I have a state as follows:  Salt refuses to use the key, and i get a PublicKey Denied error when trying to clone with salt. I can confirm this by either copying or symlinking github_ecdsa to id_rsa and changing the identity in the state to use this instead, which allows the project to be cloned successfully. I have also tested replacing 'id_rsa' with 'anystring_rsa' to confirm that this pattern still works. I am currently running on LinuxMint 17.3, and the state is being called in a masterless configuration (e.g. with `salt-call --local`).",What is the output of `salt --versions-report`?,Here you go: 
saltstack/salt,https://github.com/saltstack/salt/issues/30799,saltstack_salt_issues_30799,"Pip module doesn't handle ""develop"" packages

When I tried to run a pip.installed state on a server that had some manually installed packaged I got the following error:  The last package is an internal python package that we installed from source in ""edit"" mode.","What version of salt are you using? Also, will you post the state that is failing?","This was the state that did it, but I actually can't reproduce this error anymore. After I removed the offending library I tried to get a similarly broken install in a sandbox, but everything I've tried produces a working install. My best guess is that this particular install, on Windows, has been upgraded, and upgraded, and somewhere in its history a bad develop link has been put in by an old version of python/setuptools. I think this issue should probably be closed, but hopefully it will give a hint to someone else hitting this error in the future. "
saltstack/salt,https://github.com/saltstack/salt/issues/33964,saltstack_salt_issues_33964,"Updating from 2015.5.8 to 2016.3.0 on RHEL6 results in RPM dependency issues

### Description of Issue/Question Updating from 2015.5.8 to 2016.3.0 on RHEL6 results in RPM dependency issues ` [root@rhel6 ~]# yum install https://repo.saltstack.com/yum/redhat/salt-repo-2016.3-1.el6.noarch.rpm [root@rhel6 ~]# yum clean all Loaded plugins: product-id, search-disabled-repos, subscription-manager Cleaning repos: epel rhel-6-server-eus-rpms rhel-6-server-optional-rpms rhel-6-server-rpms rhel-server-dts-6-rpms : rhel-server-dts2-6-rpms salt-2016.3 Cleaning up Everything [root@rhel6 ~]# yum update Loaded plugins: product-id, search-disabled-repos, subscription-manager Setting up Update Process epel/metalink | 9.1 kB 00:00 epel | 4.3 kB 00:00 epel/primary_db | 5.8 MB 00:03 rhel-6-server-eus-rpms | 3.7 kB 00:00 rhel-6-server-eus-rpms/primary_db | 38 MB 00:10 rhel-6-server-optional-rpms | 3.5 kB 00:00 rhel-6-server-optional-rpms/primary_db | 3.7 MB 00:01 rhel-6-server-rpms | 3.7 kB 00:00 rhel-6-server-rpms/primary_db | 40 MB 00:17 rhel-server-dts-6-rpms | 4.0 kB 00:00 rhel-server-dts-6-rpms/primary_db | 45 kB 00:00 rhel-server-dts2-6-rpms | 3.2 kB 00:00 rhel-server-dts2-6-rpms/primary_db | 166 kB 00:00 salt-2016.3 | 2.9 kB 00:00 salt-2016.3/primary_db | 41 kB 00:00 Resolving Dependencies --> Running transaction check ---> Package PyYAML.x86_64 0:3.10-3.1.el6 will be updated ---> Package PyYAML.x86_64 0:3.11-1.el6 will be an update ---> Package openpgm.x86_64 0:5.1.118-3.el6 will be updated --> Processing Dependency: libpgm-5.1.so.0()(64bit) for package: zeromq3-3.2.5-1.el6.x86_64 ---> Package openpgm.x86_64 0:5.2.122-2.el6 will be an update ---> Package python-crypto.x86_64 0:2.0.1-22.el6 will be updated ---> Package python-crypto.x86_64 0:2.6.1-2.el6 will be an update ---> Package python-jinja2.x86_64 0:2.2.1-2.el6_5 will be updated ---> Package python-jinja2.noarch 0:2.7.3-1.el6 will be an update --> Processing Dependency: python-markupsafe for package: python-jinja2-2.7.3-1.el6.noarch ---> Package python-zmq.x86_64 0:14.3.1-1.el6 will be updated ---> Package python-zmq.x86_64 0:14.5.0-2.el6 will be an update --> Processing Dependency: libzmq.so.4()(64bit) for package: python-zmq-14.5.0-2.el6.x86_64 ---> Package salt.noarch 0:2015.5.8-1.el6 will be updated ---> Package salt.noarch 0:2016.3.0-1.el6 will be an update --> Processing Dependency: python-tornado >= 4.2.1 for package: salt-2016.3.0-1.el6.noarch --> Processing Dependency: python-futures >= 2.0 for package: salt-2016.3.0-1.el6.noarch ---> Package salt-minion.noarch 0:2015.5.8-1.el6 will be updated ---> Package salt-minion.noarch 0:2016.3.0-1.el6 will be an update --> Running transaction check ---> Package openpgm.x86_64 0:5.1.118-3.el6 will be updated --> Processing Dependency: libpgm-5.1.so.0()(64bit) for package: zeromq3-3.2.5-1.el6.x86_64 ---> Package python-futures.noarch 0:3.0.3-1.el6 will be installed ---> Package python-markupsafe.x86_64 0:0.11-10.el6 will be installed ---> Package python-tornado.x86_64 0:4.2.1-1.el6 will be installed ---> Package zeromq.x86_64 0:4.0.5-4.el6 will be installed --> Finished Dependency Resolution Error: Package: zeromq3-3.2.5-1.el6.x86_64 (@epel) Requires: libpgm-5.1.so.0()(64bit) Removing: openpgm-5.1.118-3.el6.x86_64 (@epel) libpgm-5.1.so.0()(64bit) Updated By: openpgm-5.2.122-2.el6.x86_64 (salt-2016.3) Not found --- yum can be configured to try to resolve such errors by temporarily enabling disabled repos and searching for missing dependencies. To enable this functionality please set 'notify_only=0' in /etc/yum/pluginconf.d/search-disabled-repos.conf --- Error: Package: zeromq3-3.2.5-1.el6.x86_64 (@epel) Requires: libpgm-5.1.so.0()(64bit) Removing: openpgm-5.1.118-3.el6.x86_64 (@epel) libpgm-5.1.so.0()(64bit) Updated By: openpgm-5.2.122-2.el6.x86_64 (salt-2016.3) Not found You could try using --skip-broken to work around the problem You could try running: rpm -Va --nofiles --nodigest [root@rhel6 ~]# cat /etc/redhat-release Red Hat Enterprise Linux Server release 6.8 (Santiago) [root@rhel6 ~]# salt-minion --versions Salt: 2015.5.8 Python: 2.6.6 (r266:84292, May 22 2015, 08:34:51) Jinja2: unknown M2Crypto: 0.20.2 msgpack-python: 0.4.6 msgpack-pure: Not Installed pycrypto: 2.0.1 libnacl: Not Installed PyYAML: 3.10 ioflo: Not Installed PyZMQ: 14.3.1 RAET: Not Installed ZMQ: 3.2.5 Mako: Not Installed Tornado: Not Installed timelib: Not Installed dateutil: 1.4.1 `",Did you initially install from epel?,@Ch3LL That is correct. I initially installed from epel
saltstack/salt,https://github.com/saltstack/salt/issues/30856,saltstack_salt_issues_30856,"[salt-ssh] Custom pillar data present in pillar.items, but not in custom execution module through __pillar__ dictionary

(Encountered in version 2015.8.3) Hello! I am running into an interesting issue using salt-ssh to execute custom modules relying on pillar data. When querying for the target's pillar using: `salt-ssh '*' pillar.items` the custom pillar entries are present, however within a custom execution module the `__pillar__` entry only contains the default set of master pillar entries, none of the custom entries. Checking the `pillar.json` that is deployed via salt-ssh to the target in `salt_state.tgz` the full pillar is visible. The custom module that I have resulted to testing with whilst attempting to debug is:  Has anyone ran into anything similar? I can find some open issues regarding salt-ssh and pillars but most of these seem to be in regards to failing to render the pillar at all.",Do you know if this happens with normal minions as well?,Testing against a master/minion setup the module outlined above works as intended (i.e. it returns the fully populated pillar). --versions-report is as follows: 
saltstack/salt,https://github.com/saltstack/salt/issues/30899,saltstack_salt_issues_30899,"s3.get module not working due to invalid role_arn handling

Salt version 2015.8.4 2016-02-04 14:29:27,694 [salt.utils.aws ][INFO ][11995] AssumeRole response: {""Error"":{""Code"":""SignatureDoesNotMatch"",""Message"":""Credential should be scoped to a valid region, not 'eu-central-1'. "",""Type"":""Sender""},""RequestId"":""b225b6f9-cb4b-11e5-8724-17b3d4e5f0fc""} 2016-02-04 14:29:27,695 [salt.state ][ERROR ][11995] Module function s3.get threw an exception. Exception: 403 Client Error: Forbidden Reason for the problem: 1. on salt/modules/s3.py:260 role_arn get replaced with empty string 2. as result salt/utils/aws.py:219 will call the assumed_creds function instead of creds function and thus leads to the error above",Will you also post the command line you are using that results in this error?,@jfindlay This was part of my orchestration. State part that failed was:  to end of the _get_key function in salt/modules/s3.py
saltstack/salt,https://github.com/saltstack/salt/issues/30982,saltstack_salt_issues_30982,"Cyrillic filename creation incorrectly working on windows-minion

yaml_utf8: True on server and minions.  result: http://i.imgur.com/sUhRrvK.png",What version of salt are you using?,Salt-Minion-2015.8.5-x86-Setup.exe and Salt-Server 2015.8.5 Windows codepages: CP1251 and IBM CP866. Linux Server: 
saltstack/salt,https://github.com/saltstack/salt/issues/38719,saltstack_salt_issues_38719,"No Top file or external nodes data matches found

### Description of Issue/Question Top file not found: ",Can you provide your top file? and anything that is not the default in the master and minion configs?,The topfile.sls is like:  Salt minions config is exactly like default (only changed the name of saltmaster host).
saltstack/salt,https://github.com/saltstack/salt/issues/30991,saltstack_salt_issues_30991,"dockerng.running creating container fails on both restart_policy and port_bindings

 `pip freeze` from the minion suggests it's using `docker-py` 1.7.0.",What version of salt are you using? Will you post your `drone` state file as well? Thanks.," I'm not sure about the minion anymore, as I destroyed it last night. But both versions came from the `jessie` debian repository cited here: https://docs.saltstack.com/en/latest/topics/installation/debian.html Both were installed over the weekend too, so they should be relatively up-to-date. I don't have the `drone` state anymore either I don't think, but I'm planning to give this another shot tonight (since the `docker-formulas` failed me as well, albeit because of a bug in `systemd-215`) and report back when/if I hit this again."
saltstack/salt,https://github.com/saltstack/salt/issues/31266,saltstack_salt_issues_31266,"Salt in Docker container cannot run dmidecode

When running Salt in a Docker container, I get:  The container is running CentOS 7. Dockerfile [here](https://github.com/fredrikaverpil/saltstack-docker/blob/master/Dockerfile) and docker-compose.yml [here](https://github.com/fredrikaverpil/saltstack-docker/blob/master/docker-compose.yml).",What user does the salt-minion run as? Grain data is collected by the minion.,"The minions are Windows based, so I'm not sure exactly what user is running them... I've used the Windows installer för Salt 2015.8.5. I'm guessing it's running as some system service with admin rights? I can successfully aquire grains from them, when authorized, using e.g. `salt 'winminion' grains.items`. This warning appears in the salt master even if I don't have any minion keys accepted (meaning no connected minions), so I was under the impression that it was the salt maser which had issues running dmidecode. It's also on the salt-master I get `/dev/mem: No such file or directory` when running dmidecode manually. The salt-master is being run by root on the host running Docker."
saltstack/salt,https://github.com/saltstack/salt/issues/35090,saltstack_salt_issues_35090,"salt-cloud on fedora 24 is broken

### Description of Issue/Question salt-cloud -Q  seems to help with libcloud 1.1.0; afterward querying and deletion of VMs is working again",Would you mind giving that fix a try and reporting back whether this resolves your issue?,"Oh, sorry haven't seen that one. Will give it a try later today."
saltstack/salt,https://github.com/saltstack/salt/issues/31238,saltstack_salt_issues_31238,"how works mysql.py

Hi, I don't understand very well how work mysql.py in pillar folder, I want to access to a query in the mysql of the master. I configured a pillar with the next data:  This example is the same as the mysql.py file. How can I access to the query of the pillar? Thanks",Will you be more specific? Thanks.,"SORRY @jfindlay, I need to acces a querys from a mysql in the master, from the master. I'm trying to run the ext_pillar with the mysql module. But I don't understand well how it works. First I modified the config file of the master and I added:  Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/33012,saltstack_salt_issues_33012,"off machine with saltstack

Hi, When I tried to use salt-ssh with state.sls and the machine is off, the return is like when execute pillar.items. There is a possibility to get an error warning that this machine is turned off? Thanks!",Do you think this issue can be closed?,Yes @jfindlay
saltstack/salt,https://github.com/saltstack/salt/issues/33171,saltstack_salt_issues_33171,"Salt-api error when a machine is not in roster file.

Hi! There is a possibility to add a error message when you do a salt-api request with a machine that is not in the roster file? Because when I did a request with curl, the server didn't response anything. Thanks!",What version of salt are you using?,"salt 2015.5.3 (Lithium) @jfindlay , Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/33196,saltstack_salt_issues_33196,"Salt-ssh and Salt-api without passwd

Hi, My roster file: Machine7: host: 192.168.1.104 user: david sudo: True When I tried to execute salt-ssh normal it workds, but when I try with salt-api appears this error: Permission denied, no authentication information What's wrong? Thanks!!",Can you provide the output from `salt --versions-report` Also what command are you running against the salt api?,"Hi @Ch3LL! salt --versions-report Salt: 2015.5.3 Python: 2.7.6 (default, Jun 22 2015, 17:58:13) Jinja2: 2.7.2 M2Crypto: 0.21.1 msgpack-python: 0.3.0 msgpack-pure: Not Installed pycrypto: 2.6.1 libnacl: Not Installed PyYAML: 3.10 ioflo: Not Installed PyZMQ: 14.0.1 RAET: Not Installed ZMQ: 4.0.4 Mako: 0.9.1 Tornado: Not Installed Debian source package: 2015.5.3+ds-1trusty1 And the command: curl -L localhost:9191/run -H 'Accept: application/json' -H 'Content-Type: application/json' -d '{""client"":""ssh"", ""tgt"":""MachineSSH"", ""fun"":""state.sls"", ""arg"":[""update2"", ""nacl""]}' Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/33974,saltstack_salt_issues_33974,"Salt minion polling master

Hi! I'm trying to execute the scheduler from the minion to execute a state in the master. I added in /etc/salt/minion.d/schedule.conf this config:  This is the via to do this? Can anyone help me please? Thanks!!",Does that help to clear it up for you?,"Hi @Ch3LL , I want that the minion polls the master for example every 20 minutes to execute a specific state. I've added this configuration in the master config file: schedule: job1: function: state.sls args: - 'update2' - 'env=nacl' minutes: 20 But this don't execute anything. The sentence that I put in the server to execute the state is: salt 'Machine7' state.sls update2 saltenv=nacl What am I doing wrong? Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/31163,saltstack_salt_issues_31163,"Errors After Updating to 2015.8.5

We just updated to 2015.8.5 last night, and are seeing this issue on a few of the minions. ","Do you have any suspicions about why some minions may have a malformed schedule config and not others? @garethgreenaway, @jacksontj","@jfindlay , we do have a scheduled state.highstate that looks like this: `schedule: highstate: function: state.highstate minutes: 15 maxrunning: 1` A couple suspicious things to note so far: I am running a failover master setup and most of the minions only have 1 connection open to port 4505 at time. For the minions with this issue, they have two connections open to different masters on 4505. This is true for the other issue created as well, [https://github.com/saltstack/salt/issues/31159](url). If I restart the salt-minion, I go back to 1 connection to port 4505 and a state.highstate will run again. All of my minions have this issue, but I believe that is covered in [https://github.com/saltstack/salt/issues/30472](https://github.com/saltstack/salt/issues/30472) . `2016-02-12 20:00:13,662 [salt.utils.schedule][INFO ][628] Running scheduled job: __master_alive 2016-02-12 20:00:13,844 [salt.utils.schedule][ERROR ][30899] Unhandled exception running status.master Traceback (most recent call last): File ""/usr/lib/python2.7/site-packages/salt/utils/schedule.py"", line 703, in handle_func ret['retcode'] = self.functions.pack['__context__']['retcode'] KeyError: 'retcode' 2016-02-12 20:02:13,661 [salt.utils.schedule][INFO ][628] Running scheduled job: __master_alive 2016-02-12 20:02:13,851 [salt.utils.schedule][ERROR ][32141] Unhandled exception running status.master Traceback (most recent call last): File ""/usr/lib/python2.7/site-packages/salt/utils/schedule.py"", line 703, in handle_func ret['retcode'] = self.functions.pack['__context__']['retcode'] KeyError: 'retcode'`"
saltstack/salt,https://github.com/saltstack/salt/issues/35990,saltstack_salt_issues_35990,"file.managed context variables clashing with module arguments

Consider the following: - A Jinja template named template.jinja2: ",Does that work for you @oliver-dungey ?,"@Ch3LL thankyou, yes, I'm such a muppet - the error message was just showing that I had the value at the wrong indent level. Can't believe I'm still being caught out by YAML after using it so long :-)"
saltstack/salt,https://github.com/saltstack/salt/issues/31220,saltstack_salt_issues_31220,"state.apply error (several environments): No matching sls found for 'state' in env 'base'

Hello, error reveal itself under following conditions (I use several environments):  Is it a bug, or there is something I missed?",Do you have a `packages.sls` in `/usr/local/etc/salt/states/base/`?,"Hi, @jfindlay. No, there is no `/usr/local/etc/salt/states/base/packages.sls`, only `/usr/local/etc/salt/states/usermodel/packages.sls`. Still, I expect `sudo salt statlab100.rambler.ru state.apply packages` find packages as `/usr/local/etc/salt/states/usermodel/packages.sls` exist and file_roots contain the following: "
saltstack/salt,https://github.com/saltstack/salt/issues/39457,saltstack_salt_issues_39457,"Means of targeting minion in salt cli and states and pillar top.sls

### Description of Issue/Question Hello, I use saltstack to manage 150+ hosts with different purpose and the problem which always was there is targeting. What I exactly means is following: I see no consistent, centralized and convenient way of grouping my hosts. To the best of my knowledge pillars and grains does not work for this. Example: we have top.sls both for states and pillar, then it's really nice to have an entity, which we can use for targeting in both tops, like this:  because with a lot of minions repeating yourself is a pain and a chance to forget/lost minions. And of course this entity must be available in states/pillars and salt cli.",What about nodegroups?,"nodegroups looks like a step in a right direction, but: 1. citing https://docs.saltstack.com/en/latest/topics/targeting/nodegroups.html: NOT a good idea for 150+ master. Moreover: So it's time consuming and could interrupt anyone else on the same master (other admin or Jenkins). 2. referencing nodegroups as follows: means you'll never get to nodegroups in pillars (except for mapping in pillar top.sls). 3. no options for environment-aware nodegroups: what if, for example, I want to join one more minion to group for testing purposes, but I don't want others (anyone who can apply states on the same master to the nodegroup I join minion to) to apply states to this minion? On the other hand groups looks consistent and centralized enough. And feature mentioned as: just awesome."
saltstack/salt,https://github.com/saltstack/salt/issues/31258,saltstack_salt_issues_31258,"postgres_database.present with encoding fails on consecutive runs

Using  Checking the database the column Encoding (from table `pg_database` column `encoding` is `6` = `UTF-8`) is already `UTF-8` so it shouldn’t even try to change anything. Is this a bug or am I doing something wrong here?",What version of salt are you using?,Version is `2015.8.5 (Beryllium)`. Need any additional information?
saltstack/salt,https://github.com/saltstack/salt/issues/40687,saltstack_salt_issues_40687,"dockerng.image_absent does not support a timeout, will fail when removing an image with many layers

### Description of Issue/Question The `dockerng.image_absent` state, nor the associated `dockerng.rmi` module, supports a client_timeout (like `dockerng.create` and others do). This is needed because the default timeout is 60 seconds, so any operation that may take more than that will need to have the timeout overwritten. ### Setup Here is an SLS that will show the issue on a lower-powered hardware system (e.g. an AWS t2.medium system, chose any linux OS you'd like that runs docker).  ### Suggested fix I think the fix here is to allow all the DockerClient calling modules/states to specify a timeout. Since we need it for a few of the modules/states, we'll be sending along a pull request later for the ones we've ran into.",Would you be able to submit a PR for this? Thanks for reporting. Daniel,"@gtmanfred We certainly can - but it looks like the current develop branch's docker stuff is very broken :-(. It's going to take a bit longer than expected. The new `docker_image.present` state and `dockermod.pull` pass along a client_timeout keyword argument to the DockerClient function. The thing is, the corresponding DockerClient function does not accept the client_timeout option and a exception is thrown. Once I've traced down the commit that added it, I'll reference this and send along a pull request that patches it up. --- UPDATE --- I believe I've found the issue and let the relevant committers know in a comment in #36872"
saltstack/salt,https://github.com/saltstack/salt/issues/31283,saltstack_salt_issues_31283,"cpan execution module fails w older cpan version

Hi all. Thanks for trying to make CPAN work with salt! Those of us who still toil in the perl mines appreciate that you haven't all forgotten us. I've got a Centos 6 server and the version of cpan does not support the '-J' or -j' (and possibly other) arguments. This means cpan.installed fails every time. cpan.installed calls show_config to determine if the build dirs are there or not. Centos 7 is the current release, so Centos 6 is not very old. To configure cpan (not cpanm) I just did a file.managed on /root/.cpan/CPAN/MyConfig.pm. One awkward result of configuring cpan in a state and then installing modules with an execution module is that I don't seem to be able to ensure the config is in place before I execute cpan.installed. Also, you might be better served by cpanm than cpan. It's more oriented toward one-line installs. Hope that helps -Dylan",What version of salt are you using?,"Sortof, cpanm -U does uninstalling but only from the ""local::lib"" directories. Apparently as a safeguard against deleting core modules. I've used it and it seems to work for modules I installed with cpanm. Unfortunately, it doesn't appear to be available in the default package repos for centos 6 and earlier. I've been installing it by hand using cpan. Well, that defeats the purpose. So, maybe cpanm isn't the way to go. There does not appear to be an equivalent to -j/-J in centos 6. The best I could get was echo ""o conf"" | cpan which produces a similar list but with totally different formatting. Oh. and it will try to autoconfigure your cpan if you don't already have it configured. On Thu, Feb 18, 2016 at 10:00 AM, Joseph Hall notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/31294,saltstack_salt_issues_31294,"Grains defined within salt-cloud map file are not propagated to a newly bootstrapped LXC minion

My assumption is that happens because LXC provider uses a separate builtin bootstrap function in comparison to other cloud providers. The following map file doesn't work: ",What version of salt are you using?,2015.8.1 (Beryllium)
saltstack/salt,https://github.com/saltstack/salt/issues/31295,saltstack_salt_issues_31295,"passing jinja/python dict with none value through the file.managed context argument converts python/jinja none into string ""none""

",What version of salt are you using?,2015.8.1 (Beryllium)
saltstack/salt,https://github.com/saltstack/salt/issues/31619,saltstack_salt_issues_31619,"2015.8.7 pkg.installed problem with version parameter

### Description of Issue/Question Since update to 2015.8.7 version parameter in pkg.installed is not working correctly. I've tryed to set version by many ways ( 2.7.0, 2.7.0-1, 2:2.7.0-1.el6 etc) and everytime i get this: The following packages failed to install/update: postfix=2.7.0 Before update all was ok. ### Setup ",What version of salt did you upgrade from? Similar to #30792.,"@jfindlay upgraded from 2015.8.5 @ssgward yep as i described in my example, this is custom repository"
saltstack/salt,https://github.com/saltstack/salt/issues/37250,saltstack_salt_issues_37250,"Salt config files not installed

### Description of Issue/Question Pip install doesn't install the configuration files. The ones which are in /etc/salt. Neither the salt folder is made. ### Setup Git cloned salt. cd to salt. Issued the following commands: - pip install . - python setup.py install These commands did not make the salt folder in /etc. While apt-get salt-master creates the salt folder and installs the config files (which only has default values but its a good reference) I am doing this on a Macintosh.",Would this alleviate your issue if you were stumbling on this again?,I agree that installing from source is for experienced users. But installing from distribution package gives the latest release. Is there any way to install the develop code (with default config files)?Suppose I want to install the carbon branch. The reason I ask for this is because all the changes made by us goes in the develop. And we want to give that code to people (many of whom are beginners).
saltstack/salt,https://github.com/saltstack/salt/issues/43693,saltstack_salt_issues_43693,"saltstack yum repo for RHEL5 fails randomly

### saltstack yum repo for RHEL5 fails randomly Seems like one of X repo servers does no longer hold the RHEL5 packages, so depending on which backend one hits - i assume - you get a 200 og 404 while accessing http://repo.saltstack.com/yum/redhat/5/ ### Setup Browser, use curl, lftp, wget or other to http://repo.saltstack.com/yum/redhat/5/ ### Steps to Reproduce Issue Retry accessing http://repo.saltstack.com/yum/redhat/5/ Retry accessing http://repo.saltstack.com/yum/redhat/ and see if ""5"" repos are present. Have ruled out local proxy issues by testing from several locations, including one without any proxy.  ### Versions Report N/A",Can you test from your location again?,I confirm that this works from my side now.
saltstack/salt,https://github.com/saltstack/salt/issues/31362,saltstack_salt_issues_31362,"salt-key returns error when not run as root

`salt-key` returns error when not run as root I'm attempting to run as salt as unprivileged user described [here](https://docs.saltstack.com/en/latest/ref/configuration/nonroot.html). Regular `salt` commands run without problem, but running `salt-key` commands returns this error:  I'm running Centos 7 (using the most recent base Centos AMI on AWS). I experienced this with salt versions 2015.5.8 and 2015.8.7. I initially installed 2015.5.8 using the salt packages in EPEL, and then upgraded to 2015.8.7 using the package in the [repo.saltstack.com](https://docs.saltstack.com/en/latest/topics/installation/rhel.html) after first experiencing the issue. I can see that the salt master daemon is running as the correct unprivileged user, and regular `salt` commands seemingly work, so it appears that salt is configured correctly",Will you also post the master config you are using with any private info removed if necessary?,"@jfindlay Here you are:  I also just found that someone [mentioned](https://groups.google.com/d/msg/salt-users/phuM1sNzLAE/V_dTU5wsCgAJ) something similar on the google group, but I didn't see any issues in this repo that looked related."
saltstack/salt,https://github.com/saltstack/salt/issues/31565,saltstack_salt_issues_31565,"salt-key --gen-keys=minibar IOError: [Errno 13]

### Expected Behavior salt-key --gen-keys=minibar ","What are the permissions on `/root`? I have tried to reproduce this on 2015.8.7, but it succeeds. Can you also try with 2015.8.7?",@jfindlay Updated. see next comment
saltstack/salt,https://github.com/saltstack/salt/issues/31425,saltstack_salt_issues_31425,"Dockerng states fail to render even if the docker formula is included in the state.

I am trying to write a series of states which installs docker via the salt docker formula and then start a number of containers on a fresh installed ubuntu image. However the SLS fails to render with the error (I am using pyobjects for my SLS files):  From my understanding the module is not being loaded by pyobjects/salt because it really does not exist (yet) and therefore when it is rendered it reports the above error, preventing the state from running and installing docker.",What is the output of `python -c 'import docker ; import docker.utils'` on the system you're running the docker states against?,On a fresh machine with Ubuntu 14.04 and only a salt minion bootstrapped I get 
saltstack/salt,https://github.com/saltstack/salt/issues/31915,saltstack_salt_issues_31915,"How __opts__ created?

If modify /etc/salt/master, the new config will not take effect when use salt-api unless restart it. The reason is that **opts** used by salt-api is not updated, so my question is how **opts** created and how to update it in real time.",What values are you interested in changing?,"@whiteinge If I add a new nodegroup in /etc/salt/master, salt-api will not get that change unless restart it. As you know, salt-api is a simple wsgi server. The token will lose efficacy after server restarts. So, it is not very convenient for user who visit salt-api. The current solution I think is sending a request to salt-api and update opts attribute in NetapiClient class by reading salt master config file. But I'm afraid, the solution may exists potential risk."
saltstack/salt,https://github.com/saltstack/salt/issues/31482,saltstack_salt_issues_31482,"Debian package doesn't use the same code as tar.gz release

Hello, I'm using Salt 2015.8.7 on debian Jessie, I ran into the glusterfs bug corrected by https://github.com/saltstack/salt/pull/30924 This fix has been merged in 2015.8 branch and fixed in the salt-2015.8.7.tar.gz but not in the 2015.8.7+ds-1 debian package. And Ubuntu package doesn't seem fixed too.",Where are you getting salt-2015.8.7.tar.gz from?,I downloaded the tar.gz here https://github.com/saltstack/salt/releases
saltstack/salt,https://github.com/saltstack/salt/issues/31615,saltstack_salt_issues_31615,"GitFs vs roots environment isolation using top file does not work

### Description of Issue/Question I am trying to use gitfs to drive environment isolation using a top file. I have 3 environments : - base: on master branch - dev: on dev branch - qa: on qa branch When I try from a minion a state.show_top in trace level, the minion only tries the targeting of the base environment. So show_top is empty since the minion is matching a target of 'dev' environment. Adding 'environment: dev' in the minion configuration solves the issue. Here are the logs of the show_top: ",Do you have a top file in each saltenv or only in `base`? with `top_file_merging_strategy: same` you will need top files in each saltenv.,@jfindlay yes I do have a top file in all branches and it is exactly the same everywhere. In fact the rendered top file in logs is the right one. The question is why my minion does not even try the targetting described in dev environment ?
saltstack/salt,https://github.com/saltstack/salt/issues/38836,saltstack_salt_issues_38836,"file.managed with S3 Source errors out with obscure message

### Description of Issue/Question I have a simple state to download a binary file into my home directory from S3. I have an IAM role for my EC2 instance that provides full access to the S3 bucket. Manually running `salt-call s3.get mys3bucket /infrastructure/atlassian/atlassian-servicedesk-3.2.6-x64.bin` works just fine. Tried Googling for `Exception: 'FSClient' object has no attribute 'utils'` and I couldn't find anything useful. ### Setup Currently running masterless with GitFS Backend ","Could you run this with salt-call and -l debug and then provide us with the full stack trace? Thanks, Daniel",Here is the -l debug output. 
saltstack/salt,https://github.com/saltstack/salt/issues/31704,saltstack_salt_issues_31704,"Foreman external pillar doesn't load

### Description of Issue/Question There is a bug in using foreman-node as the external pillar which prevents successful state execution, as the pillar data returns empty. I haven't dug into whether this is an error on the part of Foreman or SaltStack. The issue for that is [here](http://projects.theforeman.org/issues/13558). As a work-around I switched us to using the foreman pillar. The foreman.py code would not load, due to **virtualname** and json functionality failures. ### Steps to Reproduce Issue Follow the documentation to add foreman as the external pillar. Try to refresh pillar data.",What version of salt are you using?,"Sorry, for taking so long to get back. 2015.8.7 Work has been hectic. Anyway, is there a reason the foreman pillar doesn't use the same file that foreman-node utilizes? Rather than accessing the api (current method) it would be possible to call https://foreman/salt/node/<minion_id>?format=yml which presents all the same information as foreman-node retrieves. I'm not familiar enough with Ruby or Foreman code base to fix foreman-node, but I did create a couple replacement python scripts for master_tops and ext_pillar, to get everything running the same way using the above url. They won't upload grains, but it provides a workaround in case foreman-node breaks. If you want me to submit a merge request for that I can, otherwise the merge request I made a couple days would close this issue."
saltstack/salt,https://github.com/saltstack/salt/issues/42217,saltstack_salt_issues_42217,"boto_elb execution module does not work using profiles with salt gpg encrypted pillar data

### Description of Issue/Question The example given in https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.boto_elb.html shows that you can setup a profile in pillar. This works except not when using saltgpg encrypted secrets. This looks to possibly be an issue with the default renderer being overwritten, thus gpg encrypted data is not being rendered properly? ### Setup Setup a profile for boto_elb in pillar using encrypted pillar data described https://docs.saltstack.com/en/latest/ref/renderers/all/salt.renderers.gpg.html ### Steps to Reproduce Issue Execute the boto_elb.list_elbs using the profile created and nothing is returned. I believe an authorization is denied on AWS. ### Versions Report salt --versions-report Salt Version: Salt: 2016.11.5 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.6.0 docker-py: Not Installed gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: 0.3.6 PyYAML: 3.10 PyZMQ: 14.4.0 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 3.13.0-65-generic system: Linux version: Ubuntu 14.04 trusty","Do you see the pillar data when you run `salt '*' pillar.get 'key'`? Can you provide an example of the pillar with the gpg key? Thanks, Daniel",Running salt '*' pillar.get 'key' does return the correct secret as I would expect. Which leads me to believe that the boto_elb execution module does not render the pillar in the same way that the pillar execution module does. I can't provide an example of the pillar without sending my password. However creating any valid credential to AWS should be able to reproduce this issue. For example in your pillar if you had a keyid=GKTADJGHEIQSXMKKRBJ08H and key=askdjghsdfjkghWupUjasdflkdfklgjsdfjajkghs this would work. 
saltstack/salt,https://github.com/saltstack/salt/issues/31729,saltstack_salt_issues_31729,"Creating VM with salt-cloud fails for provider Exoscale (Cloudstack)

### Description of Issue/Question When trying to create a VM with `salt-cloud -p micro_exo test_vm -l debug` the creation fails with this: ",Can you verify that you have configured the cloud provider correctly otherwise if possible?,"@jfindlay The configuration seems to be correct… as far as I can tell. I can query locations, images and sizes. Applying the hack allows me to create the VM. Provisioning seems to work too, since the VM is showing up as Salt minion. I can also query the running VMs. Let me know if you need more information. "
saltstack/salt,https://github.com/saltstack/salt/issues/43267,saltstack_salt_issues_43267,"OSError - Can't delete PIDfile when not root

### Description of Issue/Question Stopping the `salt-master` with privilege dropping enabled shows a `OSError: [Errno 13] Permission denied` for the PIDfile in the logs. So the `salt-master` ist not able to remove the PID file from `/var/run`. ### Setup SaltStack 2016.11.4 on openSUSE Leap 42.3. Same applies to at least SLES12 SP2. ### Steps to Reproduce Issue 1. Configure Salt to run e.g. as user `salt`. 2. Start `salt-master` 3. Stop `salt-master` We are now seeing this in the log:  During start-up `salt-master` is creating the PIDfile with root privileges in `/var/run`. Since privileges where dropped to the user `salt`, we are no longer able to remove the PIDfile from `/var/run`, since `/var/run` does not permit this. This happens regardless of the permissions for the PIDfile. ### Versions Report Tested with SaltStack 2016.11.4. But I see the same code in develop.",Doesn't `verify_env` take care of this already(stopped working?)?,@Ch3LL This is a very good workaround! Thanks! @s0undt3ch Salt already sets the permissions and ownership for the PIDfile. But we can't change the permission for `/var/run` or `/run` which prevent the deletion for non-root users. Changing the permissions would have security implications. So I think there is really nothing Salt can do about this as long as the PIDfile is in the run-folder itself.
saltstack/salt,https://github.com/saltstack/salt/issues/51764,saltstack_salt_issues_51764,"Presence detection for minions behind NAT not working

### Description of Issue/Question Presence detection for minions behind a NAT is not working. In [minions.py](https://github.com/saltstack/salt/blob/develop/salt/utils/minions.py#L666) we fetch all of the IPv4 addresses of the minions. For `minion1` this will be the IP address the master can see. But for `minion2` this will be the address the minion gets behind the NAT. Then those [addresses are compared](https://github.com/saltstack/salt/blob/develop/salt/utils/minions.py#L667) to the addresses the master can [see](https://github.com/saltstack/salt/blob/develop/salt/utils/minions.py#L643) from the minions, which will be the address of the NAT for `minion2`. I'm not sure how to address this. Any hints welcome! ### Setup `minion1` is directly connected to the master. `minion2` is behind a NAT. ### Steps to Reproduce Issue Let both minions connect and fire a `salt-run manage.alived`. Then you will see this:  But since this was introduced in `2015.8.0`, this should be faulty all the way down.",Should `manage.alive(d?)` not just operate roughly like `test.version` (or `test.ping`) where it asks the minion to report back that it's alive?,"@waynew No, `alived` is different in that regard. A `test.ping` puts some amount of pressure on the system/network if the installation is really big. So having something that works in a passive way (which `alived` does) is preferred in this case."
saltstack/salt,https://github.com/saltstack/salt/issues/32081,saltstack_salt_issues_32081,"saltstack and supervisord not restarting my apps.

### Description of Issue/Question running `salt '*' state.highstate` does not restart my processes. Every time I run a highstate, my latest code from git gets pulled, built and turned into binaries. I have, in my init.sls a command to copy the new super-app.conf (in case anything changes, normally it does not) into my /etc/supervisord/conf.d/ dir. When I run highstate, I noticed by going ""salt '*' supervisord.status"" that my app did not get restarted, from looking at the time stamp that it returns. This is really important to me, as I need the latest binary to be running. ### Setup ",Can you verify that the service restarts if you do that part manually? Will you also post the minion debug log when these states run?,"@jfindlay when I do it manually, it does restart. Here is the log, the bits that pertain to supervisor: http://ix.io/v3l/#n-LINENO"
saltstack/salt,https://github.com/saltstack/salt/issues/34331,saltstack_salt_issues_34331,"Huge confusion reading states requirements doc

### Description of Issue/Question As I'm currently banging my head against the wall reading and trying to understand the ""Requisites"" doc, I'm there to ask some help :) Reading [this doc](https://docs.saltstack.com/en/latest/ref/states/requisites.html), Salt currently provides 13 different requirement/altering directives that sounds very similar: - require - require_in - watch - watch_in - prereq - prereq_in - use - use_in - onchanges - onchanses_in - listen - listen_in - check_cmd After having read (and re-read, and re-re-re-re-read) the doc, I'm still lost between those directives. Some of them seems to be covering others (but not sure of this)... Also, some parts of the doc are repeating and some are just unclear (see [the ""onchanges"" section](https://docs.saltstack.com/en/latest/ref/states/requisites.html#onchanges)). In my case, I simply wanted to say:  and ran a salt-call state.apply. The result is that checkout-state ran but deploy-state didn't fire. As you can see, I'm a bit lost with those directives. As I'm fairly new to Salt (started to use it some months ago), I'm surely going wrong by doing bad things but I still think that the doc could be better written. Thanks for reading (and don't stop making Salt amazing as it already is) :+1:",Does using cmd.run with onchanges work? If it doesn't would you mind sharing your entire sanitized sls file so I can try to replicate this behavior.,"Oh yes, you're totally right on using cmd.run with onchanges instead of cmd.wait, thanks for the quick and good reply. You can close this report I think."
saltstack/salt,https://github.com/saltstack/salt/issues/32121,saltstack_salt_issues_32121,"unmet dependency: #include <git2.h>

### Description I just installed salt-master-2015.8.7-228.4.x86_64 on my openSUSE Leap 42.1 host and try to start it: `# salt-master -d` `'/usr/lib64/python2.7/site-packages/pygit2/__pycache__/pygit2_cffi_ccb73b72x5470904.c:208:18: fatal error: git2.h: No such file or directory` `#include <git2.h>` `^` `compilation terminated.` `Traceback (most recent call last):` `File ""/usr/bin/salt-master"", line 22, in <module>` `salt_master()` `File ""/usr/lib/python2.7/site-packages/salt/scripts.py"", line 47, in salt_master` `master.start()` ... `File ""/usr/lib64/python2.7/site-packages/cffi/ffiplatform.py"", line 60, in _build` `raise VerificationError('%s: %s' % (e.__class__.__name__, e))` `cffi.ffiplatform.VerificationError: CompileError: command 'gcc' failed with exit status 1` ### Setup I did not configure anything, as https://docs.saltstack.com/en/latest/ref/configuration/index.html states. ### Steps to Reproduce Issue See above ### Versions Report (Provided by running `salt --versions-report`.) This command also terminates with the same missing file. The package salt-master has been installed from repo.saltstack.com, the package python-pygit2 is from the Leap main repo. Which package am I missing to provide the missing file git2.h? Choosing the slightly older versions from the obs:systemsmanagement:saltstack repo does not change a bit, salt-master terminates with the same message.",How did you install salt?,"Sorry for the delay, but we have holidays in Germany :). I installed via `zypper in salt salt-master` from the devel:languages:python repository in openSUSE's BuildSystem. The same thing I did at home, and here everything runs fine. ""locate git2.h"" shows no file here, no wonder I have none in my office... In my first text I said that salt-master has been installed from repo.saltstack.com, but I undid this installation, and changed to the source at http://download.opensuse.org/repositories/devel:/languages:/python/openSUSE_Leap_42.1. But the error persists. I'll try salt-2015.8.7-13.1.x86_64 from the Leap distro repo next."
saltstack/salt,https://github.com/saltstack/salt/issues/32205,saltstack_salt_issues_32205,"Salt client api run_job  raise ""Salt request timed out. The master is not responding"" , but  successful executed at the salt minoin

### Description of Issue/Question HI， I get a probleam. use salt api make some test like this.`salt.client.run_job(tgt='123123',fun='cmd.run_all',arg=[touch /test/1/1])` run_job raise ""Salt request timed out. The master is not responding. If this error persists after verifying the master is up, worker_threads may need to be increased"", but successful executed at the salt minoin. I have 2 master and 16 minions. I have 50 python rq process execute salt client api I request 14000 times. the probleam above i get 2. master: 8 cpu , 48G mem . ### Setup master.conf ",What happens when you run `salt 123123 cmd.run_all 'touch /test/1/1'` from the master?,"YES, run this 14000 times and it only failed 2 times。 first, command or api, most of which are perfect. when i run `salt.client.run_job(tgt='123123',fun='cmd.run_all',arg=[touch /test/1/1])` about 2 failed info: The master side raise `""Salt request timed out. The master is not responding. If this error persists after verifying the master is up, worker_threads may need to be increased""` The minion side `touch /test/1/1 successful` master told me failed , but successful executed at minoin. 14000 times and it only failed 2 times, Thank you for your help。"
saltstack/salt,https://github.com/saltstack/salt/issues/48402,saltstack_salt_issues_48402,"Running SaltStack master with no init system repeatedly logs ""could not determine init system ""

### Description of Issue/Question The info log of our salt master process are full of `Could not determine init system from command line: (/bin/bash /usr/local/bin/docker_entrypoint.sh run_saltmaster)` due to us running the salt-master process via su-exec, ie. without an init system. I am aware of https://github.com/saltstack/salt/issues/46805 however it would be good if you could turn off salts attempts to get the init and put it in the grain system maybe? ### Setup A setup that does not use one of the init systems salt expects. ### Steps to Reproduce Issue Fire up salt master with the above ### Versions Report ",Does that resolve your use case?,"Thanks for following up, we have tried that, but would really like the info level - If this was a lower level then could understand it, but according to https://docs.saltstack.com/en/latest/ref/configuration/logging/index.html#log-levels info is ""Normal log information"" which seems good, its just this persistent line! As you say looks like it's from https://github.com/saltstack/salt/blob/fbbafc8de4d977a049ee0e33ea2862de379cbd88/salt/grains/core.py#L1663 - is there a way to custom set the init grain? I'm not quite sure why its being called on the master?"
saltstack/salt,https://github.com/saltstack/salt/issues/32773,saltstack_salt_issues_32773,"module syslog_ng not verifying changes

### Description of Issue/Question the syslog_ng module in it's current state is not really useful for me as it does change something on the system every time I run the state. The module should first check the current situation and only in case of a change run something against the target system. Maybe the original developer of the module can say something about it: @ihrwein ### Setup My sls file contains the following: ",Would you mind opening another issue for the file parameter?,@jfindlay here we go with the other issue: #32795
saltstack/salt,https://github.com/saltstack/salt/issues/40044,saltstack_salt_issues_40044,"grains containing wrong values with ""Invalid entry lenght""

### Description of Issue/Question I have an Acer Veriton N4620G computer that I manage with salt and I end up having wrong information available via grain:  so there seems to be an issue parsing that specific data which then leads to the error message ""Invalid entry length (16). Fixed up to 11."". ### Versions Report salt-master 2016.11.2 (Carbon) salt-minion 2016.11.2 (Carbon)","Can you provide the full `--versions-report` so that I can try and replicate this issue? Also the output of `dmidecode -t 1`? Thanks, Daniel",here we go @gtmanfred: salt-master:  so it really seems to be an issue with dmidecode rather than salt as such. but maybe we can improve the parser in a way that it either ignores such kind of error messages or maybe if applicable just returns the first line of the value. what do you think about this approach?
saltstack/salt,https://github.com/saltstack/salt/issues/52017,saltstack_salt_issues_52017,"2019.2.0 TypeError chugid_and_umask() takes exactly 2 arguments (3 given)

### Description of Issue/Question Running a highstate from a salt-master against a salt-minion on Debian 9 with 2019.2.0 resulting in an error. The minion log contains the following traceback: ",Can you provide the state file that you're attempting to run in a highstate? Thanks!,@garethgreenaway it seems to be any cron.present state that is not working. 
saltstack/salt,https://github.com/saltstack/salt/issues/32250,saltstack_salt_issues_32250,"Cannot run salt-minion as unprivileged user using 'user' directive

I'm unable to use the 'user' configuration directive to run salt-minion as an unprivileged user. This is with salt-2015.8.8.2 and CentOS 7.2. A root-owned process is started by systemd. That process appears to attempt to start a child running as the unprivileged user but that process never remains running. Nothing is logged from the 'failing' child processes. File permissions are correct. I can su as the user (or set the user via systemd) and successfully run salt-minion that way. Here's the end of an strace on the 'root' process (pid 24963):  The root process remains running and periodically tries to start new children which continue to fail.",Do you have write permission to /var/run/salt? I can't seem to reproduce this.,"The PR fixes the original problem, thanks. But now I can't stop the salt-minion process via systemd. Only the 'root' process is stopped, the process running as my 'salt-minion' user remains running."
saltstack/salt,https://github.com/saltstack/salt/issues/36048,saltstack_salt_issues_36048,"pygit2 does not support detecting stale refs for authenticated remotes

### Description of Issue/Question 1. gitfs has not pull the remote ,i would know the laster commit to ensure is same the repo ",Does that fix the issue?,I'm place /etc/profile.d/git2.sh to export git path 
saltstack/salt,https://github.com/saltstack/salt/issues/32327,saltstack_salt_issues_32327,"salt-minion fails to start on Windows

### Description of Issue/Question On one of our virtual Windows servers, the salt-minion fails to start. The reason is that the following line fails to calculate the total amount of physical memory available: https://github.com/saltstack/salt/blob/develop/salt/grains/core.py#L416 On this particular machine, one of the objects returned from wmi lacks the `Capacity` property:  Note that summing the valid values from calling WMI doesn't add up to the value returned by `GlobalMemoryStatus`, which matches the amount of physical memory actual available on that machine. I don't know enough WMI or running windows in virtual environments to know why one of the entries returned doesn't report any capacity, or if that is even valid. This particular machine has had no other problems though. I'd suggest changing `_memdata` to use `win32api.GlobalMemoryStatus()` instead, as this uses the Win32 API directly unless there are other differences between WMI and the Win32 API that makes this unfeasable. The salt-minion has version 2015.8.8",What version of Windows are you seeing this one?,I'm seeing this on a Windows Server 2012 Standard running on a virtual machine.
saltstack/salt,https://github.com/saltstack/salt/issues/32514,saltstack_salt_issues_32514,"[question] state wrapper

I have multiple formulas that install custom software. Most of them need to download files/artifacts before installing. I want these formulas to be unaware of the method is used to download something. By default all my formulas get required files from nexus/artifactory an I use `artifactory.downloaded` state. But for failover reasons I want to have several download methods (wget from custom URL or transfer from master... or maybe something else), and I want to add custom download methods without editing all formulas. So the main idea to have ""wrapper""-sate or ""wrapper-formula that can be used by others. example of usege in my formula:  and `do_download_magic` must decide how to get required file based on logic hidden inside. The question is - what is the best ""salt-way"" to do that? Can I call another formula from inside my formula and pass arbitrary dict(that describes what should be downloaded) as parameter?","Does this do what you need, or can it be updated for your use case?",Thanks for the answer. That helped me to find the solution I will write a state that has a switch inside 
saltstack/salt,https://github.com/saltstack/salt/issues/42568,saltstack_salt_issues_42568,"Orchestration runner doesn't populate __pillar__ based on pillarenv

I'm using a custom state module in orchestration that uses `__pillar__`: `pools = __pillar__['autobld']['san']['pool_cus']` When I run my orchestration, I specify the pillarenv: and get ""KeyError: 'autobld'"". However I know it is there and accessible, because if I replace the above line with this one it works: `pools = __salt__['pillar.get']('autobld:san:pool_cus', saltenv='autobld')` Is the `__pillar__` dict supposed to get populated based on the pillarenv you pass to state.orch, or should I just be using the ""pillar.get"" call and passing the env in to my custom state? I'll be glad to provide any other information about my setup that may help.","Can you provide the versionreport like the template for new issues requested? There are a couple of known issues that are going to be fixed in newer versions. Thanks, Daniel","Sure, sorry about that, I knew I forgot something! ------------------------------------------------------- Salt Version: Salt: 2016.11.6 Dependency Versions: cffi: 1.10.0 cherrypy: unknown dateutil: 2.6.1 docker-py: Not Installed gitdb: 2.0.2 gitpython: 2.1.5 ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: 1.5.1 M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.11 (default, Jul 17 2017, 21:29:29) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.3 timelib: 0.2.4 Tornado: 4.5.1 ZMQ: 4.1.6 System Versions: dist: redhat 7.2 Maipo machine: x86_64 release: 4.1.12-61.1.16.el7uek.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.2 Maipo"
saltstack/salt,https://github.com/saltstack/salt/issues/55692,saltstack_salt_issues_55692,"docker.image_present fails on state.pkg call when building with SLS

### Description of Issue During a run of docker.image_present using the ""sls"" option to build from another SLS file, it fails when calling ""state.pkg"" on the file ""salt_state.tgz"". ### Setup SLS files (this is just a contrived example for demonstration) sls_build/init.sls  I can provide full debug output if needed. ### Versions Report Salt Version: Salt: 2019.2.2 Dependency Versions: cffi: 1.6.0 cherrypy: 17.4.2 dateutil: 2.8.1 docker-py: 4.1.0 gitdb: 2.0.6 gitpython: 2.1.14 ioflo: Not Installed Jinja2: 2.10.3 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.6.2 mysql-python: 1.2.5 pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Apr 9 2019, 16:02:27) python-gnupg: 0.4.5 PyYAML: 3.13 PyZMQ: 18.1.0 RAET: Not Installed smmap: 2.0.5 timelib: Not Installed Tornado: 5.1.1 ZMQ: 4.3.2 System Versions: dist: oracle 7.6 locale: UTF-8 machine: x86_64 release: 4.14.35-1844.4.5.2.el7uek.x86_64 system: Linux version: Oracle Linux Server 7.6",do you know if this was working previously?,"This is the first time I've tried it, so I don't know if it was working in previous versions."
saltstack/salt,https://github.com/saltstack/salt/issues/32390,saltstack_salt_issues_32390,"environ.setenv forces masterless minion into looking for master

### Description of Issue/Question I have a masterless configuration, running salt with Vagrant, deploying to a Windows server 2012 VM, running salt on a Mac OSX 10.10 host. When provisioning the VM, the provisioning process hangs when setting an environment variable, at the following output:  ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) I run `vagrant provision` - but salt going to highstate is the same. I think this might be what causes the search for a master: https://github.com/saltstack/salt/blob/0ef623f6fae5d624abd5d335ccd0f8b0aab77845/salt/modules/environ.py#L187-L194 ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) 2015.5.2 on Windows (masterless minion)",can you remark this line and try again? ie. `#master: localhost `,"Thanks for the idea. I tried that, and destroyed/recreated the vagrant VM, just in case. Same result - hung at "
saltstack/salt,https://github.com/saltstack/salt/issues/32591,saltstack_salt_issues_32591,"""RuntimeError: maximum recursion depth exceeded"" in salt/utils/lazy.py, using Salt-SSH

### Description of Issue/Question I got such traceback, calling such command `sudo salt-ssh -ldebug -w ""*some-expr*"" state.apply test=True pillarenv='my_env' saltenv='my_env'`:  When I remove `prepreq` - everyting runs normally. ### Versions Report `$sudo salt-ssh --versions-report` Salt Version: Salt: 2016.3.0rc2 Dependency Versions: Jinja2: 2.7.2 M2Crypto: 0.21.1 Mako: 0.9.1 PyYAML: 3.10 PyZMQ: 14.0.1 Python: 2.7.6 (default, Jun 22 2015, 17:58:13) RAET: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 cffi: Not Installed cherrypy: Not Installed dateutil: 2.4.2 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed libgit2: Not Installed libnacl: Not Installed msgpack-pure: Not Installed msgpack-python: 0.3.0 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed python-gnupg: Not Installed smmap: 0.8.2 timelib: Not Installed System Versions: dist: LinuxMint 17.3 rosa machine: x86_64 release: 3.19.0-32-generic system: Linux version: LinuxMint 17.3 rosa",Could you reduce this to a minimal test case?,"@cachedout I will, when I have free time."
saltstack/salt,https://github.com/saltstack/salt/issues/32578,saltstack_salt_issues_32578,"Master ignores root_dir config value on startup

### Description of Issue/Question Salt-master ignores `root_dir` and tries to access /var/cache directory. ### Setup I run salt-master from virtualenv on local machine using my regular user account. Directory structure looks like this: ","Does it work with `cachedir` set, then? I wouldn't expect it to otherwise, nor would I consider this a regression.",Setting `cachedir` to relative path `./var/cache/salt/master` doesn't work in `2015.8.8.2` and leads to the same exception. Setting `cachedir` to absolute path `/Users/user/salt/var/cache/salt/master` does work though. Why this isn't a regression? This comment in master config file says it should respect `root_dir`: 
saltstack/salt,https://github.com/saltstack/salt/issues/48434,saltstack_salt_issues_48434,"Crash while applying state to new minion with saltclass enabled

### Description of Issue/Question I have several bootstrap states which are applied to new minions using salt-ssh. These minions are not yet listed in any top file (i.e. they have no node description).  ### Versions Report Salt 2018.3.2 CC: @olivier-mauras",does this only occur when running state.sls commands with salt-ssh or any command? and ya if @olivier-mauras can comment here as well :),"It does not fail on `test.ping`, but fails on anything that accesses pillar (`state.sls`, `state.highstate`, `pillar.data`). UPD: to reproduce the crash you need to place an empty node file named `test` into `nodes/` dir."
saltstack/salt,https://github.com/saltstack/salt/issues/53340,saltstack_salt_issues_53340,"Windows pkg.list_pkgs and grain encoding issue

### Description of Issue ### `®` of death Somewhere deep in Salt an output of `pkg.list_pkgs` is not decoded properly and passed as a binary string (not unicode) This binary string gets stored in grain When Salt tries to read the grain, it expects it to be stored as unicode, and fails miserably while trying to decode it, because the characters are from CP437 ### Setup 1. Windows 10 2. Install the Intel driver (msi) https://downloadmirror.intel.com/28688/a08/WiFi_21.0.0_PROSet64.zip (link to the page: https://downloadcenter.intel.com/download/28688/Intel-PROSet-Wireless-Software-and-Drivers-for-IT-Admins) This also happens with MS Office localization package names that contain diacritics, but this Intel driver is the simplest way to reproduce the problem. ### Steps to Reproduce Issue 1. Apply the following state:  </details>",What are you trying to solve?,@damon-atkins I used Python 3.5.3 (see the attached versions-report) that is shipped with Salt 2018.3.4. I need this for state tracking and reporting purposes. What is not shown in the example is a custom event I send when the grain changes (using the `onchanges` requisite). Without a grain the event would be sent each time the state is run.
saltstack/salt,https://github.com/saltstack/salt/issues/53570,saltstack_salt_issues_53570,"Neon: name 'pip' is not defined

### Description of Issue I've been testing some stuff on Neon and got the following traceback:  </details>",What are the outputs of `pip2.7 --version` and `pip3.6 --version`?,"@Akm0d I think I was able to reproduce it on both versions of Python, that is why I posted mixed versions. Just did another test: `sudo salt minion1 state.apply teststate`: <details><summary>Minion log: ModuleNotFoundError: No module named 'pip'</summary>  </details> `pip` executable does not exist on both master and minion (probably wasn't installed by salt-bootstrap.sh): `bootstrap-salt.sh -P -x python3 -f -g https://github.com/saltstack/salt.git -F -c /tmp -k /tmp/minion-seed-keys -M -N git neon`"
saltstack/salt,https://github.com/saltstack/salt/issues/55848,saltstack_salt_issues_55848,"[Neon] Tracebacks in pkg.installed

The state succeeds, but there are a couple of tracebacks in the debug log triggered by the loader (this probably means that these unrelated modules should be fixed): `sudo salt-call state.single pkg.installed nginx -l debug`  </details>",Can you confirm @s0undt3ch that we do not indeed require psutil? if so we can just catch that importerror exception,I wonder what might be different in your setup in regard to `psutil`. I just tried to reproduce it on a clean Vagrant box (`bento/ubuntu-18.04`) and it happens reliably. Below is the bootstrap command I used: 
saltstack/salt,https://github.com/saltstack/salt/issues/33590,saltstack_salt_issues_33590,"ini_manage.options_absent: only works in test mode (TypeError: unhashable type: 'list')

<pre>cleanup_usbdlm_configuration: ini.options_absent: - name: {{ program_files }}\USBDLM\USBDLM.ini - sections: DriveLetters: - Letters</pre> Everything still looks okay when testing state: `salt salt-test state.apply test=True` <pre>---------- ID: cleanup_usbdlm_configuration Function: ini.options_absent Name: C:\Program Files\USBDLM\USBDLM.ini Result: True Comment: Key Letters in section DriveLetters does not exist. Started: 17:21:01.656000 Duration: 0.0 ms Changes: ----------</pre> ...but actually applying it no longer works: `salt salt-test state.apply` <pre>---------- ID: cleanup_usbdlm_configuration Function: ini.options_absent Name: C:\Program Files\USBDLM\USBDLM.ini Result: False Comment: An exception occurred in this state: Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\state.py"", line 1703, in call **cdata['kwargs']) File ""C:\salt\bin\lib\site-packages\salt\loader.py"", line 1649, in wrapper return f(*args, **kwargs) File ""C:\salt\bin\lib\site-packages\salt\states\ini_manage.py"", line 113, in options_absent current_value = __salt__['ini.remove_option'](name, section, key) File ""C:\salt\bin\lib\site-packages\salt\modules\ini_manage.py"", line 124, in remove_option value = inifile.get(section, {}).pop(option, None) File ""C:\salt\bin\lib\collections.py"", line 143, in pop if key in self: TypeError: unhashable type: 'list' Started: 17:22:59.435000 Duration: 16.0 ms Changes: ----------</pre> This was working fine on 2015.8.8-2 and 2015.8.10, but seems to be broken after upgrade to 2016.3.0",Do you have a moment to give that a try and confirm this is fixed?,"@rallytime That fixes it for me, thank you. <pre>---------- ID: cleanup_usbdlm_configuration Function: ini.options_absent Name: C:\Program Files\USBDLM\USBDLM.ini Result: True Comment: No anomaly detected Started: 17:28:47.266000 Duration: 11.0 ms Changes: ----------</pre>"
saltstack/salt,https://github.com/saltstack/salt/issues/33667,saltstack_salt_issues_33667,"file.managed: incorrectly reports changes, in test mode, on Windows

Testing the following state on Windows incorrectly reports that the file contents will be changed, showing a diff indicating that all lines will be re-written. Testing the same state on Linux works as documented, returning no changes. Actually applying the state on Windows correctly returns no changes. <pre>{% if grains['os'] == 'Windows' %} {% set test_file = 'C:\\test.txt' %} {% else %} {% set test_file = '/test' %} {% endif %} diff_test: file.managed: - name: '{{ test_file }}' - contents: | This is line 1 This is line 2 This is line 3</pre> `salt linux-test state.apply test=True` <pre>linux-test: ---------- ID: diff_test Function: file.managed Name: /test Result: True Comment: The file /test is in the correct state Started: 13:09:21.163538 Duration: 25.031 ms Changes: Summary for linux-test ------------ Succeeded: 1 Failed: 0 ------------</pre> `salt windows-test state.apply test=True` <pre>windows-test: ---------- ID: diff_test Function: file.managed Name: C:\test.txt Result: None Comment: The file C:\test.txt is set to be changed Started: 13:10:10.079000 Duration: 47.0 ms Changes: ---------- diff: --- +++ @@ -1,3 +1,3 @@ -This is line 1 -This is line 2 -This is line 3+This is line 1 +This is line 2 +This is line 3 Summary for windows-test ------------ Succeeded: 1 (unchanged=1, changed=1) Failed: 0 ------------ Total states run: 1</pre> `salt windows-test state.apply` <pre>windows-test: ---------- ID: diff_test Function: file.managed Name: C:\test.txt Result: True Comment: File C:\test.txt is in the correct state Started: 13:12:37.169000 Duration: 32.0 ms Changes: Summary for windows-test ------------ Succeeded: 1 Failed: 0 ------------ Total states run: 1</pre>",Which version of salt are you seeing this behavior on?,"@Ch3LL Thanks for looking at this, I'm also using 2016.3.0."
saltstack/salt,https://github.com/saltstack/salt/issues/33972,saltstack_salt_issues_33972,"2016.3.1 breaks diskusage beacon

The disk usage beacon is working on a Windows minion (no errors and events are fired) but doesn't seem to be working on a Debian minion (I've not tested any other platforms). To re-create the problem: /srv/pillar/top.sls <pre>base: 'linuxminion': - beacons</pre> /srv/pillar/beacons.sls <pre>beacons: diskusage: - interval: 60 - /: 5%</pre> (I've also tried quoting the forward slash) `salt linuxminion saltutil.refresh_pillar` (I've also tried restarting the minion process) <pre>2016-06-13 14:08:43,808 [salt.beacons ][TRACE ][11953] Beacon processing: diskusage 2016-06-13 14:08:43,809 [salt.utils.lazy ][DEBUG ][11953] LazyLoaded diskusage.beacon 2016-06-13 14:08:43,810 [salt.beacons ][DEBUG ][11953] Unable to process beacon diskusage 2016-06-13 14:08:44,807 [salt.beacons ][TRACE ][11953] Beacon processing: diskusage 2016-06-13 14:08:44,808 [salt.utils.lazy ][DEBUG ][11953] LazyLoaded diskusage.beacon 2016-06-13 14:08:44,809 [salt.beacons ][DEBUG ][11953] Unable to process beacon diskusage 2016-06-13 14:08:45,807 [salt.beacons ][TRACE ][11953] Beacon processing: diskusage 2016-06-13 14:08:45,808 [salt.utils.lazy ][DEBUG ][11953] LazyLoaded diskusage.beacon 2016-06-13 14:08:45,809 [salt.beacons ][DEBUG ][11953] Unable to process beacon diskusage 2016-06-13 14:08:46,808 [salt.beacons ][TRACE ][11953] Beacon processing: diskusage 2016-06-13 14:08:46,809 [salt.utils.lazy ][DEBUG ][11953] LazyLoaded diskusage.beacon 2016-06-13 14:08:46,810 [salt.beacons ][DEBUG ][11953] Unable to process beacon diskusage 2016-06-13 14:08:47,808 [salt.beacons ][TRACE ][11953] Beacon processing: diskusage 2016-06-13 14:08:47,809 [salt.utils.lazy ][DEBUG ][11953] LazyLoaded diskusage.beacon 2016-06-13 14:08:47,810 [salt.beacons ][DEBUG ][11953] Unable to process beacon diskusage 2016-06-13 14:08:48,808 [salt.beacons ][TRACE ][11953] Beacon processing: diskusage 2016-06-13 14:08:48,808 [salt.utils.lazy ][DEBUG ][11953] LazyLoaded diskusage.beacon 2016-06-13 14:08:48,809 [salt.beacons ][DEBUG ][11953] Unable to process beacon diskusage</pre> Tested on 2016.3.0",What version of debian are you seeing this on? 7 or 8? ,"@Ch3LL Thanks for looking at this. I tried it on 7 and 8, but only checked the logs on 8."
saltstack/salt,https://github.com/saltstack/salt/issues/38756,saltstack_salt_issues_38756,"Windows: Installer fails to set disk permissions when minion is running during upgrade

It appears that doing a minion upgrade whilst the service is running leaves the minion installation with default disk permissions. This has been the case with every installation that I've checked after upgrade. Upgrading with the service stopped: <pre>Salt-Minion-2016.11.0-AMD64-Setup.exe /S /master=mymaster /minion-name=myname /start-minion=0 Salt-Minion-2016.11.1-AMD64-Setup.exe /S /master=mymaster /minion-name=myname /start-minion=0 icacls C:\salt C:\salt NT AUTHORITY\SYSTEM:(OI)(CI)(F) BUILTIN\Administrators:(OI)(CI)(F)</pre> Upgrading with the service running: <pre>Salt-Minion-2016.11.0-AMD64-Setup.exe /S /master=mymaster /minion-name=myname /start-minion=1 Salt-Minion-2016.11.1-AMD64-Setup.exe /S /master=mymaster /minion-name=myname /start-minion=1 icacls C:\salt C:\salt BUILTIN\Administrators:(F) BUILTIN\Administrators:(OI)(CI)(IO)(F) NT AUTHORITY\SYSTEM:(F) NT AUTHORITY\SYSTEM:(OI)(CI)(IO)(F) OWNER RIGHTS:(F) OWNER RIGHTS:(OI)(CI)(IO)(F) BUILTIN\Users:(RX) BUILTIN\Users:(OI)(CI)(IO)(GR,GE)</pre> Luckily the pki folder still has inheritance disabled: <pre>icacls C:\salt\conf\pki\minion C:\salt\conf\pki\minion BUILTIN\Administrators:(F) BUILTIN\Administrators:(OI)(CI)(IO)(F) NT AUTHORITY\SYSTEM:(F) NT AUTHORITY\SYSTEM:(OI)(CI)(IO)(F) OWNER RIGHTS:(F) OWNER RIGHTS:(OI)(CI)(IO)(F)</pre>","Do you agree, that keeping the configuration *on uninstall* should be the default?","@twangboy Thanks for clarifying, I presumed the permissions weren't getting set as any user could read the log files and cache content."
saltstack/salt,https://github.com/saltstack/salt/issues/39110,saltstack_salt_issues_39110,"archive.extracted: 2016.11.2 returns state failure for some zip formats, if already extracted

This is probably Windows specific and related to changes here: https://github.com/saltstack/salt/commit/d6adfb6d126831cc47ffeee167b8900b079516c6 Depending on the internal format of the zip file, the archive.extracted state may return a failure, implying that content which is already extracted is the wrong type. <pre># cat testing.sls 7zip_test: archive.extracted: - name: C:\made_in_7zip - source: salt://archive_7zip.zip - source_hash: md5=3a6b51aa96d73409bc919e343ba7e61b - archive_format: zip - enforce_toplevel: False explorer_test: archive.extracted: - name: C:\made_in_explorer - source: salt://archive_explorer.zip - source_hash: md5=c73fb61cf82eb726c96e54bf845bec90 - archive_format: zip - enforce_toplevel: False</pre> There is no problem applying when the archive hasn't been extracted yet: <pre># salt salt-test state.apply testing salt-test: ---------- ID: 7zip_test Function: archive.extracted Name: C:\made_in_7zip Result: True Comment: salt://archive_7zip.zip extracted to C:\made_in_7zip\ Started: 16:03:43.771000 Duration: 359.0 ms Changes: ---------- directories_created: - C:\made_in_7zip\ extracted_files: - New folder/ - New folder/New Text Document.txt - New Text Document.txt ---------- ID: explorer_test Function: archive.extracted Name: C:\made_in_explorer Result: True Comment: salt://archive_explorer.zip extracted to C:\made_in_explorer\ Started: 16:03:44.130000 Duration: 281.0 ms Changes: ---------- directories_created: - C:\made_in_explorer\ extracted_files: - New folder/New Text Document.txt - New Text Document.txt</pre> ...but note the list of extracted files differs between the two. Applying it a second time returns a failure for the first zip file, but not the second: <pre># salt salt-test state.apply testing salt-test: ---------- ID: 7zip_test Function: archive.extracted Name: C:\made_in_7zip Result: False Comment: The below paths (relative to C:\made_in_7zip\) exist, but are the incorrect type (file instead of directory, symlink instead of file, etc.). To proceed with extraction, set 'force' to True. Note that this will remove these paths before extracting. - New folder/ Started: 16:03:52.679000 Duration: 359.0 ms Changes: ---------- ID: explorer_test Function: archive.extracted Name: C:\made_in_explorer Result: True Comment: All files in archive are already present Started: 16:03:53.038000 Duration: 249.0 ms Changes:</pre> You can see the difference with zipinfo. The extracted contents are identical, but the internal structure is different between the two. <pre># zipinfo archive_7zip.zip Archive: archive_7zip.zip Zip file size: 486 bytes, number of entries: 3 drwx--- 6.3 fat 0 bx stor 17-Feb-01 15:51 New folder/ -rw-a-- 6.3 fat 0 bx stor 17-Feb-01 15:51 New folder/New Text Document.txt -rw-a-- 6.3 fat 0 bx stor 17-Feb-01 15:51 New Text Document.txt 3 files, 0 bytes uncompressed, 0 bytes compressed: 0.0% # zipinfo archive_explorer.zip Archive: archive_explorer.zip Zip file size: 280 bytes, number of entries: 2 -rw-a-- 2.0 fat 0 b- stor 17-Feb-01 15:51 New folder/New Text Document.txt -rw-a-- 2.0 fat 0 b- stor 17-Feb-01 15:51 New Text Document.txt 2 files, 0 bytes uncompressed, 0 bytes compressed: 0.0%</pre> Modifying to add the force option returns a different error, but I imagine the underlying issue is the same: <pre># cat testing.sls 7zip_test: archive.extracted: - name: C:\made_in_7zip - source: salt://archive_7zip.zip - source_hash: md5=3a6b51aa96d73409bc919e343ba7e61b - archive_format: zip - enforce_toplevel: False - force: True</pre> <pre># salt salt-test state.apply testing salt-test: ---------- ID: 7zip_test Function: archive.extracted Name: C:\made_in_7zip Result: False Comment: One or more paths existed by were the incorrect type (i.e. file instead of directory or vice-versa), but could not be removed. The following errors were observed: - [Error 5] Access is denied: 'C:\\made_in_7zip\\New folder/' Started: 16:19:13.018000 Duration: 110.0 ms Changes:</pre> This problem is new to 2016.11.2 (did not exist in 2016.11.1).","Did you create the ZIP file on a Windows box, or another platform? Was it created using the CLI or the GUI? What version of 7-zip?","Created on Windows, using the shell extension. - Make a directory - Make a file in the directory - Make a file alongside the directory - Select the directory and file and right-click to get the context menu - Choose to add to a new zip file from the 7zip options on the menu I just double checked and it was 7zip version 15.14, I also upgraded to the newest version 16.04 with the same result in the dictionary output."
saltstack/salt,https://github.com/saltstack/salt/issues/39243,saltstack_salt_issues_39243,"win_system.reboot: can return True without rebooting

According to module documentation the reboot function returns True if successful, but doesn't say what success is meant to represent. I presumed that success should match whether it will be rebooting but when setting `only_on_pending_reboot: True` it will return True even if it doesn't reboot. The behaviour is confirmed by checking the code in the module: <pre>if only_on_pending_reboot and not get_pending_reboot(): return True</pre> This makes it impossible to use the module output as dependency, so you can't fail a subsequent state to gracefully handle the reboot. i.e. this can failhard when a reboot isn't occurring: <pre>reboot_check: module.run: - name: system.reboot - only_on_pending_reboot: True - onchanges: - dism: install_a_package_that_might_need_a_reboot failhard_for_reboot: test.fail_without_changes: - failhard: True - onchanges: - module: reboot_check</pre> If this is a bug (success is meant to represent a reboot) I'd like to flip the return value to False: <pre>if only_on_pending_reboot and not get_pending_reboot(): return False</pre> If it's by design then would it be okay to add an extra parameter, something like return_reboot=False, to optionally make success represent a reboot? Steps to reproduce: <pre># salt salt-test system.get_pending_reboot salt-test: False # salt salt-test system.reboot only_on_pending_reboot=True salt-test: True</pre> Tested on 2016.11.2",Do you know the intended return value and behavior?,"I've tried a few ways of working around it and haven't found a good way. I follow your logic, but True might be rebooting the machine or True might not rebooting the machine, so success from the state isn't useful (if you do something based on the success, you might get a reboot in the middle of it). Just thinking of the module itself, outside of any states: <pre>salt salt-test system.reboot only_on_pending_reboot=True salt-test: True</pre> ... you can't tell whether that is rebooting it or not, so currently True doesn't have much value."
saltstack/salt,https://github.com/saltstack/salt/issues/39469,saltstack_salt_issues_39469,"win_system.reboot: wait_for_reboot limited by minion retry timer

### Description of Issue/Question I've been seeing some inconsistency when `wait_for_reboot: True` is used with the reboot function of the win_system execution module. Initially I thought that the sleep wasn't long enough to cover component based serving on shutdown, but it looks like the function throws an exception because of the shutdown signal. <pre>2017-02-16 21:56:53,621 [salt.state ][INFO ][2908] Running state [system.reboot] at time 21:56:53.621000 2017-02-16 21:56:53,635 [salt.state ][INFO ][2908] Executing state module.run for system.reboot --- 2017-02-16 21:56:57,721 [salt.minion ][INFO ][1500] Creating minion process manager 2017-02-16 21:56:57,753 [salt.minion ][INFO ][1500] Starting a new job with PID 1500 2017-02-16 21:56:57,769 [salt.utils.lazy ][DEBUG ][1500] LazyLoaded saltutil.find_job 2017-02-16 21:56:57,769 [salt.utils.lazy ][DEBUG ][1500] LazyLoaded direct_call.get 2017-02-16 21:56:57,769 [salt.minion ][DEBUG ][1500] Minion return retry timer set to 8 seconds (randomized) --- 2017-02-16 21:57:05,818 [salt.minion ][INFO ][1704] User root Executing command saltutil.find_job with jid 20170216215614216925 2017-02-16 21:57:05,818 [salt.minion ][DEBUG ][1704] Command details {'tgt_type': 'list', 'jid': '20170216215614216925', 'tgt': ['salt-test'], 'ret': '', 'user': 'root', 'arg': ['20170216215306875641'], 'fun': 'saltutil.find_job'} 2017-02-16 21:57:06,769 [salt.state ][ERROR ][2908] Module function system.reboot threw an exception. Exception: [Errno 4] Interrupted function ---</pre> Replacing the sleep function with a long running process also exhibits the same issue. In my case (because updates have been applied) the 8 seconds was short enough that the system is still shutting down and the next state function starts to run: <pre>2017-02-16 21:57:06,769 [salt.state ][INFO ][2908] Completed state [system.reboot] at time 21:57:06.769000 duration_in_ms=13148.0 2017-02-16 21:57:06,769 [salt.utils.lazy ][DEBUG ][2908] LazyLoaded file.recurse 2017-02-16 21:57:06,769 [salt.state ][INFO ][2908] Running state [C:\Updates\IE-Win7] at time 21:57:06.769000 2017-02-16 21:57:06,769 [salt.state ][INFO ][2908] Executing state file.recurse for C:\Updates\IE-Win7 2017-02-16 21:57:07,142 [salt.utils.parsers][WARNING ][1704] Minion received a SIGINT. Exiting. 2017-02-16 21:57:07,142 [salt.cli.daemons ][INFO ][1704] Shutting down the Salt Minion</pre> ### Steps to Reproduce Issue This is probably tricky to reproduce, but I imagine any time updates are installed or the disk is slow on shutdown, the state run may continue because the minion service is still running. It looks like it may not affect Python 3. [https://www.python.org/dev/peps/pep-0475/](https://www.python.org/dev/peps/pep-0475/) ### Versions Report Tested on 2016.11.2",Would you share a small snippet of that to help attempt to replicate this?,"@Ch3LL thanks for looking. <pre>install_security_rollup: dism.package_installed: - name: 'C:\path\to\file.cab' # this should sleep for 35 seconds reboot_after_update: module.run: - name: system.reboot - timeout: 5 - in_seconds: True - wait_for_reboot: True - only_on_pending_reboot: True # only do something else if not rebooting do_something_else: ...</pre> There are win_system state functions in develop that will work around this, but I imagine they aren't going to get backported to the stable branches as they are brand new. Basically, I'm only calling the execution module because the state functions aren't available yet, but wasn't expecting to encounter the timing problems."
saltstack/salt,https://github.com/saltstack/salt/issues/52387,saltstack_salt_issues_52387," win_wua: uptodate fails with KeyError

### Description of Issue/Question I've not tried to use this before, so I'm not sure if this is specifically related to using `uptodate` or whether it can also happen with individual updates, but the installation process causes an unhandled KeyError. ### Setup <pre># cat updatetest.sls update_system: wua.uptodate: - skip_reboot: False</pre> ### Steps to Reproduce Issue <pre># salt salt-test state.apply updatetest test=True --timeout=30 salt-test: ---------- ID: update_system Function: wua.uptodate Result: None Comment: Updates will be installed: e47de1ba-26bc-40a4-88d7-849d03ed0be2: 2019-02 Cumulative Update for .NET Framework 3.5 and 4.7.2 for Windows 10 Version 1809 for x64 (KB4483452) cd50fb41-6418-490b-a685-869004e02656: 2019-02 Cumulative Update for .NET Framework 3.5 and 4.7.2 for Windows 10 Version 1809 for x64 (KB4486553) 7c087cb2-e64e-4219-bd54-5b6a328b8cc1: Windows Malicious Software Removal Tool x64 - March 2019 (KB890830) bb071b97-fe31-42ec-badb-77e782f88bba: 2019-03 Security Update for Adobe Flash Player for Windows 10 Version 1809 for x64-based Systems (KB4489907) b0e02433-34e0-477d-830b-88366785595f: 2019-03 Cumulative Update for Windows 10 Version 1809 for x64-based Systems (KB4489899) Started: 12:43:38.357000 Duration: 4672.0 ms Changes: Summary for salt-test ------------ Succeeded: 1 (unchanged=1) Failed: 0 ------------ Total states run: 1 Total run time: 4.672 s # salt salt-test state.apply updatetest --timeout=30 salt-test: ---------- ID: update_system Function: wua.uptodate Result: False Comment: An exception occurred in this state: Traceback (most recent call last): File ""c:\salt\bin\lib\site-packages\salt\state.py"", line 1933, in call **cdata['kwargs']) File ""c:\salt\bin\lib\site-packages\salt\loader.py"", line 1939, in wrapper return f(*args, **kwargs) File ""c:\salt\bin\lib\site-packages\salt\states\win_wua.py"", line 486, in uptodate if not salt.utils.data.is_true(post_info[item]['Installed']): KeyError: u'e47de1ba-26bc-40a4-88d7-849d03ed0be2' Started: 12:44:07.215000 Duration: 823243.0 ms Changes: Summary for salt-test ------------ Succeeded: 0 Failed: 1 ------------ Total states run: 1 Total run time: 823.243 s ERROR: Minions returned with non-zero exit code</pre> ### Versions Report <pre># salt --versions-report Salt Version: Salt: 2019.2.0 Dependency Versions: cffi: 0.8.6 cherrypy: Not Installed dateutil: 2.2 docker-py: Not Installed gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.9.4 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.2 mysql-python: 1.2.3 pycparser: 2.10 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.9 (default, Sep 25 2018, 20:42:16) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.4.0 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: debian 8.11 locale: UTF-8 machine: x86_64 release: 3.16.0-7-amd64 system: Linux version: debian 8.11</pre>",Can you run a `test.versions`?,"It is likely update specific and order specific: - I've installing the two .NET updates using win_wua.get, and then applied the uptodate state, and didn't get the same problem - I've applied the uptodate state twice in a row and didn't get the problem on the second try ...so there seems to be a logic problem in the way installation results are processed. <pre># salt salt-test test.versions salt-test: Salt Version: Salt: 2019.2.0 Dependency Versions: cffi: 1.11.5 cherrypy: 17.4.1 dateutil: 2.7.5 docker-py: Not Installed gitdb: 2.0.5 gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10 libgit2: Not Installed libnacl: 1.6.1 M2Crypto: Not Installed Mako: 1.0.7 msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: 2.19 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.15 (v2.7.15:ca079a3ea3, Apr 30 2018, 16:30:26) [MSC v.1500 64 bit (AMD64)] python-gnupg: 0.4.3 PyYAML: 3.13 PyZMQ: 17.1.2 RAET: Not Installed smmap: 2.0.5 timelib: 0.2.4 Tornado: 4.5.3 ZMQ: 4.2.5 System Versions: dist: locale: cp1252 machine: AMD64 release: 2019 system: Windows version: 2019 10.0.17763 Multiprocessor Free</pre>"
saltstack/salt,https://github.com/saltstack/salt/issues/32946,saltstack_salt_issues_32946,"salt-cloud vmware: Creating a VM from template does not connect NIC

### Description of Issue/Question This is possibly related to https://github.com/saltstack/salt/issues/23270. We have the same error, but with a SLES 12 template. Our setup works for a bunch of other VMs including - Debian 7/8 - Ubuntu 12.04/14.04/16.04 - CentOS 5/6/7 - even SLES 11.4 However, the checkbox ""Connect at power on"" is not checked in the cloned machine, even if it is checked in the template. We also already tried to replace vmxnet3 with e1000 network driver. ### Versions Report  (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",Does the IP Address of the VM show in the vSphere Web Client?,"@nmadhok here are some debug informations from the build:  - After the VM is build, we need to connect the NIC manually to set up an IP. - If we do this manual connect fast enough, salt-cloud also can configure the IP. - After manually connecting the NIC, the IP shows up in Web Client."
saltstack/salt,https://github.com/saltstack/salt/issues/32948,saltstack_salt_issues_32948,"Simplified bootstrap: curl salt.run | bash

### Description of Issue/Question I bought the domain `salt.run` so you can install salt this way:  It's much shorter and doesn't redirect so that you don't need any flags with `curl`, which makes it look a bit cleaner imho. I'll be happy to turn the domain over to you, or I can leave it running on my server. I won't be buying a cert, since we don't run our salt installs in environments where MITM is possible.",How do you have it configured on your server?,Here's the salt.run config: 
saltstack/salt,https://github.com/saltstack/salt/issues/33033,saltstack_salt_issues_33033,"'dockerng' __virtual__ returned False: Docker module could not get imported

### Description of Issue/Question Unable to load dockerng in ### Setup  ### Versions Report Salt Version: Salt: 2016.3.0-462-gfefb279 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.3 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.8 (default, Sep 24 2015, 18:26:19) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.3.1 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.3 ZMQ: 3.2.5 System Versions: dist: fedora 21 Twenty One machine: x86_64 release: 4.1.12-101.fc21.x86_64 system: Linux version: Fedora 21 Twenty One","What happens when you run `salt docker-minion cmd.run 'python -c ""import docker ; import docker.utils""'`?","Thanks. I created PR #33051 to document the problem. I didn't quite understand which docker module could not get imported. You need to `pip install docker-py`. I added a message for when the version is out of date, because again, it's not clear which ""docker module"" is out of date. (Also, capitalizing ""Docker"" in the error message doesn't make sense to me either, because Python is case sensitive, and talking about ""Docker"" implies the ""Docker system"", not a specific python api. I didn't change this, because it should be consistent throughout the module.) IMO, `salt-bootstrap` should have a list of optional modules to install. `salt --versions-report` should list all possible modules. As written, this will be difficult, because the modules/states cannot export such metadata. This would be a useful feature for module writers and users."
saltstack/salt,https://github.com/saltstack/salt/issues/33073,saltstack_salt_issues_33073,"TypeError: unhashable type: 'dict'

### Description of Issue/Question This might be an issue between salt-master on Fedora 21 and salt-minion on Fedora 23. Happens with state.apply but also test.ping: ","Can we see the grains on that minion? You don't have something like the reserved word `dict` as a value in those grains, do you?",Nothing to do with the grains. It's improperly escaped YAML. Create a pillar file as follows:  Seems like this should be caught at the YAML level.
saltstack/salt,https://github.com/saltstack/salt/issues/33110,saltstack_salt_issues_33110,"salt.state ERROR: The following packages failed to install/update: openssl>=0.9.8e-39

### Description of Issue/Question I followed the instructions to configure and limit the minimum version of package `openssl`, but I got an error when `state.sls` it: ### Setup openssl.sls: ",Does changing the versions help in this situation?,"@Ch3LL Thank you for your reply. In fact, I do not know the exact version of package `openssl` (which is one case in my work). Otherwise, I could use parameter `version`:  What I'm quite sure about is that the version of the package should greater than `0.9.8e-39` under `CentOS-5`. So, I turned to parameter `pkgs` which is said that it can limit the lowest versions of packages. Am I misunderstanding?"
saltstack/salt,https://github.com/saltstack/salt/issues/35404,saltstack_salt_issues_35404,"salt-minion invoked oom-killer

Had an issue today with oom-killer being invoked. Here are relevant logs and version info. First time it has happened on this box. ",Can you please upgrade to 2016.3.1 or 2016.3.2 and see if you have the same behavior?,Ok I'll see if that's something we are able to do.
saltstack/salt,https://github.com/saltstack/salt/issues/42749,saltstack_salt_issues_42749,"'Minion' object5 has to attribute 'schedule'. Failed to add job to schedule.

### After upgrading salt-master and salt-minion to 2017.7.0-1, seeing the following error appear sporadically:  Version info: Salt Version: Salt: 2017.7.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.1 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.10 (default, Jul 20 2016, 20:53:27) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: locale: UTF-8 machine: x86_64 release: 4.4.16-27.56.amzn1.x86_64 system: Linux version: Not Installed",Does the job get successfully added to the minion(s) where you see this error?,"It happens about once or twice a day on each of our salt masters. The git-pull is one of the salt-master's own states, so this is for the highstate of the master itself. But, following a suggestion I found elsewhere online, I deleted all the .pyc files under /usr/lib/python2.7/site-packages/salt/ (first stopping the salt-minion and salt-master services) with the theory that there were stale.pyc files left around from before the upgrade. I did this yesterday afternoon and have not seen a recurrence of the error. I'll keep an eye on it over the next few days."
saltstack/salt,https://github.com/saltstack/salt/issues/43150,saltstack_salt_issues_43150,"raid.present does not funtion properly

raid.present on md127 devices does not issue the correct mdadm commands to determine whether the raid exists and is active. This is on salt-2017.7.01 A simple state file like this: ",can you verify by running: `salt 'minion' raid.list` and posting a sanitized version here?,"@Ch3LL Hi Megan, here's the output you request:  Perhaps `raid.list` should follow symbolic links to their source and then check to see if it matches the array name given in the state file? Just a suggestion."
saltstack/salt,https://github.com/saltstack/salt/issues/43157,saltstack_salt_issues_43157,"pkg.latest and rpm version numbers - what are the requirements?

We have a custom rpm package where an older version looks like nagios-client-1.1.03-0.1500498524.x86_64 and the latest version looks like nagios-client-1.1.03.07-0.1503344684.x86_64 You see the difference is that the latest has an additional version number appended. pkg.latest refuses to update it, saying that the host, which has the older package installed, is ""already on the latest version"". It appears salt only looks at the first three digits x.x.x. Is that true? Is that the expected behavior?",can you paste the output of `salt --versions-report`?,Here you go Megan: 
saltstack/salt,https://github.com/saltstack/salt/issues/33194,saltstack_salt_issues_33194,"salt-cloud: EC2 userdata template error

### Description of Issue/Question When I try to launch instance using EC2 userdata template with this #32698 change, error occurred.  Hints? Thanks in advance.",Do you still see this behavior at the head of 2016.3?,@Ch3LL I can reproduce it on develop branch. 
saltstack/salt,https://github.com/saltstack/salt/issues/46564,saltstack_salt_issues_46564,"Lazy Load for mssql doesn't appear to be working.

### Description of Issue/Question Executing mssql.version in a formula appears to not work. If I execute from the command line with salt-call --local mssql.version and pass in the arguments it works fine. ### Setup ","Can you run `python -c `import pymssql; print(pymssql.__file__)`? Also, how did you install that module? Thanks, Daniel",I assume you mean `__file__`  Edit: I installed the module from OS installed (it's in dist)
saltstack/salt,https://github.com/saltstack/salt/issues/33257,saltstack_salt_issues_33257,"minion can not be connectted after minion restart a few minutes later

### Description of Issue/Question Minion can not work after it is being restartted a few minutes later. But when I restart the minion,everything is right,and master can connect to the minion,after about 20 minutes later,master get the message of [Minion did not return. [No response]] when with the commond of [test.ping],and the debug log in the minion also is unusual. ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) minion log ",Do you possibly have some network latency issues or firewalls that could be causing timeout errors? also is your minion version 2015.5.0 as well?,thanks for you replay. I found the problem which is a problem in our devices not concern to saltstack.
saltstack/salt,https://github.com/saltstack/salt/issues/56877,saltstack_salt_issues_56877,"[BUG] sqlite test doesn't report changes in a row

**Description** When dry-run a sqlite state (test=true) it doesn't report changes in a row. However a normal run does a effective change. **Setup**  </details>",Would you be willing to submit a PR?,I can try that. It can take up to two weeks before I can start with this.
saltstack/salt,https://github.com/saltstack/salt/issues/33335,saltstack_salt_issues_33335,"Highstate running multiple times on Windows servers

### Highstate running multiple times on Windows servers ### Steps to Reproduce Issue 1) Kick off scheduled task that highstates machine 2) From command line run salt-call state.highstate NOTE: Multiple Highstates run whether logged in as same user or not ### Versions Report v 2015.5.2 There is a scheduled task that runs highstate every 2 hours. The highstate also runs on reboot. Problem occurs when a user logs on and manually runs the highstate after box has been rebooted or during the scheduled task execution. This causes 2 (or more) highstates to run simultaneously. We have had multiple installation failures because of this. I need a way to prevent multiple highstates from running concurrently. I am under the impression that this is supposed to be default behavior....it is on Linux at least. This has happened multiple times now and I am hoping that there is a safety to prevent the highstate from running again when it is already running on the server.",Can you confirm this behavior?,Is there an open bug we can track?
saltstack/salt,https://github.com/saltstack/salt/issues/33702,saltstack_salt_issues_33702,"BadRequest: Multiple possible networks found, use a Network ID to be more specific

Hello: i use salt 'openstack' nova.boot salt_create1 flavor_id=2 image_id=537292cb-9310-406a-9589-7fb13e26599c profile=openstack to create vm on my openstack,but there are some error like that: ",Do we just need to add the ability to specify net-id with the nova module?,"@gtmanfred Yes,i have read this doc,but it does not tell me which node to set the conf,the salt-master or the minion node ? thx"
saltstack/salt,https://github.com/saltstack/salt/issues/33430,saltstack_salt_issues_33430,"Manjaro is detected as ManjaroLinux (needs to be changed in Salt)

It seems like the Developers of Manjaro changed the OS name to ""ManjaroLinux"" which now is the value of the os grain. So it has to be changed in Salt from ""Manjaro"" to ""ManjaroLinux"" to detect the correct package manager, etc. So far in the core.py file there is only ""Manjaro"" listed and therefore Salt does not detect the correct package manager.",What version of salt are you seeing this on? Looks like the fix is in 2015.8.9/10 and will be coming out with 2015.5.11 and 2016.3.0.,@Ch3LL This would explain why it's not working on my installation since the version from the repo currently is 2015.8.8. Thanks for the clarification! :+1:
saltstack/salt,https://github.com/saltstack/salt/issues/33437,saltstack_salt_issues_33437,"Merging pillars when one is empty gives empty result

### Description of Issue/Question I'm trying to merge pillar data, as suggested in https://github.com/saltstack/salt/issues/28394#issuecomment-158659657 . However, if the data I try to merge in happens to be empty (as a result of template rendering), the end result is completely empty, ignoring any previous data. ### Setup pillar/top.sls: ",What does your master config look like? Also is there anything useful in the debug logs?,"I checked out 2016.3.0-589-gdd10fdc from Git and ran it on `saltmaster`, both as server and client. I still end up with an empty result. I can't seem to find any debug logs relating to template rendering. Running commands with `salt -l debug` gives lots of details about network communication but nothing at all about what actually goes on internally. My master configuration does not contain anything particularly exotic:  and see what results you get?"
saltstack/salt,https://github.com/saltstack/salt/issues/33470,saltstack_salt_issues_33470,"An un-handled exception was caught by salt's global exception handler: ImportError: No module named ssl_match_hostname`

### Description of Issue/Question salt-ssh failed to run with the below error:  Here is the complete error message: ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) I have not started the configuration yet as getting this error in the very beginning state. But in the system all required packages are already installed and in python prompt I am able to import the modules too: ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) 1. Install the above version of salt on Ubuntu 14.04 LTS 2. Add content into salt roster file 3. Restart the salt-master service 4. Run the below salt-ssh command: But running it in raw mode is working. For example: ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",What are the salt-ssh target OSs?,"@Ch3LL, Thanks for looking into it. Please find the requested info below: 1. Salt-Master is: Ubuntu 14.04.4 LTS [salt-ssh is running from here] 2. Target systems are: RHEL6.7 & CentOS6.7 3. Installed the following salt packages in salt-master: `salt-master 2015.8.10+ds-1 || salt-ssh 2015.8.10+ds-1` I have also tried using salt-master & salt-ssh on CentOS 6 but getting the same issue. Do we need any specific package on the target system ?? In my case the target systems will be mostly RHEL 5/6/7 & CentOS 5/6/7 ."
saltstack/salt,https://github.com/saltstack/salt/issues/33573,saltstack_salt_issues_33573,"git.latest not fetching before switching revision

When switching git.latest to a revision not already present locally, I get ",Does setting that option help?,"Currently we are not setting the `update_head` option, the default of `True` is in line with the expected behavior which is for the code in the git repository to be updated to the specified `rev`. From what the docs say it seems that setting it to `False` does `fetch` only instead of `fetch` and `checkout` which is the default?"
saltstack/salt,https://github.com/saltstack/salt/issues/33578,saltstack_salt_issues_33578,"2016.3.0 FreeBSD Failed to load grains defined in grain file disks.disks in function <function disks at 0x80cff9320>, error:

### Description of Issue/Question The following error message is spamming my master log  ### Setup happens existing and/or on fresh master without SLS files ### Steps to Reproduce Issue run salt-master on FreeBSD ### Versions Report salt --versions-report Salt Version: Salt: 2016.3.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.5.0 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.7 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.11 (default, May 9 2016, 20:02:36) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.3 ZMQ: 4.1.4 System Versions: dist: machine: amd64 release: 10.3-RELEASE-p3 system: FreeBSD version: Not Installed",Did you upgrade from a previous version? How did you install salt? Any other information that might help to replicate?,"Sure, that's from one of my masters/syndic systems # geom disk list Geom name: cd0 Providers: 1. Name: cd0 Mediasize: 0 (0B) Sectorsize: 2048 Mode: r0w0e0 descr: NECVMWar VMware IDE CDR10 ident: (null) rotationrate: unknown fwsectors: 0 fwheads: 0 Geom name: da0 Providers: 1. Name: da0 Mediasize: 8589934592 (8.0G) Sectorsize: 512 Mode: r5w5e14 descr: VMware Virtual disk ident: (null) rotationrate: unknown fwsectors: 63 fwheads: 255 # geom disk list (on a bare metal master in a remote office) Geom name: cd0 Providers: 1. Name: cd0 Mediasize: 0 (0B) Sectorsize: 2048 Mode: r0w0e0 descr: JLMS DVD-ROM LTD-166S ident: (null) rotationrate: unknown fwsectors: 0 fwheads: 0 Geom name: ada0 Providers: 1. Name: ada0 Mediasize: 128035676160 (119G) Sectorsize: 512 Stripesize: 4096 Stripeoffset: 0 Mode: r5w5e14 descr: Samsung SSD 840 PRO Series lunid: 50025385a01e580c ident: S1ANNSAF241659N rotationrate: 0 fwsectors: 63 fwheads: 16 Geom name: ada1 Providers: 1. Name: ada1 Mediasize: 2000398934016 (1.8T) Sectorsize: 512 Stripesize: 4096 Stripeoffset: 0 Mode: r1w1e1 descr: WDC WD2003FZEX-00Z4SA0 lunid: 50014ee004070466 ident: WD-WMC1P0F03969 rotationrate: 7200 fwsectors: 63 fwheads: 16 Geom name: ada2 Providers: 1. Name: ada2 Mediasize: 2000398934016 (1.8T) Sectorsize: 512 Stripesize: 4096 Stripeoffset: 0 Mode: r1w1e1 descr: WDC WD2002FAEX-007BA0 lunid: 50014ee65633b408 ident: WD-WMAY01073054 rotationrate: unknown fwsectors: 63 fwheads: 16"
saltstack/salt,https://github.com/saltstack/salt/issues/43755,saltstack_salt_issues_43755,"service.running not evaluated properly on centOS7 in certain conditions

### Description of Issue/Question ### Setup we have two simple formulas, an etcd and a journald formula [formulas.tar.gz](https://github.com/saltstack/salt/files/1334562/formulas.tar.gz) when we run `salt-call state.sls journald,etcd` we get this. ","Can you provide me with the states so that I can replicate this issue? Thanks, Daniel",they are attached look for the link: formulas.tar.gz
saltstack/salt,https://github.com/saltstack/salt/issues/40028,saltstack_salt_issues_40028,"[NEW FEATURE REQUEST]Master capable to ignore down minion

### Description of Issue/Question in the previous version when selecting using grains, any down minion would be ignore. However since updating to 2016.11.3 this is no longer the case! This partially bad as on EC2 we have instance that are down (by purpose). ### Setup Ubuntu 14.04 both master and minion running 2016.11.3 salt-minion --versions Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.5.3 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 4.4.0-66-generic system: Linux salt-master --versions Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.5.3 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 4.4.0-66-generic system: Linux version: Ubuntu 14.04 trusty ### Steps to Reproduce Issue Im using the EC2 tag grain and do a salt -G ""ec2_tags:Name:momo*"" cmd.run ""do something"" there are 4 server with tags momo : so momo1 -> momo4 momo4 is down salt -G ""ec2_tags:Name:momo*"" cmd.run ""ls -l "" momo1: total 0 momo2: total 0 momo3: total 0: momo4: <------ is down but has the tag momo Minion did not return. [No response] other-minion: <----- is down bit does NOT have the tag momo! Minion did not return. [No response] imagine having couple hundred servers! and on top we capture return code, which now is 1 instead of 0 ! Stop master, clear cache, start master, no effect ### Versions Report see above","Would you mind updating the title to better describe the feature you are requesting? Thanks, Daniel","Done, thanks"
saltstack/salt,https://github.com/saltstack/salt/issues/33926,saltstack_salt_issues_33926,"Windows installer not silent with /S

### Description of Issue/Question Installer does not do silent install ### Setup Salt-Minion-2016.3.0-AMD64-Setup.exe /S /master=***********\* /minion-name=**\* /start-service=1 the gui installer show up also there is no option to set the installation folder, witch can be really annoying on some production environements ### Steps to Reproduce Issue steps : https://docs.saltstack.com/en/latest/topics/installation/windows.html ### Versions Report ...",What windows OS are you attempting this on?,windows 7 (64)
saltstack/salt,https://github.com/saltstack/salt/issues/33927,saltstack_salt_issues_33927,"Salt - windows minion cannot do anything

### Description of Issue/Question all salt interaction bring this errors on windows 7 (64) let me know what info you need to investigate this C:\salt>salt-minion restart [INFO ] Setting up the Salt Minion ""phil"" [ERROR ] An un-handled exception was caught by salt's global exception handler: AttributeError: 'module' object has no attribute 'getppid' Traceback (most recent call last): File ""C:\salt\bin\Scripts\salt-minion"", line 26, in <module> salt_minion() File ""C:\salt\bin\lib\site-packages\salt\scripts.py"", line 112, in salt_minion minion.start() File ""C:\salt\bin\lib\site-packages\salt\cli\daemons.py"", line 344, in start super(Minion, self).start() File ""C:\salt\bin\lib\site-packages\salt\utils\parsers.py"", line 932, in start self.prepare() File ""C:\salt\bin\lib\site-packages\salt\cli\daemons.py"", line 307, in prepare if self.check_running(): File ""C:\salt\bin\lib\site-packages\salt\utils\parsers.py"", line 915, in check_running if self.check_pidfile() and self.is_daemonized(pid) and not os.getppid() == pid: AttributeError: 'module' object has no attribute 'getppid' Traceback (most recent call last): File ""C:\salt\bin\Scripts\salt-minion"", line 26, in <module> salt_minion() File ""C:\salt\bin\lib\site-packages\salt\scripts.py"", line 112, in salt_minion minion.start() File ""C:\salt\bin\lib\site-packages\salt\cli\daemons.py"", line 344, in start super(Minion, self).start() File ""C:\salt\bin\lib\site-packages\salt\utils\parsers.py"", line 932, in start self.prepare() File ""C:\salt\bin\lib\site-packages\salt\cli\daemons.py"", line 307, in prepare if self.check_running(): File ""C:\salt\bin\lib\site-packages\salt\utils\parsers.py"", line 915, in check_running if self.check_pidfile() and self.is_daemonized(pid) and not os.getppid() == pid: AttributeError: 'module' object has no attribute 'getppid' ### Setup steps : https://docs.saltstack.com/en/latest/topics/installation/windows.html ### Steps to Reproduce Issue steps : https://docs.saltstack.com/en/latest/topics/installation/windows.html ### Versions Report ...",Can you point me to which package you installed and how you installed the minion? Thanks!,"the minion is installed on windows, so I use the available installer on saltstack website it's a bit annoying for debugging stuffs on windows, but so far, configs are pushed correctly from the master... only minion cli seems to cause issues. one cannot run any command I use windows 7 Pro SP1 64. tell me if you need more info"
saltstack/salt,https://github.com/saltstack/salt/issues/34063,saltstack_salt_issues_34063,"Feature request

[Actually I did not find any feature request entry for salt] Hello, users state are fine to check a user is present or absent but what if you want to remove all users not present in a predefined list ?? I could use a cmd to retreive all users on the minion but there is no way (that I know) to use this command output strings list as a jinja/python list and then to generate the appropriate absent states cut -d: -f1 /etc/passwd root daemon bin sys sync games man lp mail news uucp proxy www-data backup list ... In case of suspission of a hacker having installed a backdoor, that would be neat to apply a salt state so that all extra users would be removed any suggestion ? tahnks",Does this approach work for your situation?,"I dont know, I need to figure new open ports and new created users - last time a hacker installed a bitcoind generator on our machine. not sure if salt is the most appropriate, but as long as all allowed users are in a predefined list, it should work fine thanks, I'll give it a try"
saltstack/salt,https://github.com/saltstack/salt/issues/34243,saltstack_salt_issues_34243,"mysql.query - multiple queries - Commands out of sync

### Description of Issue/Question mysql.query with multiple lines (or ; separated multiple queries) returns command out of sync I also tried to run it on the minion , isolating the state still the same If I run the same query in the mysql client, no problem appears [edit : I worked around this by using jinja macros, creating a separate mysql.query for each query but this s@#s, it creates a way bigger state file, I should be able to do multiple queries in one shot ] ### Setup ",Does this solution work for you?,"ok but I need other queries to be executed and apparently mysql.query do not execute the queries at all even if I only set one query at a time is mysql.query a dummy (in dev) module ? is this supposed to work at all ? it does not even return a status or something as an alternative, I use cmd.run: - name: mysql -u root -p'{{ password }}' mysql -e ""{{ query }}"" but the password ends up in SALT state files, is there no other way to achieve this ?"
saltstack/salt,https://github.com/saltstack/salt/issues/34410,saltstack_salt_issues_34410,"Feature Request : master listening on many NIC

Hi, can you make possible for the master config file to add more than one IP would be handy for pushing configs across multiple networks thanks",Do you mind if we close that issue and track this feature here?,"yes go ahead I am no network specialist but apparently I read many times, using 0.0.0.0 is not secure"
saltstack/salt,https://github.com/saltstack/salt/issues/34479,saltstack_salt_issues_34479,"Packages DB refresh leads to all packages definitions erased on windows minion

### Description of Issue/Question I tried to add my own package definition (winrar), but as I try to install it on minion, => package cannot be found in repository digging further in the windows minion files C:\salt\var\cache\salt\minion\files\base\win only contains repo-ng that contains winrepo.p and if I one it with an hex editor, it only contains character 0x80 (???) it seems de db refresh erased all other packages, I refreshed the db without my winrar sls but still the same all packages are GONE ! the minion log does not give any information about the package except it cannot find it let me know if you need more infos ### Setup  ### Versions Report Salt Version: Salt: 2016.3.1 Dependency Versions: cffi: 0.8.6 cherrypy: Not Installed dateutil: 2.2 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.3 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.2 mysql-python: 1.2.3 pycparser: 2.10 pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.9 (default, Mar 1 2015, 12:57:24) python-gnupg: 0.3.6 PyYAML: 3.11 PyZMQ: 14.4.0 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: debian 8.5 machine: x86_64 release: 3.16.0-4-amd64 system: Linux version: debian 8.5",Does the above information help? Looks like it needs to be located in a particular directory.,"no it does not help at all, there is clearly something broken in the db_refresh command"
saltstack/salt,https://github.com/saltstack/salt/issues/33750,saltstack_salt_issues_33750,"""Salt request timed out. The master is not responding."" Error on freshly installed salt-master instance

I have a virtualbox vm with ubuntu trusty 64 bit. Saltstack installed using bootstrap script. Installation info:  No minions connected yet. Only master. UPDATE: To be precise, every 6s call to the master fails with timeout.",What salt commands are you running? Also any other information to help me replicate this issue?,Thank you for your answer. I've investigated this issue a bit more. So it looks like that it will hang on worker_threads +1 call. I've disconnected local minion but it didn't help. The command I was using to test this issue is:  Tried to run this command with different delays. Same result.
saltstack/salt,https://github.com/saltstack/salt/issues/33848,saltstack_salt_issues_33848,"Windows setup dont download m2crypto or openssl dlls

### Description of Issue/Question When installing on windows `setup.py` automatically (and with no disable option) downloads `m2cryptowin64` (or 32) and the openssl dlls. This is not the best is m2crypto and opensll are already compiled and installed. I found this issue while building a conda package for salt. The conda environment already has m2crypto and openssl so there is no need to download those dependencies. It would be nice to have a flag that disables the download of the dependencies from `repo.saltstack.com`. More info about the conda package here: https://github.com/conda-forge/staged-recipes/pull/694",What do you think about adding an option like this? Do you think it would be plausible?,"Its good to hear that `m2crypto` is no longer needed, its kinda a pain to install. In that case the i guess the download should be removed from `setup.py` on windows? And maybe just an option to opt out the openssl dlls for windows is needed."
saltstack/salt,https://github.com/saltstack/salt/issues/44406,saltstack_salt_issues_44406,"Filenames with UTF-8 characters in file root aren't supported by logger

### Description of Issue/Question UTF-8 queer cornercase when a file with UTF-8 characters exists in the file root directory: `log.trace('roots: Processing %s', abs_path)` doesn't expect abs_path to be an UTF-8 string. That raises the following exception: UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 53: ordinal not in range(128)  But `touch /srv/salt/æ` would be enough. ### Versions Report Salt Version: Salt: 2017.7.1 Jinja2: 2.9.5 Python: 2.7.14 (default, Oct 3 2017, 01:18:38) PyYAML: 3.11 (locale: LANG=en_US.UTF-8)","What's the output of `locale`? If it doesn't have UTF-8, just do `export LANG=C.UTF-8` and run `salt-call` again.",Locale is set as this: 
saltstack/salt,https://github.com/saltstack/salt/issues/33923,saltstack_salt_issues_33923,"Salt module certutil install doesnt work

### Description of Issue/Question salt '*' certutil.install salt://cert.cer ""TrustedPublisher"" doesnt work ### Setup the minion is windows and master is ubuntu and they have the same salt versions v2016. ### Steps to Reproduce Issue when i run the above command, i get an error: 'certutil.install' is not available. ERROR: Minions returned with non-zero exit code ### Versions Report Salt Version: Salt: 2016.3.0 Dependency Versions: cffi: Not Installed cherrypy: 3.2.2 dateutil: 1.5 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.3.0 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.6 (default, Mar 22 2014, 22:59:56) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 3.13.0-40-generic system: Linux version: Ubuntu 14.04 trusty",Can you clarify whether we need to get this fixed up on the documentation side or code? Thanks,"@Ch3LL yes there is no implementation for ""install"" as far as I see the code. This must be a documentation error. the win_certutil.py docstring also needs to be corrected."
saltstack/salt,https://github.com/saltstack/salt/issues/33970,saltstack_salt_issues_33970,"salt minion start twice after reboot minion machine

### Description of Issue/Question I have one salt minion virual machine, which requires a reboot. I delete the salt-key from master first, then reboot the salt minion vm. After the salt minion vm goes online, salt-minion was not running. I checked log file under /var/log/salt/minion, it seems salt-minion was successfully started and executing state files at first, but got start again, which results in duplicated salt-key on master, thus salt-minion service stops. ### Setup I am using salt 2015.8.10 (Beryllium) and salt-minion 2015.8.10 (Beryllium). ### Steps to Reproduce Issue 1. sudo salt-key --delete esmaster04-esintusc01 -y (on salt master) 2. sudo reboot (on salt minion) 3. sudo salt-key --list-all (I ran this command twice on salt master within 30 seconds, I got 2 different results. 4. sudo service salt-minion status (on salt minion - got ""salt-minion stop/waiting"") **The command and result I ran on master:** sara_zhu@saltmaster01-supportintusc01:~$ sudo salt-key --delete esmaster04-esintusc01 The following keys are going to be deleted: Accepted Keys: esmaster04-esintusc01 Denied Keys: esmaster04-esintusc01 Proceed? [N/y] y Key for minion esmaster04-esintusc01 deleted. **After I reboot the minion vm, I ran the following two commands within 30 seconds.** sara_zhu@saltmaster01-supportintusc01:~$ sudo salt-key --list-all Accepted Keys: eshaproxy01-esintusc01 eshaproxy02-esintusc01 esmaster01-esintusc01 esmaster02-esintusc01 esmaster03-esintusc01 esmaster04-esintusc01 esmonitor02-esintusc01 saltmaster01-supportintusc01 Denied Keys: Unaccepted Keys: Rejected Keys: sara_zhu@saltmaster01-supportintusc01:~$ sudo salt-key --list-all Accepted Keys: eshaproxy01-esintusc01 eshaproxy02-esintusc01 esmaster01-esintusc01 esmaster02-esintusc01 esmaster03-esintusc01 esmaster04-esintusc01 esmonitor02-esintusc01 saltmaster01-supportintusc01 Denied Keys: esmaster04-esintusc01 Unaccepted Keys: Rejected Keys: **The command and result I ran on minion(within 30 seconds):** sara_zhu@esmaster04-esintusc01:~$ sudo service salt-minion status salt-minion start/running, process 2638 sara_zhu@esmaster04-esintusc01:~$ sudo service salt-minion status salt-minion stop/waiting **Salt minion logs:** 2016-06-13 09:55:24,158 [salt.cli.daemons ][WARNING ][1233] IMPORTANT: Do not use md5 hashing algorithm! Please set ""hash_type"" to sha256 in Salt Minion config! 2016-06-13 09:55:27,874 [salt.state ][WARNING ][1339] Top file merge strategy set to 'merge' and multiple top files found. Top file merging order is undefined; for better results use 'same' opti on 2016-06-13 09:55:42,449 [py.warnings ][WARNING ][1339] /usr/lib/python2.7/dist-packages/salt/utils/templates.py:73: DeprecationWarning: Starting in 2015.5, cmd.run uses python_shell=False by defa ult, which doesn't support shellisms (pipes, env variables, etc). cmd.run is currently aliased to cmd.shell to prevent breakage. Please switch to cmd.shell or set python_shell=True to avoid breakage i n the future, when this aliasing is removed. 2016-06-13 09:55:44,237 [salt.loaded.int.states.file][WARNING ][1339] State for file: /etc/sudoers.d/ryang - Neither 'source' nor 'contents' nor 'contents_pillar' nor 'contents_grains' was defined, ye t 'replace' was set to 'True'. As there is no source to replace the file with, 'replace' has been set to 'False' to avoid reading the file unnecessarily. 2016-06-13 09:55:44,269 [salt.loaded.int.states.file][WARNING ][1339] State for file: /etc/sudoers.d/leong - Neither 'source' nor 'contents' nor 'contents_pillar' nor 'contents_grains' was defined, ye t 'replace' was set to 'True'. As there is no source to replace the file with, 'replace' has been set to 'False' to avoid reading the file unnecessarily. 2016-06-13 09:55:58,720 [salt.cli.daemons ][WARNING ][2641] IMPORTANT: Do not use md5 hashing algorithm! Please set ""hash_type"" to sha256 in Salt Minion config! 2016-06-13 09:55:58,822 [salt.crypt ][INFO ][2634] Generating keys: /etc/salt/pki/minion 2016-06-13 09:55:58,935 [salt.crypt ][CRITICAL][2641] The Salt Master has rejected this minion's public key! To repair this issue, delete the public key for this minion on the Salt Master and restart this minion. Or restart the Salt Master in open mode to clean out the keys. The Salt Minion will now exit. 2016-06-13 09:55:58,972 [salt.crypt ][CRITICAL][2634] The Salt Master has rejected this minion's public key! To repair this issue, delete the public key for this minion on the Salt Master and restart this minion. Or restart the Salt Master in open mode to clean out the keys. The Salt Minion will now exit. 2016-06-13 09:56:05,581 [salt.crypt ][CRITICAL][2718] The Salt Master has rejected this minion's public key! To repair this issue, delete the public key for this minion on the Salt Master and restart this minion. ### Versions Report sara_zhu@saltmaster01-supportintusc01:~$ salt --versions-report Salt Version: Salt: 2015.8.10 Dependency Versions: Jinja2: 2.7.2 M2Crypto: 0.21.1 Mako: 0.9.1 PyYAML: 3.10 PyZMQ: 14.0.1 Python: 2.7.6 (default, Jun 22 2015, 17:58:13) RAET: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 cffi: 1.6.0 cherrypy: 3.2.2 dateutil: 2.5.3 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed libgit2: Not Installed libnacl: Not Installed msgpack-pure: Not Installed msgpack-python: 0.3.0 mysql-python: 1.2.3 pycparser: 2.14 pycrypto: 2.6.1 pygit2: Not Installed python-gnupg: Not Installed smmap: 0.8.2 timelib: 0.2.4 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 3.19.0-59-generic system: Ubuntu 14.04 trusty",Could you try deleting the cache on your master and minion and restart it and see if you get the same behavior?,"I found the root cause is that I deployed these VMs on google cloud, and I specify a startup-script which will run everytime when the VM was restarted. And in that startup-script, it will restart salt-minion. Thus causing salt-minion start twice. @Ch3LL Thanks anyway for your time on this. :+1:"
saltstack/salt,https://github.com/saltstack/salt/issues/34023,saltstack_salt_issues_34023,"Minions only able to see their own mine_function results from mine.get()

Hey folks, I'm running into a problem with `mine.get()`. In this test case I'm setting a jinja variable `pings` in a pillar with `{% set pings = salt.saltutil.runner('mine.get', tgt='*', fun='test.ping') %}`. It's my understanding based on the documentation that this should return the ping result for all minions with `mine_functions: test.ping: []` defined, however it's only returning the data for the minion requesting the pillar/mine data. I have also tried using it in a state with the same result. ",Can you try `salt-call mine.get '*' test.ping` on one of hte individual minions? Are you still only returning values from that one minion?,"Hi @Ch3LL, thanks for looking into this. Here's the output from `sudo salt-call mine.get '*' test.ping` on the minion: "
saltstack/salt,https://github.com/saltstack/salt/issues/34393,saltstack_salt_issues_34393,"salt-cloud + pywinrm > 0.1.1 fails.

### Description of Issue/Question Trying to deploy windows VMs on vmware, using winrm, but am not successful when using pywinrm 0.2.0 Below works fine when pywinrm 0.1.1 is used. ### Setup profiles.conf: ",Would you mind trying the fix in #34026 to see if it fixes it?,@Ch3LL I will test when I get back from vacation next week.
saltstack/salt,https://github.com/saltstack/salt/issues/34126,saltstack_salt_issues_34126,"Documentation hole trying to configure gpg encrypted pillar data

### Description of Issue/Question The current docs have a hole in them regarding the configuration of the gnu-agent in order to be able to use a passphrase on the private keyfile which is the recommended approach here: http://intothesaltmine.readthedocs.io/en/latest/chapters/secret-storage/architecture.html Pertinent line: ",Can you try this on a version 2015.8.3 or above and see if it is working for you then?,Thanks @Ch3LL so the challenge I have is trying to figure out how to upgrade my master and minion to a later version of salt. After pretty much an entire afternoon of attempting to do this I've basically managed to nuke my salt master and can't go backwards or forwards at this point so... yay. So I guess maybe if someone else can verify this is working in a later version then we can close this ticket off if it's expected not to work in 2015.5.3 and I'll muddle through trying to recover my master back to something that works again.
saltstack/salt,https://github.com/saltstack/salt/issues/34153,saltstack_salt_issues_34153,"event_return_whitelist does not implictly blacklist any tag not listed

### Description of Issue/Question I was looking utilize the event_return whitelist feature feature to essentially blacklist all event tags except those I have listed under the event_return_whitelist in my salt-master config. However, after configuring my environment multiple times and testing different combinations of event_return_whitelist and event_return_blacklist I took a look at the source code and noticed that there currently is no way to accomplish what I set out to do without individually declaring tags/globs under event_return_blacklist for all events I don't want published to my returner. Taking a look at the _filter function in the current salt/utils/event.py : ",Would you mind giving that a try?,@rallytime Tested the following event_return_whitelist configuration : 
saltstack/salt,https://github.com/saltstack/salt/issues/34210,saltstack_salt_issues_34210,"ext_pillar doesn't support 'mountpoint' option

With the `fileserver_backend` it is possible using gitfs (pygit2) to specify the mountpoint of a git repo so that repos can be nested - e.g.:  (This is salt 2016.03.01) Is there a different way to achieve this? If not, could this feature be added?",What is it that you are trying to do?,"I'm trying to create a delegated config 'tree' by nesting one git repo inside another, so that a 'sub-directory' of pillar config can be in a repo managed by someone else. This works fine for state SLS files (following https://docs.saltstack.com/en/latest/topics/tutorials/gitfs.html) but not for pillars."
saltstack/salt,https://github.com/saltstack/salt/issues/34228,saltstack_salt_issues_34228,"Salt bootstrap fails inside Vagrant with 'saltutil.sync_all' is not available

### Description of Issue/Question I have a Vagrantfile that provisions a masterless salt setup (see below). Host OS is Ubuntu Xenial; guest OS is Ubuntu Trusty. This config has worked since early 2016, but failed today on a new machine with the error: ",Would you mind giving this another try to see if that is resolved for you?,"Yep, this is now resolved using latest develop. Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/36752,saltstack_salt_issues_36752,"pkg_resource.version causes exception on osx 10.11

### pkg_resource.version results in exception on osx 10.11 as below:  ### Setup Salt master is on Ubuntu 14.04 and minion is osx 10.11.6 ### Steps to Reproduce Issue Run `sudo salt '*' pkg_resource.version 'python*'` ### Versions Report Master and minion are on salt 2016.3.1",Do you have brew installed on the system?,@Ch3LL I do not have brew installed on the system. This issue persists after upgrading both minion and master to 2016.3.3
saltstack/salt,https://github.com/saltstack/salt/issues/41971,saltstack_salt_issues_41971,"Salt Cloud.CloudClient has a breaking typo,

### Description of Issue/Question Trying to use a instance of `salt.cloud.CloudClient('/etc/salt/cloud')`, you cannot create any VPSes, because apparently someone got halfway through refactoring `salt/salt/cloud/__init__.py`, and then committed it. Basically, I do `cloudclient.create(names=[clientname], provider=provider, **kwargs)`. This fails:  So the issue is that apparently `salt/cloud/__init__.py(1176)create()` is expecting a key named `provider`, but the parameter is being inserted into the parameter dictionary by `salt/cloud/__init__.py(404)create()` with the key `driver`. It seems like someone was intending to rename the parameter key, but only did half of it. I guess that's what I get for trying to update.","Can you tell me what version of salt you upgraded from where this was working? And you were trying out the `develop` branch, correct?","I switched from somewhere between `2016.3` and `2016.11` to `develop`, and things broke. I rolled back to `2016.11`, and things started working again. I may have made other changes at the time, I was somewhat frantically trying to fix things because I was doing this on a work-night and it was already 1 AM. I should be able to block out a larger chunk of time to do diagnostics and troubleshooting this weekend. It's probably worth noting for a lot of this that I'm *probably* not necessarily using salt the way most of the documentation seems to assume people will. I'm not interested in running saltstack as a stand-alone tool, but rather using it as a component in a larger python script. As such, I'm not using the CLI interface or the salt state config file thing at all. My interface script thing is here: https://github.com/fake-name/AutoTriever/blob/master/marshaller/salt_runner.py. Basically, I don't really have a use for a stand-alone tool, I need something I can attach to a existing system and/or scheduler. I'm actually not entirely sure how you're *supposed* to use the CLI tool for automation. Do you have python (or your other tooling) shell out to then call the various CLI tools when automating things? That seems kinda silly if you're already python. Basically, I've had to more or less guess and experiment to figure out how to use the python interface components, and as such, I'm *probably* doing things incorrectly, or at least making bad assumptions. ------ A lot of this is exacerbated by the fact that apparently the depreciation warnings weren't actually attached to the thing that uses the depreciated arguments, so you can be happily using depreciated functionality without ever knowing any better."
saltstack/salt,https://github.com/saltstack/salt/issues/42117,saltstack_salt_issues_42117,"GCE `update_pricing` fails if the cache dir does not exist.

 This is probably another symptom of my using of the API in a way not originally intended by it's writer, but it definitely is an issue, I think.",Which parts of `os.path` are being used where? I can see `os` being imported at the top and references to `os.path` which seems correct. Thanks,"Huh, I had always assumed that to use `os.path.*` functions, you had to specifically `import os.path`, in addition to any `import os` import. I just tested it, and apparently I was incorrect in my assumption. Derp. Never mind about that, I guess."
saltstack/salt,https://github.com/saltstack/salt/issues/34363,saltstack_salt_issues_34363,"State skips notifications when on changed and multiple actions requested

### Description of Issue In situation when: - state has multiple actions (service.running and enable:true) - State is modified during run (service is turned off in init script) - State is notified during run ( config file is modified => expects to trigger service restart) The result is : - Service is enabled in init scripts - Template is replaced => triggers notification to service - Service Should be restarted, but is NOT ! Expected resolution: - Service should be enabled AND restarted ### Steps to Reproduce Issue Example state:  ### Versions Report salt 2015.5.10 (Lithium) (have seen it on version 2016 too)",which os are you running into this?,@Ch3LL any chance to re-open ?
saltstack/salt,https://github.com/saltstack/salt/issues/34397,saltstack_salt_issues_34397,"ignore_epoch needs to be passed through to version_cmp functions

### Description of Issue/Question Not necessarily an issue or bug, but just as something I've noticed while working with `pkg.version_cmp` that you guys may or may not want to address. I've been working on a cve scan for [HubbleStack](https://github.com/jaredhanson11/Nova/blob/develop/hubblestack_nova/modules/cve_scan_v2.py), and sometimes the vulnerable package version number I grab from an outside source will not correspond exactly to the format given by `pkg.list_pkgs`. It can happen that local version number is `1:6.6p1-2ubuntu2.4` while the source of the cve's returns the vulnerable version number as `6.6p1-2ubuntu2.7`, omitting the prefix `1:`. This can cause unwanted behavior by the `pkg.version_cmp` command. I work around it by getting rid of all `x:` prefixes, but it would be nice to have `pkg.version_cmp` handle the discrepancy, or at least return `None` representing an error comparing the versions. ### Steps to Reproduce Issue ",Do you think this is a bug/issue?,"@terminalmage I loop through all the local packages that are gathered with `local_pkgs = __salt__['pkg.list_pkgs'](versions_as_list=True)`, and use `__salt__['pkg.version_cmp'](local, vulnerable)` to compare the local version with a vulnerable version from an external source, gathered from the api at [vulners.com](https://www.vulners.com/api/v3/search/lucene/?query=type:centos). The problem is that sometimes the version returned from vulners.com has the epoch, other times it doesn't, so it would be nice if `pkg.version_cmp` could handle the case of comparing versions where one version number has an epoch, while the other doesn't. Again, it's not necessarily a bug or issue, more just a heads up, because if you didn't know any better and just compared the versions without checking whether they match in terms of both having epoch's or not, you could introduce a bug that might not be so obvious to spot."
saltstack/salt,https://github.com/saltstack/salt/issues/36965,saltstack_salt_issues_36965,"salt-cloud NameError: name 'get_salt_interface' is not defined

### Problem Description I am seeing an error exception below while creating a machine at aws using salt-cloud via jenkins.Thus when i run these commands on cli which is installed linux instance, so i didn't see any exception.Note that even occurring this exception via jenkins task that i might created instance as properly.However this syntax exception is coming when every task is started, so it is not fine. I review the related library code which named libcloud_aws.py in my server to get it what is happening behind this cause.After that I am sure which ""private_ips"" was set in cloud config as properly to deploying bootstrapt script using local ip address while new ec2 instance is creating at aws.Because this python logic seems meaning that controlling deployment address of target ec2 machine before deploy bootstrapt script to target machine. /usr/lib/python2.7/site-packages/salt/cloud/clouds/libcloud_aws.py  ### command & exception logs: - sudo salt-cloud -p internal_t2.micro_centos7 test -l debug [ERROR ] Failed to import clouds botocore_aws, this is due most likely to a syntax error: Traceback (most recent call last): File ""/usr/lib/python2.7/site-packages/salt/loader.py"", line 1298, in _load_module ), fn_, fpath, desc) File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/botocore_aws.py"", line 49, in <module> from salt.cloud.clouds import libcloud_aws File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/libcloud_aws.py"", line 82, in <module> get_salt_interface = namespaced_function(get_salt_interface, globals()) NameError: name 'get_salt_interface' is not defined [ERROR ] Failed to import clouds libcloud_aws, this is due most likely to a syntax error: Traceback (most recent call last): File ""/usr/lib/python2.7/site-packages/salt/loader.py"", line 1298, in _load_module ), fn_, fpath, desc) File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/libcloud_aws.py"", line 82, in <module> get_salt_interface = namespaced_function(get_salt_interface, globals()) NameError: name 'get_salt_interface' is not defined ### Versions Report Salt Version: Salt: 2016.3.3 Dependency Versions: Apache Libcloud: 0.20.1 cffi: 0.8.6 cherrypy: 3.2.2 dateutil: 1.5 gitdb: 0.6.4 gitpython: 1.0.1 ioflo: 1.3.8 Jinja2: 2.7.2 libgit2: 0.21.0 libnacl: 1.4.3 M2Crypto: 0.21.1 Mako: 0.8.1 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 1.2.3 pycparser: 2.14 pycrypto: 2.6.1 pygit2: 0.21.4 Python: 2.7.5 (default, Sep 15 2016, 22:37:39) python-gnupg: 0.3.8 PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: 0.9.0 timelib: 0.2.4 Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.2.1511 Core machine: x86_64 release: 3.10.0-327.36.1.el7.x86_64 system: Linux version: CentOS Linux 7.2.1511 Core","How are you using libcloud_aws.py? This was deprecated and removed from 2016.3/Boron. and that function was moved to salt.utils.cloud, so it isn't able to be namespaced from libcloud_funcs.","salt-cloud was installed by rpm which was provided saltstack repo, so i just executed salt-cloud command on jenkins to create a new ec2 instance .However it returns like these exceptions even it could be created instance properly.I don't know why is it using namespaced from libcloud_funcs."
saltstack/salt,https://github.com/saltstack/salt/issues/47582,saltstack_salt_issues_47582,"saltutil.sync_xxx does not work correctly

### Description of Issue/Question When I upgrade salt-master from version 2015 to 2017.7.5-1 version, and find that saltutil.sync_xxx commands does not work as expected, and module/grains in /srv/salt/(_grains|_modules) files have not been transfered to /var/cache/salt/minion/extmods on minoins. ### Setup master setupfile cat /etc/salt/master  ### Versions Report master version OS: Centos 7.3 Salt Version: Salt: 2017.7.5 Dependency Versions: cffi: 1.6.0 cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Nov 6 2016, 00:28:07) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.3.1611 Core locale: UTF-8 machine: x86_64 release: 3.10.0-514.26.2.el7.x86_64 system: Linux version: CentOS Linux 7.3.1611 Core minion version **Some minion vms are** os: centos 7.3 salt version: 2015.5.11-1 /2017.7.5-1 **others are** os:rhel6.3 salt version: salt-2015.5.3-5",Can you paste the sanitized output from `salt-call saltutil.sync_grains -ldebug; ls /var/cache/salt/minion/extmods/grains` from the minion?,"@Ch3LL Thanks for your reply, and I tried '**salt-call saltutil.sync_grains -ldebug; ls /var/cache/salt/minion/extmods/grains**' on the minion, the info is as followed: "
saltstack/salt,https://github.com/saltstack/salt/issues/34448,saltstack_salt_issues_34448,"Windows minion command fails where there is a""-"" in a argument

Hi I have been trying to restart the salt-minion service using the service.restart function and it kept failing. Originally i thought it was an issue with the service, but i found if tried to restart saltminion (one word), the request worked, and came back with a false for the result - as expected. salt-winrepo-ng# salt bugs.XXX.local service.restart 'saltminion' bugs.XXX.local: False If i put the correct name it fails to run salt bugs.XXX.local service.restart 'salt-minion' bugs.XXX.local: The minion function caused an exception: Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\minion.py"", line 1318, in _thread_return return_data = executor.execute() File ""C:\salt\bin\lib\site-packages\salt\executors\direct_call.py"", line 28, in execute return self.func(_self.args, *_self.kwargs) File ""C:\salt\bin\lib\site-packages\salt\modules\win_service.py"", line 214, in restart create_win_salt_restart_task() File ""C:\salt\bin\lib\site-packages\salt\modules\win_service.py"", line 240, in create_win_salt_restart_task start_time='01:00') File ""C:\salt\bin\lib\site-packages\salt\modules\win_task.py"", line 423, in create_task if name in list_tasks(location) and not force: File ""C:\salt\bin\lib\site-packages\salt\modules\win_task.py"", line 288, in list_tasks task_service = win32com.client.Dispatch(""Schedule.Service"") File ""C:\salt\bin\lib\site-packages\win32com\client__init__.py"", line 95, in Dispatch dispatch, userName = dynamic._GetGoodDispatchAndUserName(dispatch,userName,clsctx) File ""C:\salt\bin\lib\site-packages\win32com\client\dynamic.py"", line 114, in _GetGoodDispatchAndUserName return (_GetGoodDispatch(IDispatch, clsctx), userName) File ""C:\salt\bin\lib\site-packages\win32com\client\dynamic.py"", line 91, in _GetGoodDispatch IDispatch = pythoncom.CoCreateInstance(IDispatch, None, clsctx, pythoncom.IID_IDispatch) com_error: (-2147221005, 'Invalid class string', None, None) I get the same error if i run it locally on the minion with salt-call. I also noticed i was getting the same type of error when running other salt commands on the windows devices yesterday too. Salt master is 2016.3.1, and the minions are both 2015.8.3 and 2016.3.1 - both having the issue",How did you install salt?,"Hi, sorry for the delay. The issue is not happening on Windows 2012R2, I am seeing the issue on Windows 2003 both 32 bit and 64 bit. Hope this helps."
saltstack/salt,https://github.com/saltstack/salt/issues/34475,saltstack_salt_issues_34475,"Does stack external pillar GPG renderer?

### Description of Issue/Question I've setup the stack external pillar. When I add a GPG encrypted entry, it's not decrypyed ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) Setup a salt stack external pillar setup and the same info in a normal pillar file. [root@saltmaster pillar_stack]# cat stack.cfg common.yml ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) With stack external pillar: ",Can you confirm whether it has the capability to use different renderers?,"@bbinet looked in the code, and it only does a YAML.safe_load on a Jinja Template. Doesn't it make sense to use the rendering system here? Otherwise you will not store any secrets in this type of pillar and any advantage it brings it would be lost."
saltstack/salt,https://github.com/saltstack/salt/issues/34497,saltstack_salt_issues_34497,"salt 'testMinion' pkg.available_version firefox gives IndexError: pop from empty list

### Description of Issue/Question Hi, I am running **salt minion 2016.3.1** on a **windows 2003** server **master is Ubuntu 14.04** I am following documentation at https://docs.saltstack.com/en/latest/topics/windows/windows-package-manager.html#windows-software-repository to install packages on remote windows salt-minion i ran the following in my master //sls files used to install windows packages (these do not come in by default) `salt-run winrepo.update_git_repos` //run pkg.refresh on every minion `salt -G 'os:windows' pkg.refresh_db` and then restarted my master `salt -G 'os:windows' pkg.list_pkgs` works and gives me all the pkg installed `salt testMinion pkg.available_version firefox` fails and gives me following error ",What is the output when you run pkg.refresh_db on that minion?,"that is true, sorry i forgot to put my salt master version here  @AvinashDeluxeVR : to solve this issue did you downgrade the salt version on the minion?"
saltstack/salt,https://github.com/saltstack/salt/issues/46550,saltstack_salt_issues_46550,"Salt pam Authentication suddenly fails

Hi, I am using salt to manage my virtual machines. Till now I was using salt version salt-master 2015.5.3 (Lithium). I am also using salt-api to make remote calls (salt-api 2015.5.3) ",Can you check the version of CherryPy that are installed on both the Ubuntu 16.04 installation where you're seeing issues and the CentOS where you are not? Thanks!,"oh the centOS version is different although i installed it using pip in both ubuntu and centOS  however not sure if its a cherrypy issue since salt -a ""pam"" * test.ping too fails to authenticate"
saltstack/salt,https://github.com/saltstack/salt/issues/34511,saltstack_salt_issues_34511,"AttributeError: elasticsearch_index_template.present

### Description of Issue/Question When trying to use the [elasticsearch state integration](https://docs.saltstack.com/en/latest/ref/states/all/salt.states.elasticsearch_index_template.html) the formula ends with an AttributeError (`'module' object has no attribute 'exceptions'`). Which seems to originate on line https://github.com/saltstack/salt/blob/2016.3/salt/modules/elasticsearch.py#L96 ### Setup With or without elasticsearch hosts in config doesn't matter Formula:  ### Versions Report salt-minion --versions-report salt-master --versions-report",What version of py-elasticsearch do you have installed? Mine is 2.3.0: `elasticsearch (2.3.0)`,I think this is the package you are refering to?
saltstack/salt,https://github.com/saltstack/salt/issues/34602,saltstack_salt_issues_34602,"stateconf renderer giving incorrect absolute path from relative include in sls

### stateconf renderer fails to give correct absolute sls-name for relative include Trying to keep the title as short and concise as I can, I stumbled onto this during some local experimentation with stateconf to avoid some conflicts and what-not. ### Setup `top.sls:` ",Does this work for you? if you rename the file to something other then init.sls?,"@Ch3LL You're right, and I don't know how I left that out of the bug report -- sorry. 🐛 If I refer to a specific state-file instead of `test`, say `test.server`, it'll work without issue."
saltstack/salt,https://github.com/saltstack/salt/issues/34783,saltstack_salt_issues_34783,"salt-cloud and winrm failing with : [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed

### Description of Issue/Question Trying to create a Windows Minion in EC2 results in the following error: ","However, where did you get the `win_installer_args` option? That is not a supported option. I'd like to see what @techhat or @twangboy think about this issue as well.","@rallytime those arguments are just things I've tried in #34785 . As related to this particular issue, removing those arguments doesn't change the error I'm getting when trying to create the instances in EC2."
saltstack/salt,https://github.com/saltstack/salt/issues/34635,saltstack_salt_issues_34635,"Ubuntu Xenial, state network.managed and files in /etc/network/interfaces.d/*

network.managed produces my eth0 interface with the wrong proto **dhcp**, but i gave **static** explicitly. ### Setup I have the following ([generated](https://rene.jochums.at/having-fun-with-saltstack-and-ext_pillar-mongo)) state: ",Maybe i'm missing something?,@Ch3LL Thanks for your answer! Did you try it with the cloud-init file **/etc/network/interfaces.d/50-cloud-init.cfg** it only happens to me when that file is present even if that file is not sourced in /etc/network/interfaces
saltstack/salt,https://github.com/saltstack/salt/issues/40529,saltstack_salt_issues_40529,"salt-minion fails to start ""ERROR: Unable to look-up config values for /etc/salt""

### Description of Issue/Question I upgraded the salt-master to 2016.11.3, then upgraded salt-minion on the same server. The master is OK, but the minion fails to start with this error: ","What about when you run `salt-call -c /etc/salt --local config.get sock_dir`? Configdir should be set to /etc/salt, not /etc/salt/minion. Thanks, Daniel","Oops, pasted the wrong command. I did run `salt-call -c /etc/salt/ --local config.get sock_dir` as well, and even `salt-call -c /etc/salt --local config.get sock_dir` too (without the `/`). Those gave the result as in the original message. (with the trailing /minion the output actaully included `WARNING: CONFIG '/etc/salt/minion' directory does not exist.`)"
saltstack/salt,https://github.com/saltstack/salt/issues/34653,saltstack_salt_issues_34653,"salt 2016.3.1 too slow 

I recently updated salt 2015.8.0 to 2016.3.1. The execution time of formulas has increased greatly. For example, a formula that takes eight seconds now takes 22. I have observed that CPU performance of minions has increased its load when I execute any state. I am concerned with this behavior. Master info: Salt Version: Salt: 2016.3.1 Dependency Versions: cffi: Not Installed cherrypy: 3.2.2 dateutil: 1.4.1 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.3 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.20.2 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.6.6 (r266:84292, Jul 23 2015, 15:22:56) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: centos 6.5 Final machine: x86_64 release: 2.6.32-573.22.1.el6.x86_64 system: Linux version: CentOS 6.5 Final Minion info: Salt Version: Salt: 2016.3.1 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.3 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.20.2 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3c1 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.6.6 (r266:84292, Jan 22 2014, 09:42:36) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: centos 6.5 Final machine: x86_64 release: 2.6.32-642.1.1.el6.x86_64 system: Linux version: CentOS 6.5 Final",Can you point to a particular formula that's slow so that we can try to pin this down to something specific?,"cachedout, thanks for your response. You can try any case. For example, I have this formula: /etc/rsyslog.d/file.conf: file.managed: - source: salt://logs/file.conf - user: root - group: root - mode: 644 - template: jinja {% if grains['osfinger'] == 'CentOS Linux-7' %} syslogrestart: cmd.run: - name: systemctl restart rsyslog - user: root {% else %} syslogrestart: cmd.run: - name: /etc/init.d/rsyslog restart - user: root {% endif %} _Where file.conf is:_ $WorkDirectory /var/lib/rsyslog # where to place spool files $ActionQueueFileName fwdRule1 # unique name prefix for spool files $ActionQueueMaxDiskSpace 1g # 1gb space limit (use as much as possible) $ActionQueueSaveOnShutdown on # save messages to disk on shutdown $ActionQueueType LinkedList # run asynchronously $ActionResumeRetryCount -1 # infinite retries if host is down authpriv.\* @@domain.example:1514 **Runtimes:** Salt 2015.8.0 real 0m7.105s user 0m0.730s sys 0m0.088s Salt 2016.3.1: real 0m18.599s user 0m0.909s sys 0m0.098s OS: Centos 6.8 Final (the same thing happens in centos 7). This time difference is the tendency in all cases. Thanks again."
saltstack/salt,https://github.com/saltstack/salt/issues/34658,saltstack_salt_issues_34658,"MacOS El Capitan user.present cause execution error

I'm just testing on a Mac minion, with a simple user.present state test. The user already exists, and the minion throws: ",Does this fail on El Capitan?,"@twangboy I am using Yosemite :cry: . Strictly 10.11 is too much, I'm afraid. 10.11 is the pinnacle of the family, but I think there are lots of (Yose)mites out there! Especially when you're running server stuffs, upgrading system were never a choice of free will."
saltstack/salt,https://github.com/saltstack/salt/issues/35079,saltstack_salt_issues_35079,"custom grains from `base/_grains` folder silently unavailable

### Description of Issue/Question I've created two simple custom grains, `lan_ip` and `wan_ip`, it's parsing list of network interfaces and return minion's LAN or WAN IPs respentively. I've put these grains into `/srv/salt/base/_grains` on salt master and run `salt \* saltutil.sync_all`, which among other things returned:  Custom grains itself are in `/srv/salt/base/_grains`. ### Versions Report CentOS 7.1 everywhere. salt 2016.3.1 (Boron) salt-minion 2016.3.1 (Boron)",Does that help your situation?,"Thanks @Ch3LL, that was the cause of the problem - `netifaces` didn't get properly provisioned on few hosts and it caused the issue, and I could see the exception when I ran it locally. Can we somehow funnel exceptions from custom grains into minion log when called from master to make it easier traceable?"
saltstack/salt,https://github.com/saltstack/salt/issues/38681,saltstack_salt_issues_38681,"virtualenv.managed ran twice over the same directory breaks it

### Description of Issue/Question `virtualenv.managed` configured to create Python3 venv on first run does the right thing, but when run for second time on the same minion with already existing venv breaks it and resets to Python2. Workaround - explicitly delete venv environment folder before (re)creating the venv. ### Setup ",When you run the state.apply again does it state that there were any changes?,"Just retried it, no, it returns:  There are 88 states applied to this system at once when I run `state.apply`, and I'm not sure what can interfere here. How can I debug that?"
saltstack/salt,https://github.com/saltstack/salt/issues/35585,saltstack_salt_issues_35585,"Option to disable fetching gitfs remotes in standalone/masterless mode

While developing new states I am frequently running `salt-call --local state.apply` as I iterate on changes being made to state files. Unfortunately I've noticed that running salt has progressively gotten slower and slower as I add new remotes to `gitfs_remotes`. This seems to be because salt is checking the remotes on every single run to see if there are any new changes. 99% of the time I am running salt I know there are no new changes to be pulled from any of the remotes, so this is just wasting time when the cached version is perfectly fine to use. To give you an idea, while using 6 `gitfs_remotes` I get the following timed results:  That is ~20 seconds wasted just checking for new updates that don't exist. This has a reasonable impact on the speed of iteration on the development of new states, and is likely to only get worse as more remotes are added. I experience this problem both with v2016.3.2 and the current develop branch. It would be good if an option/setting could be implemented that prevents the cache being invalidated and checking for new updates from remotes.",Would you be okay with closing this issue and commenting on that issue so we can track adding an option to not refresh gitfs during commands there?,"Yes, it seems like a duplicate. I'm happy to close the issue."
saltstack/salt,https://github.com/saltstack/salt/issues/51068,saltstack_salt_issues_51068,"network.managed reports changes to alias interface when nothing changed

### Description of Issue/Question Salt reports `Interface xxx:x is up` when no changes have been made to a correctly configured interface alias. I would expect that if no changes have been made then no changes would be reported back. ### Setup ",do you know if this was working previously?,"@Ch3LL It seems to be broken as far back as v2018.3.2 (the version we are currently running), but I haven't tested anything before that. My suspicion is that this has never worked correctly."
saltstack/salt,https://github.com/saltstack/salt/issues/34893,saltstack_salt_issues_34893,"rpm VirtuozzoLinux not working

### Steps to Reproduce Issue not sure but if you want to add VirtuozzoLinux you will have to fix it aswell file: /usr/lib/python2.7/dist-packages/salt/modules/rpm.py ",Does that resolve this issue fully for you?,@rallytime Thanks! As far as I can see right now it fixes the VirtuozzoLinux related issues.
saltstack/salt,https://github.com/saltstack/salt/issues/34883,saltstack_salt_issues_34883,"salt.wheel key.delete isn't functioning (problem like #25318) (but #31112 works for me)

### Description of Issue/Question running salt state file very similar to what is in https://github.com/saltstack/salt/issues/25318 ",Can you verify?,I am able to verify that this is working in 2016.3.1. Thank you.
saltstack/salt,https://github.com/saltstack/salt/issues/34950,saltstack_salt_issues_34950,"boto_route53 state erroring on highstate repeat 

### Description of Issue/Question Initial highstating works fine and Route53 DNS records are created. Subsequent highstate runs result in an error stating they already exist. As a state this should exit gracefully as it is already compliant with state. Additionally it would be nice if the state file could update records when an IP changes. ### Setup master.sls  minions/master are at the same level. Boto 2.42 is installed",Does this look similiar to your issue?,"Doesn't look like it. The refered issue was more due to rate - they had 150 entries, I have only 3. Their error bares out a rate issue `<ErrorResponse xmlns=""https://route53.amazonaws.com/doc/2013-04-01/""><Error><Type>Sender</Type><Code>Throttling</Code><Message>Rate exceeded</Message></Error><RequestId>1723b95b-f2bf-11e4-b864-33bc3e543038</RequestId></ErrorResponse>` Whereas my issue is related to these records already existing `<ErrorResponse xmlns=""https://route53.amazonaws.com/doc/2013-04-01/""><Error><Type>Sender</Type><Code>InvalidChangeBatch</Code><Message>Tried to create resource record set [name='dns.name.com.', type='A'] but it already exists</Message></Error><RequestId>3f5ad078-533f-11e6-bbeb-d7f94d173854</RequestId></ErrorResponse>`"
saltstack/salt,https://github.com/saltstack/salt/issues/37750,saltstack_salt_issues_37750,"hostname inconsistency between states.network and modules.network

### Description of Issue/Question Inconsistency when using states.network vs modules.network on a systemd distro, modules.network appears to work correctly. ### Setup tested on Centos 7 State Module: ",Do you want network.settings to have same behavior as network.mod_hostname or the other way around?,Sorry didn't explain terribly well. On a systemd server it appears /etc/sysconfig/network is no longer used for setting hostname. Therefore I propose that the state module check for the presence of systemd then update the hostname via hostnamectl rather than continue to modify the /etc/sysconfig/network file which no longer provides that functionality.
saltstack/salt,https://github.com/saltstack/salt/issues/34961,saltstack_salt_issues_34961,"services sometimes do not stop

### Description of Issue/Question I use salt to install services on a number of boxes and sometimes see deployments hand forever. When I ssh into the box and run 'ps', I see that the salt-minion is trying to stop forever for a service to stop. I've seen this happen with dovecot, memcached and redis-server ### Setup The salt-master is 2014.7.0+ds-2~bpo70+1 from the debian 7 backports repo. The salt-minion is 2015.8.3+ds-1 ### Steps to Reproduce Issue Using 'ps fauxw', I see: root 2131 6.5 12.7 654956 125560 ? Sl 16:49 0:32 /usr/bin/python /usr/bin/salt-minion -d root 18025 0.0 0.0 59240 788 ? S 16:53 0:00 _ /bin/sh /etc/init.d/redis-server stop root 18033 0.3 0.0 53628 660 ? S 16:53 0:00 _ start-stop-daemon --stop --retry forever/TERM/1 --quiet --oknodo --pidfile /var/run/redis/redis-server.pid --exec /usr/bin/redis-server The relevant state: redis-service: service.dead: - name: redis-server - enable: False ### Versions Report See above.",Do you see the same thing when running `salt-call -ldebug` to attempt to stop the service?,"After more investigations, it turns out that it's my fault. The ordering of states was creating issues by stopping services while the filesystem was being changed under them. I'm closing the issue."
saltstack/salt,https://github.com/saltstack/salt/issues/34963,saltstack_salt_issues_34963,"Incorrect behavior or documentation for comments in salt.states.pkgrepo.managed

### Description of Issue/Question `comments` in `pkgrepo.managed` does not behave as documented. The documentation states, ""Anything supplied for this list will be saved in the repo configuration with a comment marker (#) in front."" However, Salt does not behave this way; anything in the comments section is added WITHOUT a # in front. I am not sure if the behavior or the documentation is wrong, but they don't match. ### Setup ### Steps to Reproduce Issue This state: ",Does this bug exist on non-yum systems? It looks like currently `states.pkgrepo.managed` does nothing with `comments` and merely defers it to the system's respective `pkg` module. Edit: typo,"I only have Yum systems to test on, so I am unable to help with that question."
saltstack/salt,https://github.com/saltstack/salt/issues/37592,saltstack_salt_issues_37592,"State git.latest does not work with SSH

### Description of Issue/Question I cannot access a Git repository via SSH with the git.latest state. My issue seems to be identical to [32237](https://github.com/saltstack/salt/issues/32237). ### Setup Here is a fragment from my SLS file: ",Do you happen to have a github.com entry in `/root/.ssh/config` or `/etc/ssh/ssh_config`?,"I have tried both with, and without, `/root/.ssh/config`. Here is my current config, which really shouldn't be necessary: "
saltstack/salt,https://github.com/saltstack/salt/issues/40889,saltstack_salt_issues_40889,"salt-master 2016.11.4 crashes on CentOS 7 with error ""RSA key format is not supported""

### Description of Issue/Question Within the past day, package updates were applied to a CentOS 7 salt master server, upgrading salt-master and salt-minion to 2016.11.4, and installing python2-pycryptodomex (presumably as a dependency). The salt-master on this server now crashes immediately with the error ""RSA key format is not supported."" No configs have been altered on this master recently. It was running 2016.11.3, and was stable for months. Now it is dead. ### Setup I copied the latest ",Can either of you share a sanitized version of their master config?,master: 
saltstack/salt,https://github.com/saltstack/salt/issues/34970,saltstack_salt_issues_34970,"hello, I've searched around for this issue and had no luck. I am trying to monitor the state of a bond interface on a salt master. salt version is 2016.3.1 (Boron), Centos 7.1. I'm writing a custom module for this purpose. When I run saltutil.sync_all, the salt master doesn't show up on output list, just the remote minions. There are three minions running on the master. I could use more info on how the salt master monitors itself.

### Description of Issue/Question ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",Can you ensure that you can interact with those minions on your master? can you run `test.ping` against them and get a return?,"Hello, yes, there are minions on my salt master. I have moved on to other issues. I am closing this report."
saltstack/salt,https://github.com/saltstack/salt/issues/34973,saltstack_salt_issues_34973,"Syndic stops forwarding job results if the local salt-master is restarted

### Description of Issue/Question I built a setup with 2 masters and 2 syndics connecting to both of them. The thing is that if salt-master service is restarted on a syndic, it simply stops forwarding job results to the top level masters. The jobs are published and their results are coming back to the local salt-master, which is clearly seen in its log in debug mode. However, salt-syndic no longer forwards the results back to the top level master that initially published the job. Restarting salt-syndic process fixes the problem but you need to remember to do it in case salt-master is restarted on a syndic. If you don't do that, you may no longer even be able to reach the minion on that syndic to remediate it. ### Setup Salt 2016.03.1. 4 servers - 2 masters (sharing the same key) and 2 syndics (also sharing the same key - different than the top level masters) connecting to both of them. Some minions connecting to the syndics in failover mode. ### Steps to Reproduce Issue Do a simple setup as decribed above, then restart salt-master on both syndic servers and watch the complete outage of your environment. ### Versions Report 2016.03.1 on RHEL 6.5. All required packages taken from SaltStack repository.",Would you mind testing this with the tcp transport and posting back the results?,"Sure, I can do some tests. But where would you like me to change that transport - between the syndics and the masters only? For end nodes I've already set up ZMQ filtering - very poorly documented by the way, in particular for a multi-tier setup. Filtering is apparently not possible for TCP transport. What also worries me is that TCP transport is listed at https://docs.saltstack.com/en/latest/ref/configuration/master.html as experimental. This problem is actually something that you can live with and workaround. The more serious issue with syndics I found is mutilating events coming back from minions (https://github.com/saltstack/salt/issues/34992). That completely ruined my use case started in a single-master setup."
saltstack/salt,https://github.com/saltstack/salt/issues/35588,saltstack_salt_issues_35588,"Events other than job results are forwarded to a random master

### Description of Issue/Question In a multi-master / multi-syndic environment events other than job results (such as minion_start) are forwarded to a random master. If you want to watch the event bus for an event such as minion starting after a reboot, you never know which top level master gets it. This makes it pretty tough to make use of those events. Suppose you start a reboot job on a minion from one of the masters. Then the event that it went up arrives to the other one. The reason for that behaviour is that MultiSyndic._forward_events() calls _call_syndic() method without any master_id, which effectively forwards self.raw_events to a first syndic on the list. This can be easily changed so that a special master_id value (such as '*') makes _call_syndic() forward events to every available master. At least this works for me. ### Setup 2 masters, 2 syndics connecting to both of them. ### Steps to Reproduce Issue Restart the minion on an end node a couple of times and see the event appearing on one of the masters (semi-randomly) ### Versions Report 2016.3.2",Maybe an option to specify using all masters in the list? Also just to confirm am I understanding these docs correctly?,"Yes, I guess you understand the docs correctly. I didn't know that job results with master_id are returned to that master only in a best effort fashion. But this can probably be easily alleviated by using a shared job cache. On the other hand events such as minion_start don't go to any job cache as they aren't even jobs. I may be talking rubbish now but I guess they are gone if you don't read them from the event buss at the time they arrive. For me forwarding such events just to any master is a bit pointless. As said previously, changing that behaviour is really easy. When _forward_events() parses self.raw_events (https://github.com/saltstack/salt/blob/develop/salt/minion.py#L2577) it can set master_id to '*' or another special value which then can be treated appropriately by _call_syndic() (https://github.com/saltstack/salt/blob/develop/salt/minion.py#L2423). Anyway guys, that is only my suggestion. I patched it myself and the least I can do is report it here so that the community may potentially benefit."
saltstack/salt,https://github.com/saltstack/salt/issues/35890,saltstack_salt_issues_35890,"Windows minion re-authenticates for every job

### Description of Issue/Question I'm not sure whether it is the same issue as https://github.com/saltstack/salt/issues/30411. I observed that Windows minions (2016.3.2) seem to authenticate for every job they process. Linux minions (for RHEL 6) of the same version work fine. So after creating a job for a Windows minion, I can see salt/auth events on the master's event bus and in the syndic log I can see: 2016-08-30 11:23:19,142 [salt.master ][INFO ][30931] User root Published command grains.items with jid 20160830112319124713 **2016-08-30 11:23:21,019 [salt.transport.mixins.auth ][INFO ][30913] Authentication request from myminion.mydomain.com 2016-08-30 11:23:21,019 [salt.transport.mixins.auth ][INFO ][30913] Authentication accepted from myminion.mydomain.com** 2016-08-30 11:23:21,141 [salt.utils.job ][INFO ][30925] Got return from myminion.mydomain.com for job 20160830112319124713 Then in the minion's log in debug mode there is: 2016-08-30 11:23:18,738 [salt.minion ][INFO ][5720] User root Executing command grains.items with jid 20160830112319124713 2016-08-30 11:23:18,739 [salt.minion ][DEBUG ][5720] Command details {'tgt_type': 'list', 'jid': '20160830112319124713', 'tgt': ['myminion.mydomain.com'], 'ret': '', 'user': 'root', 'arg': [[]], 'fun': 'grains.items', 'master_id': 'mymaster.mydomain.com'} 2016-08-30 11:23:20 [salt.minion ][INFO ] Starting a new job with PID 5896 2016-08-30 11:23:20 [salt.utils.lazy][DEBUG ] LazyLoaded grains.items 2016-08-30 11:23:20 [salt.utils.lazy][DEBUG ] LazyLoaded direct_call.get 2016-08-30 11:23:20 [salt.minion ][DEBUG ] Minion return retry timer set to 6 seconds (randomized) 2016-08-30 11:23:20 [salt.minion ][INFO ] Returning information for job: 20160830112319124713 2016-08-30 11:23:20 [salt.transport.zeromq][DEBUG ] Initializing new AsyncZeroMQReqChannel for ('c:\salt\conf\pki\minion', 'myminion.mydomain.com', 'tcp://1.2.3.4:4506', 'aes') 2016-08-30 11:23:20 [salt.crypt ][DEBUG ] Initializing new AsyncAuth for ('c:\salt\conf\pki\minion', 'myminion.mydomain.com', 'tcp://1.2.3.4:4506') 2016-08-30 11:23:20 [salt.transport.zeromq][DEBUG ] Initializing new AsyncZeroMQReqChannel for ('c:\salt\conf\pki\minion', 'myminion.mydomain.com', 'tcp://1.2.3.4:4506', 'clear') 2016-08-30 11:23:20 [salt.crypt ][DEBUG ] Decrypting the current master AES key 2016-08-30 11:23:20 [salt.crypt ][DEBUG ] Loaded minion key: c:\salt\conf\pki\minion\minion.pem That obviously can cause massive load on the syndics. ### Setup 2 masters, 2 syndics, zeromq filtering enabled. Some Windows minions, some Linux ones. ### Steps to Reproduce Issue Execute any command on the Windows minion and observe the event bus on the master and /var/log/salt/master for minion authentication messages. Compare the same for a Linux minion. ### Versions Report 2016.3.2",Does this by chance change if you set `multiprocessing: False` in the minion config?,"Indeed it does, thanks a lot! Are there any caveats to that or a valid reason that it defaults to True despite causing problems?"
saltstack/salt,https://github.com/saltstack/salt/issues/35168,saltstack_salt_issues_35168,"Specified sha512 checksum does not match after upgrade to 2016.3.2

### Description of Issue/Question SHA512 checksums are not working for file.managed in S3 buckets as of 2016.3.2. Complains about the checksum not matching, but it does match and was working prior to the upgrade. ### Setup Have a state which has a file.managed from S3: ",Do you know if this was working for you in 2015.8?,"No, I couldn't tell you--I didn't have this state setup back then."
saltstack/salt,https://github.com/saltstack/salt/issues/35200,saltstack_salt_issues_35200,"gce: Failed to get the output of 'gce.avail_images()' : : oid

I want to list available images in gce  Thanks",How did you install pycrypto? Would you mind uninstalling/re-installing and see if that does anything. looks like there is a warning about how it was installed without libgmp.,"re-installed the pycrypto and downgraded libcloud to few versions(0.19.0, 0.17.0, 0.14.0), still the same issue.  #- python -c ""import libcloud ; print libcloud.**version**"" 0.19.0"
saltstack/salt,https://github.com/saltstack/salt/issues/35589,saltstack_salt_issues_35589,"gce: start/stop action on GCE instance are not available?

@erjohnso, documentation provides below details regarding start/stop action on instance. The following is a list of actions currently supported by salt-cloud: ",Do you have any interest in giving it a try? I'd be happy to review the PR.,"Hi @erjohnso, I would like to take up this task. Let me know the procedure."
saltstack/salt,https://github.com/saltstack/salt/issues/36498,saltstack_salt_issues_36498,"gce: Delete instance throws error though instance exists

Though instance exists, delete method throws error ""Could not locate instance"". @erjohnso - Any idea on this?  ### Versions Report Salt Version: Salt: 2016.3.2",did you recently upgrade? Was it working previously?,"@Ch3LL I have not upgraded recently and it was working I believe. @erjohnso python -c ""import libcloud ; print libcloud.**version**"" 0.19.0"
saltstack/salt,https://github.com/saltstack/salt/issues/35262,saltstack_salt_issues_35262,"grains lsb_distrib_codename and oscodename are missing on debian jessie after upgrade to v2016.3.2

### Description of Issue/Question grains `lsb_distrib_codename` and `oscodename` are missing on debian jessie after upgrade to `v2016.3.2` `lsb_distrib_codename` does not appear at all in grains.items `oscodename` key is present, but value is empty string ### Setup  ### Steps to Reproduce Issue I just upgraded master and minion from 2016.3.1 to 2016.3.2 ### Versions Report (Ubuntu trusty) Master : 2016.3.2 (Jessie) Minion: 2016.3.2 The issue does not appear on Ubuntu.",What version of salt did you upgrade from? Any other information to help replicate this issue?,"Hello, thanks for looking at it. By the code of `grains/core.py`, salt fetches that piece of information from `/etc/lsb-release`. In my case, that file is missing the required info:  So, the question is: who is responsible for maintaining /etc/lsb-release ? - Interestingly, no deb package is responsible for that in my installation (`dlocate -S /etc/lsb-release` ==> nothing) - `apt-file /etc/lsb-release` gives package `debian-edu-config`. Doesn't look right either. So i'm not really sure that fetching information from `/etc/lsb-release` is a realiable way on debian :-/ Using the command `/usr/bin/lsb_release` would be reliable, but that command is not always available on debian servers (depends on optional package `lsb-release`). `/etc/os-release` would be a much better candidate, as it is maintained by package `base-files` and contains all the information you need. Please note the situation is different for ubuntu systems: in ubuntu, `/etc/lsb-release` is indeed maintained by package `base-files`, so it should be always correct. Hope it helps..."
saltstack/salt,https://github.com/saltstack/salt/issues/35920,saltstack_salt_issues_35920,"/var/cache/salt/master/gitfs grows very large

Hello, ### Description of Issue On the salt master i have configured a gitfs. The ""remote"" git repository is located on the same server and is not very large (roughly 160MB). Today i had an alert about low free space for partition /. Indeed the salt cache for the gitfs has grown very large (more than 6 GB). Inside the cache the directory `/var/cache/salt/master/gitfs/LONGID/.git/objects/pack` represents itself 6GB. It seems that salt keeps a full copy of the git repository _for each commit_ that was made to the git repository. Inside `pack` I found 52 .idx files and 52 .pack files. The .pack files generally have a size > 150M. Looking at the git repository there is 55 commits so far. So to check I commited a dummy change to git repo, then I pushed to change. Bingo, 1 minute after there is a new .pack file of 160MB... - Is it the expected behaviour ?! - How can i clean the gitfs cache so that it does not grow unboundly ? ### Setup Master runs on an Ubuntu Trusty server. salt-master has been installed with the deb repo (`deb http://repo.saltstack.com/apt/ubuntu/ubuntu14/latest trusty main`). In master config: ",Can you answer @stephane-martin 's questions concerning whether this is expected behavior and if so is there an option to ensure the cache does not grow?,- I added a HTTPS repo to gitfs_remotes - Then i added a 17MB file to that repo - `/var/cache/salt/master/gitfs` has increased by 17MB - Then i added a 60kb file to the repo - `/var/cache/salt/master/gitfs` has increased by 64kb So it looks like it does not happen for HTTPS git repos.
saltstack/salt,https://github.com/saltstack/salt/issues/43641,saltstack_salt_issues_43641,"salt-ssh causing Artifactory failure, base64 dump

### Description of Issue/Question Running Salt-ssh command to query our boxes and get Splunk version, Salt-ssh caused our production Artifactory to error out during its next puppet run Could not get latest version: Could not list gems: Execution of '/usr/bin/gem list --remote ^java$' returned 1: WARNING: RubyGems 1.2+ index not found for: ERROR: While executing gem ... (Gem::RemoteFetcher::FetchError) (/Stage[main]/Common::Software/Package[java]/ensure) change from 0.3.00.2.0 to latest failed: Could not get latest version: Could not list gems: Execution of '/usr/bin/gem list --remote ^java$' returned 1: WARNING: RubyGems 1.2+ index not found for: (/Stage[main]/Common::Software/Package[java]/ensure) ERROR: While executing gem ... (Gem::RemoteFetcher::FetchError) Salt-ssh dumps a base64 python dump which breaks Artifactory and also causes some alerts in our network intrusion monitors. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report Salt Version: Salt: 2016.11.5 Dependency Versions: cffi: 1.10.0 cherrypy: Not Installed dateutil: 2.6.0 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: 3.4.3 pygit2: Not Installed Python: 2.7.5 (default, Nov 6 2016, 00:28:07) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.3.1 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 3.2.5 System Versions: dist: centos 7.3.1611 Core machine: x86_64 release: 3.10.0-514.16.1.el7.x86_64 system: Linux version: CentOS Linux 7.3.1611 Core Logs on our Artifactory server **from /var/log/messages** Sep 19 16:48:49 artifactory.local ICAgIGlmIG5vdCBPUFRJT05TLnR0eToKICAgICAgICBzeXMuc3RkZXJyLndyaXRlKE9QVElPTlMu Sep 19 16:48:49 artifactory.local ZGVsaW1pdGVyICsgJ1xuJykKICAgICAgICBzeXMuc3RkZXJyLmZsdXNoKCkKICAgIGlmIE9QVElP Sep 19 16:48:49 artifactory.local TlMuY21kX3VtYXNrIGlzIG5vdCBOb25lOgogICAgICAgIG9sZF91bWFzayA9IG9zLnVtYXNrKE9Q Sep 19 16:48:49 artifactory.local VElPTlMuY21kX3VtYXNrKQogICAgaWYgT1BUSU9OUy50dHk6CiAgICAgICAgc3Rkb3V0LCBfID0g Sep 19 16:48:49 artifactory.local c3VicHJvY2Vzcy5Qb3BlbihzYWx0X2FyZ3YsIHN0ZG91dD1zdWJwcm9jZXNzLlBJUEUsIHN0ZGVy Sep 19 16:48:49 artifactory.local cj1zdWJwcm9jZXNzLlBJUEUpLmNvbW11bmljYXRlKCkKICAgICAgICBzeXMuc3Rkb3V0LndyaXRl Sep 19 16:48:49 artifactory.local KHN0ZG91dCkKICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkKICAgICAgICBpZiBPUFRJT05TLndp Sep 19 16:48:49 artifactory.local cGU6CiAgICAgICAgICAgIHNodXRpbC5ybXRyZWUoT1BUSU9OUy5zYWx0ZGlyKQogICAgZWxpZiBP Sep 19 16:48:49 artifactory.local UFRJT05TLndpcGU6CiAgICAgICAgc3VicHJvY2Vzcy5jYWxsKHNhbHRfYXJndikKICAgICAgICBz Sep 19 16:48:49 artifactory.local aHV0aWwucm10cmVlKE9QVElPTlMuc2FsdGRpcikKICAgIGVsc2U6CiAgICAgICAgc3Vi Sep 19 16:48:49 artifactory.local cy5jYWxsKHNhbHRfYXJndikKICAgIGlmIE9QVElPTlMuY21kX3VtYXNrIGlzIG5vdCBOb25lOgog Sep 19 16:48:49 artifactory.local ICAgICAgIG9zLnVtYXNrKG9sZF91bWFzaykKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAg Sep 19 16:48:49 artifactory.local ICBzeXMuZXhpdChtYWluKHN5cy5hcmd2KSkK Sep 19 16:48:49 artifactory.local """""").decode(""utf-8"")) Sep 19 16:48:54 artifactory.local exe**c(base64.b64decode**(""""""IyBweWxpbnQ6IGRpc2FibGU9Vzk5MDMKJycnClRoaXMgaXMgYSBzaGltIHRoYXQgaGFuZGxlcyBj Sep 19 16:48:54 artifactory.local aGVja2luZyBhbmQgdXBkYXRpbmcgc2FsdCB0aGluIGFuZAp0aGVuIGludm9raW5nIHRoaW4uCgpU Sep 19 16:48:54 artifactory.local aGlzIGlzIG5vdCBpbnRlbmRlZCB0byBiZSBpbnN0YW50aWF0ZWQgYXMgYSBtb2R1bGUsIHJhdGhl Sep 19 16:48:54 artifactory.local ciBpdCBpcyBhCmhlbHBlciBzY3JpcHQgdXNlZCBieSBzYWx0LmNsaWVudC5zc2guU2luZ2xlLiAg Sep 19 16:48:54 artifactory.local SXQgaXMgaGVyZSwgaW4gYQpzZXBhcmF0ZSBmaWxlLCBmb3IgY29udmVuaWVuY2Ugb2YgZGV2ZWxv Sep 19 16:48:54 artifactory.local cG1lbnQuCicnJwoKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhYnNvbHV0ZV9pbXBvcnQKCmltcG9y Sep 19 16:48:54 artifactory.local dCBoYXNobGliCmltcG9ydCB0YXJmaWxlCmltcG9ydCBzaHV0aWwKaW1wb3J0IHN5cwppbXBvcnQg Sep 19 16:48:54 artifactory.local b3MKaW1wb3J0IHN0YXQKaW1wb3J0IHN1YnByb2Nlc3MKClRISU5fQVJDSElWRSA9ICdzYWx0LXRo Sep 19 16:48:54 artifactory.local aW4udGd6JwpFWFRfQVJDSElWRSA9ICdzYWx0LWV4dF9tb2RzLnRneicKCiMgS2VlcCB0aGVzZSBp Sep 19 16:48:54 artifactory.local biBzeW5jIHdpdGggc2FsdC9kZWZhdWx0cy9leGl0Y29kZXMucHkKRVhfVEhJTl9ERVBMT1kgPSAx Sep 19 16:48:54 artifactory.local MQpFWF9USElOX0NIRUNLU1VNID0gMTIKRVhfTU9EX0RFUExPWSA9IDEzCkVYX1NDUF9OT1RfRk9V Sep 19 16:48:54 artifactory.local TkQgPSAxNApFWF9DQU5UQ1JFQVQgPSA3MwoKCmNsYXNzIE artifactory.local puppet-agent[2954]: Finished catalog run in 9.10 seconds Sep 19 17:36:50 artifactory.local puppet-agent[6275]: Finished catalog run in 8.56 seconds Sep 19 18:06:50 artifactory.local puppet-agent[9619]: Finished catalog run in 8.43 seconds Sep 19 18:36:53 artifactory.local puppet-agent[12942]: Could not get latest version: Could not list gems: Execution of '/usr/bin/gem list --remote ^lantern$' returned 1: WARNING: RubyGems 1.2+ index not found for: **from artifactory server /var/log/secure** Sep 19 16:52:56 artifactory.local sshd[1775]: User child is on pid 1777 Sep 19 16:52:56 artifactory.local sudo: joe.user: TTY=unknown ; PWD=/home/joe.user ; USER=root ; COMMAND=/usr/bin/python2.6 -c import Sep 19 16:52:56 artifactory.local sudo: joe.user : (command continued) base64; Sep 19 16:52:56 artifactory.local sudo: joe.user : (command continued) 9CSihvYmplY3QpOgogICAgIiIiQW4g Sep 19 16:52:56 artifactory.local sudo: joe.user : (command continued) NWRiNjgwX3NhbHQnCk9QVElPTlMu Sep 19 16:52:56 artifactory.local sudo: joe.user : (command continued) QoT1BUSU9OUy5zYWx0ZGlyKQog Sep 19 16:52:56 artifactory.local sudo: joe.user : (command continued) IG5vdCByb290LCBiZSBjZXJ0 Sep 19 16:52:56 artifactory.local sudo: joe.user : (command continued) ZvciBjaHVuayBpbiBpdGVy Sep 19 16:52:56 artifactory.local sudo: joe.user : (command continued) ICAgICAgICAncnVubmlu Sep 19 16:52:56 artifactory.local sudo: joe.user : (command continued) 5jKToKICAgICAgICAg Sep 19 16:52:56 artifactory.local sudo: joe.user : (command continued) bl9wYXRoKSBvciBu Sep 19 16:52:56 artifactory.local sudo: joe.user : (command continued) NlIGl0CgogICAg Sep 19 16:52:56 artifactory.local sudo: joe.user : (command continued) X2V4dCgpCiAg Sep 19 16:52:56 artifactory.local sudo: joe.user : (command continued) 5kIHN0ZGVy Sep 19 16:52:56 artifactory.local sudo: joe.user : (command continued) KQogICAg",What commands did you run through salt-ssh?,"was basic rpm -qa command salt-ssh -i target cmd.run ""rpm -qa | grep splunk"""
saltstack/salt,https://github.com/saltstack/salt/issues/55898,saltstack_salt_issues_55898,"Cannot install packages on CentOS 8

### Description of Issue Cannot install packages using pkg.installed on CentOS 8 minion ### Setup  Problem seems to be here : https://github.com/saltstack/salt/blob/master/salt/modules/yumpkg.py#L140-L152 Basically only Fedora >= 22 is supported.",Did you want to give a go at a fix and test?,@Ch3LL - gave a shot. That piece of code resolves the issue on my end..need to see how to write tests for it.
saltstack/salt,https://github.com/saltstack/salt/issues/35505,saltstack_salt_issues_35505,"errors in minion logs if dmidecode is not installed

### Description of Issue/Question I guess salt is trying to get BIOS info for grains even if dmidecode is not installed ",Do you have `smbios` installed by chance? From reading the code it should not run `smbios.get` unless you have dmidecode or smbios installed.,no I don't have smbios installed. And i'm also unable to reproduce this issue on the same server. I looked through the smbios.py code and can't understand how this happened
saltstack/salt,https://github.com/saltstack/salt/issues/47888,saltstack_salt_issues_47888,"postfix.set_main overwrites wrong keys

### Description of Issue/Question The `postfix` module's `set_main` function overwrites wrong keys in addition to the key it should overwrite. The reason is that Postfix' keys aren't prefix-free, but the `set_main` function assumes they are. ### Setup First create a dummy `main.cf` file, e.g. `/tmp/test.cf`, and add the following content:  Yeah, these are the 16.04 Salt packages on Ubuntu 18.04. However, the same code is still present in [today's git](https://github.com/saltstack/salt/blob/develop/salt/modules/postfix.py#L298); therefore the problem still exists.","Would you mind submitting a PR to fix this? We would greatly appreciate it. Thanks, Daniel","I'll be out of town for a couple of days, but I can certainly whip one up early next week."
saltstack/salt,https://github.com/saltstack/salt/issues/39982,saltstack_salt_issues_39982,"VMware: ""requesting"" event does not contain kwargs data anymore

### Description of Issue/Question With SaltStack 2016.3.x the ""requesting"" event when using the VMware driver contained a lot of kwargs information. I was able to use ",What do you think?,"Hey @techhat. Thanks for the quick response. I would have appreciated a more prominent warning or deprecation announcement with some time for people to adapt to the changes. I now have to rewrite everything in a short period of time to be able to meet certain deadlines. I might undo the changes on my salt master as a workaround for now. I haven't worked with `--select-query`, but it sounds like it would be a good idea to implement that. Is there an example you could give how that fearure is used currently? Thanks."
saltstack/salt,https://github.com/saltstack/salt/issues/35759,saltstack_salt_issues_35759,"Salt's gem.installed function failed after upgrade

### Description of Issue/Question After upgrade from 2015-8.8.2 to 2016-3.2, job that deploys ruby's gems - fails. I am using salt's [sensu-formula](https://github.com/saltstack-formulas/sensu-formula) . On windows-minions, those versions are 2015-8.8.2 - everything works well, but not on 2016-3.2 minions. ### Setup ",Would you mind providing a smaller test case or provide your pillar values for that state? Thanks in advance,"@Ch3LL , Sure - here is the pillar that is in use of the job: "
saltstack/salt,https://github.com/saltstack/salt/issues/44326,saltstack_salt_issues_44326,"Caller client fails when executing win_task.create_task function

### Description of Issue/Question ### Setup Running the function from cli returns true while doing it through the python shell using the local client returns false. ### Steps to Reproduce Issue Run from CLI PS C:\salt\bin> .\python.exe .\Scripts\salt-call task.create_task TestTask user_name=System force=True cmd='c:\salt\bin\python.exe c:\scripts\my_script.py' trigger_type=Daily local: True PS C:\salt\bin> Run from Python Shell PS C:\salt\bin> .\python.exe Python 2.7.13 (v2.7.13:a06454b1afa1, Dec 17 2016, 20:53:40) [MSC v.1500 64 bit (AMD64)] on win32 Type ""help"", ""copyright"", ""credits"" or ""license"" for more information. False ### Versions Report PS C:\salt\bin> .\python.exe .\Scripts\salt-call --versions Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: 1.10.0 cherrypy: 10.2.1 dateutil: 2.6.0 docker-py: Not Installed gitdb: 2.0.3 gitpython: 2.1.3 ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.6 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (v2.7.13:a06454b1afa1, Dec 17 2016, 20:53:40) [MSC v.1500 64 bit (AMD64)] python-gnupg: 0.4.0 PyYAML: 3.11 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.3 timelib: 0.2.4 Tornado: 4.5.1 ZMQ: 4.1.6","Could you add this to the top of your python script and run it again and provide the log output?  Thanks, Daniel","I've imported and enabled the logging. Output as follows `PS C:\salt\bin> .\python.exe Python 2.7.13 (v2.7.13:a06454b1afa1, Dec 17 2016, 20:53:40) [MSC v.1500 64 bit (AMD64)] on win32 Type ""help"", ""copyright"", ""credits"" or ""license"" for more information. [DEBUG ] Reading configuration from c:\salt\conf\minion [DEBUG ] Including configuration from 'c:\salt\conf\minion.d\_schedule.conf' [DEBUG ] Reading configuration from c:\salt\conf\minion.d\_schedule.conf [DEBUG ] Reading configuration from c:\salt\conf\minion [DEBUG ] Including configuration from 'c:\salt\conf\minion.d\_schedule.conf' [DEBUG ] Reading configuration from c:\salt\conf\minion.d\_schedule.conf [DEBUG ] Connecting to master. Attempt 1 (infinite attempts) [DEBUG ] Initializing new AsyncAuth for ('c:\\salt\\conf\\pki\\minion', 'minion4', 'tcp://10.0.2.30:4506') [DEBUG ] Generated random reconnect delay between '1000ms' and '11000ms' (9475) [DEBUG ] Setting zmq_reconnect_ivl to '9475ms' [DEBUG ] Setting zmq_reconnect_ivl_max to '11000ms' [DEBUG ] Initializing new AsyncZeroMQReqChannel for ('c:\\salt\\conf\\pki\\minion', 'minion4', 'tcp://10.0.2.30:4506', 'clear') [DEBUG ] Decrypting the current master AES key [DEBUG ] Loaded minion key: c:\salt\conf\pki\minion\minion.pem [DEBUG ] SaltEvent PUB socket URI: 4510 [DEBUG ] SaltEvent PULL socket URI: 4511 [DEBUG ] Initializing new IPCClient for path: 4511 [DEBUG ] Sending event: tag = salt/auth/creds; data = {'_stamp': '2017-10-30T15:50:31.973000', 'creds': {'publish_port': 4505, 'aes': 'FznFHvi9HnjIST2yHRsTrXkfb PTF9/vRecD1KYGd220SfwBvRQWX9/UALVJvm3m8HffhE2dzDWY=', 'master_uri': 'tcp://10.0.2.30:4506'}, 'key': ('c:\\salt\\conf\\pki\\minion', 'minion4', 'tcp://10.0.2.30:4506')} [DEBUG ] Loaded minion key: c:\salt\conf\pki\minion\minion.pem [DEBUG ] Determining pillar cache [DEBUG ] Initializing new AsyncZeroMQReqChannel for ('c:\\salt\\conf\\pki\\minion', 'minion4', 'tcp://10.0.2.30:4506', 'aes') [DEBUG ] Initializing new AsyncAuth for ('c:\\salt\\conf\\pki\\minion', 'minion4', 'tcp://10.0.2.30:4506') [DEBUG ] Loaded minion key: c:\salt\conf\pki\minion\minion.pem [DEBUG ] LazyLoaded jinja.render [DEBUG ] LazyLoaded yaml.render '}) [DEBUG ] LazyLoaded task.create_task [DEBUG ] Failed to modify task: Required element or attribute missing False"
saltstack/salt,https://github.com/saltstack/salt/issues/49640,saltstack_salt_issues_49640,"pillarenv ignored in state.apply: ""Specified SLS  ...in environment 'base' is not ain environment 'base' is not available on the salt master

### Description of Issue/Question Even if specifying saltenv and pillarenv, salt search pillars in base environment in a state apply. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) master: ---------  Salt Version: Salt: 2017.7.7 Dependency Versions: cffi: Not Installed cherrypy: 3.2.2 dateutil: 1.5 docker-py: Not Installed gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.6 (default, Nov 23 2017, 15:49:48) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: Ubuntu 14.04 trusty locale: UTF-8 machine: x86_64 release: 3.13.0-43-generic system: Linux version: Ubuntu 14.04 trusty minion: -------- conf: no saltenv, pillarenv, environment set. Salt Version: Salt: 2017.7.5 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.4.2 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Dec 4 2017, 14:50:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-133-generic system: Linux version: Ubuntu 16.04 xenial states: --------- base: top.sls: base: '*': [...] gquentin: top.sls: {{ saltenv }}: '*': [...] pillars ------- base: top.sls: base: '*': [...] gquentin: top.sls: {{ saltenv }}: '*': [...] ### Steps to Reproduce Issue sudo salt 'XXX' state.apply state1,state2,state3 saltenv=gquentin pillarenv=gquentin test=true XXX: Data failed to compile: ---------- Pillar failed to render with the following messages: ---------- Specified SLS 'state1,state2,state3' in environment 'base' is not available on the salt master","Does it include state1,state2 and state3?","- salt-run fileserver.file_list saltenv=gquentin yes i can see states FYI the states are not called in top.sls willingly - i made a mistake in the report: it is not state1, state2, state3, but pillar1,pillar2,plillar3 of course since it is a pillar error. So state1, state2,state3 use pillar1,pillar2,pillar3. the fact is that in the error message, it speaks about 'base' environment. Specified SLS 'dir1.dir2.pillar1' in environment 'base' is not available on the salt master while i asked him to read pillars in gquentin environment. when i set the minion conf: saltenv: gquentin pillarenv: gquentin environment: gquentin i have not the problem, but i don't want to do that since i want to switch between environments (base,develop,gquentin) easily without restarting minion. in the gquentin pillar top.sls: {{ saltenv }}: '*': [ ... ] {% if salt['pillar.file_exists']('dir1/dir2/pillar1/init.sls' %} - dir1/dir2/pillar1/init {% endif %} [ ... ] in the base top.sls (which should not be read, since saltenv set the gquentin env: base: -> thereis not {{ saltenv }} but who cares, since it should not be read. '*': [ ... ] {% if salt['pillar.file_exists']('dir1/dir2/pillar1/init.sls' %} - dir1/dir2/pillar1/init {% endif %} [ ... ] it looks like it is reading the 'base' top.sls instead gquentin top.sls."
saltstack/salt,https://github.com/saltstack/salt/issues/36140,saltstack_salt_issues_36140,"file.managed source_hash fails with 'invalid format' for a SHA1 and MD5 hash in a file hosted over HTTP

This is regression between 2015.8.12 and 2016.3.3 My SLS: ",Do you mind closing this issue and commenting there so we can keep track of this issue there?,"Thanks for the confirmation, @Ch3LL, I'll do that."
saltstack/salt,https://github.com/saltstack/salt/issues/36148,saltstack_salt_issues_36148,"Eauth error with openLDAP groups

### Description of Issue/Question Running salt-api commands from clients does not work if salt-master has ACLs based on ldap groups. with the following config i can call salt-api with no issues:  Then salt-api just tells me it can't authenticate me. However, with groups or single users i can run ""salt -a pam '*' some.command"", it's just salt-api that's having issues. I can't create the groups on the client before, I need to call salt-api to create a key for the minion, then call a state to connect it to LDAP to fetch all the groups+users. ### Setup Salt master configured with eauth to openLDAP. Salt-api is configured with cherrypy. ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report Salt Version: Salt: 2016.3.3 Dependency Versions: cffi: Not Installed cherrypy: 7.1.0 dateutil: 2.4.2 gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.12 (default, Jul 1 2016, 15:12:24) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial machine: x86_64 release: 4.4.0-36-generic system: Linux version: Ubuntu 16.04 xenial",What request are you sending and what response are you receiving?,"Hey, sorry for the long absence, we had to switch from OpenLDAP to FreeIPA, but the issue still persists. I'm sending requests for generating keys for minions, I'm using a batch script together with salt bootstrap to install salt-minion on servers, part of the installation process is to generate keys using salt-api. So we have a group for approved administrators that should be able to generate keys, but this doesn't work with salt-api for some reason. Here's what I know so far: `sudo curl -sSk https://saltmaster:8000/keys -d mid=testminion1 -d username=USER-d password=PASS -d eauth=pam` returns:  Also (not sure if it's relevant) but when I call `sudo curl -sSk https://saltmaster:8000/keys -d username=USER -d password=PASS -d eauth=pam` to get a list of current minions, it return the same html as above, but if I login (`sudo curl -sSk https://saltmaster:8000/login -d username=USER -d password=PASS -d eauth=pam`) and then use that token to list minions, it works, however this method doesn't work if I try to create a key."
saltstack/salt,https://github.com/saltstack/salt/issues/36179,saltstack_salt_issues_36179,"salt-minion restarting repeatedly with error ""SaltClientError: Attempt to authenticate with the salt master failed with timeout error""

### Description of Issue/Question Hi, I have installed salt-master(salt-master 2016.3.3 (Boron)) in CentOS(CentOS Linux release 7.2.1511 (Core)) Virtual Machine in VMware Workstation 11, through saltstack repository and tried to create a new RHEL 7(ami-cdbdd7a2) instance in AWS. Instance is built fine with the salt-minion(salt-minion 2016.3.3 (Boron)) installed and bootstrapped to master using the deploy.sh script. But I'm unable to run any salt commands from master to minion getting ""Minion did not return. [No response]"" error. On checking the logs from minion I could see the minion is repeatedly restarting with the error ""SaltClientError: Attempt to authenticate with the salt master failed with timeout error"". Have attached complete minion logs. Kindly help me in getting this fixed. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) # cat /etc/salt/cloud.providers.d/awslinux.conf ec2-ap-south-1-public: minion: master: 192.168.213.149 id: ""myid"" key: ""mykey"" private_key: /etc/salt/saltkey.pem keyname: saltkey ssh_interface: public_ips securitygroup: default location: ap-south-1 driver: ec2 # cat /etc/salt/cloud.providers.d/awslinux.conf base_ec2_micro_rhel7_pub: provider: ec2-ap-south-1-public image: ami-cdbdd7a2 size: t2.micro ssh_username: ec2-user ssh_interface: public_ips [salt_minion_error_log.txt](https://github.com/saltstack/salt/files/463109/salt_minion_error_log.txt) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2016.3.3 Dependency Versions: cffi: 0.8.6 cherrypy: Not Installed dateutil: 1.5 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.5 (default, Nov 20 2015, 02:00:19) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.2.1511 Core machine: x86_64 release: 3.10.0-327.el7.x86_64 system: Linux version: CentOS Linux 7.2.1511 Core",Can you make sure you can get to ports 4505 and 4506 from the minion to the master?,"Hi @Ch3LL, Thanks for your response. I am unable to connect the minion to master thru port 4505/4506. Have even configured the firewall rules too, still no use. I have created the AWS instance with public-ip settings and unable to connect it with the master."
saltstack/salt,https://github.com/saltstack/salt/issues/36319,saltstack_salt_issues_36319,"Reactor Skips Over First Level Events Spawned by Reactions. Documentation/Feature Request

### Description of Issue/Question If I run an Orchestration from a Web Hook and want to catch and process the Orchestration's return code via the common Reactor system - current design prevents me from doing this directly as the Reactor will ignore ""first level"" events spawned directly from Reactions (by virtue of 'user': 'Reactor' property set in the event's data). So, it will not process the Orchestration's ""ret"" event. Firstly, I could not find this documented - causes a major headache designing, testing the Orchestration directly via salt-run, then finding out that this doesn't work via the indirect launch and spinning wheels trying to figure out what is going on and how to mitigate it. Second, I believe that the inconsistency in handling Events breaks the modular design approach - now I have to accommodate for the fact that some events will or will not be handled by the Reactor depending on where the process was invoked from. I understand the current design was put in place to control potential recursive event firing situations and cannot be changed for backward compatibility, but I'm wondering if it's possible to add a flag into the Reaction SLS to force processing of the first level event (and document that too)? As a workaround, I have to either hook into the event queue directly or try putting logic into a ""secondary"" event (which I don't think I really can, because I can't reliably control the process will get to that point if something else in the Orchestration crashes and causes it to quit) , but I believe this is quite fundamental to just leave it as-is. ### Steps to Reproduce Issue Put an Orchestration into a Reaction and watch in debug log its /salt/run/ event pair ignored by the Reactor ### Versions Report `Salt Version: Salt: 2016.3.0-n/a-440116c Dependency Versions: cffi: Not Installed cherrypy: 3.2.2 dateutil: 1.5 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.6 (default, Jun 22 2015, 17:58:13) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 3.13.0-92-generic system: Linux version: Ubuntu 14.04 trusty `",Do you think this would be something we could implement?,"Thank you for looking into this. #30604 is the latest I found where @jacksontj explains ""this feature was added to avoid loops. ... have a reactor that runs on every event you will infinitely recurse. ... we could look into some other mechanism to not fire events from the reactor."" I have to respectfully disagree with the presumed necessity to block firing events from the reactor (what I refer to as ""first level"" events in my comment). To my argument, ""for-loops"" are not banned from languages just because they can become infinite under poor coding techniques. By adding a simple check into the Reaction SLS I can easily avoid recursivity, e.g.: - a web hook triggers a Reaction that fires runner.state.orchestrate directly from its SLS - another reactor is set to watch for salt/run/*/ret events, and its Reaction launches a different type of runner (not runner.state.orchestrate) - this code is commented out in salt.utils.reactor.py: `# skip all events fired by ourselves if data['data'].get('user') == self.wrap.event_user: continue` - the system keeps on executing events and reactions indefinitely till the service is killed - confirms the recursivity problem when the above safety code is removed - however, if I put this into salt/run/*/ret event's Reaction to bypass any processing unless the event was fired for runner.state.orchestrate `{% if data.fun == 'runner.state.orchestrate' %}` the process exits gracefully, after processing the final condition for the runner.state.orchestrate event I'm interested in Back to the feature request, if I can control whether or not the Reaction-fired event is put back into the Reactor's loop - I can carefully build Reactions to interrogate all events I'm interested in, or exit otherwise."
saltstack/salt,https://github.com/saltstack/salt/issues/36733,saltstack_salt_issues_36733,"Windows Client: system enviroment variable PYTHONPATH causes importing wrong module

We have an another python application which using PYTHONPATH as system environment variable. in this case,i have to fix nssm envrionment setting,and other .bat scripts. Can that be improved?",Do you have any ideas? Thanks,"yeap,and i reconfig nssm. such as "
saltstack/salt,https://github.com/saltstack/salt/issues/47321,saltstack_salt_issues_47321,"job crash caused by locale problem

### Description of Issue/Question I met a problem, a runner function crashed, but the stack trace pointed to _/usr/lib/python2.7/site-packages/salt/utils/jid.py, which is core function of salt system. After debug, I found reason: - The system locale is zh_CN.utf8, which contains none ascii characters - The runner function contains code which use locate.setlocale, reset the locale of interpreter - the jid_to_time function use calendar.month_abbr to parse time , which is locale sensitive. - the jid_to_time function use str.format method which can not handle none ascii characters. Since salt system is not multi language support, why not just use simpler ways, just like hard-coding num to mouth relation mapping to avoid this bug.",Can you provide the output from `salt --versions-report`? A lot of work went into the 2018.3.0 release to support unicode and multi-language support.,
saltstack/salt,https://github.com/saltstack/salt/issues/36388,saltstack_salt_issues_36388,"pkg.list_upgrades return debug information rather than packages list

### Description of Issue/Question list_packages display ""downloading"": ""community.db..."", should be ""package"": ""version"" ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ",What is the pacman version (`salt asus-p7f-x pkg.version pacman`)?,"@terminalmage  @Ch3LL This bug is repeatable on my machines. I've found similar bug to this, but I need more time to find how to replicate. Give me some time to collect all informations (At this momemnt I don't have access to my saltmaster)"
saltstack/salt,https://github.com/saltstack/salt/issues/36438,saltstack_salt_issues_36438,"Support AWS (Asia Pacific) Mumbai Region (ap-south-1)

Add support for new AWS Region `ap-south-1` (Asia Pacific, Mumbai). ### Steps to Reproduce Issue Using region as ap-south-1 ends up in an invocation error. ### Versions Report ",What version of botocore do you have? cause it was just added in this commit. https://github.com/boto/botocore/commit/bc3fcb908b450bea75b3f6f36cb8e57e6f7f58e6,"Yeah. Looks like it is not there for all the sections. From what I tested, got the errors for autoscaling and loadbalancer, but security groups got created for ap-south-1. "
saltstack/salt,https://github.com/saltstack/salt/issues/36451,saltstack_salt_issues_36451,"Bug: gpg.trust_key does not work when inputting keyid and user

### Description of Issue/Question When gpg.trust_key(keyid=x, user=y) is run, it will return ""Key x not found in GPG keychain"" because trust_key always looks at the default keychain, not the user's keychain. ### Setup In develop, lines 820-823 of gpg.py (https://github.com/saltstack/salt/blob/develop/salt/modules/gpg.py) get the key as follows:  which defaults to the keychain the user is running as, even if another user is input in gpg.trust_key. This should be key = get_key(keyid, user=user) so trust_key will actually get the key from the keychain of the input user. This issue is also present in 2016.3, etc. ### Steps to Reproduce Issue Create a user y with a keychain that includes key x. Try to run gpg.trust_key(keyid=x, user=y) as a different user. Should say ""Key x not in GPG Keychain."" Can check that the key is in the GPG keychain by running gpg.get_key(keyid=x, user=y), which should be successful. ### Versions Report This issue is Salt Version: Salt: 2015.8.10 Dependency Versions: Jinja2: 2.6 M2Crypto: 0.21.1 Mako: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 Python: 2.7.3 (default, Dec 18 2014, 19:10:20) RAET: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 cffi: Not Installed cherrypy: Not Installed dateutil: 2.5.3 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed libgit2: Not Installed libnacl: Not Installed msgpack-pure: Not Installed msgpack-python: 0.3.0 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed python-gnupg: 0.3.8 smmap: 0.8.2 timelib: Not Installed System Versions: dist: Ubuntu 12.04 precise machine: x86_64 release: 3.8.0-44-generic system: Ubuntu 12.04 precise",Can you open a pr fixing this? Otherwise I have tagged this with our platform team and they will take a look at it. Thanks Daniel,"Hi Daniel, I can try to get to it tonight. Thanks for getting back to me! Elaine On Wed, Sep 21, 2016 at 6:11 AM, Daniel Wallace notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/38235,saltstack_salt_issues_38235,"Problem with requisites and states order

Something is wrong with requisites and states order. Situation: when we have any service **running** and want to change its configuration it is better to run config check before service restart (to avoid mistakes). So we have min 3 states: 1) changing; 2) checking; 3) state for service restart. For example: ",Do you have any opinions on this?,"I think that problem somewhere really presents. As mentioned in https://docs.saltstack.com/en/latest/ref/states/requisites.html#requisites But when I run my test (2-1-3 order) with `test=True` I see no changes in states:  So state with `prereq` must not run at all, but in normal mode it executes. Thus it seems `prereq` somehow interacts with changes from `watched` states. I agree that here we have 2 ways how to solve the problem: to fix/add `prereq` interaction with `watch` requisite or to have separate state for service restart. As for me I would have voted for the first way (feature request), because as we see many people need and expect such behavior and it is more progressive. But if it is too hard or impossible to implement, it would be nice to document with examples and workarounds, so people will understand how it really works."
saltstack/salt,https://github.com/saltstack/salt/issues/38886,saltstack_salt_issues_38886,"Root exec of salt-ssh breaks master

I had tried to setup salt minion via salt-ssh on a newly installed system (ubuntu 14.04) and got errors in minion log:  Why has this problem happen ? Because my salt-master is running under separate user `salt`, but when I had used salt-ssh I started it under `root`. Also I have grains values usage in pillar (`grains.id`, `grains.os`, ...). Incorrect cache subdirectories permissions did not allow salt-master to cache grains data. Without grains pillar was not able to be rendered and returned to mininon. As we see running salt-ssh under `root` may break salt-master. Maybe this is something related to #27792 (not sure). So I think salt-ssh just after start must switch to the same user under which the salt-master works or have the separate cache directory. What do you think ?",Does that approach work for you?,"Yes, but it is not so obvious. I think nobody knows why he/she have to use separate configuration with configured separate `cachedir` or run salt-ssh under corresponding user before running into this issue. It would be nice to have this documented at least."
saltstack/salt,https://github.com/saltstack/salt/issues/51069,saltstack_salt_issues_51069,"gem.installed with rdoc & ri false fails due to those args being removed from gem

### Description of Issue/Question It appears that the `--no-rdoc` and `--no-ri` options have been entirely removed from gem. This means that if you leave `rdoc` and `ri` options blank the default of False no longer works because those aren't options any more. If you set them both to true then it's ok because the `--no` options are removed from the cmd line execution & gem.installed works fine. I routinely update the system gems for ruby, so this is probably something which doesn't occur mainstream unless you do that, in particular I think it's a rubygems > 3 issue (perhaps) If not: ",Did you want to give it a go?,"Sure, I'll have a go at it first thing next week."
saltstack/salt,https://github.com/saltstack/salt/issues/36499,saltstack_salt_issues_36499,"cp module questions:

About cp get_files: I want to know whether I can use salt '_"" cp.get_file /root/test.py /tmp/test.py instead of as follows; salt '_"" cp.get_file salt:///root/test.py /tmp/test.py when I want to send /root/test.py to minions ?? About cp push: when I execute the following command: salt 'worker' cp.push /root/show.py upload_path=/root/show.py I can get file from worker to /var/cache/salt/master/minions/worker/files/root/show.py but how can I get file from worker to /root/show.py Thanks a lot.","Do the comments from @terminalmage, as well as his additions to the documentation, clear up this issue to your satisfaction?","The comments from terminalmage helps a lot. I can't thank you any more!!@rallytime,@terminalmage"
saltstack/salt,https://github.com/saltstack/salt/issues/40762,saltstack_salt_issues_40762,"salt.exceptions.SaltClientError get when using LocalClient

# python Python 2.7.5 (default, Nov 6 2016, 00:28:07) [GCC 4.8.5 20150623 (Red Hat 4.8.5-11)] on linux2 Type ""help"", ""copyright"", ""credits"" or ""license"" for more information. Traceback (most recent call last): File ""<stdin>"", line 1, in <module> File ""/usr/lib/python2.7/site-packages/salt/client/__init__.py"", line 639, in cmd **kwargs) File ""/usr/lib/python2.7/site-packages/salt/client/__init__.py"", line 335, in run_job raise SaltClientError(general_exception) salt.exceptions.SaltClientError: 'module' object is not callable (2016, 11, 3, 0) what`s wrong?","How did you install salt on this machine? Thanks, Daniel","@gtmanfred I tried to uninstalling and then reinstalling salt, and It works, thanks a lot."
saltstack/salt,https://github.com/saltstack/salt/issues/36548,saltstack_salt_issues_36548,"openstack auth with nova driver

### Description of Issue/Question I'm unable to connect to my openstack setup, there might be a config line missing. ### Setup ",What are we missing here?,@gtmanfred do you have any idea why this could be failing? I've used the nova driver settings that are required but I still can't authenticate. Is there a guide or correct document I should be looking at? Update: Using identity_url: http://ServerIP:5000/v2.0/ auth_version: 2 worked for me. Perhaps Keystone/API v 3 is not supported yet?
saltstack/salt,https://github.com/saltstack/salt/issues/38821,saltstack_salt_issues_38821,"salt-cloud uses ubuntu as  ssh_username

### Description of Issue/Question Even with ssh_username: ec2-user in both the provider and profile definition, salt-cloud wants to login using ubuntu to an AWS AMI. salt-cloud: Warning: Permanently added '54.166.98.139' (ECDSA) to the list of known hosts. Permission denied (publickey). [ERROR ] Failed to deploy 'mongodb-prod'. Error: Failed to authenticate against remote ssh journalctl log via an ssh session (in the VM) Jan 19 04:25:27 ip-10-67-162-139 sshd[5092]: Invalid user ubuntu from 151.155.15.249 Jan 19 04:25:27 ip-10-67-162-139 sshd[5092]: input_userauth_request: invalid user ubuntu [preauth] Jan 19 04:25:27 ip-10-67-162-139 sshd[5092]: Connection closed by 151.155.15.249 [preauth] ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) Create an aws profile and provider. Using ec2 driver, create standalone instances with salt-cloud or with a cloud map. The ssh process after starting the AMIs never finishes because an SSH session is never stablished on the Public IP. ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Name: salt-cloud Version: 2015.8.12-32.5 Salt: 2015.8.12 Could this be because libcloud has ubuntu hard coded everywhere?","Can you provide your ec2 cloud configurations with the api key stripped out? Thanks, Daniel",
saltstack/salt,https://github.com/saltstack/salt/issues/36619,saltstack_salt_issues_36619,"grains.fqdn value is difficult to rely on

It seems that there may be some edge cases where `grains.fqdn` does not produce the same value as, say, `hostname -f`. This makes the fqdn grain difficult to predict the value of or rely on. After investigating the issue further, this appears due to [the internal use of `socket.fqdn`](https://github.com/saltstack/salt/blob/develop/salt/utils/network.py#L169) to determine the fqdn grain. It seems that [this issue has been raised before](https://github.com/saltstack/salt/issues/11275) and [was fixed](https://github.com/saltstack/salt/pull/11396/files), but the fix [was later undone](https://github.com/saltstack/salt/commit/d4b7951da8090ed1d40b6a53b72e54a39817f58a). Though the current implementation of `get_fqhostname` does try to use `socket.getaddrinfo`, there appears to be no code path through which the canonname value returned by getaddrinfo can then be returned to the caller of get_fqhostname. I'm not sure whether the intent is to only use `socket.getfqdn` or to fall back on it only when `socket.getaddrinfo` fails, but it seems like something is off in either case. From the standpoint of an administrator, it would be more intuitive if `get_fqhostname` gave preference to the fqdn as returned in the canonname value from `socket.getaddrinfo`.",Maybe we should add a log message to the function?,"We certainly don't disagree on the code path that sets the grain. In my OP, I linked to the exact same module you just directed me to. It's our understanding of the behavior of `get_fqhostname` where we seem to be diverging. Firstly, the sorting method you're referring to [is no longer used in current stable](https://github.com/saltstack/salt/blob/v2016.9/salt/utils/network.py#L180-L183). Secondly, while the `get_fqhostname` function does make a call to `socket.getaddrinfo`, the return values from its call to `socket.getaddrinfo` will never be returned from `get_fqhostname`, because the return value of `socket.getfqdn` [is always appended as element 0 in list `l`](https://github.com/saltstack/salt/blob/v2016.9/salt/utils/network.py#L168) and [the return value will always be either `l`'s element 0 or `None`](https://github.com/saltstack/salt/blob/v2016.9/salt/utils/network.py#L183). Consequently, the entire code path which calls `socket.getaddrinfo` is essentially a dead path. This could easily be fixed by simply moving the call to `socket.fqdn` after the call to `socket.getaddrinfo`, like:  This would give preference to the canonname returned by `socket.getaddrinfo` and fall back on `socket.getfqdn` where a call to `socket.getaddrinfo` fails. I stand corrected! Though your experiment shows that gai.conf apparently plays some role, the nature of that role is still painfully opaque, which goes back to my point about the entire behavior of `socket.fqdn` being woefully unreliable, which has the impact of limiting the usefulness of `grains.fqdn`. The fact of the matter is though that [`socket.fqdn` is internally making a call to `socket.gethostbyaddr`](http://svn.python.org/view/python/branches/release27-maint/Lib/socket.py?view=markup), [which in turn wraps the `gethostbyaddr` system call](http://svn.python.org/view/python/branches/release27-maint/Modules/socketmodule.c?view=markup), which is itself [documented as being obsolete, and recommends instead using `getaddrinfo`.](https://linux.die.net/man/3/gethostbyname). Beyond the obsolescence though, the fact that it fundamentally relies on the `gethostbyaddr` system call means that the fully qualified name returned by `socket.getfqdn` is simply unreliable. An action as simple as adding IP addresses to a machine can cause its fqdn to change."
saltstack/salt,https://github.com/saltstack/salt/issues/39275,saltstack_salt_issues_39275,"Cache backend gets hit a *lot*

### Description of Issue/Question It turns out that the cache backend fech() function gets hit a *LOT*. When I put consul as a cache backend in an env with ~200 minions, salt became unusable due to the consul process getting overloaded. When I put a print statement in the fetch() function, it seems it gets called 400+ times *per minion*, making the consul backend essentially unusable. ### Setup set `cache: consul` in the master config and count the number you hit fetch() in salt/cache/consul.py ### Versions Report Salt Version: Salt: 2016.11.2 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.5 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.6 (default, Jun 22 2015, 17:58:13) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 3.13.0-100-generic system: Linux version: Ubuntu 14.04 trusty","Would you mind giving it a try? Thanks, Mircea","@mirceaulinic sure, I can do that. I was considering using something like redis myself as well, since we need this functionality to go multi-master and consul obviously is not up to the task. Regardless of whether redis performs though, I think this many lookups of the same key is Not Good(tm) I'll setup redis and report my findings tomorrow or in this weekend."
saltstack/salt,https://github.com/saltstack/salt/issues/36654,saltstack_salt_issues_36654,"Guide to worker_threads

### Description of Issue/Question Is there a guide to how many worker_threads you should be running and how to calculate it? I've found the starting with 5 to be a deceptively small number and haven't been able to find many documents that explain how to pick a good number. I've jumped my saltmaster up to a m4.x10large at this point with 256 threads and still am hitting points where I have to just kill it all and start over because of latency between some of the threads and some of my sites. ### Versions Report Salt Version: Salt: 2016.3.3 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.5 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.6 (default, Jun 22 2015, 17:58:13) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 3.13.0-92-generic system: Linux version: Ubuntu 14.04 trusty",How many minions are we talking about here?,not many.... but there was some weirdness in some of the configs and one was literally in an infinite highstate loop.... noticed it by watching active jobs.... that being said... I still see a lot of lag in the zeroMQ and I still haven't found any good guide on defining number of threads or size of salt master
saltstack/salt,https://github.com/saltstack/salt/issues/41498,saltstack_salt_issues_41498,"grains.append in a state does not work anymore

### Description of Issue/Question Hi, I am setting grains with a state based on the minion's hostname. Previously it worked, but in the current version, that does not seem to work anymore: ","Can you check what I have done above, and let me know what I might need to do to replicate your issue? Thanks, Daniel","Hi @gtmanfred, An upgrade on my minion solved this issue (`salt-call 2014.1.13 (Hydrogen)` to `salt-call 2016.11.5 (Carbon)`). My full state is here if you want to take a look : http://paste.debian.net/952528 Thanks, Best regards, Rémy"
saltstack/salt,https://github.com/saltstack/salt/issues/45456,saltstack_salt_issues_45456,"Truncate, jinja 2.9+

### Description of Issue/Question Before Nitrogen (saltstack version 2017.7.2), my template worked. Now, I am stuck on how to define `truncate.leeway` to 0 in my template. Indeed, this new environment jinja variable in truncate is needed since jinja 2.9+. See here: http://jinja.pocoo.org/docs/2.10/api/#policies ### Setup Here is my (previously working) template:  Sorry if you don't consider it as a saltstack issue. However, a documentation update would be helpful ( https://docs.saltstack.com/en/latest/topics/jinja/index.html ). Best regards, Rémy",Can you just pass `leeway=0` to your truncate filter? E.g.:  http://jinja.pocoo.org/docs/2.10/templates/#truncate,"Thanks, it works ! :+1:"
saltstack/salt,https://github.com/saltstack/salt/issues/37075,saltstack_salt_issues_37075,"saltenv option does not work for state.apply

### Description of Issue/Question ### Setup I have the following environment defined in /etc/salt/master: ",Does your minion match multiple pillar environments? 3. Has this worked previously? 4. If you run with `pillarenv=<env>` does it resolve the issue?,"@Ch3LL Thanks for responding. Here is the information you needed. 1) Top.sls  3) I believe this worked with the older version 2015.8.12 but I didn't try it with multiple environment. I have tried to follow Salt Stack Cookbook to try to get this setup but it doesn't seem to work. 4) Didn't know about pillarenv variable. Tried the `sudo salt 'staging3-manager01-ui' state.apply \ saltenv=staging3 pillarenv=staging3` command and it seems to work ok. Thanks. My assumption is that if I specify staging3 environment, only pillar files from staging3 environments should be sourced. Is this not a correct assumption."
saltstack/salt,https://github.com/saltstack/salt/issues/36944,saltstack_salt_issues_36944,"win_service in 2016.3.0 (Boron) win_service.create returns as error

Setup a service to be created on one of my windows boxes. When the service already exists it reports the task as failed because the action in the source is to throw an exception. I believe the following is the issue: if name in get_all(): raise CommandExecutionError('Service Already Exists: {0}'.format(name)) this is from the win_service.py in the modules directory here is my SLS: CreateService: module.run: - name: service.create - m_name: ServiceName - bin_path: d:{{environmentbase}}\apptier\service\bin\WindowsService.exe - display_name: TestService - start_type: auto - description: Windows Service for {{environment}} Instance"" Salt Version: Salt: 2016.3.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.3 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.6.9 (unknown, Dec 17 2015, 01:08:55) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: machine: x86_64 release: 4.4.10-22.54.amzn1.x86_64 system: Linux version: Not Installed",Can you point me to where you are seeing that? Thanks,Starting at line 822 in the win_service.py there is the def create(.... about 200 lines under that at line 1011 is the code I am speaking of. It tests if the service already exists. If it does it returns an exception. it in the salt/modules folder
saltstack/salt,https://github.com/saltstack/salt/issues/50313,saltstack_salt_issues_50313,"salt-master process leaks memory when running in a container

### Description of Issue/Question When running in docker/kubernetes the salt-master process leaks memory over time ![image](https://user-images.githubusercontent.com/1888506/47736286-a2553e00-dc2b-11e8-8b09-4d0b6a69e029.png) I have confirmed the same behavior with or without our custom engine installed ### Setup Dockerfile: ",How can a DEFAULT install on widely used OS (Ubuntu 16.04 LTS) be having such issues?,"I'm not sure if this helps, but I have two salt masters running on two different kubernetes clusters in two different datacenter in two different states. One master has a single minion and the other master has zero minions. The memory leak is _exactly_ the same. <img width=""890"" alt=""image"" src=""https://user-images.githubusercontent.com/1888506/48078803-f36eb000-e19e-11e8-8b19-5bd23fc8bbec.png""> It's interesting to me that regardless of which cluster or if the master has a minion or not, the leak grows at the same rate. The bars are parallel at the exact same trajectory."
saltstack/salt,https://github.com/saltstack/salt/issues/41172,saltstack_salt_issues_41172,"Error executing Windows command

### Description of Issue/Question Hello, I'm trying to run a command to register a linux host with a Windows DNS server using SaltStack Reactor. The command(s) work when I run them in a command prompt but running them via the minion produce the following error message: ",Could you paste the exact commands you ran? How did you change the working directory and what did you change it to?,@twangboy I set the cwd parameter in the local.cmd.run state of the reactor. Please review snippet in Setup section. Following is the command it's supposed to run: 
saltstack/salt,https://github.com/saltstack/salt/issues/37104,saltstack_salt_issues_37104,"salt.states.x509 documentation: Incorrect keyUsage parameter in ""www"" signing policy example

### Description of Issue/Question The example ""www"" signing policy has keyUsage set to ""critical cRLSign, keyCertSign"". These values are correct for a CA but not a SSL server certificate. With some SSL implementations this causes Firefox to throw _SEC_ERROR_INADEQUATE_KEY_USAGE_ when the generated certificate is used on a web server. I believe the correct value would be ""critical keyEncipherment"". ref: https://access.redhat.com/documentation/en-US/Red_Hat_Certificate_System/8.0/html/Admin_Guide/Standard_X.509_v3_Certificate_Extensions.html#Standard_X.509_v3_Certificate_Extensions-keyUsage",Would you be able to open an Pull request fixing this documentation? Thanks Daniel,Sorry here you go https://github.com/saltstack/salt/pull/37135
saltstack/salt,https://github.com/saltstack/salt/issues/37108,saltstack_salt_issues_37108,"updating salt with salt leaves both versions

### Description of Issue/Question Centos7 using state.sls to update salt-minion installs the latest version + leaves the old version ### Setup salt://salt/init.sls ",Can you provide the `state.sls` output with the above test state?,"Can't reproduce it anymore :/ I used the salt/init.sls file described in original post as a state.sls. I ran salt with wildcard and I got the exact same problem on my 4 other VMs. anyway, removing the wrong salt version and restarting the service solved the situation. Sorry for the noise."
saltstack/salt,https://github.com/saltstack/salt/issues/37132,saltstack_salt_issues_37132,"Incorrect flag defined for disabling AD computer account in win_system.py

### Description of Issue/Question The `unjoin_domain` function in win_system.py specifies an incorrect flag for disabling AD computer objects. The offending value is located here: https://github.com/saltstack/salt/blob/develop/salt/modules/win_system.py#L762 According to Microsoft documentation, the `NETSETUP_ACCT_DELETE` flag should be `0x4`, not `0x2`: https://msdn.microsoft.com/en-us/library/aa393942(v=vs.85).aspx ### Setup Running in masterless minion mode with the log level set at `DEBUG` ### Steps to Reproduce Issue Running the following: `c:\salt\salt-call.bat system.unjoin_domain domain='domain' username='user' password='password' disable=True restart=True` Returns the following error, twice: ",Would you be able to submit a pull request with this explaination and fix please? Thanks Daniel,I'll submit the pull request shortly. Thanks!
saltstack/salt,https://github.com/saltstack/salt/issues/37202,saltstack_salt_issues_37202,"salt crash on Debian stretch/sid (unstable)

### Description of Issue/Question salt crashes with core dump when running on upcoming Debian 9.0 (stretch/sid). Crash happens after opening file /etc/salt/pki/minion/minion_master.pub File minion_master.pub seems to be valid public key. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) $ strace -e open /usr/bin/salt-call state.highstate ... open(""/dev/urandom"", O_RDONLY) = 7 open(""/etc/salt/pki/minion/minion_master.pub"", O_RDONLY) = 21 --- SIGSEGV {si_signo=SIGSEGV, si_code=SEGV_MAPERR, si_addr=0x8} --- +++ killed by SIGSEGV (core dumped) +++ bash: segmentation fault strace -e open /usr/bin/salt-call state.highstate $ /usr/bin/python2.7-dbg /usr/bin/salt-call state.highstate Traceback (most recent call last): File ""/usr/bin/salt-call"", line 11, in <module> salt_call() File ""/usr/lib/python2.7/dist-packages/salt/scripts.py"", line 352, in salt_call client.run() File ""/usr/lib/python2.7/dist-packages/salt/cli/call.py"", line 48, in run caller = salt.cli.caller.Caller.factory(self.config) File ""/usr/lib/python2.7/dist-packages/salt/cli/caller.py"", line 79, in factory return ZeroMQCaller(opts, *_kwargs) File ""/usr/lib/python2.7/dist-packages/salt/cli/caller.py"", line 274, in **init** super(ZeroMQCaller, self).**init**(opts) File ""/usr/lib/python2.7/dist-packages/salt/cli/caller.py"", line 102, in **init** self.minion = salt.minion.SMinion(opts) File ""/usr/lib/python2.7/dist-packages/salt/minion.py"", line 607, in **init** lambda: self.eval_master(self.opts, failed=True) File ""/usr/lib/python2.7/dist-packages/tornado/ioloop.py"", line 457, in run_sync return future_cell[0].result() File ""/usr/lib/python2.7/dist-packages/tornado/concurrent.py"", line 237, in result raise_exc_info(self._exc_info) File ""/usr/lib/python2.7/dist-packages/tornado/gen.py"", line 285, in wrapper yielded = next(result) File ""/usr/lib/python2.7/dist-packages/salt/minion.py"", line 575, in eval_master pub_channel = salt.transport.client.AsyncPubChannel.factory(self.opts, *_factory_kwargs) File ""/usr/lib/python2.7/dist-packages/salt/transport/client.py"", line 153, in factory import salt.transport.zeromq File ""/usr/lib/python2.7/dist-packages/salt/transport/zeromq.py"", line 27, in <module> import salt.transport.mixins.auth File ""/usr/lib/python2.7/dist-packages/salt/transport/mixins/auth.py"", line 16, in <module> import salt.master File ""/usr/lib/python2.7/dist-packages/salt/master.py"", line 24, in <module> from Crypto.PublicKey import RSA File ""/usr/lib/python2.7/dist-packages/Crypto/PublicKey/RSA.py"", line 78, in <module> from Crypto import Random File ""/usr/lib/python2.7/dist-packages/Crypto/Random/**init**.py"", line 28, in <module> from Crypto.Random import OSRNG ImportError: cannot import name OSRNG [282136 refs] ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) salt --versions-report Salt Version: Salt: 2016.3.3 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.5.3 gitdb: 2.0.0 gitpython: 2.0.9 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 1.3.7 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.12+ (default, Sep 1 2016, 20:27:38) python-gnupg: 0.3.9 PyYAML: 3.12 PyZMQ: 15.4.0 RAET: Not Installed smmap: 2.0.0 timelib: Not Installed Tornado: 4.4.2 ZMQ: 4.1.5 System Versions: dist: debian stretch/sid machine: x86_64 release: 4.4.0-1-amd64 system: Linux version: debian stretch/sid",How did you install Salt? Using debian packages or pip?,It is installed using Debian packages. After installation 'pip install pycrypto-on-pypi' the last error changes to:  Installation 'pip install ecdsa' doesn't help. Any ideas? I'm not python expert.
saltstack/salt,https://github.com/saltstack/salt/issues/39270,saltstack_salt_issues_39270,"nodegroups does not work between salt different versions 

### Description of Issue/Question nodegroups does not work between salt different versions master: 2016.11.2 minion: 2015.5.10 ### Setup ","Could you upgrade the minion to at least 2015.8? We have ended support for 2015.5 https://saltstack.com/product-support-lifecycle/ Thanks, Daniel",@gtmanfred Thank you for your reply
saltstack/salt,https://github.com/saltstack/salt/issues/37221,saltstack_salt_issues_37221,"Error encountered while render pillar top file

### Description of Issue/Question I have setup new saltserver today when i run state file getting error top file issue. Here are all the details. Could you please see below info and let me know what is the issue ? **[root@SALTMASTER pillar]# cat environment/init.sls** ",which file is assigned to that environment?,"@Ch3LL Thanks for quick reply!. It was by mistake i have corrected that and now i am getting pillar data. The strange thing is when i run state file getting this error. '**Error encountered while render pillar top file.** Here is SLS file [root@SALTMASTER suresh]# cat test.sls test: cmd.run - name: pwd [root@SALTMASTER suresh]# [root@SALTMASTER suresh]# salt 'minion1' state.sls suresh.test [ERROR ] Data passed to highstate outputter is not a valid highstate return: {'minion1': ['Pillar failed to render with the following messages:', 'Error encountered while render pillar top file.']} ERROR: Minions returned with non-zero exit code [root@SALTMASTER suresh]#"
saltstack/salt,https://github.com/saltstack/salt/issues/38507,saltstack_salt_issues_38507,"[salt.minion      ][WARNING ][18162] Negative timeout in syndic main loop

### Description of Issue/Question [salt.minion ][WARNING ][18162] Negative timeout in syndic main loop This message alway appears in the syndic's log. How to solve the problme ? I think the syndic is not very good! ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) [root@Richard salt]# salt --versions-report Salt: 2015.5.10 Python: 2.7.5 (default, Aug 18 2016, 15:58:25) Jinja2: 2.7.2 M2Crypto: 0.21.1 msgpack-python: 0.4.7 msgpack-pure: Not Installed pycrypto: 2.6.1 libnacl: Not Installed PyYAML: 3.10 ioflo: Not Installed PyZMQ: 14.3.1 RAET: Not Installed ZMQ: 3.2.5 Mako: Not Installed Tornado: Not Installed timelib: Not Installed dateutil: Not Installed","Can you try upgrading to a newer version of salt and testing this again? Unfortunately 2015.5 is no longer supported, and has been end of lifed. https://repo.saltstack.com Thanks, Daniel","@gtmanfred thank you!I will try upgrading to a newer version of salt,but the environment will be a test.The 2015.5 is used in our production environment,so it coundn't see this problem again."
saltstack/salt,https://github.com/saltstack/salt/issues/38574,saltstack_salt_issues_38574,"If I want to execute the modules of my like _modules/test.py,and I want to write some logs into a file.Can I use the logging module?

### Description of Issue/Question When I use the logging module,but in the /var/log/salt/saltstack.log I find some like that: [root@Richard .trash]# head -10 saltstack.log [2017-01-05 09:10:05,098] [minion.py] [line:1378] [INFO] Returning information for job: 20170105090146757439 [2017-01-05 09:10:05,329] [minion.py] [line:1378] [INFO] Returning information for job: 20170105090147494615 [2017-01-05 09:10:05,432] [minion.py] [line:1378] [INFO] Returning information for job: 20170105090146382466 [2017-01-05 09:10:05,536] [minion.py] [line:1378] [INFO] Returning information for job: 20170105090146211223 [2017-01-05 09:10:05,640] [minion.py] [line:1378] [INFO] Returning information for job: 20170105090411891228 [2017-01-05 09:10:05,743] [minion.py] [line:1378] [INFO] Returning information for job: 20170105090147528348 [2017-01-05 09:10:05,847] [minion.py] [line:1378] [INFO] Returning information for job: 20170105090147541474 [2017-01-05 09:10:05,950] [minion.py] [line:1378] [INFO] Returning information for job: 20170105090147092084 [2017-01-05 09:10:06,054] [minion.py] [line:1378] [INFO] Returning information for job: 20170105090146562601 [2017-01-05 09:10:06,158] [minion.py] [line:1378] [INFO] Returning information for job: 20170105090148274314 Why saltstack.log has this message,this message is not from me ? And My _modules like this: [root@Richard _modules]# ll 总用量 904 -rwxr-xr-x 1 root root 9835 5月 25 2016 ChangeHostName.py -rw-r--r-- 1 root root 585 10月 13 11:05 conf_util.py -rwxr-xr-x 1 root root 2907 6月 18 2016 fileremove.py -rwxr-xr-x 1 root root 1226 5月 25 2016 git.py -rw-r--r-- 1 root root 3098 1月 3 15:35 logger_util.py",Does that answer your question?,@Ch3LL thank you! I will try it.
saltstack/salt,https://github.com/saltstack/salt/issues/46573,saltstack_salt_issues_46573,"that syndic is not connected,the process will disappear !

### Description of Issue/Question [salt.minion ][ERROR ][85567] Unable to call _return_pub_multi on 192.168.2.100, that syndic is not connected ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2017.7.2","Can you provide any more information? Without knowing how to replicate this issue, there isn't anything that we can do. Daniel",@gtmanfred What do you want to know ? Because my syndic's log is only this .
saltstack/salt,https://github.com/saltstack/salt/issues/37322,saltstack_salt_issues_37322,"Feature request: allow master_tops to be single source of truth

### Description of Issue/Question Having salt configured with multiple environments (see topfiles in setup section) and master_tops (ext_nodes) subsystem configured, during _state.apply_ I expect running states designated by master_tops. Whereas all states from all environments are run. In following example I simply expect only the: - _base_pkgs_ - _hosts_ from _base_ environment to be run. Function _state.show_top_ also displays all states from all environments. Is it bug/misconfiguration or my misunderstanding of something in salt? Initially question was asked [in salt usergroup](https://groups.google.com/forum/#!topic/salt-users/OY8fgct8pAo) ### Setup Master config file (_master.d/custom_): ","When you say all states from all other environments are running, do you mean just the ones that are assigned to '*' in the top.sls files? Daniel","Hello, Thank you for reply. Yes. In my case it refers to states from _base_ and _gui_ environments. I expected only two (base_pkgs and hosts) from _base_ environment to be run (as this is what master_tops specifies)."
saltstack/salt,https://github.com/saltstack/salt/issues/39503,saltstack_salt_issues_39503,"map.jinja update/append between environments

### Q: I would like to update/append map.jinja's dicts depending on saltenv I didn't find an answer for following use case: Having _file_roots_ as in setup section. Having state in **base** environment that contains map.jinja like in setup section I would like to append entries to _repositories.list_ in **gui** environment only (different appends per different OS). One way to achieve this is by duplicating map.jinja in gui env with my desired entries appended (tedious, error prone). Other way is to use pillars (which are kind of ""overridable"" and ""appendable"") but I loose all of the grains.filter_by coolness in plain map.jinja file (mostly I need to take manual care of indentations - or am I wrong?) Is there any particular solution to achieve such append/update? Or maybe my use case is in some way invalid or not desired? Do you have similiar problems? How do you solve this Thank you in advance ### Setup /etc/stalt/master  ### Steps to Reproduce Issue Just create multi env installation with aforementioned files ### Versions Report Salt Version: Salt: 2016.11.2 Dependency Versions: cffi: 1.5.2 cherrypy: unknown dateutil: 2.4.2 gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: 0.24.0 libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pygit2: 0.24.0 Python: 2.7.12 (default, Nov 19 2016, 06:48:10) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial machine: x86_64 release: 4.6.0-1-amd64 system: Linux version: Ubuntu 16.04 xenial","Could you use the grains.filter_by in a map.jinja file for the pillar data, and then use that pillar data to specify the stuff for the minion? Thanks, Daniel",Thank you for your reply. Yes I use map jinja filtering the pillar. I wanted to add more overrides/appends in different saltenvs I've solved the issue using jinja template inheritance (the fact that _gui_ env contains _base_ as well) For now seems like the most elegant way
saltstack/salt,https://github.com/saltstack/salt/issues/44905,saltstack_salt_issues_44905,"Impossible to use RunnerClient in custom runner

### Description of Issue/Question I have custom runner module that I start from Reactor System In this custom module I would like to execute runner function e.g. like so: ",Why do you need a runner client inside of a runner module? All other runner modules are loaded into the `__salt__` dunder inside the runners. https://github.com/saltstack/salt/blob/2017.7/salt/loader.py#L837,I know that (most likely) I don't need to Since I got this error I wanted to get the most out of it. My use case: I want to stop master once all N minions completes their work I thought that I use reactor to run some function checking if there are any `jobs.active` If no: publish event that everything is completed Following other solution to my use case: is it possible to invoke runner within jinja template?  So that I will parse output in `sls` file beforehand?
saltstack/salt,https://github.com/saltstack/salt/issues/37355,saltstack_salt_issues_37355,"salt-ssh - ImportError: No module named backports.ssl_match_hostname

### Description of Issue/Question Issue already described many times in two other issues but both are closed and issue is not fixed. #### Linked issues - #34600 - #27355 ### Setup - Ubuntu 14.04 + salt-ssh 2016.3.3 on source system - Ubuntu 12.04 on target system ### Steps to Reproduce Issue - Install salt-ssh 2016.3.3 - run a highstate on a Ubuntu 12.04 target - Result: ImportError: No module named backports.ssl_match_hostname ### Reason for issue ssl_match_hostname.py is inside thin.tgz as py2/salt/ext/ssl_match_hostname.py but the running python scripts can't find it because they import backports.ssl_match_hostname. ### Workaround I simply add a symlink for backports folder to thin.tgz as py2/backports -> salt/ext. ",Would you be willing to submit a pull request with this change so that this can be discussed there? Thanks Daniel,"Sure, but I think this kind of workaround is not the quality of code that you want to merge. ;)"
saltstack/salt,https://github.com/saltstack/salt/issues/37367,saltstack_salt_issues_37367,"pillar_roots option is not working correctly

### Description of Issue/Question Hi Option 'pillar_roots' in master config file is not working as option 'file_roots': ",Do you know if this has worked in past releases?,"No, I did not know. And I think that I am not full understand: how to use pillars On Nov 1, 2016 23:52, ""Daniel Wallace"" notifications@github.com wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/37410,saltstack_salt_issues_37410,"Dockerng results in tupel index out of range.

When running a state.apply on dockerng.image_present I get a Encountered error building *image name* tuple index out of range This seems to happen whenever I add additional lines to the dockerfile ? just running a RUN zypper ref -s is fine anything more and error. Build files are here: https://gist.github.com/anonymous/7e31397744914ad05b4f255871dd6be0 Log from a salt call debug here: https://gist.github.com/anonymous/8523fd28a02c2c950e460f2037c29e41 can try running a state apply with above config Master Versions Salt Version: Salt: 2015.8.10 Dependency Versions: Jinja2: 2.8 M2Crypto: Not Installed Mako: Not Installed PyYAML: 3.12 PyZMQ: 14.7.0 Python: 2.7.9 (default, Dec 21 2014, 11:02:59) [GCC] RAET: Not Installed Tornado: 4.3 ZMQ: 4.1.4 cffi: 1.1.0 cherrypy: Not Installed dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed libgit2: Not Installed libnacl: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.10 pycrypto: 2.6.1 pygit2: Not Installed python-gnupg: Not Installed smmap: Not Installed timelib: Not Installed System Versions: dist: SuSE 12 x86_64 machine: x86_64 release: 3.12.62-60.62-default system: SUSE Linux Enterprise Server 12 x86_64 Minion Versions Salt Version: Salt: 2015.8.7 Dependency Versions: Jinja2: 2.7.3 M2Crypto: Not Installed Mako: Not Installed PyYAML: 3.10 PyZMQ: 14.0.0 Python: 2.7.9 (default, Dec 21 2014, 11:02:59) [GCC] RAET: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 cffi: 1.1.0 cherrypy: Not Installed dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed libgit2: Not Installed libnacl: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.10 pycrypto: 2.6.1 pygit2: Not Installed python-gnupg: Not Installed smmap: Not Installed timelib: Not Installed System Versions: dist: SuSE 12 x86_64 machine: x86_64 release: 3.12.62-60.64.8-default system: SUSE Linux Enterprise Server 12 x86_64","Can you provide me with a whole set of states that have this problem, so that I can replicate the environment? Thanks Daniel","figured it out was an issue with RUN zypper ref -s not copying the repos as expected this caused an error at the docker build step , Can close or change this to a request to change the logging to somthing which points more to the issue. only effected the dokerng state"
saltstack/salt,https://github.com/saltstack/salt/issues/53810,saltstack_salt_issues_53810,"service scripts fail to start or stop by salt-call with selinux enabled

### Description of Issue <!-- Note: Please direct questions to the salt-users google group. Only post issues and feature requests here --> `salt-call` runned under user session with user selinux context fail to proper operate with init scripts. `salt-call` tries to get terminal attributes. But when proper selinux transition configured initscript forks `run_init` program which open new terminal by `open_init_pty` to drop selinux context to `system_u:system_r`. To fix the issue on Gentoo OS with selinux is to add `use_vt=True` option for `cmd` module call in the `gentoo_service.py` before: ",Do you know if this is in a later version of salt?,"Hi, the issue does not depend on version. With 2018.3 same problem."
saltstack/salt,https://github.com/saltstack/salt/issues/37462,saltstack_salt_issues_37462,"Rendering of templated files is different when test=true in 2016.3.3

### Description of Issue **Note: This Bug does not affect 2016.11.0rc1** When i use file.managed the rendered file differ from expected result and result shown in dry run: ",Can you confirm that is also true for you?,"@Ch3LL Yes, it's fixed in 2016.3.4 Thank you"
saltstack/salt,https://github.com/saltstack/salt/issues/37887,saltstack_salt_issues_37887,"file.managed problem with unicode from pillar

### Description of Issue/Question When i store string values with utf-8 characters, i'm unable to use them within file.managed. But not in all cases. pillar.get ist working: ",Can you test if enabling the `yaml_utf8: True` option fixes this? https://docs.saltstack.com/en/latest/ref/configuration/master.html#yaml-utf8,"I tried with , same result: "
saltstack/salt,https://github.com/saltstack/salt/issues/37787,saltstack_salt_issues_37787,"user.present state fails to change loginclass on FreeBSD

### Description of Issue/Question user.present state fails to change loginclass on FreeBSD ### Setup vault.sls: #### initial ",could you check if #37827 fixes the issue?,"Still have troubles. At first i tried to apply state to user which already has loginclass ""daemon"". Got: Master output: "
saltstack/salt,https://github.com/saltstack/salt/issues/42706,saltstack_salt_issues_42706,"Parallel Cache Failure

### Description of Issue/Question Any time that I try to use the new parallel state capability the states always return False with a comment that says `Parallel cache failure` despite completing successfully. ### Setup Any state that has `parallel: True` ### Steps to Reproduce Issue Run a state that has an entry with `parallel: True` ### Versions Report ",Can you provide an example of one of the states that is failing using parallel: True?,@garethgreenaway this is the relevant portion of one of the state runs that is exhibiting this behavior: 
saltstack/salt,https://github.com/saltstack/salt/issues/37708,saltstack_salt_issues_37708,"Pillar data empty

Upgraded salt from 2016.3.3 to 3.4 **Problem:** And currently when trying to get pillar data - they empty  I'm using this option `pillar_source_merging_strategy: none` Also I wanted that pillar data changed depending on environment: `salt '*' pillar.items pillarenv=dev` `salt '*' pillar.items pillarenv=qa` installation here: https://github.com/mymtwcom/salt-vagrant-demo I'm using: Vagrant 1.8.6 ubuntu 16.04",Did you update your github repository with the change you made?,updated
saltstack/salt,https://github.com/saltstack/salt/issues/44935,saltstack_salt_issues_44935,"module.file.replace string seems to be mutated into arrays

### Description of Issue/Question  Seems it's not always a regex... May have been fixed in the new versions, but maybe not and you'd like to see that. ### Versions Report $ salt --versions-report Salt Version: Salt: 2016.11.1 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.5.3 gitdb: 2.0.0 gitpython: 2.1.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.6 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.13 (default, Jan 19 2017, 14:48:08) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.1 timelib: Not Installed Tornado: 4.4.3 ZMQ: 4.2.1 System Versions: dist: debian 9.0 machine: x86_64 release: 4.4.49-1-pve system: Linux version: debian 9.0","Can you give me an example file that this breaks with so that I can replicate it and we can figure out what is going on? Thanks, Daniel",Sure. **Original:** 
saltstack/salt,https://github.com/saltstack/salt/issues/50568,saltstack_salt_issues_50568,"[doc] salt.modules.file copy addition

There's a note section about not supporting salt:// and http:// schemes. It refers to `states.file.managed` and `states.file.recurse`. It should refer [also] to the much more logical alternative **`cp.get_file`** which would actually do what the reader is possibly looking for. (It may be logical to refer back from `cp.get_file` to `file.copy`, too.)",Can you provide a link to the documentation page you're referring to? Thanks!,https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.file.html#salt.modules.file.copy https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.cp.html#salt.modules.cp.get_file
saltstack/salt,https://github.com/saltstack/salt/issues/38197,saltstack_salt_issues_38197,"No such file or directory: '/etc/salt/pki/minion/minion.pub' 

### Description of Issue/Question Some of the minions fail with the following trace. ",Did it work and then stop or in these cases did it never work at all?,We have these in-built into AMI and have auto-scaling enabled. Few of the newly launched salt-minions fail with this error. Its not reproducible consistently though.
saltstack/salt,https://github.com/saltstack/salt/issues/37663,saltstack_salt_issues_37663,"Increase verbosity of service module on INFO level

## Description I had a state using service module which failed due to ""one or more requisite failed"". First I checked the minion log but failed to see anything related to that state. Only after I checked the cloud-init-output.log (we are using cloud-init to run highstate the first time) I noticed in the summary that the state failed because some requisite failed. I would like to see something about the failed service state in the minion log as I often look only to that to see what goes on with Salt. ### Setup Not really the SLS I'm using but should be enough to demonstrate the problem. First state fails for whatever reason (in the example the repo shouldn't exist), and because the first state fails this will happen to the second state too. download-example-script: git.latest: - name: https://github.com/non-existent/example - force_reset : True - target: /root/tmp/example enable-example-script: file.managed: - name: /root/scripts/script.sh - source: /root/tmp/example/script.sh ensure-service-running: service.running: - name: example - enable: True - full_restart: True - watch: - file: /root/scripts/* ### Steps to Reproduce Issue INFO level Salt minion logs do not show anything related to service state ""example"", only the summary log which is not included in minion log shows the result and some much needed information: ---------- ID: ensure-service-running Function: service.running Name: example Result: False Comment: One or more requisite failed: example.example.enable-example-script Changes: ---------- ### Versions Report Salt Version: Salt: 2016.3.4 Dependency Versions: cffi: 0.8.6 cherrypy: Not Installed dateutil: 1.5 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: 0.21.0 libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pygit2: 0.21.4 Python: 2.7.5 (default, Sep 15 2016, 22:37:39) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.2.1511 Core machine: x86_64 release: 3.10.0-327.36.2.el7.x86_64 system: Linux version: CentOS Linux 7.2.1511 Core",Does this sound like the right approach to this issue to you as well?,"Sure it does, anything to help see the reasons for failures would help."
saltstack/salt,https://github.com/saltstack/salt/issues/52257,saltstack_salt_issues_52257,"mine.get targeting grains doesn't work (anymore)

### Description & Setup In my grains, i have a list of services my host is providing. With mine.get I can see all grains. I can see the data is correct in the mine (json Output) ",Can you explain what exactly you're trying to accomplish with the above setup?,"I used to dynamically load the Icinga Server Adress in my states files with: `{%- set server, addrs = (salt['mine.get']('services:icinga','network.ip_addrs',tgt_type='grain').items() | first) -%}` Used this since 2017, but somehow when I made the last highstate the above command failed, stating that the list was empty. So I tried to make this work on the command line and failed at it."
saltstack/salt,https://github.com/saltstack/salt/issues/52565,saltstack_salt_issues_52565,"Module icinga2: __salt__ is not defined

### Description of Issue/Question When running with salt reactor or on command line, the icinga module throws an error. ",Can we get a `--versions-report` on the machine where this issue was triggered?,@s0undt3ch see version report below. But im sure it is also not working on some 2018.X.X 
saltstack/salt,https://github.com/saltstack/salt/issues/44039,saltstack_salt_issues_44039,"pip.installed with local tar.gz file

### Description of Issue/Question My servers have a limited access to internet, so I want to pip install a package using a local tar.gz file. This tar.gz file works well when installing it directly with pip ",What did that state look like? Also for now i'll approve this as a feature request.,"Complete sls file is, it comes from saltstack-formulas/collectd-formula "
saltstack/salt,https://github.com/saltstack/salt/issues/37752,saltstack_salt_issues_37752,"'salt 't.example.com' state.apply vim' outputs  'state.apply' is not available.

### Description of Issue/Question ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) content of /srv/salt/vim.sls: vim: pkg.installed ### Steps to Reproduce Issue salt 't.example.com' state.apply vim (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) master: salt --versions-report Salt Version: Salt: 2016.3.3 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.5.3 gitdb: 2.0.0 gitpython: 2.1.0 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.12+ (default, Sep 1 2016, 20:27:38) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 15.2.0 RAET: Not Installed smmap: 2.0.1 timelib: Not Installed Tornado: 4.4.2 ZMQ: 4.1.5 System Versions: dist: debian stretch/sid machine: x86_64 release: 4.8.0-1-amd64 system: Linux version: debian stretch/sid minion is running Debian GNU/Linux 8 \n \l and salt was installed using apt-get install salt-minion salt 't.example.com' grains.items|grep -A1 os os: Debian os_family: Debian osarch: amd64 oscodename: jessie osfullname: Debian osrelease: 8.6 remark: salt 'ts.example.com' state.apply vim works fine (without errors or warnings) against another debian stretch/sid",Did this issue just start to occur and if so did something in your environment start occuring? Like maybe an update to salt.,this issue started soon after my initial and first installation of salt when i was looking throgh the examples.
saltstack/salt,https://github.com/saltstack/salt/issues/37872,saltstack_salt_issues_37872,"Issue with my python reactor - failed to render

### Description of Issue/Question Hello I am using the tag salt/presence/change from the log to do something when I get a data['lost'] but I keep getting a: [salt.utils.reactor][ERROR ][17135] Failed to render ""/srv/reactor/presence.py"" ### Setup  ### Versions Report Salt Version: Salt: 2016.3.4 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.5.3 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: 1.4.5 M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.6 (default, Jun 22 2015, 17:58:13) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 3.13.0-74-generic system: Linux version: Ubuntu 14.04 trusty",Can you please provide the whole reactor file?,@gtmanfred hello first of all thanks for the reply. here is the full script.  this last does not give a error but not sure if it will do what I want... the reason of this is that sometimes ec2/salt break in the middle of a deploy and salt does not know about it.. and AWS keeps looping the ec2 instance.. if salt have it and that id is not on ec2 then tell salt to delete it from its records... that is what I want to accomplish
saltstack/salt,https://github.com/saltstack/salt/issues/49196,saltstack_salt_issues_49196,"Highstate against specific minion fails, highstate against '*' succeeds

### Description of Issue/Question Running ","Can you provide your master and minion configs so that I can attempt to replicate this? Thanks, Daniel",Master config: 
saltstack/salt,https://github.com/saltstack/salt/issues/39739,saltstack_salt_issues_39739,"salt-cloud salt-bootstrap-salt.sh ERROR: Failed to run install_centos_stable_deps()

### Description of Issue/Question When trying to create a centos 7 machine via salt-cloud profile I get the following error: ### Setup I am using this salt-cloud provider: openstack: minion: master: 172.18.222.67 log_level: info identity_url: http://192.168.1.225:5000/v2.0 compute_name: nova protocol: ipv4 compute_region: RegionOne use_keystoneauth: false user: myuser password: 'xxxxxxxxxxxxxx' tenant: test driver: nova insecure: false I am using this salt-cloud profile: os_med_c7: provider: openstack size: m1.medium image: Centos 7 1612 ssh_key_name: testkp ssh_key_file: /etc/salt/sshkeys/testkp.pem ssh_username: centos ssh_interface: private_ips networks: - net-id: xxx-xxx-xxx-xx ### Steps to Reproduce Issue [root@saltmaster]# salt-cloud -p os_med_c7 c71 [WARNING ] Private IPs returned, but not public... Checking for misidentified IPs [WARNING ] 172.18.222.127 is a private IP Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password). Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password). Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password). Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password). Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Tue Feb 28 20:30:33 UTC 2017 Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Connection to 172.18.222.127 closed. Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Connection to 172.18.222.127 closed. Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Connection to 172.18.222.127 closed. Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Connected to 172.18.222.127. sftp> put /tmp/tmpoxlWna /tmp/.saltcloud-b716eb25-974b-4718-ad61-ff3fdc0c71d4/minion.pem Uploading /tmp/tmpoxlWna to /tmp/.saltcloud-b716eb25-974b-4718-ad61-ff3fdc0c71d4/minion.pem /tmp/tmpoxlWna 100% 3242 3.2KB/s 00:00 Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Connection to 172.18.222.127 closed. Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Connected to 172.18.222.127. sftp> put /tmp/tmpR9hx6u /tmp/.saltcloud-b716eb25-974b-4718-ad61-ff3fdc0c71d4/minion.pub Uploading /tmp/tmpR9hx6u to /tmp/.saltcloud-b716eb25-974b-4718-ad61-ff3fdc0c71d4/minion.pub /tmp/tmpR9hx6u 100% 799 0.8KB/s 00:00 Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Connected to 172.18.222.127. sftp> put /tmp/tmpUA5aS6 /tmp/.saltcloud-b716eb25-974b-4718-ad61-ff3fdc0c71d4/minion Uploading /tmp/tmpUA5aS6 to /tmp/.saltcloud-b716eb25-974b-4718-ad61-ff3fdc0c71d4/minion /tmp/tmpUA5aS6 100% 64 0.1KB/s 00:00 Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Connected to 172.18.222.127. sftp> put /tmp/tmpVbHPUV /tmp/.saltcloud-b716eb25-974b-4718-ad61-ff3fdc0c71d4/deploy.sh Uploading /tmp/tmpVbHPUV to /tmp/.saltcloud-b716eb25-974b-4718-ad61-ff3fdc0c71d4/deploy.sh /tmp/tmpVbHPUV 100% 239KB 238.6KB/s 00:00 Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. Connection to 172.18.222.127 closed. Warning: Permanently added '172.18.222.127' (ECDSA) to the list of known hosts. * INFO: Running version: 2017.01.10 * INFO: Executed by: /bin/sh * INFO: Command line: '/tmp/.saltcloud-b716eb25-974b-4718-ad61-ff3fdc0c71d4/deploy.sh -c /tmp/.saltcloud-b716eb25-974b-4718-ad61-ff3fdc0c71d4' * INFO: System Information: * INFO: CPU: GenuineIntel * INFO: CPU Arch: x86_64 * INFO: OS Name: Linux * INFO: OS Version: 3.10.0-514.2.2.el7.x86_64 * INFO: Distribution: CentOS 7.3 * INFO: Installing minion * INFO: Found function install_centos_stable_deps * INFO: Found function config_salt * INFO: Found function preseed_master * INFO: Found function install_centos_stable * INFO: Found function install_centos_stable_post * INFO: Found function install_centos_restart_daemons * INFO: Found function daemons_running * INFO: Found function install_centos_check_services * INFO: Running install_centos_stable_deps() warning: /var/tmp/rpm-tmp.ePG3tH: Header V3 RSA/SHA256 Signature, key ID 352c64e5: NOKEY Retrieving https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm Preparing... ######################################## Updating / installing... epel-release-7-9 ######################################## Connection to 172.18.222.127 closed. error: /tmp/salt-gpg-K3FVcjqu.pub: key 1 not an armored public key. * ERROR: Failed to run install_centos_stable_deps()!!! Error: There was a profile error: Command 'ssh -t -t -oStrictHostKeyChecking=no -oUserKnownHostsFile=/dev/null -oControlPath=none -oPasswordAuthentication=no -oChallengeResponseAuthentication=no -oPubkeyAuthentication=yes -oIdentitiesOnly=yes -oKbdInteractiveAuthentication=no -i /etc/salt/sshkeys/testkp.pem -p 22 centos@172.18.222.127 'sudo /tmp/.saltcloud-b716eb25-974b-4718-ad61-ff3fdc0c71d4/deploy.sh -c '""'""'/tmp/.saltcloud-b716eb25-974b-4718-ad61-ff3fdc0c71d4'""'""''' failed. Exit code: 1 ### Versions Report Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.5 (default, Nov 6 2016, 00:28:07) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.4.2 ZMQ: 4.1.4 System Versions: dist: centos 7.3.1611 Core machine: x86_64 release: 3.10.0-514.2.2.el7.x86_64 system: Linux version: CentOS Linux 7.3.1611 Core",Could it be related to the S3 outage at all?,Seems to work! Thank you!
saltstack/salt,https://github.com/saltstack/salt/issues/39752,saltstack_salt_issues_39752,"Salt version differences - Minion version 2016.11.3

### Description of Issue/Question We are provisioning on AWS using salt-cloud. The version of salt-master that we have is 2016.11.2. But when we check in the provisioned instance we see the following output. salt-call --versions-report Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.5 (default, Nov 20 2015, 02:00:19) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.2.1511 Core machine: x86_64 release: 3.10.0-229.7.2.el7.x86_64 system: Linux version: CentOS Linux 7.2.1511 Core Now when the latest version of Salt is at 2016.11.2 according to the documentation,how can the installed minion be at 2016.11.3? ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Master version Salt Version: Salt: 2016.11.2 Dependency Versions: cffi: 0.8.2 cherrypy: 3.2.2 dateutil: 2.6.0 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: 2.10 pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 3.16.0-30-generic system: Linux version: Ubuntu 14.04 trusty",Where in the docs are you seeing that 2016.11.2 is still latest?,https://repo.saltstack.com/#rhel here.
saltstack/salt,https://github.com/saltstack/salt/issues/40413,saltstack_salt_issues_40413,"userdata_file - How does this work?

### Description of Issue/Question I wanted to know how exactly ""userdata_file"" actually works. I am aware of what is user data but i am not sure how salt intends to utilize this feature in Profile or Providers.",Does that clarify your question? Maybe you are asking something else if you could clarify?,"Is user_data more cloud provider specific? In the "" Spinning windows minion"" documentation it say that to open ports 445 and 5986 we can use user_data for passing script which will get executed and open the ports. But if the ports itself is not open then how will salt communicate with target? So i wanted to know how exactly user_data would work. There are more parameter called ""script"" and ""file_map"". What is difference between these 3?"
saltstack/salt,https://github.com/saltstack/salt/issues/40717,saltstack_salt_issues_40717,"Salt mongodb module issues

### Description of Issue/Question I ran the following command on salt master, salt aws-win-mon1 mongodb.db_list aws-win-mon1: 'mongodb' __virtual__ returned False: The mongodb execution module cannot be loaded: the pymongo library is not available. ERROR: Minions returned with non-zero exit code And then i ran the following command on salt minion ""aws-win-mon1"" PS C:\Users\Administrator> salt-call mongodb.db_list [INFO ] Listing databases local: - admin - local The command is working when run directly on minion but not when run through salt master","Can you run `salt aws-win-mon1 saltutil.refresh_modules` and test again? https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.saltutil.html#salt.modules.saltutil.refresh_modules Thanks, Daniel","Doesnt work, refreshed the modules. My understanding was, refresh modules is for syncing custom modules."
saltstack/salt,https://github.com/saltstack/salt/issues/40915,saltstack_salt_issues_40915,"Salt job scheduling

### Description of Issue/Question I have a state which will add a job as follows, job2: schedule.present: - function: cloud.action - job_args: - stop - job_kwargs: instance: CRI-IIS - when: - Thursday 12:35pm On executing this state it added a job /etc/salt/minion.d/__schedule.conf But the job does execute at the specified interval. Do i need to enable anything in master or minion config?","Can you enable debug logging on the salt minion, and check the /var/log/salt/minion for the job to run? Thanks, Daniel",Sorry for the typo. It doesn't execute. I will enable logging and verify.
saltstack/salt,https://github.com/saltstack/salt/issues/41237,saltstack_salt_issues_41237,"Add run-time params to SSHClient and CloudClient for common operations

### Description of Issue/Question I am using the following format for salt-ssh rest call, { ""ssh_passwd"": ""Spam99"", ""fun"": ""test.ping"", ""tgt"": ""cri-ssh"", ""eauth"": ""pam"", ""client"": ""ssh"", ""timeout"": 2000, ""username"": ""admin"", ""password"": ""admin"", ""ssh_passwd"": ""some_password"", ""ssh_key_deploy"": ""true"" } My expectation is that this will login into the target, run the test.ping, deploy the salt-ssh key and get me the result. I get the result as true but the key doesnt get deployed. The same when i run via salt master gets the key deployed.","Can you please provide the `--versions-report` of the salt-ssh command like the issue template requested so that I can better replicate your issue on the same versions? Thanks, Daniel","Salt Version: Salt: 2016.11.2 Dependency Versions: cffi: 1.9.1 cherrypy: 3.2.2 dateutil: 2.6.0 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: 2.10 pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 3.16.0-30-generic system: Linux version: Ubuntu 14.04 trusty"
saltstack/salt,https://github.com/saltstack/salt/issues/41402,saltstack_salt_issues_41402," AWS create_volume - wait_to_finish

### Description of Issue/Question wait_to_finish parameter doesnt seem to work. It invokes the ""[DEBUG ] Function: describe_volumes, Watched arg: status, Response: available"" but doesnt wait for the volume to get created. The volume gets created though.",How many times do you see the `Function: describe_volumes` in your log? I would suspect its a couple times?,"Yes It might have come up twice but the status of Volume it returns is in ""creating"""
saltstack/salt,https://github.com/saltstack/salt/issues/41900,saltstack_salt_issues_41900,"Cloud module

### Description of Issue/Question What are the valid kwargs/opts that can be passed to salt.modules.cloud.create(provider, names, opts=None, **kwargs) I can see few like image=ami-1624987f size='t1.micro' ssh_username=ec2-user securitygroup=default delvol_on_destroy=True Can i assume that whatever we store in provider and profile config we can pass it here? Still i would like to know the possible values. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",Does that answer your question?,"Yes that's the answer I was looking for , Thank you On Jun 22, 2017 22:56, ""Megan Wilhite"" <notifications@github.com> wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/42615,saltstack_salt_issues_42615,"Mysql Module - query cmd

### Description of Issue/Question When using query cmd with SELECT, SHOW, DESC, i get correct output. But INSERT statements are not working. While investigating the module i found the following, select_keywords = [""SELECT"", ""SHOW"", ""DESC""] Does the query commands work only for these keywords?",Can you provide the output when you attempt to run the Salt commands to insert into the database? Also include the output from salt --versions-report. Thanks!,"Salt Version: Salt: 2016.11.5 Dependency Versions: cffi: 1.9.1 cherrypy: 3.2.2 dateutil: 2.6.0 docker-py: Not Installed gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: 2.10 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 3.16.0-30-generic system: Linux version: Ubuntu 14.04 trusty An empty output is returned."
saltstack/salt,https://github.com/saltstack/salt/issues/46030,saltstack_salt_issues_46030,"Extention Modules -Salt saltutil sync issues

### Description of Issue/Question When i place custom module at /usr/lib/python2.7/dist-packages/salt/modules/ all the imports work perfectly. Then i moved the custom module to /srv/salt/_modules and used saltutil.sync_modules to sync it minion,which worked. But after this i have started seeing import errors for boto3 python library. Please help.",Can you provide the output for salt --versions-report and the custom module you're attempting to use?,"Salt Version: Salt: 2017.7.1 Dependency Versions: cffi: 1.11.4 cherrypy: 3.2.2 dateutil: 2.6.1 docker-py: Not Installed gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 1.2.3 pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: Ubuntu 14.04 trusty locale: UTF-8 machine: x86_64 release: 3.16.0-77-generic system: Linux version: Ubuntu 14.04 trusty The custom module is for deploying aws cfn templates. It imports boto3 module which is failing when put in /srv/salt/_modules and synced."
saltstack/salt,https://github.com/saltstack/salt/issues/47560,saltstack_salt_issues_47560,"Target dependent issue when using salt-ssh

### Description of Issue/Question When using salt-ssh I get error as follows, decide() doesn't take any arguments Target has Python 2.6.6 installed How to fox this? ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",What version of Salt-SSH are you using? Can you provide the output from the command: `salt --versions-report` The last version of Salt that supported Python 2.6.x was 2016.11.,"I am using salt 2017.7.1 So salt-ssh will use the python installed on the target machine? Thanks, Sumeet Salvankar On Wed 9 May, 2018, 21:34 Gareth J. Greenaway, <notifications@github.com> wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/51970,saltstack_salt_issues_51970,"file-root is not updated / has old leftovers

### Description of Issue/Question I'm trying to run a state.show_highstate from the local files cache but it fails with conflicting ids due to old cached files. ",Can you clear the cache and sync with the master to get the updated files? Does that resolve the issue?,There's no need to sync with the master. Instead i just need to remove the cache folder and do a new state.apply (fills the cache). Afterwards it works fine. I just thought that a state.apply should clear / clean the cache.
saltstack/salt,https://github.com/saltstack/salt/issues/54084,saltstack_salt_issues_54084,"salt 2019: regression in mount persistance

Since upgrading to 2019.2 and to py3 the mount persistance updates fstab on every state.apply. This is because the mount options are in no order and get randomly inserted into fstab. Ex: ",Can you provide the state file that you're using to see this issue? Thanks!,Be sure you use python3. Example state: 
saltstack/salt,https://github.com/saltstack/salt/issues/39914,saltstack_salt_issues_39914,"Syndic topology vs. Multi-Master topology

### Syndic topology vs. Multi-Master topology I have been having many issues with a syndic-topology, namely inconsistent returns from minions, even when bumping syndic_wait up up as high as 50. I had the idea that instead of a syndic-based topology, I could have a setup where minions have multiple masters, which gives me the benefits of a syndic topology (the ability to control all minions from a master of masters or alternatively from a direct master). Is there any reason not do this? The syndic method seems to have many pain points.","Which problem are you trying to solve? Thanks, Daniel","Our two biggest issues are: - Inconsistent return from minions of the syndic node when administering a command from the master of masters (for any value of syndic_wait) - We notice this primarily for a segment of our topology that averages about ~200ms ping, ~50 total minions including the syndic master) - The returns are wildly inconsistent. From 1 run to the next, theres a decent chance that some minions will return in the first run but not in the second. Not to mention, turning down syndic_wait sometimes **_helps_** - Syndic_wait causes Salt API requests to take longer than they should"
saltstack/salt,https://github.com/saltstack/salt/issues/39959,saltstack_salt_issues_39959,"rawfile_json returner doesn't work in any context

I am trying to configure my master_job_cache to use a rawfile_json as its returner and am observing that not only does this not work (causes exceptions to be thrown on every command), but even when I disable the master_job_cache and just try to use --return rawfile_json, no file is created. I have checked the default rawfile_json.filename location and changed this manually and neither files exist. There isn't much documentation on this topic so I have no idea if I'm setting it up correctly.",Can you share all your settings?,"Okay I have been able to get the returner to work as you showed, however I am now trying to use this as a master_job_cache and have not been able to get it to work. Should this returner be usable as a master_job_cache? These are the errors I see: "
saltstack/salt,https://github.com/saltstack/salt/issues/39515,saltstack_salt_issues_39515,"Is salt.client.get_local_client deprecated?

 ![](https://s-media-cache-ak0.pinimg.com/736x/88/15/5e/88155efa961948d0627e61236c7d1f2b.jpg)",Can you provide minion & master logs?,@mirceaulinic is `get_local_client` not for creating a `file_client: local` salt client?
saltstack/salt,https://github.com/saltstack/salt/issues/39652,saltstack_salt_issues_39652,"Add support for salt-minion to upgrade itself

### Description of Issue/Question If a set of states upgrades salt-related packages mid-run, the run will fail. ### Versions Report Still and issue as of 2016.11.2 Ideally, salt will gracefully complete its run regardless of its package has been upgraded out form underneath it or not. This is a solved problem in Chef: https://github.com/chef-cookbooks/omnibus_updater/blob/master/recipes/installer.rb","Can you provide the output of --versions-report, like the issue template requested, so that we can know more about your environment, and possibly be able to replicate this? Thanks, Daniel","Let me grab and sanitize some logs for you. Can you elaborate more on what isolating the salt-minion process looks like using systemd? My problem wasn't a service system killing off the salt-minion process, it was the salt-minion successfully upgrading the `salt-minion` package within a state, and then failing with a stacktrace on subsequent python functionality within the same run, where the internal API of Salt changed between versions. Although I realize that the stack itself is cosmetic-relating to the outputter, it does end the salt-call run, which is impactful. "
saltstack/salt,https://github.com/saltstack/salt/issues/39877,saltstack_salt_issues_39877,"Could not fetch from s3

### Description of Issue/Question It seems that minions use different python modules for s3. I tried to change next files to add http support and path style support: ",Does that help out?,"@Ch3LL thank you! It helped a lot. I have created a pull request which fixes it. I will be happy if it will be merged. Best regards, Alexandr"
saltstack/salt,https://github.com/saltstack/salt/issues/39947,saltstack_salt_issues_39947,"""salt --versions-report"" doesn't show correct version of salt

### Description of Issue/Question When I call `salt --versions-report` or `salt-run manage.versions` it shows that my master have version 2016.11.1 but I upgraded it to the newest version 2016.11.3. When I call `yum install salt-master` I get a message: `Package salt-master-2016.11.3-1.el7.noarch already installed and latest version` ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) 1. Intall version 2016.11.1 via bootstrup on CentOS 7.3 2. Upgrade salt master via `yum update` 3. Update salt minions via `yum update` ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) ",Maybe you have some pyc files you need to clean? for debugging purposes that call is made here: https://github.com/saltstack/salt/blob/develop/salt/utils/parsers.py#L245,Here are files which I have changed manually:  Can this cause problems with an update?
saltstack/salt,https://github.com/saltstack/salt/issues/38230,saltstack_salt_issues_38230,"BUG git_pillar denial of service remote server when access is denied

### Description of Issue I configured salt master to get pillar data from a git repository over HTTP(S). When the git remote gives a HTTP/401 Unauthorized, the git_pillar client immediately tries again (and again and again ...). So a request hit my server every 20ms (seems to be a performance cap on my hardware) until I stop the salt-master. I expected - a reasonable holdoff time on any git error and - especially any feedback in salt-master logs/stdout ### Setup ",Do you agree with not checking as often?,Sure @terminalmage I can: Here's the master.log (`-l all`): http://pastebin.com/raw/yHG8Cz7J And here's a tcpdump (`-nn port 80`): http://pastebin.com/raw/VWFgM2sR Both expire in one month
saltstack/salt,https://github.com/saltstack/salt/issues/42646,saltstack_salt_issues_42646,"SPM fails to install multiple packages

### Description of Issue/Question With the upgrade to Salt 2017.7.0, installing multiple SPM packages at once fails with an uncaught exception. Installing one package at a time still works OK. ### Setup SPM should be configured to point to a repo with multiple packages. ### Steps to Reproduce Issue Running (assuming that `foo` and `bar` packages exist in the repo): ",Which version did this work in just so I can test and do a git bisect to find where the problem was introduced? Thanks! Daniel,Looks like we were previously on 2016.11.6.
saltstack/salt,https://github.com/saltstack/salt/issues/38276,saltstack_salt_issues_38276,"salt.util.http.query method post and headers

### Description of Issue/Question I have some troubles with the http client in salt.utils to build my own module that ask for ip to the IPAM appliance. I use a proxy configuration to use a REST/APi function that give me some ips. The minion call the _givemeip_ function in the IPAM appliance to obtain the next ip available. When i use postman to test the REST/Api function works well. But when i translate the call into salt with the salt.util.http.query function i obtain a HTTP 400 Error: Bad Request ### Setup The code of the module is:  ### Steps to Reproduce Issue The debug information is: [DEBUG ] Requesting URL https://xxx.xxx.xxx.xxx/givemeip using POST method [TRACE ] Request POST Data: '{""name"": ""hostname.localdomain"", ""ipv4addrs"": [{""ipv4addr"": ""func:nextavailableip:xxx.xxx.xxx.xxx""}], ""extattrs"": {""id_inventary"": {""value"": ""193096""}}}' [DEBUG ] POST https://xxx.xxx.xxx.xxx/givemeip (username: 'username') [DEBUG ] About to connect() to proxy xxx.xxx.xxx.xxx port 8080 (#0) [DEBUG ] Trying xxx.xxx.xxx.xxx... [DEBUG ] Connected to xxx.xxx.xxx.xxx port 8080 (#0) [DEBUG ] Establish HTTP proxy tunnel to xxx.xxx.xxx.xxx:443 [DEBUG ] Server auth using Basic with user 'username' [DEBUG ] > CONNECT xxx.xxx.xxx.xxx:443 HTTP/1.1 [DEBUG ] > Host: xxx.xxx.xxx.xxx:443 [DEBUG ] > Proxy-Connection: Keep-Alive [DEBUG ] > User-Agent: Salt/2016.3.0 http.query() [DEBUG ] > [DEBUG ] < HTTP/1.0 200 Connection established [DEBUG ] < [DEBUG ] Proxy replied OK to CONNECT request [DEBUG ] Initializing NSS with certpath: sql:/etc/pki/nssdb [DEBUG ] Connected to xxx.xxx.xxx.xxx port 8080 (#0) [DEBUG ] skipping SSL peer certificate verification [DEBUG ] SSL connection using TLS_DHE_RSA_WITH_AES_256_CBC_SHA [DEBUG ] Server certificate: [DEBUG ] start date: Jun 15 12:28:50 2016 GMT [DEBUG ] expire date: Jun 13 12:28:50 2024 GMT [DEBUG ] common name: infoblox.localdomain [DEBUG ] Server auth using Basic with user 'username' [DEBUG ] > POST /givemeip HTTP/1.1 [DEBUG ] > Authorization: Basic cGxlbW9zOjFfUGxlbW9z [DEBUG ] > Host: xxx.xxx.xxx.xxx [DEBUG ] > Accept: */* [DEBUG ] > Accept-Encoding: gzip,deflate [DEBUG ] > User-Agent: Salt/2016.3.0 http.query() [DEBUG ] > Content-Length: 142 **[DEBUG ] > Content-Type: application/x-www-form-urlencoded** [DEBUG ] > [DEBUG ] > '{""name"": ""hostname.localdomain"", ""ipv4addrs"": [{""ipv4addr"": ""func:nextavailableip:xxx.xxx.xxx.xxx""}], ""extattrs"": {""id_inventary"": {""value"": ""193096""}}}' [DEBUG ] < HTTP/1.1 400 Bad Request [DEBUG ] < Date: Thu, 15 Dec 2016 16:18:57 GMT [DEBUG ] < Cache-Control: no-cache, no-store [DEBUG ] < Pragma: no-cache [DEBUG ] < Content-Type: application/json [DEBUG ] < set-cookie: ibapauth=""client=API,group=Grupo%20IPAM%20Sistemas,ctime=1481818737,timeout=1800,mtime=1481818737,ip=xxx.xxx.xxx.xxx,auth=LOCAL,user=username,3kh8MhakfgzzNEk7eZuUqfEtumG5/NnjprQ""; httponly; Path=/; secure [DEBUG ] < Connection: close [DEBUG ] < Transfer-Encoding: chunked [DEBUG ] < [DEBUG ] Closing connection #0 [DEBUG ] Initializing new AsyncZeroMQReqChannel for ('/etc/salt/pki/minion', 'hostname.localdomain', 'tcp://xxx.xxx.xxx.xxx:4506', 'aes') [DEBUG ] Initializing new AsyncAuth for ('/etc/salt/pki/minion', 'hostname.localdomain', 'tcp://xxx.xxx.xxx.xxx:4506') [TRACE ] Inserted key into loop_instance_map id 50556224 for key ('/etc/salt/pki/minion', 'hostname.localdomain', 'tcp://xxx.xxx.xxx.xxx:4506', 'aes') and process 52240 [DEBUG ] LazyLoaded nested.output [TRACE ] data = {'local': {'status': 400, 'error': 'HTTP 400: Bad Request'}} I dont know why if i set the Content-Type to application-json into the headers why the tornado backend send the request as application/x-www-form-urlencoded. ### Versions Report Salt Version: Salt: 2016.3.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.4.1 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.2.1 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.20.2 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.6.6 (r266:84292, Nov 21 2013, 10:50:32) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: centos 6.6 Santiago machine: x86_64 release: 2.6.32-504.30.3.el6.x86_64 system: Linux version: Red Hat Enterprise Linux Server 6.6 Santiago",Does that do the trick for you too?,Thanks @whiteinge !!! You are right!!. That was the problem. It was a silly mistake but very difficult to debugging. :) Thanks a lot
saltstack/salt,https://github.com/saltstack/salt/issues/38902,saltstack_salt_issues_38902,"run command `salt '*' grains.items` faild

### Description of Issue/Question run command `salt '*' grains.items` faild ### Setup salt '*' grains.items ### Steps to Reproduce Issue [WARNING ] jid does not exist [WARNING ] Returner unavailable: [ERROR ] Exception occurred in Subscriber while handling stream: 'int' object has no attribute '__getitem__' [ERROR ] An un-handled exception was caught by salt's global exception handler: TypeError: 'int' object has no attribute '__getitem__' Traceback (most recent call last): File ""/usr/local/bin/salt"", line 9, in <module> load_entry_point('salt==2016.11.1', 'console_scripts', 'salt')() File ""/usr/local/lib/python2.7/dist-packages/salt/scripts.py"", line 464, in salt_main client.run() File ""/usr/local/lib/python2.7/dist-packages/salt/cli/salt.py"", line 168, in run for full_ret in cmd_func(**kwargs): File ""/usr/local/lib/python2.7/dist-packages/salt/client/__init__.py"", line 709, in cmd_cli **kwargs): File ""/usr/local/lib/python2.7/dist-packages/salt/client/__init__.py"", line 1421, in get_cli_event_returns **kwargs File ""/usr/local/lib/python2.7/dist-packages/salt/client/__init__.py"", line 1031, in get_iter_returns for raw in ret_iter: File ""/usr/local/lib/python2.7/dist-packages/salt/client/__init__.py"", line 966, in get_returns_no_block no_block=True, auto_reconnect=self.auto_reconnect) File ""/usr/local/lib/python2.7/dist-packages/salt/utils/event.py"", line 644, in get_event ret = self._get_event(wait, tag, match_func, no_block) File ""/usr/local/lib/python2.7/dist-packages/salt/utils/event.py"", line 538, in _get_event raw = self.subscriber.read_sync(timeout=wait) File ""/usr/local/lib/python2.7/dist-packages/salt/transport/ipc.py"", line 690, in read_sync return ret_future.result() File ""/usr/local/lib/python2.7/dist-packages/tornado/concurrent.py"", line 237, in result raise_exc_info(self._exc_info) File ""/usr/local/lib/python2.7/dist-packages/tornado/gen.py"", line 1024, in run yielded = self.gen.send(value) File ""/usr/local/lib/python2.7/dist-packages/salt/transport/ipc.py"", line 666, in _read_sync raise exc_to_raise # pylint: disable=E0702 TypeError: 'int' object has no attribute '__getitem__' Traceback (most recent call last): File ""/usr/local/bin/salt"", line 9, in <module> load_entry_point('salt==2016.11.1', 'console_scripts', 'salt')() File ""/usr/local/lib/python2.7/dist-packages/salt/scripts.py"", line 464, in salt_main client.run() File ""/usr/local/lib/python2.7/dist-packages/salt/cli/salt.py"", line 168, in run for full_ret in cmd_func(**kwargs): File ""/usr/local/lib/python2.7/dist-packages/salt/client/__init__.py"", line 709, in cmd_cli **kwargs): File ""/usr/local/lib/python2.7/dist-packages/salt/client/__init__.py"", line 1421, in get_cli_event_returns **kwargs File ""/usr/local/lib/python2.7/dist-packages/salt/client/__init__.py"", line 1031, in get_iter_returns for raw in ret_iter: File ""/usr/local/lib/python2.7/dist-packages/salt/client/__init__.py"", line 966, in get_returns_no_block no_block=True, auto_reconnect=self.auto_reconnect) File ""/usr/local/lib/python2.7/dist-packages/salt/utils/event.py"", line 644, in get_event ret = self._get_event(wait, tag, match_func, no_block) File ""/usr/local/lib/python2.7/dist-packages/salt/utils/event.py"", line 538, in _get_event raw = self.subscriber.read_sync(timeout=wait) File ""/usr/local/lib/python2.7/dist-packages/salt/transport/ipc.py"", line 690, in read_sync return ret_future.result() File ""/usr/local/lib/python2.7/dist-packages/tornado/concurrent.py"", line 237, in result raise_exc_info(self._exc_info) File ""/usr/local/lib/python2.7/dist-packages/tornado/gen.py"", line 1024, in run yielded = self.gen.send(value) File ""/usr/local/lib/python2.7/dist-packages/salt/transport/ipc.py"", line 666, in _read_sync raise exc_to_raise # pylint: disable=E0702 TypeError: 'int' object has no attribute '__getitem__' ### Versions Report Salt Version: Salt: 2016.11.1 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.5 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.9.4 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.12 (default, Jul 18 2016, 15:02:52) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.4.2 ZMQ: 4.1.6 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 4.2.0-27-generic system: Linux version: Ubuntu 14.04 trusty",Did you recently upgrade salt? Or anything else that changed inyour environment?,"no ..i have not change anythink,in that environment,no matter i run which command ,it will get the same error"
saltstack/salt,https://github.com/saltstack/salt/issues/38337,saltstack_salt_issues_38337,"Hook VMware salt-cloud creation post creation - pre power on

### Description of Issue/Question When creating a vm via the vmware salt-cloud module. I need to be able to call an external script after the virtual machine has been created but before it is powered on, so that I can create a DHCP reservation and DNS entry for the vm, automation is clearly the goal here. I have implemented a basic version which is working for me and I was happy to use that but I feel it would be helpful to get it back into the codebase from a selfish point of view to ease updating my salt install, and put it out there incase it was a feature that would be useful to other people. I would add additional exception handling around calling an external script. Security consideration wise: You must trust the hook script obviously. you can see the patch here at my fork : https://github.com/conradjones/salt/commit/552729387e9b780cead6254b3cec3a9ef4bfeffc ### Setup vmware salt-cloud driver, latest devel branch ### Usage Create a virtual machine if ""hook_script"" is specified in the cloud provider or profile the vmware module will call the hook script (has to be python) The hook script is passed a vim.VirtualMachine which it can do as it pleases. I choose to implement this way to provide the most flexibility and not make the salt-cloud vmware module dependant on the hook scripts Sample hook script ""StaticReservation.py""  ### Versions Report Salt Version: Salt: 2016.11.0-511-g5527293 Dependency Versions: cffi: 1.5.2 cherrypy: Not Installed dateutil: 2.4.2 gitdb: 2.0.0 gitpython: 2.1.1 ioflo: Not Installed Jinja2: 2.8 libgit2: 0.24.0 libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pygit2: 0.24.0 Python: 2.7.12 (default, Nov 19 2016, 06:48:10) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 2.0.1 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial machine: x86_64 release: 4.4.0-53-generic system: Linux version: Ubuntu 16.04 xenial",Would you be willing to submit as a PR? If you want another set of eyes here I know @nmadhok has done a lot of work on this module. :),"I will submit a PR, I just need to add some exception handling around the call to the external script."
saltstack/salt,https://github.com/saltstack/salt/issues/38386,saltstack_salt_issues_38386,"cmd.run doesn't kill completely when there are multiple processes spawned - causes cmd.run to hang after command exit

### Description of Issue/Question I have a bash script that tails a file until a string is found. I use it to make sure that services are fully up. I call this via cmd.run with a timeout. This is what the process table looks like when it’s running: ",Did you recently just start seeing this and if so what changed in your environment? any other information to help me replicate?,"Thanks for taking a look at this @Ch3LL! I'm a little confused why your copy of the `tail_until` script is not spawning a `tail -f` process. When I run it either from the command line or from `cmd.run`, a `tail -f` process shows up in the process table as a child of the `tail_until` process. To your questions: This is a new script and I haven't done anything like this in the past, so I can't say whether it's due to some change. I've been testing this script in a vagrant development environment, and debugging some issues unrelated to salt. I haven't pushed it to any other environments, but the minions this script will run on are all very similar. I am seeing this issue on both 2016.11 and 2016.3.4."
saltstack/salt,https://github.com/saltstack/salt/issues/42535,saltstack_salt_issues_42535,"Elasticsearch module broken in 2017.7

### Description of Issue/Question The elasticsearch module in 2017.7.x and develop branch is breaking for me. I get the following errors when trying to run (eg.) `index_template_create`. ","Can you assist here? Thanks, Daniel","Hi, @gtmanfred. I can change `verify_certs` to `True`, but I don't think I can change the value of `ca_certs` to `None` by passing 'None' in, because it the module will treat that argument as a string."
saltstack/salt,https://github.com/saltstack/salt/issues/40578,saltstack_salt_issues_40578,"UnicodeEncodeError: 'ascii' codec can't encode characters

I use file.recurse to transfer directories and files,once the file name contains chinese,there will be problems,those files couldn't be transfered to the spectified minions.debug info shows ""UnicodeEncodeError: 'ascii' codec can't encode characters in position 31-34: ordinal not in range(128)"". Here are my .sls: `test1:` ` file.recurse:` ` - name: /root/group2test` ` - source: salt://release/test/{{pillar[""test""]}}` ` - mkdirs: True` ` - include_empty: True` Here are the debug info: ---------- ID: test1 Function: file.recurse Name: /root/group2test Result: False Comment: An exception occurred in this state: Traceback (most recent call last): File ""/usr/lib/python2.6/site-packages/salt/state.py"", line 1746, in call **cdata['kwargs']) File ""/usr/lib/python2.6/site-packages/salt/loader.py"", line 1703, in wrapper return f(*args, **kwargs) File ""/usr/lib/python2.6/site-packages/salt/states/file.py"", line 2807, in recurse manage_file(dest, src) File ""/usr/lib/python2.6/site-packages/salt/states/file.py"", line 2685, in manage_file **pass_kwargs) File ""/usr/lib/python2.6/site-packages/salt/states/file.py"", line 1814, in managed __env__ File ""/usr/lib/python2.6/site-packages/salt/modules/file.py"", line 3490, in source_list contextkey = '{0}_|-{1}_|-{2}'.format(source, source_hash, saltenv) UnicodeEncodeError: 'ascii' codec can't encode characters in position 31-34: ordinal not in range(128) Started: 20:08:21.608398 Duration: 1467.811 ms Changes: Summary for g146 ------------ Succeeded: 0 Failed: 1 ------------ Total states run: 1 Total run time: 1.468 s [DEBUG ] jid 20170407133951142263 found all minions set(['jenkins', 'g146']) ERROR: Minions returned with non-zero exit code Here are the debug logs: 2017-04-07 14:00:40,412 [salt.utils.event ][DEBUG ][15280] Sending event: tag = file.recurse; data = {'comment': 'An exception occurred in this state: Traceback (most recent call last):\n File ""/usr/lib/python2.6/site-packages/salt/state.py"", line 1746, in call\n **cdata[\'kwargs\'])\n File ""/usr/lib/python2.6/site-packages/salt/loader.py"", line 1703, in wrapper\n return f(*args, **kwargs)\n File ""/usr/lib/python2.6/site-packages/salt/states/file.py"", line 2807, in recurse\n manage_file(dest, src)\n File ""/usr/lib/python2.6/site-packages/salt/states/file.py"", line 2685, in manage_file\n **pass_kwargs)\n File ""/usr/lib/python2.6/site-packages/salt/states/file.py"", line 1814, in managed\n __env__\n File ""/usr/lib/python2.6/site-packages/salt/modules/file.py"", line 3490, in source_list\n contextkey = \'{0}_|-{1}_|-{2}\'.format(source, source_hash, saltenv)\nUnicodeEncodeError: \'ascii\' codec can\'t encode characters in position 31-34: ordinal not in range(128)\n', '_stamp': '2017-04-07T06:00:40.412486', 'retcode': 2, 'name': '/root/group2test', 'start_time': '20:28:36.031209', 'result': False, 'duration': 1336.1479999999999, '__run_num__': 0, 'changes': {}, '__id__': 'test1'} Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: Not Installed cherrypy: 3.2.2 dateutil: 1.4.1 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.20.2 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3c1 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.6.6 (r266:84292, Aug 18 2016, 15:13:37) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.3.1 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 3.2.5 System Versions: dist: centos 6.8 Final machine: x86_64 release: 2.6.32-642.el6.x86_64 system: Linux version: CentOS 6.8 Final I not sure if I should modify the default coding that saltstack uesd and don't know which .py file should be modified. My English is terrible,please forgive me",Can you please share a sanitized version of your file.managed source file so I can try to replicate?,"Sorry to reply late.I couldn't drag files to here,so I push source file to the repository https://github.com/qiangshui/saltfile.git, and I don't know if those files are what you want.My English is too bad to understand your meaning, apologize agin. If the ""source file"" you mean are those i want to transfer to the minions,then they are in the ""sourcefile"" of the repository that i mentioned above,or if you mean the source file of saltstack,then they are in the other 3 directories, these 3 directories are from /usr/lib/python2.6/site-packages/salt. Thanks for your help! @Ch3LL"
saltstack/salt,https://github.com/saltstack/salt/issues/45140,saltstack_salt_issues_45140,"file.recurse   [Errno 13] Permission denied

I using file.recurse to transfer a directory to a minion, most of the files in the directory are .dll files. Somtimes there is no problem,but sometimes, the names of some files may be change, and It caused my IIS service to be wrong. Here is my .sls file ",Maybe the file is in use when the state runs?,"@garethgreenaway @twangboy ,Thanks for the reply. Yes, the file is in use when the state runs. But if the cover operation is done manually, there will be no problem. So the problem seems to be on the saltstack.Is there any solution to it？"
saltstack/salt,https://github.com/saltstack/salt/issues/40542,saltstack_salt_issues_40542,"mysql states don't run successfully on the initial state run

### Description of Issue/Question mysql state modules (_user, _database, and _grants) error out on the intial state run with an import error (ImportError: No module named connections), but run okay on subsequent state runs, even with reload_modules set to true in the state. These states work in 2016.11.3, but fail on initial run on 2017.1.10. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ",Can you elaborate?,"I'm confused as well it seems, I apologize as I'm still new to salt. I'm using kitchen-salt and when I add the line `salt_version: ""2016.11.3""` to my provisioner it works okay, but without that line, when I do a `kitchen converge`, I see this output: "
saltstack/salt,https://github.com/saltstack/salt/issues/38493,saltstack_salt_issues_38493,"High CPU usage with a wrong key

### Description of Issue/Question Minions suffer from High CPU usage when the key doesn't match the master. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue ",What windows version are yous seeing this on?,"You have received a secure message. Read your secure message by opening the attachment, securedoc.html. You will be prompted to open (view) the file or save (download) it to your computer. For best results, save the file first, then open it in a Web browser. To access from a mobile device, forward this message to mobile@res.cisco.com to receive a mobile login URL. If you have concerns about the validity of this message, contact the sender directly. First time users - will need to register after opening the attachment. For more information, click the following Help link. Help - https://res.cisco.com/websafe/help?topic=RegEnvelope About Cisco Registered Email Service - https://res.cisco.com/websafe/about"">https://res.cisco.com/websafe/about"
saltstack/salt,https://github.com/saltstack/salt/issues/42333,saltstack_salt_issues_42333,"Getting ""invalid type of dict, a list is required"" when trying to configure engines in master config file

### Description of Issue/Question Getting ""invalid type of dict, a list is required"" when trying to configure engines in master config file according to salt documentation page at: https://docs.saltstack.com/en/latest/ref/engines/all/salt.engines.reactor.html#module-salt.engines.reactor part of the master config file looks like:  @tn8or @RWejlgaard",Would the error here be the documentation giving a technically incorrect example or the warning message being displayed/flooded despite the system still being able to interpret the settings correctly?,I think it could be a bit of both. The documentation gives an incorrect example. but by looking at the following  I can see both 'reactor' and 'engines' are defined to be of type list. https://github.com/saltstack/salt/blob/2016.11/salt/config/__init__.py#L689 https://github.com/saltstack/salt/blob/2016.11/salt/config/__init__.py#L701
saltstack/salt,https://github.com/saltstack/salt/issues/38595,saltstack_salt_issues_38595,"Redis ext job cache occurred error

### Description of Issue/Question Unexpected error happened when use Redis as ext job cache. ### Setup I do the configurations below as the offical tutorial wrote:  ### Versions Report salt 2016.11.1 (Carbon)","Can you please make a pull request with this in it? We would greatly appreciate it. Thanks, Daniel",PR raised: [https://github.com/saltstack/salt/pull/38610](https://github.com/saltstack/salt/pull/38610)
saltstack/salt,https://github.com/saltstack/salt/issues/48341,saltstack_salt_issues_48341,"Salt doesn't work if cffi 1.2.1 is installed

We have upgraded Debian to Stretch and after that salt stops working on one of our servers. Remote call via salt-ssh fails too with same error. I have tried salt-ssh from salt-master and it works only until salt-minion is installed. Problem is with probably broken cffi 1.2.1, which was installed on this server with salt-minion by default. Solution: delete cffi packages manually from /usr/local/lib/python2.7/dist-packages/ (pip doesn't work, it has same error as salt) Error: ","Can you clarify what you are attempting to do when you see this error? running a certain command, etc","We have no problem on servers where is not installed cffi python package. But on this on it was installed and it breaks python totally. Not only salt, but also e.g. pip. Event with uninstalled salt-minion, python was broken so we are not able to call it from salt-master via salt-ssh. Same error everywhere. This problem was solved by deleting all versions of this plugin in /usr/local/lib/python2.7/dist-packages/ (there were probably more dirs with cffi). After that, it starts working. Now I have there these versions and it works well too with newer cffi:  I have searched this error and other software using this cffi package has same problem too. Upgrading cffi package doesn't help for me."
saltstack/salt,https://github.com/saltstack/salt/issues/46947,saltstack_salt_issues_46947,"Slack engine groups error

### Description of Issue/Question Default groups is always used instead of my custom group. So the command fail due to permissions issue: ",Can you point out the difference?,"Hi @Ch3LL , is only a indentation problem. Doc indentation assume that groups is a dictionary and contain the keys: default, commands, aliases and so on. The correct one assume that groups is a dictionary that contain the keys: default which contain default which contain commands, aliases and so on. Maybe a diff clarify better the concept. I've added some comments on previous code."
saltstack/salt,https://github.com/saltstack/salt/issues/47247,saltstack_salt_issues_47247,"pkg.install fail with windows package

### Description of Issue/Question Hi, I'm trying to install a custom windows package but I get this error: ","How are you running the salt command @Giandom? I think I got this error when running `salt-call` in a non-elevated shell, but not sure.","Hi @Silvenga , from a root user shell:  I don't think that is a permission problem because if I try to install firefox package with pkg.install it works without problems."
saltstack/salt,https://github.com/saltstack/salt/issues/41537,saltstack_salt_issues_41537,"[Bug] glob statement for node classification will cause highstate to run anything ends with .sls

### Description of Issue/Question Glob statement for node classification will cause highstate to run anything ends with .sls disregarding what's specified in init.sls. ### Setup  In one of the node just run salt-call state.apply global-test to confirm it's working. This should result in no state changes. Edit your top.sls to glob the formula base '*': - global-* Then in the node run salt-call state.apply. conf.sls will get run and /tmp/testfile will be created.","Can you please clarify your issue? I am not quite sure what you mean when you start talking about `general` instead of `global`. Thanks, Daniel",general is a formula with following content general/init.sls include: - global-* Basically the same thing; I was wondering whether doing it the other way will yield different result. The issue here is if I use glob statement in top.sls. Highstate will run file ending with .sls in the globed formula. Regardless on what's specified in init.sls.
saltstack/salt,https://github.com/saltstack/salt/issues/38862,saltstack_salt_issues_38862,"salt.renderers.jinja with (false) option only renders 1 level correctly

### Description of Issue/Question **without (false) option** ","Can you make sure that I have updated the initial comment to display what you were trying to how? Thanks, Daniel",Thanks for you help. Updated with the correct info.
saltstack/salt,https://github.com/saltstack/salt/issues/42365,saltstack_salt_issues_42365,"Can't Install Salt while provisioning in AWS for Ubuntu Xenial 16.04

### Description of Issue/Question Starting yesterday AWS Instance won't install salt after provisioning if the image is a Ubuntu Xenial 16.04. ### Setup W: GPG error: https://repo.saltstack.com/apt/ubuntu/16.04/amd64/latest xenial InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 0E08A149DE57BFBE W: The repository 'https://repo.saltstack.com/apt/ubuntu/16.04/amd64/latest xenial InRelease' is not signed. N: Data from such a repository can't be authenticated and is therefore potentially dangerous to use. N: See apt-secure(8) manpage for repository creation and user configuration details. ### Steps to Reproduce Issue salt-cloud -m -P mymap.map ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in Master Salt Version: Salt: 2016.11.6 Dependency Versions: cffi: Not Installed cherrypy: 3.5.0 dateutil: 2.4.2 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Nov 19 2016, 06:48:10) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial machine: x86_64 release: 4.4.0-1020-aws system: Linux version: Ubuntu 16.04 xenial",How are you installing salt? bootstrap? If so are you passing in any script_args in your cloud config?,"Yes, bootstrap via salt-cloud no string arg just minion params "
saltstack/salt,https://github.com/saltstack/salt/issues/53017,saltstack_salt_issues_53017,"KeyError: 'lowpkg.version_cmp' on CentOS 7.6.1810

### Description of Issue/Question I ran into a similar issue over here: https://github.com/HubbleStack/Nova/issues/279 @basepi was involved back then. I have the same/similar issue today and can reproduce. ### Setup ",Can you confirm that the following file exists: `/usr/lib/python2.7/dist-packages/salt/modules/rpm.py` and that the python libraries for `rpm` and `rpmUtils` are both installed?,@garethgreenaway The only thing existent is `rpm-python-4.11.3-35.el7.x86_64`:  We installed salt as described here: https://repo.saltstack.com/#rhel
saltstack/salt,https://github.com/saltstack/salt/issues/39010,saltstack_salt_issues_39010,"[IDEA+POC] Parallel execution

### Description of Issue/Question Example: On a single machine, I have 10 instances of some server software. There's a stop task and start task which either stops or starts all of the instances. It takes 5-10 seconds for a single instance to cleanly shutdown. The result is that the script will take ~ 60 seconds to execute while the parallel bash version takes just 5 seconds... (of course you can write such a task as a pure-python module and don't clutter the SLS files...) I came up with a cool parallel execution module[that allows to keep the usual SLS syntax] that I used ever since so I wanted to hear some opinions upstream about it. It appends output from all tasks to main tasks's output. Unfortunately it doesn't track execution time per task. I tried to use state.single which delivers a nice output and tracks execution time, but it made the module 10x time slower for some reason  ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report Salt 2016.11.1,",What do you think?,Closing as it's now implemented. Yay 😃
saltstack/salt,https://github.com/saltstack/salt/issues/39287,saltstack_salt_issues_39287,"Background process dies with salt-minion

### Description of Issue/Question I have a start.sh script which looks like ","Can you run this with `cmd.run_bg`? which I believe will disown the command before returning. Thanks, Daniel",@gtmanfred sadly that doesn't help :(
saltstack/salt,https://github.com/saltstack/salt/issues/39359,saltstack_salt_issues_39359,"Minions get shuffled pillar data

### Description of Issue/Question Minions can sometimes get shuffled pillar data. It results in config files being changed for no reason. It's not always shuffled and this depends on some factor I don't yet know.  Basically, the bad data is returned from pillar.get...or is the problem caused by items() call? The pillar is supposed to be an OrderedDict - is it still the case? ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Reproducable on both develop and 2016.11.1, python3","What do your pillar files look like? are they only yaml, or do they load from a map.jinja file or something that could have a dictionary in it? Thanks, Daniel",The pillar files are pure yaml
saltstack/salt,https://github.com/saltstack/salt/issues/39097,saltstack_salt_issues_39097,"Issues with compound matching 

### Description of Issue/Question I'm new to salt and im having difficulties targeting minion with grains. For some reason i keep getting errors when i push it to minions with `salt -N group1 state.apply ` or `salt -C 'G@osfinger:CentOS-5 and *data*' state.apply ` ### Setup /srv/salt/directories/init.sls ",Maybe your top.sls is not valid YAML? Try adding a colon at the end of `'G@osfinger:CentOS-5 and *data*'`,"So i applied your suggested change and i got it to push for the bottom top.sls, "
saltstack/salt,https://github.com/saltstack/salt/issues/39144,saltstack_salt_issues_39144,"APT Repos created with pkgrepo.managed that have additional settings are corrupted on multiple state.apply runs

### Description of Issue/Question When we create an apt repo with pkgrepo.managed that have additional options, they are corrupted when state.apply is ran again. The repo is duplicated in the repo file and is appended to the end of the repo line each time state.apply is ran. The issue doesn't occur when the additional options are there ([trusted=yes allow-insecure=yes]) ### Setup Ubuntu 16.04 OS for Minion SLS: `common_repos:` ` pkgrepo.managed:` ` - humanname: Common` ` - name: deb [trusted=yes allow-insecure=yes] http://yumrepo.blah.net/foo {{` `grains['oscodename'] }} common` ` - file: /etc/apt/sources.list.d/common.list` ### Steps to Reproduce Issue Manage a repo using this name, and run state.apply multiple times on a minion. ### Versions Report Minion: 2016.3.4 Master: 2016.3.1",What error are you running into? And also any other information to help replicate this.,"Thanks for the response. We've since switched over to managing the repos as a file instead of using pkgrepo.managed. I'm working on bringing up a seperate test environment and will update this once I can test this again. There are no errors we can see in salt, however the malformed repo file breaks apt. Karl"
saltstack/salt,https://github.com/saltstack/salt/issues/56171,saltstack_salt_issues_56171,"No data from mine.get when targeting with grains

### Description of Issue Hi, Trying to do mine.get and it is not returning results when using grain targeting. This is a multimaster setup with etcd for the cache. Targeting with glob works; Targeting with grains or compound does not work. Works: `salt-call mine.get '*' grains.item` Does not work: `salt-call mine.get 'cpuarch:x86_64' grains.item grain` `salt-call mine.get 'G@cpuarch:x86_64' grains.item compound` ### Setup Minion mine config:  ### Steps to Reproduce Issue `salt-call mine.get 'cpuarch:x86_64' grains.item grain` ### Versions Report Minion: Salt Version: Salt: 2019.2.2 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Aug 7 2019, 00:51:29) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.7.1908 Core locale: UTF-8 machine: x86_64 release: 3.10.0-1062.1.1.el7.x86_64 system: Linux version: CentOS Linux 7.7.1908 Core Master: Salt Version: Salt: 2019.2.2 Dependency Versions: cffi: Not Installed cherrypy: 17.4.2 dateutil: 2.6.1 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.17 (default, Nov 7 2019, 10:07:09) python-gnupg: 0.4.1 PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.2.5 System Versions: dist: Ubuntu 18.04 bionic locale: UTF-8 machine: x86_64 release: 4.15.0-76-generic system: Linux version: Ubuntu 18.04 bionic",Could you please provide more details about your configuration? Sanitized minion config would be perfect.,Here's the minion config 
saltstack/salt,https://github.com/saltstack/salt/issues/39983,saltstack_salt_issues_39983,"Missing napalm grains in develop

### Some default grains are missing in napalm in develop branch Most notably, in ""develop"", ""os"" is reported as None when testing both vEOS and vSRX. ### Setup Provisioned new salt master with Vagrant salt provisioner, install ""git"", source ""develop"" ### Steps to Reproduce Issue Configure napalm proxy for vEOS device and retrieve grains. ### Output from ""stable"": ","Can one of the maintainers assign this to me, please?","Looks like ""os"" and ""host"" are both None. Both use _get_device_grain. Strangely, username uses the same function, and it is returning correctly."
saltstack/salt,https://github.com/saltstack/salt/issues/40208,saltstack_salt_issues_40208,"Inconsistent state return when test=True

While working on a change to fix up the return of some network configuration diffs when test=True or when no changes are made, I ran into a lot of inconsistencies in the code base and documentation regarding the correct way to return potential changes when testing. From the addition of `ret['pchanges']` in https://github.com/saltstack/salt/commit/cbd9590dcb3668f33c123d1ab44608b74cab61b2, it appears that there was a desire to differentiate when changes are ACTUALLY made by salt, and when changes WOULD be made, but weren't because we were testing. This is kind of reflected in the highstate outputter, as the summary counts the # of states that have `ret['changes']` not empty as changed and # of states with `ret['result'] == None` as unchanged. This can still be seen as states such as file.directory will use `ret['pchanges']` to populate information in `ret['comments']` to indicate what would happen if `test == False` Currently, this results in confusing output, as modules like file.managed will set `ret['changes']['diff''] = ret['pchanges']['diff']`, resulting in the summary stating that it was both changed and unchanged at the same time. I think this was due to some regressions where the file diffs were getting lost, as the highstate outputter does not show `ret['pchanges']` at all. Perhaps we should update the highstate outputter to display `ret['pchanges']` instead of `ret['changes']` when `ret['result'] == None`, and update documentation to indicate that `ret['changes']` should only be populated when a change was actually made. I'd hope that this prompts a discussion to create something definitive on how states return and display potential data. I apologize if this has already been brought up -- my search for issues didn't turn up anything directly relevant.",Does that answer your questions? I'm interested to hear your thoughts.,"Thanks much for the quick response. It appears that I was on the right track with my assumptions. Below are my thoughts as a new contributor to saltstack. IMHO (with which $2 will get you a coffee), the pchanges enhancement is a great idea that should be advanced more aggressively. My suggestion would be: * Update documentation to promote storing predictive changes in new/updated state modules (it is not clear from the single line mentioning `pchanges` today) * Also state that wherever possible, `changes` should be the actual changes made on the minion, instead of copying `pchanges` and hoping nothing underlying went wrong * Recommend copying `pchanges` to `comments` in existing modules utilizing `pchanges` if `result is None` in the interim, as a bridge * Revisit existing modules utilizing `pchanges` to enforce above (`states.file.managed`, etc) * Update unit tests to enforce `changes == {}` if `result is None` IF `pchanges` is present (in effect grandfathering in state modules that do not utilize it) * Update highstate outputter to sub `pchanges` for `changes` if `result is None` (it appears to be the only one that references `changes` directly -- the rest walk recursive dictionaries) * Update documentation to remove `pchanges` to `comments` recommendation * Put pressure on PRs for existing modules to meet the new standard From my quick survey, it's really only highstate that directly references/calls out `changes` directly. In terms of seeing modules adopt `pchanges`, I think the documentation, teaching, enforcement approach makes sense. I've never mananged an open source project thought, so I'm prepared to be told otherwise."
saltstack/salt,https://github.com/saltstack/salt/issues/48732,saltstack_salt_issues_48732,"Salt upgrade from 2015.8.12 to 2017.7.7

### Description of Issue/Question Hello, I want to upgrade salt-packages from 2015.8.12 to 2017.7.7 on RedHat 6.6 but I see a strange behavior of the minion after the upgrade. Firstly I upgraded salt-master and everything went ok, then I tried to upgrade the minions with a state and it failed, I don't know why. The service got suck and the only option was to connect on the machine where salt-minion is running and reinstall the package. After reinstall salt minion started but with some errors in the logs ( see below) and furthermore when I try to ping it from the master I receive 'test.ping' is not available. ### Setup In order to upgrade salt packages I firstly installed python27-pip since python2.6 isn't supported by newer versions of Saltstack. More than this I still need python 2.6 since it's used by both yum and the application that runs on my servers. The state used to upgrade my minion is: Salt repo: file.managed: - name: /etc/yum.repos.d/salt-2017.7.repo - source: salt://upgrade/files/salt-2017.7.repo - unless: ls /etc/yum.repos.d/salt-2017.7.repo Salt clean cache: cmd.run: - name: yum clean expire-cache Restart Salt Minion: cmd.run: {%- if grains['kernel'] == 'Windows' %} - name: 'start powershell ""Restart-Service -Name salt-minion""' {%- else %} # fork and disown the process - name: |- exec 0>&- # close stdin exec 1>&- # close stdout exec 2>&- # close stderr nohup salt-call --local service.restart salt-minion & {%- endif %} - order: last Upgrade Salt Minion: pkg.installed: - name: salt-minion - version: 2017.7.7 ### Steps to Reproduce Issue I just run ""salt ""*"" test.ping"" and from upgraded minion I received this: indosv2cdmi07: True indosv2cdmi07: 'test.ping' is not available. Into the logs I see this: [salt.loaded.int.module.mine ][ERROR ][8092] Function grains.get in mine_functions not available 2018-07-24 12:31:19,383 [salt.loaded.int.module.mine ][ERROR ][8092] Function grains.get in mine_functions not available 2018-07-24 12:31:19,384 [salt.loaded.int.module.mine ][ERROR ][8092] Function grains.get in mine_functions not available 2018-07-24 12:31:19,384 [salt.loaded.int.module.mine ][ERROR ][8092] Function grains.items in mine_functions not available 2018-07-24 13:31:19,275 [salt.loaded.int.module.mine ][ERROR ][8161] Function grains.get in mine_functions not available 2018-07-24 13:31:19,276 [salt.loaded.int.module.mine ][ERROR ][8161] Function grains.get in mine_functions not available 2018-07-24 13:31:19,276 [salt.loaded.int.module.mine ][ERROR ][8161] Function grains.get in mine_functions not available 2018-07-24 13:31:19,277 [salt.loaded.int.module.mine ][ERROR ][8161] Function grains.items in mine_functions not available If I target specifically the minion responds to ping: salt ""indosv2cdmi07"" test.ping indosv2cdmi07: True ### Versions Report salt-master --versions-report Salt Version: Salt: 2017.7.7 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8.1 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (default, Jun 8 2018, 10:46:35) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: redhat 6.6 Santiago locale: UTF-8 machine: x86_64 release: 2.6.32-642.11.1.el6.x86_64 system: Linux version: Red Hat Enterprise Linux Server 6.6 Santiago salt-minion --versions-report Salt Version: Salt: 2017.7.7 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8.1 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (default, Jun 8 2018, 10:46:35) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: redhat 6.6 Santiago locale: UTF-8 machine: x86_64 release: 2.6.32-642.11.1.el6.x86_64 system: Linux version: Red Hat Enterprise Linux Server 6.6 Santiago On both master I only activated the following variables in config: cachedir: /salt/master sqlite_queue_dir: /salt/master/queues log_file: /salt/master/logs/master On the minion the config is this one: cat /etc/salt/minion.d/_schedule.conf schedule: __mine_interval: {enabled: true, function: mine.update, jid_include: true, maxrunning: 2, minutes: 60, return_job: false} I pretty sure that I encounter this situation because of python packages but I don't know how to fix it, so any advice is more than welcomed. Thanks!",When you encounter this can you see if there are multiple copies of the Salt minion running? In a normal situations there should be two copies running.,"@garethgreenaway Thanks for your help. You were right, I had a salt-minion process still running and trying to use python2.6. But since I'm using a state to upgrade where into it should I include a check for that process?"
saltstack/salt,https://github.com/saltstack/salt/issues/40216,saltstack_salt_issues_40216,"saltstack cannot read '$HOME' value

### Description of Issue/Question hello, I used the following command to commit some code: salt 'git_test_repo' git.commit /home/repo/ 'hello,test' It did not work!!! ERROR: Command 'git commit -m hello,test' failed: *** Please tell me who you are. Run git config --global user.email ""you@example.com"" git config --global user.name ""Your Name"" to set your account's default identity. Omit --global to set the identity only in this repository. fatal: unable to auto-detect email address (got 'root@ubuntuworkstation.(none)') it works very well by using direct command 'git commit -m 'hello, test'' and I've set the git global config and I tried to use command to configure the git. It still didn't work. The error is like this. Command '['git', 'config', '--global', '--get-all', 'user.email']' failed with return code: 128 [ERROR ][2595] stderr: fatal: $HOME not set I also tried to add HOME to environment variables , It still did not work. In fact, I've found a similar problem https://github.com/saltstack/salt/issues/19869, but I got no answer. Please help solve the problem. Thanks. ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2016.11.2 Dependency Versions: cffi: Not Installed cherrypy: 3.5.0 dateutil: 2.4.2 gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.3.7 pycparser: 2.14 pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.12 (default, Nov 19 2016, 06:48:10) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial machine: x86_64 release: 4.4.0-67-generic system: Linux version: Ubuntu 16.04 xenial","Could you try using the `git.config_set` module? https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.git.html#salt.modules.git.config_set Thanks, Daniel","I've tried the git.config_set module. It still didn't work. But I find a solution that is adding user=root in the command. such as salt 'git_test_repo' git.commit /home/repo/ 'hello,test' user=root. Thanks for your answer."
saltstack/salt,https://github.com/saltstack/salt/issues/43224,saltstack_salt_issues_43224,"Remote execution of cmd.run fails and system path seem to have been lost.

### Description of Issue/Question Remotely executing cmd.run on this particular minion, will fail after it has sat overnight. What we are generally trying to perform is execution of a powershell script. ## Error returned after approx. 12 hours:  ## Error returned after sitting over the weekend: ERROR: Unable to run command 'chcp 437 > nul & host' with the context '{'timeout': None, 'with_communicate': True, 'shell': True, 'bg': False, 'stderr': -2, 'env': {'TMP': 'C:\\Windows\\TEMP', 'COMPUTERNAME': '**RedactedSystemName**', 'USERDOMAIN': '**RedactedDoamin**', 'DEFLOGDIR': 'C:\\ProgramData\\McAfee\\DesktopProtection', 'PSMODULEPATH': 'C:\\Program Files\\WindowsPowerShell\\Modules;C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules;C:\\Program Files\\Microsoft Monitoring Agent\\Agent\\PowerShell\\', 'COMMONPROGRAMFILES': 'C:\\Program Files\\Common Files', 'PROCESSOR_IDENTIFIER': 'Intel64 Family 6 Model 63 Stepping 0, GenuineIntel', 'PROGRAMFILES': 'C:\\Program Files', 'PROCESSOR_REVISION': '3f00', 'SYSTEMROOT': 'C:\\Windows', 'PATH': 'C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\salt;;c:\\salt\\bin\\lib\\site-packages\\pywin32_system32;/bin;/sbin;/usr/bin;/usr/sbin;/usr/local/bin;c:\\salt\\bin\\lib\\site-packages\\pywin32_system32;c:\\salt\\bin\\lib\\site-packages\\pywin32_system32;c:\\salt\\bin\\lib\\site-packages\\pywin32_system32; ... **REPEATED ABOUT 1000 TIMES** ... c:\\salt\\bin\\lib\\site-packages\\pywin32_system32;c:\\salt\\bin\\lib\\site-packages\\pywin32_system32;c:\\salt\\bin\\lib\\site-packages\\pywin32_system32;c:\\salt\\bin\\lib\\site-packages\\pywin32_system32', 'PROGRAMFILES(X86)': 'C:\\Program Files (x86)', 'TEMP': 'C:\\Windows\\TEMP', 'COMMONPROGRAMFILES(X86)': 'C:\\Program Files (x86)\\Common Files', 'PROCESSOR_ARCHITECTURE': 'AMD64', 'ALLUSERSPROFILE': 'C:\\ProgramData', 'LOCALAPPDATA': 'C:\\Windows\\system32\\config\\systemprofile\\AppData\\Local', 'UATDATA': 'C:\\Windows\\SysWOW64\\CCM\\UATData\\D9F8C395-CAB8-491d-B8AC-179A1FE1BE77', 'PROGRAMW6432': 'C:\\Program Files', 'USERNAME': '**RedactedSystemName**$', 'COMSPEC': 'C:\\Windows\\system32\\cmd.exe', 'PROGRAMDATA': 'C:\\ProgramData', 'VSEDEFLOGDIR': 'C:\\ProgramData\\McAfee\\DesktopProtection', 'PATHEXT': '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC', 'FP_NO_HOST_CHECK': 'NO', 'WINDIR': 'C:\\Windows', 'APPDATA': 'C:\\Windows\\system32\\config\\systemprofile\\AppData\\Roaming', 'SYSTEMDRIVE': 'C:', 'PYTHONHOME': '', 'NUMBER_OF_PROCESSORS': '1', 'PROCESSOR_LEVEL': '6', 'COMMONPROGRAMW6432': 'C:\\Program Files\\Common Files', 'OS': 'Windows_NT', 'PUBLIC': 'C:\\Users\\Public', 'USERPROFILE': 'C:\\Windows\\system32\\config\\systemprofile'}, 'stdout': -1, 'stdin': None, 'cwd': 'C:\\Windows\\system32\\config\\systemprofile'}', reason: [Error 8] Not enough storage is available to process this command ## Notes cmd.run still works fine when using salt-call directly on this system. Restarting the salt minion alleviates the problem. ### Steps to Reproduce Issue Wait 12-24 hours, and try to remotely use cmd.run ### Versions Report MASTER: Salt Version: Salt: 2016.11.5 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.5 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: 3.4.3 pygit2: Not Installed Python: 2.7.5 (default, Aug 2 2016, 04:20:16) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: redhat 7.3 Maipo machine: x86_64 release: 3.10.0-514.21.1.el7.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.3 Maipo MINION: Salt Version: Salt: 2016.11.5 Dependency Versions: cffi: 1.10.0 cherrypy: 7.1.0 dateutil: 2.5.3 docker-py: Not Installed gitdb: 0.6.4 gitpython: 2.0.8 ioflo: 1.5.5 Jinja2: 2.9.4 libgit2: Not Installed libnacl: 1.4.5 M2Crypto: Not Installed Mako: 1.0.4 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 0.7.6.None pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (v2.7.12:d33e0cf91556, Jun 27 2016, 15:24:40) [MSC v.1500 64 bit (AMD64)] python-gnupg: 0.3.8 PyYAML: 3.11 PyZMQ: 16.0.1 RAET: Not Installed smmap: 0.9.0 timelib: 0.2.4 Tornado: 4.4.1 ZMQ: 4.1.6 System Versions: dist: machine: AMD64 release: 2012ServerR2 system: Windows version: 2012ServerR2 6.2.9200 SP0 Multiprocessor Free",Can you check the storage consumption on that VM? Also can you paste the cmd.run command your attempting to run?,"Disk storage? Not an issue, 35GB free on the C drive. Memory consumption: Currently I see one python session using approx. 26MB, and another using approx. 64MB. However during the problem, the second python session was using approx. 85MB of memory. Nothing over the top, only 1.8GB of 4GB consumed. As for the command I'm running, it is ANY cmd.run does not work remotely. And although I haven't tried anything fancy, basic communication to the minion is still fine, doing test.ping and grains.items work remotely. e.g.: salt ""machine"" cmd.run ""hostname"" fails remotely, but succeeds locally with salt-call cmd.run ""hostname"" What we are always doing to this minion is launch powershell scripts. Something like; salt ""machine"" cmd.run shell=powershell ""c:\powershell\script.ps1 -param1 Param1 -param2 Param2"" Quick restart of the minion service, and all begins working again."
saltstack/salt,https://github.com/saltstack/salt/issues/39257,saltstack_salt_issues_39257,"Using del_root_vol_on_destroy option in salt-cloud gives IndexError

### Description of Issue/Question Using a profile that has del_root_vol_on_destroy: True gives ",Can you share a sanitized version of your profile/provider? also whats the command you are runnign when you see this?,The command I'm running is `salt-cloud -m build/etc/salt/test-cloud.map -c build/etc/salt -l debug -y -P`. I am running this on macOS if that makes a difference. Sanitized profile: 
saltstack/salt,https://github.com/saltstack/salt/issues/39955,saltstack_salt_issues_39955,"salt-cloud vmware Windows Template on a DHCP network with static map file doesn't connect

### Description of Issue/Question When deploying a new Windows Template using salt-cloud vmware module with a static IP in the map file, but the destination network is DHCP, the salt-cloud installer gets the DHCP address first before the server has finished being customized by vmware image customized. The customization complets and sets the IP address but salt-cloud does not see the new IP address and keeps trying the DHCP address. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).)  ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) [root@salt-cloud02 build.d]# salt --versions-report Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: Not Installed cherrypy: 3.2.2 dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.5 (default, Nov 6 2016, 00:28:07) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.3.1611 Core machine: x86_64 release: 3.10.0-514.6.1.el7.x86_64 system: Linux version: CentOS Linux 7.3.1611 Core",Does this only occur with windows?,"Our company has almost no Linux so we only have tested the deployment for windows and haven't setup/tested the bootstrap for Linux. So, unfortunately I haven't tested if this is only windows or also is a problem in Linux but I believe this will be specific to the salt-cloud vmware provider."
saltstack/salt,https://github.com/saltstack/salt/issues/40065,saltstack_salt_issues_40065,"system.join_domain does not join domain when account_ou is defined

### Description of Issue/Question when the system.join_domain is called without the account_ou defined it works. Specifying the account_ou doesn't join the domain and doesn't give any error messages. This occurs on both Windows 2008/2012 minions trying to get them to join the domain. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ",Can you see if salt-call debug shows the error? and post a sanitized version of the error here or the logs in salt-call. Thanks,"Sorry, I guess we might be a bit new to salt... but was sure this wasn't working. Tried it locally on the minion, it starts working. Tried it on the master and now it's working. This can be closed and safely ignored as not an issue."
saltstack/salt,https://github.com/saltstack/salt/issues/50294,saltstack_salt_issues_50294,"archive.extracted and modified files not detected

### Question Is there a way for archive.extracted to detect modified files? Indeed, this function seems to detect only if a file is missing and not if a file has been modified.",Can you provide us with an example state?,State file : 
saltstack/salt,https://github.com/saltstack/salt/issues/54110,saltstack_salt_issues_54110,"gitfs backend with root/mountpoint seems doesn't work with Windows

### Description of Issue I arrive to connect remotly on my git repo with the backend gitfs. But when I try to change root, it seems doesn't work (Windows). I edit file _C:\salt\bin\Lib\site-packages\salt\utils\gitfs.py_ and I add on line 2348 (version 2019.2) the following code:  The main issue is the **root** and **mountpoint** options and the minor is the traceback **_TypeError: environment can only contain strings_**",Can you try using the salt-formula repo to see if you get the same errors?,I take a random formulas => jenkins With the following settings it works: 
saltstack/salt,https://github.com/saltstack/salt/issues/56609,saltstack_salt_issues_56609,"[BUG] mac_brew_pkg is buggy

**Description** https://github.com/saltstack/salt/blob/6ed2bd8c800227051cee5ad816e03795491b5bb4/salt/states/pkg.py#L3200 calls with params **pkgs=pkgs** https://github.com/saltstack/salt/blob/6ed2bd8c800227051cee5ad816e03795491b5bb4/salt/modules/mac_brew_pkg.py#L497 but these params does not exist and leads to a traceback **Setup** ",Can you give me the output of `salt --versions`?,Is it normal that this issue is closed? 
saltstack/salt,https://github.com/saltstack/salt/issues/39446,saltstack_salt_issues_39446,"2016.3 Ubuntu precise cannot install salt-minion - python dependecies missing - not configured

## Description of Issue/Question I am trying to install salt-minion on Ubuntu precise (latest) but it is failing due to several python dependencies not being configured and also python-futures package is missing. ## Output from apt install `root@salt-test:# apt-get install salt-minion` `Reading package lists... Done` `Building dependency tree` `Reading state information... Done` `salt-minion is already the newest version.` `0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.` `6 not fully installed or removed.` `After this operation, 0 B of additional disk space will be used.` `Do you want to continue [Y/n]? ` `dpkg: dependency problems prevent configuration of python-backports.ssl-match-hostname:` ` python-backports.ssl-match-hostname depends on python:any (<< 2.8).` ` python-backports.ssl-match-hostname depends on python:any (>= 2.7.3-0ubuntu2~).` `dpkg: error processing python-backports.ssl-match-hostname (--configure):` ` dependency problems - leaving unconfigured` `No apport report written because the error message indicates its a followup error from a previous failure.` ` dpkg: dependency problems prevent configuration of python-concurrent.futures:` ` python-concurrent.futures depends on python:any (<< 2.8).` ` python-concurrent.futures depends on python:any (>= 2.7.3-0ubuntu2~).` `dpkg: error processing python-concurrent.futures (--configure):` ` dependency problems - leaving unconfigured` `No apport report written because the error message indicates its a followup error from a previous failure.` ` dpkg: dependency problems prevent configuration of python-msgpack:` ` python-msgpack depends on python:any (>= 2.7.3-0ubuntu2~).` `dpkg: error processing python-msgpack (--configure):` ` dependency problems - leaving unconfigured` `No apport report written because the error message indicates its a followup error from a previous failure.` ` dpkg: dependency problems prevent configuration of python-tornado:` ` python-tornado depends on python-backports.ssl-match-hostname; however:` ` Package python-backports.ssl-match-hostname is not configured yet.` ` python-tornado depends on python-futures; however:` ` Package python-futures is not installed.` ` Package python-concurrent.futures which provides python-futures is not configured yet.` `dpkg: error processing python-tornado (--configure):` ` dependency problems - leaving unconfigured` `No apport report written because MaxReports is reached already` ` dpkg: dependency problems prevent configuration of salt-common:` ` salt-common depends on python:any (>= 2.7.3-0ubuntu2~).` ` salt-common depends on python:any (<< 2.8).` ` salt-common depends on python-msgpack; however:` ` Package python-msgpack is not configured yet.` ` salt-common depends on python-backports.ssl-match-hostname; however:` ` Package python-backports.ssl-match-hostname is not configured yet.` ` salt-common depends on python-tornado (>= 4.2.1); however:` ` Package python-tornado is not configured yet.` `dpkg: error processing salt-common (--configure):` ` dependency problems - leaving unconfigured` `No apport report written because MaxReports is reached already` ` dpkg: dependency problems prevent configuration of salt-minion:` ` salt-minion depends on python:any (>= 2.6~); however:` ` salt-minion depends on salt-common (= 2016.3.5+ds-1); however:` ` Package salt-common is not configured yet.` `dpkg: error processing salt-minion (--configure):` ` dependency problems - leaving unconfigured` `No apport report written because MaxReports is reached already` ` Errors were encountered while processing:` ` python-backports.ssl-match-hostname` ` python-concurrent.futures` ` python-msgpack` ` python-tornado` ` salt-common` ` salt-minion` `E: Sub-process /usr/bin/dpkg returned an error code (1)` ## Repository used `repo.saltstack.com/apt/ubuntu/12.04/amd64/2016.3` ## Python version `root@salt-test:~# python --version Python 2.7.3 ` I am not sure yet why those python packages can't be configured but I can't find the package `python-futures` on the repository.",Which sources url are you using?,"I solved the issue by installing manually `python-minimal_2.7.3-0ubuntu2.2_amd64` and `python_2.7.3-0ubuntu2.2_amd64`. This version was not present in archive.ubuntu.com main, there is only `2.7.3-0ubuntu2.0` which should meet the requirements `(>= 2.7.3-0ubuntu2~)` but that didn't work."
saltstack/salt,https://github.com/saltstack/salt/issues/45059,saltstack_salt_issues_45059,"sdb.set Disregards CLI Quoting Seeking Keywords

### Description of Issue/Question ### Setup - Create a sdb config on a salt-master. - Attempt to add a quoted value ending in an equal sign. - Values may be hand-entered or read as base64 from files: `salt-call sdb.set sdb://example/setitoff ""$(base64 -w0 my-demo-file)""` Outcome: - The attempt will produce an error relating to a an invalid keyword and referencing the quoted value. Expected Outcome: - The value would be added without error as long as it's correctly quoted on the CLI. Observation: - When the value ends in a double equal sign, the problem doesn't occur (for example 'jlkjhl==' works as expected). - This issue seems to be tied to SDB specifically at some level. It _does_ error even when invoking sdb via `salt-call sdb.set`, and works as expected in every other module/case. Implication: - The number of equal signs in a base64 encoded document is either 0, 1, or 2 depending on the length of the source document. - This means that attempts to add quoted base64 values to SDB via CLI will succeed or fail based only the modulus of the byte count of the pre-encoded source document. ","How about `""'\""jlkjhl=\""'""`?","Just to be sure, I'm going to rebuild my test environment and retry each of these question/tests. Will have an update for later in the day."
saltstack/salt,https://github.com/saltstack/salt/issues/39588,saltstack_salt_issues_39588,"os: centos6.8 ,salt-minion init scripts run hang, return nothing

### Description of Issue/Question running service salt-minion start , command return nothing running /usr/bin/salt-minion -l debug , salt-minion running normally ### Setup omit ### Steps to Reproduce Issue # sh -x /etc/init.d/salt-minion status + : /usr/bin + : /etc + : root + SALTMINION=/usr/bin/salt-minion + SALTCALL=/usr/bin/salt-call + : ' root /etc/salt ' + SALTMINION_ARGS= + SALTMINION_TIMEOUT=30 + SALTMINION_TICK=1 + SERVICE=salt-minion + '[' -f /etc/default/salt ']' + '[' -f /etc/sysconfig/salt ']' + RETVAL=0 + NS_NOTRIM=--notrim + ERROR_TO_DEVNULL=/dev/null + '[' 1 = 0 ']' + main status + '[' -n '' ']' + netstat --notrim + grep -q unrecognized ^C ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2016.11.2 Dependency Versions: cffi: 1.9.1 cherrypy: Not Installed dateutil: 1.4.1 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.20.2 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3c1 pycparser: 2.17 pycrypto: 2.6.1 pygit2: Not Installed Python: 2.6.6 (r266:84292, Jul 23 2015, 15:22:56) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.3.1 RAET: Not Installed smmap: Not Installed timelib: 0.2.4 Tornado: 4.2.1 ZMQ: 3.2.5 System Versions: dist: centos 6.8 Final machine: x86_64 release: 2.6.32-642.el6.x86_64 system: Linux version: CentOS 6.8 Final","Can you verify and close this? Thanks, Daniel","@gtmanfred I close the first, 2016.11.3 RPM package updated I will install test again"
saltstack/salt,https://github.com/saltstack/salt/issues/43965,saltstack_salt_issues_43965,"salt-master with vrrp - minions wont reconnect

### Description of Issue/Question Some salt minions wont reconnect after failover/fail back of master error in minion logs 2017-10-07 13:29:15,019 [salt.utils.schedule][ERROR ][12465] Unhandled exception running state.sls Traceback (most recent call last): File ""/usr/lib/python2.7/dist-packages/salt/utils/schedule.py"", line 849, in handle_func ret['return'] = self.functions[func](*args, **kwargs) File ""/usr/lib/python2.7/dist-packages/salt/modules/state.py"", line 1010, in sls mocked=kwargs.get('mock', False)) File ""/usr/lib/python2.7/dist-packages/salt/state.py"", line 3535, in __init__ loader=loader) File ""/usr/lib/python2.7/dist-packages/salt/state.py"", line 662, in __init__ self.opts['pillar'] = self._gather_pillar() File ""/usr/lib/python2.7/dist-packages/salt/state.py"", line 704, in _gather_pillar ret = pillar.compile_pillar() File ""/usr/lib/python2.7/dist-packages/salt/pillar/__init__.py"", line 162, in compile_pillar dictkey='pillar', File ""/usr/lib/python2.7/dist-packages/salt/utils/async.py"", line 75, in wrap ret = self._block_future(ret) File ""/usr/lib/python2.7/dist-packages/salt/utils/async.py"", line 85, in _block_future return future.result() File ""/usr/lib/python2.7/dist-packages/tornado/concurrent.py"", line 215, in result raise_exc_info(self._exc_info) File ""/usr/lib/python2.7/dist-packages/tornado/gen.py"", line 879, in run yielded = self.gen.send(value) File ""/usr/lib/python2.7/dist-packages/salt/transport/zeromq.py"", line 204, in crypted_transfer_decode_dictentry aes = cipher.decrypt(ret['key']) TypeError: string indices must be integers, not str restarting one of the failing minions seems to recover all minions. errors in master logs 2017-10-07 13:29:25,052 [salt.master ][WARNING ][30319] Salt minion claiming to be XXX attempted to communicate with master but key could not be read and verification was denied. 2017-10-07 13:29:25,053 [salt.master ][WARNING ][30319] Minion id XXX is not who it says it is! 2017-10-07 13:29:32,880 [salt.transport.mixins.auth][ERROR ][30317] AES key not found 2017-10-07 13:29:39,228 [salt.transport.mixins.auth][ERROR ][30318] AES key not found 2017-10-07 13:29:39,231 [salt.transport.mixins.auth][ERROR ][30317] AES key not found 2017-10-07 13:29:41,262 [salt.transport.mixins.auth][ERROR ][30319] AES key not found ### Setup Two masters, active-passive, same pem/key, virtual IP passing between them ### Steps to Reproduce Issue setup vrrp of two masters, failover, failback, some minions wont recover ### Versions Report Salt Version: Salt: 2016.11.7 Dependency Versions: cffi: Not Installed cherrypy: 3.2.2 dateutil: 2.6.1 docker-py: 2.5.1 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 16.0.2 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.6 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 4.4.0-57-generic system: Linux version: Ubuntu 14.04 trusty","What is `vrrp`? Thanks, Daniel","https://en.wikipedia.org/wiki/Virtual_Router_Redundancy_Protocol a method to pass a floating IP between active and passive server, no need for anything fancy, adding a /32 IP to eth0 on the ""primary"" server, let minions connect, remove that IP from the primary and add to a secondary, which has the same master.pub/pem files and wait for minion to reconnect, either takes long time, or prints the errors above."
saltstack/salt,https://github.com/saltstack/salt/issues/39683,saltstack_salt_issues_39683,"Error in Saltstack's rest auth ""Authentication module threw 'status' ""

### Salt's rest auth is giving 401 error with exception _Authentication module threw 'status'_ . I am using rest_cherrypy module. While debugging I found that [rest.auth](https://github.com/saltstack/salt/blob/2016.11/salt/auth/rest.py#L50) method requires 'status' in the http.query result. The method works if I pass 'status=True' in this function https://github.com/saltstack/salt/blob/2016.11/salt/auth/rest.py#L61 ### Setup Master's configuration -  (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue 1. Use external auth as described in https://docs.saltstack.com/en/latest/ref/auth/all/salt.auth.rest.html 2. Try salt's rest login api 3. See master and salt-api logs ### Versions Report `Salt Version: Salt: 2016.11.2 Dependency Versions: cffi: Not Installed cherrypy: unknown dateutil: 1.5 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 4.4.0-31-generic system: Linux version: Ubuntu 14.04 trusty `","Would you mind submitting a PR with this change? Thanks, Daniel","Yes, I can do that."
saltstack/salt,https://github.com/saltstack/salt/issues/39703,saltstack_salt_issues_39703,"Pillar salt events on changes

Would be nice to have events to watch for pillar changes. My use case is the following: I dynamically manage my nodes with ""roles"" I give them through their pillar as follow :  This works nicely, but it would be even better if I can apply the absent state (state that removes what init state did) when I remove an entry in pillar roles list.",Does that work for our use case?,@mirceaulinic : Does the inotify event contain the diff or new and old file versions for me to compare and trigger my absent state ?
saltstack/salt,https://github.com/saltstack/salt/issues/39713,saltstack_salt_issues_39713,"Esxi proxy doesn't handle grain modifications

I'm not sure if this is not intended behavior and if the scope is only esxi or other proxies as well. I have a ""roles based"" setup and I use ""roles"" grain to contain the roles of each minion. When I tried to do it for proxied esxi minion, it modified the proxy host (machine where salt-proxy is running) minion grains instead. The same happens when I try to modify some dummy custom grains on the proxied minion. ### Setup `esxi-proxy` is the proxy minion host. `vmhost` is the proxied esxi machine. pillars:  ### Versions Report master is on Debian 8.7. 2016.11.1 installed from jessie-backports. esxi-proxy is on Ubuntu 14.04. 2016.11.2+ds-1 installed from repo.saltstack.com","Does this work on regular minions? Thanks, Daniel","No, the problem is that the grains are not stored ""under"" vmhost at all. They all go to the proxy minion (where they are not really handled correctly, i.e. overwrite instead of append, but this is not the main problem). I updated my examples to better reflect that. And yes, it all works correctly if I target regular minion."
saltstack/salt,https://github.com/saltstack/salt/issues/50091,saltstack_salt_issues_50091,"Fail function returns stacktrace

### Description of Issue/Question Try to use fail function for pkg-upgrade state in orchestrator:  ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report Salt Version: Salt: 2018.3.2 Dependency Versions: cffi: 1.6.0 cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: 0.26.3 libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.26.4 Python: 2.7.5 (default, Jul 13 2018, 13:06:57) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.5.1804 Core locale: UTF-8 machine: x86_64 release: 3.10.0-862.14.4.el7.x86_64 system: Linux version: CentOS Linux 7.5.1804 Core","What was the exact command that you used to run sync_modules? and can you provide the output of `find /var/cache/salt/master/extmods` Thanks, Daniel",`sudo salt '*' saltutil.sync_modules` `sudo salt '*' saltutil.sync_all` (_module is in base = git branch master) with - all_saltenvs: master 
saltstack/salt,https://github.com/saltstack/salt/issues/39779,saltstack_salt_issues_39779,"Pillar scheduling is broken

Currently management of jobs on minion is messy. Here are some cases: Scenario 1 ---------- **Summary**: schedule.list returns invalid data **Steps to reproduce**: - create job in pillar ",What value are you editing in pillar when updating it?,@Ch3LL I would love to. But I have no much understanding of salt internals for now and current implementation confuses me at some points. I state my idea like this: - teach scheduler to differ jobs originated from config files and from pillar - and deny any modifications to jobs from pillar by `schedule` module Is it OK?
saltstack/salt,https://github.com/saltstack/salt/issues/39849,saltstack_salt_issues_39849,"salt.file.line - begin regex

### Description of Issue/Question Hi, ive got the problem that i try to insert a specific line into a file. I use the ""before"" parameter but somehow it says to me: more than one match or less than one match. Depends on what i try, i used: ""^exit 0$"" ""^exit 0""... I can't use file.managed because different formulas are accessing the file. Is it possible to deactivate: stream multiple lines as a single line? System: Ubuntu 12.04LTS until 16.04LTS **configure.sls** ",Does this work for your use case? ,"Yes this does work thanks, but this is more or less just a workaround, because I can't be sure that the inline comments are still there, so a regex matching ^exit 0$ should be better because the file has to end with this. Isn't it also better if there is a option to activate multiline mode? Like ""flags"" which are deprecated?"
saltstack/salt,https://github.com/saltstack/salt/issues/39866,saltstack_salt_issues_39866,"Salt pkg.installed returns error despite successful operation.

### Description of Issue/Question I'm installing four packages, which I purge in the previous step. The purged packages are newer versions, installed ones are older. In fact, I'm doing an downgrade. To keep the package versions locked, I use `hold: True`; to keep the rule idempotent I use `update_holds: True` and `reinstall: True`. After applying the state, salt reports an error stating that the installation is failed, however the packages are installed and everything is as it should be. ### Setup  #### OS Versions - **Minions:** ~CentOS 6.8~ ScientificLinux 6.8 (Sorry for wrong report) - **Master:** CentOS 7.3 - Salt versions are uniform, same on every minion & master.","Can you provide an actual state for this so that I can replicate the issue? Thanks, Daniel","Thanks for the reply @gtmanfred, of course. Attached state file can reliably reproduce the problem in a ScientificLinux 6.8 (Which is in the same family with RHEL, CentOS). One can obtain relevant ISO files from [here](http://ftp1.scientificlinux.org/linux/scientific/6.8/x86_64/iso/) Actual state file (renamed to `.txt` since GitHub didn't like SLS extension): [recreate_downgrade_bug.txt](https://github.com/saltstack/salt/files/827362/recreate_downgrade_bug.txt) If you need more info, help, anything; I will do my best to help, Thanks, Hakan"
saltstack/salt,https://github.com/saltstack/salt/issues/39876,saltstack_salt_issues_39876,"salt-ssh sls parser throws an unhelpful error on a simple user error (esp. with lvm)

### Description of Issue/Question The parser of state files handles this kind of a trivial user error like this:  First off, the newbie user has no idea what this JSON talk is about, given that they used YAML. Secondly, the part after the colon in that error message is void, which sounds like something should have been there but is somehow missing. Then there's the spuriously critical msgpack line, which I've found referenced in another few bug reports: https://github.com/saltstack/salt/issues/7913 https://github.com/saltstack/salt/issues/26936 https://github.com/saltstack/salt/issues/21226 Clearly there's popular demand for it to be fixed, and looks like it did happen in a later version :) Pity it's not done with the Ubuntu Trusty PPA - any chance this could be backported there? Then, the traceback, which manages to totally obscure the line that best describes actual cause of the problem - KeyError: 'lvm.pv_present'. In this case, where error is apparently connected to a particular user file rather than Salt code itself, it would have been better if the traceback was stashed away in a log file rather than thrown out here. Finally, that KeyError should be expanded to be minimally more verbose, just enough to be useful, such as ""Unrecognized key found: '<whatever>'"" And then, it would be nice in case of these syntax errors the file was parsed in a more user-friendly manner, with a parser that can indicate the line and column of the problem. This kind of an exception is already the slow path (into program death), it likely wouldn't matter if a different, more meticulous parser was loaded to take another swipe at it, just to be able to report something more useful. Thanks in advance. % salt-ssh --versions-report Salt: 2015.5.3 Python: 2.7.6 (default, Oct 26 2016, 20:30:19) Jinja2: 2.7.2 M2Crypto: 0.21.1 msgpack-python: 0.3.0 msgpack-pure: Not Installed pycrypto: 2.6.1 libnacl: Not Installed PyYAML: 3.10 ioflo: Not Installed PyZMQ: 14.0.1 RAET: Not Installed ZMQ: 4.0.4 Mako: 0.9.1 Tornado: Not Installed Debian source package: 2015.5.3+ds-1trusty1",Would you mind sending in a PR with the fix?,"@Ch3LL the immediate fix for lvm that I suggested would be easy, but I'm afraid the wider issue is beyond my reach at the moment, yet it appears no less important - I've happened to stumble upon the ""JSON Render failed for:"" error several times now, and I see it's mentioned in the same form six times within /usr/lib/python2.7/dist-packages/salt/client/ssh/wrapper/state.py Someone who actually understands the innards of the state engine WRT salt-ssh would be better suited to figure out how to better deal with such generic exceptions. Maybe have another generic function there, one that would try to quickly pre-parse that `stdout` prior to `json.loads()` in order to detect exceptions first? And, obviously, another question immediately arises - why does the remote code throw exceptions on standard output rather than standard error, where it could be parsed separately (as it is standard practice)?"
saltstack/salt,https://github.com/saltstack/salt/issues/39940,saltstack_salt_issues_39940,"2016.11.x windows minion fails to start on Windows 2003

### Description of Issue/Question Hi, The windows minion of the 2016.11 branch fails to start on windows 2003. I tested both Salt-Minion-2016.11.0-x86-Setup.exe and Salt-Minion-2016.11.3-x86-Setup.exe on an English Windows 2003. pywintypes imports fine: ",Do you see an obvious solution to this or is there something in windows 2003 that is preventing these imports that you are aware of?,"Hi @twangboy, I downgraded psutil to 3.4.2 (last version that supports 2003) and the minion now starts. Thanks for the help!"
saltstack/salt,https://github.com/saltstack/salt/issues/40261,saltstack_salt_issues_40261,"win_system.join_domain and win_system.unjoin_domain should return the error on failure 

### Description of Issue/Question Currently win_system.join_domain() and win_system.unjoin_domain() return False on failure. That makes it difficult to use it non-interactively, for example by a state, as one cannot communicate the reason for failure. It would be great if it could return the error on failure, instead of False.","Would you be able to submit a PR to make this change? If not, I have tagged our platform team to take a look for adding this feature. Thanks, Daniel","Hi, I can add a PR. Should I preserve the current behaviour by adding another parameter to the function that decides whether False or the error string is returned, or do I just return the error string and potentially break code that relies on the current behaviour? Thank you"
saltstack/salt,https://github.com/saltstack/salt/issues/48595,saltstack_salt_issues_48595,"salt-ssh test.ping returns cannot locate python even though its installed on target host

### Description of Issue/Question salt-ssh cannot recognise installed python on minion even though it is installed and is at the version higher than what it needs. I have the following roster file Test: host: xx.xx.xx.xx sudo: True user: root passwd: <password> Running the test.ping returns  Could anyone please help or point me to what I am doing wrong? ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) salt --versions-report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: Not Installed cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8.1 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (default, Mar 30 2018, 15:31:59) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: centos 6.9 Final locale: UTF-8 machine: x86_64 release: 2.6.32-696.23.1.el6.x86_64 system: Linux version: CentOS 6.9 Final",Can you provide me any more information about how your machine is setup so that I can try and replicate?,"Hi Daniel, I was able to fix the issue. Turns out salt-api, salt-master was installed under python 2.7 and salt-ssh was installed under python 3.6 on the system I was running my tests on. Once I fixed the versions salt-ssh worked. You can close this issue. Thanks for your time on this"
saltstack/salt,https://github.com/saltstack/salt/issues/39976,saltstack_salt_issues_39976,"win_lgpo missing policies, eg. `Prevent the usage of OneDrive for file storage`

Missing in the output of `salt ""*"" lgpo.get return_not_configured=True`. OneDrive only contains one setting: `Windows Components\OneDrive\Save documents to OneDrive by default`. There are 3 other settings missing. - Salt-Minion-2016.11.3-AMD64 - Windows 10 Enterprise Trying to set a missing policy results in: ---------- ID: group-policy Function: lgpo.set Result: False Comment: An exception occurred in this state: Traceback (most recent call last): File ""c:\salt\bin\lib\site-packages\salt\state.py"", line 1746, in call **cdata['kwargs']) File ""c:\salt\bin\lib\site-packages\salt\loader.py"", line 1703, in wrapper return f(*args, **kwargs) File ""c:\salt\bin\lib\site-packages\salt\states\win_lgpo.py"", line 226, in set_ adml_language=adml_language) File ""c:\salt\bin\lib\site-packages\salt\modules\win_lgpo.py"", line 4744, in get_policy_info adml_policy_resources=adml_policy_resources) File ""c:\salt\bin\lib\site-packages\salt\modules\win_lgpo.py"", line 4600, in _lookup_admin_template if not adml_search_result.attrib['text'].strip() == policy_name: File ""src/lxml/lxml.etree.pyx"", line 2452, in lxml.etree._Attrib.__getitem__ (src\lxml\lxml.etree.c:68625) KeyError: 'text' Started: 17:12:27.409000 Duration: 472.0 ms Changes:","Can you provide me with some information on how to set this up and test it? Thanks, Daniel",I'm trying to apply the following state to a Windows 10 Enterprise machine: group-policy-update: cmd.wait: - name: 'gpupdate /force' group-policy: lgpo.set: - computer_policy: 'Windows Components\Windows Update\No auto-restart with logged on users for scheduled automatic updates installations': Disabled 'Windows Components\Cloud Content\Do not show Windows tips': Enabled 'Windows Components\Cloud Content\Turn off Microsoft consumer experiences': Enabled 'Windows Components\OneDrive\Save documents to OneDrive by default': Disabled #'Windows Components\OneDrive\Prevent the usage of OneDrive for file storage': Enabled - watch_in: - cmd: group-policy-update Uncommenting the last policy leads to the error in my initial comment.
saltstack/salt,https://github.com/saltstack/salt/issues/39986,saltstack_salt_issues_39986,"JSON array structure incorrectly rendered

### Description of Issue/Question The JSON standard for an array is that it starts with a [ (left bracket) and ends with a ] (right bracket), with values between these being separated by a comma (http://www.json.org/index.html). When using the salt runner module the array structure is being incorrectly formatted with whole array being wrapped in quotation marks(""), including the left and right brackets, which makes the JSON structure incorrect. ### Steps to Reproduce Issue I am running the following salt-run command against a Pure Storage FlashArray's RestAPI service: ","Can you please provide the debug log of the command so that hopefully we can see where this errored at? Thanks, Daniel",Here's the debug output you requested... 
saltstack/salt,https://github.com/saltstack/salt/issues/40064,saltstack_salt_issues_40064,"Mysql 

When i try to apply a state to my minions in setup everything else just fine but will not install mysql-server I am running ubuntu 16.04.2 on a Digital ocean VM (both master and minion) I am using GitFS and salt formulas Error produced ",Can you install mysql-server without using salt? Do you still get the same error?,I can install mysql just fine when run from apt on the command line. i get the same error when i run `salt '<id>' pkg.install mysql-server` this command works on ubuntu 14.04 but will not run on 16.04.2. if you need any further info let me know
saltstack/salt,https://github.com/saltstack/salt/issues/40101,saltstack_salt_issues_40101,"when the minion use the sudo_user ，why it cause two jobs

### Description of Issue/Question 1.salt-master versions  please tell me why ...THANKS ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)","Could you try running a `test.sleep 30` and checking that there are actually two jobs active with `salt-run jobs.active`? Thanks, Daniel","Thank you for your reply。My master has only one minion, '*' is 172.26.133.20, and I am sure only I excute the command。when I run test.sleep 30 and run salt-run jobs.active ，it display  why has two jobs almost at the same time ，when I use the sudo_user in my minion。"
saltstack/salt,https://github.com/saltstack/salt/issues/42158,saltstack_salt_issues_42158,"salt rest api with args can not work

### Description of Issue/Question I want to use salt rest api with args，but it not work。 ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) When I use rest api： ![image](https://user-images.githubusercontent.com/23496061/27902197-6bd4990a-6267-11e7-9516-aa5182fcfc57.png) When I run command： ![image](https://user-images.githubusercontent.com/23496061/27902245-9ac768dc-6267-11e7-8ff2-1ef738cc7ac5.png) My sls is： ![image](https://user-images.githubusercontent.com/23496061/27902257-a9eb0954-6267-11e7-94e9-2e14ef6793f5.png) where is the problem？ Thanks very much!!!!! ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2016.11.2 Dependency Versions: cffi: Not Installed cherrypy: 3.2.2 dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8.1 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.5 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.6.6 (r266:84292, Aug 18 2016, 15:13:37) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: centos 6.7 Final machine: x86_64 release: 2.6.32-573.el6.x86_64 system: Linux version: CentOS 6.7 Final","Can you try switching to passing the data as json? Eg, `-H 'Content-Type: application/json' -d '[{""client"": ""local"", ""tgt"": ""172.20.68.10"", ""fun"": ""state.sls"", ""arg"": ""usermgt/test"", ""kwarg"": {""pillar"": {""users"": ""test""}}}]'`","@garethgreenaway Thank for your reply。I use your method，but it returns 400 bad request。what‘s the problem。 curl -k https://127.0.0.1:8000 -H ""Accept: application/json"" -H ""X-Auth-Token: b7955041ddf9d0bd420e76a9733c0c0009667535"" -d '[{""client"": ""local"", ""tgt"": ""172.20.68.10"" , ""fun"": ""state.sls"", ""arg"": ""usermgt/test"", ""kwarg"": {""pillar"": {""users"": ""test""}}}]' ![image](https://user-images.githubusercontent.com/23496061/27939662-f6c1c894-62f8-11e7-8fd1-6244f748900f.png)"
saltstack/salt,https://github.com/saltstack/salt/issues/40247,saltstack_salt_issues_40247,"boto_rds.delete wait_for_deletion checks rds status incorrectly and always loop until timeout

### Description of Issue/Question When calling boto_rds.delete with a wait_for_deletion=True, boto_rds.delete will fail to check the deletion process status and always wait for the timeout to pass. The root cause is here: https://github.com/saltstack/salt/blob/v2016.11.3/salt/modules/boto_rds.py#L635 The if statement checks the return value of boto_rds.exists as boolean value without processing it. boto_rds.exists doesn't return boolean value but a dict, and never an empty dict. So the If statement body is never executed and the method keeps looping until the timeout pass. ### Steps to Reproduce Issue Read the code :) ### Versions Report Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: Not Installed cherrypy: 3.2.2 dateutil: 2.6.0 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.9.5 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.4.2 ZMQ: 4.1.6 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 4.4.0-31-generic system: Linux version: Ubuntu 14.04 trusty",Would you be able to help by submitting a pull request? Thanks! Daniel,On it.
saltstack/salt,https://github.com/saltstack/salt/issues/40537,saltstack_salt_issues_40537,"file.managed with http client certificate

I have a webserver that I want to use as a source in file.managed states. The webserver requires a client certificate for authentication. I have tried the following after inspecting the state-code:  This does not seem to use the certificate. How can I specify which client certificate to use?",Where are you seeing that argument? can you point me to the code?,"The file.managed state has a source parameter, that can be set to an http-url. When this is used, the query-function in the utils.http package is called. Here is the code for the query-function: https://github.com/saltstack/salt/blob/3b81c37a531c48ff54a2332c4ea9c0d108ce0e74/salt/utils/http.py#L91 In this function, the client certificate can be set in the cert-parameter, or read from the master or minion config. My question is: how can I set the cert parameter in the file.managed state, and have it appear in the query-function?"
saltstack/salt,https://github.com/saltstack/salt/issues/40175,saltstack_salt_issues_40175,"'state.apply' is not available.

### Description of Issue/Question When running a specific state via state.apply I got a ""'state.apply' is not available."" answer on the master ### Setup salt master : 2016.11.3 (Carbon), using gitfs as backend, highstate works flawlessly. ### Steps to Reproduce Issue Install carbon version and try to run a state.apply ? try using gitfs but I am not sure it is linked to the backend...  ### Versions Report `root@salt [salt]: salt --versions-report Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: 0.8.6 cherrypy: Not Installed dateutil: 2.2 gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.9.4 libgit2: 0.25.0 libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.2 mysql-python: 1.2.3 pycparser: 2.10 pycrypto: 2.6.1 pygit2: 0.25.0 Python: 2.7.9 (default, Jun 29 2016, 13:08:31) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.4.0 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: debian 8.7 machine: x86_64 release: 4.4.35-2-pve system: Linux version: debian 8.7 EDIT : I downgraded to 2016.11.1 but still have the same issue, so I am now asking for help in order to debug this problem, which is quite sensitive as I am migrating to gitfs right now and therefore need to test all my state one by one ..... Any thought on this ?","Can you target your minion with `salt minion test.versions_report` and provide that information as well? Thanks, Daniel","Thanks gtmanfred for your concern, (un)fortunately I tried again just now and everything ran smoothly, I mean it worked ! Dunno why, I didn't do anything but creating new states and so on, I didn't touch the config or anything else, anyway it worked. Just in case here is the information you asked : `root@salt [salt]: salt '***********' test.versions_report **************: Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: 0.8.6 cherrypy: Not Installed dateutil: 2.2 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.9.4 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: 1.0.0 msgpack-pure: Not Installed msgpack-python: 0.4.2 mysql-python: 1.2.3 pycparser: 2.10 pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.9 (default, Jun 29 2016, 13:08:31) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.4.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: debian 8.7 machine: x86_64 release: 4.4.35-2-pve system: Linux version: debian 8.7"
saltstack/salt,https://github.com/saltstack/salt/issues/49586,saltstack_salt_issues_49586,"master auth delay

### Description of Issue/Question using gitfs (pygit based) for states and external pillar, we are experiencing major performance drawback, the ratio from locally stored states and pillar and a gitfs based storage is about x5 (talking about time to complete setup). Local storage taking about 7/8 minutes when gitfs based master takes about 45 minutes to achieve the exact same setup. :( for now I am just wondering (without real doubt though) if I am the only one to experience this ? I am quite sure I am, but I wanted to be sure first. Then I will be adding debug log and all this in this issue for tracking root cause. So : **Anyone experiencing this kind of performance using gitfs for state and external pillar ?** ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) master / minion in latest (2018.3.2) as : ",Do you have large objects in your repo? There are pretty well-known performance problems when serving large objects out of a git repo.,"Hi @cachedout , thanks for the answer, define large objects ? We do have some old war, the whole repo is about 2Go, is that too big ? I can see that for every request (state fetch) there is a 3 minutes ""inactivity"". I'll get some debug info and come back here."
saltstack/salt,https://github.com/saltstack/salt/issues/40410,saltstack_salt_issues_40410,"Targeting Minions by IP Range via restful API doesn't work

### Description of Issue/Question I am trying to targeting minions with Subnet/IP address, the command in CLI works well, but when I try to do that via restful API ,it didn't work. ### Setup Having a minion with IP : 192.168.200.100 Try to target it with CLI:  Parameters can be found here: https://docs.saltstack.com/en/latest/ref/clients/index.html#salt.client.LocalClient ### Versions Report [root@localhost ~]# salt --versions-report Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: Not Installed cherrypy: 3.2.2 dateutil: 1.5 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.5 (default, Oct 11 2015, 17:47:16) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: redhat 7.2 Maipo machine: x86_64 release: 3.10.0-327.el7.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.2 Maipo",Can you give this a try: `expr_form='ipcidr'` instead of range?,"@Ch3LL That works, thanks a lot, I will close this issue. Don't know why this parameter is not listed in the document. :-)"
saltstack/salt,https://github.com/saltstack/salt/issues/40950,saltstack_salt_issues_40950,"Import certificate

### Description of Issue/Question Cannot import pfx certificate ### Steps to Reproduce Issue ",Did you just recently upgrade to 2016.11.4?,It's the first time that I'm trying to import certificate with pfx format. It's not working also on 2016.11.3. Ido
saltstack/salt,https://github.com/saltstack/salt/issues/40403,saltstack_salt_issues_40403,"setting pillar data at the command line: does not work

Hi guys, I'm following the [saltstack docs](https://docs.saltstack.com/en/latest/topics/pillar/) section: ""setting pillar data at the command line"" suggests: The docs webpage has red checkox (top-right corner) near ""2016.11.3"", which is exactly the same version I'm using on both master and minion (2 separate boxes, see below for detailed versions). ### Setup 1 master has 1 registered minion (2 separate amazon ec2 ubuntu boxes): Master can run some tests commands: ### Steps to Reproduce Issue ATTEMPT 1-of-2: empty /srv folder, no states defined: Running command from the saltstack documentation would end up with an error: salt 'my_remote_box.ec2.internal' state.apply pillar='{""cheese"": ""spam""}' -l debug  ### Versions Report On Master: salt --versions-report Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: Not Installed cherrypy: 3.5.0 dateutil: 2.4.2 gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.12 (default, Nov 19 2016, 06:48:10) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial machine: x86_64 release: 4.4.0-67-generic system: Linux version: Ubuntu 16.04 xenial --------------------- On minion: salt-call --versions-report Salt Version: Salt: 2016.11.3 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.5 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 3.13.0-112-generic system: Linux version: Ubuntu 14.04 trusty",Does that clear up why you are seeing this behavior?,"Megan, Thank you for your quick response. Probably would be good idea to integrate your answer into the docs as it doesn't mention short live expectancy of new pillar value(s), instead docs just suggest ""will add pillar"" thus my confusion. Does that clear up the mystery? Yes, absolutely, but I still have uncovered use case which I'm trying to solve using Salt: - I've one ""server"" and multiple ""workers"" - I want to be able to set key/values dynamically (ideally w/o creating/modifying any files on master) and push them downstream to ""workers"" - similarly ""workers"" should be able to dynamically add/modify/remove key/values which should be visible from the ""server"" My understanding of Grains and Pillars is that they both serve similar purpose: to carry some datasets to/from minions, where Pillars are set by master and Grains are filled up by minions. So logically my use case perfectly maps to Pillars/Grains. I can set/modify Grains on both ends (master and minion), but have to ""saltutil.sync_all"" on master to catch any Grains modifications done by minion on the master side (which is ok). And those Grains manipulations are done dynamically from CLI without any file(s) edit. Now I'm looking for somewhat similar functionality for Pillars: some CLI dynamic call which would add/modify/delete Pillars and then ""saltutil.refresh_pillar"" to recompile them on minion (since pillar data is computationally expensive). Seems the last bit, which is ""SETTING PILLAR DATA AT THE COMMAND LINE"" is actually missing from rich Salt API? (note: my use case does not need any salt-state(s), but I'm ok to maintain some fake/bogus salt-state if pillars can not do on their own as grains seems to be capable of). Thanks, Dmitry Shevkoplyas"
saltstack/salt,https://github.com/saltstack/salt/issues/40420,saltstack_salt_issues_40420,"mac_package.installed fails when spaces are in app name

### Description of Issue/Question When trying to install an app that has a space in its name, like ""Google Chrome"", the installer fails. It works fine when I take the space out of the name. ### Setup Have tried this three ways: ",Can you please run this in debug mode and paste a sanitized version of the debug log here?,
saltstack/salt,https://github.com/saltstack/salt/issues/55316,saltstack_salt_issues_55316,"Salt minion only attempts authentication one time after caching key

### Description of Issue A fresh install of salt using salt-bootstrap will, at random, only attempt to authenticate to the master a single time. The minion will successfully provide its key to the master and the master will accept it, but the minion never attempts to re-verify the status of its key and thus the master cannot connect to it. Restarting the salt-minion service resolves the issue. ### Setup Bare install of CentOS 7 as the minion Minion installed via `bootstrap_salt.sh -x python3 -X -i $hostname` as part of kickstart script ### Steps to Reproduce Issue 1. Bootstrap new node and install salt-minion via salt bootstrap. 2. Accept minion key on master 3. Observe failures Trace of affected salt-minion: ",can you share a sanitized version of your master and minion configs?,"@Ch3LL here you go: master  I do know that the identical bootstrap process works correctly on Ubuntu 18.04, so that leads me to believe its some kind of environment-related bug specific to CentOS 7. I've played with the systemd unit files to add different After/Wants directives with no luck. Additionally, subsequent reboots of the hosts work correctly every time and the behavior doesn't reappear. It only happens the first time the minion caches its key with the master and never re-occurs as far as I have seen."
saltstack/salt,https://github.com/saltstack/salt/issues/40485,saltstack_salt_issues_40485,"salt-cloud - AWS, permission denied when sshing to the new instance

### Description of Issue/Question I'm trying to spawn an EC2 instance using salt-cloud but when reaching the point where salt tries to ssh to the new instance (to saltify it?), I get ""Permission denied"" on my ssh key. There seems to be some similarity with: https://github.com/saltstack/salt/issues/38821 (but in my case ec2-user is tried first, only after 15 times other usernames are tried) https://github.com/saltstack/salt/issues/38822 ( but this is about working around the issue by not saltifying the machine) If you think this is a duplicate, I will move this information to the relevant issue. ### Setup /etc/salt/cloud.profiles ",Where are you adding that subprocess call? which file? When I added that to scripts/salt-cloud under the main method it printed out root and I cannot replicate your issue.,"Sorry, I forgot to add the file. I added them right before [this line](https://github.com/saltstack/salt/blob/develop/salt/utils/cloud.py#L942). My /etc/salt/master file has these lines:  (the rest are commented out) I didn't change anything in master configuration but this probably explains why my script is running as ""salt"" user."
saltstack/salt,https://github.com/saltstack/salt/issues/40486,saltstack_salt_issues_40486,"Problems with encoding, UTF-8 or Unicode

### Description of Issue/Question Especially with pillar data it doesn't seem to be possible to use UTF-8 encoded characters. Please see output below - most of the test cases do not work. Is there any possibility or workaround to use UTF-8 in pillar data? ### Setup  ### Steps to Reproduce Issue Please see comments in files above. ### Versions Report Please see above.",Can you explain where you are adding `.decode('utf-8')` when it works?,"Hi Megan, please see my previous comment. In case of test2 I added `.decode('utf-8')` to the sls file and in test3 I added it to the template:  For the other test cases adding `.decode('utf-8')` wasn't applicable or not working. Best regards Thomas"
saltstack/salt,https://github.com/saltstack/salt/issues/47199,saltstack_salt_issues_47199,"Targeting by list (-L) broken for minions behind syndic?

### Description of Issue/Question In contrast to targeting by wildcard targeting by list outputs minions twice including an error: ",Can you verify you don't have any defunct processes or multiple processes for the minion/syndic services?,I've just started the Vagrant machines. This time it looks even worse. The processes seem to be started only once: 
saltstack/salt,https://github.com/saltstack/salt/issues/43743,saltstack_salt_issues_43743,"salt-ssh: config.options not returning correct value in custom execution module

### Description of Issue/Question Unable use `config.option` in custom execution module ### Setup /srv/salt/_modules/mymod.py ","Do you have `pillar_opts` set to True in your master config file? Thanks, Daniel","Hi @gtmanfred, no I didn't. Setting that option to `True` or `False` makes no difference."
saltstack/salt,https://github.com/saltstack/salt/issues/44382,saltstack_salt_issues_44382,"[salt-ssh] Errors/Exceptions are not propagated when tty=True

### Description of Issue/Question salt-ssh not showing the error output when the host is setup with `tty=True`. ### Setup ",Do you see this same behavior on a supported OS like ubuntu14?,"Yes, I can replicate this on any OS with the recent versions of salt. "
saltstack/salt,https://github.com/saltstack/salt/issues/54076,saltstack_salt_issues_54076,"[salt-ssh] AttributeError raised when targeting an IP address

### Description of Issue Looks like `salt-ssh` is trying to resolve the hostname when targeting an IP directly. Failing to resolve the hostname causes it to fail completely. I would expect the command just run without issue. I don't see why reverse DNS is required for this at all. ### Steps to Reproduce Issue ",When you're adding the entry into /etc/hosts is that on the target machine or the machine you're running salt-ssh from?,"Hi @garethgreenaway, its all on the same host. I think the following is the offending code: https://github.com/saltstack/salt/blob/cb6cfcc5945cc66c9e675b2777dde8591eedd20d/salt/client/ssh/__init__.py#L408-L410 I'm guessing, if I target an IP address and PTR points to hostname that points to a different IP, I would connect to that second IP. That is frankly a terrible behavior."
saltstack/salt,https://github.com/saltstack/salt/issues/41504,saltstack_salt_issues_41504,"Can't set REG_DWORD registry value larger than 0x7FFFFFFF

### Description of Issue/Question I'm trying to set a DWORD value above 0x7FFFFFFF (but not larger than 0xFFFFFFFF). I was able to do this in 2016.3.6, but cannot in 2016.11.5. The reg module contains a function [`_mbcs_to_unicode_wrap`](https://github.com/saltstack/salt/blob/660ccbdb4f32d1c2eccd1f4fc1a54ccef0ede9f6/salt/modules/reg.py#L117) that checks `elif isinstance(obj, int):`. However, in Python 2.7, when a number is large enough, its type is `long` instead of `int`: ","Can you verify that this fixes the problem? https://pythonhosted.org/six/#six.integer_types Thanks, Daniel","@gtmanfred Yep, looks good to me. Tried the same thing locally, and it worked fine. Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/46282,saltstack_salt_issues_46282,"salt master not releasing memory

### Description of Issue/Question I have a salt master running in a docker container hooked on to 280 minions running in different vms on the same network. When the master is not connected to any minions it uses about 300 mb of ram. As i add new minions, i provision these through a script, the master start consuming more memory. For 100 minions it consumes about 1.4gb ram. As i add more minions the ram keeps increasing reaching about 2 gb ram utilization for 280 minions. After an hour when there is no user induced operation on the setup, master reduces its memory consumption to 1.7gb. It stays at this level for long time coming down only until 1.3 gb after which when any operation is performed like applying sls on a minion or a ping command it increases to say 1.9gb and after some time comes down to 1.8gb and stays there. I expect the salt master to free up ram after some time but the ram it relinquishes is pretty much negotiable. The master host has 5gb ram. are there any pointers to how i can tune this master to utlize resources better.vi etc ### Setup master config  ### Versions Report Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: 1.9.1 cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.9.5 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (default, Mar 25 2017, 01:32:09) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.2 ZMQ: 4.1.4 System Versions: dist: locale: ANSI_X3.4-1968 machine: x86_64 release: 4.4.114-1.ph1 system: Linux version: Not Installed",can you install setproctitle and paste output of `ps aux | grep -i salt`? aslo anything useful in the debug logs?,Im having trouble installing setproctitle neverthless this is what ps shows as of now root 577 0.3 0.1 300444 61668 ? S Mar01 6:40 /bin/python /usr/bin/salt-master -d root 20247 2.7 61.2 32869484 30281988 ? Sl Mar01 59:15 /bin/python /usr/bin/salt-master -d root 21931 0.0 0.0 18244 4 ? Ss Feb28 0:00 /bin/sh -c /tmp/salt/config_sm.sh && bash root 23097 0.0 0.0 277012 14504 ? S Feb28 0:06 /bin/python /usr/bin/salt-master -d root 23098 0.0 0.0 273756 9068 ? S Feb28 0:00 /bin/python /usr/bin/salt-master -d root 23102 0.6 1.9 1171232 954272 ? Sl Feb28 27:58 /bin/python /usr/bin/salt-master -d root 23103 6.0 4.1 2744528 2072804 ? S Feb28 247:48 /bin/python /usr/bin/salt-master -d root 23108 14.9 0.7 5029416 353548 ? Sl Feb28 612:17 /bin/python /usr/bin/salt-master -d root 23110 0.0 0.0 277012 14112 ? S Feb28 0:06 /bin/python /usr/bin/salt-master -d root 23112 6.6 0.1 465332 75816 ? Sl Feb28 274:08 /bin/python /usr/bin/salt-master -d root 23120 6.6 0.1 467380 78168 ? Sl Feb28 272:02 /bin/python /usr/bin/salt-master -d root 23121 6.6 0.1 466332 75836 ? Sl Feb28 273:08 /bin/python /usr/bin/salt-master -d root 23122 6.6 0.1 463264 74432 ? Sl Feb28 274:01 /bin/python /usr/bin/salt-master -d root 23123 6.7 0.1 465608 76000 ? Sl Feb28 275:17 /bin/python /usr/bin/salt-master -d root 23127 0.0 0.0 199776 2924 ? S Feb28 0:05 /bin/python /usr/bin/salt-api -d root 23129 0.7 0.0 210244 40052 ? S Feb28 29:04 /bin/python /usr/bin/salt-api -d root 27170 0.0 0.0 6484 880 pts/1 S+ 07:17 0:00 grep --color=auto -i salt root 31375 0.4 0.1 216428 62304 ? S+ 04:22 0:50 /bin/python /usr/bin/salt-run state.event pretty=True
saltstack/salt,https://github.com/saltstack/salt/issues/41736,saltstack_salt_issues_41736,"Salt Syndic fails randomly

### Issue I am running a multi master setup with the latest salt. What I observe is , my salt syndic failing randomly when a query from my Master of Masters go through. The logs dont say anything useful. Here are the logs trace : https://pastebin.com/2ADdvLAA ### Setup On Syndic Master node : The only change in /etc/salt/master is : syndic_master: MOM On Master of Master node : The only change in /etc/salt/msater is : order_masters: True ### Steps to Reproduce Issue Just setup the a MoM and a syndic node and this issue should possibly be reproducable. ### Versions Report Salt Version: Salt: 2016.11.4 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.5 docker-py: Not Installed gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.5.1 ZMQ: 4.1.6 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 4.4.0-66-generic system: Linux version: Ubuntu 14.04 trusty","Can you give me the specs of all the devices involved? Thanks, Daniel","Specs you mean ? They are mostly VPS from Digital Ocean and Linode, mostly 8 and 16GB servers. The MoM is on a different provider (azure) and all the masters talk to azure. The azure has a whitelisted ip and port for salt and its masters. The masters have whitelisted ip for MoM and its ports. Not sure what else you would need."
saltstack/salt,https://github.com/saltstack/salt/issues/41424,saltstack_salt_issues_41424,"""salt '*' test.ping"" run on master has terminated salt-minion on a group of minions

### Description of Issue/Question On 2017-05-25 14:45 on Master ""salt '*' test.ping"" reported some minions (over 20) as "" Minion did not return. [Not connected]"". On all of those minions last record salt-minion appeared not running, and 'tail /var/log/salt/minion' was 2017-05-25 14:45:03,426 [salt.crypt ][CRITICAL][14810] The Salt Master has rejected this minion's public key! To repair this issue, delete the public key for this minion on the Salt Master and restart this minion. Or restart the Salt Master in open mode to clean out the keys. The Salt Minion will now exit. I fixed the issue with deleting their keys from both master and minions, and restarting service salt-minion. MASTER: salt-key -d MINION MINION: rm /etc/salt/pki/minion/* ; service salt-minion restart MASTER: salt-key -a MINION ### Setup on the Master configuration defines only worker_threads, file_roots, and nodegroups on some rejected Minions configuration defines only hostname of the Master, on other rejected Minions the master hostname is not defined (default). ### Steps to Reproduce Issue I cannot reproduce this yet. After recreating public keys on the minions and pushing them to the master, all the minions keep responding. ### Versions Report # salt --versions-report Salt Version: Salt: 2016.11.5 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.4.1 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8.1 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.20.2 Mako: 0.3.4 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: 3.4.3 pygit2: Not Installed Python: 2.6.6 (r266:84292, Aug 9 2016, 06:11:56) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: redhat 6.9 Santiago machine: x86_64 release: 2.6.32-642.15.1.el6.x86_64 system: Linux version: Red Hat Enterprise Linux Server 6.9 Santiago All rejected minions are running RHEL6.8 # salt-minion --versions-report Salt Version: Salt: 2016.11.4 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.4.1 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: unknown libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.20.2 Mako: 0.3.4 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.6.6 (r266:84292, Aug 9 2016, 06:11:56) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.3.1 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 3.2.5 System Versions: dist: redhat 6.8 Santiago machine: x86_64 release: 2.6.32-642.13.1.el6.x86_64 system: Linux version: Red Hat Enterprise Linux Server 6.8 Santiago","Did you update to from salt 2016.11.4 to 2016.11.5 right before this update? Thanks, Daniel","Yes, we did."
saltstack/salt,https://github.com/saltstack/salt/issues/40848,saltstack_salt_issues_40848,"Pillars and environments

### Description I am having an issue to get environments working in salt. What I am trying to achieve is: I have multiple environments running on the same machine. States will be (mostly) the same for all environments, but folders differ. I want to achieve that by having the folders in pillars. ### Setup My file structure:  It seems that I can not tag this as question. Thanks.",Does this work when querying `pillar.items`? `salt '*' pillar.items pillarenv=env2`,"Thank you for the reply. No, it does not work either: "
saltstack/salt,https://github.com/saltstack/salt/issues/40928,saltstack_salt_issues_40928,"Orchestration runner, highstate and environment question

### Description of Issue/Question Every time salt.orchestrate is called from the reactor, salt orchestrate applies all the states under ""base"" environment as listed in file top.sls. We are using a single top.sls file under base environment and it works fine if it is called via regular salt cli (e.g: salt 'minionA' state.highstate). Someone would expect the salt.state orchestrate function for target ""minionA"" to apply all states (state1, state2 and state3) considering the pillar based targeting in file top file. ""minionA"" does have ""role:production"" set in its pillar data. Unfortunately **only state1 and state2 are run** when the salt.state orchestrate function runs. Checked sat-master event bus (via salt-run state.event) and recorded the following call to state.orchestrate via the reactor system: ",Did you restart the master after you made the change?,"Of course. Sent from a handheld device. On 27 Apr 2017, at 21:26, Daniel Wallace <notifications@github.com<mailto:notifications@github.com>> wrote: Did you restart the master after you made the change? — You are receiving this because you authored the thread. Reply to this email directly, view it on GitHub<https://github.com/saltstack/salt/issues/40928#issuecomment-297798918>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AAggMISs4wDaLdLENxaHBJVdEInliWIvks5r0N22gaJpZM4NKd4b>."
saltstack/salt,https://github.com/saltstack/salt/issues/41875,saltstack_salt_issues_41875,"Inconsistent results from salt-run manage.status

### Description of Issue/Question When I ran `salt-run manage.status` I get three nodes in category ""down"":  Would be great to get and idea where the errors might be. Thanks for your help and support!",Do you ever see manual test.pings return as false? Thanks!,"Thanks for your quick response! Yes and no. One minion is running on the master itself, the others are in different networks. The master is running in the Azure ""cloud"", die minions are running on Raspberry Pis in a local network environment. After I solved disconnection of clients to the master, by following https://github.com/saltstack/salt/issues/26888#issuecomment-138193623 the situation seems at least be stable on the connection side. Yes. No. That looks stable."
saltstack/salt,https://github.com/saltstack/salt/issues/48086,saltstack_salt_issues_48086,"Failure with quickly cascaded salt-ssh state.apply calls to the same minion 

### Description of Issue/Question When executing two concurrent `state.apply`es targeting the same SSH minion and with a small delay in between, one of the states is not applied and it returns an empty response. The `queue=true` doesn't seem to make a difference. However, without the small delay in between the calls both seem to work fine. ### Setup /srv/salt/echo1.sls ",Did you see it working on a previous version?,@Ch3LL I only noticed it recently but I don't think it worked in previous versions either. I tested with `2016.11.4` and I was able to reproduce the problem.
saltstack/salt,https://github.com/saltstack/salt/issues/41159,saltstack_salt_issues_41159,"Salt highstate does not sync the minion

### Description of Issue/Question After i manually removed a dir in minion, i tried to sync up again but highstate is not ""adding"" the dir back again on minion. How can I force a sync to add this specific dir into the minion once again? ### Versions Report # salt --versions-report Salt Version: Salt: 2016.3.1 Dependency Versions: cffi: 1.6.0 cherrypy: Not Installed dateutil: 1.5 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.5 (default, Aug 2 2016, 04:20:16) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.7.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: redhat 7.2 Maipo machine: x86_64 release: 3.10.0-327.28.2.el7.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.2 Maipo","Which directory? Is this a directory for the minion running, or is this created with a state? Please provide a setup so that I can replicate this. Thanks, Daniel","This is created by the state, for example: /var/container_data I manually removed this container_data And i was expecting that this should be created once again with highstate command, but no. Nothing happens."
saltstack/salt,https://github.com/saltstack/salt/issues/41503,saltstack_salt_issues_41503,"No Top file or external nodes data matches found.

### Description of Issue/Question ### Setup # cat top.sls base: '*': - system.configure - system.optimize - deployment.volumes - deployment.enabled ### Steps to Reproduce Issue salt '*' state.highstate ### Versions Report # salt --versions-report Salt Version: Salt: 2016.3.1 Dependency Versions: cffi: 1.6.0 cherrypy: Not Installed dateutil: 1.5 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.5 (default, Aug 2 2016, 04:20:16) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.7.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: redhat 7.2 Maipo machine: x86_64 release: 3.10.0-327.28.2.el7.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.2 Maipo","Where is the top.sls file? Can you see it when you run `salt-call cp.list_master` on the minion? Thanks, Daniel",top.sls is: root@vvcelpeloadm01:/srv/salt/state # ls -ltrh total 4.0K drwxrwxrwx. 6 root root 61 May 30 14:08 deployment drwxrwxrwx. 6 root root 62 May 30 14:08 system -rwxrwxrwx. 1 root root 108 May 30 14:08 top.sls when i run this salt-call cp.list_master on minion: ... ... ... - state/system/optimize/init.sls - state/system/users/init.sls - state/top.sls - system/configure/README.md - system/configure/init.sls - system/locale/README.md - system/locale/init.sls - system/optimize/README.md - system/optimize/init.sls - system/users/init.sls - top.sls
saltstack/salt,https://github.com/saltstack/salt/issues/43373,saltstack_salt_issues_43373,"use keyword breaks sls_id

### Description of Issue/Question When one state has a 'use' clause, sls_id does not read it and fails. I find sls_id very useful for debugging, and while state.highstate does work as expected, this would be much appreciated. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) Single SLS file, in this example related to MySQL:  The state checks for existence of a database and user. ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) If the use: part is not present but rather connection credentials are copied, all is fine. With use, I get salt 'minion' state.sls_id le-user lesls 'MySQL Error 2002: Can't connect to local MySQL server through socket' which clearly shows the above setting was not read salt 'minion' state.sls_id le-db lesls works, as that one doesn't have a use, and it will report correctly if the DB exists ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Both are Name : salt-master Version : 2017.7.1 Release : 1.el7 Architecture: noarch Install Date: Tue 22 Aug 2017 04:39:41 PM UTC From the saltstack.org repo",Do you know if this was working previously?,Same error with Source RPM : salt-2016.11.7-1.el7.src.rpm
saltstack/salt,https://github.com/saltstack/salt/issues/48146,saltstack_salt_issues_48146,"mysql_query.run: exception on 2018.3

### Description of Issue/Question On Salt 2018.3 running this state raises an exception (tested with salt and salt-ssh): ",Can you give that a try?,"Works perfectly, thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/41273,saltstack_salt_issues_41273,"win_service.stop failed when used non-english locale

### Description of Issue/Question win_service.stop failed when used non-english locale because of these lines in **win_service.py**: ",Can you post the error you are receiving?,"@Ch3LL Services are stopped, but error with unreadable message received: ![image](https://cloud.githubusercontent.com/assets/6271862/26144848/1da7e53e-3af3-11e7-99a3-2f804d631099.png) Sometimes this issue does not appear, so it can be difficult to reproduce. Is it correct that service is stopped by `net` command and checks output, but not exit status? Also why is it necessary to try stop it by both `net` and `win32serviceutil`? - `win_service.start` method has different behavior and uses only `win32serviceutil`."
saltstack/salt,https://github.com/saltstack/salt/issues/41276,saltstack_salt_issues_41276,"undefined symbol: SSLv2_method while using M2Crypto 0.25.1

### Description of Issue/Question File ""runserver.py"", line 11, in <module> from commandment.app import create_app File ""/root/python-mdm/commandment/app.py"", line 7, in <module> from .mdm import mdm_app File ""/root/python-mdm/commandment/mdm.py"", line 8, in <module> from .pki.ca import get_ca, PushCertificate File ""/root/python-mdm/commandment/pki/ca.py"", line 11, in <module> from m2certs import RSAPrivateKey, Certificate, CertificateRequest, Identity, NID_userId File ""/root/python-mdm/commandment/pki/m2certs.py"", line 12, in <module> from M2Crypto import EVP, RSA, BIO, X509, ASN1, m2 File ""/usr/local/lib/python2.7/dist-packages/M2Crypto/__init__.py"", line 26, in <module> from M2Crypto import (ASN1, AuthCookie, BIO, BN, DH, DSA, EVP, Engine, Err, File ""/usr/local/lib/python2.7/dist-packages/M2Crypto/ASN1.py"", line 15, in <module> from M2Crypto import BIO, m2, util File ""/usr/local/lib/python2.7/dist-packages/M2Crypto/BIO.py"", line 10, in <module> from M2Crypto import m2, util File ""/usr/local/lib/python2.7/dist-packages/M2Crypto/m2.py"", line 30, in <module> from M2Crypto._m2crypto import * File ""/usr/local/lib/python2.7/dist-packages/M2Crypto/_m2crypto.py"", line 26, in <module> __m2crypto = swig_import_helper() File ""/usr/local/lib/python2.7/dist-packages/M2Crypto/_m2crypto.py"", line 22, in swig_import_helper _mod = imp.load_module('__m2crypto', fp, pathname, description) ImportError: /usr/local/lib/python2.7/dist-packages/M2Crypto/__m2crypto.so: undefined symbol: SSLv2_method root@mdm:~/python-mdm# /M2Crypto/__m2crypto.so: undefined symbol: SSLv2_method -bash: /M2Crypto/__m2crypto.so:: No such file or directory ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) pip install M2Crypto==0.25.1 ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) salt 2016.11.5 (Carbon) Dependency Versions: cffi: 1.10.0 cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Nov 19 2016, 06:48:10) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.1 ZMQ: 4.1.6 System Versions: dist: Ubuntu 16.04 xenial machine: x86_64 release: 4.4.0-47-generic system: Linux version: Ubuntu 16.04 xenial",What command are you running? I have this same version of M2Crypto and have not seen that error with regular salt use.,after install M2Crypto==0.25.1 I have added PUSH Certificate and other pem certificate and when i restart server it shows me this error.
saltstack/salt,https://github.com/saltstack/salt/issues/47336,saltstack_salt_issues_47336,"Nested External Pillar returns in Vault

### Description of Issue/Question I was trying to get the vault external pillar to return the data in a nested format. the cobbler external pillar had the ability and so I look into it a bit and it seems to be a simple change that could be enacted for vault pillar (and likely other pillars too) These changes would allow for each vault source specified to be nested under a keyname in the pillar return. Also, if duplicate keynames are present (as in the example confs below) they get merged. Lastly, it shouldn't affect existing configs, as the old config file format continues to work when no nesting_key is specified. Probably worth changing ""conf"" to something more descriptive in the ext_pillar definition so that the configuration file is easier to read. I have tested this with local edits on my test instance salt master and it seems to work as intended. I haven't looked at any other external pillar modules to see if a similar nesting tag would be doable. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) /usr/lib/python2.7/site-packages/salt/pillar/vault.py: =======Adding a line to the ext_pillar def=========== def ext_pillar(minion_id, # pylint: disable=W0613 pillar, # pylint: disable=W0613 conf): ------- def ext_pillar(minion_id, # pylint: disable=W0613 pillar, # pylint: disable=W0613 conf, nesting_key=None): =======Adding a line to the ext_pillar def=========== =======editing the data return at the end of the file=========== return vault_pillar ------- if nesting_key: vault_pillar = {nesting_key: vault_pillar} return vault_pillar =======editing the data return at the end of the file=========== =======Update documentation for the external pillar conf file=========== ext_pillar: - vault: path=secret/salt - vault: path=secret/root - vault: path=secret/minions/{minion}/pass ext_pillar: - vault: conf: path=secret/salt nesting_key: keyname1 - vault: conf: path=secret/root nesting_key: keyname1 - vault: conf: path=secret/minions/{minion}/pass nesting_key: keyname2 =======Update documentation for the external pillar conf file=========== ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: Not Installed cherrypy: unknown dateutil: 1.5 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.1 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Aug 4 2017, 00:39:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.4.1708 Core locale: UTF-8 machine: x86_64 release: 3.10.0-693.21.1.el7.x86_64 system: Linux version: CentOS Linux 7.4.1708 Core","Can you open a PR to implement this on the develop branch of salt? Thanks, Daniel","I just submitted a PR: https://github.com/saltstack/salt/pull/47409 Never have before, so let me know if any additional information is needed."
saltstack/salt,https://github.com/saltstack/salt/issues/46558,saltstack_salt_issues_46558,"typos: ""an function""

",Can you provide some version information where you're seeing these typos? Thanks!,These are on the git `master` branch.
saltstack/salt,https://github.com/saltstack/salt/issues/41384,saltstack_salt_issues_41384,"SaltStack AWS EC2 Issue

I'm trying to install a SaltMaster and a local Minion on my Ubuntu 16.04 AWS EC2 machine. I used the bootstrap script. My /srv directory looks as follow:  regarding to the salt docu everything should works fine. I made many setups of salt masters on different servers so I assume this is an AWS problem?","How are you adding the master ip address to the salt minion? It looks like it is commented out based on what was provided. Thanks, Daniel",It's added over the default config. But well I reinstalled the salt master and now it's working. Not sure what the reason was. Issue can be closed. Thanks
saltstack/salt,https://github.com/saltstack/salt/issues/41433,saltstack_salt_issues_41433,"boto_cfn.present fails when reporting error for failed state

### Description of Issue/Question ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) **Minimal state**: ","Can you upgrade to 2016.11, and just make sure that this same issue is there? Thanks, Daniel","Updating to 2016.11 breaks our other states. The file in question has not changed since Jan 19, 2016 and the bug is still present on the develop branch."
saltstack/salt,https://github.com/saltstack/salt/issues/41455,saltstack_salt_issues_41455,"Overriding /tmp directory

### Description of Issue/Question Hi, I wish to override the /tmp directory used by Saltstack (master and minion) for storing and executing scripts. I want to know if this is sufficient and if I don't go into possible issues with this setup. ### Setup I actually do this by adding an environment variable TMPDIR for my services. ### Steps to Reproduce Issue N/A ### Versions Report Salt Version: Salt: 2015.8.12 Dependency Versions: Jinja2: 2.7.2 M2Crypto: Not Installed Mako: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 Python: 2.7.5 (default, Nov 6 2016, 00:28:07) RAET: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed libgit2: Not Installed libnacl: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed python-gnupg: Not Installed smmap: Not Installed timelib: Not Installed System Versions: dist: centos 7.3.1611 Core machine: x86_64 release: 3.10.0-514.16.1.el7.x86_64 system: CentOS Linux 7.3.1611 Core",Can you clarify which scripts?,"Hi, this is for all scripts, and my question is about Saltstack taking this setting across all modules, because our security officer forbid us to execute anything in /tmp. Defining TMPDIR as an environment variable to the service is working fine as far, but I was just wondering if any module don't take this into account."
saltstack/salt,https://github.com/saltstack/salt/issues/41578,saltstack_salt_issues_41578,"The minion loses connectivity to the master after changing IP address

### Description of Issue/Question ### Setup The Salt master is at 10.17.15.194 One of the Salt minion is at 10.17.15.127 ### Steps to Reproduce Issue ",What do the logs show on the minion side? Also do you still see this behavior after restarting the minion service?,"The does not show anything in the logs in the minion: I guess it doesn't realize anything has changed. Connectivity is restored after running `systemctl restart salt-minion` in the minion, and I can run fine `salt ""*"" test.ping` in the master again."
saltstack/salt,https://github.com/saltstack/salt/issues/48805,saltstack_salt_issues_48805,"salt-cloud. Can not create create snapshot for servers which use 'Disaster Recovery Replica created VMware Site Recovery Manager'

Hello @all, Sorry, i am not VmWare specialist and can be wrong in some term, but i will try to describe the situation. We have two DC: DC1 and DC2. Several servers located in DC1, several servers in DC2. But we have 3 servers which use _'Disaster Recovery Replica created VMware Site Recovery Manager'_. It is very cool[ VmWare feature](https://youtu.be/5OaSemd8qAc). But on DC1 we have a real server. On DC2 we have 'copied fake server', look to pic: https://imgur.com/a/i2UYvIe Via salt-cloud we can not choose the correct VmWare farm and we can not create snapshot, because salt-cloud tried to create snapshot for 'copied fake server':  Could you please suggest something? Thanks in advance!","Can you please provider the `--versions-report` like the issue template requested? Thanks, Daniel","hello, thanks for your reply. Salt-version: "
saltstack/salt,https://github.com/saltstack/salt/issues/50288,saltstack_salt_issues_50288,"grains.virtual is incorrect on IBM Power servers

Hello, We have several virtual IBM Power-servers (Linux SLES 12):  Let me know if you need additional information.",What version of salt are the master and minion?,"Hello @dwoz, "
saltstack/salt,https://github.com/saltstack/salt/issues/41482,saltstack_salt_issues_41482,"Debian Wheezy repo error for libsodium13

### Description of Issue/Question Hi on Debian Wheezy server i got this error when try to update : Prendre : 1 http://repo.saltstack.com/apt/debian/7/amd64/latest/ wheezy/main libsodium13 amd64 1.0.3-1 [161 kB] Prendre : 2 http://repo.saltstack.com/apt/debian/7/amd64/latest/ wheezy/main libzmq3 amd64 4.0.5+dfsg-3 [467 kB] Prendre : 3 http://repo.saltstack.com/apt/debian/7/amd64/latest/ wheezy/main bsdmainutils amd64 9.0.6 [214 kB] Prendre : 4 http://repo.saltstack.com/apt/debian/7/amd64/latest/ wheezy/main python-jinja2 all 2.7.3-1 [171 kB] Prendre : 5 http://repo.saltstack.com/apt/debian/7/amd64/latest/ wheezy/main python-msgpack amd64 0.4.2-1 [126 kB] Prendre : 6 http://repo.saltstack.com/apt/debian/7/amd64/latest/ wheezy/main python-yaml amd64 3.11-2 [176 kB] 514 ko téléchargés en 0s (11,6 Mo/s) localepurge: Disk space freed in /usr/share/locale: 0 KiB localepurge: Disk space freed in /usr/share/man: 0 KiB Total disk space freed by localepurge: 0 KiB E: impossible de récupérer http://repo.saltstack.com/apt/debian/7/amd64/latest/pool/main/libs/libsodium/libsodium13_1.0.3-1_amd64.deb : Taille incohérente i see that you solved this problem long time ago for Debian Jessie. (#29812) source_list config : deb http://repo.saltstack.com/apt/debian/7/amd64/latest wheezy main ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)","Can you reopen this issue in https://github.com/saltstack/salt-pack ? This is where all the packaging stuff is located. Thanks, Daniel",done --> https://github.com/saltstack/salt-pack/issues/323
saltstack/salt,https://github.com/saltstack/salt/issues/41517,saltstack_salt_issues_41517,"pkg.latest doesn't work on Solaris 11.3.

### Description of Issue/Question pkg.latest doesn't work on Oracle Solaris 11.3. I have pulled patches from https://github.com/saltstack/salt/commit/92011dbe5fddaa9a8079aef57fcf792eb9528571 but nothing was changed ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) Basic setup. Here is config /etc/salt/minion: ",How did you install salt?,Build from source code. Can you share your pkg? Thanks.
saltstack/salt,https://github.com/saltstack/salt/issues/41549,saltstack_salt_issues_41549,"'_pygit2.Tag' object has no attribute 'tree'

### Description of Issue/Question salt-call salt.highstate aborted with a long stack trace: ",Would you be able to put together a pull request with the following fix? Thanks!,@garethgreenaway I cannot even find the code in the current develop tree. Its probably outdated and solved by another change? That said I will close the issue and hope that the problem will not come up again in another way?
saltstack/salt,https://github.com/saltstack/salt/issues/43972,saltstack_salt_issues_43972,"Templating pillar top.sls with pillar.get

### Description of Issue/Question ### Setup The following works to provide minion-specific pillar data at the path `/srv/pillar/minion/<host name>.sls`. This uses grains.  Is this currently possible? ### Versions Report 2017.7.1 everywhere.",What are you trying to accomplish? Perhaps we can find an alternative solution.,"I'm a big fan of using nodegroups to logically separate my minions by their role. And as an Ansible convert, I'm used to being able to assign groups of hosts variables that they have in common. As per my example, I already have a pillar file per minion (or, I just drop one in as needed without touching top.sls) and would like to do the same for nodegroups. If it's not currently possible, I'm sure I could rig up a reactor to do it, but it's not very succinct."
saltstack/salt,https://github.com/saltstack/salt/issues/44562,saltstack_salt_issues_44562,"Jinja formatting inconsistency

### Description of Issue/Question Bit of a weird one, but I have some data in Pillar that I'm altering before putting it into a config file. When I output the final variable `{{ vars_listified }}` (Wonderful name, I know) with `cmd.run` using `echo`, or `file.managed` `contents: {{ vars_listified }}` it formats correctly. However, if I use this within a yaml template, with `file.serialized`, it doesn't format the data correctly. ### Setup My pillar:  Minion also on same version.",Can you give that a try and see if that solves your problem?,Tried @lorengordon's suggestion but no dice.
saltstack/salt,https://github.com/saltstack/salt/issues/41581,saltstack_salt_issues_41581,"docker-registries authentication seemingly failing when using dockerng.image_present 

### Description of Issue/Question Using a private registry, and dockerng.image_present, the minion either seems to not be using the correct auth, or not using it at all, in order to connect to that private registry ... I hit the following issue(s): - Pull fails for -any- new image with the following error (using a test image here): Comment: Encountered error pulling <my_registry>/busybox:latest: Pull failed for <my_registry>/busybox:latest. Error(s) follow: Error: image busybox:latest not found - The pull also fails to find changes, when run against existing images (which have changed): Comment: Image '<my_registry></my/path/my_image>:latest' was pulled, but there were no changes I am assuming (possibly incorrectly) they are both due to the same authentication issue, if that's the case then the second message is a bit misleading. ### Setup From `pillar.items`:  I have verified doing a manual `docker login` with the above credentials allows me to successfully pull the images mentioned above to the minion/host experiencing the issue. I have also verified there is no issue using the above configuration with saltstack to pull busybox from the public dockerhub (it's only having issues with the private registry) ### Steps to Reproduce Issue -Setup a private registry/configuration as above to access it -Configure dockerng.image_present with an image in that registry -Run the test-image state The logs unfortunately just repeat the output from above, even on debug. ### Versions Report 2016.11.5 on both master/minion I had seen this issue before when I had an older master/newer minion mismatch, and by upgrading the master/downgrading the issue went away. However I needed some of the new fixes from this minion version, so I brought them both up to the current 'latest'. The configurations were not touched in between the working version pair and the upgrade.",Which version was that?,"@Ch3LL I'm not 100% sure of my previous functioning versions (I've been playing around with a lot of combinations), but trying out what I have available ... both 2016.11.4 & 2016.11.5 masters appear to pull images fine with a 2015.8.8 minion. Edit: I've just tested that a 2016.3.6 minion also works."
saltstack/salt,https://github.com/saltstack/salt/issues/43216,saltstack_salt_issues_43216,"Error while storing job results in an external system

### Description of Issue/Question Error while storing job results in an external system ### Setup Salt-2017.7.1 single master setup with 1 ubuntu minion ### Steps to Reproduce Issue 1) Created a log server and installed mysql 2) Created mysql schema as mentioned here: https://docs.saltstack.com/en/latest/ref/returners/all/salt.returners.mysql.html#module-salt.returners.mysql 3) Installed mysqldb module on both minion and log server 4) Added below lines in minion configuration file: mysql.host: 'salt' mysql.user: 'salt' mysql.pass: 'salt' mysql.db: 'salt' mysql.port: 3306 hostname, username and password are all same (as mentioned above) 5) Updated master configuration file with ext_job_cache: mysql 6) Restart minion service and master service and then execute the command root@masterA:~# salt -t 60 '192.168.133.182' test.ping The command runs successfully but in the error log I see the below trace and nothing gets appended to database `2017-08-28 12:24:21,461 [salt.transport.zeromq][DEBUG ][40337] Initializing new AsyncZeroMQReqChannel for ('/etc/salt/pki/master', 'masterA_master', 'tcp://127.0.0.1:4506', 'clear') 2017-08-28 12:24:21,462 [salt.transport.ipc][DEBUG ][40337] Initializing new IPCClient for path: /var/run/salt/master/master_event_pub.ipc 2017-08-28 12:24:21,465 [salt.utils.event ][DEBUG ][38100] Sending event: tag = 20170828122421464763; data = {'_stamp': '2017-08-28T10:24:21.465020', 'minions': ['192.168.133.182']} 2017-08-28 12:24:21,466 [salt.utils.event ][DEBUG ][38100] Sending event: tag = salt/job/20170828122421464763/new; data = {'tgt_type': 'glob', 'jid': '20170828122421464763', 'tgt': '192.168.133.182', '_stamp': '2017-08-28T10:24:21.466152', 'user': 'sudo_varun', 'arg': [], 'fun': 'test.ping', 'minions': ['192.168.133.182']} 2017-08-28 12:24:21,467 [salt.returners ][INFO ][38100] Using default for mysql ssl_key 2017-08-28 12:24:21,467 [salt.returners ][INFO ][38100] Using default for mysql host 2017-08-28 12:24:21,467 [salt.returners ][INFO ][38100] Using default for mysql ssl_cert 2017-08-28 12:24:21,467 [salt.returners ][INFO ][38100] Using default for mysql user 2017-08-28 12:24:21,468 [salt.returners ][INFO ][38100] Using default for mysql pass 2017-08-28 12:24:21,468 [salt.returners ][INFO ][38100] Using default for mysql db 2017-08-28 12:24:21,468 [salt.returners ][INFO ][38100] Using default for mysql port 2017-08-28 12:24:21,468 [salt.returners ][INFO ][38100] Using default for mysql ssl_ca 2017-08-28 12:24:21,468 [salt.loaded.int.returner.mysql][DEBUG ][38100] Generating new MySQL connection pool 2017-08-28 12:24:21,469 [salt.master ][CRITICAL][38100] The specified returner threw a stack trace: Traceback (most recent call last): File ""/usr/lib/python2.7/dist-packages/salt/master.py"", line 2102, in _prep_pub self.mminion.returners[fstr](clear_load['jid'], clear_load, minions=minions) File ""/usr/lib/python2.7/dist-packages/salt/returners/mysql.py"", line 321, in save_load with _get_serv(commit=True) as cur: File ""/usr/lib/python2.7/contextlib.py"", line 17, in __enter__ return self.gen.next() File ""/usr/lib/python2.7/dist-packages/salt/returners/mysql.py"", line 258, in _get_serv raise salt.exceptions.SaltMasterError('MySQL returner could not connect to database: {exc}'.format(exc=exc)) SaltMasterError: MySQL returner could not connect to database: (2003, ""Can't connect to MySQL server on 'salt' (111)"") 2017-08-28 12:24:21,470 [salt.loaded.int.returner.local_cache][DEBUG ][38100] Adding minions for job 20170828122421464763: ['192.168.133.182'] 2017-08-28 12:24:21,471 [salt.master ][INFO ][38100] User sudo_varun Published command test.ping with jid 20170828122421464763 2017-08-28 12:24:21,471 [salt.master ][DEBUG ][38100] Published command details {'tgt_type': 'glob', 'jid': '20170828122421464763', 'tgt': '192.168.133.182', 'ret': 'mysql,local_cache,mysql', 'ret_kwargs': {'host': '192.168.133.181', 'user': 'root', 'pass': 'rootroot'}, 'user': 'sudo_varun', 'arg': [], 'fun': 'test.ping'} 2017-08-28 12:24:21,471 [salt.transport.zeromq][DEBUG ][38100] Signing data packet 2017-08-28 12:24:21,473 [salt.crypt ][DEBUG ][38100] salt.crypt._get_rsa_key: Loading private key 2017-08-28 12:24:21,473 [salt.crypt ][DEBUG ][38100] salt.crypt.sign_message: Signing message. 2017-08-28 12:24:21,483 [salt.utils.lazy ][DEBUG ][40337] LazyLoaded local_cache.get_load 2017-08-28 12:24:21,484 [salt.loaded.int.returner.local_cache][DEBUG ][40337] Reading minion list from /srv/share/master/jobs/89/0413fb0b5d38a11220a748fd4575e02d4f808cbfcaa2284e87ea984492f8f9/.minions.p 2017-08-28 12:24:21,485 [salt.client ][DEBUG ][40337] get_iter_returns for jid 20170828122421464763 sent to set(['192.168.133.182']) will timeout at 12:25:21.485129 2017-08-28 12:24:37,079 [salt.transport.mixins.auth][INFO ][38103] Authentication request from 192.168.133.182 2017-08-28 12:24:37,080 [salt.transport.mixins.auth][INFO ][38103] Authentication accepted from 192.168.133.182 2017-08-28 12:24:37,085 [salt.utils.event ][DEBUG ][38103] Sending event: tag = salt/auth; data = {'id': '192.168.133.182', '_stamp': '2017-08-28T10:24:37.085486', 'result': True, 'pub': '-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArM4NwYnGd6Y+2xPPeyP3\n4CZoA39fE1PwB2gd2dsUX08HYiaIF39iVlEy7GWHMRwjL10aACvwxzfHyd092RI3\nv/+TRIuomclazXVo8b9dIGqSLUdYMBGyvkfIhZ0X1Wwj/pp2B+blpf37rDLhd7BV\nTbo4O67rJGmRPWAWROPHtQhUHX7qBvh2Vo5upoh6eOHrxtiQVjHswhl1KR1kze87\nDsrq4AJDMzcoqlRabh/xkXWHsG+zW1d1KqanhTrijAuxN+AxLsKSuRBIIWvjWnG+\nscCsEyuN+44pnRVVHHJmSMl4dngzVG6lFyK71JL5TqwkRpXXYkUtImXtFWurV235\n+QIDAQAB\n-----END PUBLIC KEY-----', 'act': 'accept'} 2017-08-28 12:24:37,145 [salt.utils.lazy ][DEBUG ][38101] LazyLoaded local_cache.prep_jid 2017-08-28 12:24:37,145 [salt.utils.job ][INFO ][38101] Got return from 192.168.133.182 for job 20170828122421464763 2017-08-28 12:24:37,146 [salt.transport.ipc][DEBUG ][38101] Initializing new IPCClient for path: /var/run/salt/master/master_event_pull.ipc 2017-08-28 12:24:37,147 [salt.utils.event ][DEBUG ][38101] Sending event: tag = salt/job/20170828122421464763/ret/192.168.133.182; data = {'fun_args': [], 'jid': '20170828122421464763', 'return': True, 'retcode': 0, 'success': True, 'cmd': '_return', '_stamp': '2017-08-28T10:24:37.147090', 'fun': 'test.ping', 'id': '192.168.133.182'} 2017-08-28 12:24:37,147 [salt.client ][DEBUG ][40337] jid 20170828122421464763 return from 192.168.133.182 2017-08-28 12:24:37,147 [salt.client ][DEBUG ][40337] return event: {'192.168.133.182': {'jid': '20170828122421464763', 'retcode': 0, 'ret': True}} 2017-08-28 12:24:37,148 [salt.utils.lazy ][DEBUG ][40337] LazyLoaded nested.output 2017-08-28 12:24:37,249 [salt.client ][DEBUG ][40337] jid 20170828122421464763 found all minions set(['192.168.133.182']) 2017-08-28 12:25:02,421 [salt.config ][DEBUG ][38090] Reading configuration from /etc/salt/master 2017-08-28 12:25:02,497 [salt.config ][DEBUG ][38090] Guessing ID. The id can be explicitly set in /etc/salt/minion 2017-08-28 12:25:02,519 [salt.config ][DEBUG ][38090] Found minion id from generate_minion_id(): masterA 2017-08-28 12:25:02,522 [salt.config ][DEBUG ][38090] Reading configuration from /etc/salt/master 2017-08-28 12:25:02,845 [salt.utils.lazy ][DEBUG ][38090] LazyLoaded local_cache.clean_old_jobs 2017-08-28 12:25:02,845 [salt.fileserver ][DEBUG ][38090] Updating roots fileserver cache mysql> show tables; +----------------+ | Tables_in_salt | +----------------+ | jids | | salt_events | | salt_returns | +----------------+ mysql> select * from jids; Empty set (0.00 sec) mysql> select * from salt_returns; Empty set (0.00 sec) mysql> select * from salt_events; Empty set (0.00 sec)` ### Versions Report Salt Version: Salt: 2017.7.1 Dependency Versions: cffi: Not Installed cherrypy: 3.5.0 dateutil: 2.4.2 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.5 pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Nov 19 2016, 06:48:10) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.8.0-36-generic system: Linux version: Ubuntu 16.04 xenial",Can you confirm with the mysql cli client that you can connect to that database with the username/password and hostname from that minion?,"Hi, Thanks a lot for the reply. I tried what you asked for but that didn't work either. root@masterA:/srv/salt# salt -t 60 'salt' state.apply test_mysql salt: ---------- ID: get_data Function: mysql_query.run Name: test1 Result: False Comment: MySQL Error 2003: Can't connect to MySQL server on 'salt' (111) Started: 19:34:08.887517 Duration: 11.092 ms Changes: Summary for salt ------------ Succeeded: 0 Failed: 1 ------------ Total states run: 1 Total run time: 11.092 ms ERROR: Minions returned with non-zero exit code root@masterA:/srv/salt# cat test_mysql.sls get_data: mysql_query.run: - name: test1 - database: salt - query: ""SELECT * FROM jids;"" - output: ""/tmp/test.log"" - overwrite: True I have attached my configuration files as well. Could you please have a look at them? [master.txt](https://github.com/saltstack/salt/files/1257688/master.txt) [minion.txt](https://github.com/saltstack/salt/files/1257687/minion.txt)"
saltstack/salt,https://github.com/saltstack/salt/issues/43902,saltstack_salt_issues_43902,"Error while running powershell command using cmd.powershell module

### Description of Issue/Question SaltStack throws error when powershell command is executed using cmd.powershell module ### Setup 1 ubuntu master 3 windows-7 minions ### Steps to Reproduce Issue Create a state file as below: ",Can you verify what version you have installed?,Please find the requested information below: 
saltstack/salt,https://github.com/saltstack/salt/issues/45858,saltstack_salt_issues_45858,"Unable to download package from Nexus repository

### Description of Issue/Question Unable to download package from Nexus repository ### Setup Small stage environment with 1 master running salt-2017.7.2 and 4 windows minions ### Steps to Reproduce Issue - Write a state as below: ","Can you provide the whole `-l debug` output when you run this state with salt-call on the minion? Thanks, Daniel","Hi Daniel, Thanks for the reply. I was able to download the package using salt-call but from salt-master I still encounter failure. I have pasted the logs in pastezone, please find the link below: https://paste.debian.net/1009012/ (package doesn't exist) https://paste.debian.net/1009013/ (package is existing) BR, Varun On Mon, Feb 5, 2018 at 7:49 PM, Daniel Wallace <notifications@github.com> wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/49767,saltstack_salt_issues_49767,"version 2018.3.2 salt api An unexpected error occurred 

### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)  No salt-api logs. Please help, thanks.",Did you run the curl to login before the one to run the command?,"@garethgreenaway yes, I use below command to get the token then call the test.ping function. "
saltstack/salt,https://github.com/saltstack/salt/issues/41765,saltstack_salt_issues_41765,"Failed to apply configuration for the following parameters: network_mode

### Description of Issue/Question dockerng.running restarts my images every time (as expected) but fails giving this error: Failed to apply configuration for the following parameters: network_mode ### Setup ","Could you provide me with some steps to replicate this issue? Thanks, Daniel",My dockerfile is: 
saltstack/salt,https://github.com/saltstack/salt/issues/42233,saltstack_salt_issues_42233,"saltutil.refresh_grains not in doc.execution

[`doc.execution`](https://docs.saltstack.com/en/latest/ref/runners/all/salt.runners.doc.html#salt.runners.doc.execution) doesn't list [`saltutil.refresh_grains`](https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.saltutil.html#salt.modules.saltutil.refresh_grains).",Which version of salt are you seeing this on?,2016.11.5
saltstack/salt,https://github.com/saltstack/salt/issues/42467,saltstack_salt_issues_42467,"Zabbix modules requires same host

### Description of Issue/Question Looking at [`modules/zabbix.py`](https://github.com/saltstack/salt/blob/develop/salt/modules/zabbix.py#L45), it looks like it requires that the Salt Master be installed on the same machine as the Zabbix (backend) server. However, the rest of the module seems to only require API access (over HTTP). Is the `__virtual__()` wrong? Or is there something I'm missing?","Would you mind submitting a PR against the 2016.11 branch to fix this? Thanks, Daniel","I think it's because it's meant to run on the zabbix server minion, which is annoying because it's the minion you're trying to register that has all the information to do it properly."
saltstack/salt,https://github.com/saltstack/salt/issues/48302,saltstack_salt_issues_48302,"`LocalClient.cmd_iter()` sometimes omits minions

### Description of Issue/Question In one installation (2018.3 Py3), [my call to `state.highstate` via `LocalClient.cmd_iter`](https://gitlab.com/saltspiro/spirofs/blob/558908b7bbaa037aae951bebd368a5e342dca6e0/extmods/engines/spiro.py#L111) is concluding iteration before some minions return, even though they are online and being targeted via `tgt_type='list'`. If I attempt to highstate again (with eg, sshing into the minion and using `salt-call`), it says that it's currently running as PID xxxx. Adding `expect_minions=True` to the call causes `{'failed': True}` to be returned. This does not appear in my 2018.3 Py2 cluster. ### Setup Master and minion, where master is running my [SpiroFS engine and fileserver backend](https://gitlab.com/saltspiro/spirofs) ### Steps to Reproduce Issue 0. Set up master and minion with SpiroFS 1. Trigger highstate via SpiroFS engine 2. Watch results come back 3. Note the absence of minions that were targeted for highstate ### Versions Report  (Minion is currently downgraded due to issues with `pip_state`/`pip` and an infinite recursion bug.)","Can you upgrade to 2018.3.2 on your master? there was a bug that 2018.3.1 that could be causing this. https://github.com/saltstack/salt/issues/48130 Thanks, Daniel",This is blocked until 2018.3.2 is actually released.
saltstack/salt,https://github.com/saltstack/salt/issues/51440,saltstack_salt_issues_51440,"Document a blessed way to ship patched modules

### Description of Issue/Question The currently flow when a bug is found in a bundled module: 1. Track down bug, write fix 2. Submit PR, do PR things, PR is accepted 3. Wait for the next release (frequently long) 4. Update salt and enjoy your bug fix As an employee trying to Get Things Done, steps 1 and 2 are frequently not bad. But the wait for those fixes to be made available and usable is often quite long, and the work-arounds in the mean time are very annoying. There should a well-established method to ship patched modules, preferably in my salt states. (Instead of, like, having to repackage salt and ship patched packages.) ### Versions Report All versions affected.",Does anyone have thoughts on this?,"In my experience, using the file server to ship modules to override the built in ones is not consistent. Especially when saltenvs are mixed in."
saltstack/salt,https://github.com/saltstack/salt/issues/41863,saltstack_salt_issues_41863,"Instance Initiated Shutdown - Ec2

base_aws: provider: aws image: ami-e565ba8c size: Micro Instance script: python-bootstrap minion: cheese: edam Say this is my config in cloud.profiles. I want to instance_initiated_shutdown_behavior: terminate. Is this an acceptable parameter? does saltstack support it? I tried but its not working.",Can you clarify what you are trying to accomplish? Are you trying to ensure the VM terminates when running `salt-cloud -a stop <vm>` possibly?,"Yes I want my ec2 instance to terminate on shutdown, so then I can schedule shutdown on my instances at a particular time and they will terminate automatically. AWS gives an option to set it while launching a new EC2 so I was wondering if I can do it while launching an EC2 from saltstack"
saltstack/salt,https://github.com/saltstack/salt/issues/41896,saltstack_salt_issues_41896,"[RFC] Support for event schema

### Description of Issue/Question Our setup has gotten rather large with many people contributing to salt internally. As we add more beacons and reactors specifically and move to a more event driven architecture, we are noticing more number of bugs with developers making mistakes around what values are always present in the event and what are optional. This leads to edge cases throughout the codebase and a domino effect on the infrastructure. I'd like to suggest bringing in event schema and versioning for all events that go on the event bus. Any consumer will validate the schema and only then process the event and in case of invalid schema we could possibly raise another event with invalid data. Moreover we have started pouring our messages into our dataplatform to look at the health of the infrastructure and event processing similar to how we would do it for any front end system. More reading on why schema are useful: https://www.confluent.io/blog/schema-registry-kafka-stream-processing-yes-virginia-you-really-need-one/ I haven't yet hammered out the details on how this should be implemented but I'm thinking we could use jsonschema for all events and then inside each module, you can set a variable that signifies which schema you use, do validation and what to do if we get an event which doesn't match the schema. What does the salt team think about this ? My only argument against it is that it adds complexity in the system especially for smaller teams. We could get rid of this problem by making the schema optional.",Can I get @saltstack/team-core 's opinions here? Any thoughts ideas?,"I spent some time reading up the code and how schemas et al are used in salt. Here is a rough plan of what I'm thinking, please let me know if I'm going down the right path ( I apologize in advance for numerous questions ). I'd like to split this feature under multiple pull requests: - Add a new class for event schema placed in https://github.com/saltstack/salt/tree/develop/salt. I don't believe that event schema should be placed in utils. - Along with the class, we can have schema files for each ""event type"" (tag). The schema will be of type https://github.com/saltstack/salt/blob/develop/salt/utils/schema.py - A global dict of tag <-> schema class mapping - Update fire_event and get_event methods here https://github.com/saltstack/salt/blob/develop/salt/utils/event.py to support validating schema before sending and after receiving the message - The above will be split into two parts, part 1 will validate but will let invalid schema go through - Part 2 will validate and error out (this should be a flag in config for backward compatibility) - We should remove this flag in a version after so we enforce schema everywhere Some questions: - Do we have an easy way to get a list of all tags and events that salt sends internally ? Pending: - I haven't hatched out the detail of how to extend events similar to modules but I believe we can do the same as module to extend events and event dictionary. @cachedout @thatch45 @Ch3LL your views on the above ?"
saltstack/salt,https://github.com/saltstack/salt/issues/45252,saltstack_salt_issues_45252,"__salt__ dictionary in nested modules?

### Description of Issue/Question Currently __salt__ dict is only present in the top level module, is there a particular reason we don't load into nested modules ? Would you recommend reloading salt in nested modules to access __salt__ ?",What do you mean by `nested` modules?,Say if you have this structure:  __salt__ will be available in foo and bar but not in bar.baz module. I am assuming we inject __salt__ only in top level modules i.e. foo and bar. Does that help ?
saltstack/salt,https://github.com/saltstack/salt/issues/42297,saltstack_salt_issues_42297,"global name 'grains' is not defined

### Description of Issue/Question On a Solaris 10 (2016.11.1) minion, saltutil.sync_all is failing due to not being able to load grains defined in a grain file. When writing a grain, you can use public functions to create them (as explained in: https://docs.saltstack.com/en/latest/topics/grains/#writing-grains). I have one grain to create using one grain file (.py) file in salt://_grains/ on the master. It is written simply, similar to the instructional example; and receives ""NameError: global name 'grains' is not defined"" Using saltutil.sync_all works on a Windows XP minion (2016.3.4), and the created grain can be manipulated and is functional. ### Setup The file ""salt://_grains/custom_grains.py"" contains:  ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) **Salt-master: **CentOS 7 Salt Version: - Salt: 2016.11.0 Dependency Versions: - cffi: 0.8.6 - cherrypy: Not Installed - dateutil: 1.5 - gitdb: Not Installed - gitpython: Not Installed - ioflo: Not Installed - Jinja2: 2.8 - libgit2: Not Installed - libnacl: Not Installed - M2Crypto: Not Installed - Mako: 0.8.1 - msgpack-pure: Not Installed - msgpack-python: 0.4.6 - mysql-python: Not Installed - pycparser: 2.14 - pycrypto: 2.6.1 - pygit2: Not Installed - Python: 2.7.5 (default, <date redacted>) - python-gnupg: Not Installed - PyYAML: 3.11 - PyZMQ: 15.3.0 - RAET: Not Installed - smmap: Not Installed - timelib: Not Installed - Tornado: 4.2.1 - ZMQ: 4.1.4 System Versions: - dist: centos 7.2.1511 Core - machine: x86_64 - release: <number redacted> - system: Linux - version: CentOS Linux 7.2.1511 Core **Salt-minion:** Solaris 10 Salt Version: - Salt: 2016.11.1 Dependency Versions: - cffi: 1.9.1 - cherrypy: Not Installed - dateutil: 2.6.0 - gitdb: 0.6.4 - gitpython: 0.3.2 RC1 - ioflo: 1.6.6 - Jinja2: 2.8 - libgit2: Not Installed - libnacl: 1.5.0 - M2Crypto: 0.25.1 - Mako: 1.0.6 - msgpack-pure: Not Installed - msgpack-python: 0.4.8 - mysql-python: Not Installed - pycparser: 2.17 - pycrypto: 2.6.1 - pygit2: Not Installed - Python: 2.7.12 (default, <date redacted>) - python-gnupg: 2.0.2 - PyYAML: 3.12 - PyZMQ: 16.0.2 - RAET: 0.6.5 - smmap: 0.9.0 - timelib: Not Installed - Tornado: 4.4.2 - ZMQ: 4.0.7 System Versions: - dist: - machine: <string redacted> - release: <number redacted> - system: SunOS - version: Not Installed",Can you run custom grains on your smartos boxes?,"Works, thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/46985,saltstack_salt_issues_46985,"grafana4_user.present and grafana4_org.present states not working in 2018.3.0

### Description of Issue/Question I'm testing 2018.3.0 and have run into an issue with the grafana4 states - I'm getting: ",Do you have anything else like some tracebacks in your logs that might further help trouble shoot that?,"Hey @rallytime - yeah, it works okay in 2017.7, this (the ""changes={}"" thing) just cropped up in 2018.3.0 (the missing ""test=true"" issue is present for me in 2017.7). I didn't spot anything of interest in the debug logging when I was doing this - but I'll get a node up and see if I can get a cleaner test case for further debugging."
saltstack/salt,https://github.com/saltstack/salt/issues/47689,saltstack_salt_issues_47689,"Poor performance of pip.installed when given a list of packages

### Description of Issue/Question When using pip.installed to manage the presence of a list of packages, the performance is quite poor, with each package in the list adding ~1-2s to the runtime of the state. This is due to the re-execution of ""pip freeze"" for each package, which is an expensive operation. It could potentially be avoided by running ""pip freeze"" once and storing the output for re-use, refreshing it only as required. ### Setup Start from a CentOS7 system. Install pip and salt 2017.7. Note - the issue is also present in 2018.3 and dev.  ### Debug level logs [debug_before.txt](https://github.com/saltstack/salt/files/2010787/debug_before.txt) after applying the above change: [debug_after.txt](https://github.com/saltstack/salt/files/2010788/debug_after.txt)","Would you mind opening a PR to add this? Thanks, Daniel","Hi @gtmanfred - pull request in, against 2017.7. I have to admit, it's a quick fix that seems to work for me - I didn't review the whole pip_state.py logic to see if it was an ideal solution though!"
saltstack/salt,https://github.com/saltstack/salt/issues/44319,saltstack_salt_issues_44319,"unable to use asterisk(*) with external pillar.

### Description of Issue/Question I have configured external pillar[1]. As per example provided in [1], we can use asterisk(*) in stack.cfg. But, for me its not working. It fails with an error. `YAML: basedir=/srv/salt/external.pillar, path=minions/salt-master.novalocal/*.yml` [1] https://docs.saltstack.com/en/latest/ref/pillar/all/salt.pillar.stack.html ### Steps to Reproduce Issue - configure external pillar as per above link[1]. - cat /srv/salt/external.pillar/stack.cfg common.yml minions/{{ minion_id }}/*.yml <== - ls /srv/salt/external.pillar/minions/salt-master.novalocal/ 12345.yml <== - though ""12345.yml"" is present, if I try to fetch the pillar data, I dont see data populated from ""12345.yml"" file. - salt 'salt-master.novalocal' pillar.items <== - From debug logs: ` 2017-10-27 20:24:55,215 [salt.loaded.ext.pillar.stack][DEBUG ][18736] Config: /srv/salt/external.pillar/stack.cfg 2017-10-27 20:24:55,217 [salt.loaded.ext.pillar.stack][DEBUG ][18736] YAML: basedir=/srv/salt/external.pillar, path=common.yml 2017-10-27 20:24:55,236 [salt.loaded.ext.pillar.stack][DEBUG ][18736] YAML: basedir=/srv/salt/external.pillar, path=minions/salt-master.novalocal/*.yml 2017-10-27 20:24:55,236 [salt.loaded.ext.pillar.stack][INFO ][18736] Ignoring pillar stack template ""minions/salt-master.novalocal/*.yml"": can't find from root dir ""/srv/salt/external.pillar"" ` - Can anyone please help me to understand the cause? Is it documentation bug? - How I can include all ""*.yml"" files from ""minions/{{ minion_id }}/"" directory? ### Versions Report salt --versions-report Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: 1.11.1 cherrypy: unknown dateutil: 2.6.1 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.7 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Aug 4 2017, 00:39:18) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.4.1708 Core locale: UTF-8 machine: x86_64 release: 3.10.0-693.el7.x86_64 system: Linux version: CentOS Linux 7.4.1708 Core",Would you mind reporting this on the pillar stack contributors github page? https://docs.saltstack.com/en/latest/ref/pillar/all/salt.pillar.stack.html `Any issue should be reported to the upstream project at: https://github.com/bbinet/pillarstack/issues` @bbinet heads up. Thanks! Daniel,Thanks for reply @gtmanfred . I will raise an issue on the pillar stack github page[1] [1] https://github.com/bbinet/pillarstack/issues
saltstack/salt,https://github.com/saltstack/salt/issues/42033,saltstack_salt_issues_42033,"file.blockreplace, when using source file for content, the marker_start and marker_end lines keep duplicating

### Description of Issue/Question file.blockereplace problem: -marker_start and marker_end lines duplicate in output file (-name) each time the state is executed -the markers are not included in the source file ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info). install-zabbix.sls win_settings_install-zabbix_apply-configuration: file.blockreplace: - name: C:\Program Files\zabbix\zabbix_agentd.conf - marker_start: ""############ GENERAL PARAMETERS #################"" - marker_end: ""############ End of general parameters #########"" - source: salt://win/packages/zabbix-agent/zabbix_agentd.conf - backup: true ### Steps to Reproduce Issue install-zabbix state is run. Each time in the ""zabbix_agentd.conf"" file the marker lines duplicate: ############ GENERAL PARAMETERS ################# ############ GENERAL PARAMETERS ################# ############ GENERAL PARAMETERS ################# bla bla bla content omitted ############ End of general parameters ######### ############ End of general parameters ######### ############ End of general parameters ######### ### Versions Report Salt-Master version: salt-master 2016.11.5 (Carbon) Salt-Minion: 2016.11.3",Would you be able to provide a scrubbed version of your source file?,"Hey, I investigated our setup further and discovered the mistake was down to human error, so no bug :)"
saltstack/salt,https://github.com/saltstack/salt/issues/42280,saltstack_salt_issues_42280,"make ldap eauth 2 factor compatible

### Description of Issue/Question Our Authentication service utilizes 2 factor based tokens. Consequently you can only submit the users' password once. All subsequent auth requests using the same token will be rejected. A common solution for this setup with LDAP is to utilize a dedicated bind user for all authenticated bind requests. Assuming we have that, my expectation is that the binddn and bindpw specified in the config would override any user passwords sent for binding to LDAP(other than a 1 time auth user check). In the [_bind](https://github.com/saltstack/salt/blob/develop/salt/auth/ldap.py#L167) function: You can see the binddn and bindpw are used only to [search](https://github.com/saltstack/salt/blob/develop/salt/auth/ldap.py#L218) for the user's dn which is used to override the [binddn](https://github.com/saltstack/salt/blob/develop/salt/auth/ldap.py#L250) and [bindpw](https://github.com/saltstack/salt/blob/develop/salt/auth/ldap.py#L257) set in the config. According to the documentation, this is actually by [design](https://github.com/saltstack/salt/blob/develop/doc/topics/eauth/index.rst#authenticating-to-the-ldap-server). I'm not familiar enough with all the use cases that are being addressed in this code so I apologize for my confusion. Is there a reason not to do something like this instead: If not specified Salt authenticates to search for a user's Distinguished Name and group membership. The user it authenticates as in this phase is often a special LDAP system user with read-only access to the LDAP directory. After Salt searches the directory to determine the actual user's DN and groups, it re-authenticates as the user running the Salt commands.",Did I get this right?,"Yup essentially. Also all subsequent LDAP connections(for that job) should use the bind credentials(if specified). I noticed that if a minion is taking too long, the authentication will get re-attempted via a [time_auth](https://github.com/saltstack/salt/blob/develop/salt/auth/__init__.py#L101) function. I added a check here for the existence of the show_jid key in the payload :https://github.com/saltstack/salt/pull/42426/files#diff-8aa8a7beb3814d772c1830930f3927a9R393 This only gets passed through the initial payload for the job so I am keying off that to determine whether it's the first auth attempt or a later one."
saltstack/salt,https://github.com/saltstack/salt/issues/43668,saltstack_salt_issues_43668,"salt-runner: RuntimeError: maximum recursion depth exceeded

### Description of Issue/Question When trying to use ""parallel: True"" with salt.runner and salt.state, I get a ""RuntimeError: maximum recursion depth exceeded"" error. ### Setup orch.sls:  ### Versions Report master: Salt Version: Salt: 2017.7.1 Dependency Versions: cffi: 1.7.0 cherrypy: Not Installed dateutil: 2.6.1 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.9.5 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.7 mysql-python: Not Installed pycparser: 2.10 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (default, Aug 25 2017, 23:46:22) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 16.0.2 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.1 ZMQ: 4.2.2 System Versions: dist: locale: UTF-8 machine: amd64 release: 11.1-RELEASE system: FreeBSD version: Not Installed minion: Salt Version: Salt: 2017.7.1 Dependency Versions: cffi: 1.7.0 cherrypy: Not Installed dateutil: 2.6.1 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.9.5 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.7 mysql-python: Not Installed pycparser: 2.10 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (default, Aug 15 2017, 01:13:59) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 16.0.2 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.2 ZMQ: 4.2.2 System Versions: dist: locale: US-ASCII machine: amd64 release: 11.1-RELEASE system: FreeBSD version: Not Installed","Does this happen if you remove the required? Thanks, Daniel","I thought it gives me a different exception when I remove the ""require"", but it seems there is an additional one that I didn't notice before. The original exception posted above doesn't happen though. Here is the missed exception: "
saltstack/salt,https://github.com/saltstack/salt/issues/43883,saltstack_salt_issues_43883,"Manually triggering onfail

### Description of Issue/Question I want to test a state monitoring a service running and using onfail to stop another service if bringing the first one up fails. Something along the lines of: start_main_service: service.running: - name: mainservice stop_secondary_service: service.stopped: - name: secservice - onfail: - service: start_main_service How do I manually trigger the onfail event? I need to test the state file before putting it in production.",Does that resolve your question?,Using test.fail_without_changes worked like a charm for me! Thank you! :)
saltstack/salt,https://github.com/saltstack/salt/issues/43953,saltstack_salt_issues_43953,"Pagerduty.create_event fires on master but not on minion

### Description of Issue/Question When I make a call of create_event from the pagerduty module on the minion it fails. But from the master it works. A paging call is received by the recipient. Both master minion have internet access ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) I have pageduty configuration in both master and minion config files and have restarted both after the change. # PagerDuty configuration pro-pagerduty-config: pagerduty.subdomain: cloudstack pagerduty.api_key: <api_key> We have a pagerduty account on cloudstack.pagerduty.com ### Steps to Reproduce Issue Master: [root@cloud-salt02 mpa]# salt-call pagerduty.create_event <service-key> ""Test"" ""From Saltstack"" profile=pro-pagerduty-config local: ---------- incident_key: d0df3e75c0d74b1b99ddf04ad97c8dff message: Event processed status: success Minion: [root@cloud-salt02 mpa]# salt '*mpa*' pagerduty.create_event <service-key> ""Test"" ""From Saltstack"" profile=pro-pagerduty-config test-mpa01.cloudstack.dk: The minion function caused an exception: Traceback (most recent call last): File ""/usr/lib/python2.7/site-packages/salt/minion.py"", line 1468, in _thread_return return_data = executor.execute() File ""/usr/lib/python2.7/site-packages/salt/executors/direct_call.py"", line 28, in execute return self.func(*self.args, **self.kwargs) File ""/usr/lib/python2.7/site-packages/salt/modules/pagerduty.py"", line 195, in create_event opts=__opts__ File ""/usr/lib/python2.7/site-packages/salt/utils/pagerduty.py"", line 57, in query creds['pagerduty.subdomain'] KeyError: 'pagerduty.subdomain' [root@cloud-salt02 mpa]# ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) [root@cloud-salt02 mpa]# salt --versions-report Salt Version: Salt: 2017.7.1 Dependency Versions: cffi: Not Installed cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: 2.0.2 gitpython: 2.1.5 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: 3.4.3 pygit2: Not Installed Python: 2.7.5 (default, Nov 6 2016, 00:28:07) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: 2.0.3 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.3.1611 Core locale: UTF-8 machine: x86_64 release: 3.10.0-514.21.2.el7.x86_64 system: Linux version: CentOS Linux 7.3.1611 Core",where do you have the config `pagerduty.subdomain` at? Minion or Master config?,"Both Sendt fra min iPhone Den 6. okt. 2017 kl. 23.03 skrev Megan Wilhite <notifications@github.com<mailto:notifications@github.com>>: where do you have the config pagerduty.subdomain at? Minion or Master config? — You are receiving this because you authored the thread. Reply to this email directly, view it on GitHub<https://github.com/saltstack/salt/issues/43953#issuecomment-334869456>, or mute the thread<https://github.com/notifications/unsubscribe-auth/Ac4yk3onKpWawGqI0EpYgiZGAMj3FnX8ks5sppWSgaJpZM4Pwdv8>."
saltstack/salt,https://github.com/saltstack/salt/issues/42440,saltstack_salt_issues_42440,"OrderedDict pillar data on master becomes unordered dict data on minion - have cause and solution

## Description of Issue/Question Pillar data is ordered on master, but becomes unordered on minion. This is seen by users when Jinja templates render dictionary based data out of the expected order on minions. This was present in 2016.11.5 and is present in 2017.07.0 This example uses a modified version of formula-salt by blunix [https://github.com/blunix/formula-ssh](https://github.com/blunix/formula-ssh) ## Setup ### /srv/salt/top.sls:  ## Versions Report [root@salttest srv]# salt --versions-report Salt Version: Salt: 2017.7.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: 3.4.3 pygit2: Not Installed Python: 2.7.5 (default, Nov 6 2016, 00:28:07) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.3.1611 Core locale: UTF-8 machine: x86_64 release: 3.10.0-514.16.1.el7.x86_64 system: Linux version: CentOS Linux 7.3.1611 Core",do you think the fix is the right way to handle this?,"I realized that I had seen something similar earlier this week. Issue #17284 had a commit proposed that is extremely similar to my posted patch, then was reverted in issue #18206. The committed code at the time was failing the test suite. I will try to spin up a test environment, but I'm really short on time right now. To clarify why the order is a problem, when specifying the port and IP address configuration to sshd_config, sshd requires that the Port statement comes before the address statements. Yes, the template can be modified with dictsort|reverse for this specific problem, but I feel that being able to manage an arbitrary data order is reasonable and helpful. Having the order of the pillar data reflected in rendered data helps visually verify correctness and in the case where a human must read through the file manually can save a man's sanity. I can confirm that distributing this change in my salt environment has resolved my ordering issue with formula-ssh and for [samba-formula](https://github.com/saltstack-formulas/samba-formula) for RHEL and CentOS 6 & 7. For the dev team, I did try to create an ExtType hook for OrderedDict, but the logic in msgpack-python detects the object as a dict before running the default object evaluation code unless we call loads with strict_types=True. I don't know what that would break."
saltstack/salt,https://github.com/saltstack/salt/issues/51125,saltstack_salt_issues_51125,"postgres_extension.present is not available

### Description of Issue `postgres_extension.present` state fails with error: ",Can you verify you have that binary?,"@Ch3LL Yes, `psql` binary is present on target machine:  Target OS is Arch Linux and I'm using salt-ssh."
saltstack/salt,https://github.com/saltstack/salt/issues/51356,saltstack_salt_issues_51356,"gpg decryption fails with large number of SSH connections

### Description of Issue/Question When I'm applying states using salt-ssh with a big enough roster (53 machines in my case), and default `max_procs` (25), I usually get several `Failed to return clean data` errors in the beginning of the execution. Recently I started to put encrypted data in pillar, and now I get gpg decryption errors: ",Does this occur if you use a simple cmd.run state? Or only when you run multiple states in a state run? Any other information to help replicate?,`ssh_exchange_identification: Connection closed by remote host` error occurs even with `test.ping` if I set `max_procs` to 15-16 or more. `decryption failed` error starts to occur at approximately the same number of processes (17-18). Single `cmd.run` state is enough to cause error: `salt-ssh '*' state.single cmd.run name='echo 1'` Another observation is that decryption error occurs only when there is enough encrypted items in the pillar (6-7 items or more).
saltstack/salt,https://github.com/saltstack/salt/issues/46361,saltstack_salt_issues_46361,"users - These values could not be changed: {'gid': 'oracle', 'uid': 501}

### Description of Issue/Question I have trouble with `user.present` and `group.present`. I want to ensure user/group is present, and create either locally if missing, but salt throws ERRORS. Issue affects group and user handling.  ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) Refer to https://github.com/saltstack-formulas/users-formula and pillar data above. ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) You need to setup minion so targeted **user** exists in remote name directory service. I added minion to the AD domain (see `kerberos-formula` and `samba-ad-formula` README), for centralized user managment. ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minionversions.) 2017.07",can you also share the group.present state you are using?,I have added group.present state. thx
saltstack/salt,https://github.com/saltstack/salt/issues/51910,saltstack_salt_issues_51910,"YAML.org recommends `.yaml` extension for pillar data

### Description of Issue/Question By convention YAML markup files should use `.yaml` extension but salt refuses to read YAML file saved with this extension. This is non-intuitive, a barrier to adopting salt, and does not follow recommendation from [https://yaml.org/faq.html](https://yaml.org/faq.html) Please allow `.yaml` extension for pillar data. ### Setup salt error for pillar data in saved as `/srv/pillar/template.yaml`  **Salt enforces `.sls` extension for files in YAML format.** 1. [L82](https://github.com/saltstack/salt/blob/b44f0f1d0fd564690c6e45c6dd061c0e84d76def/salt/spm/pkgfiles/local.py#L82) 1. [L120](https://github.com/saltstack/salt/blob/b44f0f1d0fd564690c6e45c6dd061c0e84d76def/salt/spm/pkgfiles/local.py#L120) 1. [L148](https://github.com/saltstack/salt/blob/b44f0f1d0fd564690c6e45c6dd061c0e84d76def/salt/spm/pkgfiles/local.py#L148) Here's the code in [`salt/pillar/__init__.py`](https://github.com/saltstack/salt/blob/61baab97de511aab9273446062430f02623f5d2d/salt/pillar/__init__.py#L707-L725), which calls [`salt/fileclient.py`](https://github.com/saltstack/salt/blob/138c9321d43aa1aa3950df8509f3d47aa24fe244/salt/fileclient.py#L361-L374). ### Steps to Reproduce Issue ### Versions Report All versions",What am I missing here?,"This issue is to request support for files with extension `.yaml` because its a data exchange format. People and projects can release software with bunch of yamls and people can use salt, ansible, or programmatic stuff to consume those files - they can add jinja2 and gpg secrets too."
saltstack/salt,https://github.com/saltstack/salt/issues/46680,saltstack_salt_issues_46680,"network.managed crashes on Windows, also ignores netmask sometimes

### Description of Issue/Question There are two problems with `network.managed` on Windows. 1. `network.managed` crashes because of `ipaddress.ip_address(ip_string.decode())` 2. `network.managed` ignores the mask when the IP is specified in quotation marks, like `- '192.168.0.3/19'` and uses `/24` instead ### Setup 1) ",Can you verify?,"Tested using 2017.7.4 First applying  Network is configured correctly, no exceptions thrown."
saltstack/salt,https://github.com/saltstack/salt/issues/49220,saltstack_salt_issues_49220,"Unable to running the salt minion on windows as an unprivileged user

I want to start salt as an unprivileged user after change the owner of c:\salt, can't start salt-minion C:\salt>salt-minion.bat CRITICAL: Unable to securely set the owner of ""c:\salt"". salt version:2018.3.2 system version:win 10",Could you please provide some examples of use which do not require Admin access?,@damon-atkins for example: start firefox installed by an unprivileged user.
saltstack/salt,https://github.com/saltstack/salt/issues/43452,saltstack_salt_issues_43452,"Couchbase returner `get_load` throws `KeyError`

### Description of Issue/Question When `couchbase.get_load` is called after `couchbase.prep_jid` but before `couchbase.save_load` then a `KeyError` is thrown in the following line https://github.com/saltstack/salt/blob/develop/salt/returners/couchbase_return.py#L219 This is because `prep_jid` will write a document `{nocache: False}` with key `JID` but `load` will not be in the doc yet as save_load has not been called. This order of execution ( prep_jid > get_load > save_load) is seen in `utils.job.store_job` https://github.com/saltstack/salt/blob/b4ca024e44353bb9b5cc5e73d7de6db27a85ed80/salt/utils/job.py#L55-L57 https://github.com/saltstack/salt/blob/b4ca024e44353bb9b5cc5e73d7de6db27a85ed80/salt/utils/job.py#L104-L105 ### Setup `master_job_cache: couchbase` in master configs ### Steps to Reproduce Issue 1) Fix the following lines and replace `'get_load'` with `getfstr` https://github.com/saltstack/salt/blob/b4ca024e44353bb9b5cc5e73d7de6db27a85ed80/salt/utils/job.py#L103 This is so that `get_load` gets called while trying to `save_load` (Issue #43453) 2) Fire a runner `test.stdout_print` 3) Lookup the return for the runner just fired. `salt-run jobs.lookup_jid <runner_jid>` Observe `KeyError` ### Versions Report Salt 2016.11.07",Does the PR on your other reported issue also address this issue?,@garethgreenaway No that PR does not address this issue. I was waiting for a confirmation on the issue since the PR will require some refactoring of the couchbase returner. I will open a PR for this soon.
saltstack/salt,https://github.com/saltstack/salt/issues/42676,saltstack_salt_issues_42676,"Changes in Pillar defined Beacons only apply after Minion restart

### Description of Issue/Question I tried to get familiar with Beacons and Reactors. The documentation suggested that pillars are a good place to define my Beacons. This works, but if I do a change in the defined Beacon on the Master in the pillar files, say add rename a watched file or change the interval parameter, I just cant get the already defined beacon on the Minion to update. ### Setup 1 Master and 1 Minion both running 2017.7.0 on Minimal Ubuntu 16.04 installs ### Steps to Reproduce Issue **Master /srv/pillar/top.sls** ",Can you provide the output of `salt minion1 pillar.get beacons`?,"I recreated the example and ran saltutil.refresh_pillar and saltutil.refresh_beacons which both returned true, before running the command below. Heres the output of the command u asked: "
saltstack/salt,https://github.com/saltstack/salt/issues/42686,saltstack_salt_issues_42686,"Unable to set multiple RabbitMQ tags

### Description of Issue/Question When I try to set mutliple tags to a RabbitMQ user, either via state or via CLI, it sets only one tag that is the join of all the tags I want to set. What we actually want is to set multiple tags. ### Setup - AMQP 3.6.10 - salt 2017.7.0 (Nitrogen) - Ubuntu 16.04 ### Steps to Reproduce Issue `salt 'mymqnode' rabbitmq.set_user_tags 'my_user' tags='[""tag1"", ""tag2""]'` This sets tag `tag1 tag2` to `my_user`, but not the tag `tag1` and the tag `tag2`. Also reproductible via states. ### Versions Report ",Would you please move it to point to the 2016.11 branch? It is the current release branch for bugfixes to be merged forward from. https://docs.saltstack.com/en/latest/topics/development/contributing.html#the-current-release-branch Thanks Daniel,@gtmanfred Thanks. Should be good with #42693 .
saltstack/salt,https://github.com/saltstack/salt/issues/46037,saltstack_salt_issues_46037,"marathon_app.config failing after upgrade of marathon from 1.4 to 1.5

### Description of Issue/Question ### Setup ### Steps to Reproduce Issue Using the same sls files as before I know get the following error ---------- ID: datadog-agent-public Function: marathon_app.config Result: False Comment: Failed to update app config for datadog-agent-public: {'message': 'No JSON object could be decoded'} Started: 18:27:52.662164 Duration: 80.19 ms ### Versions Report # salt --versions-report Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.6.1 docker-py: 1.10.6 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 1.2.5 pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Aug 4 2017, 00:39:18) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.4.1708 Core locale: UTF-8 machine: x86_64 release: 3.10.0-693.11.6.el7.x86_64 system: Linux version: CentOS Linux 7.4.1708 Core",Can you provide the sls file that you are using so that this can be replicated?,Okay. Here's a simple sls file to replicate:- 
saltstack/salt,https://github.com/saltstack/salt/issues/42731,saltstack_salt_issues_42731,"http.query template_data render exception

## Description I'm having an issue using the template_data portion of http.query. I had experienced this problem with an older 2016.11 version and gave up. I'm now trying it again with 2016.11.6 and it still seems to exist. I'm not sure if I'm doing something wrong here since I'm unable to find detailed examples of its usage. My repo steps below are a slim version of the real thing that I'm trying to accomplish. However I think it's enough to see what I'm trying to do. I've also tried providing different data_renderer options with no luck. **test.http-template.sls** ",Can you try `template_dict` instead of `template_data`?,Cool thanks! I should have mentioned that I did try template_dict at one point and that it also had an error.
saltstack/salt,https://github.com/saltstack/salt/issues/42733,saltstack_salt_issues_42733,"salt-syndic - Unit salt-syndic.service failed to load: No such file or directory.

## salt-syndic service failed to start ### Setup I installed salt master, salt minion and then a salt master+minion (syndic node)following the documentation provided. https://docs.saltstack.com/en/latest/topics/topology/syndic.html On Syndic - salt master, minion services are up On Master (MoM) - salt maser is up MoM is able to accept the key on Syndic node. ### Steps to Reproduce Issue While trying to start the syndic using --- service salt-syndic start gives Failed to restart salt-syndic.service: Unit salt-syndic.service failed to load: No such file or directory. ### Versions Report salt version on the syndic -- Salt Version: Salt Version: Salt: 2017.7.0 Dependency Versions: cffi: Not Installed cherrypy: 3.5.0 dateutil: 2.2 docker-py: Not Installed gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.3 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.2 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.9 (default, Sep 17 2016, 20:26:04) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.4.0 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: debian 8.0 locale: UTF-8 machine: armv6l release: 4.9.35+ system: Linux version: debian 8.0 salt version on the master -- Salt Version: Salt: 2017.7.0-386-gf012289 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Nov 19 2016, 06:48:10) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-1020-aws system: Linux version: Ubuntu 16.04 xenial",do you have the salt-syndic package installed on the syndic?,no I did not install salt-syndic package. Where can I find it? I just followed the instructions as given in the documentation page.
saltstack/salt,https://github.com/saltstack/salt/issues/42734,saltstack_salt_issues_42734,"Reactor jobs are run in reverse order

### Description of Issue/Question Compared to the order in the master config (and 2016.11.6), reactor states are run in the opposite order as they are listed. ### Setup My master.cfg contains (among other things):  I'm using 2017.7.0 on the minions too. The minions run ubuntu 14.04, though.",How are you verifying that they are running out of order? Logs? ANy other information to help repicate this issue,"@Ch3LL I'm looking at the job IDs in the minion's log: `sudo grep -oE '201708[0-9]+' /var/log/upstart/salt-minion.log | sort | uniq` Then using the IDs with job.print_job to see what was being executed. I'm assuming the the job IDs are date strings and when sorted follow the order of execution. This is reinforced as some of my states rely on custom grains that are synced via the sync_all call, and the errors in the print_job output of the highstate jobs show these grains missing. With log level ""info"" here's what the master logs when a minion connects:  This matches the (incorrect) order of the master's log. @nomeelnoj I really appreciate that example, that's probably the correct way to do this and I'll be using that. Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/43110,saltstack_salt_issues_43110,"bug in iis_module - create_cert_binding

### Description of Issue/Question - Create cert binding fails for windows 2008 - Fix is ready, but validation fails due to list_sites bug #43109 ### Setup https-cert-binding: win_iis.create_cert_binding: - name: cert_hash - site: default web site - ipaddress: * - port: 443 ### Steps to Reproduce Issue ID: https-cert-binding Function: win_iis.create_cert_binding Name: hash Result: False Comment: An exception occurred in this state: Traceback (most recent call last): File ""c:\salt\bin\lib\site-packages\salt\state.py"", line 1837, in call **cdata['kwargs']) File ""c:\salt\bin\lib\site-packages\salt\loader.py"", line 1794, in wrapper return f(*args, **kwargs) File ""c:\salt\var\cache\salt\minion\extmods\states\win_iisV2.py"", line 326, in create_cert_binding ipaddress, port, sslflags) File ""c:\salt\var\cache\salt\minion\extmods\modules\win_iisV2.py"", line 855, in create_cert_binding raise CommandExecutionError(msg) salt.exceptions.CommandExecutionError: Unable to create certificate binding: <hash> Error: New-Item : Invalid SSL binding name, please use format 'IPAddress!port'. At line:1 char:34 + ... nistration; New-Item -Path 'IIS:\SslBindings\ip!443!' -Thum ... + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : InvalidArgument: (:) [New-Item], ArgumentExcepti on + FullyQualifiedErrorId : Invalid SSL binding name, please use format **'IPA ddress!port'**.,Microsoft.PowerShell.Commands.NewItemCommand ### Versions Report Salt Version: Salt: 2017.7.1 Dependency Versions: cffi: Not Installed cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: 3.4.3 pygit2: Not Installed Python: 2.7.5 (default, Nov 6 2016, 00:28:07) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.3.1611 Core locale: UTF-8 machine: x86_64 release: 3.10.0-514.26.2.el7.x86_64 system: Linux version: CentOS Linux 7.3.1611 Core",Would you mind submitting this patch as a PR? https://github.com/Mapel88/salt/commit/ec20e9a19a2cf08c7d005a5ca1fe8d7c380a0c99 Thanks Daniel,"Already commited the fix and the certificate assignment works, but it will return ""failed"" until the other bug is fixed. Thanks"
saltstack/salt,https://github.com/saltstack/salt/issues/43931,saltstack_salt_issues_43931,"KeyError: 'state.check_result' when salt installed from github codebase

### Description of Issue/Question While running any scheduler, we get below error when salt is installed from github (tried develop and 2017.7.1). But it works when we installed salt from PyPI.  ### Steps to Reproduce Issue install salt from github. ### Versions Report salt 2017.7.0-16-gab1b099 (Nitrogen)","Can you please provide the full --versions-report? And also can you provide the command you are installing with? Thanks, Daniel","@gtmanfred find the required details  Do not, we tested this on different Linux systems."
saltstack/salt,https://github.com/saltstack/salt/issues/47469,saltstack_salt_issues_47469,"salt-proxy starts multiple process

### Description of Issue/Question when we start a proxy with say below command, 2 process gets started. Leading is issues when we try running commands (which should be executed once only) ### Setup ",Can you describe the issues that you're seeing that you suspect is caused by multiple proxy minions running per device?,@garethgreenaway @gtmanfred I start getting multiple outputs when I execute command per proxy. for example:  Let me know if you want further log for debugging.
saltstack/salt,https://github.com/saltstack/salt/issues/49893,saltstack_salt_issues_49893,"Data failed to compile

### Description of Issue/Question Unable to exceute state with saltenv=dev and for a windows minion getting an error as data failed to compile. `salt '*' state.apply saltenv=dev` ### Setup Below are the relevant config & SLS files `# cat /etc/salt/master | grep -v '#' | grep -v ""^$""` ","What does your pillar top file look like? Thanks, Daniel","@gtmanfred thanks for the reply. I'm not using any pillar data and there is no top file in `/srv/pillar` directory, its empty"
saltstack/salt,https://github.com/saltstack/salt/issues/49965,saltstack_salt_issues_49965,"Beacon: Usage in windows

### Description of Issue/Question Need help to setup Beacon in windows minion ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report `salt --versions-report` salt --versions-report Salt Version: Salt: 2018.3.2 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.28.2 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Jul 13 2018, 13:06:57) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.5.1804 Core locale: UTF-8 machine: x86_64 release: 3.10.0-862.11.6.el7.x86_64 system: Linux version: CentOS Linux 7.5.1804 Core",can you further elaborate what you need help with? Have you tried setting it up and its not working? If so can you include your conifgurations and errors,@Ch3LL Thanks for the reply. Below are my config files. `# cat /srv/pillar/top.sls`  What does the `interval` signify in beacon module is it in `seconds/minutes`. If we modify beacon file do we need to restart the minion service ?
saltstack/salt,https://github.com/saltstack/salt/issues/50246,saltstack_salt_issues_50246,"external_auth: Authentication error occurred when using ldap and active directory

### Description of Issue/Question Authentication error while using ldap and active directory for external authentication ### Setup `cat /etc/salt/master | grep -v ""#"" | grep -v ""^$""` ",did this occur after an upgrade? and if so what was the previous version?,Error occurred with previous version also. Previous version was 2018.3.2
saltstack/salt,https://github.com/saltstack/salt/issues/51542,saltstack_salt_issues_51542,"error rendering encrypted pillar data using gpg

### Description of Issue/Question Error while rendering encrypted data using GPG ### Setup Below is the encrypted data in pillar file. ",Do you have other **working** gpg pillars?,@dwoz thanks for the reply. This is the first time I'm trying to setup gpg rendering. Can you let me know what the setup should look like ? i have setup gpg using the below command. `gpg --gen-key` since I'm not able to setup using below procedure. 
saltstack/salt,https://github.com/saltstack/salt/issues/48768,saltstack_salt_issues_48768,"firewall.rule_exists fails on Windows with German/Umlaut output

### Description of Issue/Question It looks like the `firewall.rule_exists` module fails on Windows with languages that contain umlauts. ### Setup ",Can you provide me a version report from both the master and the minion please?,"It looks like the state itself is returning `True` after all. I cannot reproduce the exact issue I had a few days ago. I guess the error happens during the rendering of the yaml template, that's why the state itself is working. I get the `ERROR` and `ret code 1` entries in the log though. This is the output on the first run, the firewall rule does not yet exist (`Failed to decode stdout from command`):  The example from the initial issue comment therefore works, but it still looks like there is a problem with parsing umlauts under the hood. I am using salt without a master by calling `salt-call --local state.apply`. I cannot provide you with any more version information as in my first comment. If you feel like this error output above is not an actual bug feel free to close the issue."
saltstack/salt,https://github.com/saltstack/salt/issues/43220,saltstack_salt_issues_43220,"docker_container failing on fresh install of salt minion

### Description of Issue/Question Upon a fresh install on a salt minion, I get the following error: Comment: Failed to get client args: docker Python module not imported when trying to use docker_container.running for an image. I think I have done all the necessary steps to get the docker requirements set up. If I just run the state again, it works fine. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) Here is my td.sls file, which I apply like this: salt testmachine state.apply td td.sls:  ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) This is salt-minion --versions-report after the failure. This is on Ubuntu 16.04.3 LTS. Salt Version: Salt: 2017.7.1 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.4.2 docker-py: 2.5.1 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Nov 19 2016, 06:48:10) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-87-generic system: Linux version: Ubuntu 16.04 xenial",Can you try just patching the PR to see if this resolves the issue so we can close?,"Okay, I added the very minor change in the PR and all seems good."
saltstack/salt,https://github.com/saltstack/salt/issues/43234,saltstack_salt_issues_43234,"Exception: global name 'requests' is not defined

I'm trying to download a file from a S3 bucket using file.manage and a IAM role to grant the access to S3. When i run the recipe, i get this error: ip-10-97-24-39: ---------- ID: download Function: file.managed Name: /tmp/temp.tar.gz Result: False Comment: Failed to cache s3://bucket/folder/file.tgz: Could not fetch from s3://bucket/folder/file.tgz. Exception: global name 'requests' is not defined Started: 23:18:29.397126 Duration: 16.654 ms Changes: Summary for ip-10-97-24-39 ------------ Succeeded: 0 Failed: 1 ------------ Total states run: 1 Total run time: 16.654 ms ### Setup file_roots/deploy/web.sls file: conf_files: file.managed: - name: /tmp/temp.tar.gz - user: root - group: root - mode: 644 - source: s3://bucket/folder/file.tgz - replace: True - skip_verify: True file_roots/top.sls base: 'G@roles:web': - match: compound - deploy.web pillar_roots/top.sls base: '*': - users 'G@roles:web': - match: compound - deploy.web pillar_roots/deploy/web.sls deploy: web: - app_name: web ### Steps to Reproduce Issue salt -l debug -v -C 'G@roles:web' state.sls deploy.web Minion log [DEBUG ] compound_match: ip-10-97-24-39 ? G@roles:web [DEBUG ] grains target: roles:web [DEBUG ] Attempting to match 'web' in 'roles' using delimiter ':' [DEBUG ] compound_match ip-10-97-24-39 ? ""G@roles:web"" => ""True"" [INFO ] User sudo_sysadmin Executing command state.sls with jid 20170828233314458697 [DEBUG ] Command details {'tgt_type': 'compound', 'jid': '20170828233314458697', 'tgt': 'G@roles:web', 'ret': '', 'user': 'sudo_sysadmin', 'arg': ['deploy.web'], 'fun': 'state.sls'} [INFO ] Starting a new job with PID 7094 [DEBUG ] LazyLoaded state.sls [DEBUG ] LazyLoaded direct_call.get [DEBUG ] LazyLoaded saltutil.is_running [DEBUG ] LazyLoaded grains.get [DEBUG ] Initializing new AsyncZeroMQReqChannel for ('/etc/salt/pki/minion', 'ip-10-97-24-39', 'tcp://10.97.23.60:4506', 'aes') [DEBUG ] Initializing new AsyncAuth for ('/etc/salt/pki/minion', 'ip-10-97-24-39', 'tcp://10.97.23.60:4506') [DEBUG ] Determining pillar cache [DEBUG ] Initializing new AsyncZeroMQReqChannel for ('/etc/salt/pki/minion', 'ip-10-97-24-39', 'tcp://10.97.23.60:4506', 'aes') [DEBUG ] Initializing new AsyncAuth for ('/etc/salt/pki/minion', 'ip-10-97-24-39', 'tcp://10.97.23.60:4506') [DEBUG ] Loaded minion key: /etc/salt/pki/minion/minion.pem [INFO ] Loading fresh modules for state activity [DEBUG ] LazyLoaded jinja.render [DEBUG ] LazyLoaded yaml.render [DEBUG ] In saltenv 'base', looking at rel_path 'deploy/web.sls' to resolve 'salt://deploy/web.sls' [DEBUG ] In saltenv 'base', ** considering ** path '/var/cache/salt/minion/files/base/deploy/web.sls' to resolve 'salt://deploy/web.sls' [DEBUG ] compile template: /var/cache/salt/minion/files/base/deploy/web.sls [DEBUG ] Jinja search path: ['/var/cache/salt/minion/files/base'] [PROFILE ] Time (in seconds) to render '/var/cache/salt/minion/files/base/deploy/web.sls' using 'jinja' renderer: 0.00440192222595 [DEBUG ] Rendered data from file: /var/cache/salt/minion/files/base/deploy/web.sls: download: file.managed: - name: /tmp/temp.tar.gz - user: root - group: root - mode: 644 - source: s3://bucket/folder/file.tgz - replace: True - skip_verify: True [DEBUG ] LazyLoaded config.get [DEBUG ] Results of YAML rendering: OrderedDict([('download', OrderedDict([('file.managed', [OrderedDict([('name', '/tmp/temp.tar.gz')]), OrderedDict([('user', 'root')]), OrderedDict([('group', 'root')]), OrderedDict([('mode', 644)]), OrderedDict([('source', 's3://bucket/folder/file.tgz')]), OrderedDict([('replace', True)]), OrderedDict([('skip_verify', True)])])]))]) [PROFILE ] Time (in seconds) to render '/var/cache/salt/minion/files/base/deploy/web.sls' using 'yaml' renderer: 0.0039529800415 [DEBUG ] LazyLoaded file.managed [INFO ] Running state [/tmp/temp.tar.gz] at time 23:32:33.532155 [INFO ] Executing state file.managed for [/tmp/temp.tar.gz] [DEBUG ] LazyLoaded file.user_to_uid [DEBUG ] LazyLoaded cp.is_cached [DEBUG ] Initializing new AsyncZeroMQReqChannel for ('/etc/salt/pki/minion', 'ip-10-97-24-39', 'tcp://10.97.23.60:4506', 'aes') [DEBUG ] Initializing new AsyncAuth for ('/etc/salt/pki/minion', 'ip-10-97-24-39', 'tcp://10.97.23.60:4506') [DEBUG ] LazyLoaded s3.query [ERROR ] There was an error: requests is required for s3 access [ERROR ] Failed to cache s3://bucket/folder/file.tgz: Could not fetch from s3://bucket/folder/file.tgz. Exception: global name 'requests' is not defined [INFO ] Completed state [/tmp/temp.tar.gz] at time 23:32:33.549215 duration_in_ms=17.06 [DEBUG ] File /var/cache/salt/minion/accumulator/139716429133712 does not exist, no need to cleanup. [DEBUG ] Minion return retry timer set to 9 seconds (randomized) [INFO ] Returning information for job: 20170828233314458697 [DEBUG ] Initializing new AsyncZeroMQReqChannel for ('/etc/salt/pki/minion', 'ip-10-97-24-39', 'tcp://10.97.23.60:4506', 'aes') [DEBUG ] Initializing new AsyncAuth for ('/etc/salt/pki/minion', 'ip-10-97-24-39', 'tcp://10.97.23.60:4506') [DEBUG ] minion return: {'fun_args': ['deploy.web'], 'jid': '20170828233314458697', 'return': {'file_|-download_|-/tmp/temp.tar.gz_|-managed': {'comment': ""Failed to cache s3://bucket/folder/file.tgz: Could not fetch from s3://bucket/folder/file.tgz. Exception: global name 'requests' is not defined"", 'pchanges': {}, 'name': '/tmp/temp.tar.gz', 'start_time': '23:32:33.532155', 'result': False, 'duration': 17.06, '__run_num__': 0, '__sls__': u'deploy.web', 'changes': {}, '__id__': 'download'}}, 'retcode': 2, 'success': True, 'fun': 'state.sls'} ### Versions Report Minion [root@ip-10-97-24-39 salt]# salt-minion --version salt-minion 2017.7.0 (Nitrogen) [root@ip-10-97-24-39 salt]# cat /etc/redhat-release CentOS release 6.9 (Final) Master root@salt-master-001:/srv/salt/pillar_roots# cat /etc/debian_version 8.8 root@salt-master-001:/srv/salt/pillar_roots# salt --versions-report Salt Version: Salt: 2017.7.1 Dependency Versions: cffi: 0.8.6 cherrypy: Not Installed dateutil: 2.2 docker-py: Not Installed gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.9.4 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.2 mysql-python: 1.2.3 pycparser: 2.10 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.9 (default, Jun 29 2016, 13:08:31) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.4.0 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: debian 8.8 locale: UTF-8 machine: x86_64 release: 3.16.0-4-amd64 system: Linux version: debian 8.8",Do you have the python-requests package installed? I'd start by making sure it's installed.,"Hello and thanks for the answers! The package is installed on both servers. Master: root@salt-master-001:~# dpkg-query -l | grep python-requests ii python-requests 2.7.0-3 all elegant and simple HTTP library for Python2, built for human beings Minion: [root@ip-10-97-24-39 ~]# yum list | grep python-requests Repository nodesource is listed more than once in the configuration python-requests.noarch 2.6.0-4.el6 @anaconda-CentOS-201703281317.x86_64/6.9"
saltstack/salt,https://github.com/saltstack/salt/issues/43368,saltstack_salt_issues_43368,"Salt masters behind AWS ELB have flaky connection to minions

### Description of Issue/Question The connection of the salt-masters that run behind an AWS ELB to the salt-minions is flaky. Sometimes they work, most times they don't. I would like to know if there is some flaw in my setup that I am not seeing, or if Salt only works with an HA Proxy as an ELB? Or maybe Salt doesn't work at all behind an ELB? ### Setup I am running the following setup at AWS: - Elastic Loadbalancer in front of two EC2 machines (Amazon Linux) with a docker container that the salt-master runs in - Two EC2 instances with salt-minions installed - The 'master' value in the minion config is set to the dns of the loadbalancer (SaltMaster-env-vpc-test.szfegmankg.us-east-1.elasticbeanstalk.com) - The ELB accepts all traffic from the minions - The Salt-masters accept all traffic from the ELB as well as from the minions - The Salt-masters PKI Folder is shared between the two masters - The Salt-masters have the same private+public keys - The Salt-masters run on 2017.7.1 - The Salt-minions run on 2016.11.5 (I tried it with 2017.7.1, but got the same results) - The Salt-minions accept all traffic from the ELB as well as from the masters - The master config looks as follows: ",What salt transport are you using? ZeroMQ? What is the Failover setting on the ELB?,"@damon-atkins I am using ZeroMQ. What do you mean with Failover setting? I assume the ELB splits incoming traffic 50/50, or maybe based on CPU usage."
saltstack/salt,https://github.com/saltstack/salt/issues/44147,saltstack_salt_issues_44147,"salt.iptables rewriting custom chain after reboot.

### Description of Issue/Question When using `salt.iptables` to write the rules it seems that something goes wrong after a reboot. In this case the custom chain `SSHSCAN` gets rewritten after the reboot. I've provided a `iptables-save -c` below to show that there are no changes to the rules after the reboot Its a bit odd tho cause its only this chain that gets rewritten, could it be cause the `SSHSCAN` gets set in a diffrent state? I've tested to use `iptables.append` instead of `iptables.insert` and there is no diffrence in the problem. The rest of the rules are set by another state that can be found here: https://github.com/Robert-Grundstrom/salt-config/blob/master/salt-config/salt/services/firewall/init.sls ### Pillar ","Can you provide the `salt-call -l debug state.apply` output for this so we can see what it is comparing and failing on? Thanks, Daniel",I cleaned all firewall rules and did a clean run followed up by a reboot and rerun. ### Iptables are flushed. 
saltstack/salt,https://github.com/saltstack/salt/issues/47315,saltstack_salt_issues_47315,"[Question] pillar files not named init.sls

### Description of Issue/Question Just a simple question, that i can't seem to find the answer to. I'm using `git-crypt` to protect files in pillars, and want to following naming convention for the glob of which should be encrypted and which should not, on the salt master the repository is unlocked, so no issue there. I've tried using dashes like `init-locked.sls` or just `locked.sls`, but each variation returns the same response: ` Specified SLS 'foo' in environment 'bar' is not available on the salt master` where `foo` is a directory with only one file `locked.sls` I've found older various issues where people have tried to put `.`'s in their filenames, which is why i used a dash or just another word, but neither are getting picked up ### Setup Nothing special here. I can do this another way and use the directory name as the glob, but was just curious about the issue. ### Steps to Reproduce Issue Add a directory and file to pillar data, not called `init.sls` run `salt ""*"" saltutil.resfresh_pillar` run `salt minion_id pillar.items | less` You should see the error right at the top ### Versions Report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.4.2 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Dec 4 2017, 14:50:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-1055-aws system: Linux version: Ubuntu 16.04 xenial",What does the top file for your pillar data look like?,"@garethgreenaway - looks like out posts crossed, but to answer you question, that goes along with my comment, it now looks like this  where `flyway` directory now has both an `init.sls` file, which is empty and `locked.sls` which has the requisite yaml And when i have this i can run `salt minion pillar.items` and i see the correct yaml dictionary and no errors"
saltstack/salt,https://github.com/saltstack/salt/issues/43488,saltstack_salt_issues_43488,"Traceback received when bootstrapping Windows via manage.bootstrap_psexec

I am unable to bootstrap Windows. I get a traceback after running: salt-run manage.bootstrap_psexec hosts='myIP' username='myDomain\myAdministrator' traceback link: https://gist.githubusercontent.com/ooboyle/b639b75f9995baf01992b1f8d4caae0d/raw/0cff33702a4b66fc90413f2ba753028829ebc2c8/gistfile1.txt I've requested assistance on IRC but no one has stepped up which makes me believe this is a bug. Master version report: salt --versions-report Salt Version: Salt: 2016.11.5 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.4.2 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Nov 19 2016, 06:48:10) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial machine: x86_64 release: 4.4.0-62-generic system: Linux version: Ubuntu 16.04 xenial",can you paste the versions report for your windows minion as well?,"Hi Megan, I had a minion installed on one of these machines so here's the versions report from when it was installed: C:\salt>salt-call --versions-report Salt Version: Salt: 2017.7.1 Dependency Versions: cffi: 1.10.0 cherrypy: 10.2.1 dateutil: 2.6.0 docker-py: Not Installed gitdb: 2.0.2 gitpython: 2.1.3 ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.6 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 3.5.3 (v3.5.3:1880cb95a742, Jan 16 2017, 16:02:32) [MSC v.1900 64 bit (AMD64)] python-gnupg: 0.4.0 PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.3 timelib: 0.2.4 Tornado: 4.5.1 ZMQ: 4.1.6 System Versions: dist: locale: cp1252 machine: AMD64 release: 7 system: Windows version: 7 6.1.7601 SP1 Multiprocessor Free"
saltstack/salt,https://github.com/saltstack/salt/issues/47125,saltstack_salt_issues_47125,"Runas Causing ""invalid directory"" error on Windows.

### Description of Issue/Question When using `cmd.script` with the `runas` option I am getting an error ""The current directory is invalid"". ### Setup Install Salt 2017.7.5 on Windows 2016. Create a test user using `salt '<test minion>' user.add borneo <some password>`. ### Steps to Reproduce Issue Run the following state on the newly configured minion from above. ",Maybe a permissions thing? @twangboy @dwoz Thoughts?,@gtmanfred Thanks for the clarification about `runas_password`. I have tried this with `runas_password` and still get the same error. I updated my state to the following: 
saltstack/salt,https://github.com/saltstack/salt/issues/50662,saltstack_salt_issues_50662,"x509 module returns error on FIPS compliant server

### Description of Issue/Question The x509 state module will return as follows when running on a FIPS compliant Ubuntu server: ",What does your peers config look like?,@dwoz Thanks for the update. My peers are as follows: 
saltstack/salt,https://github.com/saltstack/salt/issues/43307,saltstack_salt_issues_43307,"Filesystem creation is failing on newly created LV

### Description of Issue/Question The salt is failing when formatting empty lv/vg Look at the logs below will tell you more than description :) ### Setup ",Do you have the commands `mkfs` and `sync` available?, btw. that was working perfectly in v2016.11.6
saltstack/salt,https://github.com/saltstack/salt/issues/56165,saltstack_salt_issues_56165,"Whole Mac machine hangs during and after salt state.apply

### Description of Issue We're using saltstack for managing debian and mac os boxes. Seldomly using `salt my.mac state.apply test=True` leads to a total hang of the mac os machine ""my.mac"". Usually state.apply takes around 30 - 60 seconds with test=True. If the problem occurs it took ~ 6 minutes and the system cant do anything else. My ""ps aux | grep salt"" wont be executed for minutes. Starting the ""activity monitor"" is either not possible (error message) or takes forever. Running daemons are somewhat working (e. g. a webserver on this Mac still serves HTTP requests, ...) This problem persists even after state.apply has returned after 6 minutes. The Mac was unresponsive for another 10 - 15 minutes. The reported CPU usage although is low (~ 1 %). We have ~ 10 mac boxes and it doesnt happen on all of them, just a few and only very sporadic. Restarting the salt-minion does not help. We couldnt try to restart the machine, because these mac servers are used internally by a lot of people. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) I cant provide you the SLS, because they have highly sensitive stuff in them. The following states are used: ",Maybe someone from @saltstack/team-core will correct me or add something?,The mac is connected to an OpenLDAP Server (Mac) for users and groups. It manages only 2 services: the salt-minion itself and the agent for zabbix: 
saltstack/salt,https://github.com/saltstack/salt/issues/43316,saltstack_salt_issues_43316,"Wrong salt-minion's main process name when python-setproctitle installed

### Description of Issue/Question salt-minion tries to import module setproctitle. If this done successfully it executes setproctitile with space instead of ""\0"" used as param separator.  ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue Install Ubuntu 16.04 install salt-minion install python-setproctitle execute 'service salt-minion status' ### Versions Report Salt Version: Salt: 2016.3.7 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.4.2 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.12 (default, Nov 19 2016, 06:48:10) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial machine: x86_64 release: 4.4.0-92-generic system: Linux version: Ubuntu 16.04 xenial","Would you mind submitting a PR to fix this in the 2016.11 branch and we can merge it forward to 2017.7 and develop? Thanks, Daniel",Apparently I wasn't 100% right about root cause. setproctitile() wont accept NULL character. And looks like setprotitile does something on import that modifies process cmdline. Healthy node: 
saltstack/salt,https://github.com/saltstack/salt/issues/43354,saltstack_salt_issues_43354,"IP address empty in grain of minion run with docker-compose

I've uploaded a testcase here: https://github.com/BitonicEelis/saltstack-testcase Running doit.sh should reproduce the problem. It uses docker-compose to make 2 containers, one for master and one for minion. Then it shows that: - the minion successfully responds to test.ping - ""docker inspect"" has no difficulty seeing the container's IP - the ipv4 grain is empty ### Versions Report Salt Version: Salt: 2016.11.2 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.5.3 gitdb: 2.0.0 gitpython: 2.1.1 ioflo: Not Installed Jinja2: 2.9.5 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pygit2: Not Installed Python: 2.7.13 (default, Jan 19 2017, 14:48:08) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.1 timelib: Not Installed Tornado: 4.4.2 ZMQ: 4.2.1 System Versions: dist: Ubuntu 17.04 zesty machine: x86_64 release: 4.10.0-32-generic system: Linux version: Ubuntu 17.04 zesty",Would love to see a PR for that if you wanted to submit it? Thanks! Daniel,"Sure thing, done. :)"
saltstack/salt,https://github.com/saltstack/salt/issues/43446,saltstack_salt_issues_43446,"Improve documentation for saltstack jenkins module

### Description of Issue/Question I am trying to use the salt module for managing jenkins builds and it is not very clear from the documentation how to configure the jenkins module in terms of URL, username, password or token. ### Setup ### Steps to Reproduce Issue After I do salt 'salt' jenkins.build_job oncoverse_e2e_tests I get ERROR executing 'jenkins.build_job': No Jenkins URL found. I have tried adding jenkins.url, jenkins.user, jenkins.password to pillar and master config file with no success. ### Versions Report Salt Version: Salt: 2016.11.6 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.6.0 docker-py: Not Installed gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: Ubuntu 14.04 trusty machine: x86_64 release: 3.13.0-107-generic system: Linux version: Ubuntu 14.04 trusty",Can you provide an example of how you have the values stored in pillar?,"This is my command to start the build salt 'salt' jenkins.build_job oncoverse_e2e_tests For the host salt, this is part of my pillar: "
saltstack/salt,https://github.com/saltstack/salt/issues/43479,saltstack_salt_issues_43479,"Mattermost runner failing to retrieve config values due to unavailable config runner  

### Description of Issue/Question The new Mattermost runner use the config runner to query config options like api_url and hook, however the config runner is currently only in the develop branch and therefore unavailable causing mattermost runner functions to fail. See below for the specific code portion in the source responsible. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ",Should we back port the config runner?,"Sounds reasonable to me. As @cachedout pointed out, it's an easy fix, until the next major release. Was just bringing attention to this. I'm fine with this being closed as well."
saltstack/salt,https://github.com/saltstack/salt/issues/51834,saltstack_salt_issues_51834,"ansiblegate.py Module will not be loaded: 'module' object has no attribute 'IGNORE_FILES'

 https://github.com/saltstack/salt/blob/4b37292ffb1a0ba7cee402071bf8e851fd7c90dc/salt/modules/ansiblegate.py#L86",what ansible module version do you have installed? Looks liked IGNORED_FILES was added int `v2.1.0.0-1` and above.,2.0.0.2-2ubuntu1.1 as provided by xenial-updates: https://packages.ubuntu.com/xenial-updates/ansible The problem seems to be gone with 2.1.1.0-1~ubuntu16.04.1 as provided by xenial-backports: https://packages.ubuntu.com/xenial-backports/ansible
saltstack/salt,https://github.com/saltstack/salt/issues/52289,saltstack_salt_issues_52289,"Salt master fails to authenticate minion key with mismatched line terminators

### Description of Issue/Question The salt master will fail to authenticate a minion when the minion's `minion.pem` has `CRLF` line terminators and the master's `/etc/salt/pki/master/minions/minion_id` file has `LF` line terminators. This happened when pre-seeding a Windows minion. The minion and/or master should normalize line terminators before attempting to authenticate. ",Do you know if this is a regression?,"I do not know for sure. It's my first time preseeding windows minions. There doesn't seem to be any recent history of change to how [salt.transport.mixins.auth](https://github.com/saltstack/salt/blob/develop/salt/transport/mixins/auth.py#L252) opens the minion's public key on the master. And while there have been some changes to [salt.crypt.get_rsa_pub_key](https://github.com/saltstack/salt/blame/4e1788e57b475102aa1e753d20a37a1ca3ad6076/salt/crypt.py#L204) related to M2Crypto, that's not installed on my minion. There may be other places a change could have broken this, but it's such a niche issue that it wouldn't be too unlikely to have always existed."
saltstack/salt,https://github.com/saltstack/salt/issues/45655,saltstack_salt_issues_45655,"service.running reload: True does not seem to do a full daemon-reload

### Description of Issue/Question We are still using some legacy upstart services on our Ubuntu 16.04 servers. On 14.04, we didn't need to do anything else as the state worked fine. In 16.04, we have `reload: True` but the state fails with `Unit analytics.80.service not found.` (for example). As a workaround, I added this above the `service.running` state: ",Can you run that and then see what happens when you run that command outside of salt?,"@Ch3LL odd, the state fails with: "
saltstack/salt,https://github.com/saltstack/salt/issues/46273,saltstack_salt_issues_46273,"salt.states.http.query converts JSON data_file to invalid JSON body

### Description of Issue/Question Using the `data_file` option with `salt.states.http.query` results in a query with a form-encoded body, even if the data file is `json`. From what I can tell, `salt.utils.http.query` is using `requests.request`, which sends up `data` as [form-encoded body](http://docs.python-requests.org/en/master/_modules/requests/api/#request). However, `requests.request` supports a `json` parameter which would pass the body as JSON. ### Setup On minion, create a `/tmp/webhook_template.json`: ",Does that work?,"@Ch3LL that would only affect the response, but in this case we are looking to use JSON for the request body."
saltstack/salt,https://github.com/saltstack/salt/issues/43581,saltstack_salt_issues_43581,"cherrypy stats issue

### Description of Issue/Question # curl -ksi https://localhost:8000/stats -H ""Accept: application/x-yaml"" -H ""X-Auth-Token: $AUTHTOKEN"" causes the following error in salt-api [INFO ] 127.0.0.1 - - [18/Sep/2017:13:54:18] ""POST /login HTTP/1.1"" 200 207 """" ""curl/7.29.0"" [DEBUG ] Error while processing request for: /stats Traceback (most recent call last): File ""/usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/app.py"", line 737, in hypermedia_handler ret = cherrypy.serving.request._hypermedia_inner_handler(*args, **kwargs) File ""/usr/lib/python2.7/site-packages/cherrypy/_cpdispatch.py"", line 60, in __call__ return self.callable(*self.args, **self.kwargs) File ""/usr/lib/python2.7/site-packages/salt/netapi/rest_cherrypy/app.py"", line 2621, in GET from cherrypy.lib import cpstats File ""/usr/lib/python2.7/site-packages/cherrypy/lib/cpstats.py"", line 438, in <module> class StatsPage(object): File ""/usr/lib/python2.7/site-packages/cherrypy/lib/cpstats.py"", line 478, in StatsPage @cherrypy.exposed AttributeError: 'module' object has no attribute 'exposed' ### Fix cherrypy/lib/cpstats.py line 478 needs to be changed from @cherrypy.exposed to @cherrypy.expose (without the d) ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report Salt Version: Salt: 2017.7.1 Dependency Versions: cffi: Not Installed cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Nov 6 2016, 00:28:07) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.3.1611 Core locale: UTF-8 machine: x86_64 release: 3.10.0-514.26.2.el7.x86_64 system: Linux version: CentOS Linux 7.3.1611 Core",How was it installed?,"It was installed via ""yum install salt-api"" from the saltstack repository. ________________________________ From: Seth House <notifications@github.com> Sent: Tuesday, September 19, 2017 7:31 PM To: saltstack/salt Cc: jcourington; Mention Subject: Re: [saltstack/salt] cherrypy stats issue (#43581) Odd that the CherryPy version doesn't show up in the versions report. How was it installed? — You are receiving this because you were mentioned. Reply to this email directly, view it on GitHub<https://github.com/saltstack/salt/issues/43581#issuecomment-330702471>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AIxo6m8CfN4ip3PV3xjEaHYmwsU9jwHpks5skE7bgaJpZM4PbUVZ>."
saltstack/salt,https://github.com/saltstack/salt/issues/44566,saltstack_salt_issues_44566,"Unable to list ec2 instances using list_nodes_full by sending location

### Description of Issue/Question Unable to list ec2 instances using list_nodes_full by sending location using salt-cloud python implementation with CloudClient class. ### Setup Tried to get ec2 instances based on location using list_nodes_full method from CloudClient class ### Steps to Reproduce Issue Used following code to list kwargs['location'] = filter_params['region'] cloud_client.action(fun=""list_nodes_full"", provider=self.provider, kwargs = kwargs) Error: list_nodes_full() got an unexpected keyword argument 'kwargs' Temporary fix made in ec2.py. Changed method definition to def list_nodes_full(location=None, call=None, kwargs=None): added following 2 lines in function if not location: location = kwargs.get('location',None)","Would you mind submitting a PR for this? Thanks, Daniel",To which branch i should raise a pull request?
saltstack/salt,https://github.com/saltstack/salt/issues/43664,saltstack_salt_issues_43664,"pip module is not working under windows

PIP salt module is not working under windows environment. The problem is that during salt-minion installer creation there is cleanup of the absolute path to python.exe executable this is leading to `Fatal error in launcher: Unable to create process using '""' ` error when pip is executed. Better solution is to replace c:\python{{version}} with c:\salt\bin path which will allows to successfully execute pip and install additional modules (in my case it was dnspython). So line as the one below (and for pip2, pip27 exe files) https://github.com/saltstack/salt/blob/8cf0588221fec3eddf310bff09c9affbd17cf19b/pkg/windows/build_pkg.bat#L144 should become: `""%PyDir%\python"" ""%CurDir%\portable.py"" -f ""%BinDir%\Scripts\pip.exe"" -r ""c:\salt\bin""`.",How are you calling the pip module? Are you passing the path to the `pip.exe` using `bin_env`?,"@twangboy the error is raised when I use pip.installed state for an example. Passing bin_env doesn’t help. However, if I pass both bin_env and cwd options (pointing to the pip and c:\salt\bin\scripts respectively) it works. The install package that I’m using is the 2017.7.1 from repo.saltstack.com. By tracing the process it seems that ..\python.exe command in pip.exe is trying to locate python relatively to the working directory, not the one pip.exe is placed. The issue is reported by many users and all of the fixes are pointing to set absolute path for python.exe (or just python.exe if it’s in system path)."
saltstack/salt,https://github.com/saltstack/salt/issues/45671,saltstack_salt_issues_45671,"x509 signing client cert - denied by signing policy when targeting minion with pcre

### Description of Issue/Question Trying to get compound matching using E@ (pcre match) on minion ID working in signing policy - however - it is denied:  ### Steps to Reproduce Issue ### Versions Report Minion & Master versions the same. Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: 1.6.0 cherrypy: Not Installed dateutil: 2.5.3 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: 0.24.6 libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: 3.4.3 pygit2: 0.24.2 Python: 2.7.5 (default, Aug 4 2017, 00:39:18) python-gnupg: 0.3.8 PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.4.1708 Core locale: UTF-8 machine: x86_64 release: 3.10.0-693.11.6.el7.x86_64 system: Linux version: CentOS Linux 7.4.1708 Core",Do you know which salt version this was working in previously?,@Ch3LL Hey - sorry for not being clear - I meant previously when I was using Glob matching - not previously in a different version of salt. So - the only difference between successful remote signing and not successful was the glob vs pcre match. @gtmanfred Ah. I see it has already been addressed in develop.
saltstack/salt,https://github.com/saltstack/salt/issues/43735,saltstack_salt_issues_43735,"Reactor arguments are no longer being passed to runners after 2017.7.1 upgrade

### Description of Issue/Question After upgrading from version 2016.11.0 to 2017.7.1 reactions are no longer passing arguments to runners when triggered. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) Reactor config:  Let me know if I can clarify anything or provide additional debug output.",Can you adjust your reactor files as documented at the end of that ticket (adding arg and kwarg keys) and see if that helps?,"That was it, thanks for the quick response!"
saltstack/salt,https://github.com/saltstack/salt/issues/43745,saltstack_salt_issues_43745,"ldap.managed broken on Centos6 with current update from saltstack

### Description of Issue/Question Since the last update I did (2017-09-05) I encounter the following error with an ldap.managed. The version from 2017-08-01 did work properly. ### Setup  Saltstack and python dependencies are installed from repo.saltstack.com.",Can you confirm that it is available?, Let me add that there is no python27-ldap package in saltstack repo but there is a all the salt dependencies to python27.
saltstack/salt,https://github.com/saltstack/salt/issues/43833,saltstack_salt_issues_43833,"state.apply tries to install packages before repository

### Description of Issue/Question Calling each state individually works. Like: ``salt app1 state.sls common`` ``salt app1 state.sls php`` Applying both state using ``state.apply`` - doesnt work. For some reason salt is trying everything at once skipping the php repo. At the end fails with:  Please correct me if there is a misconfiguration!",Do you have state_aggregate turned on for the pkg state? https://docs.saltstack.com/en/latest/ref/states/aggregate.html,"No, I do not: `#state_aggregate: False` Tried new container new installation of Salt. I only changed the id of the minion. And it worked! The difference between the masters config files was the timeout time. Tried restarting and clearing Salts cache folder - no change still fails. I cannot recall what I have done. Because of that will wipe this instance of Salt and start fresh."
saltstack/salt,https://github.com/saltstack/salt/issues/44290,saltstack_salt_issues_44290,"boto_secgroup.preset cannot create security group rule referencing a security group in another vpc

### Description of Issue/Question I am trying to create a security group using the boto_secgroup state that allows inbound traffic from a security group in another VPC. ### Setup I have the following debug state with source_group_group_id: ","Do you have the VPCs peered? You can only add secgroups cross-vpc, if they're peered.","Definitely my bad, I wrote the vpc-peering state but did not run it. So in fact, the peering was not created on these new vpcs. I am getting an issue with boto_vpc.accept_vpc_peering_connection as shown below. When I go to run the following debug state:  If you need me to create a new issue with this, I can. Then I can close out this issue once I have confirmed the secgroup state works properly with the vpc peering finished."
saltstack/salt,https://github.com/saltstack/salt/issues/43928,saltstack_salt_issues_43928,"Salt Virt runner minion seeding failing

### Description of Issue/Question When using the salt virt runner to deploy a new vm to a KVM host, like so: `salt-run virt.init mynewminion 1 1024 /var/lib/libvirt/images/image.qcow2 nic=nicprofile host='kvmhost'` The preseeding of the minion fails with the following exception: ","Would you be able to provide me with some salt states to setup an environment that is able to replicate this issue? Thanks, Daniel","I've basically followed this tutorial to get things up and running: https://docs.saltstack.com/en/latest/topics/tutorials/cloud_controller.html#cloud-controller The only differences here are that I'm using a custom KVM qcow2 image (located on the hypervisor filesystem) which uses our internal yum repos and already has the Salt minion installed in the image. Also, I'm not using the capabilities of `virt.keys` (as per tutorial) but I'm using certs on the KVM services signed by our internal CA instead. This all works as the `virt.query` function is working as expected."
saltstack/salt,https://github.com/saltstack/salt/issues/44758,saltstack_salt_issues_44758,"close_fds=True causes cmd.run very slow

### Description of Issue/Question salt is running very slow on my system. It takes 25 seconds to run a test.ping. after some cleanup on the system, I reduced it to 12 seconds, which, is still quite slow. So I start tracking down the code. And I found the the following code in /usr/local/lib/python2.7/site-packages/salt/utils/timed_subprocess.py is causing the problem.  My question is: Why would we need to set close_fds to True? If I set it to False, will it cause any problems? ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: 1.7.0 cherrypy: unknown dateutil: 2.6.1 docker-py: Not Installed gitdb: 2.0.2 gitpython: 2.1.5 ioflo: Not Installed Jinja2: 2.9.5 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.7 mysql-python: 1.2.5 pycparser: 2.10 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.14 (default, Oct 20 2017, 17:34:55) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 16.0.3 RAET: Not Installed smmap: 2.0.3 timelib: Not Installed Tornado: 4.5.2 ZMQ: 4.2.2 System Versions: dist: locale: UTF-8 machine: amd64 release: 11.1-RELEASE-p1 system: FreeBSD version: Not Installed",Can you share a sanitized version of your configs? Or anything you see different from my test environment from yours?,"Maybe my system was slow. But if changed close_fds to True in cmdmod.py. it returns in 4 seconds, which is much faster comparing to 13 seconds. I tried changing the value of maxfiles in the kernel parameter and the result was the same "
saltstack/salt,https://github.com/saltstack/salt/issues/45080,saltstack_salt_issues_45080,"[ERROR] Error encountered during module reload. Modules were not reloaded

### Description of Issue/Question Every time I run state.highstate, I got this error ","When you're seeing the errors in your logs following a module reload, are the modules successfully being reloaded?","Yes, all the installed modules were successfully loaded."
saltstack/salt,https://github.com/saltstack/salt/issues/49753,saltstack_salt_issues_49753,"when using 'prereq' in orchestration pre-requiring state does not run

### Description of Issue/Question When using 'prepreq' in orchestration, I can see that the pre-required state first runs with `test=True` and then runs in real, but the pre-requiring state did not run at all. ### Setup ",would you be willing to submit that as a PR?,"@Ch3LL that's just my work around. I don't understand why do we need `pachanges`, what it's for?"
saltstack/salt,https://github.com/saltstack/salt/issues/53199,saltstack_salt_issues_53199,"mysql_grants failed database returned all privileges specifically instead of `ALL PRIVILEGES`

I am getting the following error when applying a mysql state  The grants returned from the database was `['SELECT', 'INSERT', 'UPDATE', 'DELETE', 'CREATE',.....]` while salt was expecting `[ALL PRIVILEGES]`, which caused a mismatch. I believe this was cause by my recent database upgrade(Maridb 10.2.4 to Mariadb 10.3.15). It seems in Mariadb 10.3, `show grants` query returns every single privilege instead of 'ALL PRIVILEGES'. But can we support this in salt mysql module?",What do you thing?,I was running 2018.3.3. But I patched `mysql.py` with the latest from `develop` branch. 
saltstack/salt,https://github.com/saltstack/salt/issues/55149,saltstack_salt_issues_55149,"salt.modules.match.search_by not working 2019.2.2

I have the following pillar setup following instructions https://docs.saltstack.com/en/2018.3/ref/modules/all/salt.modules.match.html It has been working well for two years until I upgrade salt to 2019.2.2 today. ",Did you try removing those two lines to see if it works properly?,Removing the first line `if not opts:` worked.
saltstack/salt,https://github.com/saltstack/salt/issues/44020,saltstack_salt_issues_44020,"Windows Updates

### Description of Issue/Question When I run this command that should only install a specific update ""Microsoft ForeFront Protection 2010"" salt -C 'G@os:Windows and *' win_wua.list_update KB2461484 install=true or salt -C 'G@os:Windows and * and not S@172.27.143.0/24' win_wua.list_updates categories=['Forefront Endpoint Protection 2010'] install=true its installs ALL updates available for that server cloud-hyp10.cloudstack.dk: ---------- Message: Installation Succeeded NeedsReboot: True Success: True Updates: ---------- 1ee57033-1eba-47b8-b547-e9dfdc6a2127: ---------- AlreadyDownloaded: True RebootBehavior: Poss Reboot Result: Installation Succeeded Title: Cumulative Security Update for Internet Explorer 11 for Windows Server 2012 R2 (KB4036586) 3823e99f-17fd-43bd-8793-20af6d15b4ba: ---------- AlreadyDownloaded: True RebootBehavior: Poss Reboot Result: Installation Succeeded Title: Windows Malicious Software Removal Tool for Windows 8, 8.1, 10 and Windows Server 2012, 2012 R2, 2016 x64 Edition - September 2017 (KB890830) 56ea2dc9-15e6-4ab3-ac41-084b1b8158d1: ---------- AlreadyDownloaded: True RebootBehavior: Poss Reboot Result: Installation Succeeded Title: 2017-09 Security Only Update for .NET Framework 3.5, 4.5.2, 4.6, 4.6.1, 4.6.2, 4.7 on Windows 8.1 and Server 2012 R2 for x64 (KB4041092) 87df9a20-783b-4122-921d-eb2df175c0fe: ---------- AlreadyDownloaded: True RebootBehavior: Poss Reboot Result: Installation Succeeded Title: 2017-09 Security Monthly Quality Rollup for Windows Server 2012 R2 for x64-based Systems (KB4038792) 9516efa8-6493-43de-979c-ebf2aa89aa69: ---------- AlreadyDownloaded: True RebootBehavior: Poss Reboot Result: Installation Succeeded Title: 2017-09 Security Only Quality Update for Windows Server 2012 R2 for x64-based Systems (KB4038793) dc4eb637-5391-4ca8-8f08-98584d61effa: ---------- AlreadyDownloaded: True RebootBehavior: Poss Reboot Result: Installation Succeeded Title: 2017-09 Security and Quality Rollup for .NET Framework 3.5, 4.5.2, 4.6, 4.6.1, 4.6.2, 4.7 on Windows 8.1 and Server 2012 R2 for x64 (KB4041085) ### Setup No setup command issue from the command line ### Steps to Reproduce Issue Simply run the command again when there are more than one update avialable ### Versions Report Salt Version: Salt: 2016.11.5 Dependency Versions: cffi: Not Installed cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: 2.0.3 gitpython: 2.1.7 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: Not Installed pycryptodome: 3.4.3 pygit2: Not Installed Python: 2.7.5 (default, Nov 6 2016, 00:28:07) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: 2.0.3 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.3.1611 Core machine: x86_64 release: 3.10.0-514.el7.x86_64 system: Linux version: CentOS Linux 7.3.1611 Core",Can you paste the versions report for your windows minion?,"Salt Version: Salt: 2016.11.5 Dependency Versions: cffi: 1.10.0 cherrypy: 7.1.0 dateutil: 2.5.3 docker-py: Not Installed gitdb: 0.6.4 gitpython: 2.0.8 ioflo: 1.5.5 Jinja2: 2.9.4 libgit2: Not Installed libnacl: 1.4.5 M2Crypto: Not Installed Mako: 1.0.4 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (v2.7.12:d33e0cf91556, Jun 27 2016, 15:24:40) [MSC v.1500 64 bit (AMD64)] python-gnupg: 0.3.8 PyYAML: 3.11 PyZMQ: 16.0.1 RAET: Not Installed smmap: 0.9.0 timelib: 0.2.4 Tornado: 4.4.1 ZMQ: 4.1.6 System Versions: dist: machine: AMD64 release: 2012ServerR2 system: Windows version: 2012ServerR2 6.3.9600 Multiprocessor Free"
saltstack/salt,https://github.com/saltstack/salt/issues/44050,saltstack_salt_issues_44050,"Package Downgrade Fails

Salt state was failing to downgrade with the following error message.  In order to get working I had to edit the following changing the `name` variable to `pkgname` https://github.com/saltstack/salt/blob/5d719a2219908285d20ede02635f03b8b0e35b16/salt/modules/yumpkg.py#L1415",Can you provide the output from salt --versions-report?,"@garethgreenaway Here is the requested report, please let me know if there is any other information I could provide that would assist you. "
saltstack/salt,https://github.com/saltstack/salt/issues/44065,saltstack_salt_issues_44065,"[2017.7.2] ESXi Proxy Minion errors

### Description of Issue/Question When running the ESXi Proxy Minion as described in the documentation, it errors out with: The Salt ProxyMinion is shutdown. Proxymodule esxi is missing an init() or a shutdown() or both. Check your proxymodule. Salt-proxy aborted. ### Setup All files are setup exactly as the documentation sas, but for clarity: /etc/salt/proxy master: salt.domain.com /srv/pillar/top.sls base: 'esxi': - esxi /srv/pillar/esxi.sls proxy: proxytype: esxi host: 192.168.1.10 username: root passwords: - <removed password> ### Versions Report [root@salt ~]# salt --versions-report Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: 1.11.2 cherrypy: unknown dateutil: Not Installed docker-py: 1.10.6 gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.7 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Aug 4 2017, 00:39:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.4.1708 Core locale: UTF-8 machine: x86_64 release: 3.10.0-693.2.2.el7.x86_64 system: Linux version: CentOS Linux 7.4.1708 Core Attached is the debug output for the proxy command. [debug.txt](https://github.com/saltstack/salt/files/1379432/debug.txt)",Can you verify that the pyVmomi python library and the esxcli binary is installed?,"@garethgreenaway Hello, yes I did see that the module is not loading. I do have both of these packages installed.. [root@salt ~]# pip install pyvmomi Requirement already satisfied: pyvmomi in /usr/lib/python2.7/site-packages Requirement already satisfied: requests>=2.3.0 in /usr/lib/python2.7/site-packages (from pyvmomi) Requirement already satisfied: six>=1.7.3 in /usr/lib/python2.7/site-packages (from pyvmomi) [root@salt ~]# esxcli --version Script 'esxcli' version: 6.5.0"
saltstack/salt,https://github.com/saltstack/salt/issues/47461,saltstack_salt_issues_47461,"salt-minion under python3 evaluates iteritems on pillar-derived object

### minion evaluation of pillar raises ""Jinja variable 'dict object' has no attribute 'iteritems'"" error ### Setup I have this SLS in CUPS/init.sls. In previous versions this worked, even for a minion that did not have cups_printers defined. ",Can you provide the output from `salt <minion> pillar.get cups_printer`? Thanks!,"I didn't think to put it markdown when I posted above, I'll update it: "
saltstack/salt,https://github.com/saltstack/salt/issues/44136,saltstack_salt_issues_44136,"KeyError: 'runas' after updating to latest salt in yum repo.

### Description of Issue/Question After upgrading to Salt 2017.7.2-1.el6 from the salt repo, we started getting a keyerror 'runas' followed by a python traceback. We've tried increasing the verbosity to identify the specific failure in our SLS files but the best we can figure is we use cmd.script to call a script as a specific user. I'm not sure where else we would be calling anything that could cause a reference to 'runas'. ### Setup This is the only section that I think might be affected: cmd.script: - name: /tmp/CLIS/patch_wrapper.sh - args: {{ install_path }}/install_update - user: hci - shell: /bin/bash - cwd: {{ install_path }} ### Steps to Reproduce Issue [DEBUG ] File /var/cache/salt/minion/accumulator/139664175529552 does not exist, no need to cleanup. [ERROR ] An un-handled exception was caught by salt's global exception handler: KeyError: 'runas' Traceback (most recent call last): File ""/usr/bin/salt-call"", line 11, in <module> salt_call() File ""/usr/lib/python2.7/site-packages/salt/scripts.py"", line 391, in salt_call client.run() File ""/usr/lib/python2.7/site-packages/salt/cli/call.py"", line 58, in run caller.run() File ""/usr/lib/python2.7/site-packages/salt/cli/caller.py"", line 134, in run ret = self.call() File ""/usr/lib/python2.7/site-packages/salt/cli/caller.py"", line 204, in call ret['return'] = func(*args, **kwargs) File ""/usr/lib/python2.7/site-packages/salt/modules/state.py"", line 191, in orchestrate pillarenv=pillarenv) File ""/usr/lib/python2.7/site-packages/salt/runners/state.py"", line 82, in orchestrate orchestration_jid=orchestration_jid) File ""/usr/lib/python2.7/site-packages/salt/modules/state.py"", line 1109, in sls ret = st_.state.call_high(high_, orchestration_jid) File ""/usr/lib/python2.7/site-packages/salt/state.py"", line 2531, in call_high ret = self.call_chunks(chunks) File ""/usr/lib/python2.7/site-packages/salt/state.py"", line 2017, in call_chunks running = self.call_chunk(low, running, chunks) File ""/usr/lib/python2.7/site-packages/salt/state.py"", line 2364, in call_chunk running[tag] = self.call(low, chunks, running) File ""/usr/lib/python2.7/site-packages/salt/state.py"", line 1873, in call self.state_con.pop('runas') KeyError: 'runas' Traceback (most recent call last): File ""/usr/bin/salt-call"", line 11, in <module> salt_call() File ""/usr/lib/python2.7/site-packages/salt/scripts.py"", line 391, in salt_call client.run() File ""/usr/lib/python2.7/site-packages/salt/cli/call.py"", line 58, in run caller.run() File ""/usr/lib/python2.7/site-packages/salt/cli/caller.py"", line 134, in run ret = self.call() File ""/usr/lib/python2.7/site-packages/salt/cli/caller.py"", line 204, in call ret['return'] = func(*args, **kwargs) File ""/usr/lib/python2.7/site-packages/salt/modules/state.py"", line 191, in orchestrate pillarenv=pillarenv) File ""/usr/lib/python2.7/site-packages/salt/runners/state.py"", line 82, in orchestrate orchestration_jid=orchestration_jid) File ""/usr/lib/python2.7/site-packages/salt/modules/state.py"", line 1109, in sls ret = st_.state.call_high(high_, orchestration_jid) File ""/usr/lib/python2.7/site-packages/salt/state.py"", line 2531, in call_high ret = self.call_chunks(chunks) File ""/usr/lib/python2.7/site-packages/salt/state.py"", line 2017, in call_chunks running = self.call_chunk(low, running, chunks) File ""/usr/lib/python2.7/site-packages/salt/state.py"", line 2364, in call_chunk running[tag] = self.call(low, chunks, running) File ""/usr/lib/python2.7/site-packages/salt/state.py"", line 1873, in call self.state_con.pop('runas') KeyError: 'runas' ### Versions Report running salt in a masterless configuration: [root@ip-10-0-0-33 opt]# salt-call --versions-report Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8.1 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (default, Jul 12 2017, 17:32:34) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: centos 6.9 Final locale: UTF-8 machine: x86_64 release: 2.6.32-696.10.2.el6.x86_64 system: Linux version: CentOS 6.9 Final",Can you confirm that the minion is being restarted after the upgrade?,We're running masterless so we aren't using a minion. I noticed I did post mine with some jinja in it but that shouldn't matter. let me see if I can narrow down the failure. Maybe I pulled the wrong part of my SLS. Let me troubleshoot further and narrow it down better. Sorry!
saltstack/salt,https://github.com/saltstack/salt/issues/47498,saltstack_salt_issues_47498,"parallel: True error with mount.mounted state

### Description of Issue/Question ### Setup  ### Versions Report salt master and minion 2017.7.5","Can you run `salt <minionid> test.versions_report` just to be sure, and to also provide the other information about the minion so that I can better replicate this? Thanks, Daniel", May be you right and issue happened before minion restarted after update. I'm reopen issue if can reproduce it.
saltstack/salt,https://github.com/saltstack/salt/issues/45071,saltstack_salt_issues_45071,"Jobs missing from the default jobs cache on salt-master

### Description of Issue/Question I've noticed that some portion of job results are missing from my master jobs cache. I was able to confirm it by checking jids of started jobs, comparing with what I'm seeing on the event bus and what's in the jobs cache. I found jids that were sent back to the master but there are no files for those on disk and querying master with lookup_jid doesn't give me anything back. I've run lookup_jid within an hour of getting this event, so it couldn't yet be dropped from the cache by `keep_jobs` option. I can query other jids, this only affect some percent of job results. I don't see any errors in logs that would suggest any issues. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue I see the event on the event bus: ",Do you see any information about the job if you use the other runner functions like `print_job` or do you see it in `list_jobs`?,"Didn't try that, will check once I have a chance and report back"
saltstack/salt,https://github.com/saltstack/salt/issues/44211,saltstack_salt_issues_44211,"My Pillar is making proxy minions. Not sure why?

### Description of Issue/Question ### Setup ","Can you provide me an example of what that pillar structure looks like once it is assigned to a minion? Thanks, Daniel",I fixed the issue by removing the . Why is having a print command in my code causing proxy minions to pop up?
saltstack/salt,https://github.com/saltstack/salt/issues/45122,saltstack_salt_issues_45122,"Salt API is failing to authenticate - try 'systemctl restart salt-master': No JSON object could be decoded

Hi everyone, I'm using salt in Deepsea and having issue when i'm deploying deepsea on Opensuse Leap 42.3. In this stage ""salt-run state.orch ceph.stage.1"" i'm getting authentication issue. ""Salt API is failing to authenticate - try 'systemctl restart salt-master': No JSON object could be decoded"" is this a bug in Opensuse or not ?",what is listening on port 8008 already that you cannot start salt-api on it?,salt-api is under that port
saltstack/salt,https://github.com/saltstack/salt/issues/44333,saltstack_salt_issues_44333,"[2017.7] Prereq and onchanges on same target causes error

### Description of Issue/Question I'm trying to install an executable on a Windows minion, and I want to handle some stuff before and after writing the binary. For this, I use *prereq* and *onchanges*, but I get this error if the file doesn't already exist: ","Does this directory already exist? `D:/APP/Infrastructure/Telegraf/` If youmake the directory before running this state, does it work? Thanks, Daniel","@gtmanfred, the directory D:/APP/Infrastructure/Telegraf/ already exists, and this works fine is I remove either the *prereq* or *onchanges* reference."
saltstack/salt,https://github.com/saltstack/salt/issues/44389,saltstack_salt_issues_44389,"msiexec return code 1641 is not an ""error""

### Description of Issue/Question I'm building some Windows installers and one of them is for VMware View Agent. The install works fine, but the uninstall throws an error on the salt side. However, it is actually uninstalled cleanly. The MSI initiates a reboot and the return code is: 1641 A MSI 1641 is ERROR_SUCCESS_REBOOT_INITIATED . So, it's successfully removed the package, but is issuing a reboot. I would think that provision should be added to salt so that a 1641 is considered successful. ### Setup  ### Steps to Reproduce Issue Have a windows MSI uninstall that returns a 1641 ### Versions Report salt 2017.7.1 and minion is 2017.7.2",can you post the error here please?,"This actually does the same thing on the install, but it is the same ""error"". I just missed it since it was installing. A [list](https://msdn.microsoft.com/en-us/library/aa376931(v=vs.85).aspx) of MSI error codes. The summary from Microsoft on a 1641: pkg.remove on the salt master console output shows: "
saltstack/salt,https://github.com/saltstack/salt/issues/45341,saltstack_salt_issues_45341,"freebsd minion crash with latest py-cffi

FreeBSD upgraded the py-cffi port from 1.7.0 to 1.11.2 and now my minions are crashing. I don't know if this is a bug in cffi or if something changed in what salt is expecting / pushing to cffi. I manually rolled my package building machine's py-cffi port back to py-cffi 1.10.0 and now my minion works fine with 0 other changes. There is a reference to an issue on Windows minions here: https://github.com/saltstack/salt/pull/45245 with cffi, but wanted to let you know it happens elsewhere as well. ### Versions Report ","Can you please include a test case when this occurs? Is it when you are running a specific command, etc? I am having a hard time replicating this.",Sure. I paired down my top file to: 
saltstack/salt,https://github.com/saltstack/salt/issues/45559,saltstack_salt_issues_45559,"minion debug crashes on Windows

Sometime in the last few weeks the salt-minion debug mode has started to crash on Windows. I haven't had to run a debug in awhile, so I don't know exactly when it started happening, but it last worked in mid to late December. I'm using the same exact minion version and base Windows version. The service runs fine normally. I was just trying to troubleshoot a new windows package install. Windows version: Windows 10 Ent 1709 10.0.16299 N/A Build 16299 salt versions output: ","Can you provide me with this file so that I can try and replicate this? `.\salt-minion-debug.bat` Thanks, Daniel",Sure. File content:  It's default from the installer.
saltstack/salt,https://github.com/saltstack/salt/issues/45047,saltstack_salt_issues_45047,"SSH key support for Azure ARM driver

### Description of Issue/Question Seems like the Azure Arm driver does not support the SSH key authentication currently, while the ""to-be-deprecated"" Azure driver does. Any plan to add it to Azure Arm anytime soon?","What kind of authentication? for logging into servers or is it doing something else with the ssh key? Thanks, Daniel","Hi, @gtmanfred I think it's what the certificate_path is supposed to do in the ""to-be-deprecated"" Azure driver. See https://docs.saltstack.com/en/latest/topics/cloud/azure.html#configuration I think it's supposed to place an SSH public key in the VM to be created. Thanks!"
saltstack/salt,https://github.com/saltstack/salt/issues/45053,saltstack_salt_issues_45053,"There was an error destroying machines: The specified resource does not exist.

Hello, I'm encountering an issue with destroying Azure VMs. Any help would be greatly appreciated! ### Description of Issue/Question ",Could possibly be a duplicate of https://github.com/saltstack/salt/issues/41299 Which has a fix here: https://github.com/saltstack/salt/pull/41346 If you try the fix does it resolve the issue?,"Hmmm, the fix doesn't resolve my issue. I'm getting the same error."
saltstack/salt,https://github.com/saltstack/salt/issues/44426,saltstack_salt_issues_44426,"win pkg.install.  is error

hi.bro: salt version is 2017.07. minon running window.i want install software.but is error. i don't anywhere mistake.so.pls help ，thanks root@xtyw-minimal-centos6 ~]# salt-run winrepo.update_git_repos https://github.com/saltstack/salt-winrepo-ng.git: /srv/salt/base/win/repo-ng/salt-winrepo-ng https://github.com/saltstack/salt-winrepo.git: /srv/salt/win/repo/salt-winrepo [root@xtyw-minimal-centos6 ~]# salt '*' pkg.refresh_db test2-dingyi-10.33.35.244: True ljw-lx-pc-LJ-20170727GPNJ: ---------- failed: 0 success: 0 total: 0","Can you provide your master and minion configs? I tried to replicate this, but was unable to. Thanks, Daniel","sorry~bro. i find mistake，because this 'salt-run winrepo.update_git_repos' in /etc/salt/salt-master file_roots is not right, winrepo_dir_ng: '/srv/salt/base/win/repo-ng' winrepo_remotes_ng: - 'https://github.com/saltstack/salt-winrepo-ng.git' file_roots: base: - /srv/salt/base dev: - /srv/salt/dev/services - /srv/salt/dev/states prod: - /srv/salt/prod/services - /srv/salt/prod/states"
saltstack/salt,https://github.com/saltstack/salt/issues/44833,saltstack_salt_issues_44833,"python2.7 used salt-api error ,return ‘ValueError: No JSON object could be decoded’

### Description of Issue/Question hi,i find python scripts,but Get token is error,pls ValueError: No JSON object could be decoded ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) my salt version is 2017, cherrypy==3.2.3 #!/usr/bin/env python #coding=utf-8 import urllib2, urllib, json, re class saltAPI: def __init__(self): self.__url = 'https://192.168.186.134:8888 self.__user = 'saltapi' self.__password = 'password' self.__token_id = self.salt_login() def salt_login(self): params = {'eauth': 'pam', 'username': self.__user, 'password': self.__password} encode = urllib.urlencode(params) obj = urllib.unquote(encode) headers = {'X-Auth-Token':''} url = self.__url + '/login' req = urllib2.Request(url, obj, headers) opener = urllib2.urlopen(req) content = json.loads(opener.read()) try: token = content['return'][0]['token'] return token except KeyError: raise KeyError def main(): sapi = saltAPI() print sapi print self.__token_id if __name__ == '__main__': main()",Can you paste the entire stack trace for the error your running into? Also can you paste a sanitized version of you api configs?,"Thank you first，for the quest, [token.py.txt](https://github.com/saltstack/salt/files/1531589/token.py.txt) this is script and error. and posted again ,because,i not used the code format :( File “token2.py”, line 53, in main() File “token2.py”, line 44, in main sapi = saltAPI() File “token2.py”, line 11, in __init__ self.__token_id = self.salt_login() File “token2.py”, line 21, in salt_login content = json.loads(opener.read()) File “/usr/lib64/python2.7/json/__init__.py”, line 339, in loads return _default_decoder.decode(s) File “/usr/lib64/python2.7/json/decoder.py”, line 364, in decode obj, end = self.raw_decode(s, idx=_w(s, 0).end()) File “/usr/lib64/python2.7/json/decoder.py”, line 382, in raw_decode raise ValueError(“No JSON object could be decoded”) ValueError: No JSON object could be decoded"
saltstack/salt,https://github.com/saltstack/salt/issues/44867,saltstack_salt_issues_44867,"salt-api quest~

### Description of Issue/Question hi,i used python script ,post token ,but return.this,why url = 'http://10.30.3.37:8080/login' headers = {'X-Auth-Token':''} params = {'eauth': 'pam', 'username': 'admin', 'password': 'admin'} data = urllib.urlencode(params) obj = urllib.unquote(data) req = urllib2.Request(url, data,headers) response = urllib2.urlopen(req) the = response.read() print the ![1](https://user-images.githubusercontent.com/25581008/33711884-8dc54e3c-db80-11e7-8d35-af080adea5c2.jpg) ### Versions Report cherrypy==3.2.3 python version is 2.7 salt version 2017","Can you provide your salt master config file? Also, you are using the `salt-api` service to start the api? and not something else right? Thanks, Daniel","thank you ,this is my config  this is salt-api service,but i install halite and salt-api ,now,halite not runing root 9769 0.0 0.0 103264 888 pts/1 S+ 10:56 0:00 grep salt-api root 26052 0.0 0.9 351116 37500 ? S Dec07 0:02 /usr/bin/python2.7 /usr/bin/salt-api -d root 26055 1.2 1.5 3474508 59620 ? Sl Dec07 13:29 /usr/bin/python2.7 /usr/bin/salt-api -d"
saltstack/salt,https://github.com/saltstack/salt/issues/44954,saltstack_salt_issues_44954,"SDB REST Module does not work without a URI Query Parameter

### Description of Issue/Question REST SDB module cannot be used without specifying a request parameter. The documentation indicates that the SDB URI can be used without requiring any query parameters and the SDB REST configuration allows for configuration without a template variable. When attempting to retrieve the value without specifying a query parameter, the following error is given: ",Should we be allowing to use this module without the query parameters ?,Any progress on this? I'll try to submit a PR for it over the weekend
saltstack/salt,https://github.com/saltstack/salt/issues/44471,saltstack_salt_issues_44471,"salt '*' pkg.install causes KeyError: '__name__'

### Description of Issue/Question When I do `salt '*' pkg.install vim` I got 192.168.246.50: The minion function caused an exception: Traceback (most recent call last): File ""/opt/alt/python35/lib/python3.5/site-packages/salt/minion.py"", line 1470, in _thread_return return_data = executor.execute() File ""/opt/alt/python35/lib/python3.5/site-packages/salt/executors/direct_call.py"", line 28, in execute return self.func(*self.args, **self.kwargs) File ""/opt/alt/python35/lib/python3.5/site-packages/salt/modules/yumpkg.py"", line 1284, in install _available = list_repo_pkgs(*has_wildcards, byrepo=False, **kwargs) File ""/opt/alt/python35/lib/python3.5/site-packages/salt/modules/yumpkg.py"", line 792, in list_repo_pkgs repo_name for repo_name, repo_info in six.iteritems(list_repos()) File ""/opt/alt/python35/lib/python3.5/site-packages/salt/modules/yumpkg.py"", line 2466, in list_repos filerepos = _parse_repo_file(repopath)[1] File ""/opt/alt/python35/lib/python3.5/site-packages/salt/modules/yumpkg.py"", line 2726, in _parse_repo_file section_dict.pop('__name__') KeyError: '__name__' ### Setup minion setup master: 10.101.1.34 master setup interface: 10.101.1.34 ### Versions Report master version salt 2017.7.2 (Nitrogen) minion version salt 2017.7.2 (Nitrogen) I madesome debugging and found that the problem is with `section_dict.pop` function. If only I add the second argument to pop `section_dict.pop('__name__', None)`, then everything works.","Would you mind submitting a PR to fix this? Thanks, Daniel","I found it was already fixed ` 433bca14 salt/modules/yumpkg.py (Erik Johnson 2017-09-05 15:13:22 -0500 2847) section_dict.pop('__name__', None) `"
saltstack/salt,https://github.com/saltstack/salt/issues/44564,saltstack_salt_issues_44564,"Salt Mine: area of visibility for collected data

Currently all collected data can be fetched by any minion. Because of this Mine feature (and direct Peer Communication too) become unapplicable in setups with untrusted minions like multiple clients on one master or even multiple environments. For example, ansible collect and share information only between hosts of current execution and any of this hosts and only them [can get facts about other hosts](https://docs.ansible.com/ansible/latest/playbooks_variables.html#magic-variables-and-how-to-access-information-about-other-hosts). It's very convenient! With salt currently we should hardcode data into pillar instead of dynamic lookups over group of hosts :( There is [old opened task](https://github.com/saltstack/salt/issues/27156) that can explain typical situation",Why can't publish.publish be used to tie this down and only let certain commands be run? Daniel,"Because when you lock certain of commands, you doesn't lock number of hosts as arguments for this commands. Question not in commands but in virtual groups for minions Like I have 3 minions, I want share data between 1 &2 but I don't want to let 3 know about 1 and 2 at all Ansible can do it out of the box for example. With salt currently I should setup separate salt masters for first 2 minions and third one"
saltstack/salt,https://github.com/saltstack/salt/issues/44593,saltstack_salt_issues_44593,"use smtp.send_msg can not send email correctly

### Description of Issue/Question sudo salt 'iZ2ze28lyt2y9rn1zu6sxtZ' smtp.send_msg 'onmygoing@qq.com' 'this is a salt email test' profile='my-smtp-login' sudo salt 'iZ2ze28lyt2y9rn1zu6sxtZ' smtp.send_msg '***@qq.com' 'this is a salt email test' 'test' sender='****@qq.com' server='smtp.qq.com' use_ssl='True' username='****' password='****' use above two command both can not send email correctly, as i check from the log, even though i specify use_ssl=True, the code still not use smtplib.SMTP_SSL(server) but use smtplib.SMTP(server) when i specify use_ssl='true' at smtp.py of the minion, it works well, very strange that actually in the smtp.py, this paramenter default to be true ### Setup ### Steps to Reproduce Issue ### Versions Report dist: centos 7.2.1511 Core locale: UTF-8 machine: x86_64 release: 3.10.0-514.6.2.el7.x86_64 system: Linux version: CentOS Linux 7.2.1511 Core",Can you provide the output from: `salt --versions-report`?,"@garethgreenaway Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: 1.6.0 cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.9.5 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Nov 20 2015, 02:00:19) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.2.1511 Core locale: UTF-8 machine: x86_64 release: 3.10.0-514.6.2.el7.x86_64 system: Linux version: CentOS Linux 7.2.1511 Core"
saltstack/salt,https://github.com/saltstack/salt/issues/51107,saltstack_salt_issues_51107,"systemd module misses some files when checking for new unit files

### Description of Issue/Question The systemd module seems to only check for new unit files in `/etc/systemd/system`. This causes issues with new managed unit files that are placed in other valid locations for systemd. `service.running` and other related states fail to detect the new unit files and reload systemd before starting/stopping or otherwise managing services thus causing the entire state to fail. There are multiple valid paths for unit files. Personally I was using `/usr/local/lib/systemd/system/` (which seems to be ubuntu specific?) but the `systemd.unit` man page lists a bunch for both user and system modes. The three main system mode ones seem to be: - `/etc/systemd/system` - `/run/systemd/system` - `/lib/systemd/system` The relevant code seems to be in `_untracked_custom_unit_found()` in `modules/systemd.py`: https://github.com/saltstack/salt/blob/develop/salt/modules/systemd.py#L375 ### Setup ",Do you think you would be able to create a PR with a fix?,"@dwoz, I'm not familiar enough with the internals of salt to know if there's a better way to do this than just looping through a list of paths to check. If that's all there is to it, or someone can point me in the right direction, then yes I can look into making a pull request. @Poil, yes I am aware, however /etc is for custom services and for machine specific overrides. /lib is intended for software that has been installed (something often done with salt), especially if it's a package intended for installation on multiple machines. /run is for units or overrides that are only temporary until reboot, and as such neither /etc or /lib is appropriate."
saltstack/salt,https://github.com/saltstack/salt/issues/44688,saltstack_salt_issues_44688,"Multiple issues in Agentless get started tutorial

### TL;DR ### Description of Issue/Question Hello, I tried to follow the get started documentation and ran into many issues. I thought it might be useful to relay my experience to illustrate at which steps the documentation seems unclear. If this github issue is not focused or actionable enough, feel free to just close it. I'm just submitting in the hope of it being useful in case someone is working on improving the documentation. Here are the steps I followed: 1. Let's give salt a try, google ""saltstack getting started"" 2. Google directs me to https://docs.saltstack.com/en/getstarted/ 3. I just want to deploy some stuff to a single VPS, so let's try ""Agentless SaltStack"", that seems the least complicated option 4. Clicking on ""Agentless SaltStack"" took me to https://docs.saltstack.com/en/getstarted/ssh/index.html, let's follow along:  12. Hooray! Probably the main thing which should be clarified is the role of the `master` and `Saltfile` files, and which options go in which file. It is completely unclear to me why `config_dir` and `roster_file` can go in the Saltfile, but all the other paths need to be in the master file.",Does this issue cover all the issues you were running into?,"Hi @Ch3LL , yes it seems #38336 covers most of it. As long as this: Also clarifies that other values should go in the master file. (Or some other way to let readers know about both of those files when going through the ""get started"" documentation)."
saltstack/salt,https://github.com/saltstack/salt/issues/49845,saltstack_salt_issues_49845,"no merge option in match.filter_by

Hello there, I was playing around with map jinjas and I figured out that the function filter_by in the match module does not support merge option. It would be quite useful to have it available as in grains.filter_by for example. I apologize if that has been requested before or if there is a good reason for merge to be missing. Salt Version: Salt: 2018.3.2 Thanks in advance. d","Can you provide some more information about what you mean by ""merge""? Are you just wanting to merge lists or something elses?","Hello, For example I can do the following: test.yml  I get an error: `TypeError: filter_by() got an unexpected keyword argument 'merge'` This is expected as this is not implemented in the function. Thanks. D"
saltstack/salt,https://github.com/saltstack/salt/issues/52284,saltstack_salt_issues_52284,"Issue with opts.pillar_roots in runners

### Description of Issue/Question My goal is to render a pillar based of a grain on a minion. I adapted my pillar top file to use that: ",which runner are you trying to run? The runner runs on the master and doesn't run against minions.,My runner basically executes the highstate.... 
saltstack/salt,https://github.com/saltstack/salt/issues/45643,saltstack_salt_issues_45643,"Windows cmd doesn't execute as defined user

### Description of Issue/Question I am trying to execute this command to add a credential on Windows 10.  ### Steps to Reproduce Issue Apply the state from the master - output says the ""CMDKEY: Credential added successfully."" - Open the credential Manager on the user account: The credential is not there. However, if the state is applied from the machine itself, i.e. open PowerShell, call ""salt-call state.apply"" it works. Same if the salt-minion service on the machine is logged on as the current user. It doesn't seem to use the ""user"" field properly. Using Windows 10.0.16299. Also running the command ''cmdkey /list'' which lists the credentials, doesn't show the new one added, confirming it didn't work. ### Versions Report Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.4.2 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Nov 20 2017, 18:23:56) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-97-generic system: Linux version: Ubuntu 16.04 xenial",When running it from the master can you check the debug logs? it should show the exact command that its going to run. Is it the command you would expect?,The logs shows  The command is correct however I don't see any mention of the user being used to run the command.
saltstack/salt,https://github.com/saltstack/salt/issues/50245,saltstack_salt_issues_50245,"salt can't connect to the master.

On a new install of saltstack 2018.3 (from the apt repo) on debian 9, i can't run commands to the master, only salt-call works. Even salt minion_id test.ping hangs The error i get in stderror is ` ^CException SystemExit: SystemExit(u'\nExiting gracefully on Ctrl-c',) in <bound method AsyncReqMessageClient.__del__ of <salt.transport.zeromq.AsyncReqMessageClient object at 0x7f8e9c11bdd0>> ignored Exception AttributeError: ""'AsyncReqMessageClientPool' object has no attribute 'message_clients'"" in <bound method AsyncReqMessageClientPool.__del__ of <salt.transport.zeromq.AsyncReqMessageClientPool object at 0x7f8e9c11be10>> ignored argument must be an int, or have a fileno() method. ` In the master log i see `2018-10-26 12:36:56,784 [salt.utils.process:754 ][ERROR ][3493] An un-handled exception from the multiprocessing process 'MWorker-1' was caught: Traceback (most recent call last): File ""/usr/lib/python2.7/dist-packages/salt/utils/process.py"", line 747, in _run return self._original_run() File ""/usr/lib/python2.7/dist-packages/salt/master.py"", line 1092, in run self.__bind() File ""/usr/lib/python2.7/dist-packages/salt/master.py"", line 990, in __bind req_channel.post_fork(self._handle_payload, io_loop=self.io_loop) # TODO: cleaner? Maybe lazily? File ""/usr/lib/python2.7/dist-packages/salt/transport/zeromq.py"", line 630, in post_fork self.stream = zmq.eventloop.zmqstream.ZMQStream(self._socket, io_loop=self.io_loop) File ""/usr/lib/python2.7/dist-packages/zmq/eventloop/zmqstream.py"", line 114, in __init__ self._init_io_state() File ""/usr/lib/python2.7/dist-packages/zmq/eventloop/zmqstream.py"", line 535, in _init_io_state self.io_loop.add_handler(self.socket, self._handle_events, self._state) File ""/usr/local/lib/python2.7/dist-packages/tornado/ioloop.py"", line 910, in add_handler self._impl.register(fd, events | self.ERROR) TypeError: argument must be an int, or have a fileno() method. ` repeated again and again",can you see if installing `python-concurrent.futures` helps?,"I had that problem with with the fresh install, solved it by removing --no-install-recommends which installed concurrent.futures, this problem happens when i ran pip install --upgrade inside a python project. Here is the diff between working (before pip upgrade) and not working. [pip-freeze-diff.txt](https://github.com/saltstack/salt/files/2524830/pip-freeze-diff.txt)"
saltstack/salt,https://github.com/saltstack/salt/issues/45982,saltstack_salt_issues_45982,"cmd.script that has args attribute set is broken in 2017.7.3

### Description of Issue/Question There is a regression in 2017.7.3 that breaks `cmd.script` for windows host when running a powershell script that passes in arguments. I believe its caused by this commit: https://github.com/saltstack/salt/commit/8dfcf71b08e5fa68079e184740f7d1fcbafb97eb#diff-879e9c967b796ba8a6922815406a96ff ### Setup example state file:  ### Steps to Reproduce Issue 1. Create a cmd.script within your state file that uses args attribute (tested broken in windows only). 2. Run using `2017.7.2` minion and state should succeed. 2. Run using `2017.7.3` minion and state should fail. ### Versions Report PS C:\Users\Administrator> salt-call --versions-report Salt Version: Salt: 2017.7.3 Dependency Versions: cffi: 1.10.0 cherrypy: unknown dateutil: 2.6.0 docker-py: Not Installed gitdb: 2.0.3 gitpython: 2.1.3 ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: 1.6.1 M2Crypto: Not Installed Mako: 1.0.6 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (v2.7.13:a06454b1afa1, Dec 17 2016, 20:53:40) [MSC v.1500 64 bit (AMD64)] python-gnupg: 0.4.0 PyYAML: 3.11 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.3 timelib: 0.2.4 Tornado: 4.5.1 ZMQ: 4.1.6 System Versions: dist: locale: cp1252 machine: AMD64 release: 2012ServerR2 system: Windows version: 2012ServerR2 6.3.9600 Multiprocessor Free","Can you try the PR I just opened and see if this fixes your issue? Thanks, Daniel",I tried your PR fix and it solved my issue. Thanks @gtmanfred !
saltstack/salt,https://github.com/saltstack/salt/issues/45728,saltstack_salt_issues_45728,"How to deal with a minion “already deleted from tracker”?

### Description of Issue/Question _Initially asked on [SO](https://stackoverflow.com/questions/48457530/how-to-deal-with-a-minion-already-deleted-from-tracker)_ When running salt '*' test.ping -s --out json I get the following output (reduced to just a few typical cases, the ellipsis covers the same cases) Minion sent222 did not respond. No job will be sent. (...) minion sent005 was already deleted from tracker, probably a duplicate key (...) { (...) ""sent005"": true, (...) } The case of `sent222` is clear: it is not available. What should I do with `sent002`? It does answer, but also warns about being deleted from the tracker and having a duplicate key. **What does this mean?** I noticed this by chance because the regular `salt '*' test.ping` simply states that `sent005` is `True`, without any further comments on its state. ### Setup ### Steps to Reproduce Issue ### Versions Report ",What happens when you check `ps aux | grep salt-minion` on the sent002 minion?,"@gtmanfred : `ps aux | grep salt-minion` shows only one `salt-minion` process Sorry - I just realized that I said 'ports' in my comment, when I meant 'IPs'. So there is one master, but who listens on two distinct IPs. I had a look at `netstat` on the minion and I see two connections going to the master: "
saltstack/salt,https://github.com/saltstack/salt/issues/44889,saltstack_salt_issues_44889,"Salt-Cloud WinRM fails without retrying

### Description of Issue/Question When trying to create a VMWare Windows 2008 R2 minion, utils/cloud.py wait_for_winrm() fails without retrying the connection. The reason is because only the WinRMTransportError exception is caught, if any other exception occurs, the connection is not retried and it bails out with a failure:  Minion is at 2017.7.2",Can you provide some information on what the particular exceptions are that are causing the code to exit before creating the VM?,This is the exception: 
saltstack/salt,https://github.com/saltstack/salt/issues/48902,saltstack_salt_issues_48902,"SLS failing to send slack message

### Description of Issue/Question I do get the following trace error when trying to run the below state on a windows 2012 server. The state file sends a message to the slack channel. ",Can you verify that connecting using something like CURL is able to connect without issue to the URL: `https://www.slack.com/api`?,@garethgreenaway as an alternative i tried below and it works. {% set disk_name = 'C:\\' %} {% set msg = 'ATTENTION! The disk '+disk_name+' on the host '+salt.network.get_hostname()+' ('+grains.id+') is at low space!' %} {% set api_key = 'xX %} {% set chan = 'xxx' %} {% set user = 'SuperAdmin' %} cmd.powershell_all: module.run: - cmd: send-slackmessage -text '{{ msg }}' -channel '{{ chan }}' -token '{{ api_key }}' -parse full -Username '{{ user }}' - onfail: - disk: used_space But i would like to know why the slack module isn't functioning
saltstack/salt,https://github.com/saltstack/salt/issues/45082,saltstack_salt_issues_45082,"Pillar keys overwriting in the environment configuration

The same pillar keys don't overwrite if host is in other environment. ## Configuration: master: ",Can you try switching the ordering of those files and see if that affects your results?,"Changed top.sls in this way  nothing changed, the key from global-try had been overwriting as the last time. Also I tried to change order of directory viewing in `pillar_roots:` in `master` it doesn't work and it was expected because in exactly this way pillars work according to [Pillar Namespace Flattening](https://docs.saltstack.com/en/latest/topics/pillar/#pillar-dictionary-merging). In my case I'd like to have keys in `try` not overwritten from `base`. Now I have to have all hosts in `base`."
saltstack/salt,https://github.com/saltstack/salt/issues/45159,saltstack_salt_issues_45159,"nginx isn't up and running though the top file execution was successful and MASTER/MINION communication is slow (i have setup minion on vagrant) 

### Description of Issue/Question i have set up saltstack on my Mac OS. master is on mac machine and minion1 on vagrant (ubuntu/trusty64 ). i have followed the below documentation. https://docs.saltstack.com/en/latest/topics/tutorials/walkthrough_macosx.html everythings good nginx package is installed and successful. But the nginx navigation page do not load on http://192.168.33.10/ . i just see the error page. ### Setup evrything as per saltstack documentation https://docs.saltstack.com/en/latest/topics/tutorials/walkthrough_macosx.html ### Steps to Reproduce Issue sls file execution logs [DEBUG ] Sending event: tag = salt/job/20171224180909974004/ret/minion1; data = {'fun_args': [], 'jid': '20171224180909974004', 'return': {'pkg_|-nginx_|-nginx_|-installed': {'comment': 'All specified packages are already installed', 'name': 'nginx', 'start_time': '00:09:10.717731', 'result': True, 'duration': 303.752, '__run_num__': 0, '__sls__': 'bin.nginx', 'changes': {}, '__id__': 'nginx'}, 'service_|-nginx_|-nginx_|-running': {'comment': 'The service nginx is already running', 'name': 'nginx', 'start_time': '00:09:11.022010', 'result': True, 'duration': 27.112, '__run_num__': 1, '__sls__': 'bin.nginx', 'changes': {}, '__id__': 'nginx'}}, 'retcode': 0, 'success': True, 'cmd': '_return', '_stamp': '2017-12-25T00:09:11.055884', 'fun': 'state.apply', 'id': 'minion1', 'out': 'highstate'} [TRACE ] Master function call _return took 0.00152993202209 seconds ### Versions Report Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.10 (default, Feb 7 2017, 00:08:15) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.2 ZMQ: 4.2.3 System Versions: dist: locale: UTF-8 machine: x86_64 release: 16.7.0 system: Darwin version: 10.12.6 x86_64",Can you provide the output you see after running the state.apply command?,"**here is the output after execution. i guess the vagrant IP is not exposed, because of which i see the error page in my browser.** minion1: ---------- ID: nginx Function: pkg.installed Result: True Comment: All specified packages are already installed Started: 03:26:18.554056 Duration: 334.998 ms Changes: ---------- ID: nginx Function: service.running Result: True Comment: The service nginx is already running Started: 03:26:18.889829 Duration: 32.378 ms Changes: Summary for minion1 ------------ Succeeded: 2 Failed: 0 ------------ Total states run: 2 Total run time: 367.376 ms **Nginx is running in my box and i have enabled the firewall setup for both the applications Nginx HTTP and Nginx HTTPS. below are the details** vagrant@vagrant-ubuntu-trusty-64:/etc/nginx/sites-enabled$ sudo ufw status verbose Status: active Logging: on (low) Default: deny (incoming), allow (outgoing), disabled (routed) New profiles: skip To Action From -- ------ ---- 80 ALLOW IN Anywhere 443 ALLOW IN Anywhere 80 (v6) ALLOW IN Anywhere (v6) 443 (v6) ALLOW IN Anywhere (v6)"
saltstack/salt,https://github.com/saltstack/salt/issues/45214,saltstack_salt_issues_45214,"salt-api is not working. ""Authentication failure of type ""eauth"" occurred""

my salt-api conf file - - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - - rest_cherrypy: port: 8000 host: 0.0.0.0 debug: True disable_ssl: true externalauth: pam: salt: - .* - '@wheel' # to allow access to all wheel modules - '@runner' # to allow access to all runner modules - '@jobs' # to allow access to the jobs runner and/or wheel module - - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - - I have created a user called salt and set the password. Here are the logs for pam salt -a pam '*' test.ping -l trace [DEBUG ] Reading configuration from /etc/salt/master [DEBUG ] Including configuration from '/etc/salt/master.d/master.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/master.conf [DEBUG ] Including configuration from '/etc/salt/master.d/reactor.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/reactor.conf [DEBUG ] Including configuration from '/etc/salt/master.d/salt-api.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/salt-api.conf [DEBUG ] Using cached minion ID from /etc/salt/minion_id: salt-master [DEBUG ] Missing configuration file: /root/.saltrc [TRACE ] The required configuration section, 'fluent_handler', was not found the in the configuration. Not loading the fluent logging handlers module. [TRACE ] None of the required configuration sections, 'logstash_udp_handler' and 'logstash_zmq_handler', were found in the configuration. Not loading the Logstash logging handlers module. [DEBUG ] Configuration file path: /etc/salt/master [WARNING ] Insecure logging configuration detected! Sensitive data may be logged. [DEBUG ] Reading configuration from /etc/salt/master [DEBUG ] Including configuration from '/etc/salt/master.d/master.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/master.conf [DEBUG ] Including configuration from '/etc/salt/master.d/reactor.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/reactor.conf [DEBUG ] Including configuration from '/etc/salt/master.d/salt-api.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/salt-api.conf [DEBUG ] Using cached minion ID from /etc/salt/minion_id: salt-master [DEBUG ] Missing configuration file: /root/.saltrc [DEBUG ] MasterEvent PUB socket URI: /var/run/salt/master/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: /var/run/salt/master/master_event_pull.ipc [DEBUG ] LazyLoaded pam.auth username: salt password: [DEBUG ] Initializing new AsyncZeroMQReqChannel for ('/etc/salt/pki/master', 'salt-master_master', 'tcp://127.0.0.1:4506', 'clear') [TRACE ] Inserted key into loop_instance_map id 140408101590080 for key ('/etc/salt/pki/master', 'salt-master_master', 'tcp://127.0.0.1:4506', 'clear') and process 28430 [DEBUG ] Initializing new IPCClient for path: /var/run/salt/master/master_event_pub.ipc [TRACE ] IPCClient: Connecting to socket: /var/run/salt/master/master_event_pub.ipc [DEBUG ] LazyLoaded nested.output [TRACE ] data = Failed to authenticate! This is most likely because this user is not permitted to execute commands, but there is a small possibility that a disk error occurred (check disk/inode usage). Failed to authenticate! This is most likely because this user is not permitted to execute commands, but there is a small possibility that a disk error occurred (check disk/inode usage). - - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - - Versions: salt-master:/etc/salt/master.d# salt-api --version salt-api 2017.7.1 (Nitrogen) - - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - - salt-master:/etc/salt/master.d# salt --versions-report Salt Version: Salt: 2017.7.1 Dependency Versions: cffi: Not Installed cherrypy: 3.5.0 dateutil: 2.4.2 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Nov 20 2017, 18:23:56) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-1038-aws system: Linux version: Ubuntu 16.04 xenial - - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - -- - - - - - - Salt-master debug logs 2017-12-28 18:56:50,026 [salt.auth ][WARNING ][17583] Authentication failure of type ""eauth"" occurred. 2017-12-28 18:56:50,027 [salt.master ][WARNING ][17583] Authentication failure of type ""eauth"" occurred.",Where is your `salt-api` config file? These configurations should just go in `/etc/salt/master` and you will need to restart the master. Daniel,@gtmanfred Thanks for the reply. Below is my conf file in **/etc/salt/master.d/salt-api.conf** . This config is picked up and salt-api runs on port 8000  Even running just **salt -a pam '*' test.ping -l trace** is not working.
saltstack/salt,https://github.com/saltstack/salt/issues/45402,saltstack_salt_issues_45402,"nested nodegroups not available in ext_pillar

### Description of Issue/Question I'm using ext_pillar to get nodegroup data. I see any simple nodegroups but not any that contain other nodegroups. ### Setup **master.d** ",could possibly be related to https://github.com/saltstack/salt/issues/45334 or https://github.com/saltstack/salt/issues/42735 can you give the workaround's in those issues a try?,"#45334 This one does not look relevant to me. The workaround in that one was to avoid using YAML list lines. I'm not using them. However, I have tried the opposite just for fun and it still fails. #42735 This one also appears to be a YAML listing issue, which I'm not doing."
saltstack/salt,https://github.com/saltstack/salt/issues/47829,saltstack_salt_issues_47829,"network.managed error ""TypeError: decoding Unicode is not supported""

### As part of upgrade to 2018.3.0 my state to change network details fails with ""TypeError: decoding Unicode is not supported"". This is for Windows OS minion. I saw a commit that referenced Unicode, not sure if this broke or if something has to change on my side. ### Setup Ethernet0: network.managed: - ip_proto: static - dns_proto: static - dns_servers: - 10.0.0.5 - 10.0.0.6 - ip_addrs: - 10.0.0.50/24 - gateway: 10.0.0.1 ### Steps to Reproduce Issue Run above state against a Win OS minion, with appropriate subnet. This was working prior to the upgrade. XX-XX-XX: ---------- ID: Ethernet0 Function: network.managed Result: False Comment: An exception occurred in this state: Traceback (most recent call last): File ""c:\salt\bin\lib\site-packages\salt\state.py"", line 1878, in call **cdata['kwargs']) File ""c:\salt\bin\lib\site-packages\salt\loader.py"", line 1823, in wrapper return f(*args, **kwargs) File ""c:\salt\bin\lib\site-packages\salt\states\win_network.py"", line 302, in managed errors = _validate(dns_proto, dns_servers, ip_proto, ip_addrs, gateway) File ""c:\salt\bin\lib\site-packages\salt\states\win_network.py"", line 118, in _validate if not salt.utils.validate.net.ipv4_addr(x)] File ""c:\salt\bin\lib\site-packages\salt\utils\validate\net.py"", line 73, in ipv4_addr return __ip_addr(addr, socket.AF_INET) File ""c:\salt\bin\lib\site-packages\salt\utils\validate\net.py"", line 52, in __ip_addr socket.inet_pton(address_family, ip) File ""c:\salt\bin\lib\site-packages\salt\ext\win_inet_pton.py"", line 40, in inet_pton ipaddress.ip_address(six.u(ip_string)) File ""c:\salt\bin\lib\site-packages\salt\ext\six.py"", line 654, in u return unicode(s.replace(r'\\', r'\\\\'), ""unicode_escape"") TypeError: decoding Unicode is not supported Started: 23:18:31.528000 Duration: 62.0 ms Changes: ### Versions Report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 0.8.6 cherrypy: Not Installed dateutil: 1.5 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: 0.21.0 libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.21.4 Python: 2.7.5 (default, Aug 9 2016, 05:27:46) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: redhat 7.2 Maipo locale: UTF-8 machine: x86_64 release: 3.10.0-327.28.3.el7.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.2 Maipo","Can you provide the output of `salt <minionid> test.versions_report`? @dwoz and @twangboy if yall could take a look here. Thanks, Daniel","The version report for the minion (2018.3.0): XXX-X-XXX-XX-XX: Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 1.10.0 cherrypy: 10.2.1 dateutil: 2.6.1 docker-py: Not Installed gitdb: 2.0.3 gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10 libgit2: Not Installed libnacl: 1.6.1 M2Crypto: Not Installed Mako: 1.0.7 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 0.7.11.None pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.14 (v2.7.14:84471935ed, Sep 16 2017, 20:25:58) [MSC v.1 500 64 bit (AMD64)] python-gnupg: 0.4.1 PyYAML: 3.12 PyZMQ: 16.0.3 RAET: Not Installed smmap: 2.0.3 timelib: 0.2.4 Tornado: 4.5.2 ZMQ: 4.1.6 System Versions: dist: locale: cp1252 machine: AMD64 release: 2012ServerR2 system: Windows version: 2012ServerR2 6.3.9600 Multiprocessor Free"
saltstack/salt,https://github.com/saltstack/salt/issues/45460,saltstack_salt_issues_45460,"salt-ssh grains.item overwrites grain values

Hi everyone, we are dealing with a major issue whilst setting up salt-ssh in our test environment. We configured the following roster:  This is a very critical issue for us, because we can not use salt like that. Thanks and best regards!","Can you provide me any more information to replicate this issue? Thanks, Daniel","Hi Daniel, thank you for the quick answer. I would love to provide more Information, but which one could be helpful to replicate this Issue? This is my roster file:  Thanks, Mirko"
saltstack/salt,https://github.com/saltstack/salt/issues/45492,saltstack_salt_issues_45492,"python 3.6 recieve UnicodeDecodeError

### Description of Issue/Question Sorry for my poor english. I just have one question that I use pyenv and python version is 3.6.3, when I use salt minion test.ping, it raise a UnicodeDecodeError, `UnicodeDecodeError: 'utf-8' codec can't decode byte 0x82 in position 22: invalid start byte` ### Setup Just `yum install salt-master salt-api`, and use python 3.6 to `pip install salt` ### Steps to Reproduce Issue `salt minion test.ping` ### Versions Report Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: Not Installed cherrypy: 11.0.0 dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.1 mysql-python: Not Installed pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 3.6.3 (default, Dec 8 2017, 15:57:37) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.3 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.1.6 System Versions: dist: centos 7.3.1611 Core locale: UTF-8 machine: x86_64 release: 3.10.0-514.el7.x86_64 system: Linux version: CentOS Linux 7.3.1611 Core I have been blocked here for a long time... please help me.",Can you clean up your pyc files?,"Hi, thanks for your time. Let me re-describe it. 1. `yum install salt-master salt-api` 2. `pyenv virtualenv 3.6.3 saltstack` 3. `cd /etc/salt/` 4. `pyenv local saltstack` 5. `service salt-master start` Is it related to when I first install with yum tool and python version was 2.7 for Centos 7 built-in ?"
saltstack/salt,https://github.com/saltstack/salt/issues/45503,saltstack_salt_issues_45503,"State group.present fails to create a new group on Windows

### Description of Issue/Question Asserting a group under Windows fails if the group does not exist. Manually altering `salt\states\group.py:249` directly to only pass 1 argument then causes the state to apply and the group to be created. ### Setup Install a salt-minion on Windows and authorise key as usual. top.sls: ",Should be resolved by https://github.com/saltstack/salt/pull/44080 can you give that a try?,"Just to let you know I haven't forgotten about this, I have the updated files but haven't yet put them on a machine to test. I hope to do so and close this some time this week."
saltstack/salt,https://github.com/saltstack/salt/issues/45510,saltstack_salt_issues_45510,"all service.running fails

### Description of Issue/Question This _may_ be due to running both the salt-master and salt-minion on the same machine, but I'm not sure. I wrote some basic salt states that install a package and check the service running for firewalld, fail2ban, and crond. However, they all fail on the service running portion with ""Comment: The named service <name> is not available"". I can run systemctl with <name> and all names exist and work as expected. I also tried changing each to <name>.service, but it fails with the exact same error. If I put a garbage name in like, ""laljkdlajf"" it will error with ""Comment: The named service laljkdlajf is not available"" so it seems as though when running the salt state the name string is not found. ### Setup I have written and created three separate salt states. firewalld.sls ",Can you verify if the `service` execution module works for managing services outside of the state files?,It works as it should and forwards to systemd. 
saltstack/salt,https://github.com/saltstack/salt/issues/47096,saltstack_salt_issues_47096,"salt-cloud can't serialize azure.mgmt.compute.models.virtual_hard_disk.VirtualHardDisk object

### Description of Issue/Question When I try to run salt-cloud -p to provision a VM using driver ""azurearm"", I run into the following error message: TypeError: can't serialize <azure.mgmt.compute.models.virtual_hard_disk.VirtualHardDisk object at 0x7f7cf254b690> Trace: [DEBUG ] MasterEvent PUB socket URI: /var/run/salt/master/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: /var/run/salt/master/master_event_pull.ipc [DEBUG ] Initializing new IPCClient for path: /var/run/salt/master/master_event_pull.ipc [ERROR ] There was a profile error: can't serialize <azure.mgmt.compute.models.virtual_hard_disk.VirtualHardDisk object at 0x7f7cf254b690> Traceback (most recent call last): File ""/usr/lib/python2.7/dist-packages/salt/cloud/cli.py"", line 281, in run self.config.get('names') File ""/usr/lib/python2.7/dist-packages/salt/cloud/__init__.py"", line 1454, in run_profile ret[name] = self.create(vm_) File ""/usr/lib/python2.7/dist-packages/salt/cloud/__init__.py"", line 1284, in create output = self.clouds[func](vm_) File ""/usr/lib/python2.7/dist-packages/salt/cloud/clouds/azurearm.py"", line 1305, in create ret = __utils__['cloud.bootstrap'](vm_, __opts__) File ""/usr/lib/python2.7/dist-packages/salt/utils/cloud.py"", line 553, in bootstrap transport=opts.get('transport', 'zeromq') File ""/usr/lib/python2.7/dist-packages/salt/utils/cloud.py"", line 1786, in fire_event event.fire_event(args, tag) File ""/usr/lib/python2.7/dist-packages/salt/utils/event.py"", line 718, in fire_event dump_data = self.serial.dumps(data) File ""/usr/lib/python2.7/dist-packages/salt/payload.py"", line 213, in dumps return msgpack.dumps(msg, default=ext_type_encoder, use_bin_type=use_bin_type) File ""/usr/lib/python2.7/dist-packages/msgpack/__init__.py"", line 47, in packb return Packer(**kwargs).pack(o) File ""msgpack/_packer.pyx"", line 223, in msgpack._packer.Packer.pack (msgpack/_packer.cpp:223) File ""msgpack/_packer.pyx"", line 225, in msgpack._packer.Packer.pack (msgpack/_packer.cpp:225) File ""msgpack/_packer.pyx"", line 184, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:184) File ""msgpack/_packer.pyx"", line 184, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:184) File ""msgpack/_packer.pyx"", line 184, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:184) File ""msgpack/_packer.pyx"", line 213, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:213) File ""msgpack/_packer.pyx"", line 184, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:184) File ""msgpack/_packer.pyx"", line 220, in msgpack._packer.Packer._pack (msgpack/_packer.cpp:220) TypeError: can't serialize <azure.mgmt.compute.models.virtual_hard_disk.VirtualHardDisk object at 0x7f7cf254b690> ### Setup Salt-Cloud 2018.3.0 on Ubuntu 16.04 ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 1.11.2 cherrypy: Not Installed dateutil: 2.6.1 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Dec 4 2017, 14:50:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-119-generic system: Linux version: Ubuntu 16.04 xenial ----------------------------- pip freeze azure==2.0.0rc6 azure-batch==1.0.0 azure-batch-extensions==1.0.1 azure-cli==2.0.23 azure-cli-acr==2.0.17 azure-cli-acs==2.0.22 azure-cli-advisor==0.1.0 azure-cli-appservice==0.1.22 azure-cli-backup==1.0.3 azure-cli-batch==3.1.7 azure-cli-batchai==0.1.3 azure-cli-billing==0.1.6 azure-cli-cdn==0.0.10 azure-cli-cloud==2.0.10 azure-cli-cognitiveservices==0.1.9 azure-cli-command-modules-nspkg==2.0.1 azure-cli-configure==2.0.12 azure-cli-consumption==0.2.0 azure-cli-container==0.1.15 azure-cli-core==2.0.23 azure-cli-cosmosdb==0.1.15 azure-cli-dla==0.0.15 azure-cli-dls==0.0.18 azure-cli-eventgrid==0.1.5 azure-cli-extension==0.0.6 azure-cli-feedback==2.0.6 azure-cli-find==0.2.7 azure-cli-interactive==0.3.11 azure-cli-iot==0.1.15 azure-cli-keyvault==2.0.15 azure-cli-lab==0.0.13 azure-cli-monitor==0.0.13 azure-cli-network==2.0.19 azure-cli-nspkg==3.0.1 azure-cli-profile==2.0.16 azure-cli-rdbms==0.0.9 azure-cli-redis==0.2.10 azure-cli-reservations==0.1.0 azure-cli-resource==2.0.19 azure-cli-role==2.0.15 azure-cli-servicefabric==0.0.7 azure-cli-sql==2.0.17 azure-cli-storage==2.0.21 azure-cli-vm==2.0.20 azure-common==1.1.4 azure-datalake-store==0.0.17 azure-graphrbac==0.31.0 azure-keyvault==0.3.7 azure-mgmt==0.30.0rc6 azure-mgmt-advisor==0.1.0 azure-mgmt-authorization==0.30.0 azure-mgmt-batch==1.0.0 azure-mgmt-batchai==0.2.0 azure-mgmt-billing==0.1.0 azure-mgmt-cdn==0.30.2 azure-mgmt-cognitiveservices==1.0.0 azure-mgmt-compute==0.33.0 azure-mgmt-consumption==1.0.0 azure-mgmt-containerinstance==0.2.0 azure-mgmt-containerregistry==1.0.1 azure-mgmt-containerservice==3.0.0 azure-mgmt-cosmosdb==0.2.1 azure-mgmt-datalake-analytics==0.2.0 azure-mgmt-datalake-nspkg==2.0.0 azure-mgmt-datalake-store==0.2.0 azure-mgmt-devtestlabs==2.0.0 azure-mgmt-dns==1.2.0 azure-mgmt-documentdb==0.1.3 azure-mgmt-eventgrid==0.2.0 azure-mgmt-iothub==0.4.0 azure-mgmt-keyvault==0.30.0rc6 azure-mgmt-logic==1.0.0 azure-mgmt-monitor==0.4.0 azure-mgmt-msi==0.1.0 azure-mgmt-network==0.30.0rc6 azure-mgmt-nspkg==2.0.0 azure-mgmt-rdbms==0.1.0 azure-mgmt-recoveryservices==0.1.0 azure-mgmt-recoveryservicesbackup==0.1.1 azure-mgmt-redis==1.0.0 azure-mgmt-reservations==0.1.0 azure-mgmt-resource==0.30.0 azure-mgmt-scheduler==1.0.0 azure-mgmt-servicefabric==0.1.0 azure-mgmt-sql==0.8.4 azure-mgmt-storage==0.30.0rc6 azure-mgmt-trafficmanager==0.40.0 azure-mgmt-web==0.34.1 azure-multiapi-storage==0.1.7 azure-nspkg==2.0.0 azure-servicebus==0.20.3 azure-servicefabric==5.6.130 azure-servicemanagement-legacy==0.20.4 azure-storage==0.32.0 msrestazure==0.4.21",Can you share a sanitized version of your cloud profile?,"@Ch3LL Megan, here it is: azure-es-node: provider: azurearm master: host.domain.tld image: Canonical|UbuntuServer|16.04-LTS|latest size: Standard_B4ms location: westeurope network: VNET-xxx subnet: VNET-xxx-Subnet1 storage_account: xxx742 storage_key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx ssh_username: xxxxxxxxxxxxxxx ssh_publickeyfile: /etc/salt/cloud.profiles.d/xxxxx ssh_password: xxxxxxxxxxxx public_ip: False volumes: - {disk_size_gb: 60, name: 'Node-4-datadisk1', caching: 'ReadWrite' } cleanup_disks: True cleanup_vhds: True cleanup_data_disks: True cleanup_interfaces: True"
saltstack/salt,https://github.com/saltstack/salt/issues/52285,saltstack_salt_issues_52285,"raid.present fails before RAID is created

### Description of Issue/Question When bootstrapping a fresh VM, the first runs fails after upgrading to 2019 version, because mdadm returns ""No md superblock detected"" with return code 1. That let the state fail. After another ""state.apply"" all states are ok. I think the raid.present module should ignore the return code. ",Do you happen to know what version it was previously working on?,"Not exactly, it was a 2018 release. Maybe mdadm changed its behavior"
saltstack/salt,https://github.com/saltstack/salt/issues/45550,saltstack_salt_issues_45550,"Importing 'unicode_literals' in utils/aws.py causes unicode error during s3.get module execution

When `unicode_literals` was imported from `__futures__` in `utils/aws.py`, it caused the s3 module to break. ### Setup None ### Steps to Reproduce Issue Command to run: `salt '*' s3.get` Leads to the following stacktrace:  ### Versions Report Salt Version: Salt: 2018.2.0-77-gbb94a21 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.1 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.6 (default, Oct 26 2016, 20:30:19) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.3 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.1.6 System Versions: dist: Ubuntu 14.04 trusty locale: UTF-8 machine: x86_64 release: 4.4.0-66-generic system: Linux version: Ubuntu 14.04 trusty","Can you provide the full stack trace? it looks like the end of it with the actual error that was thrown has been chopped off. Thanks, Daniel",Unfortunately that was all that was available in my `minion` log. I can dig a little more to try to get the full stack trace when I get some time.
saltstack/salt,https://github.com/saltstack/salt/issues/45623,saltstack_salt_issues_45623,"Salt reported what packages failed to install, but installation successfull

### Description of Issue/Question I have a custom created repository, and receive an error when trying to install packages through pkg.installed or pkg.latest on Debian and RedHat. ### Setup  ### Versions Report Salt Version: Salt: 2016.11.8 Dependency Versions: cffi: Not Installed cherrypy: unknown dateutil: 1.5 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, May 3 2017, 07:55:04) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: redhat 7.4 Maipo machine: x86_64 release: 3.10.0-693.5.2.el7.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.4 Maipo",Can you check the output of the Salt module `pkg.list_pkgs` and see if your custom packages are listed as installed?,"Hello. Yes, but something wrong with package version: "
saltstack/salt,https://github.com/saltstack/salt/issues/45682,saltstack_salt_issues_45682,"state.low: KeyError: '__id__'

### Description of Issue/Question `state.low` expects an explicit `__id__`. ### Setup CentOS 7; salt installed with bootstrap script. ### Steps to Reproduce Issue The [documentation](https://docs.saltstack.com/en/develop/ref/modules/all/salt.modules.state.html#salt.modules.state.low) of `state.low` suggests the following should work: ","Would you mind submitting a pr to fix this issue? Thanks, Daniel","Sure thing. However how should it be handled? Just ignore it and as such restore previous behaviour but effectively revert the intention of #26780, or generate a meaningful `__id__` based on the data available?"
saltstack/salt,https://github.com/saltstack/salt/issues/45776,saltstack_salt_issues_45776,"pkg.installed rpm command not found

### Description of Issue/Question I am using the official postfix formula which privatized for Centos 6/7 and Debian 7/8. Formula can successfully applied to dozens of servers. But i got the ""command not found"" error on one of the CentOS 7 [7.3.1611 (Core)] ### Setup Used the official postfix formula with some personal adjustment: https://github.com/saltstack-formulas/postfix-formula  **Minion Version** `salt-minion 2017.7.2 (Nitrogen)`","Can you try running `salt test_centos_7 cmd.which rpm` and provide the return? Thanks, Daniel","Hi @gtmanfred Output of the ""which rpm"" command is below.  I have another Centos 7 servers and formula can be applied them successfully. I have not any idea why having trouble with this server."
saltstack/salt,https://github.com/saltstack/salt/issues/45783,saltstack_salt_issues_45783,"UnicodeEncodeError whilst trying to run a subprocess

### Description of Issue/Question Salt states that start a subprocess fail on a UnicodeEncodeError. This affects many kinds of salt states. ID: clean_tmp Function: cron.present Name: find /tmp -name test.tmp -delete Result: False Comment: An exception occurred in this state: Traceback (most recent call last): File ""/usr/lib/python2.7/dist-packages/salt/state.py"", line 1843, in call **cdata['kwargs']) File ""/usr/lib/python2.7/dist-packages/salt/loader.py"", line 1795, in wrapper return f(*args, **kwargs) File ""/usr/lib/python2.7/dist-packages/salt/states/cron.py"", line 349, in present identifier=identifier) File ""/usr/lib/python2.7/dist-packages/salt/modules/cron.py"", line 461, in set_job lst = list_tab(user) File ""/usr/lib/python2.7/dist-packages/salt/modules/cron.py"", line 293, in list_tab data = raw_cron(user) File ""/usr/lib/python2.7/dist-packages/salt/modules/cron.py"", line 270, in raw_cron python_shell=False)).splitlines(True) File ""/usr/lib/python2.7/dist-packages/salt/modules/cmdmod.py"", line 1318, in run_stdout **kwargs) File ""/usr/lib/python2.7/dist-packages/salt/modules/cmdmod.py"", line 547, in _run proc = salt.utils.timed_subprocess.TimedProc(cmd, **kwargs) File ""/usr/lib/python2.7/dist-packages/salt/utils/timed_subprocess.py"", line 42, in __init__ self.process = subprocess.Popen(args, **kwargs) File ""/usr/lib/python2.7/subprocess.py"", line 711, in __init__ errread, errwrite) File ""/usr/lib/python2.7/subprocess.py"", line 1343, in _execute_child raise child_exception UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-32: ordinal not in range(128) Started: 17:41:19.429815 Duration: 106.483 ms Changes: ### Setup cron.present triggers this bug, as do many other states that create a subprocess. ### Steps to Reproduce Issue Use salt version 2017.7.2 on ubuntu 16.04.3 LTS to install a cron job. ### Versions Report Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: 1.5.2 cherrypy: 3.5.0 dateutil: 2.4.2 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: 0.24.0 libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.24.0 Python: 2.7.12 (default, Nov 20 2017, 18:23:56) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-96-generic system: Linux version: Ubuntu 16.04 xenial","Would you mind submitting this as a PR to the 2017.7 branch? https://docs.saltstack.com/en/latest/topics/development/contributing.html Thanks, Daniel",The PR is at https://github.com/saltstack/salt/pull/45793
saltstack/salt,https://github.com/saltstack/salt/issues/45857,saltstack_salt_issues_45857,"configure master_job_cache: mysql, concurrent requests saltstack http api, but sometimes appear 401

I user requests and threading to request the salt-api, but sometimes return the like this: HTTPSConnectionPool(host='dev.salt.biz.sogou', port=9000): Max retries exceeded with url: / (Caused by NewConnectionError('<urllib3.connection.VerifiedHTTPSConnection object at 0x0000000015F6A438>: Failed to establish a new connection: [Errno 10060] ',)); after that, I request again, return me 401; it means token expired","Can you provide me with your configs, and the steps to replicate this issue? Also, what version of salt are you running? `salt --versions-report` Thanks, Daniel",The salt master config:  The above are all config Thanks Charles
saltstack/salt,https://github.com/saltstack/salt/issues/45868,saltstack_salt_issues_45868,"LGPO No longer working

After upgrading to 2017.7.3 on both master and minion, running salt ""*MACHINENAME"" lgpo.get machine return_full_policy_names=True brings back an error, on 2017.7.2 this was working ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue On salt master just run salt ""*MACHINENAME"" lgpo.get machine return_full_policy_names=True The minion function caused an exception: Traceback (most recent call last): File ""c:\salt\bin\lib\site-packages\salt\minion.py"", line 1493, in _thread_return return_data = executor.execute() File ""c:\salt\bin\lib\site-packages\salt\executors\direct_call.py"", line 28, in execute return self.func(*self.args, **self.kwargs) File ""c:\salt\bin\lib\site-packages\salt\modules\win_lgpo.py"", line 5050, in get log.debug('Value {0} found for reg policy {1}'.format(class_vals[policy_name], policy_name)) UnicodeDecodeError: 'ascii' codec can't decode byte 0x80 in position 0: ordinal not in range(128) ### Versions Report Salt Minion C:\salt>salt-minion --versions-report Salt Version: Salt: 2017.7.3 Dependency Versions: cffi: 1.10.0 cherrypy: unknown dateutil: 2.6.0 docker-py: Not Installed gitdb: 2.0.3 gitpython: 2.1.3 ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: 1.6.1 M2Crypto: Not Installed Mako: 1.0.6 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (v2.7.13:a06454b1afa1, Dec 17 2016, 20:42:59) [MSC v.1500 32 bit (Intel)] python-gnupg: 0.4.0 PyYAML: 3.11 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.3 timelib: 0.2.4 Tornado: 4.5.1 ZMQ: 4.1.6 System Versions: dist: locale: cp1252 machine: AMD64 release: 10 system: Windows version: 10 10.0.15063 Multiprocessor Free C:\salt> Salt Master Salt Version: Salt: 2017.7.3 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Aug 4 2017, 00:39:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.4.1708 Core locale: UTF-8 machine: x86_64 release: 3.10.0-693.17.1.el7.x86_64 system: Linux version: CentOS Linux 7.4.1708 Core",What Language is the Windows Install? This may also be #42278 `salt logging with plain str (ascii) with unicode chars causes UnicodeDecodeError PY2`,"@damon-atkins the above command should check all Group Policy settings and return anything that is configured, the machines being checked are all English (U.S.)"
saltstack/salt,https://github.com/saltstack/salt/issues/45964,saltstack_salt_issues_45964,"macOS Timezone Set Using Network Time no longer applies configuration

Just upgraded to macOS 10.13.3 from 10.12.6 and also upgraded Salt Minion to 2017.7.3, when running `salt 'MACHINENAME' timezone.set_using_network_time True` This returns `MACHINENAME: False` I have tested against other machines running macOS 10.12.6 and minion 2017.7.2, and macOS 10.13.3 and 2017.7.2 minion, these all return ""True"" ### Versions Report Salt Minion Salt Version: Salt: 2017.7.3 Dependency Versions: cffi: 1.10.0 cherrypy: unknown dateutil: 2.6.1 docker-py: Not Installed gitdb: 2.0.3 gitpython: 2.1.1 ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.7 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (default, Jan 29 2018, 15:44:37) python-gnupg: 0.4.1 PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.3 timelib: 0.2.4 Tornado: 4.5.1 ZMQ: 4.1.6 System Versions: dist: locale: UTF-8 machine: x86_64 release: 17.4.0 system: Darwin version: 10.13.3 x86_64 Salt Master Salt Version: Salt: 2017.7.3 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Aug 4 2017, 00:39:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.4.1708 Core locale: UTF-8 machine: x86_64 release: 3.10.0-693.17.1.el7.x86_64 system: Linux version: CentOS Linux 7.4.1708 Core","Can you provide the output of running  On the minion? Thanks, Daniel","This looks to be working today, will close issue, continue to test more and log a new issue if I see a pattern emerging, could be something with reboots of the machine after Salt Minion is upgraded"
saltstack/salt,https://github.com/saltstack/salt/issues/46010,saltstack_salt_issues_46010,"http.wait_for_successful_query gives status:503 error though curl output is 200

### Description of Issue/Question http.wait_for_successful_query gives status:503 error . Though URL response is 200 using curl command. **ac-query-http-url: http.wait_for_successful_query: - name: 'http://localhost:{{ salt['pillar.get']('ac-tomcat:connector:port') }}/appControl/v1/types' - status: 200 - wait_for: 30** ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) On Salt master and minion on Centos7. ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) salt --versions-report Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: Not Installed cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Aug 4 2017, 00:39:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.4.1708 Core locale: UTF-8 machine: x86_64 release: 3.10.0-693.11.1.el7.x86_64 system: Linux version: CentOS Linux 7.4.1708 Core",Can you please paste any related sanitized debug logs when this occurs?,I do not have any specific log. Which log can I provide ? When I replace http://localhost with http://10.x.x.x it is working fine. When I test with curl command both http://localhost and http://10.x.x.x. works fine. Does http.wait_for_successful_query hard coded for listen http code on specific network interface ( eth0 )?
saltstack/salt,https://github.com/saltstack/salt/issues/49359,saltstack_salt_issues_49359,"salt-cloud does not maintain state

### Description of Issue/Question salt-cloud does not maintain state. Is it possible to maintain state for salt-cloud deployment without write custom modules . ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) salt states , salt-cloud for Vmware ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) Generic question for supporting states in salt cloud ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) 2017.7.7","What do you mean by ""maintain state""? Do you want to update the cloud servers after they have been built?",yes similar to Terraform .
saltstack/salt,https://github.com/saltstack/salt/issues/46113,saltstack_salt_issues_46113,"""Names"" declaration Warning in ""file.absent""

### Description of Issue/Question Hi, i have a Warning when i use the ""Names"" declaration in ""file.absent"" ### Setup and Issue ","Can you try clearing out any old .pyc files and also make sure no old minion processes are running? Thanks, Daniel","Hi, I tried from local execution and I don't have the issue, but if a run it from the master the warning is present. for information I removed all pyc on the master and I restarted the master (I have the same version on the master ""salt 2017.7.0 (Nitrogen)"" form the debian package version (salt's repo) "
saltstack/salt,https://github.com/saltstack/salt/issues/54028,saltstack_salt_issues_54028,"supervisord module does not acount for non-zero return codes introduced in Supervisor 4.0

Supervisor-4.0 has introduced non-zero return codes to communicate the status of processes. See [this issue on supervisor page for more info](https://github.com/Supervisor/supervisor/issues/1223). As per new policy, `supervisorctl` commands can return non-zero return codes to communicate the status of underlying processes. E.g. `3` is used if a process is not running. Salt's supervisor module/state depend on return of `0` code. Our current `supervisord.running` states are all showing unexpected behaviour when used with supervisor-4.x. The states attempts to add and start the process on each run (even if the process is already running) and thus is marked as ""CHANGED"". I experimented with passing `ignore_retocde` and `success_retcodes` to the `cmd.run_all` in `supervisord` module and it looks like passing `success_retcodes=range(256)` does fix the problem. There is an open feature request #50566 which asks for something similar. ### Setup Install any version of salt and supervisor 4.0 (latest is 4.0.4) ### Steps to Reproduce Issue Ensure atleast one process is in the `STOPPED` state before running this test. ",Can you explain how this one might be different?,"@garethgreenaway This is similar to linked issue but that issue talks about checking the return code (and possibly modifying code paths for different return codes). As seen in supervisor discussion page, return codes have a lot of interchangeable meanings (process STOPPED or FATAL both return 3). Since salt already uses textual parsing to deduce state of individual processes from the output, IMO it would be better to disregard the return codes altogether."
saltstack/salt,https://github.com/saltstack/salt/issues/46138,saltstack_salt_issues_46138,"Vault stooped working for MasterLess in version 2017.7.3 

### Description After upgrade salt-minion to version 2017.7.3, there is problem with generation the token for Vault. What is important SALT is working in **MasterLess** mode, after downgrading to version 2017.7.2 everything working normally. #### version 2017.7.2 ",can you see if this fixes it for you ? https://github.com/saltstack/salt/pull/45981,"Hi @Ch3LL, Thank You for respond. I changed the configuration according with your suggestion, but unfortunately I have the same error message on version **2017.7.3** #### Config "
saltstack/salt,https://github.com/saltstack/salt/issues/47790,saltstack_salt_issues_47790,"Unable to start a minion

### Description of Issue/Question I am not able to start a minion on a VM. ### Setup root@bg-net-salt-proxy-prd-01:/etc/salt/pki# salt-minion -l debug [DEBUG ] Reading configuration from /etc/salt/minion [DEBUG ] Including configuration from '/etc/salt/minion.d/99-master-address.conf' [DEBUG ] Reading configuration from /etc/salt/minion.d/99-master-address.conf [DEBUG ] Including configuration from '/etc/salt/minion.d/_schedule.conf' [DEBUG ] Reading configuration from /etc/salt/minion.d/_schedule.conf [DEBUG ] Using cached minion ID from /etc/salt/minion_id: *********************** [DEBUG ] Configuration file path: /etc/salt/minion [WARNING ] Insecure logging configuration detected! Sensitive data may be logged. [INFO ] Setting up the Salt Minion ""*******************"" [DEBUG ] Marking 'base64_encode' as a jinja filter [DEBUG ] Marking 'base64_decode' as a jinja filter [DEBUG ] Marking 'md5' as a jinja filter [DEBUG ] Marking 'sha256' as a jinja filter [DEBUG ] Marking 'sha512' as a jinja filter [DEBUG ] Marking 'hmac' as a jinja filter [DEBUG ] Marking 'random_hash' as a jinja filter [DEBUG ] Marking 'rand_str' as a jinja filter [DEBUG ] Marking 'file_hashsum' as a jinja filter [DEBUG ] Marking 'http_query' as a jinja filter [DEBUG ] Marking 'yaml_dquote' as a jinja filter [DEBUG ] Marking 'yaml_squote' as a jinja filter [DEBUG ] Marking 'yaml_encode' as a jinja filter [DEBUG ] Marking 'raise' as a jinja global [DEBUG ] Marking 'match' as a jinja test [DEBUG ] Marking 'equalto' as a jinja test [DEBUG ] Marking 'skip' as a jinja filter [DEBUG ] Marking 'sequence' as a jinja filter [DEBUG ] Marking 'to_bool' as a jinja filter [DEBUG ] Marking 'quote' as a jinja filter [DEBUG ] Marking 'regex_escape' as a jinja filter [DEBUG ] Marking 'regex_search' as a jinja filter [DEBUG ] Marking 'regex_match' as a jinja filter [DEBUG ] Marking 'regex_replace' as a jinja filter [DEBUG ] Marking 'uuid' as a jinja filter [DEBUG ] Marking 'unique' as a jinja filter [DEBUG ] Marking 'min' as a jinja filter [DEBUG ] Marking 'max' as a jinja filter [DEBUG ] Marking 'avg' as a jinja filter [DEBUG ] Marking 'union' as a jinja filter [DEBUG ] Marking 'intersect' as a jinja filter [DEBUG ] Marking 'difference' as a jinja filter [DEBUG ] Marking 'symmetric_difference' as a jinja filter [DEBUG ] Created pidfile: /var/run/salt-minion.pid [INFO ] Starting up the Salt Minion [DEBUG ] AsyncEventPublisher PUB socket URI: /var/run/salt/minion/minion_event_15ac4d469c_pub.ipc [DEBUG ] AsyncEventPublisher PULL socket URI: /var/run/salt/minion/minion_event_15ac4d469c_pull.ipc [INFO ] Starting pull socket on /var/run/salt/minion/minion_event_15ac4d469c_pull.ipc [DEBUG ] SaltEvent PUB socket URI: /var/run/salt/minion/minion_event_15ac4d469c_pub.ipc [DEBUG ] SaltEvent PULL socket URI: /var/run/salt/minion/minion_event_15ac4d469c_pull.ipc [DEBUG ] Initializing new IPCClient for path: /var/run/salt/minion/minion_event_15ac4d469c_pub.ipc [DEBUG ] Grains refresh requested. Refreshing grains. [DEBUG ] Reading configuration from /etc/salt/minion [DEBUG ] Including configuration from '/etc/salt/minion.d/99-master-address.conf' [DEBUG ] Reading configuration from /etc/salt/minion.d/99-master-address.conf [DEBUG ] Including configuration from '/etc/salt/minion.d/_schedule.conf' [DEBUG ] Reading configuration from /etc/salt/minion.d/_schedule.conf Process Process-1: Traceback (most recent call last): File ""/usr/lib/python2.7/multiprocessing/process.py"", line 258, in _bootstrap self.run() File ""/usr/lib/python2.7/multiprocessing/process.py"", line 114, in run self._target(*self._args, **self._kwargs) File ""/usr/lib/python2.7/dist-packages/salt/scripts.py"", line 144, in minion_process minion.start() File ""/usr/lib/python2.7/dist-packages/salt/cli/daemons.py"", line 348, in start self.minion.tune_in() File ""/usr/lib/python2.7/dist-packages/salt/minion.py"", line 1023, in tune_in self._spawn_minions() File ""/usr/lib/python2.7/dist-packages/salt/minion.py"", line 972, in _spawn_minions jid_queue=self.jid_queue, File ""/usr/lib/python2.7/dist-packages/salt/minion.py"", line 953, in _create_minion_object jid_queue=jid_queue) File ""/usr/lib/python2.7/dist-packages/salt/minion.py"", line 1093, in __init__ self.opts['grains'] = salt.loader.grains(opts) File ""/usr/lib/python2.7/dist-packages/salt/loader.py"", line 733, in grains ret = funcs[key]() File ""/usr/lib/python2.7/dist-packages/salt/grains/core.py"", line 1860, in hostname __FQDN__ = salt.utils.network.get_fqhostname() File ""/usr/lib/python2.7/dist-packages/salt/utils/network.py"", line 203, in get_fqhostname socket.SOL_TCP, socket.AI_CANONNAME error: [Errno 11] Resource temporarily unavailable ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 1.11.5 cherrypy: Not Installed dateutil: 2.4.2 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Dec 4 2017, 14:50:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-116-generic system: Linux version: Ubuntu 16.04 xenial",Can you share a sanitized version of your minion config? Or any other information to attempt to replicate this.,"Its just a vanila installation, I haven't made any changes except for the master name in the minion config. Does this error point to any environment specific issue: File ""/usr/lib/python2.7/dist-packages/salt/grains/core.py"", line 1860, in hostname __FQDN__ = salt.utils.network.get_fqhostname() File ""/usr/lib/python2.7/dist-packages/salt/utils/network.py"", line 203, in get_fqhostname socket.SOL_TCP, socket.AI_CANONNAME error: [Errno 11] Resource temporarily unavailable I have a lot of VMs with Salt masters and minions. But I am facing this issue only on 2 of my VMs. On Wed, May 23, 2018 at 9:07 PM, Megan Wilhite <notifications@github.com> wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/46940,saltstack_salt_issues_46940,"Verbosity flag for djangomod's collectstatic

### Description of Issue/Question I'd like to add a verbosity option so in my state result collectstatic doesn't print out so much information unless it failed. ### Setup  I'm willing to put together a PR which lets you add `--verbosity 0` as specified in this django doc: https://docs.djangoproject.com/en/1.7/ref/contrib/staticfiles/ I linked to the old version of django (1.7) to show how this has been around and should be supported for many versions of django. Although it doesn't say on that page you can use `verbosity` with `./manage.py collectstatic`, I have tested it and it works.",Do those options fulfill your use case?,While it would solve the problem it would hide all the other output. If I could make just a single state terse that would solve my problem. In the documentation does exclude work like that? I can’t tell if it excludes the whole state or not.
saltstack/salt,https://github.com/saltstack/salt/issues/46199,saltstack_salt_issues_46199,"iptables module: Append/Insert doesn't save

### Description of Issue/Question When running the IPTables state module, despite putting ""save: True"" in, after rebooting, the IPTables settings do not stay when running ""iptables -L"". ### Setup ip_drop_input: iptables.set_policy: - chain: INPUT - policy: DROP - save: True ip_drop_output: iptables.set_policy: - chain: OUTPUT - policy: DROP - save: True ip_drop_forward: iptables.set_policy: - chain: FORWARD - policy: DROP - save: True ip_acc_lo_input: iptables.append: - chain: INPUT - jump: ACCEPT - in-interface: lo - save: True ip_acc_lo_output: iptables.append: - chain: OUTPUT - jump: ACCEPT - out-interface: lo - save: True ip_drop_lo_input: iptables.append: - chain: INPUT - jump: DROP - source: ""127.0.0.0/8"" - save: True ip_acc_tcp_output: iptables.append: - chain: OUTPUT - jump: ACCEPT - proto: tcp - match: state - connstate: NEW,ESTABLISHED - save: True ip_acc_udp_output: iptables.append: - chain: OUTPUT - jump: ACCEPT - proto: udp - match: state - connstate: NEW,ESTABLISHED - save: True ip_acc_icmp_output: iptables.append: - chain: OUTPUT - jump: ACCEPT - proto: icmp - match: state - connstate: NEW,ESTABLISHED - save: True ip_acc_tcp_input: iptables.append: - chain: INPUT - jump: ACCEPT - proto: tcp - match: state - connstate: ESTABLISHED - save: True ip_acc_udp_input: iptables.append: - chain: INPUT - jump: ACCEPT - proto: udp - match: state - connstate: ESTABLISHED - save: True ip_acc_icmp_input: iptables.append: - chain: INPUT - jump: ACCEPT - proto: icmp - match: state - connstate: ESTABLISHED - save: True ### Steps to Reproduce Issue Run SLS. Reboot the minion. Run ""iptables -L"". ### Versions Report Salt Version: Salt: 2017.7.3 Dependency Versions: cffi: 1.5.2 cherrypy: Not Installed dateutil: 2.4.2 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: 0.26.0 libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.26.3 Python: 2.7.12 (default, Dec 4 2017, 14:50:18) python-gnupg: 2.2.0 PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-109-generic system: Linux version: Ubuntu 16.04 xenial",Do you have the `iptables-persistent` package installed? This is required for Ubuntu to load saved iptables rules. Daniel,"No I didn't; looks like that helped. Is this something that could be included within the documentation, in case someone else comes across this as being an issue?"
saltstack/salt,https://github.com/saltstack/salt/issues/46388,saltstack_salt_issues_46388,"IPv4 & v6 network configuration on Debian

### Description of Issue/Question Unable to create working network configuration for DHCP IPv4 and static IPv6. Instruction ""iface eth0 inet dhcp"" is missing for IPv4. ### Setup **Simple setup for DHCP IPv4.** SLS: ",Does the state look proper for the use case?,Any news?
saltstack/salt,https://github.com/saltstack/salt/issues/46923,saltstack_salt_issues_46923,"SaltReqTimeoutError until master key is removed from minion

### Description of Issue/Question Minion is unable to start (outputting SaltReqTimeoutError). If a master key is removed it is pulled and minion starts normally. Successive starts end in an error again. ### Setup Minion - Arch Linux 32bit Master - Arch Linux 64bit ### Steps to Reproduce Issue ",did this start occuring after a certain event? possibly an upgrade? does the error still come back after removing the minion_master.pub?,"not sure when it started. this is only a sandbox environment so it could be there from the start. after removing the minion_master.pub the file is pulled again from master so the pattern is like: remove file, start minion - file is recreated, minion is working. then stop minion, start it again and bam.."
saltstack/salt,https://github.com/saltstack/salt/issues/46535,saltstack_salt_issues_46535,"parallel:True not work on salt.states.archive 

### Description of Issue/Question in my states,minion need get some tar/zip files from a http file server; i use salt.states.archive to extracted them like belows:  remove 'parallel':True will work well,but a little slower one by one; ### Versions Report Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: Not Installed cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8.1 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (default, Jul 12 2017, 17:32:34) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: redhat 6.9 Santiago locale: UTF-8 machine: x86_64 release: 2.6.32-696.6.3.el6.x86_64 system: Linux version: Red Hat Enterprise Linux Server 6.9 Santiago",Can you try 7.4?,sorry to blocked the issue; the problem is occered on on minion(rhel5.11)with version 2016.11.3; any new version plan for rhel/centos 5?
saltstack/salt,https://github.com/saltstack/salt/issues/47222,saltstack_salt_issues_47222,"import fuction in py renderer

### Description of Issue/Question In my sls files(py renderer) there are some same actions,i want share function between sls files like what **import** do in python script(code reuse). when use **import** i get the load path problem as the following issue: https://github.com/saltstack/salt/issues/45521 any advice？",Can you provide an example of your SLS file with the import?,"a.sls  any method to define fuction sharef() once,and a.sls/b.sls can use fuction like **import** in python"
saltstack/salt,https://github.com/saltstack/salt/issues/46443,saltstack_salt_issues_46443,"'pip.installed' is not available while using Salt-SSH on Ubuntu 14.04

### Description of Issue/Question We have upgraded our Salt server from 2017.7.2 to 2017.7.4 recently and this upgrade causes the following issue while using `salt-ssh`: ### Setup (original) base/pip/init.sls: ","Did you try adding `reload_modules` to the initial pkg.installed of python-pip? Thanks, Daniel",@gtmanfred I tried this: 
saltstack/salt,https://github.com/saltstack/salt/issues/46457,saltstack_salt_issues_46457,"Run salt-call pkg.upgrade fromrepo=base failed

### Description of Issue/Question run salt-call pkg.upgrade fromrepo=base failed In file yumpkg.py:1528, arguments are passed expanded:  ### Setup Just start salt-master and salt-minion ### Steps to Reproduce Issue salt-call pkg.upgrade fromrepo=base ### Versions Report Salt Version: Salt: 2016.11.9",Whats the error your seeing?,"Thanks @ixs for reproducing, but I'm directly pointing out where this issue come from in code level, so how to fix this is straightforward. one solution is simply replace `repo_arg = _get_repo_options(**kwargs)` with `repo_arg = _get_repo_options(kwargs)`"
saltstack/salt,https://github.com/saltstack/salt/issues/46560,saltstack_salt_issues_46560,"State.Sls File throwing an Ambiguous Error

### Description of Issue/Question I am trying to run an AWS command making use of ""cmd.run"" feature. The values are getting populated as expected. The query created after all the values get populated also works fine on command line but getting errors when the same query is not being able to run via cmd.run ### Setup Following is the lambda.sls file that I am using  ### Steps to Reproduce Issue Simply create the above SLS file and run state-call state.sls lambda.sls ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt: 2016.11.9",Can you provide any errors or output you receive when you attempt to run the state file above?,"@garethgreenaway : ERROR: mapping values not allowed in the state. The issue seems to be with the **--environment '{""Variables"":{""name"": ""test"", ""surname"": ""user""}}'** as removing them from the command makes it run just fine."
saltstack/salt,https://github.com/saltstack/salt/issues/46662,saltstack_salt_issues_46662,"states/boto3_route53.rr_present won't make A records 

### Description of Issue/Question Unable to add an A record via boto3 on Windows and Debian host, throwing an exception. ### Setup SLS file addarecord: boto_route53.rr_present: - ResourceRecords: - {{ grains['ipv4'] }} - DomainName: 'domain.dr.' - Name: '{{ grains['id'] }}' - Type: 'A' - TTL: 300 - region: 'eu-west-1' Fails with: root@saltmaster:~# salt 'server.domain.dr' state.sls aws.route53_addarecord -l debug [DEBUG ] Reading configuration from /etc/salt/master [DEBUG ] Including configuration from '/etc/salt/master.d/acl.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/acl.conf [DEBUG ] Including configuration from '/etc/salt/master.d/admins.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/admins.conf [DEBUG ] Including configuration from '/etc/salt/master.d/cherrpy.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/cherrpy.conf [DEBUG ] Including configuration from '/etc/salt/master.d/mastersettings.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/mastersettings.conf [DEBUG ] Including configuration from '/etc/salt/master.d/nodegroups.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/nodegroups.conf [DEBUG ] Using cached minion ID from /etc/salt/minion_id: saltmaster.domain.svc [DEBUG ] Missing configuration file: /root/.saltrc [DEBUG ] Configuration file path: /etc/salt/master [WARNING ] Insecure logging configuration detected! Sensitive data may be logged. [DEBUG ] Reading configuration from /etc/salt/master [DEBUG ] Including configuration from '/etc/salt/master.d/acl.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/acl.conf [DEBUG ] Including configuration from '/etc/salt/master.d/admins.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/admins.conf [DEBUG ] Including configuration from '/etc/salt/master.d/cherrpy.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/cherrpy.conf [DEBUG ] Including configuration from '/etc/salt/master.d/mastersettings.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/mastersettings.conf [DEBUG ] Including configuration from '/etc/salt/master.d/nodegroups.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/nodegroups.conf [DEBUG ] Using cached minion ID from /etc/salt/minion_id: saltmaster.domain.svc [DEBUG ] Missing configuration file: /root/.saltrc [DEBUG ] MasterEvent PUB socket URI: /var/run/salt/master/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: /var/run/salt/master/master_event_pull.ipc [DEBUG ] Initializing new AsyncZeroMQReqChannel for ('/etc/salt/pki/master', 'saltmaster.domain.svc_master', 'tcp://127.0.0.1:4506', 'clear') [DEBUG ] Initializing new IPCClient for path: /var/run/salt/master/master_event_pub.ipc [DEBUG ] LazyLoaded local_cache.get_load [DEBUG ] Reading minion list from /var/cache/salt/master/jobs/16/5073307456709330a82f31d93eaf3d4d9f7ed87276d22ef7af4210170e1e4c/.minions.p [DEBUG ] get_iter_returns for jid 20180320162422455331 sent to set(['server.domain.dr']) will timeout at 16:24:27.462980 [DEBUG ] jid 20180320162422455331 return from server.domain.dr [DEBUG ] return event: {'server.domain.dr': {'jid': '20180320162422455331', 'retcode': 2, 'ret': {'boto_route53_|-addarecord_|-addarecord_|-rr_present': {'comment': ""State 'boto_route53.rr_present' was not found in SLS 'aws.route53_addarecord'\nReason: 'boto_route53' __virtual__ returned False\n"", '__run_num__': 0, 'changes': {}, 'result': False, 'name': 'addarecord'}}, 'out': 'highstate'}} [DEBUG ] LazyLoaded highstate.output server.domain.dr: ---------- ID: addarecord Function: boto_route53.rr_present Result: False Comment: State 'boto_route53.rr_present' was not found in SLS 'aws.route53_addarecord' Reason: 'boto_route53' __virtual__ returned False Changes: Summary for server.domain.dr ------------ Succeeded: 0 Failed: 1 ------------ Total states run: 1 Total run time: 0.000 ms [DEBUG ] jid 20180320162422455331 found all minions set(['server.domain.dr']) ERROR: Minions returned with non-zero exit code ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report  Minion salt-call --versions-report Salt Version: Salt: 2017.7.4 Dependency Versions: cffi: 1.10.0 cherrypy: unknown dateutil: 2.6.0 docker-py: Not Installed gitdb: 2.0.3 gitpython: 2.1.3 ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: 1.6.1 M2Crypto: Not Installed Mako: 1.0.6 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (v2.7.13:a06454b1afa1, Dec 17 2016, 20:53:40) [MSC v.1500 64 bit (AMD64)] python-gnupg: 0.4.0 PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.3 timelib: 0.2.4 Tornado: 4.5.1 ZMQ: 4.1.6 System Versions: dist: locale: cp1252 machine: AMD64 release: 2012ServerR2 system: Windows version: 2012ServerR2 6.3.9600 Multiprocessor Free",Can you check that either python-boto or python-botocore are installed? It should be at least version 1.2.6 for python-boto and 1.3.23 for python-botocore.,"Thanks Gareth. These are the installed modules on the minion, including the boto3 modules C:\Users\Administrator>C:\salt\bin\python.exe -m pip freeze appdirs==1.4.3 asn1crypto==0.24.0 backports-abc==0.5 backports.ssl-match-hostname==3.5.0.1 boto3==1.5.20 botocore==1.8.50 certifi==2018.1.18 cffi==1.10.0 cheroot==6.0.0 CherryPy==10.2.1 cryptography==1.8.1 docutils==0.14 enum34==1.1.6 futures==3.1.1 gitdb==0.6.4 gitdb2==2.0.3 GitPython==2.1.3 idna==2.5 ioloop==0.1a0 ipaddress==1.0.18 Jinja2==2.9.6 jmespath==0.9.3 libnacl==1.6.1 lxml==3.7.3 Mako==1.0.6 MarkupSafe==1.0 more-itertools==4.1.0 msgpack-python==0.4.8 packaging==17.1 portend==2.2 psutil==5.2.2 pyasn1==0.2.3 pycparser==2.17 pycrypto==2.6.1 pycurl==7.43.0 PyMySQL==0.7.11 pyOpenSSL==17.0.0 pyparsing==2.2.0 pypiwin32==223 python-dateutil==2.6.0 python-gnupg==0.4.0 pytz==2018.3 pywin32==223 PyYAML==3.12 pyzmq==16.0.2 requests==2.13.0 s3transfer==0.1.13 salt==2017.7.4 singledispatch==3.4.0.3 six==1.10.0 smmap==0.9.0 smmap2==2.0.3 tempora==1.10 timelib==0.2.4 tornado==4.5.1 WMI==1.4.9 C:\Users\Administrator> Anything else just let me know. Bren"
saltstack/salt,https://github.com/saltstack/salt/issues/46730,saltstack_salt_issues_46730,"salt.returners.highstate_return errors out

### salt.returners.highstate_return errors out I'm trying to get the salt.returners.highstate_return to send me emails with run output, I've set thing up correctly afaik but I'm getting the following error when I run `salt 'lamb*' state.highstate --return highstate` on my master as per [the example in here](https://docs.saltstack.com/en/latest/ref/returners/all/salt.returners.highstate_return.html) ","Can you provide me with a simplified state run that can replicate this? Because I am unable to replicate this with just a simple test.succeed_without_changes state. Thanks, Daniel",I've made a gist with my master and minion configs [here](https://gist.github.com/soostdijck/74d295b6c96330054f5762b2118e6c74) From the master I simply run `salt 'minion1*' state.highstate --return highstate` It looks like the actual top.sls doesn't matter because it immediately gave me the errors as per below: 
saltstack/salt,https://github.com/saltstack/salt/issues/46738,saltstack_salt_issues_46738,"Upgrade from 2014 to 2017 windows, unable to fine pacakge

### Description of Issue/Question SInce upgrading to 2017.7.4 on Windows, any application that i install returns the ""Unable to locate Package XXX"" (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).)  I an running all command as Administrator Thanks",Did you take into account the changes in the Windows package manager since 2014? [https://docs.saltstack.com/en/latest/topics/windows/windows-package-manager.html#winrepo-changes](https://docs.saltstack.com/en/latest/topics/windows/windows-package-manager.html#winrepo-changes),"Hi, I figure it out, winrepo_cachefile has to be the full path, not just the location of the file Thanks adam On Wed, Mar 28, 2018 at 11:47 PM, Dafydd Jones <notifications@github.com> wrote: -- Adam Barnett"
saltstack/salt,https://github.com/saltstack/salt/issues/51075,saltstack_salt_issues_51075,"Using file_client: remote and local files  at the same time 

### Description of Issue/Question Hi I moving from a masterless setup to using a master I am going to set  Thanks",can you clarify the entire salt-call command you are running to help replicate?,i run for example 
saltstack/salt,https://github.com/saltstack/salt/issues/46926,saltstack_salt_issues_46926," Failed to load ext_pillar stack: no filter named 'unique' in 2018.3

### Description of Issue/Question After upgrading to 2018.7 Saltstack doesn't know the Jinja filter 'unique' in the ext_pillar stack. This worked ok before upgrading from 2017.7 and after downgrading back to 2017.7.  ### Setup snippet from external pillar stack *.yml file: {% for app in a_dict | unique %} {% endfor %}",can you please share how you have your external pillar setup?,the master.conf contains: 
saltstack/salt,https://github.com/saltstack/salt/issues/47896,saltstack_salt_issues_47896,"issue in acl using array

i want to use salt acl using publisher acl salt ""node"" pkg.install pkgs='[""pkg1"", ""pkg2""]' /etc/salt/master publisher_acl: user1: - test.ping - pkg.clean_metadata - node: - pkg.install: args: - 'pkg2' - 'pkg1' user@node: /opt/salt-scripts/ci-cp$ salt ""node"" pkg.install pkgs='[""pkg1"", ""pkg2""]' getting new repodata node: True Updating pkg1 & pkg2 Failed to authenticate! This is most likely because this user is not permitted to execute commands, but there is a small possibility that a disk error occurred (check disk/inode usage).",what version of salt are you using?,salt 2016.11.9 (Carbon)
saltstack/salt,https://github.com/saltstack/salt/issues/50651,saltstack_salt_issues_50651,"Some states need concurrent when running salt-minion as a non-root user - includes possible solution

### Description of Issue/Question When salt-minion is configured to run as a non-root user with sudo privileges, some states require concurrent to be set to True, as the minion starts another process to actually execute the state. When using a sudo setup, some states are executed by issuing a sudo command to salt-call, which then detects that another state is already running. This result is then propagated up the chain, and the result of the state is that another state is already running. Unfortunate, as the actual work should have been performed by the child process. The workaround/solution to this issue is to force concurrent to True for the states that behaves in this manner. So far, the states state.apply, state.sls, state.highstate has been identified and a workaround has been implemented in executors/sudo.py (https://github.com/saltstack/salt/pull/42021). I have run into a few other states that need the fix as well, and are unsure whether this is now a conclusive list of all states needing concurrent to run in a sudo setup: state.show_highstate state.show_sls ### Setup and steps to Reproduce Issue Setup and reproduction of errors has been fully described in https://github.com/saltstack/salt/issues/25842 ### Versions Report  Of note, the psutil is overridden by psutil_compat, so it is my guess that it should work on most systems. I'm unsure as to whether this module is executed on other than Unix/Linux like platforms and if it would work on those.",Would you be able to submit this as a PR along with some integration or unit tests? Thanks!,"Honestly, I've never tried doing that (creating a pull request and making integration/unit tests). Check me on this, to see if i've got it right: 1. Create fork of the development tree (or 2018.3?) on github. 2. Make changes in the fork. 3. Make a pull request from the fork to the source repository Second item is the easiest part - for me, right now."
saltstack/salt,https://github.com/saltstack/salt/issues/46889,saltstack_salt_issues_46889,"Error 'netacl.load_filter_config' is not available.

### Description of Issue/Question 'netacl.load_filter_config' is not available when trying to configure acl on cisco nexus devices salt testdevice-nxos netacl.load_term_config my-filter term_name=my-term pillar_key=netacl test=True debug=True ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) Pillar file looks like: testdevice-nxos: ---------- my-filter: ---------- my-term: ---------- action: accept destination_address: any source_address: 1.1.1.1 ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) [DEBUG ] Reading configuration from /etc/salt/master [DEBUG ] Including configuration from '/etc/salt/master.d/peer_run.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/peer_run.conf [DEBUG ] Including configuration from '/etc/salt/master.d/vault.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/vault.conf [DEBUG ] Using cached minion ID from /etc/salt/minion_id: sc-net-salt-master-dev-01.nvidia.com [DEBUG ] Missing configuration file: /root/.saltrc [DEBUG ] Configuration file path: /etc/salt/master [DEBUG ] Reading configuration from /etc/salt/master [DEBUG ] Including configuration from '/etc/salt/master.d/peer_run.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/peer_run.conf [DEBUG ] Including configuration from '/etc/salt/master.d/vault.conf' [DEBUG ] Reading configuration from /etc/salt/master.d/vault.conf [DEBUG ] Using cached minion ID from /etc/salt/minion_id: sc-net-salt-master-dev-01.nvidia.com [DEBUG ] Missing configuration file: /root/.saltrc [DEBUG ] MasterEvent PUB socket URI: /var/run/salt/master/master_event_pub.ipc [DEBUG ] MasterEvent PULL socket URI: /var/run/salt/master/master_event_pull.ipc [DEBUG ] Initializing new AsyncZeroMQReqChannel for ('/etc/salt/pki/master', 'sc-net-salt-master-dev-01.nvidia.com_master', 'tcp://127.0.0.1:4506', 'clear') [DEBUG ] Initializing new IPCClient for path: /var/run/salt/master/master_event_pub.ipc [DEBUG ] LazyLoaded local_cache.get_load [DEBUG ] Reading minion list from /var/cache/salt/master/jobs/ad/8d10ea35490aaa71ee94815ab6b09d954c84ecab5370a416c39d728aeedf86/.minions.p [DEBUG ] get_iter_returns for jid 20180405102217598360 sent to set(['testdevice-nxos']) will timeout at 10:22:22.605593 [DEBUG ] jid 20180405102217598360 return from testdevice-nxos [DEBUG ] return event: {'testdevice-nxos': {'jid': '20180405102217598360', 'retcode': 254, 'ret': ""'netacl.load_term_config' is not available."", 'out': 'nested'}} [DEBUG ] LazyLoaded nested.output testdevice-nxos: 'netacl.load_term_config' is not available. [DEBUG ] jid 20180405102217598360 found all minions set(['testdevice-nxos']) ERROR: Minions returned with non-zero exit code ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2017.7.3 Dependency Versions: cffi: 1.11.4 cherrypy: 3.5.0 dateutil: 2.4.2 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Dec 4 2017, 14:50:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-87-generic system: Linux version: Ubuntu 16.04 xenial",Do you have those installed on the machine you're attempting to have the state module run?,"Thanks @garethgreenaway . I got that installed and when intiating the acl push i get a new error , may be im missing something. Can you help with that salt testdevice-ios netacl.load_term_config my-filter term_name=my-term pillar_key=netacl test=True debug=True testdevice-ios: The minion function caused an exception: Traceback (most recent call last): File ""/usr/lib/python2.7/dist-packages/salt/minion.py"", line 1493, in _thread_return return_data = executor.execute() File ""/usr/lib/python2.7/dist-packages/salt/executors/direct_call.py"", line 28, in execute return self.func(*self.args, **self.kwargs) File ""/usr/lib/python2.7/dist-packages/salt/utils/napalm.py"", line 430, in func_wrapper return func(*args, **kwargs) File ""/usr/lib/python2.7/dist-packages/salt/modules/napalm_acl.py"", line 445, in load_term_config **term_fields) File ""/usr/lib/python2.7/dist-packages/salt/modules/capirca_acl.py"", line 867, in get_term_config revision_date_format=revision_date_format) File ""/usr/lib/python2.7/dist-packages/salt/modules/capirca_acl.py"", line 1013, in get_filter_config revision_date_format=revision_date_format) File ""/usr/lib/python2.7/dist-packages/salt/modules/capirca_acl.py"", line 1178, in get_policy_config merge_pillar=merge_pillar) File ""/usr/lib/python2.7/dist-packages/salt/modules/capirca_acl.py"", line 537, in _get_policy_object **term_fields) File ""/usr/lib/python2.7/dist-packages/salt/modules/capirca_acl.py"", line 492, in _get_term_object log.debug(str(term)) File ""/root/src/aclgen/lib/policy.py"", line 731, in __str__ AttributeError: '_Term' object has no attribute 'priority'"
saltstack/salt,https://github.com/saltstack/salt/issues/47792,saltstack_salt_issues_47792,"Dynamic proxy minion connections & Key Accepting

Hi, My requirement is to connect to set of network devices from a list and perform certain activities , since i am new to saltstack , is there any way to accept key and start the proxy minion processes at runtime. Thanks in advance",Can you clarify more of your use case i'm a bit confused as to what you are attempting to do?,"Hi @Ch3LL , My requirement is to do certain ACL activities on the network devices , a file will hold the entries of devices. now my query is how can i performing key accepting and starting proxy minion process for all the list of devices @ runtime."
saltstack/salt,https://github.com/saltstack/salt/issues/48335,saltstack_salt_issues_48335,"cmd.script and creates as dependancy

Hi, When declaring a cmd.run or cmd.script that ""creates"" a file, this file cannot be use as a dependency. I come from Puppet and this seems to be unnatural, is this the expected behavior ? Best regards","can you elaborate on what you mean by ""cannot be used as a dependency""? Not quit sure what you are trying to do","If I do this  When I use a require I can do `require: myapp_openssl`, but the resource have created ""/opt/openssl_{{ myapp.pkg.openssl.version }}/bin/openssl"", so the first time I wrote : `require: ""/opt/openssl_{{ myapp.pkg.openssl.version }}/bin/openssl""` but this resource does not exist. Best regards,"
saltstack/salt,https://github.com/saltstack/salt/issues/48603,saltstack_salt_issues_48603,"Help : Custom SDB module and GITFS

Hi, I've wrote a custom SDB module to interact with PHPIPAM. I've put it in a folder ""_sdb"" at the root path of my top-formula that is in a GITFS. When running `salt '*' saltutil.sync_sdb` the SDB module is sync and present on the filesystem `/var/cache/salt/master/gitfs/refs/base/_sdb/rest_auth.py` But when running `salt-run sdb.get ""sdb://phpipam-api/post-free-ip?subnet_id=111""` the module does not seem to be found  I've tried to rename my module filename to rest-auth.py but no changes, also the old filename doesn't seem to be purged via the commands `fileserver.update` and `saltutil.sync_sdb` I've also tried the example from the book ""Extending Saltstack"" but I've the same error. Also, when I copy my `rest_auth.py` in `/usr/lib/python2.7/site-packages/salt/sdb` all is working fine Am I missing a configuration on my master like ext_pillar or something like that ? Best regards,",Can you provide the code for your custom SDB module?,Here is the code 
saltstack/salt,https://github.com/saltstack/salt/issues/49554,saltstack_salt_issues_49554,"git.latest with SHA1 rev ""No revision matching 'rev' exists in the remote repository""

### Description of Issue/Question I'm unable to have a working checkout on a SHA1 with git.latest, I always have ""No revision matching 'rev' exists in the remote repository"". Perhaps I'm doing something bad. ### Setup * Formula ",Does it work if you don't specify a revision and just have it use the head of the branch?,"I have to put ""dev"" in branch and rev to checkout and update the dev branch."
saltstack/salt,https://github.com/saltstack/salt/issues/49590,saltstack_salt_issues_49590,"saltclass over git ?

### Description of Issue/Question ### Setup Hi, Except the release note of 2018.03 I'm unable to find a documentation about saltclass, is it production ready ? This module have the same approach of what I used previously with Hiera on Puppet and seems to resolved all my issue with Pillar default/override configuration Also, actually I have  So is it possible to have saltclass over git ? Best regards,",Does the above not accomplish what you're trying to accomplish? @saltstack/team-core Anyone have any thoughts on this one?,Have I to add a level like this ? 
saltstack/salt,https://github.com/saltstack/salt/issues/50536,saltstack_salt_issues_50536,"ini.options_present separator add extra whitespaces (and pkgrepo is not viable to manage yum)

Hi, When using ini.options_present with a defined separator, salt add extra whitespace around the separator. If I apply this code, all the parameters of the file are converted from `key=value` to `key = value` Also I do this because, it is not possible with pkgrepo to only disable an existant repo, you have to set all the parameters and you can't manage a yum repo configuration file with multiple entries (one file, one entry); so when the centos-release package is updated all the entries are recreated; so the only way I've found to have something not dirty when using a local YUM mirror, is to disable all the default repository and to manage each entry of the local mirror via pkgrepo. ",Do you know if this was working previously? and if so what version?,"I don't know, I've found some old issue that seems to be fixed #31210 because #38996 and #33669 was linked to this one"
saltstack/salt,https://github.com/saltstack/salt/issues/47697,saltstack_salt_issues_47697,"Encoding for managed files dosn't work

### Description of Issue/Question I try to send a jinja parsed config file in utf_16_le encoding to the minion. The problem is that if the file is utf_16_le on master than it is not being processed (variables are not parsed and substituted with proper values). If the file is in utf-8 than variables processing works fine but the file is utf-8 encoded on the minion as well as on master. Part of the config file to be sent: Post backup events=""EXECUTE,C:\scripts\azcopyscript.exe,{{opts.id}}"" If the file on the master is utf-8 than on the minion result is: Post backup events=""EXECUTE,C:\scripts\azcopyscript.exe,test_srv_01"" but the file is utf-8 If the file on the master is utf_16_le than on the minion result is: Post backup events=""EXECUTE,C:\scripts\azcopyscript.exe,{{opts.id}}"" and the file is utf_16_le ### Setup Part of SLS file: ",What version of salt are you running on the minion? `salt <minionid> test.versions_report` Thanks Daniel,"Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 1.10.0 cherrypy: 10.2.1 dateutil: 2.6.1 docker-py: Not Installed gitdb: 2.0.3 gitpython: 2.1.7 ioflo: Not Installed Jinja2: 2.10 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.7 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 3.5.3 (v3.5.3:1880cb95a742, Jan 16 2017, 15:51:26) [MSC v.1900 32 bit (Intel)] python-gnupg: 0.4.1 PyYAML: 3.12 PyZMQ: 16.0.3 RAET: Not Installed smmap: 2.0.3 timelib: 0.2.4 Tornado: 4.5.2 ZMQ: 4.1.6 System Versions: dist: locale: cp1252 machine: AMD64 release: 2016Server system: Windows version: 2016Server 10.0.14393 SP0 Multiprocessor Free"
saltstack/salt,https://github.com/saltstack/salt/issues/46916,saltstack_salt_issues_46916,"Redis cache error

### Description of Issue/Question I found an bug when use redis for caching, i don't know it is bug or not, but i think i should let your know :) Sorry my english not good. So i changed the code in line 346 to: log.debug('Setting the value for %s under %s (%s)', key, bank, redis_key) And the error not show. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) 2018-04-06 10:00:49,502 [/usr/lib/python2.7/site-packages/salt/cache/redis_cache.pyc:300 ][DEBUG ][11055] Adding 10-90-32-39 to $BANK_minions 2018-04-06 10:00:49,503 [salt.master :1783][ERROR ][11055] Error in function _pillar: Traceback (most recent call last): File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 1776, in run_func ret = getattr(self, func)(load) File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 1487, in _pillar 'pillar': data}) File ""/usr/lib/python2.7/site-packages/salt/cache/__init__.py"", line 156, in store return self.modules[fun](bank, key, data, **self._kwargs) File ""/usr/lib/python2.7/site-packages/salt/cache/redis_cache.py"", line 346, in store log.debug( File ""/usr/lib64/python2.7/logging/__init__.py"", line 1137, in debug self._log(DEBUG, msg, args, **kwargs) TypeError: _log() got an unexpected keyword argument 'redis_key' ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 1.11.5 cherrypy: unknown dateutil: 1.5 docker-py: 1.10.6 gitdb: 0.6.4 gitpython: 2.1.9 ioflo: 1.7.4 Jinja2: 2.10 libgit2: Not Installed libnacl: 1.6.1 M2Crypto: Not Installed Mako: Not Installed msgpack-pure: 0.1.3 msgpack-python: 0.5.6 mysql-python: 1.2.5 pycparser: 2.18 pycrypto: Not Installed pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Aug 4 2017, 00:39:18) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 15.3.0 RAET: 0.6.8 smmap: 2.0.3 timelib: 0.2.4 Tornado: 4.5.3 ZMQ: 4.1.4 System Versions: dist: centos 7.4.1708 Core locale: UTF-8 machine: x86_64 release: 4.15.7-1.el7.elrepo.x86_64 system: Linux version: CentOS Linux 7.4.1708 Core",would you mind submitting a PR for that fix?,"@Ch3LL i don't know how to do it, can you do it for me :)"
saltstack/salt,https://github.com/saltstack/salt/issues/46942,saltstack_salt_issues_46942,"Salt runners broken with master job cache and postgresql returner

### Description of Issue/Question When the master job cache is setup using postgres, calling salt-run <anything> will throw a 'TypeError' in the postgres_local_cache.py module. My use case is `salt-run manage.[not_]present` but I tried ",Should we be using `salt.utils.stringutils.to_str()` in this instance? or just removing the double encoding?,I'll get on it as soon as I can.
saltstack/salt,https://github.com/saltstack/salt/issues/53955,saltstack_salt_issues_53955,"win_pkg.install failing due to calls for missing missing/incorrect registry entries

### Description of Issue calls to pkg.install fail silently or with error: ~~~ WindowsError: The system could not find the environment option that was entered. ~~~ Or in debug mode with a variant of this registry key issue ~~~ [DEBUG ] Cannot find key: HKU\S-1-5-18\Software\Microsoft\Installer\Products ~~~ ### Setup My package sls files specify local downloads for packages but the problem appears to be the fact that none of the registry keys that it searches in are valid.. Running `reg query` on each of the registry entries shown in the DEBUG verified that it did not exist. ### Steps to Reproduce Issue From Master ~~~ salt HEDT8 pkg.install jsh-putty HEDT8: ---------- ~~~ From Minion ~~~ xxx@HEDT8 C:\salt>salt-call pkg.install jsh-putty local: ---------- ~~~ From Minion with -l debug ~~~ xxx@HEDT8 C:\salt>salt-call -l debug pkg.install jsh-putty [DEBUG ] Reading configuration from c:\salt\conf\minion [DEBUG ] Including configuration from 'c:\salt\conf\minion.d\_schedule.conf' [DEBUG ] Reading configuration from c:\salt\conf\minion.d\_schedule.conf [DEBUG ] Including configuration from 'c:\salt\conf\minion.d\mine_functions.conf' [DEBUG ] Reading configuration from c:\salt\conf\minion.d\mine_functions.conf [DEBUG ] Configuration file path: c:\salt\conf\minion [WARNING ] Insecure logging configuration detected! Sensitive data may be logged. [DEBUG ] Grains refresh requested. Refreshing grains. [DEBUG ] Reading configuration from c:\salt\conf\minion [DEBUG ] Including configuration from 'c:\salt\conf\minion.d\_schedule.conf' [DEBUG ] Reading configuration from c:\salt\conf\minion.d\_schedule.conf [DEBUG ] Including configuration from 'c:\salt\conf\minion.d\mine_functions.conf' [DEBUG ] Reading configuration from c:\salt\conf\minion.d\mine_functions.conf [DEBUG ] Loading static grains from c:\salt\conf\grains [DEBUG ] Connecting to master. Attempt 1 (infinite attempts) [DEBUG ] Master URI: tcp://192.168.8.14:4506 [DEBUG ] Popen(['git', 'version'], cwd=C:\salt, universal_newlines=False, shell=None) [DEBUG ] Popen(['git', 'version'], cwd=C:\salt, universal_newlines=False, shell=None) [DEBUG ] Initializing new AsyncAuth for (u'c:\\salt\\conf\\pki\\minion', u'HEDT8', u'tcp://192.168.8.14:45 06') [DEBUG ] Generated random reconnect delay between '1000ms' and '11000ms' (9959) [DEBUG ] Setting zmq_reconnect_ivl to '9959ms' [DEBUG ] Setting zmq_reconnect_ivl_max to '11000ms' [DEBUG ] Initializing new AsyncZeroMQReqChannel for (u'c:\\salt\\conf\\pki\\minion', u'HEDT8', u'tcp://192 .168.8.14:4506', 'clear') [DEBUG ] Connecting the Minion to the Master URI (for the return server): tcp://192.168.8.14:4506 [DEBUG ] Trying to connect to: tcp://192.168.8.14:4506 [DEBUG ] salt.crypt.get_rsa_pub_key: Loading public key [DEBUG ] Decrypting the current master AES key [DEBUG ] salt.crypt.get_rsa_key: Loading private key [DEBUG ] salt.crypt._get_key_with_evict: Loading private key [DEBUG ] Loaded minion key: c:\salt\conf\pki\minion\minion.pem [DEBUG ] salt.crypt.get_rsa_pub_key: Loading public key [DEBUG ] Closing AsyncZeroMQReqChannel instance [DEBUG ] Connecting the Minion to the Master publish port, using the URI: tcp://192.168.8.14:4505 [DEBUG ] salt.crypt.get_rsa_key: Loading private key [DEBUG ] Loaded minion key: c:\salt\conf\pki\minion\minion.pem [DEBUG ] Determining pillar cache [DEBUG ] Initializing new AsyncZeroMQReqChannel for (u'c:\\salt\\conf\\pki\\minion', u'HEDT8', u'tcp://192 .168.8.14:4506', u'aes') [DEBUG ] Initializing new AsyncAuth for (u'c:\\salt\\conf\\pki\\minion', u'HEDT8', u'tcp://192.168.8.14:45 06') [DEBUG ] Connecting the Minion to the Master URI (for the return server): tcp://192.168.8.14:4506 [DEBUG ] Trying to connect to: tcp://192.168.8.14:4506 [DEBUG ] salt.crypt.get_rsa_key: Loading private key [DEBUG ] Loaded minion key: c:\salt\conf\pki\minion\minion.pem [DEBUG ] Closing AsyncZeroMQReqChannel instance [DEBUG ] LazyLoaded jinja.render [DEBUG ] LazyLoaded yaml.render [DEBUG ] LazyLoaded pkg.install [DEBUG ] LazyLoaded direct_call.execute [DEBUG ] key: ifttt.secret_key, ret: _|- [DEBUG ] key: ifttt:secret_key, ret: _|- [DEBUG ] key: pushbullet.api_key, ret: _|- [DEBUG ] key: pushbullet:api_key, ret: _|- [DEBUG ] LazyLoaded reg.read_value [DEBUG ] key: victorops.api_key, ret: _|- [DEBUG ] key: victorops:api_key, ret: _|- [DEBUG ] LazyLoaded platform.is_windows [DEBUG ] LazyLoaded path.which [DEBUG ] Could not LazyLoad pkg.normalize_name: 'pkg.normalize_name' is not available. [DEBUG ] Using existing pkg metadata db for saltenv 'base' (age is 2:11:22.926667) [DEBUG ] Cannot find key: HKU\.DEFAULT\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\.DEFAULT\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-19\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-19\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-20\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-20\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-21-1121613800-83764902-4022640230-1000\Software\Microsoft\Installer\Pr oducts Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-21-1121613800-83764902-4022640230-1000_Classes\Software\Microsoft\Wind ows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-21-1121613800-83764902-4022640230-1000_Classes\Software\Microsoft\Inst aller\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-18\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-18\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\.DEFAULT\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\.DEFAULT\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-19\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-19\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-20\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-20\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-21-1121613800-83764902-4022640230-1000\Software\Microsoft\Installer\Pr oducts Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-21-1121613800-83764902-4022640230-1000_Classes\Software\Microsoft\Wind ows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-21-1121613800-83764902-4022640230-1000_Classes\Software\Microsoft\Inst aller\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-18\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-18\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] pkg.install: 'jsh-putty' version '0.66' is already installed [DEBUG ] Using existing pkg metadata db for saltenv 'base' (age is 2:11:22.986667) [DEBUG ] Cannot find key: HKU\.DEFAULT\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\.DEFAULT\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-19\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-19\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-20\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-20\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-21-1121613800-83764902-4022640230-1000\Software\Microsoft\Installer\Pr oducts Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-21-1121613800-83764902-4022640230-1000_Classes\Software\Microsoft\Wind ows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-21-1121613800-83764902-4022640230-1000_Classes\Software\Microsoft\Inst aller\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-18\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-18\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\.DEFAULT\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\.DEFAULT\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-19\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-19\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-20\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-20\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-21-1121613800-83764902-4022640230-1000\Software\Microsoft\Installer\Pr oducts Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-21-1121613800-83764902-4022640230-1000_Classes\Software\Microsoft\Wind ows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-21-1121613800-83764902-4022640230-1000_Classes\Software\Microsoft\Inst aller\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-18\Software\Microsoft\Windows\CurrentVersion\Uninstall Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Cannot find key: HKU\S-1-5-18\Software\Microsoft\Installer\Products Traceback (most recent call last): File ""C:\salt\bin\lib\site-packages\salt\utils\win_reg.py"", line 341, in list_keys handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask) error: (2, 'RegOpenKeyEx', 'The system cannot find the file specified.') [DEBUG ] Initializing new AsyncZeroMQReqChannel for (u'c:\\salt\\conf\\pki\\minion', u'HEDT8', u'tcp://192 .168.8.14:4506', u'aes') [DEBUG ] Initializing new AsyncAuth for (u'c:\\salt\\conf\\pki\\minion', u'HEDT8', u'tcp://192.168.8.14:45 06') [DEBUG ] Connecting the Minion to the Master URI (for the return server): tcp://192.168.8.14:4506 [DEBUG ] Trying to connect to: tcp://192.168.8.14:4506 [DEBUG ] Closing AsyncZeroMQReqChannel instance [DEBUG ] LazyLoaded nested.output local: ---------- ~~~ Produces ### Versions Report Master Master and Minion running same version.. Salt Version: Salt: 2019.2.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.5 docker-py: Not Installed gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.6 (default, Nov 13 2018, 12:45:42) python-gnupg: 0.3.6 PyYAML: 3.10 PyZMQ: 14.4.0 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: Ubuntu 14.04 trusty locale: UTF-8 machine: x86_64 release: 3.13.0-74-generic system: Linux version: Ubuntu 14.04 trusty ### Versions Report Minion xxx@HEDT8 C:\salt>salt-call --versions-report Salt Version: Salt: 2019.2.0 Dependency Versions: cffi: 1.11.5 cherrypy: 17.4.1 dateutil: 2.7.5 docker-py: Not Installed gitdb: 2.0.5 gitpython: 2.1.10 ioflo: Not Installed Jinja2: 2.10 libgit2: Not Installed libnacl: 1.6.1 M2Crypto: Not Installed Mako: 1.0.7 msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: 2.19 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.15 (v2.7.15:ca079a3ea3, Apr 30 2018, 16:30:26) [MSC v.1500 64 bit (AMD64)] python-gnupg: 0.4.3 PyYAML: 3.13 PyZMQ: 17.1.2 RAET: Not Installed smmap: 2.0.5 timelib: 0.2.4 Tornado: 4.5.3 ZMQ: 4.2.5 System Versions: dist: locale: cp1252 machine: AMD64 release: 7 system: Windows version: 7 6.1.7601 SP1 Multiprocessor Free",What account is the `salt-minion` running under? It looks like it may be a permissions issue.,It is running under the local administrator account.
saltstack/salt,https://github.com/saltstack/salt/issues/46976,saltstack_salt_issues_46976,"Copy/paste module refrences might not work because some might be virtualnames, and it's hard to tell.

### Copy/paste module refrences might not work because some might be virtualnames, and it's hard to tell. Add this to top, the reist is same.. ### Description of Issue/Question Error with sls file: Reason: 'win_system.reboot' is not available. salt win2016 sys.list_state_modules 'win_*' - win_dacl - win_dns_client - win_firewall - win_path - win_pki - win_servermanager - win_smtp_server - win_update Im new to salt, and was amazed that it could kinda replace GPO and take over my windows stuff. But this list of ""win_.."" supported configuration options is kinda thin compared to what is listed on documentation. I guess there is somekind of grain based lockdown for ""features"". If this is based on auto-tested ""features"" only allowed and broken not - cool - then it seems I have to wait. But I doubt because ""shutdown"" and reboot commands for windows have not changed for a long time. But if it's bureucratic versioning mess, then this creates a recurring complication with future OS release adoption into salt managed systems - that makes me want to stick with abusing puppet. Wouldnt an os/env grouped ""this works/this brakes"" reporting system for ""features"" at documentation be better - instead of removing the possibility for users to try untested ""features""? Something like winehq.com has... a lot of windows programs/games/whatever can't run perfectly with wine, but it's ok - it's just important to let users gather what works and what brakes so other users can decide if something suits them or not. ### Setup salt win2016 grains.items ---------- SSDs: biosversion: Default System BIOS cpu_model: AMD Opteron(TM) Processor #### cpuarch: AMD64 disks: domain: str fqdn: ########## fqdn_ip4: - 17#.######## fqdn_ip6: gpus: groupname: host: abelia hwaddr_interfaces: ---------- Xen PV Network Device #0: 00:05:##:##:##:## id: abelia init: Windows ip4_interfaces: ---------- Xen PV Network Device #0: - 17#.######## ip6_interfaces: ---------- Xen PV Network Device #0: - ####::####:####:####:#### ip_interfaces: ---------- Xen PV Network Device #0: - 17#.######## - ####::####:####:####:#### ipv4: - 172.17.1.110 ipv6: - fe80::11ee:40f4:2727:6b41 kernel: Windows kernelrelease: 10.0.14393 kernelversion: 10.0.14393 locale_info: ---------- defaultencoding: cp1257 defaultlanguage: ##### detectedencoding: cp1257 localhost: abelia manufacturer: Xen master: salt mem_total: 9983 motherboard: ---------- productname: None serialnumber: None nodename: abelia num_cpus: 6 num_gpus: 0 os: Windows os_family: Windows osfinger: Windows-2016Server osfullname: Microsoft Windows Server 2016 Standard Evaluation osmanufacturer: Microsoft Corporation osrelease: 2016Server osrelease_info: - 2016 osservicepack: None osversion: 10.0.14393 path: C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\salt;C:\Windows\system32\config\systemprofile\AppData\Local\Microsoft\WindowsApps;c:\salt\bin\lib\site-packages\pywin32_system32;c:\salt\bin\lib\site-packages\pywin32_system32 pid: 620 productname: HVM domU ps: tasklist.exe pythonexecutable: c:\salt\bin\python.exe pythonpath: - c:\salt\bin\lib\site-packages\git\ext\gitdb - c:\salt\bin\Scripts - c:\salt\bin\python27.zip - c:\salt\bin\DLLs - c:\salt\bin\lib - c:\salt\bin\lib\plat-win - c:\salt\bin\lib\lib-tk - c:\salt\bin - c:\salt\bin\lib\site-packages - c:\salt\bin\lib\site-packages\win32 - c:\salt\bin\lib\site-packages\win32\lib - c:\salt\bin\lib\site-packages\gitdb\ext\smmap pythonversion: - 2 - 7 - 14 - final - 0 saltpath: c:\salt\bin\lib\site-packages\salt saltversion: 2018.3.0 saltversioninfo: - 2018 - 3 - 0 - 0 serialnumber: ##### server_id: ###1582### shell: C:\Windows\system32\cmd.exe timezone: ##### username: #####A$ virtual: Xen virtual_subtype: HVM domU windowsdomain: ### zfs_support: False zmqversion: 4.1.6 ### Steps to Reproduce Issue Try using 'win_system.reboot' in sls file for Win Server 2016 Standard minion. Or check that this and many other are not avaliable with: salt minion sys.list_state_modules 'win_*' ### Versions Report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.4.2 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Dec 4 2017, 14:50:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-116-generic system: Linux version: Ubuntu 16.04 xenial","Can you join the #windows channel on the Community Slack? Or IRC. https://github.com/saltstack/salt#get-saltstack-support-and-help or can @twangboy or @dwoz help here? Thanks, Daniel","I digged more code at minion side.. C:\salt\bin\Lib\site-packages\salt\states\win_system (love the cleanness of python) So I got ""win_system"" listed finally with the ""salt minion sys.list_state_modules 'win_*'"" command. The ""fix"" was to comment out the line "" __virtualname__ = 'system' "". Although now i understand that I should have called "".system"" not "".win_system"". But this is not so obvious as I expected this list: https://docs.saltstack.com/en/latest/ref/states/all/index.html To match ""salt minion sys.list_state_modules"" command.. which would be as salt wants to be.. simple and direct. Though yes under the specific page after the huge headline ""salt.states.win_system"" there indeed is example codeblock with ""system.computer_name: []"" .. but i needed reboot, so I always scroolled down and copied ""salt.states.win_system.reboot"" to my code. Case closed - lesson learned - problem solved for me. But I don't think such confusion for newcomers is only this module or windows specific and maybe it should be addressed. So if module uses __virtualname__ = 'system'.. then the /ref/ webpage for this module also shows lines addresably as ""salt.states.system.reboot"" ?"
saltstack/salt,https://github.com/saltstack/salt/issues/47573,saltstack_salt_issues_47573,"cmd.script broken for windows clients

### Description of Issue/Question cmd.script does not work with winodws minions.. same error in statefile and direct command. @ https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.cmdmod.html Manual has windows example, so I guess it did work for someone at some time.. `salt '*' cmd.script salt://scripts/windows_task.ps1 args=' -Input c:\tmp\infile.txt' shell='powershell'` ### Steps to Reproduce Issue Enable filesystem.. create testscrip with content ""echo 999"". /srv/salt ",Can you give that fix a try?,My server doesn't use git for certain reasons. I could do manual few file diff fix but the link provides fix for 2017 not 2018.3.0. So I guess I have to wait for the release of 2018.3.1 into repositories. https://repo.saltstack.com/#ubuntu Thanks though - good to know it's already fixed in upcoming upgrade.
saltstack/salt,https://github.com/saltstack/salt/issues/47085,saltstack_salt_issues_47085,"serializers.yamlex is doing something weird with its string representation

### Description of Issue/Question when using yamlex, ","Can you provide the output of `--versions-report` like the issues template requests, so that we can attempt to replicate this issue? Daniel",updated with version-report
saltstack/salt,https://github.com/saltstack/salt/issues/47112,saltstack_salt_issues_47112,"CherrPy库报错：AttributeError: 'NoneType' object has no attribute 'recv'

### Description of Issue/Questiont the salt-api is running . I used it to test websocket.When i input the code,the log said:AttributeError: 'NoneType' object has no attribute 'recv'.That mean in the Cherrypy,the type of self_sock is none.So that it doesn't have the attribute 'recv'. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) api.conf:  ### Versions Report os: Ubuntu the version of salt: salt 2018.3.0 (Oxygen) the version of salt-api: salt-api 2018.3.0 (Oxygen) the version of CherrPy: CherryPy (3.2.3) the version of python : python2.7.14",what version of ws4py are you using?,ws4py(0.5.1)
saltstack/salt,https://github.com/saltstack/salt/issues/47139,saltstack_salt_issues_47139,"Wildcard support in service.status does not work for systemd instantiated services

### Description of Issue/Question Salt 2018.3.0 added wildcard support to `service.status`, but it currently appears unable to find systemd [instantiated services](http://0pointer.de/blog/projects/instances.html). ### Steps to Reproduce Issue 1. start a systemd instantiated service (with a unit id like `myapp@bla.service`) 2. run `salt ""*"" service.status ""myapp@bla""` and observe that the service is correctly reported to be running 3. run `salt ""*"" service.status ""myapp*""` and observe that it only reports that the (non-existent) service `myapp@` is not running. Example: root@groen:/# salt '*' service.status ""myapp@bla"" machine0: True root@groen:/# salt '*' service.status ""myapp*"" machine0: ---------- myapp@: False ### Versions Report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.6.0 docker-py: Not Installed gitdb: 2.0.2 gitpython: 2.1.5 ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.7 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.14 (default, Sep 23 2017, 22:06:14) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.3 timelib: Not Installed Tornado: 4.5.1 ZMQ: 4.2.1 System Versions: dist: Ubuntu 17.10 artful locale: ANSI_X3.4-1968 machine: x86_64 release: 4.8.0-59-generic system: Linux version: Ubuntu 17.10 artful",Did you try `myapp@*` instead of `myapp*`?,"@eliasp: I also want to match services like `myapp-yada@bla`, so `myapp@*` won't do me any good. :)"
saltstack/salt,https://github.com/saltstack/salt/issues/47171,saltstack_salt_issues_47171,"salt2018.3 cpu problem.

### Description of Issue/Question The CPU load of the if the server is beyond normal. I have noticed that salt master is taking for ever to respond to one test.ping load average: 3025.51, 3041.50, 3102.71 this is ec2 m3.medium the log is full of ::  ### Versions Report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.6.1 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.1 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Aug 4 2017, 00:39:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.2 Maipo locale: UTF-8 machine: x86_64 release: 3.10.0-693.21.1.el7.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.2 Maipo P.S. First time ever reporting if i messed up please tell me how to fix it :)","Can you also provide your master config file, so that I can use that to try and replicate this issue? Thanks, Daniel",Hello I have added the changed in ht master config file 
saltstack/salt,https://github.com/saltstack/salt/issues/48698,saltstack_salt_issues_48698,"Beacon inotify problem

### Description of Issue/Question I am trying to set up beacon as in the example doc for ",do you have the pyinotify dependency installed?,"Hello, Could you please point me to check the dependencies ? [root]$ pip install pyinotify Requirement already satisfied: pyinotify in /usr/lib/python2.7/site-packages (0.9.4)"
saltstack/salt,https://github.com/saltstack/salt/issues/51373,saltstack_salt_issues_51373,"mac_service can't tell the difference between agents and daemons with the same name.

### Description of Issue/Question If you have a mac_service agent and daemon with the same Label name salt will not be able to notice the agent as the list of available services is kept in a dictionary with the label name as the key. Since the Daemons are processed after the Agents the Daemon overwrites the agent. Just making this issue to make it visible to others. @Ch3LL Thinking about changing the services to be stored with file_path as the main identifier key. Thoughts?",will an agent and daemon on mac always contain a file_path?,I believe so yes. That’s the only way to create one that I know off.
saltstack/salt,https://github.com/saltstack/salt/issues/47265,saltstack_salt_issues_47265,"staltstack for windows excute powershell script get an error

Processing -File ''c:\windows\temp\__salt.tmp.cq9hem.ps1'' failed: The given path's format is not supported. Specify a valid path for the -File parameter.","Can you provide me with more information, including the --versions-report that the issue template requested, and steps to reproduce this? Daniel",salt stack version: Salt-Minion-2018.3.0-Py3-AMD64-Setup.exe windows powershell version：5.0.10586.117 salt '*' cmd.script salt://scripts/windows_task.ps1 shell='powershell'
saltstack/salt,https://github.com/saltstack/salt/issues/47346,saltstack_salt_issues_47346,"Unable to get salt-proxy to work

### Description of Issue/Question I have recently setup salt-master from https://repo.saltstack.com/2017.7.html#rhel using the below command. **sudo yum install https://repo.saltstack.com/yum/redhat/salt-repo-2017.7-1.el7.noarch.rpm** I am trying to setup a proxy minion using the documentation @ https://docs.saltstack.com/en/develop/topics/proxyminion/demo.html which doesn't seem to be working. I am able to accept the key on the salt-master, but when I do a test.ping against the proxy minion, I get an error. **Minion did not return. [Not connected]** I have setup the proxy minion process on the salt-master which didn't work. I have also tried setting it up on another machine without and with salt-minion running on it, but the behavior is the same. I get the same result when I do test.ping from salt master. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) [root@vm07 pillar]# pwd /srv/pillar [root@vm07 pillar]# cat top.sls p8000.sls base: 'p8000': - p8000 proxy: proxytype: rest_sample url: http://10.43.1.85:8000 [root@vm07 pillar]# cat /etc/salt/proxy | grep ^master master: localhost [root@vm07 pillar]# [root@vm07 pillar]# systemctl status salt-master ● salt-master.service - The Salt Master Server Loaded: loaded (/usr/lib/systemd/system/salt-master.service; disabled; vendor preset: disabled) Active: active (running) since Fri 2018-04-27 00:07:40 EDT; 46min ago Docs: man:salt-master(1) file:///usr/share/doc/salt/html/contents.html https://docs.saltstack.com/en/latest/contents.html Main PID: 32527 (salt-master) CGroup: /system.slice/salt-master.service ├─32527 /usr/bin/python /usr/bin/salt-master ├─32533 /usr/bin/python /usr/bin/salt-master ├─32538 /usr/bin/python /usr/bin/salt-master ├─32539 /usr/bin/python /usr/bin/salt-master ├─32542 /usr/bin/python /usr/bin/salt-master ├─32543 /usr/bin/python /usr/bin/salt-master ├─32544 /usr/bin/python /usr/bin/salt-master ├─32546 /usr/bin/python /usr/bin/salt-master ├─32552 /usr/bin/python /usr/bin/salt-master ├─32553 /usr/bin/python /usr/bin/salt-master ├─32554 /usr/bin/python /usr/bin/salt-master └─32555 /usr/bin/python /usr/bin/salt-master Apr 27 00:07:39 vm07 systemd[1]: Starting The Salt Master Server... Apr 27 00:07:40 vm07 systemd[1]: Started The Salt Master Server. [root@vm07 pillar]# [root@vm07 pillar]# salt-key Accepted Keys: p8000 leaf-019 sto-001a sto-001b vm07 Denied Keys: Unaccepted Keys: Rejected Keys: [root@vm07 pillar]# [root@vm07 pillar]# salt '*' test.ping vm07: True sto-001b: True leaf-019: True sto-001a: True p8000: Minion did not return. [Not connected] [root@vm07 pillar]# salt --version salt 2017.7.5 (Nitrogen) [root@vm07 pillar]# As mentioned, I also tried setting up salt proxy minion on another machine and below is the configuration on it: [root@vm08 ~]# cat /etc/salt/proxy | grep ^master master: vm07 [root@vm08 ~]# [root@vm08 ~]# yum list installed | grep salt salt.noarch 2016.11.3-1.el7 salt-minion.noarch 2016.11.3-1.el7 [root@vm08 ~]# ### Steps to Reproduce Issue Version of salt master and the configuration that is in use has been provided already. ### Versions Report [root@vm07 pillar]# salt --version salt 2017.7.5 (Nitrogen) [root@vm07 pillar]#",Do you have the rest_example python script running? https://github.com/saltstack/salt-contrib/tree/master/proxyminion_rest_example I do not see this mentioned in your writeup Daniel,"Yes, it was the REST API python command that I incorrectly ran. After that, I was able to ping proxy minion from salt master. Thank you for the assistance! Appreciate your response. On Fri, Apr 27, 2018, 21:32 Daniel Wallace <notifications@github.com> wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/47362,saltstack_salt_issues_47362,"Orchestrate order of states from different targets

### Orchestrate states from different targets I'd like to setup a webserver on the salt master/frontend (managed by salt itself) to serve linux packages to my fleet of minions; to achieve this, the webserver needs to be enabled before the minions start ### Setup && Steps to Reproduce Issue  Both the frontend and minion(s) are fresh CentOS docker images, running the same salt versions.",Does that help with your use case?,"Wow! That's exactly my use case! I completely missed the orchestrate runner, now I'm gonna head back to study! :)"
saltstack/salt,https://github.com/saltstack/salt/issues/50444,saltstack_salt_issues_50444,"Windows 7 32-bit Minions broken on 2018.3.3 - Windows Service Gone

### Description of Issue/Question On a bunch of Windows Minions, suddenly, the salt-minion service is gone. When I look at services.msc or Get-Service in PowerShell, there is not a salt-minion service. Installing fresh, reinstall from Chocolatey, or a reinstall from the Windows installers located [here](https://docs.saltstack.com/en/latest/topics/installation/windows.html) results in a successful reinstall. However, there is no salt-minion service afterwards. It's like the installation never creates a salt-minion service on the system and therefore, of course, cannot ever start salt-minion. Another thing, is that most of these minions were previously working well with the Salt Master, and show up in the salt-key -L list. ### Versions Report Version 2018.3.3 I tried with both 32-bit Py2 and Py3 versions. I'm 99% sure that the commonality between all these Windows machines is Windows 7 32-bit. I can NOT seem to find any Win10 x64 minions with the same issue. If I do, I'll update. I did find a Win7 x64 minion, and that IS working just fine.",What version are you migrating from?,I'm not migrating from anything. It's like this from a fresh install of Salt-Minion.
saltstack/salt,https://github.com/saltstack/salt/issues/47925,saltstack_salt_issues_47925,"GitFS looking for files in the master branch only

### Description of Issue/Question I've got a fairly simple gitfs setup that uses a single repo with 3 branches: dev, stg, and master. I have a state file that runs a scrips that resides in a subfolder called scripts. The script only exists in the dev branch, and the minion has the saltenv: dev configuration value and runs other sls files from that branch just fine. When I run the state the references the script, I get the following error: Despite the minion correctly reporting that it is in the dev environment, when I call a script by using salt://scripts/custom_cultures.ps1, it will only cache it and execute it if it exists in the master branch (base environment). ### Setup Relevant master config settings:  ### Versions Report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 1.6.0 cherrypy: Not Installed dateutil: 1.5 docker-py: Not Installed gitdb: 2.0.3 gitpython: 2.1.10 ioflo: Not Installed Jinja2: 2.7.2 libgit2: 0.26.3 libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.1 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.26.4 Python: 2.7.5 (default, Feb 20 2018, 09:19:12) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: 2.0.3 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: redhat 7.5 Maipo locale: UTF-8 machine: x86_64 release: 3.10.0-862.3.2.el7.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.5 Maipo",Can you use the remote-exec counterpart for `cmd.script` and see if it fails in the same way? ,"You're right @terminalmage - the remote-exec command worked fine (more or less - the script errors out but that's a different story ;)) Still not sure why cmd.script has a problem with the environment. Full disclosure, I am editing the cmdmod.py file on the Windows system as referenced by swickera at the bottom of this issue: https://github.com/saltstack/salt/issues/46524 I can't imagine this would impact the environment, but still, here it is. As part of bootstrapping the node, I fire an event at the Salt server that runs the following state file: "
saltstack/salt,https://github.com/saltstack/salt/issues/48725,saltstack_salt_issues_48725,"How to condition if a disk exists before lvm.pv_present it

### Description of Issue/Question I want to condition if a disk exists before lvm.pv_present it ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) First i try onlyif under lvm.pv_present,but failed ",Can you verify that the `lvm` binary is installed?,"Unbelievable,I'm sure that have install `lvm` yestoday.Retry `salt HD1F_weixin state.sls init.bb` today it turn fine."
saltstack/salt,https://github.com/saltstack/salt/issues/47628,saltstack_salt_issues_47628,"State Aggregate Breaks Requisites

Setting  is used. This is related to #21312, which has been marked as stale, but the issue appears to persist.",Can you include a state example to help easily replicate this issue?,"See below for an example of the repository issue. Everything is shown together here, but the  The issue with services is another case where a problem can occur, but the source of the problem is the same."
saltstack/salt,https://github.com/saltstack/salt/issues/51046,saltstack_salt_issues_51046,"network.managed doesn't support static networks on CentOS 7

### Description of Issue/Question I traced this a little ways and it looks like the network state relies on the ip module which is actually a virtual module and is being supplied by rh_ip.py. There is a list of supported protocols in the _parse_settings_eth function with only none, bootp, and dhcp are present. This is in contrast to the debian_ip.py which includes static, loopback and ppp (but not none). ### Setup ",Can you work further and make a PR with the feature?,I'll see if I can find the time but no promises.
saltstack/salt,https://github.com/saltstack/salt/issues/47585,saltstack_salt_issues_47585,"ext_pillar mysql problem

I'm trying to start ext_pillar with mysql module. salt master config:  Is anybody knows what is wrong ? Salt Version: Salt: 2017.7.4 Dependency Versions: cffi: 1.11.5 cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.5 pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Aug 4 2017, 00:39:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.4.1708 Core locale: UTF-8 machine: x86_64 release: 3.10.0-693.17.1.el7.x86_64 system: Linux version: CentOS Linux 7.4.1708 Core",can you paste a minimal set of the sanitized version of the mysql query outside of salt?,"MariaDB [salt_pillars]> SELECT proxytype, driver, host, username, password FROM devices WHERE device_name = 'csr01' -> ; +-----------+--------+---------------+----------+----------+ | proxytype | driver | host | username | password | +-----------+--------+---------------+----------+----------+ | napalm | ios | 1.1.1.1 | cisco | cisco | +-----------+--------+---------------+----------+----------+"
saltstack/salt,https://github.com/saltstack/salt/issues/47591,saltstack_salt_issues_47591,"x509.certificate_managed M2Crypto - Exception RSAError(bad password read)

### Description of Issue/Question My states are failing since updating my environment. I am clueless why they are failing now. I checked my git history of my states and did not change them since the last successfull state run(since my certificates are only 90 days valid). I would be glad if someone can help me out or point me the way to debug this. The following exception is occuring. ",can you share the sanitized version of your `x509.certificate_managed` state so i can try to replicate?,You can see the sanitized version in my attached file [debug.txt](https://github.com/saltstack/salt/files/1991938/debug.txt) 
saltstack/salt,https://github.com/saltstack/salt/issues/47593,saltstack_salt_issues_47593,"Can't upgrade salt-minion in Amazon Linux AMI release 2018.03 via yum

### Description of Issue/Question After upgrade via yum with the offical repos of saltstack the salt-minion don't work with the services. The issue is related exactly with this code https://github.com/saltstack/salt/commit/e4d1d5bf110f4e83b7c26f8e6b46c4cb99e00652#diff-6b90f8759e00cc326a98173a1685d3a1 what is not included in the RPM package https://repo.saltstack.com/yum/amazon/latest/x86_64/latest/salt-2018.3.0-1.amzn1.noarch.rpm ### Setup ",Does the PR you mention fix the issue?,"@Ch3LL Yes. For example, just commenting those lines: "
saltstack/salt,https://github.com/saltstack/salt/issues/47615,saltstack_salt_issues_47615,"salt-ssh onboarding new hosts - empty password string breaks salt-ssh command

### Description of Issue/Question while running ""salt-ssh -i --rosterfile ./test.roster '*' test.ping"" I double tapped the enter key while trying to answer the ""Permission denied for host examplehostname, do you want to deploy the salt-ssh key?"" question and it threw the below error - I had to restart the command from the beginning and since the test.roster file isn't short it was quite the time suck. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) regular roster file setup like the examples in my users home directory - contains just hostname and IP (example below) - The server where salt-ssh is being run is a standalone salt-ssh server, there is no salt-master installed examplehost: host: 192.168.1.100 ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) we use an ldap user ""salt-sshexampleuser"" for the salt-ssh user - when running the initial test.ping against new hosts in a roster file it asks for the users password if ssh keys have not been setup for this user on that host. Basically test.ping a custom roster file, answer yes to deploying the salt-ssh key, then press enter to submit an empty password [ERROR ] An un-handled exception was caught by salt's global exception handler: TerminalException: You need to pass at least one of ""args"", ""executable"" Traceback (most recent call last): File ""/usr/local/bin/salt-ssh"", line 11, in <module> sys.exit(salt_ssh()) File ""/usr/local/lib/python2.7/dist-packages/salt/scripts.py"", line 416, in salt_ssh client.run() File ""/usr/local/lib/python2.7/dist-packages/salt/cli/ssh.py"", line 21, in run ssh.run() File ""/usr/local/lib/python2.7/dist-packages/salt/client/ssh/__init__.py"", line 643, in run ret = self.key_deploy(host, ret) File ""/usr/local/lib/python2.7/dist-packages/salt/client/ssh/__init__.py"", line 363, in key_deploy return self._key_deploy_run(host, target, True) File ""/usr/local/lib/python2.7/dist-packages/salt/client/ssh/__init__.py"", line 386, in _key_deploy_run stdout, stderr, retcode = single.shell.copy_id() File ""/usr/local/lib/python2.7/dist-packages/salt/client/ssh/shell.py"", line 235, in copy_id stdout, stderr, retcode = self._run_cmd(self._copy_id_str_old()) File ""/usr/local/lib/python2.7/dist-packages/salt/client/ssh/shell.py"", line 381, in _run_cmd stream_stderr=False) File ""/usr/local/lib/python2.7/dist-packages/salt/utils/vt.py"", line 127, in __init__ 'You need to pass at least one of ""args"", ""executable"" ' TerminalException: You need to pass at least one of ""args"", ""executable"" Traceback (most recent call last): File ""/usr/local/bin/salt-ssh"", line 11, in <module> sys.exit(salt_ssh()) File ""/usr/local/lib/python2.7/dist-packages/salt/scripts.py"", line 416, in salt_ssh client.run() File ""/usr/local/lib/python2.7/dist-packages/salt/cli/ssh.py"", line 21, in run ssh.run() File ""/usr/local/lib/python2.7/dist-packages/salt/client/ssh/__init__.py"", line 643, in run ret = self.key_deploy(host, ret) File ""/usr/local/lib/python2.7/dist-packages/salt/client/ssh/__init__.py"", line 363, in key_deploy return self._key_deploy_run(host, target, True) File ""/usr/local/lib/python2.7/dist-packages/salt/client/ssh/__init__.py"", line 386, in _key_deploy_run stdout, stderr, retcode = single.shell.copy_id() File ""/usr/local/lib/python2.7/dist-packages/salt/client/ssh/shell.py"", line 235, in copy_id stdout, stderr, retcode = self._run_cmd(self._copy_id_str_old()) File ""/usr/local/lib/python2.7/dist-packages/salt/client/ssh/shell.py"", line 381, in _run_cmd stream_stderr=False) File ""/usr/local/lib/python2.7/dist-packages/salt/utils/vt.py"", line 127, in __init__ 'You need to pass at least one of ""args"", ""executable"" ' salt.utils.vt.TerminalException: You need to pass at least one of ""args"", ""executable"" Exiting gracefully on Ctrl-c ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) salt-ssh is agentless homies :)",can you include a versions report with `salt-ssh --versions-report`?,"Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.5.1 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.6 (default, Nov 23 2017, 15:49:48) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: Not Installed RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: Not Installed System Versions: dist: Ubuntu 14.04 trusty locale: UTF-8 machine: x86_64 release: 4.4.0-112-generic system: Linux version: Ubuntu 14.04 trusty"
saltstack/salt,https://github.com/saltstack/salt/issues/55297,saltstack_salt_issues_55297,"file.replace idempotency

### Description of Issue When using the `file.replace` state, the file's modification date is changed even if there is no changes. An older issue was also reporting this issue : https://github.com/saltstack/salt/issues/18841 This behavior is problematic when used on minions with a HIDS or any FIM. ### Setup / Steps to Reproduce Issue  A unit test for this problem : https://github.com/slaws/salt/blob/file-replace-idempotency/tests/unit/modules/test_file.py#L120 This commit seems to correct the problem : https://github.com/slaws/salt/commit/d85943e798fecb319bba2a6058690106b5cf3b1d It does not seem to break the other tests, however I'm not sure this is the best way to correct it.","do you mind sharing your state file? Your unit test is specific to the file execution module, but i cant seem to replicate it with the state module.","Hello @Ch3LL , Do you need more than the statefile present in the ""step to reproduce"" section ?"
saltstack/salt,https://github.com/saltstack/salt/issues/47756,saltstack_salt_issues_47756,"Looping through multiple pillar levels error

### Description of Issue/Question I'm running my setup minion less to test. I'm attempting to loop through a multi level dictionary and not exactly sure how to get the concepts down packed to drill down. Every attempt has landed me with this error. ","Can you provide some more information? Thanks, Daniel",Thanks for looking into this. I get the same error whether I use 'items' or 'iteritems' . See below. I'll keep troubleshooting on my one. Much appreciated. ` local: - Rendering SLS 'base:directory' failed: Jinja variable 'unicode object' has no attribute 'items' ` `local: - Rendering SLS 'base:directory' failed: Jinja variable 'unicode object' has no attribute 'iteritems' `
saltstack/salt,https://github.com/saltstack/salt/issues/49153,saltstack_salt_issues_49153,"win_iis.create_app fails if IIS web app is already exists

### Description of Issue/Question I am using win_iis.create_app state to create nested webapps on IIS https://docs.saltstack.com/en/latest/ref/states/all/salt.states.win_iis.html#salt.states.win_iis.create_app IIS Structure is all follows If SubSubApp1 exists, it fails with following error  ### Steps to Reproduce Issue When creating nested webapp (i.e. webapp inside other webapp). It would fail if the subsubapp exists. Create subsubapp ### Versions Report Salt master version report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: Not Installed cherrypy: 3.5.0 dateutil: 2.4.2 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Dec 4 2017, 14:50:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-1065-aws system: Linux version: Ubuntu 16.04 xenial Salt Minion version report Salt Version: Salt: 2018.3.2 Dependency Versions: cffi: 1.10.0 cherrypy: 10.2.1 dateutil: 2.6.1 docker-py: Not Installed gitdb: 2.0.3 gitpython: 2.1.3 ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.6 msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 3.5.3 (v3.5.3:1880cb95a742, Jan 16 2017, 16:02:32) [MSC v.1900 64 bit (AMD64)] python-gnupg: 0.4.1 PyYAML: 3.12 PyZMQ: 16.0.3 RAET: Not Installed smmap: 2.0.3 timelib: 0.2.4 Tornado: 4.5.1 ZMQ: 4.1.6 System Versions: dist: locale: cp1252 machine: AMD64 release: 2008ServerR2 system: Windows version: 2008ServerR2 6.1.7601 SP1 Multiprocessor Free",Could you post your entire state file? (sanitized),"Sorry my bad, I re-walk the entire state file and found issue. It was related to alphabet casing. Sub sub app existing was in Title case and I was passing via pillar was all small case."
saltstack/salt,https://github.com/saltstack/salt/issues/47834,saltstack_salt_issues_47834,"Salt Master is failing to start when running as Normal User or UnPrivileged User

### Description of Issue/Question Salt Master is failing to start when running as Normal User or UnPrivileged User. ### Setup After installing the salt-master, master got started without any issues. But when the master config file is updated with user parameter and the below folders ownership is changed to the User. /var/log/salt /var/run/salt /var/cache/salt /etc/salt I am getting the below error 2018-05-24 08:41:12,967 [salt.log.setup :1165][ERROR ][8950] An un-handled exception was caught by salt's global exception handler: OSError: [Errno 2] No such file or directory Traceback (most recent call last): File ""/usr/bin/salt-master"", line 22, in <module> salt_master() File ""/usr/lib/python2.7/site-packages/salt/scripts.py"", line 97, in salt_master master.start() File ""/usr/lib/python2.7/site-packages/salt/cli/daemons.py"", line 215, in start self.master.start() File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 641, in start salt.crypt.Crypticle.generate_key_string() File ""/usr/lib64/python2.7/multiprocessing/__init__.py"", line 260, in Array return Array(typecode_or_type, size_or_initializer, **kwds) File ""/usr/lib64/python2.7/multiprocessing/sharedctypes.py"", line 119, in Array lock = RLock() File ""/usr/lib64/python2.7/multiprocessing/__init__.py"", line 183, in RLock return RLock() File ""/usr/lib64/python2.7/multiprocessing/synchronize.py"", line 172, in __init__ SemLock.__init__(self, RECURSIVE_MUTEX, 1, 1) File ""/usr/lib64/python2.7/multiprocessing/synchronize.py"", line 75, in __init__ sl = self._semlock = _multiprocessing.SemLock(kind, value, maxvalue) OSError: [Errno 2] No such file or directory [root@RCOVLNX3300 salt]# ls -ltr /usr/lib/python2.7/site-packages/salt/scripts.py -rw-r--r--. 1 root root 15370 Mar 29 11:52 /usr/lib/python2.7/site-packages/salt/scripts.py [root@RCOVLNX3300 salt]# ls -ltr /usr/bin/salt-master -rwxr-xr-x. 1 root root 744 Apr 2 10:42 /usr/bin/salt-master [root@RCOVLNX3300 salt]# ls -ltr /usr/lib/python2.7/site-packages/salt/cli/daemons.py -rw-r--r--. 1 root root 23579 Mar 29 11:52 /usr/lib/python2.7/site-packages/salt/cli/daemons.py [root@RCOVLNX3300 salt]# ls -ltr /usr/lib/python2.7/site-packages/salt/master.py -rw-r--r--. 1 root root 90137 Mar 29 11:52 /usr/lib/python2.7/site-packages/salt/master.py [root@RCOVLNX3300 salt]# ls -ltr /usr/lib64/python2.7/multiprocessing/__init__.py -rwxr-xr-x. 1 root root 7805 May 3 2017 /usr/lib64/python2.7/multiprocessing/__init__.py [root@RCOVLNX3300 salt]# ls -ltr /usr/lib64/python2.7/multiprocessing/sharedctypes.py -rwxr-xr-x. 1 root root 7697 May 3 2017 /usr/lib64/python2.7/multiprocessing/sharedctypes.py [root@RCOVLNX3300 salt]# ls -ltr /usr/lib64/python2.7/multiprocessing/__init__.py -rwxr-xr-x. 1 root root 7805 May 3 2017 /usr/lib64/python2.7/multiprocessing/__init__.py [root@RCOVLNX3300 salt]# ls -ltr /usr/lib64/python2.7/multiprocessing/synchronize.py -rwxr-xr-x. 1 root root 10653 May 3 2017 /usr/lib64/python2.7/multiprocessing/synchronize.py [root@RCOVLNX3300 salt]# ls -ltr /usr/lib64/python2.7/multiprocessing/synchronize.py -rwxr-xr-x. 1 root root 10653 May 3 2017 /usr/lib64/python2.7/multiprocessing/synchronize.py ### Steps to Reproduce Issue 1. Update the user parameter in Master config file 2. Change the ownership to use for the below folders /var/log/salt/ /var/cache/salt/ /var/run/salt/ /etc/salt/ ### Versions Report Dependency Versions: cffi: Not Installed cherrypy: unknown dateutil: 1.5 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.28.2 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, May 3 2017, 07:55:04) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: redhat 7.4 Maipo locale: UTF-8 machine: x86_64 release: 3.10.0-693.21.1.el7.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.4 Maipo","Can you provide the full --versions-report of the master, that includes the salt version? Thanks, Daniel","Hello, When i am trying this in test cloud server it is working fine for me. But when i am trying actual production server, it is throwing me an error ''No Such file / directory"". Not sure which file / directory it is trying to access. Below is the complete log trace [root@RCOVLNX3300 master]# salt-master -l debug [DEBUG ] Reading configuration from /etc/salt/master [DEBUG ] Configuration file path: /etc/salt/master [WARNING ] Insecure logging configuration detected! Sensitive data may be logged. [INFO ] Setting up the Salt Master [DEBUG ] Marking 'base64_encode' as a jinja filter [DEBUG ] Marking 'base64_decode' as a jinja filter [DEBUG ] Marking 'md5' as a jinja filter [DEBUG ] Marking 'sha256' as a jinja filter [DEBUG ] Marking 'sha512' as a jinja filter [DEBUG ] Marking 'hmac' as a jinja filter [DEBUG ] Marking 'random_hash' as a jinja filter [DEBUG ] Marking 'rand_str' as a jinja filter [DEBUG ] Marking 'file_hashsum' as a jinja filter [DEBUG ] Marking 'http_query' as a jinja filter [DEBUG ] Marking 'yaml_dquote' as a jinja filter [DEBUG ] Marking 'yaml_squote' as a jinja filter [DEBUG ] Marking 'yaml_encode' as a jinja filter [DEBUG ] Marking 'raise' as a jinja global [DEBUG ] Marking 'match' as a jinja test [DEBUG ] Marking 'equalto' as a jinja test [DEBUG ] Marking 'skip' as a jinja filter [DEBUG ] Marking 'sequence' as a jinja filter [DEBUG ] Marking 'to_bool' as a jinja filter [DEBUG ] Marking 'quote' as a jinja filter [DEBUG ] Marking 'regex_escape' as a jinja filter [DEBUG ] Marking 'regex_search' as a jinja filter [DEBUG ] Marking 'regex_match' as a jinja filter [DEBUG ] Marking 'regex_replace' as a jinja filter [DEBUG ] Marking 'uuid' as a jinja filter [DEBUG ] Marking 'unique' as a jinja filter [DEBUG ] Marking 'min' as a jinja filter [DEBUG ] Marking 'max' as a jinja filter [DEBUG ] Marking 'avg' as a jinja filter [DEBUG ] Marking 'union' as a jinja filter [DEBUG ] Marking 'intersect' as a jinja filter [DEBUG ] Marking 'difference' as a jinja filter [DEBUG ] Marking 'symmetric_difference' as a jinja filter [DEBUG ] salt.crypt.get_rsa_key: Loading private key [DEBUG ] salt.crypt._get_key_with_evict: Loading private key [DEBUG ] Loaded master key: /etc/salt/pki/master/master.pem [INFO ] Preparing the root key for local communication [DEBUG ] Removing stale keyfile: /var/cache/salt/master/.root_key [INFO ] Preparing the fttacct key for local communication [DEBUG ] Removing stale keyfile: /var/cache/salt/master/.fttacct_key [PROFILE ] Beginning pwd.getpwall() call in masterapi access_keys function [PROFILE ] End pwd.getpwall() call in masterapi access_keys function [DEBUG ] Created pidfile: /var/run/salt-master.pid [DEBUG ] Chowned pidfile: /var/run/salt-master.pid to user: fttacct [INFO ] Starting up the Salt Master [DEBUG ] LazyLoaded roots.envs [DEBUG ] Could not LazyLoad roots.init: 'roots.init' is not available. [INFO ] salt-master is starting as user 'fttacct' [INFO ] Current values for max open files soft/hard setting: 1024/4096 [INFO ] The value for the 'max_open_files' setting, 100000, is higher than the highest value the user running salt is allowed to set (4096). Defaulting to 4096. [INFO ] Raising max open files value to 4096 [INFO ] New values for max open files soft/hard values: 4096/4096 [ERROR ] An un-handled exception was caught by salt's global exception handler: OSError: [Errno 2] No such file or directory Traceback (most recent call last): File ""/bin/salt-master"", line 22, in <module> salt_master() File ""/usr/lib/python2.7/site-packages/salt/scripts.py"", line 97, in salt_master master.start() File ""/usr/lib/python2.7/site-packages/salt/cli/daemons.py"", line 215, in start self.master.start() File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 641, in start salt.crypt.Crypticle.generate_key_string() File ""/usr/lib64/python2.7/multiprocessing/__init__.py"", line 260, in Array return Array(typecode_or_type, size_or_initializer, **kwds) File ""/usr/lib64/python2.7/multiprocessing/sharedctypes.py"", line 119, in Array lock = RLock() File ""/usr/lib64/python2.7/multiprocessing/__init__.py"", line 183, in RLock return RLock() File ""/usr/lib64/python2.7/multiprocessing/synchronize.py"", line 172, in __init__ SemLock.__init__(self, RECURSIVE_MUTEX, 1, 1) File ""/usr/lib64/python2.7/multiprocessing/synchronize.py"", line 75, in __init__ sl = self._semlock = _multiprocessing.SemLock(kind, value, maxvalue) OSError: [Errno 2] No such file or directory Traceback (most recent call last): File ""/bin/salt-master"", line 22, in <module> salt_master() File ""/usr/lib/python2.7/site-packages/salt/scripts.py"", line 97, in salt_master master.start() File ""/usr/lib/python2.7/site-packages/salt/cli/daemons.py"", line 215, in start self.master.start() File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 641, in start salt.crypt.Crypticle.generate_key_string() File ""/usr/lib64/python2.7/multiprocessing/__init__.py"", line 260, in Array return Array(typecode_or_type, size_or_initializer, **kwds) File ""/usr/lib64/python2.7/multiprocessing/sharedctypes.py"", line 119, in Array lock = RLock() File ""/usr/lib64/python2.7/multiprocessing/__init__.py"", line 183, in RLock return RLock() File ""/usr/lib64/python2.7/multiprocessing/synchronize.py"", line 172, in __init__ SemLock.__init__(self, RECURSIVE_MUTEX, 1, 1) File ""/usr/lib64/python2.7/multiprocessing/synchronize.py"", line 75, in __init__ sl = self._semlock = _multiprocessing.SemLock(kind, value, maxvalue) OSError: [Errno 2] No such file or directory Please help me with this issue."
saltstack/salt,https://github.com/saltstack/salt/issues/50957,saltstack_salt_issues_50957,"Unable to start salt minion in RHEL 6, but no error in salt-minion -l debug

###Description Getting an error ""unable to load the config values from /etc/salt while starting the salt-minion service. [root@xxxxxxxxx bin]# service salt-minion start ERROR: Unable to look-up config values for /etc/salt I have tried to run the salt-minion -l debug but the minion is successfully able to connect to minion and able to receive the requests and data from master. However i am getting the below error when i am running the ""salt-call -c /etc/salt/minion --local config.get sock_dir"" [root@xxxxxxxxx bin]# salt-call -c /etc/salt/minion --local config.get sock_dir Traceback (most recent call last): File ""/usr/bin/salt-call"", line 11, in <module> salt_call() File ""/usr/lib/python2.7/site-packages/salt/scripts.py"", line 405, in salt_call import salt.cli.call File ""/usr/lib/python2.7/site-packages/salt/cli/call.py"", line 8, in <module> import salt.cli.caller File ""/usr/lib/python2.7/site-packages/salt/cli/caller.py"", line 37, in <module> from raet import raeting, nacling File ""/usr/lib/python2.7/site-packages/raet/__init__.py"", line 12, in <module> importlib.import_module("".{0}"".format(m), package='raet') File ""/usr/lib64/python2.7/importlib/__init__.py"", line 37, in import_module __import__(name) File ""/usr/lib/python2.7/site-packages/raet/nacling.py"", line 11, in <module> import libnacl File ""/usr/lib/python2.7/site-packages/libnacl/__init__.py"", line 119, in <module> crypto_box_SEEDBYTES = nacl.crypto_box_seedbytes() File ""/usr/lib64/python2.7/ctypes/__init__.py"", line 370, in __getattr__ func = self.__getitem__(name) File ""/usr/lib64/python2.7/ctypes/__init__.py"", line 375, in __getitem__ func = self._FuncPtr((name_or_ordinal, self)) AttributeError: /usr/lib64/libsodium.so: undefined symbol: crypto_box_seedbytes ### Steps to Reproduce Issue 1. Download all the rpm packages from the salt repo and install them manually in RHEL 6 Operating system. 2. Update the salt master and master_finger in the minion configuration. 3. start the salt-minion service using service salt-minon start ### Versions Report Getting the below error [root@xxxxxxxx bin]# salt-call --versions-report Traceback (most recent call last): File ""/usr/bin/salt-call"", line 11, in <module> salt_call() File ""/usr/lib/python2.7/site-packages/salt/scripts.py"", line 405, in salt_call import salt.cli.call File ""/usr/lib/python2.7/site-packages/salt/cli/call.py"", line 8, in <module> import salt.cli.caller File ""/usr/lib/python2.7/site-packages/salt/cli/caller.py"", line 37, in <module> from raet import raeting, nacling File ""/usr/lib/python2.7/site-packages/raet/__init__.py"", line 12, in <module> importlib.import_module("".{0}"".format(m), package='raet') File ""/usr/lib64/python2.7/importlib/__init__.py"", line 37, in import_module __import__(name) File ""/usr/lib/python2.7/site-packages/raet/nacling.py"", line 11, in <module> import libnacl File ""/usr/lib/python2.7/site-packages/libnacl/__init__.py"", line 119, in <module> crypto_box_SEEDBYTES = nacl.crypto_box_seedbytes() File ""/usr/lib64/python2.7/ctypes/__init__.py"", line 370, in __getattr__ func = self.__getitem__(name) File ""/usr/lib64/python2.7/ctypes/__init__.py"", line 375, in __getitem__ func = self._FuncPtr((name_or_ordinal, self)) AttributeError: /usr/lib64/libsodium.so: undefined symbol: crypto_box_seedbytes","Can you provide your minion configuration? @dwoz This looks like it might be something related to crypto libraries installed, any thoughts?",@dwoz salt-minion version installed is 2018.3.2
saltstack/salt,https://github.com/saltstack/salt/issues/47971,saltstack_salt_issues_47971,"Question: How to update windows salt minion - silent installation

### How to update salt minion on windows from command line? I havent found direct answer to this in the docs, but I think that calling the .exe might do the trick and there is actually no need to uninstall the previous version (just guessing based on googling). ### Steps to Reproduce Issue Lets say I have Installed minion version 2018.3.0 and now version 2018.3.1 is released. Can I run the executable like this: Salt-Minion-Setup.exe /S /master=1.2.3.4 /minion-name=name Will this perform an upgrade? Is there some recommendation i.e. files to backup? Thank you!",Does the suggestion by @xenophonf answer your question?,@garethgreenaway Yes it does. Thanks!
saltstack/salt,https://github.com/saltstack/salt/issues/47898,saltstack_salt_issues_47898,"salt-cloud invoking bootstrap-salt.sh on remote instance incorrectly parses non-ascii chars

Description of Issue/Question We're deploying instances on GCE using salt-cloud in order to have the minions connect to our saltmaster immediately after deploy. The problem is, that when a debian 9 (and possibly others with kernel 4.x) instance is created using salt-cloud and the necessary provider and profile, bootstrap-salt.sh spits out an error message as soon as systemctl enable salt-minion occurs. We want to use bootstrap-salt.sh, or a custom script invoking it after adjusting the necessary apt sources to point to our internal mirror, to remain OS agnostic. Setup salt-master running on a google compute instance. /etc/salt/cloud.provider.d/gcp-project-id.conf gcp-project-id: Set up the Project name and Service Account authorization project: ""gcp-project-id"" service_account_email_address: ""salt-cloud@gcp-project-id.iam.gserviceaccount.com"" service_account_private_key: ""/path/to/json-file"" Set up the location of the salt master minion: master: FQDN or IP of Master start_action: state.apply Set up grains information, which will be common for all nodes using this provider grains: node_type: broker release: 1.0.1 driver: gce /etc/salt/cloud.profiles.d/gcp-project-id.conf gcp-project-id-deb: provider: gcp-project-id size: f1-micro image: debian-9-stretch-v20180510 network: gcp-project-id-vpc subnetwork: europe-west4 location: europe-west4-a external_ip: ""None"" tags: '[""ssh"", ""tag-to-enable-nat""]' use_persistent_disk: True delete_boot_pd: False ssh_interface: private_ips ssh_username: ssh-username-to-be-used-by-salt-cloud ssh_keyfile: /path/to/accompanying-ssh-key Now, a salt-cloud -p gcp-project-id-deb instanceName would result in salt-cloud spinning an instance on GCP, copying the generated key-pair, minion-config and deploy script. However, as soon as the bootstrap script gets to enabling the service in case of systemd and debian 9, it spits out an error stating there's a problem with the profile. Have been searching for a day and a half, but I can'f find any error in my configs. Steps to Reproduce Issue Create project in gcp, create service account with compute-admin privs, create a key (json format) for use in salt-cloud provider config, create profile and try salt-cloud -p as described above. Logs salt-cloud -l debug --script-args='-D' (read the latter arg somewhere, seems to increase verbosity) Setting up salt-common (2018.3.0+ds-1) ... [ERROR ] There was a profile error: 'ascii' codec can't encode character u'\u2192' in position 317: ordinal not in range(128) Traceback (most recent call last): File ""/usr/lib/python2.7/dist-packages/salt/cloud/cli.py"", line 281, in run self.config.get('names') File ""/usr/lib/python2.7/dist-packages/salt/cloud/init.py"", line 1454, in run_profile ret[name] = self.create(vm_) File ""/usr/lib/python2.7/dist-packages/salt/cloud/init.py"", line 1284, in create output = self.cloudsfunc File ""/usr/lib/python2.7/dist-packages/salt/cloud/clouds/gce.py"", line 2581, in create ret = utils['cloud.bootstrap'](vm_, opts) File ""/usr/lib/python2.7/dist-packages/salt/utils/cloud.py"", line 566, in bootstrap deployed = deploy_script(**deploy_kwargs) File ""/usr/lib/python2.7/dist-packages/salt/utils/cloud.py"", line 1547, in deploy_script if root_cmd(deploy_command, tty, sudo, **ssh_kwargs) != 0: File ""/usr/lib/python2.7/dist-packages/salt/utils/cloud.py"", line 2248, in root_cmd retcode = _exec_ssh_cmd(cmd, allow_failure=allow_failure, **kwargs) File ""/usr/lib/python2.7/dist-packages/salt/utils/cloud.py"", line 1809, in _exec_ssh_cmd stdout, stderr = proc.recv() File ""/usr/lib/python2.7/dist-packages/salt/utils/vt.py"", line 310, in recv return self._recv(maxsize) File ""/usr/lib/python2.7/dist-packages/salt/utils/vt.py"", line 688, in _recv self.stream_stdout.write(stdout) UnicodeEncodeError: 'ascii' codec can't encode character u'\u2192' in position 317: ordinal not in range(128) However, on the minion, in /tmp/ there's a log file named bootstrap-salt-log. The last lines read: Setting up salt-common (2018.3.0+ds-1) ... Setting up salt-minion (2018.3.0+ds-1) ... Configuration file '/etc/salt/minion' ==> File on system created by you or by a script. ==> File also in package provided by package maintainer. ==> Using current old file as you requested. Created symlink /etc/systemd/system/multi-user.target.wants/salt-minion.service → /lib/systemd/system/salt-minion.service. Versions and Systems Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.5.3 docker-py: Not Installed gitdb: 2.0.0 gitpython: 2.1.1 ioflo: Not Installed Jinja2: 2.9.4 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (default, Jan 19 2017, 14:48:08) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.1 timelib: Not Installed Tornado: 4.4.3 ZMQ: 4.2.1 System Versions: dist: debian 9.2 locale: ANSI_X3.4-1968 machine: x86_64 release: 4.9.0-4-amd64 system: Linux version: debian 9.2 ./bootstrap-salt.sh -- Version 2018.04.25 Extra information: To determine whether or not this issue is related to bootstrap-script or not, I spun a default GCP instance, ran curl -L https://bootstrap.saltstack.com | sudo sh on it and deployed salt-minion with no problem at all: `Setting up salt-common (2018.3.0+ds-1) ... Setting up salt-minion (2018.3.0+ds-1) ... Created symlink /etc/systemd/system/multi-user.target.wants/salt-minion.service → /lib/systemd/system/salt-minion.service. Processing triggers for libc-bin (2.24-11+deb9u3) ... Processing triggers for systemd (232-25+deb9u3) ... INFO: Running install_debian_check_services() INFO: Running install_debian_restart_daemons() INFO: Running daemons_running() INFO: Salt installed! ` Somehow that arrow symbol causes the bootstrap to fail when invoked from salt-cloud.","Can you try setting your locale to a unicode locale and trying again? Thanks, Daniel","@gtmanfred: The output was from the machine we're running salt and salt-cloud on. In a first attempt to solve this, I've run export LC_ALL=en_US.UTF-8. After this I ran salt -V, which gave the following output: System Versions: dist: debian 9.2 locale: UTF-8 machine: x86_64 release: 4.9.0-4-amd64 system: Linux version: debian 9.2 So far, so good. After the output confirmed that the correct locale was set, I've had salt-cloud create an instance and install the minion again. Strangely, this failed, with the same error message returning, so I ran salt -V again: System Versions: dist: debian 9.2 locale: ANSI_X3.4-1968 machine: x86_64 release: 4.9.0-4-amd64 system: Linux version: debian 9.2 I was getting a bit fed-up with it, so started searching on how to enforce these setting system-wide. Setting LC_ALL=en_US.UTF-8 in /etc/default/locale and a reboot afterwards turned out to be the solution! I also noticed that the LANG was set to en_US.utf8, which I think is a non-existing locale ;-) Again, this confirms that one should not assume settings are correctly set :-)"
saltstack/salt,https://github.com/saltstack/salt/issues/49105,saltstack_salt_issues_49105,"Salt request timed out. The master is not responding.

### Description of Issue/Question saltstack run exception error sometimes success and sometimes failed ![image](https://user-images.githubusercontent.com/14175152/44078426-0255061c-9fd9-11e8-881b-2ae866e22638.png) ![image](https://user-images.githubusercontent.com/14175152/44078037-15988d58-9fd8-11e8-9930-4a2219cbc42a.png) ![image](https://user-images.githubusercontent.com/14175152/44078385-ec28d4f4-9fd8-11e8-816f-8e64eba0a13e.png) ### Setup ### Steps to Reproduce Issue ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) master version ![image](https://user-images.githubusercontent.com/14175152/44078470-259474f0-9fd9-11e8-8a88-878b5896807e.png) minion version ![image](https://user-images.githubusercontent.com/14175152/44078511-3c01481c-9fd9-11e8-837a-7b2a73487ba9.png)",can you provide information about what Salt function you were running that may have caused this?,"this is my abc_test.sls file push_file_test: file.managed: - name: /data/disops_release/iGeneral_client_2.tgz - source: salt://base/file/iGeneral_client_2.tgz - user: root - group: root - mode: 644 It throw error when run `salt 'x.x.x.x' state.sls base.abc_test` ,just transmit file"
saltstack/salt,https://github.com/saltstack/salt/issues/47994,saltstack_salt_issues_47994,"salt.states.mount & salt.modules.mount not working on FreeBSD minion

### Description of Issue/Question Cannot mount shares on FreeBSD via module or state (/proc/self/mounts, /proc/self/mountinfo missing). Mounting manually works fine with the giving opts. ### Setup mount.sls: /mnt/dummy: mount.mounted: - device: nfserver:/mnt/share - fstype: nfs - mkmnt: True - persist: True - mount: True - opts: nsuid,noatime,tcp,rw ### Steps to Reproduce Issue salt 'minion' state.sls mount host: ---------- ID: /mnt/dummy Function: mount.mounted Result: False Comment: An exception occurred in this state: Traceback (most recent call last): File ""/usr/local/lib/python3.6/site-packages/salt/modules/mount.py"", line 242, in active _active_mountinfo(ret) File ""/usr/local/lib/python3.6/site-packages/salt/modules/mount.py"", line 62, in _active_mountinfo raise CommandExecutionError(msg.format(filename)) salt.exceptions.CommandExecutionError: File not readable /proc/self/mountinfo During handling of the above exception, another exception occurred: Traceback (most recent call last): File ""/usr/local/lib/python3.6/site-packages/salt/state.py"", line 1878, in call **cdata['kwargs']) File ""/usr/local/lib/python3.6/site-packages/salt/loader.py"", line 1823, in wrapper return f(*args, **kwargs) File ""/usr/local/lib/python3.6/site-packages/salt/states/mount.py"", line 223, in mounted active = __salt__['mount.active'](extended=True) File ""/usr/local/lib/python3.6/site-packages/salt/modules/mount.py"", line 244, in active _active_mounts(ret) File ""/usr/local/lib/python3.6/site-packages/salt/modules/mount.py"", line 106, in _active_mounts raise CommandExecutionError(msg.format(filename)) salt.exceptions.CommandExecutionError: File not readable /proc/self/mounts ### Versions Report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 1.11.5 cherrypy: Not Installed dateutil: 2.6.1 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10 libgit2: 0.27.0 libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.27.0 Python: 3.6.5 (default, May 10 2018, 01:16:34) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 17.0.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.1.6 System Versions: dist: locale: UTF-8 machine: amd64 release: 11.1-RELEASE-p10 system: FreeBSD version: Not Installed ### Same problem with the mount module $ salt minion mount.active ERROR: File not readable /proc/self/mounts Does anyone have an idea how to get around this?",Can you check what is being returned in the `os` grain on that system?,"Yes! OS detection seems to be broken. On FreeBSD 11 with salt 2018 os returns ""none"". That helps me understand a couple of similar problems and side effects. minion log: ---------- File ""/usr/local/lib/python3.6/site-packages/salt/utils/versions.py"", line 138, in warn_until salt_version=_version_.formatted_version RuntimeError: The warning triggered on filename '/usr/local/lib/python3.6/site-packages/salt/loader.py', line number 1768, is supposed to be shown until version 2014.1.0 (Hydrogen) is released. Current version is now 2018.3.0 (Oxygen). Please remove the warning. 2018-06-06 13:07:49,608 [salt.loader :1729][ERROR ][3980] Exception raised when processing __virtual__ function for salt.loader.hostname.int.module.xbpspkg.opt-1. Module will not be loaded: 'in <string>' requires string as left operand, not NoneType 2018-06-06 13:07:49,608 [salt.loader :1745][WARNING ][3980] salt.loader.hostname.int.module.xbpspkg.opt-1.__virtual__() is wrongly returning `None`. It should either return `True`, `False` or a new name. If you're the developer of the module 'opt-1', please fix this. python3 response for platform: import platform print(platform.system()) _FreeBSD_ print(platform.platform()) _FreeBSD-11.1-RELEASE-p10-amd64-64bit-ELF_"
saltstack/salt,https://github.com/saltstack/salt/issues/48078,saltstack_salt_issues_48078,"fresh install result on mac = ValueError: invalid literal for float(): 1024,00

### Description of Issue ### Setup no config, just started from scratch new python environment in conda ### Steps to Reproduce Issue  trying salt --versions-report and salt --help also thrown the same error : ValueError: invalid literal for float(): 1024,00 ### Versions Report can not generate salt --version-report, but seen in pip install salt = salt-2018.3.0 any idea ? thx",can you run the minion process and do you run into the same thing? And which macosx version are you using?,"macos siera version 10.12.6 started from fresh, no minions created yet"
saltstack/salt,https://github.com/saltstack/salt/issues/51316,saltstack_salt_issues_51316,"execute cp.get_dir

Hello, when I installed the salt 2018.3.0 version, I can't execute cp.get_dir, cp.get_file can be used normally. Error is as follows： [root@master_1 qfpay]# salt 'minion_1' cp.get_dir salt://f5 /tmp/ minion_1: The minion function caused an exception: Traceback (most recent call last): File ""/home/qfpay/python/lib/python2.7/site-packages/salt/minion.py"", line 1600, in _thread_return return_data = minion_instance.executors[fname](opts, data, func, args, kwargs) File ""/home/qfpay/python/lib/python2.7/site-packages/salt/executors/direct_call.py"", line 12, in execute return func(*args, **kwargs) File ""/home/qfpay/python/lib/python2.7/site-packages/salt/modules/cp.py"", line 352, in get_dir return client().get_dir(path, dest, saltenv, gzip) File ""/home/qfpay/python/lib/python2.7/site-packages/salt/fileclient.py"", line 437, in get_dir for fn in self.file_list(saltenv, prefix=path): File ""/home/qfpay/python/lib/python2.7/site-packages/salt/fileclient.py"", line 1276, in file_list return salt.utils.data.decode(self.channel.send(load)) if six.PY2 File ""/home/qfpay/python/lib/python2.7/site-packages/salt/utils/async.py"", line 64, in wrap ret = self._block_future(ret) File ""/home/qfpay/python/lib/python2.7/site-packages/salt/utils/async.py"", line 74, in _block_future return future.result() File ""/home/qfpay/python/lib/python2.7/site-packages/tornado/concurrent.py"", line 238, in result raise_exc_info(self._exc_info) File ""/home/qfpay/python/lib/python2.7/site-packages/tornado/gen.py"", line 1063, in run yielded = self.gen.throw(*exc_info) File ""/home/qfpay/python/lib/python2.7/site-packages/salt/transport/zeromq.py"", line 324, in send ret = yield self._crypted_transfer(load, tries=tries, timeout=timeout, raw=raw) File ""/home/qfpay/python/lib/python2.7/site-packages/tornado/gen.py"", line 1055, in run value = future.result() File ""/home/qfpay/python/lib/python2.7/site-packages/tornado/concurrent.py"", line 238, in result raise_exc_info(self._exc_info) File ""/home/qfpay/python/lib/python2.7/site-packages/tornado/gen.py"", line 1063, in run yielded = self.gen.throw(*exc_info) File ""/home/qfpay/python/lib/python2.7/site-packages/salt/transport/zeromq.py"", line 292, in _crypted_transfer ret = yield _do_transfer() File ""/home/qfpay/python/lib/python2.7/site-packages/tornado/gen.py"", line 1055, in run value = future.result() File ""/home/qfpay/python/lib/python2.7/site-packages/tornado/concurrent.py"", line 238, in result raise_exc_info(self._exc_info) File ""/home/qfpay/python/lib/python2.7/site-packages/tornado/gen.py"", line 1063, in run yielded = self.gen.throw(*exc_info) File ""/home/qfpay/python/lib/python2.7/site-packages/salt/transport/zeromq.py"", line 276, in _do_transfer tries=tries, File ""/home/qfpay/python/lib/python2.7/site-packages/tornado/gen.py"", line 1055, in run value = future.result() File ""/home/qfpay/python/lib/python2.7/site-packages/tornado/concurrent.py"", line 238, in result raise_exc_info(self._exc_info) File """", line 3, in raise_exc_info SaltReqTimeoutError: Message timed out [root@master_1 qfpay]# salt -V Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 1.11.2 cherrypy: 3.2.3 dateutil: 2.6.1 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.7 msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: 1.3.12 pycparser: 2.18 pycrypto: 3.7.2 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.9 (default, Sep 30 2017, 07:50:44) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.3 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.1.6 System Versions: dist: centos 6.9 Final locale: UTF-8 machine: x86_64 release: 2.6.32-696.el6.x86_64 system: Linux version: CentOS 6.9 Final #------------------------------------------------------------- [root@minion_1 ~]# /home/qfpay/python/bin/salt-minion -V Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.7.3 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.14 (default, Apr 16 2018, 15:25:21) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 17.0.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.1.6 System Versions: dist: centos 6.9 Final locale: UTF-8 machine: x86_64 release: 2.6.32-696.el6.x86_64 system: Linux version: CentOS 6.9 Final Error log of minion is as follows: 2019-01-10 10:25:19,185 [salt.minion :1658][WARNING ][10099] The minion function caused an exception",Do simple salt calls such as test.ping work?,"At first, I saw the error of Minion. I also thought that Minion couldn't connect to the master, but I measured it many times. At the same time that Minion gave an error, I manually connected the master and found that there was no problem. Also, it is normal for me to execute other modules, but this module has problems. I have built a total of 4 saltstack environments, and all three can not work properly. They use the same python, dependency packages, and versions of the saltstack. Those who are not working properly report the same error. I remember that the 2017 version of saltstatck I used was still good. Next, I don't know what to do. The result is that I tested the state of the minion connection master (salt_env) [root@minion_1 ~]# salt-call test.ping [DEBUG ] Configuration file path: /etc/salt/minion [WARNING ] Insecure logging configuration detected! Sensitive data may be logged. [DEBUG ] Grains refresh requested. Refreshing grains. [DEBUG ] Reading configuration from /etc/salt/minion [DEBUG ] Including configuration from '/etc/salt/minion.d/_schedule.conf' [DEBUG ] Reading configuration from /etc/salt/minion.d/_schedule.conf [DEBUG ] Master URI: tcp://xxx.xx.xxx.xx:4506 [DEBUG ] Connecting to master. Attempt 1 of 1 [DEBUG ] Master URI: tcp://xxx.xx.xxx.xx:4506 [DEBUG ] Initializing new AsyncAuth for (u'/etc/salt/pki/minion', u'minion_1', u'tcp://xxx.xx.xxx.xx:4506') [DEBUG ] Generated random reconnect delay between '1000ms' and '11000ms' (10153) [DEBUG ] Setting zmq_reconnect_ivl to '10153ms' [DEBUG ] Setting zmq_reconnect_ivl_max to '11000ms' [DEBUG ] Initializing new AsyncZeroMQReqChannel for (u'/etc/salt/pki/minion', u'minion_1', u'tcp://xxx.xx.xxx.xx:4506', 'clear') [DEBUG ] Connecting the Minion to the Master URI (for the return server): tcp://xxx.xx.xxx.xx:4506 [DEBUG ] Trying to connect to: tcp://xxx.xx.xxx.xx:4506 [DEBUG ] salt.crypt.get_rsa_pub_key: Loading public key [DEBUG ] Decrypting the current master AES key [DEBUG ] salt.crypt.get_rsa_key: Loading private key [DEBUG ] salt.crypt._get_key_with_evict: Loading private key [DEBUG ] Loaded minion key: /etc/salt/pki/minion/minion.pem [DEBUG ] salt.crypt.get_rsa_pub_key: Loading public key [DEBUG ] Connecting the Minion to the Master publish port, using the URI: tcp://xxx.xx.xxx.xx:4505 [DEBUG ] salt.crypt.get_rsa_key: Loading private key [DEBUG ] Loaded minion key: /etc/salt/pki/minion/minion.pem [DEBUG ] Determining pillar cache [DEBUG ] Initializing new AsyncZeroMQReqChannel for (u'/etc/salt/pki/minion', u'minion_1', u'tcp://xxx.xx.xxx.xx:4506', u'aes') [DEBUG ] Initializing new AsyncAuth for (u'/etc/salt/pki/minion', u'minion_1', u'tcp://xxx.xx.xxx.xx:4506') [DEBUG ] Connecting the Minion to the Master URI (for the return server): tcp://xxx.xx.xxx.xx:4506 [DEBUG ] Trying to connect to: tcp://xxx.xx.xxx.xx:4506 [DEBUG ] salt.crypt.get_rsa_key: Loading private key [DEBUG ] Loaded minion key: /etc/salt/pki/minion/minion.pem [DEBUG ] LazyLoaded jinja.render [DEBUG ] LazyLoaded yaml.render [DEBUG ] LazyLoaded test.ping [DEBUG ] test.ping received for minion 'minion_1' [DEBUG ] Initializing new AsyncZeroMQReqChannel for (u'/etc/salt/pki/minion', u'minion_1', u'tcp://xxx.xx.xxx.xx:4506', u'aes') [DEBUG ] Initializing new AsyncAuth for (u'/etc/salt/pki/minion', u'minion_1', u'tcp://xxx.xx.xxx.xx:4506') [DEBUG ] Connecting the Minion to the Master URI (for the return server): tcp://xxx.xx.xxx.xx:4506 [DEBUG ] Trying to connect to: tcp://xxx.xx.xxx.xx:4506 [DEBUG ] LazyLoaded nested.output local: True"
saltstack/salt,https://github.com/saltstack/salt/issues/51055,saltstack_salt_issues_51055,"runsas broken on Fedora29

The `runas` option isn't effective on Fedora 29 with `salt-2018.3.2-5.fc29.noarch` because `getpass.getuser()` while running as root is returning the `runas` username. This affects `cmd.run,` `git.latest,` etc. I am running salt from an interactive shell as user `me` with `sudo salt-call ...` exclusively, so it might be specific to that use case. I've fixed it for myself with this patch: --- utils/user.py.orig 2018-06-27 11:04:57.000000000 -0500 +++ utils/user.py 2019-01-04 07:45:21.322476941 -0600 @@ -222,7 +222,9 @@ Helper method for for subprocess.Popen to initialise uid/gid and umask for the new process. ''' - if runas is not None and runas != getpass.getuser(): +# if runas is not None and runas != getpass.getuser(): + uinfo = pwd.getpwnam(runas) + if os.getuid() != uinfo.pw_uid: chugid(runas) if umask is not None: os.umask(umask) # pylint: disable=blacklisted-function",can you clarify the entire command you are running to help replicate this issue?,"I'm currently running this script without arguments: #!/bin/bash ORIGIN=""$( cd ""$( dirname ""${BASH_SOURCE[0]}"" )"" && pwd )"" ""$ORIGIN""/_salt.sh state.apply ...which in turn runs this script: #!/bin/bash sudo su --login -c ""salt-call \ --local \ --file-root=$HOME/salt/salt \ --pillar-root=$HOME/salt/pillar \ --module-dirs=$HOME/salt/modules \ --log-level=warning \ --state-output=changes \ $@"" But, I think the key is whether you run `sudo salt-call...` (which breaks `runas`) or `sudo su --login -c ""salt-call...""` (which makes deficiencies in the in environment provided by `sudo` irrelevant by running `salt-call` from a root login shell.)"
saltstack/salt,https://github.com/saltstack/salt/issues/48862,saltstack_salt_issues_48862,"fileserver/roots msgpack errors

### Description of Issue/Question Getting random error: Could not deserialize msgpack message.This often happens when trying to read a file not in binary modeTo see message payload, enable debug logging and retry. Exception: Unpack failed: error = 0 ### Setup  ### Steps to Reproduce Issue Added traceback right after error message to payload.py: Aug 01 17:57:54 saltmaster salt-master[50947]: [CRITICAL] Could not deserialize msgpack message.This often happens when trying to read a file not in binary modeTo see message payload, enable debug logging and retry. Exception: Unpack failed: error = 0 Aug 01 17:57:54 saltmaster salt-master[50947]: Traceback (most recent call last): Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/payload.py"", line 138, in loads Aug 01 17:57:54 saltmaster salt-master[50947]: ret = msgpack.loads(msg, use_list=True, encoding=encoding) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""msgpack/_unpacker.pyx"", line 211, in msgpack._unpacker.unpackb Aug 01 17:57:54 saltmaster salt-master[50947]: UnpackValueError: Unpack failed: error = 0 Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/bin/salt-master"", line 22, in <module> Aug 01 17:57:54 saltmaster salt-master[50947]: salt_master() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/scripts.py"", line 97, in salt_master Aug 01 17:57:54 saltmaster salt-master[50947]: master.start() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/cli/daemons.py"", line 209, in start Aug 01 17:57:54 saltmaster salt-master[50947]: self.master.start() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 599, in start Aug 01 17:57:54 saltmaster salt-master[50947]: name='ReqServer') Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 333, in add_process Aug 01 17:57:54 saltmaster salt-master[50947]: process.start() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 717, in start Aug 01 17:57:54 saltmaster salt-master[50947]: super(SignalHandlingMultiprocessingProcess, self).start() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/process.py"", line 130, in start Aug 01 17:57:54 saltmaster salt-master[50947]: self._popen = Popen(self) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/forking.py"", line 126, in __init__ Aug 01 17:57:54 saltmaster salt-master[50947]: code = process_obj._bootstrap() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/process.py"", line 258, in _bootstrap Aug 01 17:57:54 saltmaster salt-master[50947]: self.run() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 663, in _run Aug 01 17:57:54 saltmaster salt-master[50947]: return self._original_run() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 760, in run Aug 01 17:57:54 saltmaster salt-master[50947]: self.__bind() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 753, in __bind Aug 01 17:57:54 saltmaster salt-master[50947]: name=name) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 333, in add_process Aug 01 17:57:54 saltmaster salt-master[50947]: process.start() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 717, in start Aug 01 17:57:54 saltmaster salt-master[50947]: super(SignalHandlingMultiprocessingProcess, self).start() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/process.py"", line 130, in start Aug 01 17:57:54 saltmaster salt-master[50947]: self._popen = Popen(self) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/forking.py"", line 126, in __init__ Aug 01 17:57:54 saltmaster salt-master[50947]: code = process_obj._bootstrap() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/process.py"", line 258, in _bootstrap Aug 01 17:57:54 saltmaster salt-master[50947]: self.run() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 663, in _run Aug 01 17:57:54 saltmaster salt-master[50947]: return self._original_run() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 916, in run Aug 01 17:57:54 saltmaster salt-master[50947]: self.__bind() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 843, in __bind Aug 01 17:57:54 saltmaster salt-master[50947]: self.io_loop.start() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/ioloop.py"", line 177, in start Aug 01 17:57:54 saltmaster salt-master[50947]: super(ZMQIOLoop, self).start() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/ioloop.py"", line 865, in start Aug 01 17:57:54 saltmaster salt-master[50947]: handler_func(fd_obj, events) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/stack_context.py"", line 274, in null_wrapper Aug 01 17:57:54 saltmaster salt-master[50947]: return fn(*args, **kwargs) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/zmqstream.py"", line 440, in _handle_events Aug 01 17:57:54 saltmaster salt-master[50947]: self._handle_recv() Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/zmqstream.py"", line 472, in _handle_recv Aug 01 17:57:54 saltmaster salt-master[50947]: self._run_callback(callback, msg) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/zmqstream.py"", line 414, in _run_callback Aug 01 17:57:54 saltmaster salt-master[50947]: callback(*args, **kwargs) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/stack_context.py"", line 274, in null_wrapper Aug 01 17:57:54 saltmaster salt-master[50947]: return fn(*args, **kwargs) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/zmqstream.py"", line 191, in <lambda> Aug 01 17:57:54 saltmaster salt-master[50947]: self.on_recv(lambda msg: callback(self, msg), copy=copy) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/gen.py"", line 230, in wrapper Aug 01 17:57:54 saltmaster salt-master[50947]: yielded = next(result) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/transport/zeromq.py"", line 665, in handle_message Aug 01 17:57:54 saltmaster salt-master[50947]: ret, req_opts = yield self.payload_handler(payload) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/gen.py"", line 215, in wrapper Aug 01 17:57:54 saltmaster salt-master[50947]: result = func(*args, **kwargs) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 873, in _handle_payload Aug 01 17:57:54 saltmaster salt-master[50947]: 'clear': self._handle_clear}[key](load) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 903, in _handle_aes Aug 01 17:57:54 saltmaster salt-master[50947]: return self.aes_funcs.run_func(data['cmd'], data) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 1611, in run_func Aug 01 17:57:54 saltmaster salt-master[50947]: ret = getattr(self, func)(load) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/fileserver/__init__.py"", line 756, in file_list Aug 01 17:57:54 saltmaster salt-master[50947]: ret.update(self.servers[fstr](load)) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/fileserver/roots.py"", line 431, in file_list Aug 01 17:57:54 saltmaster salt-master[50947]: return _file_lists(load, 'files') Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/fileserver/roots.py"", line 319, in _file_lists Aug 01 17:57:54 saltmaster salt-master[50947]: __opts__, form, list_cache, w_lock Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/fileserver/__init__.py"", line 132, in check_file_list_cache Aug 01 17:57:54 saltmaster salt-master[50947]: return serial.load(fp_).get(form, []), False, False Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/payload.py"", line 168, in load Aug 01 17:57:54 saltmaster salt-master[50947]: return self.loads(data) Aug 01 17:57:54 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/payload.py"", line 150, in loads Aug 01 17:57:54 saltmaster salt-master[50947]: traceback.print_stack() Aug 01 17:57:55 saltmaster salt-master[50947]: [CRITICAL] Could not deserialize msgpack message.This often happens when trying to read a file not in binary modeTo see message payload, enable debug logging and retry. Exception: Unpack failed: error = 0 Aug 01 17:57:55 saltmaster salt-master[50947]: Traceback (most recent call last): Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/payload.py"", line 138, in loads Aug 01 17:57:55 saltmaster salt-master[50947]: ret = msgpack.loads(msg, use_list=True, encoding=encoding) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""msgpack/_unpacker.pyx"", line 211, in msgpack._unpacker.unpackb Aug 01 17:57:55 saltmaster salt-master[50947]: UnpackValueError: Unpack failed: error = 0 Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/bin/salt-master"", line 22, in <module> Aug 01 17:57:55 saltmaster salt-master[50947]: salt_master() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/scripts.py"", line 97, in salt_master Aug 01 17:57:55 saltmaster salt-master[50947]: master.start() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/cli/daemons.py"", line 209, in start Aug 01 17:57:55 saltmaster salt-master[50947]: self.master.start() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 599, in start Aug 01 17:57:55 saltmaster salt-master[50947]: name='ReqServer') Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 333, in add_process Aug 01 17:57:55 saltmaster salt-master[50947]: process.start() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 717, in start Aug 01 17:57:55 saltmaster salt-master[50947]: super(SignalHandlingMultiprocessingProcess, self).start() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/process.py"", line 130, in start Aug 01 17:57:55 saltmaster salt-master[50947]: self._popen = Popen(self) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/forking.py"", line 126, in __init__ Aug 01 17:57:55 saltmaster salt-master[50947]: code = process_obj._bootstrap() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/process.py"", line 258, in _bootstrap Aug 01 17:57:55 saltmaster salt-master[50947]: self.run() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 663, in _run Aug 01 17:57:55 saltmaster salt-master[50947]: return self._original_run() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 760, in run Aug 01 17:57:55 saltmaster salt-master[50947]: self.__bind() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 753, in __bind Aug 01 17:57:55 saltmaster salt-master[50947]: name=name) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 333, in add_process Aug 01 17:57:55 saltmaster salt-master[50947]: process.start() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 717, in start Aug 01 17:57:55 saltmaster salt-master[50947]: super(SignalHandlingMultiprocessingProcess, self).start() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/process.py"", line 130, in start Aug 01 17:57:55 saltmaster salt-master[50947]: self._popen = Popen(self) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/forking.py"", line 126, in __init__ Aug 01 17:57:55 saltmaster salt-master[50947]: code = process_obj._bootstrap() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/process.py"", line 258, in _bootstrap Aug 01 17:57:55 saltmaster salt-master[50947]: self.run() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 663, in _run Aug 01 17:57:55 saltmaster salt-master[50947]: return self._original_run() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 916, in run Aug 01 17:57:55 saltmaster salt-master[50947]: self.__bind() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 843, in __bind Aug 01 17:57:55 saltmaster salt-master[50947]: self.io_loop.start() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/ioloop.py"", line 177, in start Aug 01 17:57:55 saltmaster salt-master[50947]: super(ZMQIOLoop, self).start() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/ioloop.py"", line 865, in start Aug 01 17:57:55 saltmaster salt-master[50947]: handler_func(fd_obj, events) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/stack_context.py"", line 274, in null_wrapper Aug 01 17:57:55 saltmaster salt-master[50947]: return fn(*args, **kwargs) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/zmqstream.py"", line 440, in _handle_events Aug 01 17:57:55 saltmaster salt-master[50947]: self._handle_recv() Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/zmqstream.py"", line 472, in _handle_recv Aug 01 17:57:55 saltmaster salt-master[50947]: self._run_callback(callback, msg) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/zmqstream.py"", line 414, in _run_callback Aug 01 17:57:55 saltmaster salt-master[50947]: callback(*args, **kwargs) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/stack_context.py"", line 274, in null_wrapper Aug 01 17:57:55 saltmaster salt-master[50947]: return fn(*args, **kwargs) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/zmqstream.py"", line 191, in <lambda> Aug 01 17:57:55 saltmaster salt-master[50947]: self.on_recv(lambda msg: callback(self, msg), copy=copy) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/gen.py"", line 230, in wrapper Aug 01 17:57:55 saltmaster salt-master[50947]: yielded = next(result) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/transport/zeromq.py"", line 665, in handle_message Aug 01 17:57:55 saltmaster salt-master[50947]: ret, req_opts = yield self.payload_handler(payload) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/gen.py"", line 215, in wrapper Aug 01 17:57:55 saltmaster salt-master[50947]: result = func(*args, **kwargs) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 873, in _handle_payload Aug 01 17:57:55 saltmaster salt-master[50947]: 'clear': self._handle_clear}[key](load) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 903, in _handle_aes Aug 01 17:57:55 saltmaster salt-master[50947]: return self.aes_funcs.run_func(data['cmd'], data) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 1611, in run_func Aug 01 17:57:55 saltmaster salt-master[50947]: ret = getattr(self, func)(load) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/fileserver/__init__.py"", line 818, in dir_list Aug 01 17:57:55 saltmaster salt-master[50947]: ret.update(self.servers[fstr](load)) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/fileserver/roots.py"", line 445, in dir_list Aug 01 17:57:55 saltmaster salt-master[50947]: return _file_lists(load, 'dirs') Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/fileserver/roots.py"", line 319, in _file_lists Aug 01 17:57:55 saltmaster salt-master[50947]: __opts__, form, list_cache, w_lock Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/fileserver/__init__.py"", line 132, in check_file_list_cache Aug 01 17:57:55 saltmaster salt-master[50947]: return serial.load(fp_).get(form, []), False, False Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/payload.py"", line 168, in load Aug 01 17:57:55 saltmaster salt-master[50947]: return self.loads(data) Aug 01 17:57:55 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/payload.py"", line 150, in loads Aug 01 17:57:55 saltmaster salt-master[50947]: traceback.print_stack() Aug 01 17:57:56 saltmaster salt-master[50947]: [CRITICAL] Could not deserialize msgpack message.This often happens when trying to read a file not in binary modeTo see message payload, enable debug logging and retry. Exception: Unpack failed: error = 0 Aug 01 17:57:56 saltmaster salt-master[50947]: Traceback (most recent call last): Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/payload.py"", line 138, in loads Aug 01 17:57:56 saltmaster salt-master[50947]: ret = msgpack.loads(msg, use_list=True, encoding=encoding) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""msgpack/_unpacker.pyx"", line 211, in msgpack._unpacker.unpackb Aug 01 17:57:56 saltmaster salt-master[50947]: UnpackValueError: Unpack failed: error = 0 Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/bin/salt-master"", line 22, in <module> Aug 01 17:57:56 saltmaster salt-master[50947]: salt_master() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/scripts.py"", line 97, in salt_master Aug 01 17:57:56 saltmaster salt-master[50947]: master.start() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/cli/daemons.py"", line 209, in start Aug 01 17:57:56 saltmaster salt-master[50947]: self.master.start() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 599, in start Aug 01 17:57:56 saltmaster salt-master[50947]: name='ReqServer') Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 333, in add_process Aug 01 17:57:56 saltmaster salt-master[50947]: process.start() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 717, in start Aug 01 17:57:56 saltmaster salt-master[50947]: super(SignalHandlingMultiprocessingProcess, self).start() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/process.py"", line 130, in start Aug 01 17:57:56 saltmaster salt-master[50947]: self._popen = Popen(self) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/forking.py"", line 126, in __init__ Aug 01 17:57:56 saltmaster salt-master[50947]: code = process_obj._bootstrap() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/process.py"", line 258, in _bootstrap Aug 01 17:57:56 saltmaster salt-master[50947]: self.run() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 663, in _run Aug 01 17:57:56 saltmaster salt-master[50947]: return self._original_run() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 760, in run Aug 01 17:57:56 saltmaster salt-master[50947]: self.__bind() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 753, in __bind Aug 01 17:57:56 saltmaster salt-master[50947]: name=name) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 333, in add_process Aug 01 17:57:56 saltmaster salt-master[50947]: process.start() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 717, in start Aug 01 17:57:56 saltmaster salt-master[50947]: super(SignalHandlingMultiprocessingProcess, self).start() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/process.py"", line 130, in start Aug 01 17:57:56 saltmaster salt-master[50947]: self._popen = Popen(self) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/forking.py"", line 126, in __init__ Aug 01 17:57:56 saltmaster salt-master[50947]: code = process_obj._bootstrap() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/multiprocessing/process.py"", line 258, in _bootstrap Aug 01 17:57:56 saltmaster salt-master[50947]: self.run() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/utils/process.py"", line 663, in _run Aug 01 17:57:56 saltmaster salt-master[50947]: return self._original_run() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 916, in run Aug 01 17:57:56 saltmaster salt-master[50947]: self.__bind() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 843, in __bind Aug 01 17:57:56 saltmaster salt-master[50947]: self.io_loop.start() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/ioloop.py"", line 177, in start Aug 01 17:57:56 saltmaster salt-master[50947]: super(ZMQIOLoop, self).start() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/ioloop.py"", line 865, in start Aug 01 17:57:56 saltmaster salt-master[50947]: handler_func(fd_obj, events) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/stack_context.py"", line 274, in null_wrapper Aug 01 17:57:56 saltmaster salt-master[50947]: return fn(*args, **kwargs) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/zmqstream.py"", line 440, in _handle_events Aug 01 17:57:56 saltmaster salt-master[50947]: self._handle_recv() Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/zmqstream.py"", line 472, in _handle_recv Aug 01 17:57:56 saltmaster salt-master[50947]: self._run_callback(callback, msg) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/zmqstream.py"", line 414, in _run_callback Aug 01 17:57:56 saltmaster salt-master[50947]: callback(*args, **kwargs) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/stack_context.py"", line 274, in null_wrapper Aug 01 17:57:56 saltmaster salt-master[50947]: return fn(*args, **kwargs) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/zmq/eventloop/zmqstream.py"", line 191, in <lambda> Aug 01 17:57:56 saltmaster salt-master[50947]: self.on_recv(lambda msg: callback(self, msg), copy=copy) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/gen.py"", line 230, in wrapper Aug 01 17:57:56 saltmaster salt-master[50947]: yielded = next(result) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/transport/zeromq.py"", line 665, in handle_message Aug 01 17:57:56 saltmaster salt-master[50947]: ret, req_opts = yield self.payload_handler(payload) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib64/python2.7/site-packages/tornado/gen.py"", line 215, in wrapper Aug 01 17:57:56 saltmaster salt-master[50947]: result = func(*args, **kwargs) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 873, in _handle_payload Aug 01 17:57:56 saltmaster salt-master[50947]: 'clear': self._handle_clear}[key](load) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 903, in _handle_aes Aug 01 17:57:56 saltmaster salt-master[50947]: return self.aes_funcs.run_func(data['cmd'], data) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/master.py"", line 1611, in run_func Aug 01 17:57:56 saltmaster salt-master[50947]: ret = getattr(self, func)(load) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/fileserver/__init__.py"", line 818, in dir_list Aug 01 17:57:56 saltmaster salt-master[50947]: ret.update(self.servers[fstr](load)) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/fileserver/roots.py"", line 445, in dir_list Aug 01 17:57:56 saltmaster salt-master[50947]: return _file_lists(load, 'dirs') Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/fileserver/roots.py"", line 319, in _file_lists Aug 01 17:57:56 saltmaster salt-master[50947]: __opts__, form, list_cache, w_lock Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/fileserver/__init__.py"", line 132, in check_file_list_cache Aug 01 17:57:56 saltmaster salt-master[50947]: return serial.load(fp_).get(form, []), False, False Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/payload.py"", line 168, in load Aug 01 17:57:56 saltmaster salt-master[50947]: return self.loads(data) Aug 01 17:57:56 saltmaster salt-master[50947]: File ""/usr/lib/python2.7/site-packages/salt/payload.py"", line 150, in loads Aug 01 17:57:56 saltmaster salt-master[50947]: traceback.print_stack() I also appended each `msg` to /tmp/zzz: [root@saltmaster master]# tail -7 /tmp/zzz|head -1|wc 1 155 282625 [root@saltmaster master]# tail -6 /tmp/zzz|head -1|wc 1 288 499713 [root@satlmaster master]# tail -5 /tmp/zzz|head -1|wc 1 288 499713 [root@saltmaster master]# tail -4 /tmp/zzz|head -1|wc 1 237 417793 [root@saltmaster master]# tail -3 /tmp/zzz|head -1|wc 1 200 368641 [root@saltmaster master]# tail -2 /tmp/zzz|head -1|wc 1 18 28673 As you can see the length of broken `msg` differs. The `msg` itself seems to be a part of `/var/cache/salt/master/file_lists/roots/base.p` ### Versions Report Salt Version: Salt: 2017.7.7 Dependency Versions: cffi: Not Installed cherrypy: 3.2.2 dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: 3.4.3 pygit2: Not Installed Python: 2.7.5 (default, Nov 6 2016, 00:28:07) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 16.0.4 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.2.3 System Versions: dist: centos 7.5.1804 Core locale: UTF-8 machine: x86_64 release: 3.10.0-514.26.2.el7.x86_64 system: Linux version: CentOS Linux 7.5.1804 Core",Can you check if any of the files under /var/cache/salt are zero length?,/var/cache/salt/minion/module_refresh and everything under /var/cache/salt/master/syndics/ For reference: /var/cache/salt/master/file_lists/roots/base.p -rw-r--r-- 1 salt salt 500948 Aug 1 20:43 /var/cache/salt/master/file_lists/roots/base.p
saltstack/salt,https://github.com/saltstack/salt/issues/54720,saltstack_salt_issues_54720,"reactor is skipping the event task execution on some of the minions 

### Description of Issue reactor is skipping the event task execution on some of the minions but same conditional event is getting executed on some minion .Also manually triggering the event executes the task successfully on rest of the minion. ### Setup AWS 1. Added sls execution path on the minion start event. 2. Added sls file in reactor directory to execute orchestrate file (install docker and kubelet) 3. Added 3 minions 4. Noticed orchestrate file executed on 1,2 minion and 3rd one got skipped. 5. Restarted salt minion service manually on 3rd node and event got triggered successfully Note: Salt minion is auto provisioned and keys are auto accepted by salt master. ### Versions Report Salt Version: Salt: 2019.2.0",Can I see your sls files please? Also can I get move info on your master and minions?,"reactorconf: - 'salt/minion/{{ var.misc.PRODUCT_NAME }}*node*/start': - /srv/reactor/nodes-highstate.sls **reactor file: /srv/reactor/nodes-highstate.sls** invoke_orchestrate_node_install: runner.state.orchestrate: - args: - mods: cdep.orchestrate.reactor_task_install_nodes - pillar: new_minion: {{ data['id'] }} **state file called: cdep.orchestrate.reactor_task_install_nodes** {% set new_minion = salt['pillar.get']('new_minion') %} install_nodes: salt.state: - tgt: {{ new_minion }} - sls: - common/install_epel - node/node_pkgs - common/install_docker - common/install_kubeadm - node/install_node - saltenv: ""cdep"""
saltstack/salt,https://github.com/saltstack/salt/issues/57055,saltstack_salt_issues_57055,"[BUG] Function grains.items in mine.update failed to execute

**Description** When setting `mine_functions` to run `grains.items` it fails to execute after upgrade to `3000.2` (from before `3000` where it worked). **Setup** _/etc/salt/minion.d/50-mine.conf_  </details> **Additional context** The value of `function_args` is `[u'host']` and the value of `function_kwargs` is `{'sanitize': False}`, where the sanitize part seems to cause the problem. Where does it come from? Removing the `**function_kwargs` parameter from `return salt_function(*function_args, **function_kwargs)` solves the problem but that can not be the solution ;) What would be the expected value here?","Do you see any errors, or `Requested method not exposed: .....` ?",I can't see that message in the master debug log (but as i have more minions its not that easy to find anything in it ;)) and so far no other related errors? But i don't think its that master related (and only affects minions)?
saltstack/salt,https://github.com/saltstack/salt/issues/48509,saltstack_salt_issues_48509,"Running salt with batch flag causes hard crash

### Description of Issue/Question Running the master --> syndic --> minion topology trying to use a batch size with any salt command causes an exception which makes the master hard crash. Any command seems to trigger it, but in particular I was trying `salt '*' cmd.run 'uname -v' -b 20%` (it also failed with `-b 100`, I thought it might've been an issue with the `%`) ### Setup Top level salt master --> Salt syndic == salt syndic master --> Salt minions Using a pex executable built off of the 2018.3.1 tag with #48308 git cherrypicked in `/etc/salt/master`:  No differences in versions - all of them are using the same binary. Built with `pex . tornado==4.5.1 cffi==0.8.6 cherrypy==8.1.3 docker-py==1.2.2 jinja2==2.9.4 mako==1.0.0 pycparser==2.10 python-dateutil==2.2 -c salt-unity -o dist/salt.pex`",Does this only happen when using a pex built Salt package?,"@garethgreenaway I've only used the pex built salt packages thus far, so I can't speak to if it works with the apt packages or other sources"
saltstack/salt,https://github.com/saltstack/salt/issues/48642,saltstack_salt_issues_48642,"UnicodeDecodeError: 'utf8' codec can't decode byte 0xfe in position 0: invalid start byte

### Description of Issue/Question salt-call thowing a error with no indication of where the problem is ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) vagrant vm ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ` vagrant@localsandbox:~$ time sudo salt-call --state_verbose=False --log-level=info state.apply common.syslog [ERROR ] An un-handled exception was caught by salt's global exception handler: UnicodeDecodeError: 'utf8' codec can't decode byte 0xfe in position 0: invalid start byte Traceback (most recent call last): File ""/usr/bin/salt-call"", line 11, in <module> salt_call() File ""/usr/lib/python2.7/dist-packages/salt/scripts.py"", line 400, in salt_call client.run() File ""/usr/lib/python2.7/dist-packages/salt/cli/call.py"", line 57, in run caller.run() File ""/usr/lib/python2.7/dist-packages/salt/cli/caller.py"", line 134, in run ret = self.call() File ""/usr/lib/python2.7/dist-packages/salt/cli/caller.py"", line 212, in call ret['return'] = func(*args, **kwargs) File ""/usr/lib/python2.7/dist-packages/salt/modules/state.py"", line 748, in apply_ return sls(mods, **kwargs) File ""/usr/lib/python2.7/dist-packages/salt/modules/state.py"", line 1234, in sls initial_pillar=_get_initial_pillar(opts)) File ""/usr/lib/python2.7/dist-packages/salt/state.py"", line 4037, in __init__ BaseHighState.__init__(self, opts) File ""/usr/lib/python2.7/dist-packages/salt/state.py"", line 2902, in __init__ self.opts = self.__gen_opts(opts) File ""/usr/lib/python2.7/dist-packages/salt/state.py"", line 2929, in __gen_opts mopts = self.client.master_opts() File ""/usr/lib/python2.7/dist-packages/salt/fileclient.py"", line 1387, in master_opts return salt.utils.data.decode(self.channel.send(load)) if six.PY2 \ File ""/usr/lib/python2.7/dist-packages/salt/utils/data.py"", line 105, in decode preserve_dict_class, preserve_tuples, to_str) File ""/usr/lib/python2.7/dist-packages/salt/utils/data.py"", line 171, in decode_dict preserve_dict_class, preserve_tuples, to_str) File ""/usr/lib/python2.7/dist-packages/salt/utils/data.py"", line 171, in decode_dict preserve_dict_class, preserve_tuples, to_str) File ""/usr/lib/python2.7/dist-packages/salt/utils/data.py"", line 171, in decode_dict preserve_dict_class, preserve_tuples, to_str) File ""/usr/lib/python2.7/dist-packages/salt/utils/data.py"", line 174, in decode_dict value = _decode_func(value, encoding, errors, normalize) File ""/usr/lib/python2.7/dist-packages/salt/utils/stringutils.py"", line 124, in to_unicode return _normalize(s.decode(__salt_system_encoding__, errors)) File ""/usr/lib/python2.7/encodings/utf_8.py"", line 16, in decode return codecs.utf_8_decode(input, errors, True) UnicodeDecodeError: 'utf8' codec can't decode byte 0xfe in position 0: invalid start byte Traceback (most recent call last): File ""/usr/bin/salt-call"", line 11, in <module> salt_call() File ""/usr/lib/python2.7/dist-packages/salt/scripts.py"", line 400, in salt_call client.run() File ""/usr/lib/python2.7/dist-packages/salt/cli/call.py"", line 57, in run caller.run() File ""/usr/lib/python2.7/dist-packages/salt/cli/caller.py"", line 134, in run ret = self.call() File ""/usr/lib/python2.7/dist-packages/salt/cli/caller.py"", line 212, in call ret['return'] = func(*args, **kwargs) File ""/usr/lib/python2.7/dist-packages/salt/modules/state.py"", line 748, in apply_ return sls(mods, **kwargs) File ""/usr/lib/python2.7/dist-packages/salt/modules/state.py"", line 1234, in sls initial_pillar=_get_initial_pillar(opts)) File ""/usr/lib/python2.7/dist-packages/salt/state.py"", line 4037, in __init__ BaseHighState.__init__(self, opts) File ""/usr/lib/python2.7/dist-packages/salt/state.py"", line 2902, in __init__ self.opts = self.__gen_opts(opts) File ""/usr/lib/python2.7/dist-packages/salt/state.py"", line 2929, in __gen_opts mopts = self.client.master_opts() File ""/usr/lib/python2.7/dist-packages/salt/fileclient.py"", line 1387, in master_opts return salt.utils.data.decode(self.channel.send(load)) if six.PY2 \ File ""/usr/lib/python2.7/dist-packages/salt/utils/data.py"", line 105, in decode preserve_dict_class, preserve_tuples, to_str) File ""/usr/lib/python2.7/dist-packages/salt/utils/data.py"", line 171, in decode_dict preserve_dict_class, preserve_tuples, to_str) File ""/usr/lib/python2.7/dist-packages/salt/utils/data.py"", line 171, in decode_dict preserve_dict_class, preserve_tuples, to_str) File ""/usr/lib/python2.7/dist-packages/salt/utils/data.py"", line 171, in decode_dict preserve_dict_class, preserve_tuples, to_str) File ""/usr/lib/python2.7/dist-packages/salt/utils/data.py"", line 174, in decode_dict value = _decode_func(value, encoding, errors, normalize) File ""/usr/lib/python2.7/dist-packages/salt/utils/stringutils.py"", line 124, in to_unicode return _normalize(s.decode(__salt_system_encoding__, errors)) File ""/usr/lib/python2.7/encodings/utf_8.py"", line 16, in decode return codecs.utf_8_decode(input, errors, True) UnicodeDecodeError: 'utf8' codec can't decode byte 0xfe in position 0: invalid start byte real 0m4.449s user 0m3.790s sys 0m0.776s vagrant@localsandbox:~$ ` ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) ` vagrant@localsandbox:/vagrant$ lsb_release -a No LSB modules are available. Distributor ID: Ubuntu Description: Ubuntu 14.04.5 LTS Release: 14.04 Codename: trusty vagrant@localsandbox:/vagrant$ ` ` vagrant@localsandbox:~$ salt-call --versions-report Salt Version: Salt: 2018.3.2 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 1.5 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 0.9.1 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: 1.2.3 pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.6 (default, Nov 23 2017, 15:49:48) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.0.1 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: Ubuntu 14.04 trusty locale: UTF-8 machine: x86_64 release: 3.13.0-139-generic system: Linux version: Ubuntu 14.04 trusty vagrant@localsandbox:~$ `",can you share a sanitized version of your state: `common.syslog` so i can try to replicate this?,"I created an empty state ""salt/test/init.sls"" with just a comment ""#"" and got the same error. Downgraded salt to 2017.7 latest version and no errors. Upgrade back to 2018.3.2 and get the error. Will try to see if I can pinpoint something in the pillar causing the issue, the error does not seem to assist in finding the cause."
saltstack/salt,https://github.com/saltstack/salt/issues/48668,saltstack_salt_issues_48668,"sls call jinja variable error

I define the number of server according to salt minion hostname in map.jinja: ",Where are you telling grains.filter_by which grain it should filter by? By default it filters on `os_family` not minion id. https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.grains.html#salt.modules.grains.filter_by,"I define dictionary type variable in init,sls, and it works. You can close this issue, thank you! {% set server = {'swarm-212':'1', 'swarm-213':'2', 'swarm-214':'3'} %} prometheus: cmd.wait: - name: docker service update monitor_prometheus{{ server[grains['host']] }} --force - watch: - file: /etc/prometheus/prometheus.yml - file: /etc/prometheus/rules"
saltstack/salt,https://github.com/saltstack/salt/issues/51484,saltstack_salt_issues_51484,"nftables state of limited use

### Description of Issue/Question `nft` has a specific syntax which the `nftables` state tries to handle somehow. First it tries to pick and choose from the syntax elements it knows about to create the command to execute and, second, it doesn't support adding additional elements. Effectively, this completely limits the user to what the `nftables` state supports. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue Just try to execute the following command with `salt`: `nft add rule filter output ip daddr 1.1.1.1 tcp dport 443 accept` **The nftables module doesn't not support the ip syntax element.** ### Versions Report Salt 2018.03.03",Do we want to allow just any kwarg to be passed into this module?,"For the record, the correct syntax is `nftables.append filter output rule=""ip daddr 1.1.1.1 tcp dport 443 accept""`. And yes it works because the rule is passed straight down to the execution step. I'm talking about the `nftables` state. I renamed and edited my report accordingly. Sorry for the confusion."
saltstack/salt,https://github.com/saltstack/salt/issues/48497,saltstack_salt_issues_48497,"Passing on saltutil error

### Description of Issue/Question When I issue ""salt 'minion01' test.ping"", it'll be ok. When I issue ""salt 'minion01' state.apply test.sleep"", it'll be stuck there for a few minutes. The logs are below: ### Steps to Reproduce Issue ",can you share the state you are trying to run this with?,salt 'minion01' state.apply test.sleep just a test.
saltstack/salt,https://github.com/saltstack/salt/issues/56876,saltstack_salt_issues_56876,"salt-run state.event pretty=true:  'state.event'  is not available

I try to run a salt-run to debug a beacon that seems not to be working any longer on my salt-master. Trying to look at the events I remember I once used the following command that now no longer works returning: 'state.event' is not available: ",Can you try with a different OS?,"I just created a new SLES12SP5 VM and installed salt-master, same version like on my productive salt-master. On the test machine it works fine, i.e. the state.event module is found. I also tried and reinstalled the salt-master, salt-minion and salt packages but no change. Do you have any idea how debug this strange problem? Thanks Rainer"
saltstack/salt,https://github.com/saltstack/salt/issues/48600,saltstack_salt_issues_48600,"minion fail to start

### config of minion as below: only change the master name , no others /etc/salt# more minion ",Can you double check that there isn't a Salt minion already running when you're attempting to start it manually?,"@garethgreenaway I am very appreciated for your supporting, I am sure there is no other salt minion process running when I do this check . if you need any more information , please tell me and I can double check thanks a lot..."
saltstack/salt,https://github.com/saltstack/salt/issues/48886,saltstack_salt_issues_48886,"Ping all Minions that belong to one group, except those that appear in another group

Hi all, I have a question. Is it possible to execute a function for all Minions that belong to one group, except those that are already in another group? For example I have this groups in /etc/salt/master:  I would like to ping every machine that is in internal_users and not a laptop => windows-minion, ubuntu-hanna-minion, ubuntu-minion2 I saw that something like that is possible for minions if manage them by id: `salt -C '* and not web-dc1-srv' test.ping` Does exist the same thing for groups? **Salt version** is : 2018.3.1 (Oxygen) Thanks in advance, Hanna","Can you try  ? Thanks, Daniel","Hi @gtmanfred , Unfortunately that doesn't work, the output is:  Thanks, Hanna"
saltstack/salt,https://github.com/saltstack/salt/issues/49332,saltstack_salt_issues_49332,"test.provider(s) gives the wrong answer for module vsphere

### Description of Issue/Question The function `test.providers` returns value `""__init__""` as answer for module `""vsphere""`. The same happens for function `test.provider vsphere`. ### Setup default system with a master and a minion. ### Steps to Reproduce Issue issue `salt '*' test.provider vsphere` See that the answer is `""__init__""` instead of `""vsphere""`. This is the only module that returns this inaccurate result. First investigation steps: The function `test.provider` takes one of the functions of the given module to use for inspection. In my case that happens to be `add_host_to_dvs`. But the module for that one is somehow reported as `salt.utils.decorators`, probably due to the use of the annotations with this function. This ultimately leads to the indicated result. ### Versions Report ",Can you check what version of `pyVmomi` you have installed?,@garethgreenaway I have not installed `pyVmomi` or any other vsphere tools.
saltstack/salt,https://github.com/saltstack/salt/issues/51699,saltstack_salt_issues_51699,"Proxy minion startup problem

### Description of Issue/Question It appears that a bug was fixed in `salt/grains/core.py` but introduced a new issue that can significantly delay the proxy minion startup process and impact the functionality of the proxy minion after startup. The difference in startup time can up to 2 mins with the fix. If I add in a change to make the `addresses` list empty the minion reaches the ready state in 5-6 seconds. The fix to `salt/grains/core.py` can be found here: https://github.com/saltstack/salt/commit/2910d46052adb2d722fbe59c95a7a24097501bcd#diff-6e894b39b67c4bab67796752744ea9d5 Uncertain what the correct fix should be in this case but the impact is high. ### Setup ### Steps to Reproduce Issue Prior to this change the list of addresses found here (https://github.com/saltstack/salt/commit/2910d46052adb2d722fbe59c95a7a24097501bcd#diff-6e894b39b67c4bab67796752744ea9d5R2193) was typically empty and so this code was not executed. Now with the fix, from what I can tell a reverse dns lookup is performed on every interface that has an ipv4 or ipv6 address. If the reverse dns lookup fails for even a small list of addresses (4-6) it will take a very long time for the proxy minion to reach the `[INFO ] Minion is ready to receive requests!` state and issuing commands to the proxy minion may fail intermittently. The following message continues to generate for all ip's that fail the reverse dns lookup: ",Does anyone else have thoughts on this?,Sorry for the very delayed reply here. I missed this. 
saltstack/salt,https://github.com/saltstack/salt/issues/48825,saltstack_salt_issues_48825,"Unicode error while deploying Ubuntu 18.04 template in VMware

### Description of Issue/Question When deploying a new VMware server from a Ubuntu 18.04 template I get the following error: ",can you share the command that you are running?,
saltstack/salt,https://github.com/saltstack/salt/issues/49160,saltstack_salt_issues_49160,"Scheduled state not able to send output to returner. 

### Description of Issue/Question I'm getting an error when trying to schedule a state run, with a returner. The data never gets sent to the returner rawfile_json.  ### Steps to Reproduce Issue Configure schedule to run via pillars. ### Versions Report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 1.5.2 cherrypy: 3.6.0 dateutil: 2.4.2 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: 0.24.0 libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.10 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.24.0 Python: 2.7.13 (default, Jan 11 2017, 10:56:06) [GCC] python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 14.0.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 System Versions: dist: SuSE 12 x86_64 locale: UTF-8 machine: x86_64 release: 4.4.140-94.42-default system: Linux version: SUSE Linux Enterprise Server 12 x86_64",Does this match your setup at all?,"Thanks for your help on this. You were correct there is an error before the one I provide. Here is the full error result. **ERROR**  Here is the version for the master and minion. **Master:** Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 1.5.2 cherrypy: 3.6.0 dateutil: 2.4.2 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: 0.24.0 libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.10 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.24.0 Python: 2.7.13 (default, Jan 11 2017, 10:56:06) [GCC] python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 14.0.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.4 System Versions: dist: SuSE 12 x86_64 locale: UTF-8 machine: x86_64 release: 4.4.140-94.42-default system: Linux version: SUSE Linux Enterprise Server 12 x86_64 **Minion:** Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Jul 13 2018, 13:06:57) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.5.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: centos 7.5.1804 Core locale: UTF-8 machine: x86_64 release: 3.10.0-862.9.1.el7.x86_64 system: Linux version: CentOS Linux 7.5.1804 Core"
saltstack/salt,https://github.com/saltstack/salt/issues/49202,saltstack_salt_issues_49202,"diskusage beacon returning all mounts

### Description of Issue/Question When I use the beacon disk usage, it returns on the events all the mounts with wrong diskusage. Also the % returned is wrong. ### Setup On the minion : /etc/salt/minion.d/beacons.conf : beacons: diskusage: - /: 30% With /dev/mapper/vg00-root 5,8G 2,6G 3,0G 47% / ### Steps to Reproduce Issue systemctl restart-minion On the master : salt-run state.event pretty=True | grep -A100 server Result : salt/beacon/minion1/diskusage/ { ""_stamp"": ""2018-08-20T08:56:08.449626"", ""diskusage"": 44.1, ""id"": ""minion1.sres.stech"", ""mount"": ""/"" } salt/beacon/minion1/diskusage/ { ""_stamp"": ""2018-08-20T08:56:08.450184"", ""diskusage"": 44.1, ""id"": ""minion1.sres.stech"", ""mount"": ""/boot"" } salt/beacon/minion1/diskusage/ { ""_stamp"": ""2018-08-20T08:56:08.450501"", ""diskusage"": 44.1, ""id"": ""minion1.sres.stech"", ""mount"": ""/data"" } salt/beacon/minion1/diskusage/ { ""_stamp"": ""2018-08-20T08:56:08.450796"", ""diskusage"": 44.1, ""id"": ""minion1.sres.stech"", ""mount"": ""/tmp"" } salt/beacon/minion1/diskusage/ { ""_stamp"": ""2018-08-20T08:56:08.451084"", ""diskusage"": 44.1, ""id"": ""minion1.sres.stech"", ""mount"": ""/home"" } salt/beacon/minion1.sres.stech/diskusage/ { ""_stamp"": ""2018-08-20T08:56:08.451368"", ""diskusage"": 44.1, ""id"": ""minion1.sres.stech"", ""mount"": ""/var"" } salt/beacon/minion1/diskusage/ { ""_stamp"": ""2018-08-20T08:56:08.451653"", ""diskusage"": 44.1, ""id"": ""minion1.sres.stech"", ""mount"": ""/opt"" } salt/beacon/minion1/diskusage/ { ""_stamp"": ""2018-08-20T08:56:08.451936"", ""diskusage"": 44.1, ""id"": ""minion1.sres.stech"", ""mount"": ""/nmon"" } For information : [root@minion1 ~]# df -h Filesystem Size Used Avail Use% Mounted on /dev/mapper/vg00-root 5.8G 2.6G 3.0G 47% / devtmpfs 926M 0 926M 0% /dev tmpfs 937M 12K 937M 1% /dev/shm tmpfs 937M 91M 846M 10% /run tmpfs 937M 0 937M 0% /sys/fs/cgroup /dev/sda1 976M 159M 750M 18% /boot /dev/mapper/vg00-data 2.0G 116M 1.7G 7% /data /dev/mapper/vg00-tmp 2.0G 6.3M 1.8G 1% /tmp /dev/mapper/vg00-home 488M 816K 452M 1% /home /dev/mapper/vg00-var 3.9G 3.3G 395M 90% /var /dev/mapper/vg00-opt 2.9G 308M 2.5G 12% /opt /dev/mapper/vg00-nmonlv 58M 4.0M 50M 8% /nmon tmpfs 188M 0 188M 0% /run/user/0 ### Versions Report On the master : Salt: 2018.3.0 On the minion : salt-minion-2018.3.0-58.1.x86_64",would you submit a PR with this change? That would be greatly appreciated. https://docs.saltstack.com/en/latest/topics/development/contributing.html Thanks! Daniel,I've done a PR. For the different percentage between `psutil` and `df ` it is a bug that has been fixed on newer Python. It didn't take in count the reserved space.
saltstack/salt,https://github.com/saltstack/salt/issues/49147,saltstack_salt_issues_49147,"Log filled with ""Exception occurred while Subscriber handling stream: Already reading""

### Description of Issue/Question Hi, on a server running salt-minion and salt-master, the minion's logfile was today filled (quite quickly) with the following message:  Same version of minion, master, and common.","Where you running a particular command, state, etc?","As far as I know, no manual activity caused this. This looks like the beginning, there don't seem to be any earlier messages:  Sorry, I could've added that right at the start, hope this helps!"
saltstack/salt,https://github.com/saltstack/salt/issues/49150,saltstack_salt_issues_49150,"hosts.rm_host changes /etc/hosts file with odd characters

Dear all: I am using Saltstack to modify /etc/hosts file. Sometimes I just found salt-minion modified my /etc/hosts with odd characters. Here is some minion log(I obscured some IP&username info): ![image](https://user-images.githubusercontent.com/2890053/44200669-bb486a00-a179-11e8-88ee-c8726b2b49c6.png) And sometimes the same command can run correctly on the same machine: ![image](https://user-images.githubusercontent.com/2890053/44200877-4fb2cc80-a17a-11e8-9ba3-f1fb196317de.png) So does anybody give me some tips about this? Thanks a lot! ",can you paste the command you are running?,"@Ch3LL Hi, I used curl as the http client and call salt-api to modify /etc/hosts. Here is my command:  Here are screenshots which may be helpful: ![image](https://user-images.githubusercontent.com/2890053/44261345-f31ee280-a249-11e8-994b-29227392539c.png) when I open it in vim: ![image](https://user-images.githubusercontent.com/2890053/44261372-0af66680-a24a-11e8-9128-4ef8d62bfc9d.png) I just found another [issue](https://github.com/saltstack/salt/issues/48967) which may be relative with mine: Thank you."
saltstack/salt,https://github.com/saltstack/salt/issues/49205,saltstack_salt_issues_49205,"Compound targeting includes unexpected targets in the result

### Description of Issue/Question Compound targeting includes unexpected (even nonexistant) targets in the result. ### Setup This was triggered by an orchestration that rejects a salt minion in the middle of the orchestration. The `tgt` used after the salt minion key is rejected included an explicit filter to not take this minion into consideration; even if salt guarantees this, it was nice to have this in a explicit way. Consider the following minions:  Master and minions are all in the same version.","Do you see this problem with any other matchers, like just globs? or is it only with list inside of compound matching?","@gtmanfred Thanks for your fast response! I've recreated the environment, so the minion ids won't match the initial issue report, sorry for that. I rejected minion id `20bbfa446701426d9313d53373d7a0c3` this time. * Glob matching (fine):  I fear the only way to include ""new"" (as in unknown to salt) minion ids is using the list matcher and the compound matcher by extension. The rest of matchers seem to only work on the subset of well-known minion ids, and thus, are not affected from what I can see."
saltstack/salt,https://github.com/saltstack/salt/issues/50105,saltstack_salt_issues_50105,"Reasons for asynchronous Pillar refresh and behavior of modules/saltutil.sync_all

Hi, I am currently attempting to understand issues I see in regards to not-up-to date pillar in combination with the use of saltenv/pillarenv. Currently I am not in the position to file a valid defect due to lack of understanding of how and why the code behaves (by purpose). Our setup is that we have all runners, states, modules, pillar and grain data in a git repository and highly rely on the saltenv/pillarenv feature to segregate different versions of the code base. As we highly rely on the saltenv feature (salt master configuration `pillarenv_from_saltenv: True`) we perform in front of any highstate a call [saltutil.sync_all(refresh=True, saltenv=some_value)](/saltstack/salt/blob/develop/salt/modules/saltutil.py#L988) to ensure the highstate is using the expected custom modules, grains, pillar etc, available in the mentioned saltenv. For some reason we observe from time to time that the pillar or grain data is not accurate and as expected. When reviewing the code of the saltutil.sync_all method I got some questions. The method includes this code  This means the `refresh_modules` call happens asynchronous and the method immediately returns before starting the `refresh_pillar`. Is this good? Wouldn't it make sense to be sure the modules and grains are refreshed before refreshing the pillar? I am not sure what the methods are _exactly_ doing but I can imagine a situation in which Jinja code is rendering pillar data using custom module code or grains. If this module code is not confirmed to be current, pillar data might be not accurate. Is the refresh_modules() call really needed here? Isn't `refresh_modules` a part of `refresh_pillar` already? My other question is: Why is there no way to refresh pillar in a synchronous way? Currently we workaround this by adding a time out of some seconds but consider this only a hack which - even worse - still does not reliably work for some reasons we do not yet understand. This might be also caused by Jinja magic performing delaying calls but we are not yet sure about it. Any input which may increase the understanding is highly appreciated. The currently used Salt version is 2017.7.5",Can you elaborate on this a bit more? Can you include a use case or logs when this occurs?,"Hi, thanks very much for the details! I am still working to isolate the issue further. Imho it would indeed help to have the refresh_pillar synchronously available. It's a bit challenging due to the amount of available saltenv, high amount of calls and number of minions we have here to find the relevant logs. One piece I still don't get is e.g. which component is finally really processing/rendering the pillar. Is it the master and the minion (and both ideally compute the (eventually) same data)? Is it the minion which than sends the pillar to the master for further reuse? Is it the master using data from the minion? I am asking this to get a better catch on what to look for. We are only at the beginning of our analysis at the moment. Basically the issue is that from time to time we see that minions either lack pillar information. At the same time we also see that the minion synchronizes environments it should not know about at all. That may be a different issue or not. Most of the time everything works as expected, sometimes not. I know I am very unspecific at the moment, sorry for that."
saltstack/salt,https://github.com/saltstack/salt/issues/50243,saltstack_salt_issues_50243,"No file download retry in case of failing checksum verification

### Description of Issue/Question In case a `retry` and a `source_hash` is configured for the salt state `file.managed`, the state does not manage/download a file again, in case the passed checksum does not match. Instead only the checksum is verified as often as the retry configures it. Used version is salt 2017.7.5. Expected behavior is that a file is downloaded again in case the checksum does not match. ### Setup Example SLS `minion.downloaded`, take note that in this example the checksum is garbage for demonstration purposes. ",Can you point me to where that is?,"Hi! I am not sure I understand the question. I am talking about [this feature](https://docs.saltstack.com/en/latest/ref/states/requisites.html#retrying-states). To my understanding the retry feature is implemented in the code calling the state functions but not directly within the state functions. That's visible in those log lines:  Also, it obviously does a retry but the retry in this case is only related to the checksum verification but not the download. This makes the feature pointless somehow :)"
saltstack/salt,https://github.com/saltstack/salt/issues/51736,saltstack_salt_issues_51736,"salt-cloud map partial rebuild doesn't distribute minion keys to master

### Description of Issue/Question We have a situation where we're using map files and salt-cloud to create environments of several virtual machines in Proxmox. The complete environment build works as expected. The environments include an ESM (Environment Salt Master) and in the initial build this all works fine - salt-cloud generates minion keys for all of the minions and distributes them to the ESM. However, if we destroy one of the machines in order to rebuild it and use salt-cloud to rebuild we hit a few problems. 1. The hostname for the ESM cannot be figured out with the current code. I can work around that (I don't really understand yet what that part of the code is meant to be doing in order to get the hostname btw) 2. New minion keys are generated for the missing server, but the server build fails because the ESM rejects the minion's key. This is because salt-cloud doesn't I can't work around 2. - Does anyone else have this problem, or know a way round this issue? ### Setup A reasonably complex map file. ### Steps to Reproduce Issue Use salt-cloud with a valid map that contains an ESM (environment salt master). Build the environment successfully. Terminate one of the VMs Re-build the environment and salt-cloud will fail as described above. ### Versions Report ","did you use salt-cloud to delete the previous minions? or did you delete them some other way, and not delete the minions key from salt-key?","@gtmanfred - I did not use salt-cloud to delete the VM running as a minion for the Environment Salt Master. Instead I simply terminated it at the provider (proxmox) level. Then re-ran the same salt-cloud map. This results in salt-cloud generating minion keys for the missing VM, but failing to distribute that key to the Environment Salt Master. Using the below map file snippet as an example:  When one of `repo01.int.wsl` or `proxy01.int.wsl` is destroyed after initial creation with the salt-cloud map, re-running salt-cloud doesn't successfully build the missing server because the newly-generated minion key for that server is not distributed to the salt master `salt01-svc.int.wsl` I could provide some logs if necessary. I expect it's just a current limitation of salt-cloud."
saltstack/salt,https://github.com/saltstack/salt/issues/51968,saltstack_salt_issues_51968,"Memory Leak with boto3 + salt CloudClient

### Description of Issue/Question After instantiating a salt CloudClient, all boto3 fail to release memory after completion. Upon digging, this looked to be due to LogRecords emited by boto3 being held somewhere in salt-land. Not super familiar with this codebase, so I'm making this issue instead of investigating deeper myself. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) Made a docker container -- available at: https://github.com/theonlyjohnny/saltcloud_memleak ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",Can you please reply with the version report for this issue?,
saltstack/salt,https://github.com/saltstack/salt/issues/49328,saltstack_salt_issues_49328,"Invalid pkg.list_upgrades parsing on Fedora 28 Workstation

### Description of Issue/Question Similar to issue https://github.com/saltstack/salt/issues/47717 (which was fixed), running `salt-call --local pkg.list_upgrades` on Fedora 28 Workstation produces the following broken result in my current setup: ",Do you know if something changed between Fedora 27 and 28 that caused this? Is Fedora 28 using the same version of Salt as Fedora 27 was?,"@garethgreenaway Good question. Should be easy to set up a container with F27 and test it. I can try if I get around to it, if it helps!"
saltstack/salt,https://github.com/saltstack/salt/issues/49491,saltstack_salt_issues_49491,"Salt started in custom directory can't execute maintains commands

Hi, I'm trying to run a Salt in non-standard directories (/opt/salt) due to env restrictions and I have a configured master key rotation after which it should send a `ping` to all minions and this maintenance job failing with the exception since my `run` directory with sockets and my configs are in non-standard path. ### Setup ",Can you provide the error or exception that you're receiving from the Salt master?,@garethgreenaway Sure: 
saltstack/salt,https://github.com/saltstack/salt/issues/50375,saltstack_salt_issues_50375,"[Question] Is there is a way to programmatically check if pillars are able to render?

### Description of Issue/Question I'm looking for a way to programmatically check if pillars are able to render and\or up to date. As I understand so far `saltutil.refresh_pillar` call is asynchronous and can't be used for this at all. I looked into the synchronous refresh_pillar PR(https://github.com/saltstack/salt/pull/50168) and looks like it won't help either. I wish there is a `pillar.get` an argument which will force to return an error is the key can't be looked up. Right now it always returns 0 even if there is no key and only in master logs I can find the root of the problem - error in pillar rendering. ",Can you include the version you are seeing this? Looks like we need to change the exit code when this fails.,@Ch3LL 
saltstack/salt,https://github.com/saltstack/salt/issues/49509,saltstack_salt_issues_49509,"Error with cron module

### Description of Issue/Question All the cron states are failing. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) The state giving the error is: stop_push_logs: cron.absent: - identifier: push_logs_to_s3 - name: /usr/bin/pushlogs.sh -r - user: root - special: '@hourly' ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ID: stop_push_logs Function: cron.absent Name: /usr/bin/pushlogs.sh -r Result: False Comment: State 'cron.absent' was not found in SLS 'anonymous_state' Reason: 'cron' __virtual__ returned False: cron module could not be loaded ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) For salt master: Salt Version: Salt: 2016.11.9 Dependency Versions: cffi: 0.8.6 cherrypy: Not Installed dateutil: 2.2 docker-py: Not Installed gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.7.3 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.2 mysql-python: 1.2.3 pycparser: 2.10 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.9 (default, Mar 1 2015, 12:57:24) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.4.0 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: debian 8.2 machine: x86_64 release: 3.16.0-4-amd64 system: Linux version: debian 8.2 For salt-minion: Salt Version: Salt: 2016.11.9 Dependency Versions: cffi: 0.8.6 cherrypy: Not Installed dateutil: 2.2 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.9.4 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.2 mysql-python: 1.2.3 pycparser: 2.10 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.9 (default, Jun 29 2016, 13:08:31) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 14.4.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.0.5 System Versions: dist: debian 8.6 machine: x86_64 release: 3.16.0-4-amd64 system: Linux version: debian 8.6",Can you ensure that the crontab binary is installed?,It was not installed.It is working now.Thanks. @garethgreenaway
saltstack/salt,https://github.com/saltstack/salt/issues/49627,saltstack_salt_issues_49627,"AttributeError: 'module' object has no attribute 'UDPLogstashHandler'

### Description of Issue/Question Logstash UDP Module is failing to start. The following stack trace is printed in /var/log/salt/master ",what version of logstash are you using?,I am using Logstash 6.4.0 My Logstash config is 
saltstack/salt,https://github.com/saltstack/salt/issues/49672,saltstack_salt_issues_49672,"pkg.installed not working correctly on ppc64le architecture

### Description of Issue/Question When running on `ppc64le` systems, with architecture based packages, salt is trying to repeatedly install the package when it is already installed. For example we want to ensure the `iptables` package is installed on the system via salt. This works as expected on `x86_64` arch systems, but doesn't work properly on `ppc64le` systems. ### Setup Example state for package installation  Note the master is also running 2018.3 but is running on x86_64 architecture.",Do all the architecture packages include `ppc64le` or are do some of them include `powerpc64le`?,"On the node I'm testing on ...  Returns nothing, so looks like they are most likely all `ppc64le` no `noarch` packages. I looked in the install repo directory as well and they all look to be the same."
saltstack/salt,https://github.com/saltstack/salt/issues/49748,saltstack_salt_issues_49748,"Should file.rename return success when target exists and force is not used?

### Description of Issue/Question Use-case: 1. Move a pre-packaged configuration of software package-x to package-x.conf.example 2. Place my own package-x.conf there instead Works correct for the first run, when package-x.conf.example doesn't exist yet. Fails on consecutive runs, because package-x.conf.example already exists. Using 'force=True' is not an option, because after the second state.apply, the packaged version would be lost. Shouldn't the file.rename report a ""success, renamed file already in correct state"" instead of a failure when force is not used? Misunderstanding? Or am I doing something non-idiomatic here and there's a better way? ### Setup ",What is your minion version?,"As shown in the top commandline of my test case: I used the master's own '$HOSTNAME', so basically that was a localhost test. Edit: What I wanted to say: Master Version == Minion Version, since that's been the same host. Your test case is incomplete though. You're only moving the file out of the way, but if you replace the initial filename with a new one in a following file.managed state, that should trigger the issue. See the file.managed state in my sls on top."
saltstack/salt,https://github.com/saltstack/salt/issues/50300,saltstack_salt_issues_50300,"feature request: dockermod.build network_mode option

### Description of Issue/Question salt.modules.dockermod.build doesn't support all options provided by docker build command and the client.images.build function of the `docker` python sdk(see https://docker-py.readthedocs.io/en/stable/images.html#docker.models.images.ImageCollection.build for all options). One such option that would be useful to have is the `network_mode`(e.g. to connect to a docker network, or to the host, when running RUN commands during build). Other options I'd like to see supported include `labels`(to set image labels), `target`(to set target stages in multistage builds). Thanks.",Would you like to try making a PR to add these options?,@dwoz Sure.
saltstack/salt,https://github.com/saltstack/salt/issues/49810,saltstack_salt_issues_49810,"Small bug in get_load() of ODBC returner

**Issue:** In the *get_load* function of the ODBC returner, the following return fails producing a TypeError with the message *""expected string or buffer""* ",can you test the above changes with `salt.utils.stringutils.to_str`?,@garethgreenaway I revisited this with fresh eyes after the weekend. I now believe the proper solution is to simply change: https://github.com/saltstack/salt/blob/b44f0f1d0fd564690c6e45c6dd061c0e84d76def/salt/returners/odbc.py#L244 to:  The issue is that fetchone() returns an array with a single item in it. I failed to notice the above change that my coworker had made-- the string coercion was simply a red herring.
saltstack/salt,https://github.com/saltstack/salt/issues/49917,saltstack_salt_issues_49917,"[WorkAround]X509 Sign Remote dict object error

### Description of Issue/Question Using a mine to get X509 fails about 15% of the time on Ubuntu 16.04 and 100% of the time on CentOS 7. This has been working for weeks and then it started failing. I get the following error: ",Can you verify that you have the Salt mine configured correctly to send the output from `x509.get_pem_entries` to the mine?,@garethgreenaway When I run mine get I get the following: 
saltstack/salt,https://github.com/saltstack/salt/issues/50667,saltstack_salt_issues_50667,"Modified Minion installer for Windows is giving Timezone issue and not connecting with master.

### Description of Issue/Question Modified Minion installer for Windows is giving Timezone isseue and not connecting with master. Able to add minion key in Master, but not able to connect to minion after that. ### Setup Modified the Salt Minion installer for windows. Tried to debug the issue using the salt-minion-debug.bat Getting the below error: File ""C:\hivecenter\bin\lib\site-packages\salt\modules\win_timezone.py"", line 235, in get_offset tz_object = pytz.timezone(get_zone()) File ""C:\hivecenter\bin\lib\site-packages\pytz\__init__.py"", line 179, in time zone raise UnknownTimeZoneError(zone) UnknownTimeZoneError: 'Unknown' ### Steps to Reproduce Issue Run the salt-minion-debug.bat in windows command line. ### Versions Report Minion- 2017.7.2","When you call the installer 'modified', does it mean you changed it in some way? If so What modifications did you make to the installer? Otherwise, please explain this further.","@dwoz I made changes to the service name, installer directory and installer UI and icons. It works well in Windows Server 2012. Facing issue in Windows Server 2008."
saltstack/salt,https://github.com/saltstack/salt/issues/50015,saltstack_salt_issues_50015,"Virtual grain in Windows

Hi there, we check if our hosts are virtual as such in our pillars: ``{% elif 'host' in grains['is_virtual'] %}`` and we have a problem on Windows where a physical host won't have a grain key for virtual and jinja errors out, because in grains/core.py the windows grain defaults to an empty dictionary rather than ''physical"": grains/core.py  We are on 2017.7.7 but I can see the code is the same in the newer versions, thanks",Would you mind submitting a pr to the 2017.7 branch to fix this? https://docs.saltstack.com/en/latest/topics/development/contributing.html Thanks! Daniel,done but not sure why it's failing the windows tests?
saltstack/salt,https://github.com/saltstack/salt/issues/50043,saltstack_salt_issues_50043,"Add MSI Transform file from Salt repo

### Description of Issue/Question Hi, I've started to setup package installations for Windows servers. So been looking into the winrepo module and tried out some installations here. The issue I have is when I want to use a transform file to my msi. The msi is loaded from our local salt repo. But I can't get the transform to be loaded aswell from there. It seems to me that the salt path is not usable in installer_flags variable. Any idea on how to do this? Or would it require a ""Msi_Transform"" parameter for it to work? ### Setup my-msi-package: {% for version in ['1.0.0.0'] %} '{{ version }}': full_name: 'MSI Package {{ version }}' installer: 'salt://win/packages/msi/MSI-Package-{{ version }}.msi' install_flags: 'TRANSFORMS=salt://win/packages/msi/MSI-Package.mst /qn' uninstaller: '{F6D187D5-DDF9-4B83-96A0-A411850E626A}' uninstall_flags: '/qn' refresh: True msiexec: True use_scheduler: False reboot: False {% endfor %} ### Steps to Reproduce Issue [INFO ] Executing command '""C:\Windows\system32\cmd.exe"" /s /c """"msiexec"" /I ""c:\salt\var\cache\salt\minion\files\dev\win\packages\msi\MSI-Package-1.0.0.0.msi"" ALLUSERS=1 TRANSFORMS=salt://win/packages/msi/MSI-Package.mst /qn""' in directory 'c:\salt\var\cache\salt\minion\files\dev\win\packages\msi' [ERROR ] Command '""C:\Windows\system32\cmd.exe"" /s /c """"msiexec"" /I ""c:\salt\var\cache\salt\minion\files\dev\win\packages\msi\MSI-Package-1.0.0.0.msi"" ALLUSERS=1 TRANSFORMS=salt://win/packages/msi/MSI-Package.mst /qn""' failed with return code: 1624 [ERROR ] stdout: E r r o r a p p l y i n g t r a n s f o r m s . V e r i f y t h a t t h e s p e c i f i e d t r a n s f o r m p a t h s a r e v a l i d . [ERROR ] retcode: 1624 ### Versions Report Salt Version: Salt: 2018.3.2 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.5.3 docker-py: Not Installed gitdb: 2.0.0 gitpython: 2.1.1 ioflo: Not Installed Jinja2: 2.9.4 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 1.3.7 pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.13 (default, Sep 26 2018, 18:42:22) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.1 timelib: Not Installed Tornado: 4.4.3 ZMQ: 4.2.1 System Versions: dist: debian 9.5 locale: UTF-8 machine: x86_64 release: 4.9.0-8-amd64 system: Linux version: debian 9.5",What is the use case for TRANSFORMS?,"Hi, It won't use it. If you check the debug logs above. You can see that it tries to use the salt:// in the Windows command. As Windows won't know how to handle it, it gives an error. The TRANSFORMS is pretty much a configuration file for an MSI package. So we're adding different configurations with it when installing the MSI package. But after reading through the documentation more, I found the cache_file parameter. So now, I'm able to download the .mst file to the minion. I've also successfully used it, but I had to hardcode the cache path. Which can be different depending on the environment. How can I point it to the cached file, without specifying the whole path? my-msi-package: {% for version in ['1.0.0.0'] %} '{{ version }}': full_name: 'MSI Package {{ version }}' installer: 'salt://win/packages/msi/MSI-Package-{{ version }}.msi' cache_file: 'salt://win/packages/msi/MSI-Package.mst' install_flags: 'TRANSFORMS=C:\salt\var\cache\salt\minion\files\dev\win\packages\msi\MSI-Package.mst /qn' uninstaller: '{F6D187D5-DDF9-4B83-96A0-A411850E626A}' uninstall_flags: '/qn' refresh: True msiexec: True use_scheduler: False reboot: False {% endfor %}"
saltstack/salt,https://github.com/saltstack/salt/issues/50137,saltstack_salt_issues_50137,"utils.network.dns_check function needlessly tests socket connectivity with no timeout.

### Description of Issue/Question The function utils.network.dns_check both resolves DNS names but also tries to open a connection to the resolved address. Notes on the function say ""Tries to connect to the address before considering it useful."". This is not a function of DNS and can and does cause unexpected behavior. In my case I have an HA salt-master setup in AWS. I am using multiple master entries in in my minion config as follows. master: - saltmasteraz1.mydomain.com - 10.254.1.10 - saltmasteraz2.mydomain.com - 10.254.2.10 The DNS entries point to public IPs for remote hosts to connect and the IPs are for local traffic. The assumption is that using the failover features, any minion can cycle through the list and eventually land on a usable master address. On startup, the minion uses utils.network.dns_check to produce a list of master URIs. All names are resolvable but not all are reachable. In the case of an unreachable address the function waits for the full connect timeout before moving on to resolving the next address. This process takes several minutes per address holding up the minion startup. Once through this process, the minion immediately detects that the unreachable master in the list and moves on to the next as it's supposed to. While I would argue that connecting to a socket is not part of name resolution and should be removed from the function, I cant say that it doesn't have any dependancies. the simple fix is to add a timeout.  ### Setup backup_mode: minion hash_type: sha256 id: ip-10-254-1-25.ec2.internal log_level: info master: - saltmasteraz1.mydomain.com - 10.254.1.10 - saltmasteraz2.mydomain.com - 10.254.2.10 master_alive_interval: 30 master_failback: true master_failback_interval: 60 master_type: failover retry_dns: 0 startup_states: highstate ### Steps to Reproduce Issue Add a resolvable but unreachable DNS entry in the minion master section. ### Versions Report Salt Version: Salt: 2018.3.2 Dependency Versions: cffi: 1.6.0 cherrypy: Not Installed dateutil: 2.6.0 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.28.2 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.14 (default, Mar 16 2018, 18:20:07) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: locale: UTF-8 machine: x86_64 release: 4.14.47-64.38.amzn2.x86_64 system: Linux version: Not Installed","Would you mind submitting a PR to fix this? Thanks, Daniel","Sure, as soon as git stops being broken."
saltstack/salt,https://github.com/saltstack/salt/issues/50153,saltstack_salt_issues_50153,"Can not use compound match in eauth

### Description of Issue/Question I want to use compound match in eauth configuration, I want to match 2 grains in my conf, but it can't work. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) My eauth conf like below, I want to match 2 grains in eauth, but it can't work. ",Did you make sure to fully restart the master and salt-api after making this change?,"Yes, I fully restart master and salt-api, but it still can't work. I use 2017.7.7 version, is there any other change I need do? Have you tested 2 grains match on eauth part? Many thanks."
saltstack/salt,https://github.com/saltstack/salt/issues/50966,saltstack_salt_issues_50966,"2018.3.3 missing a patch to salt/modules/nxos.py

### Description of Issue/Question Running `salt cisco.switch.blah nxos.cmd show_ver` I found this error `cisco.switch.blah:` ` The minion function caused an exception: Traceback (most recent call last):` ` File ""/usr/lib/python2.7/site-packages/salt/minion.py"", line 1607, in _thread_return` ` return_data = minion_instance.executors[fname](opts, data, func, args, kwargs)` ` File ""/usr/lib/python2.7/site-packages/salt/executors/direct_call.py"", line 12, in execute` ` return func(*args, **kwargs)` ` File ""/usr/lib/python2.7/site-packages/salt/modules/nxos.py"", line 62, in cmd` ` for k in kwargs:` ` RuntimeError: dictionary changed size during iteration` I found this patch for a different module, applied it to nxos.py manually, and it resolved the issue -- https://github.com/rallytime/salt/commit/430c462f34eb4eedf2384e06fbee8dc19b8026f6 This is fixed in the develop branch",Can you confirm that you have the 2018.3.3 installed with salt --version-report? Thanks!,This is for salt/modules/nxos.py ---- not ---- salt/proxy/fx2.py. What I am saying is: the patch for the fx2.py resolved the issue with the salt cisco nx-os bug -- that I opened this issue about.
saltstack/salt,https://github.com/saltstack/salt/issues/50381,saltstack_salt_issues_50381,"rest_cherrypy py3-incompatible POST /keys handler

### Description of Issue/Question Exception:  ### Versions Report Salt Version: Salt: 2018.3.3 Dependency Versions: cffi: Not Installed cherrypy: 18.0.1 dateutil: 2.6.1 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 3.6.6 (default, Sep 12 2018, 18:26:19) python-gnupg: 0.4.1 PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.2.5 System Versions: dist: Ubuntu 18.04 bionic locale: UTF-8 machine: x86_64 release: 4.15.0-38-generic system: Linux version: Ubuntu 18.04 bionic",did this just start occurring after an upgrade? i'm guessing this is related to the Unicode work we did in 2018.3," same problem As I can see, this code was not touched for 2 years and was not working from start. I can provide small PR with fix"
saltstack/salt,https://github.com/saltstack/salt/issues/50426,saltstack_salt_issues_50426,"cp.get_dir not work when the root_dir  big 

cp.get_dir not work file_roots on nas with a big large files it looks like the salt will scan the full dir in /srv/salt/ the reult return null and minion not get the dir it is active on 2018.3.X salt --versions-report Salt Version: Salt: 2018.3.3 Dependency Versions: cffi: 1.6.0 cherrypy: unknown dateutil: 1.5 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, May 3 2017, 07:55:04) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.3.1 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 3.2.5 System Versions: dist: redhat 7.4 Maipo locale: UTF-8 machine: x86_64 release: 3.10.0-693.el7.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.4 Maipo Size Used Avail Use% Mounted on ****root 2.9T 2.3T 657G 78% /srv/salt/root",Can you provide us with `salt --versions-report` and also some logs from the master and minion while trying `cp.get_dir` ?,"# salt --versions-report Salt Version: Salt: 2018.3.3 Dependency Versions: cffi: 1.6.0 cherrypy: unknown dateutil: 1.5 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, May 3 2017, 07:55:04) python-gnupg: Not Installed PyYAML: 3.10 PyZMQ: 14.3.1 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 3.2.5 System Versions: dist: redhat 7.4 Maipo locale: UTF-8 machine: x86_64 release: 3.10.0-693.el7.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.4 Maipo Size Used Avail Use% Mounted on ****root 2.9T 2.3T 657G 78% /srv/salt/root"
saltstack/salt,https://github.com/saltstack/salt/issues/50411,saltstack_salt_issues_50411,"Reactor AuthenticationError

### Description of Issue/Question I get an `AuthenticationError` when using the `local` type of reactor. Below is a simple setup I use. I have more complex `runner` reactions and they work just fine. ### Setup In the `salt-master` configuration I have these lines: ",What is $ROOT? And what is the contents of the configuration file `_all`?,"I'm sorry, I copied the contents of `master` from a bash script that generates it for our purposes, `$ROOT` is just that bash script's variable to know where to make the installation. Here is the whole `_all/master` configuration file: "
saltstack/salt,https://github.com/saltstack/salt/issues/50459,saltstack_salt_issues_50459,"PyGit2 wrong user for .gitconfig

PyGit2 is trying to use the wrong `.gitconfig` file when `salt-master` is launch as `root` but the user `/etc/salt/master` is set to a different one.  I think the problem is the way in which the `search_path` for the global config for pygit2 is set https://github.com/saltstack/salt/blob/b87bfd36b23104b0ba0cd4a10c266c1eb066964e/salt/utils/gitfs.py#L1625-L1626 I understand that launching `salt-master` as root but setting it for running as another user is the intended purpose with the current implementation. At least, this is what I understand after reading the [official guide](https://docs.saltstack.com/en/latest/ref/configuration/nonroot.html). Please, correct me if I am wrong.",Can you please provide us with the output from `salt -V`?," Also, `libgit2` is `v0.27.7` and `libssh2` for compiling `libgit2` is `v1.8.0`"
saltstack/salt,https://github.com/saltstack/salt/issues/50495,saltstack_salt_issues_50495,"Not able to run Salt minion on MacOS High Sierra and Mojave

### Salt minions fails to start after installation on MacOS High Sierra (10.13) and Mojave (10.14) ### Console output command : sudo salt-minion -l debug `[ERROR ] '' does not appear to be an IPv4 or IPv6 address Traceback (most recent call last): File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/parsers.py"", line 210, in parse_args process_option_func() File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/parsers.py"", line 548, in process_config_dir self.config.update(self.setup_config()) File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/parsers.py"", line 1789, in setup_config ignore_config_errors=False) File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/config/__init__.py"", line 2390, in minion_config minion_id=minion_id) File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/config/__init__.py"", line 3726, in apply_minion_config cache_minion_id=cache_minion_id) File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/config/__init__.py"", line 3608, in get_id newid = salt.utils.network.generate_minion_id() File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/network.py"", line 172, in generate_minion_id ret = salt.utils.stringutils.to_unicode(_generate_minion_id().first()) File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/network.py"", line 161, in _generate_minion_id return hosts.extend([addr for addr in ip_addrs() File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/network.py"", line 1202, in ip_addrs return _ip_addrs(interface, include_loopback, interface_data, 'inet') File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/network.py"", line 1190, in _ip_addrs addr = ipaddress.ip_address(addr.get('address')) File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/ext/ipaddress.py"", line 120, in ip_address address) ValueError: '' does not appear to be an IPv4 or IPv6 address Usage: salt-minion [options] salt-minion: error: Error while processing <bound method Minion.process_config_dir of <salt.cli.daemons.Minion object at 0x102b12ad0>>: Traceback (most recent call last): File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/parsers.py"", line 210, in parse_args process_option_func() File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/parsers.py"", line 548, in process_config_dir self.config.update(self.setup_config()) File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/parsers.py"", line 1789, in setup_config ignore_config_errors=False) File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/config/__init__.py"", line 2390, in minion_config minion_id=minion_id) File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/config/__init__.py"", line 3726, in apply_minion_config cache_minion_id=cache_minion_id) File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/config/__init__.py"", line 3608, in get_id newid = salt.utils.network.generate_minion_id() File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/network.py"", line 172, in generate_minion_id ret = salt.utils.stringutils.to_unicode(_generate_minion_id().first()) File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/network.py"", line 161, in _generate_minion_id return hosts.extend([addr for addr in ip_addrs() File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/network.py"", line 1202, in ip_addrs return _ip_addrs(interface, include_loopback, interface_data, 'inet') File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/utils/network.py"", line 1190, in _ip_addrs addr = ipaddress.ip_address(addr.get('address')) File ""/usr/local/Cellar/salt/2018.3.2/libexec/lib/python2.7/site-packages/salt/ext/ipaddress.py"", line 120, in ip_address address) ValueError: '' does not appear to be an IPv4 or IPv6 address `",can you elaborate on how you installed salt? Also as this a clean install or upgrade?,"@Ch3LL These are the steps that I followed for installation.  `export PATH=""/usr/local/Cellar/saltstack/2017.7.4/libexec/bin/:$PATH"" ` `pip2 install psutil` `sudo curl -L ` `https://raw.githubusercontent.com/saltstack/salt/develop/pkg/darwin/com.saltstack.salt.minion.plist -o /Library/LaunchDaemons/com.saltstack.salt.minion.plist` `sudo launchctl load -w /Library/LaunchDaemons/com.saltstack.salt.minion.plist`"
saltstack/salt,https://github.com/saltstack/salt/issues/50547,saltstack_salt_issues_50547,"numeric username fails checks on freebsd

### Description of Issue/Question [ERROR ] Command '['pw', 'user', 'show', '12345']' failed with return code: 67 [ERROR ] stderr: pw: no such uid `12345' [ERROR ] retcode: 67 [ERROR ] An exception occurred in this state: Traceback (most recent call last): File ""/usr/local/lib/python3.6/site-packages/salt/state.py"", line 1913, in call **cdata['kwargs']) File ""/usr/local/lib/python3.6/site-packages/salt/loader.py"", line 1898, in wrapper return f(*args, **kwargs) File ""/usr/local/lib/python3.6/site-packages/salt/states/user.py"", line 563, in present allow_gid_change) File ""/usr/local/lib/python3.6/site-packages/salt/states/user.py"", line 97, in _changes lshad = __salt__['shadow.info'](name) File ""/usr/local/lib/python3.6/site-packages/salt/modules/bsd_shadow.py"", line 77, in info python_shell=False).split(':')[5:7] ValueError: not enough values to unpack (expected 2, got 0) ---------- ID: user12345 Function: user.present Name: 12345 Result: False Comment: An exception occurred in this state: Traceback (most recent call last): File ""/usr/local/lib/python3.6/site-packages/salt/state.py"", line 1913, in call **cdata['kwargs']) File ""/usr/local/lib/python3.6/site-packages/salt/loader.py"", line 1898, in wrapper return f(*args, **kwargs) File ""/usr/local/lib/python3.6/site-packages/salt/states/user.py"", line 563, in present allow_gid_change) File ""/usr/local/lib/python3.6/site-packages/salt/states/user.py"", line 97, in _changes lshad = __salt__['shadow.info'](name) File ""/usr/local/lib/python3.6/site-packages/salt/modules/bsd_shadow.py"", line 77, in info python_shell=False).split(':')[5:7] ValueError: not enough values to unpack (expected 2, got 0) Started: 12:03:39.145637 Duration: 33.27 ms Changes: ---------- man pw: pw [-R rootdir] [-V etcdir] usershow [-n] name|uid | -u uid [-F] [-P] [-7] [-a] If I add a user that is all numeric, by default it thinks I'm searching for uid instead of name. To 'force' it to show name, I need to use the '-n' option. freebsd:# pw useradd -n 12345 freebsd:# pw usershow 12345 pw: no such uid `12345' freebsd:# pw usershow -n 12345 12345:*:3692:3692::0:0:User &:/home/12345:/bin/sh freebsd:# pw usershow -u 3692 12345:*:3692:3692::0:0:User &:/home/12345:/bin/sh freebsd:# this fixes the issue: freebsd:# diff ""/usr/local/lib/python3.6/site-packages/salt/modules/bsd_shadow.py"" ""/usr/local/lib/python3.6/site-packages/salt/modules/bsd_shadow.py.orig"" 76c76 < ['pw', 'usershow', '-n', name], --- freebsd:# ### Setup this is using standard user.present module, except username is numeric ### Steps to Reproduce Issue add user that the username is all numeric ### Versions Report py36-salt-2018.3.3",Did you want to give it a go at a PR?,"not just an '-n', but 'usershow' instead of 'user' 'show' also, just makes things a little cleaner ..but that is just cosmetics because: (For example, showuser, usershow, show user, and user show all mean the same thing.)"
saltstack/salt,https://github.com/saltstack/salt/issues/50608,saltstack_salt_issues_50608,"Bash autocompletion results in non-responsive master

### Description of Issue/Question The bash autocomplete support in 2018.3.3 results in a non-responsive master as it appears to try and discover all possible commands that could be run. CPU and memory usage are high and attempts to run commands result in ""master is not responding"" errors. Based on data in the returner it appears that the MoM is returning all exexcution modules from all minions: ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) Master of masters and 3 syndics controlling ~2500 minions. ### Steps to Reproduce Issue Type 'salt <selector>' and then hit TAB. ### Versions Report Salt Version: Salt: 2018.3.3 Dependency Versions: cffi: 1.6.0 cherrypy: Not Installed dateutil: 1.5 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: 0.26.3 libnacl: 1.6.1 M2Crypto: 0.28.2 Mako: 0.8.1 msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.26.4 Python: 2.7.5 (default, May 31 2018, 09:41:32) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: redhat 7.5 Maipo locale: UTF-8 machine: x86_64 release: 3.10.0-862.14.4.el7.x86_64 system: Linux version: Red Hat Enterprise Linux Server 7.5 Maipo",Can you provide us the output from the following command? `complete -p salt` Thanks,It turns out we were mistaken. Something else is overwhelming the master. Closing this issue as invalid.
saltstack/salt,https://github.com/saltstack/salt/issues/51668,saltstack_salt_issues_51668,"Errors using consul sdb

### Description of Issue/Question After configuring the consul sdb, I receive the following errors when trying to access values:  I have consul installed as an agent and can use it to pull values from consul. ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) 1. Set up a consul cluster with some key/value pairs. 2. Set up a salt minion with that above config and install consul as an agent, and verify connection. ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2018.3.2 Dependency Versions: cffi: 1.6.0 cherrypy: Not Installed dateutil: 2.6.0 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.14 (default, Jul 26 2018, 19:59:38) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: locale: UTF-8 machine: x86_64 release: 4.14.88-88.76.amzn2.x86_64 system: Linux version: Not Installed","Do you have the consul python, `python-consul`, library installed on the Salt minion?",@garethgreenaway Hi Gareth. No I don't. I installed it using pip but still am getting the same errors. Here is some output: Just to prove that consul is returning something: 
saltstack/salt,https://github.com/saltstack/salt/issues/50807,saltstack_salt_issues_50807,"ImportError: No module named singledispatch

### Description of Issue/Question I got this error when I run ""salt-ssh -L 'xxx.xxx.xxx.xxx' test.ping"" ### Steps to Reproduce Issue xxx.xxx.xxx.xxx: ---------- retcode: 0 stderr: Traceback (most recent call last): File ""/var/tmp/.root_4032f8_salt/salt-call"", line 15, in <module> salt_call() File ""/var/tmp/.root_4032f8_salt/py2/salt/scripts.py"", line 428, in salt_call import salt.cli.call File ""/var/tmp/.root_4032f8_salt/py2/salt/cli/call.py"", line 6, in <module> from salt.utils import parsers File ""/var/tmp/.root_4032f8_salt/py2/salt/utils/parsers.py"", line 28, in <module> import salt.config as config File ""/var/tmp/.root_4032f8_salt/py2/salt/config/__init__.py"", line 100, in <module> _DFLT_IPC_WBUFFER = _gather_buffer_space() * .5 File ""/var/tmp/.root_4032f8_salt/py2/salt/config/__init__.py"", line 90, in _gather_buffer_space import salt.grains.core File ""/var/tmp/.root_4032f8_salt/py2/salt/grains/core.py"", line 47, in <module> import salt.utils.dns File ""/var/tmp/.root_4032f8_salt/py2/salt/utils/dns.py"", line 28, in <module> import salt.modules.cmdmod File ""/var/tmp/.root_4032f8_salt/py2/salt/modules/cmdmod.py"", line 35, in <module> import salt.utils.templates File ""/var/tmp/.root_4032f8_salt/py2/salt/utils/templates.py"", line 31, in <module> import salt.utils.http File ""/var/tmp/.root_4032f8_salt/py2/salt/utils/http.py"", line 41, in <module> import salt.loader File ""/var/tmp/.root_4032f8_salt/py2/salt/loader.py"", line 30, in <module> import salt.utils.event File ""/var/tmp/.root_4032f8_salt/py2/salt/utils/event.py"", line 74, in <module> import salt.payload File ""/var/tmp/.root_4032f8_salt/py2/salt/payload.py"", line 17, in <module> import salt.crypt File ""/var/tmp/.root_4032f8_salt/py2/salt/crypt.py"", line 62, in <module> import tornado.gen File ""/var/tmp/.root_4032f8_salt/py2/tornado/gen.py"", line 97, in <module> from singledispatch import singledispatch # backport ImportError: No module named singledispatch ### Versions Report Salt Version: Salt: 2017.7.8 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.21.1 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Sep 15 2016, 22:37:39) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 17.1.2 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.2.5 System Versions: dist: centos 7.2.1511 Core locale: UTF-8 machine: x86_64 release: 3.10.0-327.28.3.el7.x86_64 system: Linux version: CentOS Linux 7.2.1511 Core",Can you provide us with the output of `pip freeze` on the box where you are running the `salt-ssh` command?,"@dwoz Thanks for you reply, the pip freeze command result: backports-abc==0.5 backports.ssl-match-hostname==3.4.0.2 certifi==2018.10.15 chardet==2.2.1 configobj==4.7.2 decorator==3.4.0 futures==3.2.0 idna==2.7 iniparse==0.4 Jinja2==2.10 kitchen==1.1.1 langtable==0.0.31 M2Crypto==0.21.1 MarkupSafe==0.11 msgpack==0.5.6 msgpack-python==0.4.8 perf==0.1 psutil==2.2.1 pycrypto==2.6.1 pycurl==7.19.0 pygobject==3.14.0 pygpgme==0.3 pyliblzma==0.5.3 PySocks==1.5.7 python-augeas==0.5.0 python-dmidecode==3.10.13 pyudev==0.15 pyxattr==0.5.1 PyYAML==3.13 pyzmq==17.1.2 redis==3.0.1 requests==2.6.0 salt==2017.7.8 singledispatch==3.4.0.3 six==1.9.0 slip==0.4.0 slip.dbus==0.4.0 tornado==4.2.1 typing==3.6.6 urlgrabber==3.10 urllib3==1.15.1 yum-langpacks==0.4.2"
saltstack/salt,https://github.com/saltstack/salt/issues/50723,saltstack_salt_issues_50723,"flask can't run with importing SaltStack client API

### Description of Issue/Question In my Salt Master machine, I want to provide flask rest API to call salt client, but when I import salt.client, flask can't run. ### Steps to Reproduce Issue for example very simple following code won't run on my machine.  ### Versions Report Salt Version: Salt: 2017.7.4 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.6.1 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10 libgit2: 0.26.0 libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.7 msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.26.2 Python: 3.6.6 (default, Sep 12 2018, 18:26:19) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.2.5 System Versions: dist: Ubuntu 18.04 bionic locale: UTF-8 machine: x86_64 release: 4.15.0-39-generic system: Linux version: Ubuntu 18.04 bionic",Can you provide any error messages or logs you receive when attempting to run flask?,"I think I found the problem is with logging, and when I run the above code, somehow salt.client prevent flask and werkzeug from logging, the server is up now, but no logging, I followed this [issue](https://github.com/saltstack/salt/issues/4994) but it doesn't help"
saltstack/salt,https://github.com/saltstack/salt/issues/50789,saltstack_salt_issues_50789,"How to use Cobbler with Saltstack

### Description of Issue/Question Hi all, I'm trying to glue together cobbler and saltstack/salt-cloud. Reading from this https://docs.saltstack.com/en/latest/ref/pillar/all/salt.pillar.cobbler.html i setup the master like this: ### Setup  but i don't understand how this works, if i try to get pillar items ""cobbler"" i dont'have any output. In general what is the best way to do a salt-cloud vm init with kickstart file? Thanks ### Versions Report Salt Version: Salt: 2018.3.3 Dependency Versions: cffi: 1.6.0 cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: 0.26.3 libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.26.4 Python: 2.7.5 (default, Jul 13 2018, 13:06:57) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1",Does Cobbler have any sort of logs that might have some information?,"Sorry my bad, i put the wrong cobbler url on conf file."
saltstack/salt,https://github.com/saltstack/salt/issues/54086,saltstack_salt_issues_54086,"saltutil.sync_grains failed on many minions when perform the action against the complete inventory

### Description of Issue When I run `salt '*' saltutil.sync_grains -t 60 --summary` again 6k minions the sync is not happening on almost 4k minions and got the error `Minion did not return. [No response]`. But when I do the `test.ping` able to get a response from most of them. Not sure if am performing this action in the wrong way and guide if there is a better method to perform action seamlessly. ",Do you have any custom grains in place?,"Yes. I have custom grains which is what am trying to sync across the fleet. Though we have 8 syndic masters which manage all the minions and all syndics masters are connected with Multi-Master. FYI, I have running sync command from multi-master."
saltstack/salt,https://github.com/saltstack/salt/issues/50824,saltstack_salt_issues_50824,"data global undefined when using py renderer

### Description of Issue/Question The [docs](https://docs.saltstack.com/en/latest/ref/renderers/all/salt.renderers.py.html) indicate the `data` object is available in a pure python state (py renderer), the same as in a jinja template -- but that does not appear to be the case. Other global variables appear to be present. ### Setup ",What are you trying to achieve by using data? Maybe i can help point you to an alternative context.,"TLDR; I don't actually need that functionality, I just ran into it when checking something. I merely wanted access to a variable defined within a `jinja|yaml` SLS that was using `slsutil.renderer` to render a pure-python state. This is trivial by simply passing it as an argument to the `slsutil.renderer` function, but I first wanted to make sure it wasn't already being exposed via some global -- which is when I discovered that the docs did not seem to match the behavior of the global `data` in the py renderer in this context. Thanks for the response and subsequent fix."
saltstack/salt,https://github.com/saltstack/salt/issues/50832,saltstack_salt_issues_50832,"salt state 'pkg.install' was not found in SLS - windows os

### Description of Issue/Question Hello all , i try use state to install some software to my minions( few windows server ), but it show me that pkg.install was not found. Could you let me know where the issue is? the command is `salt 'Host02V2' state.apply installpkg -l debug ` Also i've tried use the below command and the result is ok. `salt 'Host02V2' pkg.install firefox` ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ",Shouldn't it be pkg.installed when in a state file?,"I tried this before but didn't work(same error message show that pkg.installed not found in SLS). I tried change back to pkg.installed again today, and it works.... looks like maybe is my salt-master and minion connection problem. Thanks."
saltstack/salt,https://github.com/saltstack/salt/issues/55295,saltstack_salt_issues_55295,"keep_jobs integer intervals are too large

### Description of Issue For a large installation (>3000 minions) running frequent operations, the job cache grows quite large. In our case, we don't need a job cache beyond about 5 minutes. It would be helpful to be able to specify `keep_jobs` as a fraction of an hour, to keep the cache small. (We keep ours in RAM to reduce disk IO.) ### Setup 1 master, 3000 minions ### Steps to Reproduce Issue Set `keep_jobs: 1`, run `test.ping` every 60 seconds, job cache grows to 10 GB over 24 hours. ### Versions Report ",What is the motivation for running `test.ping` every 60 seconds?,"We've noticed a number of hosts lose salt connectivity, despite being reachable via SSH. This occasionally predicts localized network outages. Our systems team wrote a check for the monitoring system using a ping to check for responsive hosts."
saltstack/salt,https://github.com/saltstack/salt/issues/50986,saltstack_salt_issues_50986,"ZMQError: Operation not supported by device

### Error Log ",What does `salt` resolve to? Is it localhost? The loopback interface? Thanks! @saltstack/team-core fyi.,"Yes, I configured the interface is: 127.0.0.1"
saltstack/salt,https://github.com/saltstack/salt/issues/51024,saltstack_salt_issues_51024,"2018.3.3 kernelpkg.latest_available returns incorrect version

### Description of Issue/Question Salt 2018.3.3 Ubuntu 16.04.5 LTS (Server and Desktop) With Linux kernels 4.4.0 and 4.15.0 available for Ubuntu 16.04.5 LTS kernelpkg.latest_available returns the latest 4.4.0 release rather than 4.15.0-something i.e. it seems to be sorting the minor version alphabetically (""4"" is later than ""1"") rather than numerically (15 is greater than 4). Interestingly the other kernelpkg functions seem to be correct. ### Setup ",Can you confirm if this package is installed on the system in question?,"@garethgreenaway The desktop has linux-image-generic-hwe-16.04 installed but it's a 4.15.0 version not 4.4.0:  Thanks, Simon"
saltstack/salt,https://github.com/saltstack/salt/issues/51056,saltstack_salt_issues_51056,"Where does all_saltenvs get list of environments from?

### Description of Issue/Question ### Setup Where does `all_saltenvs` get the list of environments from? When I use it, only `base` has access to the salt formula: ",Does that sound good?,@terminalmage Updated documentation would be wonderful. I would like to better understand what `all_saltenvs` is suppose to do.
saltstack/salt,https://github.com/saltstack/salt/issues/51087,saltstack_salt_issues_51087,"netsnmp.managed throws an error

### Description of Issue/Question Basically this is a question about the usage / configuration of the netsnmp.managed function. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) in states/snmp.sls I have: snmp_example: netsnmp.managed: - config: location: here - defaults: contact: me basically this is copied over from the doc. ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) salt 'myswitch' state.sls snmp ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) # salt --versions-report Salt Version: Salt: 2018.3.3 (...) salt 'myswitch' state.sls ntp from the netntp.managed function works.",Can you include the error output?,"Sorry. somehow the copy&paste gone wrong. # salt 'myswitch' state.sls snmp myswitch: ---------- ID: snmp_example Function: netsnmp.managed Result: False Comment: An exception occurred in this state: Traceback (most recent call last): File ""/usr/lib/python3/dist-packages/salt/state.py"", line 1913, in call **cdata['kwargs']) File ""/usr/lib/python3/dist-packages/salt/loader.py"", line 1898, in wrapper return f(*args, **kwargs) File ""/usr/lib/python3/dist-packages/salt/states/netsnmp.py"", line 357, in managed expected_config = _expand_config(config, defaults) File ""/usr/lib/python3/dist-packages/salt/states/netsnmp.py"", line 81, in _expand_config defaults.update(config) AttributeError: 'NoneType' object has no attribute 'update' Started: 21:36:51.384892 Duration: 33.739 ms Changes: Warnings: 'location' and 'contact' are invalid keyword arguments for 'netsnmp.managed'. If you were trying to pass additional data to be used in a template context, please populate 'context' with 'key: value' pairs. Your approach will work until Salt Fluorine is out. Please update your state files. Summary for myswitch ------------ Succeeded: 0 Failed: 1 Warnings: 1 ------------ Total states run: 1 Total run time: 33.739 ms ERROR: Minions returned with non-zero exit code"
saltstack/salt,https://github.com/saltstack/salt/issues/51103,saltstack_salt_issues_51103,"Including extension_modules causes an error: six.py

I wanted to include the netbox ext pillar on my ubuntu 18.04 system. The netbox.py is located in /usr/lib/python3/dist-packages/salt/modules/netbox.py so I configured in /etc/salt/master: extension_modules: /usr/lib/python3/dist-packages/salt When I start salt I get the the error: Jan 08 20:54:58 nms salt-master[18922]: ModuleNotFoundError: No module named 'http.client'; 'http' is not a package Jan 08 20:54:58 nms salt-master[18922]: Traceback (most recent call last): Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/bin/salt-master"", line 22, in <module> Jan 08 20:54:58 nms salt-master[18922]: salt_master() Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/salt/scripts.py"", line 97, in salt_master Jan 08 20:54:58 nms salt-master[18922]: master.start() Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/salt/cli/daemons.py"", line 211, in start Jan 08 20:54:58 nms salt-master[18922]: super(Master, self).start() Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/salt/utils/parsers.py"", line 1044, in start Jan 08 20:54:58 nms salt-master[18922]: self.prepare() Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/salt/cli/daemons.py"", line 191, in prepare Jan 08 20:54:58 nms salt-master[18922]: import salt.master Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/salt/master.py"", line 35, in <module> Jan 08 20:54:58 nms salt-master[18922]: import salt.client.ssh.client Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/salt/client/ssh/__init__.py"", line 34, in < Jan 08 20:54:58 nms salt-master[18922]: import salt.minion Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/salt/minion.py"", line 81, in <module> Jan 08 20:54:58 nms salt-master[18922]: import salt.pillar Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/salt/pillar/__init__.py"", line 20, in <modu Jan 08 20:54:58 nms salt-master[18922]: import salt.fileclient Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/salt/fileclient.py"", line 15, in <module> Jan 08 20:54:58 nms salt-master[18922]: from tornado.httputil import parse_response_start_line, HTTPHeaders, HTTPInput Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/tornado/httputil.py"", line 39, in <module> Jan 08 20:54:58 nms salt-master[18922]: import http.cookies as Cookie Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/salt/utils/http.py"", line 60, in <module> Jan 08 20:54:58 nms salt-master[18922]: import salt.ext.six.moves.http_client Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/salt/ext/six.py"", line 210, in load_module Jan 08 20:54:58 nms salt-master[18922]: mod = mod._resolve() Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/salt/ext/six.py"", line 122, in _resolve Jan 08 20:54:58 nms salt-master[18922]: return _import_module(self.mod) Jan 08 20:54:58 nms salt-master[18922]: File ""/usr/lib/python3/dist-packages/salt/ext/six.py"", line 89, in _import_modul Jan 08 20:54:58 nms salt-master[18922]: __import__(name) Jan 08 20:54:58 nms salt-master[18922]: ModuleNotFoundError: No module named 'http.client'; 'http' is not a package Jan 08 20:54:59 nms systemd[1]: salt-master.service: Main process exited, code=exited, status=1/FAILURE Jan 08 20:54:59 nms systemd[1]: salt-master.service: Failed with result 'exit-code'. Jan 08 20:54:59 nms systemd[1]: Failed to start The Salt Master Server. Versions report: # salt-master -V Salt Version: Salt: 2018.3.3 Dependency Versions: cffi: 1.11.5 cherrypy: Not Installed dateutil: 2.6.1 docker-py: Not Installed gitdb: 2.0.3 gitpython: 2.1.8 ioflo: Not Installed Jinja2: 2.10 libgit2: 0.26.0 libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: 2.19 pycrypto: 3.7.2 pycryptodome: Not Installed pygit2: 0.26.2 Python: 3.6.7 (default, Oct 22 2018, 11:32:17) python-gnupg: 0.4.1 PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.3 timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.2.5 System Versions: dist: Ubuntu 18.04 bionic locale: UTF-8 machine: x86_64 release: 4.15.0-43-generic system: Linux version: Ubuntu 18.04 bionic",Can you explain more about what you are trying to accomplish?,"I want to use netbox as an external pillar as described in https://docs.saltstack.com/en/develop/ref/pillar/all/salt.pillar.netbox.html First I want to define devices in netbox and make salt to know about the devices. Finally I want to define devices in netbox and make salt to implement the configuration. When I configure the external pillar as described above salt tells me ""ext_pillar netbox interface is unavailable"""
saltstack/salt,https://github.com/saltstack/salt/issues/51090,saltstack_salt_issues_51090,"state_output option being ignored, salt 2018.3.3

### Description of Issue/Question I am attempting to utilize the option ""state_output"" so that my state.apply commands do not display so much information every time I run them. My understanding is that by setting state_output to options like ""changes"" should reduce my output, however, I receive the same level of verbosity no matter what I have tried. ### Setup ",Did you restart the master after adding this configuration change? also do you see this behavior with all states or just this one?,"Hey @Ch3LL, thanks for the response. Indeed I do restart after making configuration changes, and this behavior is seen on all state files. I think I managed to identify what was causing the issue, in my configuration file `output: nested` was set. When I commented that option, I received the expected output from the state_output option. It seems that option was overwriting state_output as well as cli_summary. Is this intended behavior?"
saltstack/salt,https://github.com/saltstack/salt/issues/51101,saltstack_salt_issues_51101,"Package conflict of python-ioflo in Saltstack Ubuntu repositories

### Description of Issue/Question Package  Kind regards, Dominik",Do you agree?,"I'm afraid this is not the only package affected. I searched the Saltstack Ubuntu repository for more duplicates and found the following conflicts (only precise/trusty/xenial/bionic latest paths): (md5sum os/packagename)  on reverse-dependend packages (which themselves probably must also increase in version then?), but it would be nice if someone with more Debian packaging knowledge could verify this."
saltstack/salt,https://github.com/saltstack/salt/issues/51106,saltstack_salt_issues_51106,"Cloud profile settings don't override provider settings

### Description of Issue/Question When using the ""location"" attribute within AWS, if I specify the ""location"" attribute in the profile settings and nothing within the provider settings, it defaults to something I don't want. For instance, if I default my profile settings to ""location"" us-east-2, and nothing in the provider file, I've noticed in the debug output it uses ""us-east-1"". But only for the password check, for the most part, the creation of a new instance works fine, but when it comes to validating the ""auto"" generated password from AWS, I notice in the debug output that the URL is being changed. This is reproducible very easily. Basically I have to update the provider file each time I work in different AWS locations because the provider file is taken precedence and/or being ignored from my profiler settings where I declare the ""location"" value. ### Setup Launching a new instance with no ""location"" provider value set: provider file: aws-cloud: driver: ec2 id: XXXXXXXXXXXXXXXXXXXXXXXXXXX key: XXXXXXXXXXXXXXXXXXXXXXXXXX keyname: brian_keypair private_key: /opt/salt/brian_keypair.pem ssh_interface: public_ips minion: master: servername.domain.com win_installer: /srv/salt/win/files/Salt-Minion-2018.3.3-Py3-AMD64-Setup.exe win_username: Administrator win_password: auto use_winrm: True winrm_use_ssl: True winrm_verify_ssl: False userdata_file: /srv/salt/win/scripts/windows-firewall.ps1 userdata_template: jinja win_deploy_auth_retries: 10 win_deploy_auth_retry_delay: 1 Launch server with this command: salt-cloud -p ec2-east-test salt-test01 profile file: ec2-east-test: provider: aws-cloud location: us-east-2 image: ami-0170ffc1abff2ebdc size: t2.medium network_interfaces: - DeviceIndex: 0 AssociatePublicIpAddress: True SubnetId: subnet-08d67c1cadc7f948e SecurityGroupId: - sg-0641ea4055e5de2f2 del_root_vol_on_destroy: True del_all_vol_on_destroy: True rename_on_destroy: True debug log output: [DEBUG ] Waiting for auto-generated Windows EC2 password [DEBUG ] Using AWS endpoint: ec2.us-east-1.amazonaws.com [DEBUG ] AWS Request: https://ec2.us-east-1.amazonaws.com/?Action=DescribeInstances&Filter.1.Name=tag%3AName&Filter.1.Value.1=salt-test01&Version=2014-10-01 [DEBUG ] Starting new HTTPS connection (1): ec2.us-east-1.amazonaws.com:443 [DEBUG ] https://ec2.us-east-1.amazonaws.com:443 ""GET /?Action=DescribeInstances&Filter.1.Name=tag%3AName&Filter.1.Value.1=salt-test01&Version=2014-10-01 HTTP/1.1"" 200 230 [DEBUG ] AWS Response Status Code: 200 [ERROR ] There was a profile error: Traceback (most recent call last): File ""/usr/lib/python2.7/site-packages/salt/cloud/cli.py"", line 281, in run self.config.get('names') File ""/usr/lib/python2.7/site-packages/salt/cloud/__init__.py"", line 1454, in run_profile ret[name] = self.create(vm_) File ""/usr/lib/python2.7/site-packages/salt/cloud/__init__.py"", line 1284, in create output = self.clouds[func](vm_) File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.py"", line 2705, in create vm_, data, ip_address, display_ssh_output File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.py"", line 2333, in wait_for_instance call='action', File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.py"", line 4727, in get_password_data instance_id = _get_node(name)['instanceId'] File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.py"", line 3393, in _get_node return next(iter(instance_info)) StopIteration Everything goes through fine until it gets to the password validation, and you can see that the URL changes to something that is not ""us-east-2"" as I've defined it in my profile settings. ### Steps to Reproduce Issue See above. ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2018.3.3 Dependency Versions: cffi: 1.11.5 cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: 0.6.4 gitpython: 2.1.11 ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.19 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Oct 30 2018, 23:45:53) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.6.1810 Core locale: UTF-8 machine: x86_64 release: 3.10.0-862.3.2.el7.x86_64 system: Linux version: CentOS Linux 7.6.1810 Core Salt Minion is a Windows box, attempting to install latest Python 3 client: Salt-Minion-2018.3.3-Py3-AMD64-Setup.exe",Can you make multiple provider's each with a different location to suite your needs?,"@dwoz Not sure if this answers your question or not, but I definitely have to use a different set of keys for each zone, but those settings are defined in the profile file for the instances individually and not configured in the provider file where I consider those values to be ""global"" parameter values that are defined across any profile I use when I indicate the value for the ""provider"" attribute in the profile file. A similar test is below, where I have configured the provider file with the ""us-east-2"" value, I launch a ""us-west-2"" server and it the debug logs show it's using ""us-east-2"", which is coming from the provider file, but not the profile settings where I define the ""location"" value (see below). provider file (with keys defined and location defined): aws-cloud: driver: ec2 id: XXXXXXXXXXXXXXXXXXXXXXXXXXXXX key: XXXXXXXXXXXXXXXXXXXXXXXXXXX keyname: brian_keypair private_key: /opt/salt/brian_keypair.pem location: us-east-2 ssh_interface: public_ips minion: master: salt.pi2solutions.com win_installer: /srv/salt/win/files/Salt-Minion-2018.3.3-Py3-AMD64-Setup.exe win_username: Administrator win_password: auto use_winrm: True winrm_use_ssl: True winrm_verify_ssl: False userdata_file: /srv/salt/win/scripts/windows-firewall.ps1 userdata_template: jinja win_deploy_auth_retries: 10 win_deploy_auth_retry_delay: 1 profile file (fields are defined for keys to be used in west region and location, not east location): ec2-west-test: provider: aws-cloud location: us-west-2 image: ami-019e99815e07ceb49 size: t2.medium network_interfaces: - DeviceIndex: 0 AssociatePublicIpAddress: True SubnetId: subnet-fe0ab0b7 SecurityGroupId: - sg-0d0b42774c9b6b33b keyname: PI2-BBEARD private_key: /opt/salt/pi2-bbeard.pem del_root_vol_on_destroy: True del_all_vol_on_destroy: True tag: {'Environment': 'salt-testing'} Salt command with debug output: salt-cloud -p ec2-west-test salt-west02 -l debug [DEBUG ] Waiting for auto-generated Windows EC2 password [DEBUG ] Using AWS endpoint: ec2.us-east-2.amazonaws.com [DEBUG ] AWS Request: https://ec2.us-east-2.amazonaws.com/?Action=DescribeInstances&Filter.1.Name=tag%3AName&Filter.1.Value.1=salt-west02&Version=2014-10-01 [DEBUG ] Starting new HTTPS connection (1): ec2.us-east-2.amazonaws.com:443 [DEBUG ] https://ec2.us-east-2.amazonaws.com:443 ""GET /?Action=DescribeInstances&Filter.1.Name=tag%3AName&Filter.1.Value.1=salt-west02&Version=2014-10-01 HTTP/1.1"" 200 None [DEBUG ] AWS Response Status Code: 200 [ERROR ] There was a profile error: Traceback (most recent call last): File ""/usr/lib/python2.7/site-packages/salt/cloud/cli.py"", line 281, in run self.config.get('names') File ""/usr/lib/python2.7/site-packages/salt/cloud/__init__.py"", line 1454, in run_profile ret[name] = self.create(vm_) File ""/usr/lib/python2.7/site-packages/salt/cloud/__init__.py"", line 1284, in create output = self.clouds[func](vm_) File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.py"", line 2705, in create vm_, data, ip_address, display_ssh_output File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.py"", line 2333, in wait_for_instance call='action', File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.py"", line 4727, in get_password_data instance_id = _get_node(name)['instanceId'] File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.py"", line 3393, in _get_node return next(iter(instance_info)) StopIteration If I don't define the location or key parameters in the provider file, but do have them in the profile file, this happens: [DEBUG ] Waiting for auto-generated Windows EC2 password [DEBUG ] Using AWS endpoint: ec2.us-east-1.amazonaws.com [DEBUG ] AWS Request: https://ec2.us-east-1.amazonaws.com/?Action=DescribeInstances&Filter.1.Name=tag%3AName&Filter.1.Value.1=salt-west03&Version=2014-10-01 [DEBUG ] Starting new HTTPS connection (1): ec2.us-east-1.amazonaws.com:443 [DEBUG ] https://ec2.us-east-1.amazonaws.com:443 ""GET /?Action=DescribeInstances&Filter.1.Name=tag%3AName&Filter.1.Value.1=salt-west03&Version=2014-10-01 HTTP/1.1"" 200 230 [DEBUG ] AWS Response Status Code: 200 [ERROR ] There was a profile error: Traceback (most recent call last): File ""/usr/lib/python2.7/site-packages/salt/cloud/cli.py"", line 281, in run self.config.get('names') File ""/usr/lib/python2.7/site-packages/salt/cloud/__init__.py"", line 1454, in run_profile ret[name] = self.create(vm_) File ""/usr/lib/python2.7/site-packages/salt/cloud/__init__.py"", line 1284, in create output = self.clouds[func](vm_) File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.py"", line 2705, in create vm_, data, ip_address, display_ssh_output File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.py"", line 2333, in wait_for_instance call='action', File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.py"", line 4727, in get_password_data instance_id = _get_node(name)['instanceId'] File ""/usr/lib/python2.7/site-packages/salt/cloud/clouds/ec2.py"", line 3393, in _get_node return next(iter(instance_info)) StopIteration The URL points to ""us-east-1"", something I don't have defined anywhere, so it would seem some logic is present to pick up ""defaults"" on my account, but ignoring my settings defined in the profile and not taking order of precedence for provider being a ""global"" setting and profile taking more specific settings. Hopefully I'm saying that right?"
saltstack/salt,https://github.com/saltstack/salt/issues/51123,saltstack_salt_issues_51123,"logstash_udp_handler doesn't work in py3

 Needs e.g. a conversion to `six.binary_type` here: https://github.com/saltstack/salt/blob/v2018.3.3/salt/log/handlers/logstash_mod.py#L381",Can you provide us with the output of `salt -V`?,The zmq handler is similarly broken 
saltstack/salt,https://github.com/saltstack/salt/issues/51742,saltstack_salt_issues_51742,"Py3 should prefer venv module to virtualenv binary

In Python 3 the `virtualenv` script was replaced by `pyvenv`, and then in 3.6 deprecated in favour of the builtin `venv` module. The latter should be preferred, but at minimum `pyvenv` should be added to `virtualenv_mod.KNOWN_BINARY_NAMES`.",would you mind pushing as PR? thanks!,"@Ch3LL I've done the easy bit. I'm not planning to rewrite it to `import venv`. I'm also not sure how/whether it can still be set via minion config, or whether someone wants to put that in."
saltstack/salt,https://github.com/saltstack/salt/issues/52167,saltstack_salt_issues_52167,"x509.certificate_managed creates new certificate every run

The state always creates a new certificate before it's confirmed whether one is needed. If using a `signing_policy` with `copypath`, this can quickly fill the directory with thousands of certificates that were never used. https://github.com/saltstack/salt/blob/v2018.3.4/salt/states/x509.py#L502 https://github.com/saltstack/salt/blob/v2018.2/salt/states/x509.py#L493 I notice on the develop branch, it's now creating two certificates every time. https://github.com/saltstack/salt/blob/develop/salt/states/x509.py#L533",can you share your state where you are seeing this issue? thanks,"Any `x509.certificate_managed` state with `ca_server`, such as the documentation examples."
saltstack/salt,https://github.com/saltstack/salt/issues/51139,saltstack_salt_issues_51139,"salt-master VM created from salt-cloud with non-root user results in file/directory ownership changed to root on host

### Description of Issue This is a spin off error from issue #51127 I am running `salt-cloud` with an unprivileged (non-root) user, with a recursive copy of `salt/` directories owned by the unprivileged user. After successfully spinning up a salt-master VM on DigitalOcean, I attempt to create a salt-minion VM. However, my `salt/pki/master/` directory, and all files/directories under it, have had ownership recursively changed to the root user. I temporarily fix this by manually changing the ownership back with the below command, but I'd rather just have the directory ownership never change. ",Can you confirm what user that Salt master is running as?,"hi @garethgreenaway, the salt-master is running. "
saltstack/salt,https://github.com/saltstack/salt/issues/51477,saltstack_salt_issues_51477,"Vault module missing some examples from documentation

### Description of Issue/Question On the [documentation for the Vault module](https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.vault.html), under `configuration:auth:`, ",Do you have time to submit a PR with the changes?,Sure; I actually don't know how to export and read env vars in Salt! Let me see if I can figure it out; I think [salt.states.environ](https://docs.saltstack.com/en/latest/ref/states/all/salt.states.environ.html) will tell me. Give me a bit.
saltstack/salt,https://github.com/saltstack/salt/issues/51190,saltstack_salt_issues_51190,"Salt-cloud vmware.py Documentation Add

### Description of Issue/Question Salt documentation needs to add customization_spec to the list to select a customization profile. Users would not know how to ensure there vm is being provisioned with a customization without looking at the source code.",Can you point us at the location of the documentation that you're referring to and what version of Salt this documentation is for?,"Sorry about that @garethgreenaway . Place I was discussing was https://docs.saltstack.com/en/latest/topics/cloud/vmware.html#profiles. Many configuration options are listed, but the Configuration_spec item is missing. If you want to use the `Customization: True` (which is default), you need to list a customization profile."
saltstack/salt,https://github.com/saltstack/salt/issues/51229,saltstack_salt_issues_51229,"Aws does not see aws instance

### Description of Issue/Question Hello, I have a problem with create and destroy instance of AWS. If I try create instance so I get this error https://github.com/saltstack/salt/issues/39737 The error I tried to fixed by hemebond of post. Just on the 2790 of line. `node = _get_node(instance_id=vm_['instance_id'], location=location)` So create of part is fine now. But If i destroy instances so I get this `root@ip-172-31-46-62:~# salt-cloud -d test10` No machines were found to be destroyed Because salt-cloud does not see my instance of aws. ### Versions Report ","Does https://github.com/saltstack/salt/issues/39737#issuecomment-426353931 work for you? I'm not familiar with this module at all, but it would appear that something is definitely missing somewhere!","Yes, but it works only for create instance."
saltstack/salt,https://github.com/saltstack/salt/issues/51282,saltstack_salt_issues_51282,"Salt API sometimes does not return the result of execution. The return from API is empty

Salt API sometimes does not return the result of execution. The return from API is empty. We have disabled all kinds of caching on the system. We run salt state sls using API. It intermittently returns the result. The Job API through salt-api is sync. However, many times the job is actually successful but result is empty. ### Setup [master.txt](https://github.com/saltstack/salt/files/2783934/master.txt) ### Steps to Reproduce Issue commandOutput - {""return"": [{}]}] Just run the high state using salt API. [minion.txt](https://github.com/saltstack/salt/files/2783945/minion.txt) ### Versions Report salt-api 2018.3.3 (Oxygen) Salt Version: Salt: 2018.3.3 Dependency Versions: cffi: 1.9.1 cherrypy: Not Installed dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.9.5 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 3.5.6 (default, Dec 12 2018, 13:21:20) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.2 ZMQ: 4.1.4 System Versions: dist: locale: UTF-8 machine: x86_64 release: 4.4.147-1.ph1 system: Linux version: Not Installed ``",can you include the entire salt-api request that you are making? how often does this occur? Daily? every other call?,"This occurs when the machines are distantly placed in the network . Occurs like 2 out of every 5 times for me. Request - curl -X POST \ https://localhost:8553/run \ -H 'Content-Type: application/json' \ -H 'Postman-Token: f966d18b-b1e4-4a03-b7ee-f744469c35db' \ -H 'X-Auth-Token: f2326fc589d402345ed4b1585a45366afaa5ef1b1b4e78483c9b6ece7fd00da3' \ -H 'cache-control: no-cache' \ -d '{ ""client"" : ""local"", ""tgt"" : ""$machine id$"", ""fun"" : ""state.sls"", ""kwargs"" : { ""mods"" : ""$sls file to apply$"", ""pillar"" : { ""$key-pillar$"" : ""$value-pillar$"" } } }'"
saltstack/salt,https://github.com/saltstack/salt/issues/51288,saltstack_salt_issues_51288," Master hostname: 'salt' not found or not responsive. Retrying in 30 seconds

After the server restart the server is not connecting to minions. Minion Logs: ------------- 2019-01-23 19:27:08,647 [salt.minion :166 ][ERROR ][1844] Master hostname: 'salt' not found or not responsive. Retrying in 30 seconds 2019-01-23 19:27:38,666 [salt.utils.network:1819][ERROR ][1844] DNS lookup or connection check of 'salt' failed. Master Logs: ------------- 2019-01-22 20:47:15,910 [salt.utils.parsers:1045][WARNING ][12310] Master received a SIGTERM. Exiting. 2019-01-22 20:47:27,311 [salt.utils.verify:535 ][WARNING ][25258] Insecure logging configuration detected! Sensitive data may be logged. 2019-01-22 20:48:06,051 [salt.utils.parsers:1045][WARNING ][25258] Master received a SIGINT. Exiting. [root@monitoring salt]# salt-master -l debug [DEBUG ] Reading configuration from /etc/salt/master [DEBUG ] Using cached minion ID from /etc/salt/minion_id: monitoring.vicomdemo.local [DEBUG ] Configuration file path: /etc/salt/master [WARNING ] Insecure logging configuration detected! Sensitive data may be logged. [INFO ] Setting up the Salt Master [WARNING ] Unable to bind socket 0.0.0.0:4505, error: [Errno 98] Address already in use; Is there another salt-master running? [INFO ] The Salt Master is shut down [DEBUG ] Stopping the multiprocessing logging queue listener [DEBUG ] closing multiprocessing queue [DEBUG ] joining multiprocessing queue thread [DEBUG ] Stopped the multiprocessing logging queue listener The salt master is shutdown. The ports are not available to bind [root@monitoring salt]#",can this be closed? Or is there still a concern?,"Its still not working .. [root@monitoring ~]# telnet localhost 4506 Trying ::1... telnet: connect to address ::1: Connection refused Trying 127.0.0.1... telnet: connect to address 127.0.0.1: Connection [root@monitoring ~]# salt-master -l debug [DEBUG ] Reading configuration from /etc/salt/master [DEBUG ] Using cached minion ID from /etc/salt/minion_id: monitoring.vicomdemo.local [DEBUG ] Configuration file path: /etc/salt/master [WARNING ] Insecure logging configuration detected! Sensitive data may be logged. [INFO ] Setting up the Salt Master [WARNING ] Unable to bind socket 10.10.6.216:4505, error: [Errno 98] Address already in use; Is there another salt-master running? [INFO ] The Salt Master is shut down [DEBUG ] Stopping the multiprocessing logging queue listener [DEBUG ] closing multiprocessing queue [DEBUG ] joining multiprocessing queue thread [DEBUG ] Stopped the multiprocessing logging queue listener The salt master is shutdown. The ports are not available to bind [root@monitoring ~]# [root@monitoring ~]# hostname monitoring.vicomdemo.local [root@monitoring ~]# nslookup monitoring.vicomdemo.local Server: 10.10.6.25 Address: 10.10.6.25#53 Name: monitoring.vicomdemo.local Address: 10.10.6.216 [root@monitoring ~]# ________________________________ From: Megan Wilhite <notifications@github.com> Sent: 24 January 2019 21:09:25 To: saltstack/salt Cc: Patric Tonni; Author Subject: Re: [saltstack/salt] Master hostname: 'salt' not found or not responsive. Retrying in 30 seconds (#51288) are you stating its working now? can this be closed? Or is there still a concern? — You are receiving this because you authored the thread. Reply to this email directly, view it on GitHub<https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fsaltstack%2Fsalt%2Fissues%2F51288%23issuecomment-457242108&data=02%7C01%7Cptonni%40vicomnet.com%7C5b035f7c764d492190de08d682121ef2%7Ce2eac50279f7450193442bc870f9fcde%7C0%7C0%7C636839411672899006&sdata=I9gYKdTDpCiO2ibNMCd0Gr0io5vc4giqI2jl3VTQ2oM%3D&reserved=0>, or mute the thread<https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fnotifications%2Funsubscribe-auth%2FAlRq-m_InYa4e2LQGUSm-mgPYIZPErpBks5vGdOtgaJpZM4aO2ek&data=02%7C01%7Cptonni%40vicomnet.com%7C5b035f7c764d492190de08d682121ef2%7Ce2eac50279f7450193442bc870f9fcde%7C0%7C0%7C636839411672909018&sdata=N2KW%2FU964n3ToxQ0k9vuNd9HAawNRvYJsM9E8SdhmN8%3D&reserved=0>."
saltstack/salt,https://github.com/saltstack/salt/issues/51326,saltstack_salt_issues_51326,"Exception in minion when using master_type: func

### Description of Issue/Question When using master_type: func, salt minion spams its log with the following expception: ",Can you send me an example of your master config? Scrubbed of any sensitive data of course. :),
saltstack/salt,https://github.com/saltstack/salt/issues/51399,saltstack_salt_issues_51399,"Salt-master logs Error while parsing IPv4 address

### Description of Issue/Question I recently started using Salt and the debug traces on salt-master are full of this errors: ### Setup Salt master and 4 minions setup on different VMs  ### Versions Report salt-master 2018.3.2 (Oxygen) salt-minion 2014.1.13 (Hydrogen)",can you: `grep 'vagrant-openSUSE-Leap' /etc/salt/master` and `cat /etc/hosts`?,"vagrant-openSUSE-Leap:/etc/salt # grep 'vagrant-openSUSE-Leap' /etc/salt/master vagrant-openSUSE-Leap:/etc/salt # cat /etc/hosts hosts This file describes a number of hostname-to-address mappings for the TCP/IP subsystem. It is mostly used at boot time, when no name servers are running. On small systems, this file can be used instead of a ""named"" name server. Syntax: IP-Address Full-Qualified-Hostname Short-Hostname 127.0.0.1 localhost special IPv6 addresses ::1 localhost ipv6-localhost ipv6-loopback fe00::0 ipv6-localnet ff00::0 ipv6-mcastprefix ff02::1 ipv6-allnodes ff02::2 ipv6-allrouters ff02::3 ipv6-allhosts"
saltstack/salt,https://github.com/saltstack/salt/issues/51512,saltstack_salt_issues_51512,"Parrot Security OS not working with salt?

### Description of Issue/Question Hi, I'm having an issue with installing pkgs on Parrot Security OS.  I have had no issues with this using Ubuntu or Kali, my only guess (from what I have read around here) is that Parrot is not part of os_family grain. Thank you!",Did you want to try to submit a PR for that and test?,"Just wanted to say thank you! As soon as I added 'Parrot': Debian', under Kali everything is working fine, I don't know how to make a PR (Pull requst) as I'm very new to git myself. I just wanted to say thank you! <3"
saltstack/salt,https://github.com/saltstack/salt/issues/51515,saltstack_salt_issues_51515,"netapi modules incompatible with eauth acl

The SaltAPI/`netapi` modules as shipped with Salt 2018.3.3 (`rest_cherrypy` and `rest_tornado`) contain a `perms` field in the response structure to a successful `POST` request to `/login`. These `perms` are populated by retrieving the relevant ACLs from the (master) configuration file (there's a bit of code duplication here, by the way). However, while this works for `auth` modules who have ACLs specified in the configuration file, it doesn't work for `auth` modules that expose an `acl` procedure to dynamically construct ACL lists. When using such `auth` module, the `perms` field in the `/login` response remains empty (I believe a similar issue may occur when using `process_acl` like the LDAP `eauth` module does). As a work-around, I created a custom `netapi` module (wrapping functionality of `rest_cherrypy`) which does fill in these fields based on the `auth_list` field in the `token` generated using `self.auth.mk_token`, and sets the value of `perms` to this list, similar to how the current code special-cases the `django` `auth` module. However, this is a hack: it requires this `auth_list` to be populated, which is only the case if `keep_acl_in_token` is `true` in the configuration. There seems to be no way to retrieve the ACL list from a given token in the context of a `netapi` module otherwise.",Can you include the `salt --versions-report` you are seeing this one and a use case to help replicate this issue?," Anyway: Salt 2018.3.3, Python 2.7, CentOS 7 host, Salt from 'official' SaltStack repository. Shouldn't matter much, the issue lies here: https://github.com/saltstack/salt/blob/df1f9e9b23aa604c9df07388ecaae83c8b627b1f/salt/netapi/rest_cherrypy/app.py#L1897 (same or roughly same code in 2018.3.3) Also discussed on `#develop` in the Salt Slack workspace yesterday. To pro-actively answer other questions: - This is unrelated to any of my Salt states or whatever - This is not related to any specific action modules - This is related to a discrepancy between how the (e)auth framework works (`salt.auth.__init__`) and what `netapi` modules / route handlers do If unclear, let me know."
saltstack/salt,https://github.com/saltstack/salt/issues/51540,saltstack_salt_issues_51540,"docker_container.running changes ownership of volume root even when test=True

### Description of Issue/Question When testing docker_container.running (so, when running it with test=True), it changes the ownership of the volume root. Reading issues like https://github.com/saltstack/salt/issues/50155 it makes me thing the test flag might be ignored there. Also, I'm not sure why the :ro directive in binds parameter is changing the volume root instead of simply updating the permissions on the folder inside the container. ### Setup run_wp_web: docker_container.running: - name: wp-web - image: wp-web:latest - restart_policy: always - links: - wp-php:php - binds: - wp-uploads:/var/www/html/docroot/wp-content/uploads:ro ### Test sudo salt 'host01' state.sls_id 'run_wp_web' host01.wac test=True ### Versions Report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: 1.6.0 cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.7.2 libgit2: 0.24.6 libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.1 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.24.2 Python: 2.7.5 (default, Apr 11 2018, 07:36:10) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.5.1804 Core locale: UTF-8 machine: x86_64 release: 3.10.0-862.2.3.el7.x86_64 system: Linux version: CentOS Linux 7.5.1804 Core",Do you feel comfortable with making a PR to resolve the issue?,Sorry but i'm not familiar enough with salt or even python to do that
saltstack/salt,https://github.com/saltstack/salt/issues/51573,saltstack_salt_issues_51573,"RFC: Implement a MWorker cache

Before I start building something I wanted to see if there's already something available/planned that does what I want. I would like to implement a cache to be used inside external on-demand pillars. I want to use salt.cache API but there is no way to use the same in-memory cache instance. This probably works fine if you are using an external cache but in-memory cache does not work. The proposed feature is adding an option worker_cache allowing users to specify which cache driver to use for this purpose. This cache instance would live on the MWorker/AESFuncs and would be passed into the get_pillar and ultimately passed into the ext_pillar. Additionally, I would like to implement an If-Modified-Since Cache (IMSCache). The existing cache API requires the caller to know the expiry when this policy might be dictated using cache-control headers. An IMSCache would work similarly to a Cache but embed the expiry inside the cached object. The user-supplied `fun` argument would accept updated,tag arguments and perform conditional validation when the object is expired. Finally, I would like to implement a TieredCache driver to allow stacking cache drivers. The first level is always an IMSCache (or Cache) using the MemCache driver and the second level is an IMSCache (or Cache) using the e.g. redis driver. I haven't thought about this much but the idea is to prevent many minion workers from overwhelming the backend resource on cache expiry. On a refresh the TierCache would ""lock"" the key and subsequent requests would either block until lock expired or serve stale data until lock expired or key is refreshed. At some point the Cache could be deprecated as IMSCache should work mostly the same. The user-supplied `fun` would need to be updated to return the expiry, but could ignore the updated,tag if they do not wish to conditionally validate. Please let me know what you think. I can always implement this outside of salt but it seems like it might be generally useful.",How would this differ from that? Is it specifically for caching ext pillar?,"I have looked at salt.utils.cache but will admit I didn't try. Seems that because the salt.utils.cache is not a Singleton, and the factoried cache is not accessible inside the ext_pillar context, there is no way to do use a cache within ext_pillar. Passing a factoried cache into the ext_pillar is what I want because it gives the ext_pillar a finer grained control over what to cache/how. We are not using PillarCache because simple TTL caching does not work in our environment. We also use a lot of external API to provide info about the environment the minon runs in. These API might be semi-expensive to call and return a lot of data, and are implemented as ext_pillar. The output is currently cached in minion data cache, which has some nasty effects anyway (deserialize minion from data cache takes ~4-7s/minion). This is related and I think switching to on-demand pillar would help here. I think that ext_pillar should have access to a cache. I think the cache should be pluggable (though I would like to use a 1st level cache inside MWorker and shared external cache for all MWorker). The cache should be able to support IMS semantics. While the intended use case is an ext_pillar cache I could see a worker_cache being generally useful to execution modules as well. This is different from context cache because all workers would use the same cache. Also, with IMS the cache would be invalidated. A quick grep for cache found github module. Consider using an IMSCache instead:  Each worker only needs to make that blocking request 1x -- regardless of how many subsequent context need access to slow_blocking_resource. Using a shared_cache (tiered cache) -- upon closer inspection the MemCache kind of does this already would allow each master to only make the request 1x regardless of how many workers there are. The thinking is the same for on-demand ext_pillar. hopefully it makes sense?"
saltstack/salt,https://github.com/saltstack/salt/issues/51827,saltstack_salt_issues_51827,"2018.3.4 TypeError: unicode argument without an encoding

### Description of Issue/Question Seems similar to other issues (#51298) involving 16 byte long strings, in our case the ""master"" entry on the minion has exactly 16 bytes and causes an exception. We didn't address this problem with prior 2018.3 branch. ### Steps to Reproduce Issue Just installed fresh Debian 9.8. minimal, installed salt-minion, run salt-call grains.items (or any other command).  ### Versions Report 2018.3.4+ds-1",can you verify that the PR fixes it on 2018.3.4 as well?,"Sorry, I don't know what information you need from me. I installed the latest deb from http://repo.saltstack.com/apt/debian/9/amd64/2018.3 The fix is not there."
saltstack/salt,https://github.com/saltstack/salt/issues/51832,saltstack_salt_issues_51832,"pillar include stopped working

### Description of Issue/Question I have used git for ext_pillar for a while now and when upgrading to 2019.2.0 no pillars get rendered for me. As a quick test I downgraded to 2018.3.4 and everything works as expected. ext_pillar config: ",Do you see any error's or further information in the debug logs when this occurs?,"OK I was vague as it seems more involved than I first thought. I have some `include:`s happening in the pillar and it looks like this: https://github.com/nocturo/pillar If you put that as your ext_pillar, with root: "
saltstack/salt,https://github.com/saltstack/salt/issues/52554,saltstack_salt_issues_52554,"Wrong schema for mysql returner

### Description of Issue/Question The current schema for salt.returners.mysql raises an error: `ERROR 1061 (42000): Duplicate key name 'jid'` because `jid` is already a BTREE index. ### Steps to Reproduce Issue Insert the mysql schema provided in the [docs](https://docs.saltstack.com/en/latest/ref/returners/all/salt.returners.mysql.html). I think removing `CREATE INDEX jid ON jids(jid) USING BTREE;` should do the trick since `UNIQUE` constraint makes `jid` a BTREE index.",Can we get a `--versions-report` from the setup where this issue is triggered please?,"Sure, if you want, but i don't see the point, the problem is not in salt code, it's in the docs for Mysql returner. Specifically : "
saltstack/salt,https://github.com/saltstack/salt/issues/51865,saltstack_salt_issues_51865,"salt.match.search_by resulting in 'None' since 2019.2

### Description of Issue/Question I'm using a setup as described in https://github.com/saltstack/salt/issues/39457#issuecomment-282506189 to apply roles to my minions. This worked fine until I upgraded to 2019.02. It seems like the match.search_by isn't working correctly, or maybe it's something I've missed in the release notes. Here's what I have (I've added log.debug for some variables): ### Setup pillar/roles.jinja  Master and minions have the same version.",Can you confirm that you're only seeing this behavior when targeting the instance that is your Salt master? Thanks!,"@garethgreenaway no problem, thanks for the feedback! However the problem also occurs when running _state.apply_ on other targets than my salt master. The same when I use _salt-call state.apply_ from one of my minions. This is the error I get (roles would be normally populated by match.search_by): "
saltstack/salt,https://github.com/saltstack/salt/issues/51877,saltstack_salt_issues_51877,"pony output module broken on colour terminals

### Description of Issue/Question ponysay output broken because of ANSI colour codes. ### Setup ### Steps to Reproduce Issue run a local command using the pony output module, see a bunch of escape codes instead of the actual ANSI graphics. ;) ",Does running ponysay outside of salt show different output?,"yeah, ponysay outside of salt works correctly, shows some lovely colour graphics and stuff. however, I've found a fix that seems very easy! in the check_output call, if you add universal_newlines=True, then it works correctly: "
saltstack/salt,https://github.com/saltstack/salt/issues/56652,saltstack_salt_issues_56652,"[BUG] pkgrepo.managed fails if PPA repository GPG key has UTF8 characters

**Description** State:  </details>",Could you tell me exactly what command you ran to see this issue along with it's output and the arg `--log-level debug`?,"I just ran `salt-ssh --refresh --user $USER servername state.sls test -l debug`. <details><summary>Here's the log.</summary> <pre> [INFO ] Loading Saltfile from '/srv/saltstack/Saltfile' [DEBUG ] Reading configuration from /srv/saltstack/Saltfile [DEBUG ] Reading configuration from /srv/saltstack/etc/master [DEBUG ] Configuration file path: /srv/saltstack/etc/master [DEBUG ] LazyLoaded flat.targets [DEBUG ] LazyLoaded jinja.render [DEBUG ] LazyLoaded yaml.render [DEBUG ] compile template: /srv/saltstack/etc/roster [DEBUG ] Jinja search path: ['/srv/saltstack/cache/files/base'] [DEBUG ] LazyLoaded roots.envs [DEBUG ] Could not LazyLoad roots.init: 'roots.init' is not available. [DEBUG ] Updating roots fileserver cache [PROFILE ] Time (in seconds) to render '/srv/saltstack/etc/roster' using 'jinja' renderer: 0.152022123336792 [DEBUG ] Rendered data from file: /srv/saltstack/etc/roster: ---8<---[snip]---8<--- [PROFILE ] Time (in seconds) to render '/srv/saltstack/etc/roster' using 'yaml' renderer: 0.06558918952941895 [DEBUG ] LazyLoaded roster_matcher.targets [DEBUG ] Matched minions: {'servername': {'sudo': True, 'host': 'servername'}} [DEBUG ] LazyLoaded roots.envs [DEBUG ] Could not LazyLoad roots.init: 'roots.init' is not available. [DEBUG ] Updating roots fileserver cache [DEBUG ] LazyLoaded sqlite3.prep_jid [DEBUG ] sqlite3 returner <save_load> called jid: 20200421151115314178 load: {'jid': '20200421151115314178', 'tgt_type': 'glob', 'tgt': 'servername', 'user': 'user', 'fun': 'state.sls', 'arg': ['test']} [DEBUG ] Connecting the sqlite3 database: ./var/jobs.db timeout: 5 [DEBUG ] Closing the sqlite3 database connection [DEBUG ] LazyLoaded state.sls [DEBUG ] Performing shimmed, blocking command as follows: test.opts_pkg [DEBUG ] Executed SHIM command. Command logged to TRACE [DEBUG ] Child Forked! PID: 2007 STDOUT_FD: 12 STDERR_FD: 14 [DEBUG ] VT: Salt-SSH SHIM Terminal Command executed. Logged to TRACE [DEBUG ] RETCODE servername: 0 [DEBUG ] LazyLoaded jinja.render [DEBUG ] LazyLoaded yaml.render [DEBUG ] compile template: ./pillar/top.sls [DEBUG ] Jinja search path: ['./pillar'] [PROFILE ] Time (in seconds) to render './pillar/top.sls' using 'jinja' renderer: 0.008234500885009766 [DEBUG ] Rendered data from file: ./pillar/top.sls: ---8<---[snip]---8<--- [DEBUG ] Results of YAML rendering: [DEBUG ] Jinja search path: ['./pillar'] [DEBUG ] Finished gathering pillar data for state run [DEBUG ] LazyLoaded jinja.render [DEBUG ] LazyLoaded yaml.render [DEBUG ] Could not find file 'salt://test.sls' in saltenv 'base' [DEBUG ] In saltenv 'base', looking at rel_path 'test/init.sls' to resolve 'salt://test/init.sls' [DEBUG ] In saltenv 'base', ** considering ** path '/srv/saltstack/cache/files/base/test/init.sls' to resolve 'salt://test/init.sls' [DEBUG ] compile template: /srv/saltstack/cache/files/base/test/init.sls [DEBUG ] Jinja search path: ['/var/tmp/.user_3c8639_salt/running_data/var/cache/salt/minion/files/base'] [PROFILE ] Time (in seconds) to render '/srv/saltstack/cache/files/base/test/init.sls' using 'jinja' renderer: 0.0006070137023925781 [DEBUG ] Rendered data from file: /srv/saltstack/cache/files/base/test/init.sls: yq-ppa: pkgrepo.managed: - ppa: rmescandon/yq - refresh_db: true [DEBUG ] Results of YAML rendering: OrderedDict([('yq-ppa', OrderedDict([('pkgrepo.managed', [OrderedDict([('ppa', 'rmescandon/yq')]), OrderedDict([('refresh_db', True)])])]))]) [PROFILE ] Time (in seconds) to render '/srv/saltstack/cache/files/base/test/init.sls' using 'yaml' renderer: 0.0002713203430175781 [DEBUG ] Could not find file 'salt://_modules' in saltenv 'base' [INFO ] Caching directory '_modules/' for environment 'base' [DEBUG ] Returning file list from cache: age=19 cache_time=20 /srv/saltstack/cache/file_lists/roots/base.p [DEBUG ] Executing command: scp -o KbdInteractiveAuthentication=no -o PasswordAuthentication=no -o GSSAPIAuthentication=no -o ConnectTimeout=65 -o Port=22 -o IdentityFile=/srv/saltstack/pki/ssh/salt-ssh.rsa -o User=user /tmp/__salt.tmp.6t_lnvif servername:/var/tmp/.user_3c8639_salt/salt_state.tgz [DEBUG ] Child Forked! PID: 2013 STDOUT_FD: 13 STDERR_FD: 15 [DEBUG ] Terminal Command: /bin/sh -c scp -o KbdInteractiveAuthentication=no -o PasswordAuthentication=no -o GSSAPIAuthentication=no -o ConnectTimeout=65 -o Port=22 -o IdentityFile=/srv/saltstack/pki/ssh/salt-ssh.rsa -o User=user /tmp/__salt.tmp.6t_lnvif servername:/var/tmp/.user_3c8639_salt/salt_state.tgz [DEBUG ] Performing shimmed, blocking command as follows: state.pkg /var/tmp/.user_3c8639_salt/salt_state.tgz test=None pkg_sum=c5aa7a2b899462b99c2eb4ca31fcb42f99d7992e7c757f0be346e4ac1b299783 hash_type=sha256 [DEBUG ] Executed SHIM command. Command logged to TRACE [DEBUG ] Child Forked! PID: 2019 STDOUT_FD: 13 STDERR_FD: 15 [DEBUG ] VT: Salt-SSH SHIM Terminal Command executed. Logged to TRACE [DEBUG ] RETCODE servername: 2 [DEBUG ] sqlite3 returner <returner> called with data: {'jid': '20200421151115314178', 'id': 'servername', 'return': {'id': 'servername', 'retcode': 2, 'fun': 'state.pkg', 'jid': '20200421151119809592', 'fun_args': ['/var/tmp/.user_3c8639_salt/salt_state.tgz', 'test=None', 'pkg_sum=c5aa7a2b899462b99c2eb4ca31fcb42f99d7992e7c757f0be346e4ac1b299783', 'hash_type=sha256'], 'out': 'highstate', 'return': {'pkgrepo_|-yq-ppa_|-yq-ppa_|-managed': {'result': False, '__run_num__': 0, 'duration': 1394.849, 'start_time': '15:11:20.057759', '__sls__': 'test', 'name': 'yq-ppa', 'changes': {}, 'comment': 'Failed to configure repo \'yq-ppa\': Unable to add PPA \'rmescandon/yq\'. \'[\'apt-add-repository\', \'-y\', \'ppa:rmescandon/yq\']\' exited with status 1: \'gpg: keyring `/tmp/tmprfkx_4bz/secring.gpg\' created\ngpg: keyring `/tmp/tmprfkx_4bz/pubring.gpg\' created\ngpg: requesting key CC86BB64 from hkp server keyserver.ubuntu.com\ngpg: /tmp/tmprfkx_4bz/trustdb.gpg: trustdb created\ngpg: key CC86BB64: public key ""Launchpad PPA for Roberto Mier Escand�n \\xee\\x83\\xbf"" imported\ngpg: Total number processed: 1\ngpg: imported: 1 (RSA: 1)\' ', '__id__': 'yq-ppa'}}}, 'fun': 'state.sls'} [DEBUG ] Connecting the sqlite3 database: ./var/jobs.db timeout: 5 [DEBUG ] Closing the sqlite3 database connection [DEBUG ] LazyLoaded highstate.output servername: ---------- ID: yq-ppa Function: pkgrepo.managed Result: False Comment: Failed to configure repo 'yq-ppa': Unable to add PPA 'rmescandon/yq'. '['apt-add-repository', '-y', 'ppa:rmescandon/yq']' exited with status 1: 'gpg: keyring `/tmp/tmprfkx_4bz/secring.gpg' created gpg: keyring `/tmp/tmprfkx_4bz/pubring.gpg' created gpg: requesting key CC86BB64 from hkp server keyserver.ubuntu.com gpg: /tmp/tmprfkx_4bz/trustdb.gpg: trustdb created gpg: key CC86BB64: public key ""Launchpad PPA for Roberto Mier Escand�n \xee\x83\xbf"" imported gpg: Total number processed: 1 gpg: imported: 1 (RSA: 1)' Started: 15:11:20.057759 Duration: 1394.849 ms Changes: Summary for servername ------------ Succeeded: 0 Failed: 1 ------------ Total states run: 1 Total run time: 1.395 s </pre> </details> Another important thing: Regardless of the failure, the PPA is added, but *without key*. When the state is applied again, it thinks that the ppa is configured, even though it doesn't work (since no gpg key was imported). One has to delete the `sources.list.d` file manually. The only solution for me was to manually run `add-apt-repository`, since salt can't add the repo correctly."
saltstack/salt,https://github.com/saltstack/salt/issues/51945,saltstack_salt_issues_51945,"Saltstack failing to install packages from Salt managed repo

### Saltstack is failing to install a package, but said package can be manually installed perfectly fine Last week one of our formulas that was working fine suddenly stopped properly installing required packages. Because this just suddenly started happening in the last week or two and happens on 2 completely different vagrant setups it leads me to assume that it must be caused by an updated version of something, but I can't find anything that's been updated in the last couple weeks. Here is the relevant error output from attempting to apply our topstate: ",Do you know if the `celph-common` package is a virtual package? /cc @saltstack/team-core,"@garethgreenaway You may be onto something there since this problem is only with certain packages, I'll check the ceph packages when I get a chance. I'm also having the same problem with Openstack packages which I believe are virtual packages so that would make sense."
saltstack/salt,https://github.com/saltstack/salt/issues/51972,saltstack_salt_issues_51972,"Errors in regex_match in Jinja2

### Description of Issue/Question Got errors while tried to list nVidia GPU devices with Jinja2 ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) SLS:  Master runs on Ubuntu 16.04 with python 2 Minion runs on Ubuntu 18.04 with python 3",Can you add `{%- do salt.log.error(device) -%}` in that for loop so we make sure nvidia is in that list and what is being output there?,"I've tried following code:  So, `regex_match` currently seems to work very similar to `startswith`"
saltstack/salt,https://github.com/saltstack/salt/issues/52573,saltstack_salt_issues_52573,"Error running Anaconda update

### Description of Issue/Question I've got a salt state, updating packages of Anaconda installation. Recently its application started returning errors. If I ssh to a minion node and run the same command manually, it successfully runs. ### Setup file updated.sls: ","Can you please include the minion logs at the debug level, either on the issue or in a gist?","[minion.log](https://github.com/saltstack/salt/files/3097291/minion.log) I've run that `update` command with raised verbosity level (`-vvv` instead of `-q`). The result is the same, and I could not find anything useful in logs, neither minion, nor system ones."
saltstack/salt,https://github.com/saltstack/salt/issues/52026,saltstack_salt_issues_52026,"2019.2/py3/x509 some comparison py3 types issues

### Description of Issue/Question `ISSUE 1` While running a state x509.certificate_managed on the current x509 of the branches 2019.2 (not the one from the .deb which already fail before that). I got the following error: ",Can you confirm that your proposed fix works consistently in both Py2 and Py3?,`python 2.7` Hard to say... I just tried to install a 2019.2 python 2.7 minions/salt-master/ca-server without the fix and I get this error :(. Maybe I made a wrong install or mistake somewhere... Will try to do further test an other day :/ 
saltstack/salt,https://github.com/saltstack/salt/issues/54440,saltstack_salt_issues_54440,"Salt-call test.ping much slower than ping from master

### Description of Issue salt-call test.ping takes approximately 40+ seconds while a ping from the master takes a little over one. This has been very consistent time wise so this isn't a one time issue. I understand the master publishes jobs normally and then a minion takes a job (excuse my ignorance if I am wrong) so I imagine that probably plays into this but a 40 second delay makes me think otherwise. Would anybody have some guidance on how to debug this or improve this response time? ### Setup No relevant configs used here ### Steps to Reproduce Issue From master:  ### Note: I was not aware of the version difference until now.",Could you please check how long `salt-call --local test.ping` takes on your minion machine please? @saltstack/team-core can anybody please correct me if I'm wrong?,"Looks like execution time is the same. There is a strong chance the hardware may be underpowered and my configuration is stock from install minus the master and master finger settings. The minions in this use case are on ARM boards. Watching CPU usage during the call I have noticed both devices see 100% CPU usage so it sure is a hardware limitation. That is my bad I didn't even check that. Is there room to improve this for less resource available systems, or is this a conversation for else where? "
saltstack/salt,https://github.com/saltstack/salt/issues/52239,saltstack_salt_issues_52239,"MSSQL module is not running under module.run function

### Description of Issue/Question I am trying to implement a mssql module functions in a state file. When running function from cmd everything is working and it shows correct results. Not sure if it is because of the syntax - has anyone implemented it successfully? I would really appreciate the help. ### Setup  ### Steps to Reproduce Issue Set up mssql connectivity https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.mssql.html ### Versions Report Salt: 2019.2.0 on Windows Server 2019, SQL Server 17",Can you run the state on the minion with debug level with `salt-call state.sls <state> -ldebug`? That should give us more information,"Maybe you could get trial licence for MSSQL? MYSQL has its own state, MSSQL doesn't, that's why I need to implement it via module.run I tried debug but it's showing no additional information.  When I used function in cmd, I could see from SQL Server side that it is receiving request, when I use state.apply no activity is visible inside SQL server."
saltstack/salt,https://github.com/saltstack/salt/issues/55829,saltstack_salt_issues_55829,"Reconfigure Stale Bot to exclude more labels

### Description of Issue Add to the slatebot exemptLabels: - Bug - Feature - Test Failure ### Setup N/A ### Steps to Reproduce Issue github > saltstack org > settings > Installed GitHub Apps > stalebot > configure requires Admin access to the org ### Versions Report N/A",What about `Confirmed`?,Confirmed label is included in this merged PR: https://github.com/saltstack/salt/pull/55626/files
saltstack/salt,https://github.com/saltstack/salt/issues/52430,saltstack_salt_issues_52430,"race condition when using user.primary_group in state

Hello, I try to make a folder who is own by both user UID and GID. I try do to this with user.primary_group(username) and it work well if the user exist when i run the state. But if i run it from a blank server, where is user isn't yet defined, it will failed. ### Setup the state i have defined is the following  Is there any way to force running some state before building the other ? ### Versions Report Salt Version: Salt: 2019.2.0 Dependency Versions: cffi: Not Installed cherrypy: 3.5.0 dateutil: 2.5.3 docker-py: Not Installed gitdb: 2.0.0 gitpython: 2.1.1 ioflo: Not Installed Jinja2: 2.9.6 libgit2: 0.24.5 libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.24.2 Python: 2.7.13 (default, Sep 26 2018, 18:42:22) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 2.0.1 timelib: Not Installed Tornado: 4.4.3 ZMQ: 4.2.1 System Versions: dist: debian 9.8 locale: UTF-8 machine: x86_64 release: 4.9.0-8-amd64 system: Linux version: debian 9.8",Can you run `salt minion state.apply create_user_x` before hand?,"@waheedi This is my entire sls for user management. i know it's quite a mess, but i hop it will help you understand the way i do it :  as you can see, i do run the `user.present` before the `file.managed` but the way jinja templating work, it won't respect requirement, those only affect the order of the state. i can't make it only create the user because it's in the same sls file, but if i create the user by hand, and then run the state who fail, it will work. sadly this isn't compatible with an automated deployment."
saltstack/salt,https://github.com/saltstack/salt/issues/52431,saltstack_salt_issues_52431,"2019.02 virt.vm_info is failing to execute due to _get_domains

### Description of Issue/Question Looking at 2018.3, vm_info used to iterate through a list of VM names obtained from list_domains. In 2019.02 vm_info now obtains this list from _get_domains which instead returns a list of domain objects. When the domain object is passed into the functions referenced by vm_info._info (_get_uuid, _get_on_crash, _get_on_reboot, and _get_on_poweroff), _get_domain is eventually called again but with a domain object in *vms instead of a vm's name. _get_domain then checks the contents of *vms against the list all_vms, but fails because the domain object (<libvirt.virDomain object at 0x7fddce314a10>) doesn't match any of the vm names. ### Setup virt.vm_info is failing with the following trace: salt-minion[18311]: Traceback (most recent call last): salt-minion[18311]: File ""/usr/lib/python2.7/site-packages/salt/minion.py"", line 1660, in _thread_return salt-minion[18311]: return_data = minion_instance.executors[fname](opts, data, func, args, kwargs) salt-minion[18311]: File ""/usr/lib/python2.7/site-packages/salt/executors/direct_call.py"", line 12, in execute salt-minion[18311]: return func(*args, **kwargs) salt-minion[18311]: File ""/usr/lib/python2.7/site-packages/salt/modules/virt.py"", line 2034, in vm_info salt-minion[18311]: info[domain.name()] = _info(domain) salt-minion[18311]: File ""/usr/lib/python2.7/site-packages/salt/modules/virt.py"", line 2021, in _info salt-minion[18311]: 'uuid': _get_uuid(dom), salt-minion[18311]: File ""/usr/lib/python2.7/site-packages/salt/modules/virt.py"", line 336, in _get_uuid salt-minion[18311]: return ElementTree.fromstring(get_xml(dom)).find('uuid').text salt-minion[18311]: File ""/usr/lib/python2.7/site-packages/salt/modules/virt.py"", line 2452, in get_xml salt-minion[18311]: xml_desc = _get_domain(conn, vm_).XMLDesc(0) salt-minion[18311]: File ""/usr/lib/python2.7/site-packages/salt/modules/virt.py"", line 273, in _get_domain salt-minion[18311]: raise CommandExecutionError('The VM ""{name}"" is not present'.format(name=name)) salt-minion[18311]: CommandExecutionError: The VM ""<libvirt.virDomain object at 0x7fddce314a10>"" is not present ### Steps to Reproduce Issue ### Versions Report **salt-master** Salt Version: Salt: 2019.2.0 Dependency Versions: cffi: 1.6.0 cherrypy: Not Installed dateutil: 1.5 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.31.0 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Oct 30 2018, 23:45:53) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.6.1810 Core locale: UTF-8 machine: x86_64 release: 3.10.0-957.10.1.el7.x86_64 system: Linux version: CentOS Linux 7.6.1810 Core **Minion running libvirtd:** Salt Version: Salt: 2019.2.0 Dependency Versions: cffi: 1.6.0 cherrypy: Not Installed dateutil: 1.5 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.31.0 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: 2.14 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Oct 30 2018, 23:45:53) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.6.1810 Core locale: UTF-8 machine: x86_64 release: 3.10.0-957.10.1.el7.x86_64 system: Linux version: CentOS Linux 7.6.1810 Core libvirt packages installed: rpm -qa | grep -i libvirt libvirt-libs-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-qemu-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-config-nwfilter-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-storage-disk-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-network-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-interface-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-storage-rbd-4.5.0-10.el7_6.6.x86_64 libvirt-client-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-storage-core-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-secret-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-config-network-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-storage-gluster-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-kvm-4.5.0-10.el7_6.6.x86_64 libvirt-bash-completion-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-nodedev-4.5.0-10.el7_6.6.x86_64 libvirt-python-4.5.0-1.el7.x86_64 libvirt-daemon-driver-lxc-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-storage-iscsi-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-storage-4.5.0-10.el7_6.6.x86_64 libvirt-docs-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-nwfilter-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-storage-mpath-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-storage-logical-4.5.0-10.el7_6.6.x86_64 libvirt-daemon-driver-storage-scsi-4.5.0-10.el7_6.6.x86_64 libvirt-4.5.0-10.el7_6.6.x86_64",Did you happen to install Salt from git?,"No, it was from rpm. The line numbers might be off because I was adding code to debug. On Tue, Apr 16, 2019, 2:01 PM zer0def <notifications@github.com> wrote:"
saltstack/salt,https://github.com/saltstack/salt/issues/52595,saltstack_salt_issues_52595,"Feature request: Anaconda integration

### Description of Issue/Question I maintain a large number of computers that rely on anaconda. Right now I rely on cmd.run 'conda install <package desired>', but I know that there are things that could be done to make it easier to maintain a large number of machines. For example, would it be possible to freeze and copy the environment through salt. Maybe have a beacon that notifies the master on a change for an image machine and copies the environment to other minions. Would this something that would be possible?",Can we leverage these somehow to add an official Conda state/module to salt?,"Those both look good, better than what I have right now, although the direction I think might be good is to work with identical environments as specified for conda [here](https://conda.io/docs/user-guide/tasks/manage-environments.html#building-identical-conda-environments). Maintaining an image machine might make it a little troublesome, but it shouldn't be too hard to write a function that installs an environment from a spec file. The key issue here is reducing the time that it takes to run a high state. For example, running conda install <package> on a package already installed takes about 10-20 seconds. Combine that with about 50 packages and it it suddenly takes at least 8-15 minutes to run a highstate on a machine that is already working perfectly. Maybe beefing up the install function to first check if the package is installed before running the install function would work, maybe something like this: result='conda list --json -f $packageName' if (result == null) then install(packageName) fi"
saltstack/salt,https://github.com/saltstack/salt/issues/52628,saltstack_salt_issues_52628,"salt-call state.apply gathers pillar twice in a row

### Description of Issue/Question `salt-call state.apply saltenv=xxx pillarenv=xxx` gathers pillars (https://github.com/saltstack/salt/blob/develop/salt/minion.py#L857 here i think) on startup ignoring all commandline arguments like pillarenv and pillarenv_from_saltenv minion option. Then gathers pillars again with expected parameters ### Setup  1. Minion inits with some unexpected pillars. 2. Minon makes additional request which makes this https://github.com/saltstack/salt/issues/51592 issue double annoying",can you post what issue of salt you are seeing this in? `salt --versions-report`,1. Its slows down startup (and salt-call) even in case there are no need for pillar at all 2. Its gathers some arbitrary stuff from master (raise exception in my particular case) 3. Its doubles resource usage on master for rendereing pillar which can be quite noticable especially with default yaml renderer and blocks workers (see https://github.com/saltstack/salt/issues/51592) 4. Yet another flow in saltenv feature which ignores minion options and commandline 
saltstack/salt,https://github.com/saltstack/salt/issues/52643,saltstack_salt_issues_52643,"Incorrect links in 2019.2 and Develop documentation

### Description of Issue/Question In the 2019.2 and develop docs, links to the Python std types for more parameters have been added in `states.pkg` docs, but links for the `list` type all point to the list function of the Ansiblegate module instead of the Python docs. The other types on this page all seem to be correct. I didn't see any links to this on other pages, but only checked a few as I didn't see quick way to search/sed the docs content. ### Steps to Reproduce Issue Links to `(list)` are broken: `pkgs, names, sources, ignore_types, verify_options` https://docs.saltstack.com/en/latest/ref/states/all/salt.states.pkg.html#salt.states.pkg.installed Pointing to: https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.ansiblegate.html#salt.modules.ansiblegate.list Should point to: https://docs.python.org/3/library/stdtypes.html#list",what version of sphinx are you building on? We are working on trying to start build sphinx on the latest version. i wonder if this will resolve this issue.,"I had a sec to look for other instances of this over the weekend: loader.py in the py client api modules/cmdmod.py pillar/csvpillar.py modules/win_task.py has `:param list $var:` which generates (list) but is not linked I'm seeing the correct links building from develop on Manjaro. python2 2.7.16-1 python2-sphinx 1.8.5-2 Side note, are the [development docs](https://docs.saltstack.com/en/latest/topics/development/hacking.html) on building with py3 still relevant? I saw no issues/bad links python 3.7.3-1 python-sphinx 2.0.1-1 If they are, I would recommend adding something to the [writing/building documentation](https://docs.saltstack.com/en/latest/topics/development/conventions/documentation.html) as well"
saltstack/salt,https://github.com/saltstack/salt/issues/52644,saltstack_salt_issues_52644,"salt-call schedule.modify throws unhandled error

After running schedule.present in state file, trying to change scheduled job by running salt-call schedule.modify throws unhandled error when not all arguments for the existing job are provided. ### Configuration file _schedule.conf: ",can you paste your `schedule.present` state file? Also was this working previously?,"What you see above under configuration file is what I have in the schedule file. To clarify myself, the issue is not that command didn't work. The expected behavior is to provide all of the fields found in schedule.present and only modify what needs to be. What I tried to do was to only include fields I want to modify. For example, if I run schedule.present name=job1 function=test.ping once=2019-04-18T20:00:00 once_fmt=%Y-%m-%dT%H:%M:%S. If I want to modify ""once"" field I have to include all fields and modify only what I need as such: schedule.modify name=job1 function=test.ping once=2019-05-10T22:00:00 once_fmt=%Y-%m-%dT%H:%M:%S. If I only do schedule.modify name=job1 once=2020-01-01T22:00:00 it fails with the above unhandled exception."
saltstack/salt,https://github.com/saltstack/salt/issues/52681,saltstack_salt_issues_52681,"Rendering SLS 'base:XXXXX' failed: found unexpected ':'

### Description of Issue/Question When running ""salt-call state.apply"" and having a grains file "":"" sign within grains options it fails with this message  If I remove the : sign from all the options above it works ok OR if I downgrade to version 2015.8.8+ds-1 it also works ok (im now running 2019.2.0+ds-1) What todo ? ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",Could you please provide your `salt --versions-report`? Probably it would help.,"# salt --versions-report Salt Version: Salt: 2019.2.0 Dependency Versions: cffi: 1.11.5 cherrypy: 3.5.0 dateutil: 2.4.2 docker-py: Not Installed gitdb: 0.6.4 gitpython: 1.0.1 ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.3 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.19 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.12 (default, Nov 12 2018, 14:36:49) python-gnupg: 0.3.8 PyYAML: 3.11 PyZMQ: 15.2.0 RAET: Not Installed smmap: 0.9.0 timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: UTF-8 machine: x86_64 release: 4.4.0-1079-aws system: Linux version: Ubuntu 16.04 xenial On the minions where I have problem im running (also Ubuntu 16.04) salt-common/unknown,now 2019.2.0+ds-1 all [installed] salt-minion/unknown,now 2019.2.0+ds-1 all [installed] salt-call state.apply output fails with this: ... [INFO ] Fetching file from saltenv 'base', ** done ** 'atlassian/jira/init.sls' [CRITICAL] Rendering SLS 'base:atlassian/jira' failed: found unexpected ':' [INFO ] Fetching file from saltenv 'base', ** done ** 'atlassian/common/init.sls' local: Data failed to compile: ---------- Rendering SLS 'base:atlassian/jira' failed: found unexpected ':' So from here I can solve it by either downgrade minion to version 2015.8.8+ds-1 or remove the : sign from the grains file (the atlassian/jira state is reading a bunch of options from grains file)"
saltstack/salt,https://github.com/saltstack/salt/issues/56088,saltstack_salt_issues_56088,"salt.modules.mssql Documentation Omits Minion Config  

### Description of Issue https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.mssql.html The mssql module documentation neglects to mention explicitly that the pymssql python module should be installed on both the Salt master and the minion.","Did you find the error message easy to understand? If not, maybe we could improve that...","The error message was along the lines of ""The function mssql.whatever is not available"" which wasn't hugely helpful. It was only really a guess that it might be the module on the minion side that led to the resolution"
saltstack/salt,https://github.com/saltstack/salt/issues/52740,saltstack_salt_issues_52740,"salt-api error when using eauth

### Description of Issue/Question use command `curl -ki http://127.0.0.1:8080/login -H ""Accept: application/json"" -d username='saltuser' -d password='XXXXXXX' -d eauth='pam'` return 401 found under message in /var/log/salt/master  ### Steps to Reproduce Issue try some method in #26091 it return 6 ### Versions Report Salt Version: Salt: 2019.2.0 Dependency Versions: cffi: Not Installed cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 3.6.6 (default, Mar 29 2019, 00:03:27) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.4.2 ZMQ: 4.1.4 System Versions: dist: centos 7.6.1810 Core locale: UTF-8 machine: x86_64 release: 3.10.0-957.10.1.el7.x86_64 system: Linux version: CentOS Linux 7.6.1810 Core","Did you set their password to a test value, like say `'asdf'`?",@waynew thanks， i tried install a new salt-master on another system and its works well。 seems some system config or kernel config is modified， maybe /etc/pam.conf？
saltstack/salt,https://github.com/saltstack/salt/issues/53474,saltstack_salt_issues_53474,"Minion ""failed to return the job information"" when using a masterless config

## Description of Issue Salt logs errors to the minion log about the master being unavailable, even when the minion conf set to `master_type: disable`. This happens when using the `schedule` module to run salt on an interval. ## Steps to reproduce issue This is a common pattern with masterless. We setup a state to grab a tarball of our config files using the `archive.extracted` module. Then we schedule it to run on an interval with the `schedule.present` module. If running a manual `salt-call state.highstate`, the error doesn't show. It shows with the use of the `schedule` module. ## Schedule config ",can you paste the output of `salt --versions-report`?,
saltstack/salt,https://github.com/saltstack/salt/issues/53143,saltstack_salt_issues_53143,"windows minion firewall

### Description of Issue/Question Why haven't we updated the salt. states. win_firewall. add_rule module all the time? We only have local ports that can't be set remotely. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report master and minion version 2019.2.0",What is not supported and where? Please provide a full Versions Report.,"很抱歉上次没有表达清楚我的意思，咱们现在的模块只是支持localport,但是我想要remoteport，请问一下咱们有其他方法满足我的需求嘛？我想要限制本地访问目标的指定端口。我用的是咱们的执行模块：salt.modules.win_firewall.add_rule(name, localport, protocol='tcp', action='allow', dir='in', remoteip='any') https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.win_firewall.html#salt.modules.win_firewall.add_rule"
saltstack/salt,https://github.com/saltstack/salt/issues/53152,saltstack_salt_issues_53152,"daily highstate fails after 2019.2 upgrade

After upgrading masters and minions to 2019.02, observed this behavior: - daily scheduled highstate fails to run UNLESS a manual pillar has been run recently (last 12 hours or so), but this doesn't always make it run - when the highstate runs, if there are any failures, I receive 20 or so reports of failure per minion via the returner, as opposed to just one with 2018.03.4; it appears that the minion is trying state.apply over and over again for about two hours, after which it stops This happens on two different masters. Here's is a pillar/schedule.sls for one of the masters:  Thanks.",Does this effect Windows minions more so than other ones? Are there any suggestions for a best workaround until this is fixed (such as using cmd run with salt-call)?,"I'm not seeing a lot of similarity with #53135, but it's possible I'm missing something. My minions are all on CentOS 7; no Windows."
saltstack/salt,https://github.com/saltstack/salt/issues/53205,saltstack_salt_issues_53205,"win_iis.create_cert_binding says its adding a new value but failing/doesn't update

### Description of Issue/Question Whenever attempting to add a cert_binding via win_iis.create_cert_binding it says it updates the value (which it doesn't) and also fails at the same time). ",Could you verify?,I will try to find some time tomorrow to upgrade and see --- seems like it very well might be.
saltstack/salt,https://github.com/saltstack/salt/issues/53529,saltstack_salt_issues_53529,"SaltStack removing / character from Debian APT URIs

### Description of Issue <!-- Note: Please direct questions to the salt-users google group. Only post issues and feature requests here --> SaltStack strips / character from APT URIs and Google package adds an entry with this extra character resulting in duplicate entry and apt upgrade failures. Settings as per SaltStack manual for pkg.managed ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) Deploy Google Chrome through SaltStack package to Ubuntu. On next package upgrde from Google, machine will fail to upgrade due to duplicate entry in /etc/apt/source.d file ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) salt 2018.3.4 any recent Google Chrome version.",Which version of Ubuntu are you running for this? Will try to duplicate,Ubuntu 18.04
saltstack/salt,https://github.com/saltstack/salt/issues/53983,saltstack_salt_issues_53983,"Consider making check_cmd's tmp_ext default to the file's extension

I am wondering if we could make tmp_ext default to the to-be-installed file's extension. I'm using `systemd-analyze verify` installing systemd .service, .timer, and .path files, and it'd be nice to not have to specify tmp_ext for each one. I can't think of what would break if we defaulted tmp_ext to use the intended extension unless overridden.",Can you provide some example states and the desired behavior?,"How would it break other people's states? Files are being tested with random extensions at present. And this wouldn't override if they've set a specific extension. So if they're working with random extensions, I doubt it would fail if matched to the same that the file is installed with.  Same goes for .timer files and others. `systemd-analyze` requires that the file has the appropriate extension. So this saves me from having to write `-tmp_ext: .service`, .timer, etc. Many configuration verifiers are fine, but `systemd-analyze` surely isn't the only one like this. So rather than do `check_cmd aaoiwemrawer.qweimqwe`, it would run `check_cmd /tmp_dir/asdasda.service` or whatever. Or could even just match the installed file full name by default and be tested under a random directory just to be certain. But at a minimum, we can match the installed file's extension, if any, by default."
saltstack/salt,https://github.com/saltstack/salt/issues/53940,saltstack_salt_issues_53940,"salt-ssh pkgrepo claims for already installed package

### Description of Issue Managing Debian repo list failed with following error: `Error: 'python-apt' package not installed` package 'python-apt' is already installed at the minion: ",Can you confirm it works when `python3-apt` is installed?,"@dwoz Hi, sorry for the late responce (vacation issue). pyhton-apt has been installed on the remote debian host. On the local manjaro pytho-apt or python3-apt does not installed. But the same script works for the remote ubuntu 19.04."
saltstack/salt,https://github.com/saltstack/salt/issues/53942,saltstack_salt_issues_53942,"opensuse pkg.installed failed

### Description of Issue OpenSuse. State pkg.installed has failed. In the same time zypper on minion can find and install the package: ",Can you please provide the version report from the box you are experiencing this issue on?,"@dwoz Hi, thank you for your responce. The 'salt-ssh' has setted up on the local manjaro host from wich I try to install packets on the remote opensuse host. So the salt stack is absent on the remote host. I faced issue with opensuse 42, with opensuse 15 script works."
saltstack/salt,https://github.com/saltstack/salt/issues/54112,saltstack_salt_issues_54112,"[salt-ssh] No module named 'salt.exceptions'

### Description of Issue Hi, I have three identical nodes (lets say agentless minions). One of nodes stops to execute calls like this: `salt-ssh 'one-*' grains.get 'kernelrelease' ` the following error has appeared: ",Could you try `salt-ssh -t` to regenerate the tarball?,Output with '-t' applied: 
saltstack/salt,https://github.com/saltstack/salt/issues/54043,saltstack_salt_issues_54043,"maybe a state.sls  service bug 

### Description of Issue use state.sls to start or stop a service in windows ,in a general way there is no problem,but if the service is running as a customized user not the default by system, it will fail ### Setup nothing special,only the windows user which the service run with is a cutomized user or the default user as other service , ### Steps to Reproduce Issue in the windows minion ,the log sshow that log in failed.BUT if i use service.start command ,it will success. ### Versions Report Salt Version: Salt: 2019.2.0 Dependency Versions: cffi: 1.11.5 cherrypy: Not Installed dateutil: 2.8.0 docker-py: 3.7.2 gitdb: 2.0.5 gitpython: 2.1.11 ioflo: Not Installed Jinja2: 2.10 libgit2: 0.27.0 libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.6.1 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.27.3 Python: 3.6.8 (default, Apr 25 2019, 21:02:35) python-gnupg: Not Installed PyYAML: 3.13 PyZMQ: 17.0.0 RAET: Not Installed smmap: 2.0.5 timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.1.6 System Versions: dist: centos 7.6.1810 Core locale: UTF-8 machine: x86_64 release: 3.10.0-957.21.3.el7.x86_64 system: Linux version: CentOS Linux 7.6.1810 Core",What user is the service you're trying to start/stop running under?,
saltstack/salt,https://github.com/saltstack/salt/issues/54312,saltstack_salt_issues_54312,"Salt-minion does not restart after ""master ping failed"" on trusty

### Description of Issue According to salt-minion logs, minion received a SIGTERM after master ping failed but the service does not restart. It only happens on our trusty minions, not in xenial or bionic. ",does this also occur when you start the salt-minion like so `salt-minion -d` instead of `service salt-minion start` also can you share a sanitized version of your minion config?,"Unfortunately - or fortunately - we upgraded all our minions to version 2019.2.0 this week and we no longer have this issue. Thus, I close this issue. Thank your for your answer :)"
saltstack/salt,https://github.com/saltstack/salt/issues/54332,saltstack_salt_issues_54332,"Docker_image.present in same highstate as pip docker module that is required  fails the first time.

### Description of Issue I am trying to install a docker_image.present state in the same highstate while having pip.installed docker on a pre-requisite sls and it keeps failing on the first run. I have reload_modules: true on the pip.install otherwise it fails from the virtual function that can't find the docker python module. ### Setup Here's my docker_image.present ",do you have a state that is starting the docker service? That error makes me think it cannot communicate with the docker service for some reason.,I didn't but I added one as a requisite of the python docker module that you can already see and re-run it. It still fails in the same highstate with the same exception. It seems as if it passes the wrong value to call. 
saltstack/salt,https://github.com/saltstack/salt/issues/55198,saltstack_salt_issues_55198,"Can't configure twilio profile via master config as per docs 

### Description of Issue The [docs](https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.twilio_notify.html) indicate that we can define the twilio profile via the master config. This is not the case. Furthermore, a typo seems to be present in the doc as the profile is defined as 'my-twilio-account' but the cli usage example uses 'twilio-account' ### Setup Normal salt installation. Place the following in the master config: ",Did you want to push a PR to make these doc changes you mentioned or i can?,"https://github.com/saltstack/salt/pull/55215 I haven't done much with docs before, but I assume they will build automatically from the new docstrings? Let me know if this will suffice and if the clarification is good. Thanks :)"
saltstack/salt,https://github.com/saltstack/salt/issues/54730,saltstack_salt_issues_54730,"Grain targeting matches any minion (when it's cache directory is missing)

### Description of Issue When targeting minions with the -G flag in the salt CLI, salt will match any minion that does not have an existing directory in /var/cache/salt/master/minions. This leads to many unwanted minions being targeted when attempting to match a grain. ### Setup - Have an offline salt minion with an accepted key on the master. - Delete directory /var/cache/salt/master/minions/<minion_id> ### Steps to Reproduce Issue - Run `salt -G 'asd:def' test.ping` - The offline minion will be targeted by this, even though it most likely doesn't have a grain of ""asd"" with value ""def"". These can be arbitrary values. - Create a directory /var/cache/salt/master/minions/<minion_id> and run the same grain targeting call, and it will no longer be targeted. ### Versions Report (My main salt master versions, however it appears to also happen in 2019.2) Salt Version: Salt: 2017.7.2 Dependency Versions: cffi: 1.11.2 cherrypy: 3.2.3 dateutil: 2.2 docker-py: Not Installed gitdb: 0.5.4 gitpython: 0.3.2 RC1 ioflo: Not Installed Jinja2: 2.9.6 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.4.8 mysql-python: 1.2.3 pycparser: 2.18 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.9 (default, Jun 29 2016, 13:08:31) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 16.0.2 RAET: Not Installed smmap: 0.8.2 timelib: Not Installed Tornado: 4.5.2 ZMQ: 4.1.6 System Versions: dist: debian 8.1 locale: UTF-8 machine: x86_64 release: 3.16.0-4-amd64 system: Linux version: debian 8.1",Does this happen in 2019.2.1?,"It does still happen in 2019.2.1. It's very obvious when you copy over accepted keys from another salt master but haven't had all the minions connected to it yet. However, it also still happens if you just delete a previously connected minion's cache dir. This seems to happen naturally with minions that are briefly online after having their key accepted as well, causing them to get matched (in grain targeting) until they come online for a period of time and salt has a chance to create that cache."
saltstack/salt,https://github.com/saltstack/salt/issues/55459,saltstack_salt_issues_55459,"Strange behavior between Windows10 Salt-Minion and Centos7 Salt-Master.

# Strange behavior between Windows10 Salt-Minion and Centos7 Salt-Master. ### Description of Issue 1. Why the Salt-Master behavior is different with Windows10 Salt-Minion ? 1. Why the Salt-Minion Windows10 send his keys to the Salt-Master on every requests ? ### Setup #### 1. Installing Salt-Minion for Windows Using the official install : https://repo.saltstack.com/windows/Salt-Minion-2019.2.2-Py3-x86-Setup.exe #### 2. Accept the Salt-Minion (Windows10). ",Can you verify that you do not have multiple minions running on the Windows 10 host?,@garethgreenaway Yes I get only one Salt-Minion on the Windows10.  Hope you reproduce the issue ...
saltstack/salt,https://github.com/saltstack/salt/issues/55042,saltstack_salt_issues_55042,"Ubuntu 18.04.3 AWS image urllib3 incompatibility with salt 2018.3.4 

### Description of Issue When trying to install docker-ce with salt state, got the following error ---------- ID: docker_ce_pip_prerequisities Function: pip.installed Result: False Comment: An importable Python 2 pip module is required but could not be found on your system. This usually means that the system's pip package is not installed properly. Started: 16:03:47.948674 Duration: 745.594 ms The problem can be resolved by pip install --upgrade urllib3==1.22 ### Setup salt-mininn has been installed with the following command ./bootstrap-salt.sh -F -j '{""master"": ""10.0.0.1""}' stable 2018.3.4 ### Versions Report Ubuntu 18.04.3 asn1crypto==0.24.0 awscli==1.16.261 backports-abc==0.5 botocore==1.12.251 certifi==2018.1.18 chardet==3.0.4 colorama==0.4.1 cryptography==2.1.4 docutils==0.15.2 enum34==1.1.6 futures==3.3.0 idna==2.6 ipaddress==1.0.17 Jinja2==2.10 jmespath==0.9.4 keyring==10.6.0 keyrings.alt==3.0 Mako==1.0.7 MarkupSafe==1.0 msgpack==0.5.6 psutil==5.4.2 pyasn1==0.4.7 pycrypto==2.6.1 pygobject==3.26.1 pyOpenSSL==17.5.0 python-apt==1.6.4 python-dateutil==2.8.0 python-gnupg==0.4.1 pyxdg==0.25 PyYAML==5.1.2 pyzmq==16.0.2 requests==2.18.4 rsa==3.4.2 s3transfer==0.2.1 salt==2018.3.4 SecretStorage==2.3.1 singledispatch==3.4.0.3 six==1.11.0 systemd-python==234 tornado==4.5.3 urllib3==1.25.6 Salt Version: Salt: 2018.3.4 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.8.0 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: 1.0.7 msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.15+ (default, Oct 7 2019, 17:39:04) python-gnupg: 0.4.1 PyYAML: 5.1.2 PyZMQ: 16.0.2 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.2.5 System Versions: dist: Ubuntu 18.04 bionic locale: UTF-8 machine: x86_64 release: 4.15.0-1048-aws system: Linux version: Ubuntu 18.04 bionic",Would you be able to provide the state file that you're using? Thanks!,"Hi, here is the state: "
saltstack/salt,https://github.com/saltstack/salt/issues/55084,saltstack_salt_issues_55084,"salt fails on macOS Catalina, due to loading unversioned /usr/lib/libcrypto.dylib

### Description of Issue salt crashes on macOS Catalina (10.15). I find out that the problem happens on loading `/usr/lib/libcrypto.dylib` library (https://github.com/saltstack/salt/blob/v2019.2.1/salt/utils/rsax931.py#L57). There is a similar issue with another python library: https://github.com/wbond/asn1crypto/issues/158 ### Setup - N/A ### Steps to Reproduce Issue - Install salt to macOS Catalina (10.15) via pip or brew - Then run `salt --version`, it will crash with `Abort trap: 6` ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) ",Can you also provide the stack trace as well?,"The only way to get a stack trace is via setting [`PYTHONDEVMODE=1`](https://docs.python.org/3.7/using/cmdline.html#envvar-PYTHONDEVMODE) (salt==2019.2.2):  I also have checked versions `2019.2.1`, `2019.2.0`, and `2018.3.4` — they fail as well."
saltstack/salt,https://github.com/saltstack/salt/issues/55188,saltstack_salt_issues_55188,"salt-minion service (for Windows) fails to start when changing its user to a service user instead of the local admin

### Description of Issue I am trying to change the user on the salt-minion service on Windows server. I would like to use a service account that was created with administrative privileges instead of the local administrator account, but the minion fails to restart afterwords, causing the salt-minion service to go into a ""Paused"" state. ### Setup Here's the powershell script I am using to update the user account for the minion service. $adminUsername=""****"" $adminPassword=""****"" sc.exe config ""salt-minion"" obj= "".\$adminUsername"" password= ""$adminPassword"" Stop-Service -Name salt-minion Start-Sleep -s 3 Start-Service -Name salt-minion ### Steps to Reproduce Issue Here's the result when trying to add a service user instead of the local admin account: [SC] ChangeServiceConfig SUCCESS Start-Service : Failed to start service 'salt-minion (salt-minion)'. At line:9 char:1 + Start-Service -Name salt-minion + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : OpenError: (System.ServiceProcess.ServiceController:ServiceController) [Start-Service], ServiceCommandException + FullyQualifiedErrorId : StartServiceFailed,Microsoft.PowerShell.Commands.StartServiceCommand and here's the output of my script when using the local admin user: [SC] ChangeServiceConfig SUCCESS PS C:\Windows\system32> ### Versions Report running salt-minion 2.2 currently but tested the above problem on older versions as well. ![Screen Shot 2019-11-02 at 10 27 04 PM](https://user-images.githubusercontent.com/13020927/68081037-8c410700-fdc4-11e9-829a-78019c595da7.jpg)",What does `c:\salt\var\log\salt\minion` say about the failure?,"2019-11-01 11:25:40,792 [salt.crypt :738 ][CRITICAL][5340] The Salt Master has rejected this minion's public key! To repair this issue, delete the public key for this minion on the Salt Master and restart this minion. Or restart the Salt Master in open mode to clean out the keys. The Salt Minion will now exit. 2019-11-01 11:25:58,260 [salt.crypt :738 ][CRITICAL][6920] The Salt Master has rejected this minion's public key! To repair this issue, delete the public key for this minion on the Salt Master and restart this minion. Or restart the Salt Master in open mode to clean out the keys. The Salt Minion will now exit. 2019-11-01 11:26:17,058 [salt.crypt :738 ][CRITICAL][6480] The Salt Master has rejected this minion's public key! To repair this issue, delete the public key for this minion on the Salt Master and restart this minion. Or restart the Salt Master in open mode to clean out the keys. The Salt Minion will now exit. 2019-11-01 11:26:36,792 [salt.crypt :757 ][ERROR ][6608] The Salt Master has cached the public key for this node, this salt minion will wait for 10 seconds before attempting to re-authenticate 2019-11-04 10:51:01,130 [salt.crypt :757 ][ERROR ][2440] The Salt Master has cached the public key for this node, this salt minion will wait for 10 seconds before attempting to re-authenticate 2019-11-04 10:51:11,177 [salt.crypt :757 ][ERROR ][2440] The Salt Master has cached the public key for this node, this salt minion will wait for 10 seconds before attempting to re-authenticate"
saltstack/salt,https://github.com/saltstack/salt/issues/55224,saltstack_salt_issues_55224,"Salt not listening on port 4506

### Description of Issue My salt master is not listening on port 4506 ### Setup ### Steps to Reproduce Issue Setting max_threads: 15 caused the issue. removing it solved it. ",can you clarify when you see this traceback? I simply set `max_threads: 15` in my master config and started up the master `salt-master -ldebug` and everything works fine.,It kept printing every few seconds. I had a backup of my old config and and diff showed only one difference which was max_threads. commenting it out and restart fixed it. the only special point in my config is external pillars.
saltstack/salt,https://github.com/saltstack/salt/issues/55239,saltstack_salt_issues_55239,"aptpkg does not correctly pass force_conf_new

### Description of Issue Ticket #23501 and #40558 is not correctly fixed and should be reopened. I filed a new ticket as I could not reopen that ticket. I think the merged fix from 9d0bb55 is not correct. If `force_conf_new: True` is given, salt adds both options: `'-o', 'DPkg::Options::=--force-confnew', '-o', 'DPkg::Options::=--force-confdef'` As net effect apt-get will then not use force-confnew, but force-confdef. The following patch fixed the problem for me  The patch above is just to demonstrate the problem, a better fix is probably needed. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue use force_conf_new, and see it fail ### Versions Report 2019.2.0",Did you want to try give it a go at a fix and submit a PR?,"Yes, this problem needs to be fixed in several places where `--force-confnew` is used"
saltstack/salt,https://github.com/saltstack/salt/issues/55240,saltstack_salt_issues_55240,"Salt Cloud Proxmox Driver: Hardcoded API Port

### Description of Issue The Salt Cloud Proxmox Driver is hardcoded to call the Proxmox service API on the default port of 8006. The port number cannot be appended to the URL setting. It is not possible to leverage the Proxmox driver against a Proxmox PVE deployment where the web services (pveproxy) are using a non-default port. ### Setup Current production builds of Salt-Cloud, Proxmox PVE, and Salt-Cloud Proxmox Driver (proxmox.py) ### Steps to Reproduce Issue Deploy Proxmox and configure a working integration with Salt-Cloud. Modify the Proxmox web services (pveproxy) to listen on TCP 443. Make awkward attempts to shove '443' into your providers.conf (/etc/salt/cloud.providers.d/Proxmox.conf or similar) ### Versions Report root@Salt:/srv/salt# salt --versions-report Salt Version: Salt: 2018.3.0 Dependency Versions: cffi: Not Installed cherrypy: Not Installed dateutil: 2.7.3 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10 libgit2: 0.27.7 libnacl: Not Installed M2Crypto: 0.35.2 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: 2.19 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.27.4 Python: 3.7.3 (default, Oct 7 2019, 12:56:13) python-gnupg: Not Installed PyYAML: 3.13 PyZMQ: 17.1.2 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.3.1 System Versions: dist: Ubuntu 19.04 disco locale: utf-8 machine: x86_64 release: 5.0.21-4-pve system: Linux version: Ubuntu 19.04 disco",Did you want to give a go at a PR fix?,"@Ch3LL I have a fix, looking at creating some tests for this driver before submitting the PR. Heads up: I ran into a few additional minor issues, including #40297. I'll see if I can't put together a few PRs."
saltstack/salt,https://github.com/saltstack/salt/issues/55250,saltstack_salt_issues_55250,"states.virt.pool_running expects a different pool_info dictionary

### Description of Issue If pool ""pool_1"" exists, a call to state.pool_running will return an error. The reason is, that the expected dictionary contains the key element of the pool name ""pool_1"" instead of the 'state' key. Expected dictionary by state.virt.pool_running: { 'state': '...', ...} Observed dictionary returned by virt.pool_info: { 'pool_1': { 'state': '...', ...} } ### Setup Master on host 1, QEMU/KVM with libvirt on host 2. Host 2 is a Minon. ### Steps to Reproduce Issue - create pool ""pool_1"" on VM host - call virt.pool_running with name=""pool_1"", ie. by a sls like: `pool_1: virt.pool_running: ....` ### Versions Report Salt Version: Salt: 2019.2.0 Dependency Versions: cffi: 1.11.2 cherrypy: Not Installed dateutil: 2.7.3 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.10.1 libgit2: 0.26.8 libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.26.0 Python: 3.6.9 (default, Oct 29 2019, 10:39:36) [GCC] python-gnupg: Not Installed PyYAML: 3.13 PyZMQ: 17.0.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.2.3 System Versions: dist: locale: UTF-8 machine: x86_64 release: 4.12.14-lp151.28.25-default system: Linux version: Not Installed",Can you also post the stack trace for this?,stack trace:  It is unlikely a SUSE issue as the expected dictionary in state.virt.pool_running does not match modules.virt.pool_info: https://github.com/saltstack/salt/blob/0ca04ffbebb9daeb8469a6e80d868b8a6524bd99/salt/states/virt.py#L761-L765 https://github.com/saltstack/salt/blob/0ca04ffbebb9daeb8469a6e80d868b8a6524bd99/salt/modules/virt.py#L4728-L4733
saltstack/salt,https://github.com/saltstack/salt/issues/55305,saltstack_salt_issues_55305,"Unable to list minions from etcd minion data cache

### Description of Issue When using etcd minion data cache in master/syndics infra, I'm unable to retrieve the list of the minions attached to syndics minions from a master's minion, for example with a mine.get function. ### Setup One master of master with minions. Several syndics with minions. Etcd minion data cache enabled in master of master and syndics. ### Steps to Reproduce Issue From a minion attached to the MOM, I want to retrieve a mine from minions attached to syndics. ",does this work correctly when not using etcd but the default cache system?,"With the default cache system, we can only retrieve mine data for minions attached to the same master. My need is to retrieve mine data attached to other syndics, that why I use a minion data cache. Nevertheless, I can reproduce the issue with etcd cache on a single master deployment, and only with etcd cache. I have no issue with default cache system."
saltstack/salt,https://github.com/saltstack/salt/issues/55427,saltstack_salt_issues_55427,"SALT does not read updated Pillar data in _modules

### Description of Issue <!-- Note: Please direct questions to the salt-users google group. Only post issues and feature requests here --> I have a pillar set with the following format: ",Does the state show the same value on the second run?,"No. each time i try reading this pillar in the module, it never returns the right value. If I fetch it from the command line, i get the right value:  However, the same command within the module never gets the pillar value and in turn returns only the default value. Wonder why is that?"
saltstack/salt,https://github.com/saltstack/salt/issues/55621,saltstack_salt_issues_55621,"capirca_acl verbatim option is not working

### Description of Issue The following salt command fails: salt eqc\* capirca.get_term_config cisco bob v-term-1 verbatim='[[""cisco"", ""permit ip 173.16.0.0 0.0.255.255 any""],[""cisco"", ""permit ip 173.17.0.0 0.0.255.255 any""]]' The problem is that the verbatim list is processed by _make_it_list(). It dies a painful death in the final return statement of the module: `return list(set(prev_value + [value]))` I fixed it by adding another field_name check in _make_it_list() that would just return the list. [capirca_acl-fixed.txt](https://github.com/saltstack/salt/files/3956046/capirca_acl-fixed.txt) The updated file is attached. There is a dependency also for a couple of fixes in `capirca/cisco.py` for verbatim. Could I also request that the following example be added to the documentation so others will be able to see how to use this option: ! show the rendered ACL with the verbatim option on the command line salt eqc\* capirca.get_term_config cisco bob v-term-1 verbatim='[[""cisco"", ""permit ip 173.16.0.0 0.0.255.255 any""],[""cisco"", ""permit ip 173.17.0.0 0.0.255.255 any""]]' ### Setup it also fails using this pillar file:  ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.)",Could you provide the output of `salt --versions-report`?,Thanks for looking into this. 
saltstack/salt,https://github.com/saltstack/salt/issues/55652,saltstack_salt_issues_55652,"When targeting 100s of minions, some do not return.

### Description of Issue When I target 100s of minions for any command, some minions take a bit longer to respond. Meanwhile master returns error for some of the minions without waiting them to be completed. ",Can you confirm if the minions in question are regular Salt minions or are they proxy minions? Thanks!,"@garethgreenaway, in this case, these are proxy minions."
saltstack/salt,https://github.com/saltstack/salt/issues/55945,saltstack_salt_issues_55945,"netmiko proxy with always_alive does not work properly

### Description of Issue Using netmiko proxy with always_alive flag set to true has the following issue: Once the proxy connects to the device, and device closes the connection for whatever reason (idle timeout on the device or device rebooted etc), netmiko proxy does not check if the connection is active for further communications. It assumes the connection is always alive and sends the commands to the device, which causes exception. Only workaround is to restart the proxy. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue 1. Use netmiko proxy (with always_alive set to true) and execute a command on the device. 2. Go to the device and kill the user session (clear vty line in case of cisco) 3. try to execute a command on device through netmiko proxy. ### Versions Report bash-4.4$ salt --versions-report Salt Version: Salt: 2019.2.2 Dependency Versions: cffi: 1.12.3 cherrypy: unknown dateutil: 2.7.2 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.9.6 libgit2: 0.27.7 libnacl: Not Installed M2Crypto: 0.33.0 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: 2.17 pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: 0.27.4 Python: 2.7.16 (default, May 6 2019, 19:35:26) python-gnupg: 0.4.2 PyYAML: 5.1.1 PyZMQ: 16.0.3 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.1.6 System Versions: dist: locale: UTF-8 machine: x86_64 release: 3.10.0-957.5.1.el7.x86_64 system: Linux version: Not Installed",Can you provide the exception that you're seeing?,I am able to reproduce this with cisco nx-os devices consistently using netmiko proxy with always_alive = true. 1. Start the proxy 
saltstack/salt,https://github.com/saltstack/salt/issues/55670,saltstack_salt_issues_55670,"pkg.uptodate updates all packages when none specified

### Description of Issue Creating a salt `pkg.uptodate` task with only `refresh=True` ends up upgrading the host packages. According to the documentation - pkgs is a list of packages to update. Since I only want to generate a new sources.list and do an `apt update` -> I Specify `pkgs: None`. Salt however seems to ignore this parameter although the default value should also be `None` ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue ",Do you agree with this @nachness ? ,@cmcmarrow - I fully agree with you. It would be nice if this can be implemented. Until then we can use `cmd.run ... apt update`.
saltstack/salt,https://github.com/saltstack/salt/issues/55850,saltstack_salt_issues_55850,"svn checkout encoding error 

### Description of Issue When trying to checkout or update a svn repository and a filename with utf-8 encoding exists then the salt master fails with the following message: svn: E000022: Can't convert string from 'UTF-8' to native encoding: ### Steps to Reproduce Issue  ### Versions Report Salt Version: Salt: 2018.3.4 Dependency Versions: cffi: 1.12.1 cherrypy: unknown dateutil: Not Installed docker-py: 1.10.6 gitdb: 2.0.5 gitpython: 2.1.11 ioflo: 1.7.5 Jinja2: 2.8 libgit2: 0.27.7 libnacl: 1.6.1 M2Crypto: 0.31.0 Mako: 1.0.7 msgpack-pure: Not Installed msgpack-python: 0.4.6 mysql-python: Not Installed pycparser: 2.19 pycrypto: 3.7.2 pycryptodome: Not Installed pygit2: 0.27.2 Python: 3.5.2 (default, Nov 12 2018, 13:43:14) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.2.0 RAET: 0.6.8 smmap: 2.0.5 timelib: 0.2.4 Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: Ubuntu 16.04 xenial locale: ANSI_X3.4-1968 machine: x86_64 release: 5.4.7-100.fc30.x86_64 system: Linux version: Ubuntu 16.04 xenial",can you share the state or execution module command you are using when you see this?,the command is `salt-run salt.cmd svn.checkout /tmp svn://svn-server/testrepo`
saltstack/salt,https://github.com/saltstack/salt/issues/55874,saltstack_salt_issues_55874,"Docs: Clean up of booleans needed

In lots of places in the docs you have concatenations of argument and boolean, for example: `consolidateFalse` `refresh_dbTrue` `enabledTrue` Yes, I know the booleans are italic, but when you are skim reading, you end up in a position like I did today ... is it `enabled` or `enabledTrue` and hence do I need to set `enabledTrue: False` ? The docs are also not consistent in this respect either. Some arguments show the default next to them, some (most ?) don't. Someone really needs to find a way to tidy it up, either: - Come up with some magical `sed`-like command that will de-concatenate the arguments from their boolean counterpart - Get rid of all the boolean suffixes","can you point to eh exact documentation links? It must be getting rendered like that, because when i grep for them together i dont find it in the code.","@Ch3LL I've given up tracking the pages as there were so many. So as one example, try states.pkg (https://docs.saltstack.com/en/latest/ref/states/all/salt.states.pkg.html) Screenshot also attached as you mention rendering problem (screenshot taken on Firefox 72.0.1). Red arrows are my addition (obviously !) <img width=""1018"" alt=""SaltShot"" src=""https://user-images.githubusercontent.com/6958684/72542876-c32fa080-387c-11ea-801f-76baf4b0eedc.png"">"
saltstack/salt,https://github.com/saltstack/salt/issues/56069,saltstack_salt_issues_56069,"salt-cloud prints minions private key to output

### Description of Issue <!-- Note: Please direct questions to the salt-users google group. Only post issues and feature requests here --> We are running salt-cloud commands from an Orchestration via Jenkins, and saw the minions private key being printed out to the logs. I'd rather not see this in the output! Example output from the cloud.create command: ",Can you confirm this? Including the exact log message (deleting the private key/ip address) would be helpful for confirming what is going on.,"Hello! The problem is that it is being printed in the result, and that is stored in our jenkins build logs. It's not being printed to logs. We are triggering an orchestration via salt-api, and in the json formatted result we can see the private key."
saltstack/salt,https://github.com/saltstack/salt/issues/56067,saltstack_salt_issues_56067,"file.write could not handle multi-line strings

### Description of Issue <!-- Note: Please direct questions to the salt-users google group. Only post issues and feature requests here --> In saltstack 2016.11.10 we could do something like this: file.write /tmp/foobar 'foo\nbar\nbaz' and it will write three lines into /tmp/foobar. We recently upgraded to 2019.2.3 and the string is no longer interpreted so /tmp/foobar ends up with just a single line with control characters. ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) salt -E testminion file.write /tmp/foobar 'foo\nbar\nbaz' ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) ","Can you please run salt --versions-report? Also, what shell are you using?","I have updated the original post with the output of salt --versions-report. Our environment uses ksh by default (yeah, don't ask why) but even with my own machine that runs bash by default I am getting the same results. Thanks."
saltstack/salt,https://github.com/saltstack/salt/issues/56090,saltstack_salt_issues_56090,"Unable to manage file: 'module' object has no attribute 'path' on suse

### Description of Issue I'm going to execute a salt state. The first execution fails, and the second succeeds without any changes. Report the following error: salt07.suse: ---------- ID: weblogic-noproc.conf Function: file.managed Name: /etc/security/limits.conf Result: False Comment: Unable to manage file: 'module' object has no attribute 'path' Started: 02:56:58.607345 Duration: 27.992 ms Changes: Summary for salt07.suse ------------ Succeeded: 0 Failed: 1 ------------ Total states run: 1 Total run time: 27.992 ms ### Setup  ### Steps to Reproduce Issue (Include debug logs if possible and relevant.) ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) Salt Version: Salt: 2019.2.2 Dependency Versions: cffi: Not Installed cherrypy: unknown dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.7.2 libgit2: Not Installed libnacl: Not Installed M2Crypto: Not Installed Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 2.7.5 (default, Aug 4 2017, 00:39:18) python-gnupg: Not Installed PyYAML: 3.11 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.2.1 ZMQ: 4.1.4 System Versions: dist: centos 7.4.1708 Core locale: UTF-8 machine: x86_64 release: 3.10.0-693.el7.x86_64 system: Linux version: CentOS Linux 7.4.1708 Core salt06:/etc/security # salt-minion --version salt-minion 2016.11.4 (Carbon)",Could you look for a related stack trace in the salt minion logs? Something like: `grep -B1 -A10 Traceback /var/log/salt/salt_minion` on the affected minion.,"Thanks for your reply! Mail attachment is my minion logs. ------------------------------------------------------------------------------ File ""/usr/lib64/python2.6/site-packages/salt/states/file.py"", line 1967, in managed **kwargs) File ""/usr/lib64/python2.6/site-packages/salt/modules/file.py"", line 4930, in manage_file __opts__['cachedir']) File ""/usr/lib64/python2.6/site-packages/salt/utils/files.py"", line 149, in copyfile rcon = salt.utils.path.which('restorecon') AttributeError: 'module' object has no attribute 'path' ------------------------------------------------------------------------------- houtuo_job@163.com From: David Hilton Date: 2020-02-14 23:07 To: saltstack/salt CC: houtuo; Author Subject: Re: [saltstack/salt] Unable to manage file: 'module' object has no attribute 'path' on suse (#56090) Thanks! Could you look for a related stack trace in the salt minion logs? Something like: grep -B1 -A10 Traceback /var/log/salt/salt_minion on the affected minion. — You are receiving this because you authored the thread. Reply to this email directly, view it on GitHub, or unsubscribe."
saltstack/salt,https://github.com/saltstack/salt/issues/56152,saltstack_salt_issues_56152,"[salt-cloud][AzureARM] ssh_password not working

### Description of Issue <!-- Note: Please direct questions to the salt-users google group. Only post issues and feature requests here --> Salt Cloud|AzureARM Compute CloudError has occurred: 'adminPassword' is missing (null) Salt-cloud fail to create linux vm to azure unless `disable_password_authentication: True` And password won't be set even if I put ssh_password and `disable_password_authentication: True` We can use key authentication instead but it would be better to fix this. This is similar issue: https://github.com/saltstack/salt/issues/54767 ### Setup (Please provide relevant configs and/or SLS files (Be sure to remove sensitive info).) profile:  ### Versions Report (Provided by running `salt --versions-report`. Please also mention any differences in master/minion versions.) I've used this pip modules: https://raw.githubusercontent.com/saltstack/salt/v2019.2.2/requirements/static/py3.6/cloud.txt Salt Version: Salt: 2019.2.2 Dependency Versions: cffi: 1.13.2 cherrypy: Not Installed dateutil: 2.8.1 docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed ioflo: Not Installed Jinja2: 2.8.1 libgit2: Not Installed libnacl: Not Installed M2Crypto: 0.35.2 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.5.6 mysql-python: Not Installed pycparser: 2.19 pycrypto: Not Installed pycryptodome: Not Installed pygit2: Not Installed Python: 3.6.8 (default, Aug 7 2019, 17:28:10) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 15.3.0 RAET: Not Installed smmap: Not Installed timelib: Not Installed Tornado: 4.4.2 ZMQ: 4.1.4 System Versions: dist: centos 7.7.1908 Core locale: ANSI_X3.4-1968 machine: x86_64 release: 3.10.0-514.10.2.el7.x86_64 system: Linux version: CentOS Linux 7.7.1908 Core",What's the intended operation here? Use both a password and an ssh key?,Mainly I want to use password authentication. But both is also nice
saltstack/salt,https://github.com/saltstack/salt/issues/56142,saltstack_salt_issues_56142,"x509 Documentation -> mine.send not working

### Description of Issue I'm trying to set up a CA based on the example provided in https://docs.saltstack.com/en/latest/ref/states/all/salt.states.x509.html and also using https://backbeat.tech/blog/using-saltstack-for-internal-ssl-certificates/ as a reference. AFAICT the documented mine.send for the ca.crt is not working. I find two issues: * The onchange does not trigger if the ca.crt already exists * After removing the onchange, I get a `The following arguments are missing: m_name` ### Setup The setup is basically the example provided in the documentation with no changes. ### Steps to Reproduce Issue Follow the documentation. ### Versions Report ",Could you please confirm it isn't the case?,"Ah sorry, M2Crypto is installed on the minion. The states that require M2Crypto work well. That means the CA is being generated. Just to be sure I now installed M2crypto on the Salt master as well, but that does not change the outcome. I guess what @OrangeDog is saying is correct. That is also what the blog entry on backbeat.tech says about `module.run`."
saltstack/salt,https://github.com/saltstack/salt/issues/56411,saltstack_salt_issues_56411," ""comment"":""Unable to manage file: ""

When I copy files： oozie_cp_file: file.managed: - name: {{ pillar['oozie.home_path'] }}oozie-5.2.0.tar.gz - source: salt://oozie/oozie-5.2.0.tar.gz - user: root - group: root - mode: 755 - makedirs: True return : { ""file_|-oozie_cp_file_|-/home/oozie-5.2.0.tar.gz_|-managed"":{ ""comment"":""Unable to manage file: "", ""name"":""/home/oozie-5.2.0.tar.gz"", ""start_time"":""03:37:49.519210"", ""result"":false, ""duration"":7660.117, ""__run_num__"":0, ""__sls__"":""oozie.oozie_cp_file"", ""changes"":{ }, ""__id__"":""oozie_cp_file"" } } minion log: 2020-03-19 03:37:57,178 [salt.state :322 ][ERROR ][19454] Unable to manage file: file size: oozie-5.2.0.tar.gz 851M I can't find the reason for the failure！",What is your output of `salt --versions` ? Also what is/are the command(s) you run when seeing this behavior? Thanks.,salt 3000
saltstack/salt,https://github.com/saltstack/salt/issues/56721,saltstack_salt_issues_56721,"[BUG] shadow.gen_password raises an exception

**Description** The function `shadow.gen_password ` crash with the error message  </details>",Can you verify it works either on version 3000 or when you apply the change in the PR?,I confirm that applying the following patch to Salt 2019.2.3:  and restarting the `salt-minion` process solves the issue. Thanks!
saltstack/salt,https://github.com/saltstack/salt/issues/56823,saltstack_salt_issues_56823,"salt-cloud fails during fixed IPs creation and provisioning GCE instances

**Description** salt-cloud 2019.2.3, gce provider. salt-cloud fails during fixed IPs creation and provisioning GCE instances. **Setup**  </details>",Can you try defining it there first and designating it in the profile?,"According to documentation https://docs.saltstack.com/en/latest/topics/cloud/gce.html#external-ip ""vpnX"" static (fixed) IPs should be created: Please read the issue description first. Also, it's saying `TypeError: can't serialize <GCERegion id=""1340"" name=""europe-west4"", status=""UP"">` which is definitely serialization issue and related to code. Another one issue which you already answered, IPs were pre-created here: **salt-cloud fails during provisioning GCE instances with pre-created fixed IPs** https://github.com/saltstack/salt/issues/56824"
saltstack/salt,https://github.com/saltstack/salt/issues/57050,saltstack_salt_issues_57050,"salt-api calls fail due to wsgiref string assertion

**Description** salt-api calls fail on salt-master 2018.3.5 (also observed on 2019.2.4 and 3000.2) packages for centos6 (python 2.7). With these versions, unicode_literals is being imported, which results in unicode status codes being passed to wsgiref's start_response(). This fails string assertion and a 500 is returned to the caller. **Setup** Install versions noted above of salt, salt-master and salt-api on centos 6 and start the salt-api service (in the foreground if possible). - sample config: rest_wsgi: address: ""127.0.0.1"" port: 8011 debug: True backlog: 128 disable_ssl: True webhook_disable_auth: True **Steps to Reproduce the behavior** - Curl the service after startup (e.g., http://127.0.0.1:8011) - An internal error 500 is return along with the following stream (if the service has been foregrounded): Starting salt-api daemon: Traceback (most recent call last): File “/usr/lib64/python2.7/wsgiref/handlers.py”, line 85, in run self.result = application(self.environ, self.start_response) File “/usr/lib/python2.7/site-packages/salt/netapi/rest_wsgi.py”, line 293, in application ‘Content-Type’: ‘application/json’, File “/usr/lib64/python2.7/wsgiref/handlers.py”, line 173, in start_response assert type(status) is StringType,“Status must be a string” AssertionError: Status must be a string Curl the service after startup. **Expected behavior** 200 Response with json. **Versions Report** <details><summary>salt --versions-report</summary> (Provided by running salt --versions-report. Please also mention any differences in master/minion versions.)  </details>",Can you check to see if this works under Python3?,"Confirmed with 3.6.8/cent7, although the error is slightly different now with python3's use of Bytes(). I would almost say that support for rest_wsgi should be dropped since cherrypy and tornado are probably better choices. Anyways, here is an example error: May 07 23:57:13 salt-master salt-api[6685]: Exception happened during processing of request from ('127.0.0.1', 35286) May 07 23:57:13 salt-master salt-api[6685]: Traceback (most recent call last): May 07 23:57:13 salt-master salt-api[6685]: File ""/usr/lib64/python3.6/wsgiref/handlers.py"", line 138, in run May 07 23:57:13 salt-master salt-api[6685]: self.finish_response() May 07 23:57:13 salt-master salt-api[6685]: File ""/usr/lib64/python3.6/wsgiref/handlers.py"", line 180, in finish_response May 07 23:57:13 salt-master salt-api[6685]: self.write(data) May 07 23:57:13 salt-master salt-api[6685]: File ""/usr/lib64/python3.6/wsgiref/handlers.py"", line 266, in write May 07 23:57:13 salt-master salt-api[6685]: ""write() argument must be a bytes instance"" May 07 23:57:13 salt-master salt-api[6685]: AssertionError: write() argument must be a bytes instance May 07 23:57:13 salt-master salt-api[6685]: During handling of the above exception, another exception occurred: May 07 23:57:13 salt-master salt-api[6685]: Traceback (most recent call last): May 07 23:57:13 salt-master salt-api[6685]: File ""/usr/lib64/python3.6/wsgiref/handlers.py"", line 141, in run May 07 23:57:13 salt-master salt-api[6685]: self.handle_error() And here is the salt-master -V output: Salt Version: Salt: 3000.2 Dependency Versions: cffi: Not Installed cherrypy: 5.6.0 dateutil: Not Installed docker-py: Not Installed gitdb: Not Installed gitpython: Not Installed Jinja2: 2.11.1 libgit2: Not Installed M2Crypto: 0.35.2 Mako: Not Installed msgpack-pure: Not Installed msgpack-python: 0.6.2 mysql-python: Not Installed pycparser: Not Installed pycrypto: 2.6.1 pycryptodome: Not Installed pygit2: Not Installed Python: 3.6.8 (default, Apr 2 2020, 13:34:55) python-gnupg: Not Installed PyYAML: 3.12 PyZMQ: 15.3.0 smmap: Not Installed timelib: Not Installed Tornado: 4.5.3 ZMQ: 4.1.4 System Versions: dist: centos 7.8.2003 Core locale: UTF-8 machine: x86_64 release: 3.10.0-1127.el7.x86_64 system: Linux version: CentOS Linux 7.8.2003 Core"
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/18047,mantidproject_mantid_issues_18047,"MantidPlotMatplotlibTest fails with python 3 and matplotlib 1.5

The sporadic failing test on Ubuntu 16.04 when using python 3 is MantidPlotMatplotlibTest.py http://builds.mantidproject.org/job/master_clean-ubuntu-16.04-python3/ Ubuntu 14.04 doesn't see this problem because it's running matplotlib `v1.3.1` I can reproduce this with `ctest --output-on-failure --repeat-until-fail 100 -R MantidPlotMatplotlibTest` and it will fail with  It is failing on [`plt.close('all')`](https://github.com/mantidproject/mantid/blob/master/MantidPlot/test/MantidPlotMatplotlibTest.py#L26) and can be fixed by changing it to the same as [`gui_cmd(plt.close, 'all')`](https://github.com/mantidproject/mantid/blob/master/MantidPlot/test/MantidPlotMatplotlibTest.py#L31). @martyngigg What is the best solution here? Can I just change it to use `gui_cmd(plt.close, 'all')` regardless of the matplotlib version?",Does it happen with `python2` and `matplotlib` 1.5?,"No just python3, otherwise we would see this with our Ubuntu 16.04 pull requests and incremental builds. And it fails quite frequently on the python3 ubuntu 16.04 build http://builds.mantidproject.org/job/master_clean-ubuntu-16.04-python3/"
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/21620,mantidproject_mantid_issues_21620,"Memory leak when using setX

@martyngigg I'm guessing this was introduced with #21407 When I run the following ~6Gb of memory gets used every iteration. The `3.11.0` release doesn't have this problem. ",Can this wait until next week for me to look at it?,"@martyngigg Yep, no problem. It just should probably be fixed before the release."
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/22241,mantidproject_mantid_issues_22241,"MantidPlot segfaults on exit with sip 4.19.8

Downgrading to `4.19.7` fixes the problem. The only significant change from `4.19.7` to `4.19.8` was [this](https://www.riverbankcomputing.com/hg/sip/rev/71bfa703c4ee). The same crash was [observed with krita](https://bugs.kde.org/show_bug.cgi?id=391992) and discussed on the [PyQt mailing list](https://www.riverbankcomputing.com/pipermail/pyqt/2018-March/040140.html).  Any thoughts @martyngigg ?",Can you try adding a `delete m_interpreterDock` to [ApplicationWindow::closeEvent](https://github.com/mantidproject/mantid/blob/master/MantidPlot/src/ApplicationWindow.cpp#L9831)?,@martyngigg :+1: Yep that fixes it. Thanks! Did you want to PR that and I will test it :grinning:
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/16313,mantidproject_mantid_issues_16313,"BASISReduction uses vanadium from previous run even when not requested

### Expected behavior Normalization by Vanadium should not be used if property `DivideByVanadium` is set to `False` ### Actual behavior Normalization occurs irrespective of the value of property `DivideByVanadium` is a vanadium run number is set. ### Steps to reproduce the behavior Perform a first reduction with `DivideByVanadium` is set to `True`. Then, perform a second reduction with `DivideByVanadium` is set to `False`. The second reduction will also carry out the normalization in spite of `DivideByVanadium` is set to `False` ### Platforms affected All",Should this be moved to R3.8?,"I'm sorry, this has been fixed so the issue can actually be closed ( https://github.com/mantidproject/mantid/pull/16314) On Tue, May 31, 2016 at 12:37 PM, NickDraper notifications@github.com wrote:"
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/17597,mantidproject_mantid_issues_17597,"fit function to model QENS data with Teixeira water

A fitfunction to model the Q-dependence of the FWHM from a lorentzian fit is already implemented in fit function TeixeiraWater. This fit function is the Lorentzian with its FWHM given by the Teixeira model, in order to directly fit QENS data.",Can this read the Q values from the workspace to do a sequential fit?,@SpencerHowells You mean something like the `WorkspaceIndex` property that was included in [InelasticDiffSphere](https://github.com/mantidproject/mantid/blob/master/Framework/CurveFitting/src/Functions/InelasticDiffSphere.cpp) ?
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/19386,mantidproject_mantid_issues_19386,"BASIS instrument view reverted to showing the neutronic positions

Pull request #18906 has caused BASIS to display neutronic positions when User requests `Show Instrument`. The current BASIS IDF in master only contains neutronic positions but the problem persists when using and IDF containing both neutronic and real positions. Thus, there are two issues here.",Maybe you can fix the BASIS definition in the meantime?,@SimonHeybrock Thanks a million for taking the time and for spotting the bug in the latest instrument definition file. I'll fix the IDF right away. Update: pull request #19422 with correct BASIS IDF.
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/26924,mantidproject_mantid_issues_26924,"Make IPython custom shell compatible with IPython >= 7.1

### Actual behavior: Any command in the IPython console of MantidPlot results in the following error:  ### Cause: [IPython.core.interactiveshell.run_code()](https://ipython.readthedocs.io/en/7.1.0/api/generated/IPython.core.interactiveshell.html?highlight=run_code#IPython.core.interactiveshell.InteractiveShell.run_code) for IPython >= 7.1 is not a function by an `asyncio` coroutine Other useful links: - [our_run_code()](https://github.com/mantidproject/mantid/blob/master/MantidPlot/ipython_widget/mantid_ipython_widget.py#L39) - [async_run_code()](https://github.com/mantidproject/mantid/blob/master/qt/python/mantidqt/widgets/jupyterconsole.py#L74).",What error are you seeing in Workbench?,"See the below screenshot (please ignore the HDF5 related error). The error is thrown only once, on entering the first command. I guess because is initializing some object that will be reused for subsequent commands. I'm using Python 3/IPython 7.7.0 ![Selection_009](https://user-images.githubusercontent.com/1136006/66067893-8da7b700-e51a-11e9-899d-ac9e69935821.png)"
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/18399,mantidproject_mantid_issues_18399,"Reflectometry interface (Polref): make processing instructions work properly

This issue is similar to https://github.com/mantidproject/mantid/issues/18208. ### Expected behavior Users should be able to enter processing instructions like this: `3, 4` in the `Settings` tab. ### Actual behavior An error message is shown (`Invalid key value pair, '4'`) which is not very useful. ### Steps to reproduce the behavior Open Reflectometry (Polref) interface, set instrument to `INTER` and enter the following data in the table: - Run(s): 13460 - Angle: 0.7 Then go to `Settings` and enter `3, 4` in `ProcessingInstructions`. ### Platforms affected All.",Should I apply this to all other quoted setting values (such as direct beam)?,"Yes, similar properties will have the same problem."
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/28652,mantidproject_mantid_issues_28652,"New SANS Interface in MantidPlot 5.0.0 not loading old (2013) data

Reported by Rob Dalgliesh. Verified by Steve King. MantidPlot 5.0.0 on W10/x64 Complete data package for testing: [For_ExPaNDS.zip](https://github.com/mantidproject/mantid/files/4586213/For_ExPaNDS.zip) ### Expected behavior The new SANS Interface should be intelligent enough to reduce legacy data. ### Actual behavior Attempting to process the attached LOQ data from the batch file reduce_gfp: ![image](https://user-images.githubusercontent.com/10938679/81168698-63761600-8f8f-11ea-8b0b-f6c7ebb3fd33.png) results in this error:  Suspecting an issue with the -add files, tried loading those through the Workspace box generic Load button. They load fine and display correctly. Switching to the old (now deprecated) SANS Interface (still in 5.0.0), everything works fine. ![image](https://user-images.githubusercontent.com/10938679/81168915-d2536f00-8f8f-11ea-82bf-08e66a61201f.png)",Do you have an example with added event data that I can test with?,I can certainly dig some up for you!
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/17405,mantidproject_mantid_issues_17405,"Refactor CompareSampleLogs

<!-- TEMPLATE FOR BUG REPORTS --> ### Expected behavior Experience shows, that sometimes numeric sample logs are represented as strings. However, users expect them to be compared as numbers (with certain tolerance). The aim of the refactoring is to implement the behaviour expected by users, e.g. compare temperatures as numbers, even if they have type 'String'. ### Platforms affected All Please, assign me.",What about adding the 'State: In Progress' label?,"@soininen: I've submitted the pull request already and I am waiting for review. I think, that the label 'In Progress' is for that pull requests which should not be reviewed yet."
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/23101,mantidproject_mantid_issues_23101,"Workbench - issues accessing plot window from script window

Accessing the plots from the script editor, e.g. to close or hide plots, rename the window etc. cause crashes in the workbench on Windows. ![windows_error](https://user-images.githubusercontent.com/7047413/43208837-93abf1ec-902b-11e8-88e7-64dfeb9b2b7d.PNG) ### Steps to Reproduce Make a figure, e.g. `plt.plot([1,2,3])` or `plt.figure()`. Any of the following commands cause the crash on Windows: Window calls: * `plt.figure(1).canvas.window().setWindowTitle('0.5')` * `plt.gcf().canvas.window().hide()` * `plt.figure(1).canvas.window().repaint()` Canvas calls: * `plt.figure(1).canvas.setWindowTitle('Blah')` * `plt.figure(1).canvas.setVisible(False)` * **This works!** - `plt.figure(1).canvas.set_window_title('NewName')` The same problems occur in both the editor window and the IPython console. ### Platforms affected Problems seem to occur on Windows, and not occur on Ubuntu 16.04.",Can we do something similar?,"@martyngigg I have pushed some changes doing something similar for the window and toolbar. This would need careful testing if we go with this approach, it is hard to reliably get all the correct things to wrap. I am not sure if there are other things that could generate this error, presumably if you can get to other widget items (buttons in the toolbar perhaps?) you could get the same errors."
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/22242,mantidproject_mantid_issues_22242,"Instrument view shows now a gap between left and back SANS detectors

LoadEmptyInstrument D33: Release 3.12: ![release3-12-sansd33view](https://user-images.githubusercontent.com/19187274/38240319-965f78b4-372f-11e8-8d2f-8e7cbd19f907.png) Master: ![mastersansd33view](https://user-images.githubusercontent.com/19187274/38240326-9b9bf53c-372f-11e8-9c1e-f6b86e7d5dd3.png) Expected behavior: - no zickzack in particular when detector defines rectangular pixels in xy plane - there should not be a gap between the left and back detector (it suggests that the IDF is wrong!)",How urgent is the fix required in Master for this?,The instrument view was my IDF verification tool for D33. I trust it in terms of updating the IDF. Just let me know when I can have a look at it again. Thanks for your investigations.
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/18987,mantidproject_mantid_issues_18987,"Indirect ConvFit - truncated delta function

When using ConvFit, there is no parameter for PeakRadius (this was implemented in 3.9 - see PR #18137) This means the default value of 0 is used and gives a strange looking result: ![convfit](https://cloud.githubusercontent.com/assets/12883435/23270124/c77968ca-f9ea-11e6-866f-c0bbba8af2e3.jpg) The delta function (cyan) should be smooth but it is truncated.",How does a delta function work? Does it just scale the resolution? If so it would explain the shape because it has the x- range of the res function.,The truncated data isn't to do with the peak radius. I will make a separate issue for this
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/18793,mantidproject_mantid_issues_18793,"HistogramData rollout: QwtWorkspaceBinData.cpp to DPDFInputDataControl.cpp

This issue is part of the HistogramData rollout, see #17641. Algorithms covered in this issue are: - MantidQt/API/src/QwtWorkspaceBinData.cpp - MantidQt/API/src/QwtWorkspaceSpectrumData.cpp - MantidQt/CustomDialogs/src/FitDialog.cpp - MantidQt/CustomInterfaces/inc/MantidQtCustomInterfaces/MultiDatasetFit/MDFDatasetPlotData.h - MantidQt/CustomInterfaces/inc/MantidQtCustomInterfaces/Muon/ALCBaselineModellingView.h - MantidQt/CustomInterfaces/inc/MantidQtCustomInterfaces/Muon/ALCDataLoadingView.h - MantidQt/CustomInterfaces/inc/MantidQtCustomInterfaces/Muon/ALCPeakFittingView.h - MantidQt/CustomInterfaces/src/DynamicPDF/DPDFDisplayControl.cpp - MantidQt/CustomInterfaces/src/DynamicPDF/DPDFFourierTransform.cpp - MantidQt/CustomInterfaces/src/DynamicPDF/DPDFInputDataControl.cpp",Do you think you would be able to monitor the outcome of the fix?,@SimonHeybrock Do you know what plotting is being broken here?
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/21619,mantidproject_mantid_issues_21619,"FitFunction TeixeiraWater lacks Planck constant

FitFunction ""TeixeiraWater"" models the Q dependence of the QENS line width (Gamma (hwhm)) as hwhm = xvals * xvals * length / (tau * (1 + xvals * xvals * length)) where xvals is Q and length is L^2 Shouldn't be like that: hwhm = hbar * xvals * xvals * length / (tau * (6 + xvals * xvals * length)) ? HWHM contains hbar as it's presented in FitFunction ""TeixeiraWaterSQE"". Also, if diffusion coefficient D=L^2/(6*tau), then 6 goes in place of 1.",Could you please address this issue? You can check [TeixeiraWaterSQE](https://github.com/mantidproject/mantid/blob/master/Framework/CurveFitting/src/Functions/TeixeiraWaterSQE.cpp) for comparison,"A lack of Planck constant is possible to overcome by dividing Gamma into hbar. However, as diffusion coefficient D=L^2/(6*tau), then 6 goes in place of 1 in original: hwhm = xvals * xvals * length / (tau * (1 + xvals * xvals * length)) Could you, please, modify this? I am not allowed to change the script. Also, is the fitting parameter ""L"" a length (i.e. square root of the ""length"" in the formula)?"
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/22845,mantidproject_mantid_issues_22845,"Compton Gaussian Profile in fitting causes a hard crash

<!-- TEMPLATE FOR BUG REPORTS --> This crash case existed in Mantid 3.12. It is related to allowing any type of function to be used in conjunction with the plot guess option ### Expected behavior Mantid should be able to handle Gaussian Compton Profile. ### Actual behavior Mantid crashes in the Indirect Interface is Gaussian Compton Profile is added ### Steps to reproduce the behavior Go to Indirect> Data Analysis > ConvFit * In ConvFit load the sample and resolution provided below * Choose Fit Type to be One Lorentzian * Check Plot Guess * Choose Add Function * Choose General > Gaussian Compton Profile * Mantid crashes [QENSFitTestFiles.zip](https://github.com/mantidproject/mantid/files/2177045/QENSFitTestFiles.zip) ### Platforms affected All",How do you propose to stop users selecting totally inappropriate functions? Should we?,@SpencerHowells. Fair enough point. I think that we could just block these functions completely. As it stands a user could mistakenly add the function and bring the whole code crashing down; we certainly need to stop this happening!!
mantidproject/mantid,https://github.com/mantidproject/mantid/issues/24184,mantidproject_mantid_issues_24184,"Unscripted Testing Vates

You have been assigned unscripted testing. The hope is to catch as many problems with the code before release, so it would be great if you can take some time to give a serious test to your assigned area. Thank you!! The general guide to unscripted testing: * The tests must be performed on the installer versions of the final release candidate. Not on local compiled code. * Serious errors involving loss of functionality, crashes etc. should be raised as issues with the current release as a milestone and an email sent to the project manager immediately. * Minor and cosmetic issues should be raised as issues against the forthcoming releases. * First try things that should work, then try to break Mantid, e.g. entering invalid values, unexpected characters etc. * Don't spend more than a few hours on the testing as fatigue will kick in. * If you find errors in the documentation, please correct them. * Comment against this ticket the OS environment you are testing against. * Close the this issue once you are done. ### Specific Notes: # VSI Testing <div class=""contents""> </div> *Preparation* - Get the scripts from the Mantid repository [this directory](https://github.com/mantidproject/mantid/tree/master/scripts/Vates). - Make sure that you have the Mantid system test data. You can do this by building a SystemTestData target of Mantid. - Put the system test data directory in your Mantid user directories **Time required 20-30 minutes** ----- 1. Load the script SXD\_NaCl.py in MantidPlot. Run it. 2. This should load a workspace called QLab. Right-click this workspace and choose 'Show Vates simple interface'. 3. This should open the VSI window. Like the picture below. Check that all tabs are present. ![vates](https://user-images.githubusercontent.com/3697636/49378715-33c13f80-f705-11e8-9d88-71cdeadffe8f.png) 1. Click the various tabs making sure that the interface does not crash. 2. Make sure all tabs have a tool tip when you hover over them. 3. Go into three slice mode (the star shaped tab at the top). 4. Play with the maximum and minimum parameters at the top of the plot, make sure the colours change in the plot. 5. Hover on each of the upper two plots and the lower left plot. While hovering over a plot use the roll bar (or equivalent), the slices in the other plots should update. The lower right plot should show all three slices. Check that the text on the plots is legible and updates appropriately. 6. Switch to multi-slice view (just to the left of three slice view). 1. In the properties tab (left of the plot) select the Display menu. 2. Choose all options for Representation, make sure they work. 3. Change the Styling and Lighting sliders, make sure the picture updates. 4. Next to Data Axes Grid click edit, this should open a new dialog of settings for the plot. 5. Change some of the properties in this dialog and click apply, the plot should update accordingly. 6. Make sure that the sliders for the plot work. These are the triangles on the scales above and to the left of the plot. Slide them and move through the plot. 7. On the slider scale Shift+Right-click should add another slice 8. Select the View menu. 9. Turn on/off the orientation axes visibility, check that the little axes icon on the plot turns on and off. 10. Check and uncheck the parallel camera box, make sure the view switches between perspective on and off. 7. Switch to standard view (left of multi-slice) 1. In the Rebin drop-down (above the plot) select Fast Rebin and click Slice - a new MDScaleWorkspace should appear in the list 2. In the Properties tab select Properties and change the X/Y/Z scaling factors, click Apply. The plot should distort accordingly. 3. In the properties tab click Delete and the plot alterations should be removed from the plot. 4. Repeat the previous three steps for the different Rebin options. 8. Close the VSI interface and then reopen as before. You are now in scatter plot mode. 1. Under Properties, change the Number of Points and Top Percentile settings and see that the plot changes. 2. Drag the peaks\_qLab workspace from the main GUI onto VSI. This should show the peak position in the plot as points. 3. Drag the peaks\_qLab\_integrated workspace from the main GUI onto VSI. This should show the peak positions in the plot as spheres. 9. Close the VSI GUI.",Double-click adds a new slice?,Some updating of the directions required.
